import{_ as C,a2 as g,k as n,W as y,o as c,l as f,F as i,G as m,v as r,L as E,m as k,T as x,R as A,ag as S,B as b,C as T,E as B,q,I as P,x as N}from"../../../../v9.4.0.5/chunks/bootstrap.js";import{r as O,A as L}from"../../../../v9.4.0.5/chunks/adminRouter.js";import{a as M}from"../../../../v9.4.0.5/chunks/DataTableActions.js";import"../../../../v9.4.0.5/chunks/vue-router.js";import"../../../../v9.4.0.5/chunks/FormGenerator.js";import"../../../../v9.4.0.5/chunks/AdminNavigationBar.js";import"../../../../v9.4.0.5/chunks/Checkbox.js";import"../../../../v9.4.0.5/chunks/HelpSection.js";const V={name:"CustomCssIndex",data(){return{apiUrl:"get-custom-css",loading:!1,columns:["name","fired_at","fire","action"],options:{}}},beforeMount(){const t=this;this.options={headings:{name:t.lang("name"),fired_at:t.lang("fired_at"),fire:t.lang("status"),action:t.lang("actions")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{fire:function(e,s){if(s.fire==1)return t.h("span",{class:"btn btn-success btn-sm",style:"cursor: default"},g("active"));if(s.fire==0)return t.h("span",{class:"btn btn-danger btn-sm",style:"cursor: default"},g("inactive"))},fired_at:function(e,s){return s.formatted_fired_at?s.formatted_fired_at:s.fired_at},action:(e,s)=>t.h(M,{data:s})},requestAdapter(e){return{"sort-field":e.orderBy?e.orderBy:"id","sort-order":e.ascending?"desc":"asc","search-query":e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.message.data.map(s=>(s.delete_url=t.basePath()+"/custom-css/delete/"+s.id,s.edit_url="/custom-css/edit/"+s.id,s)),count:e.message.total}},orderBy:{column:"id",ascending:!0},sortable:["name"],filterable:["name"],pagination:{chunk:5,nav:"fixed",edge:!0}}}},I={class:"main col-sm-12"},H={class:"card-tools"},R={class:"row",id:"custom-css-view"};function W(t,e,s,o,a,l){const d=n("alert"),p=n("router-link"),u=n("data-table"),_=n("faveo-box"),h=y("tooltip");return c(),f("div",I,[i(d,{componentName:"dataTableModal"}),i(_,{title:t.lang("custom-css")},{headerMenu:m(()=>[r("div",H,[E((c(),k(p,{class:"btn btn-tool",to:"/custom-css/create"},{default:m(()=>e[0]||(e[0]=[r("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[h,{content:t.lang("create_custom_css"),placement:"left"}]])])]),default:m(()=>[r("div",R,[i(u,{url:a.apiUrl,dataColumns:a.columns,option:a.options,scroll_to:"custom-css-view",class:"col-sm-12"},null,8,["url","dataColumns","option"])])]),_:1},8,["title"])])}const j=C(V,[["render",W]]),U={name:"CustomCssCreateEdit",components:{"text-field":x,"radio-button":A,"static-select":S},data(){return{name:"",fired_at:"",firedAtElements:[{id:"adminlayout",name:"Admin Layout"},{id:"agentlayout",name:"Agent Layout"},{id:"clientlayout",name:"Client Layout"}],radioOptions:[{name:"active",value:1},{name:"inactive",value:0}],isDisabled:!1,script:"",fire:1,loading:!1,idForEdit:0}},beforeMount(){this.setDefaultProps()},mounted(){this.idForEdit&&this.getDetailsForEdit()},computed:{componentTitle(){return this.idForEdit?this.lang("custom_css_edit"):this.lang("custom_css_create")}},methods:{setDefaultProps(){let t=location.href;if(t.includes("edit")){let e=t.split("/").length;this.idForEdit=t.split("/")[e-1]}},onChange(t,e){this[e]=t},async submit(){this.loading=!0;let t,e,s={fired_at:this.fired_at,script:this.script,name:this.name,fire:this.fire};this.idForEdit?(t=`custom-css/edit/${this.idForEdit}`,e="PATCH"):(t="custom-css/create",e="POST");try{let o=await b.request({method:e,url:t,data:s});this.$store.dispatch("unsetValidationError"),T(o,"customCss"),this.idForEdit?this.redirect(window.location.href.replace(this.basePath(),"")):this.fired_at=="adminlayout"?this.redirect("/admin/custom-css/settings"):setTimeout(()=>{this.$router.push({name:"CustomCss Settings"})},2e3)}catch(o){B(o,"customCss")}finally{this.loading=!1,await this.getDetailsForEdit()}},async getDetailsForEdit(){try{let{data:t}=await b.get(`custom-css/${this.idForEdit}`);this.updateStatesWithData(t.message)}catch{}},updateStatesWithData(t){const e=this,s=this.$data;Object.keys(t).map(o=>{s.hasOwnProperty(o)&&(e[o]=t[o])})}}},G={id:"main",class:"col-sm-12"},z={class:"row"},J={class:"row"},K={class:"card-footer"},Q=["disabled"];function X(t,e,s,o,a,l){const d=n("alert"),p=n("custom-loader"),u=n("text-field"),_=n("static-select"),h=n("radio-button"),D=n("faveo-box"),w=y("focus-first-input");return c(),f("div",G,[i(d,{componentName:"customCss"}),a.loading?(c(),k(p,{key:0})):q("",!0),i(D,{title:l.componentTitle},{actions:m(()=>[r("div",K,[r("button",{type:"button",id:"submitter",onClick:e[0]||(e[0]=(...F)=>l.submit&&l.submit(...F)),class:"btn btn-primary",disabled:a.isDisabled},[e[1]||(e[1]=r("i",{class:"fas fa-save","aria-hidden":"true"},null,-1)),P(" "+N(t.lang("submit")),1)],8,Q)])]),default:m(()=>[E((c(),f("div",z,[i(u,{name:"name",value:a.name,"on-change":l.onChange,placehold:t.lang("enter_a_value"),label:t.lang("name"),type:"text",required:!0,classname:"col-sm-4"},null,8,["value","on-change","placehold","label"]),i(_,{name:"fired_at",value:a.fired_at,"on-change":l.onChange,label:t.lang("fired_at"),elements:a.firedAtElements,required:!0,classname:"col-sm-4"},null,8,["value","on-change","label","elements"]),i(h,{options:a.radioOptions,label:t.lang("fire-css"),name:"fire",value:a.fire,onChange:l.onChange,classname:"col-sm-4"},null,8,["options","label","value","onChange"])])),[[w]]),r("div",J,[i(u,{value:a.script,name:"script",type:"textarea","on-change":l.onChange,placehold:t.lang("enter_a_value"),classname:"col-sm-12",label:t.lang("script"),required:!0,rows:"6"},null,8,["value","on-change","placehold","label"])])]),_:1},8,["title"])])}const v=C(U,[["render",X]]);let Y={path:"/custom-css",component:L,name:"CustomCSS",redirect:"/custom-css/settings",children:[{path:"settings",component:j,name:"CustomCss Settings",meta:{title:"custom-css",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"custom-css"}}},{path:"create",component:v,name:"CustomCss Create",meta:{title:"custom-css",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},parent_link:{name:"custom-css",to:"/custom-css"},active:"create"}}},{path:"edit/:id",component:v,name:"CustomCss Edit",meta:{title:"custom-css",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},parent_link:{name:"custom-css",to:"/custom-css"},active:"edit"}}}]};O.addRoute(Y);

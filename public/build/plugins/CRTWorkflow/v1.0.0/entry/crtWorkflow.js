import{_ as k,B as u,E as d,C as g,R as q,k as n,o as a,l as s,F as c,v as r,x as _,q as i,I as v}from"../../../../v9.4.0.5/chunks/bootstrap.js";import{r as b,A as y}from"../../../../v9.4.0.5/chunks/adminRouter.js";import"../../../../v9.4.0.5/chunks/vue-router.js";import"../../../../v9.4.0.5/chunks/FormGenerator.js";import"../../../../v9.4.0.5/chunks/AdminNavigationBar.js";import"../../../../v9.4.0.5/chunks/DataTableActions.js";import"../../../../v9.4.0.5/chunks/Checkbox.js";import"../../../../v9.4.0.5/chunks/HelpSection.js";const C={name:"crt-workflow-settings",data(){return{hasDataPopulated:!1,loading:!0,pageLoad:!1,crtworkflow_requester_and_cc:"",ccOptions:[{name:"yes",value:1},{name:"no",value:0}],reqOptions:[{name:"ticket_requester_and_cc",value:"ticket_requester_and_cc"},{name:"recur_requester_and_cc",value:"recur_requester_and_cc"}]}},beforeMount(){this.getValues()},methods:{getValues(){u.get("/api/crtworkflow/settings").then(e=>{this.hasDataPopulated=!0,this.loading=!1,this.crtworkflow_requester_and_cc=e.data.data.crtworkflow_requester_and_cc}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,d(e,"crt")})},onChange(e,t){this[t]=e},onSubmit(){let e={};e.crtworkflow_requester_and_cc=this.crtworkflow_requester_and_cc,this.pageLoad=!0,u.post("/api/crtworkflow/settings",e).then(t=>{this.pageLoad=!1,g(t,"crt"),this.getValues()}).catch(t=>{this.pageLoad=!1,d(t,"crt")})}},components:{"radio-button":q}},D={class:"col-sm-12"},L={class:"card card-light"},P={class:"card-header"},R={class:"card-title"},V={class:"card-body"},S={key:0,class:"row"},B={key:1,class:"row"},N={key:0,class:"card-footer"},T={key:0,class:"row"};function O(e,t,E,F,o,l){const p=n("alert"),m=n("reuse-loader"),h=n("radio-button"),f=n("custom-loader");return a(),s("div",D,[c(p,{componentName:"crt"}),r("div",L,[r("div",P,[r("h3",R,_(e.trans("settings")),1)]),r("div",V,[!o.hasDataPopulated||o.loading?(a(),s("div",S,[c(m,{"animation-duration":4e3,size:60})])):i("",!0),o.hasDataPopulated?(a(),s("div",B,[c(h,{options:o.reqOptions,label:e.trans("select_requester_of_ticket"),name:"crtworkflow_requester_and_cc",value:o.crtworkflow_requester_and_cc,onChange:l.onChange,classname:"form-group col-sm-12",hint:e.trans("crtworkflow_requester_and_cc_tooltip")},null,8,["options","label","value","onChange","hint"])])):i("",!0)]),o.hasDataPopulated?(a(),s("div",N,[r("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...w)=>l.onSubmit&&l.onSubmit(...w))},[t[1]||(t[1]=r("i",{class:"fas fa-sync-alt"},null,-1)),v(" "+_(e.trans("update")),1)])])):i("",!0)]),o.pageLoad?(a(),s("div",T,[c(f,{duration:4e3})])):i("",!0)])}const W=k(C,[["render",O]]);let A={path:"/crtworkflow",component:y,name:"CRTWorkflow",redirect:"/crtworkflow/settings",children:[{path:"settings",component:W,name:"CRTWorkflow Settings",meta:{title:"crtworkflow_settings",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"crtworkflow"}}}]};b.addRoute(A);window.emitter.on("workflow-action-dispatch",function(e){let t={default:1,title:"RecurTicket",display_for_agent:!0,required_for_agent:!0,label:"Create recur ticket",value:"",type:"select",unique:"recur_list_ids",options:[],api_info:"url:=api/dependency/recur-tickets??paginate=true"};e.push(t)});

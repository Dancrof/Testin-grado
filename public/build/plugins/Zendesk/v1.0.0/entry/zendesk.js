import{ad as w,a2 as z,s as S,_ as y,ag as V,R as q,T as D,D as N,e as t,k as v,W as R,o as k,l as C,F as r,v as d,L as Z,t as B,I as E,x as H,B as O,C as T,E as A}from"../../../../v9.4.0.5/chunks/bootstrap.js";import{r as F,A as L}from"../../../../v9.4.0.5/chunks/adminRouter.js";import"../../../../v9.4.0.5/chunks/vue-router.js";import"../../../../v9.4.0.5/chunks/FormGenerator.js";import"../../../../v9.4.0.5/chunks/AdminNavigationBar.js";import"../../../../v9.4.0.5/chunks/DataTableActions.js";import"../../../../v9.4.0.5/chunks/Checkbox.js";import"../../../../v9.4.0.5/chunks/HelpSection.js";function P(n){const{username:c,password:l,domain:e}=n;let i={username:[c,"isRequired"],password:[l,"isRequired"],domain:[e,"isRequired"]};const u=new w(z),{errors:o,isValid:a}=u.validate(i);return S.dispatch("setValidationError",o),{errors:o,isValid:a}}const I={name:"ZendeskSettings",components:{StaticSelect:V,RadioButton:q,TextField:D,DynamicSelect:N},setup(){const n=t(""),c=t("save"),l=t(""),e=t(""),i=t(""),u=t("fas fa-save"),o=t([]),a=t(0),g=t([{name:"Enable",value:1},{name:"Disable",value:0}]),m=t(!1),p=(h,s)=>{s in b&&(b[s].value=h)},_=()=>{const{errors:h,isValid:s}=P({username:n.value,password:l.value,domain:e.value,createdat_number:i.value,zendesk_status:o.value,status:a.value});return s},f=()=>{if(_()){m.value=!0;const h={username:n.value,password:l.value,domain:e.value,konwledge_base:a.value,created_at:i.value,status:o.value.map(s=>s.id)};O.post("/zendesk/credentials/store",h).then(s=>{m.value=!1,T(s,"zendesk")}).catch(s=>{m.value=!1,A(s,"zendesk")})}},b={username:n,password:l,domain:e,createdat_number:i,zendesk_status:o,status:a};return{username:n,btnName:c,password:l,domain:e,createdat_number:i,iconClass:u,zendesk_status:o,status:a,radioOptions:g,loading:m,zendeskStatus:[{id:"new",name:"New"},{id:"open",name:"Open"},{id:"pending",name:"Pending"},{id:"hold",name:"Hold"},{id:"solved",name:"Solved"},{id:"closed",name:"Closed"}],onChange:p,onSubmit:f}}},K={class:"col-sm-12"},M={class:"card card-light"},W={class:"card-body"},j={class:"row"},G={class:"row"},J={class:"row"},Q={class:"card-footer"};function U(n,c,l,e,i,u){const o=v("alert"),a=v("text-field"),g=v("radio-button"),m=v("dynamic-select"),p=R("focus-first-input");return k(),C("div",K,[r(o,{componentName:"zendesk"}),d("div",M,[d("div",W,[Z((k(),C("div",j,[r(a,{label:n.trans("user_name"),value:e.username,type:"text",name:"username",onChange:e.onChange,classname:"col-sm-6",required:!0,defaultKey:"user_name",hint:n.trans("user-name-hint")},null,8,["label","value","onChange","hint"]),r(a,{label:n.trans("password"),value:e.password,type:"password",name:"password",onChange:e.onChange,hint:n.trans("password-hint"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","hint"])])),[[p]]),d("div",G,[r(a,{label:n.lang("domain"),name:"domain",classname:"col-sm-6",value:e.domain,onChange:e.onChange,required:!0,hint:n.trans("domain-hint")},null,8,["label","value","onChange","hint"]),r(g,{options:e.radioOptions,label:n.lang("knowledge-base"),name:"status",value:e.status,onChange:e.onChange,classname:"form-group col-sm-4",hint:n.trans("zendesk-kb-hint")},null,8,["options","label","value","onChange","hint"])]),d("div",J,[r(m,{label:n.lang("status"),multiple:!0,name:"zendesk_status",elements:e.zendeskStatus,classname:"col-sm-6",value:e.zendesk_status,onChange:e.onChange,required:!1,strlength:45,hint:n.lang("zendesk-status-hint")},null,8,["label","elements","value","onChange","hint"]),r(a,{label:n.trans("created_at"),value:e.createdat_number,type:"number",name:"createdat_number",hint:n.trans("zendesk-created-hint"),onChange:e.onChange,classname:"col-sm-6"},null,8,["label","value","hint","onChange"])])]),d("div",Q,[d("button",{type:"button",onClick:c[0]||(c[0]=(..._)=>e.onSubmit&&e.onSubmit(..._)),class:"btn btn-primary"},[d("span",{class:B(e.iconClass)},null,2),E("Â "+H(n.trans(e.btnName)),1)])])])])}const X=y(I,[["render",U]]);let Y={path:"/zendesk",component:L,name:"Zendesk Settings",redirect:"zendesk/settings",children:[{path:"settings",component:X,name:"Zendesk Settings",meta:{title:"Zendesk Settings",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"plugins",to:"/plugins"},active:"Zendesk Settings"}}}]};F.addRoute(Y);

import{R as Ve,c as En,b as xn}from"./vue-router.js";import{s as Pn,u as Rn,w as Fn,x as Nn,o as es,h as mt,y as Vn,z as jn,E as Un,F as Bn,p as zn,A as Hn,k as Wn,l as qn,B as Kn,j as Yn,L as Gn,G as Qn,I as Xn,H as Dt,M as ts,J as Tt,K as js,U as Jn,N as Xs,D as ss,T as Js,O as Zn,Q as $n,V as Zs,S as Mt,a as ei,W as Ge,X as ti,Y as si}from"./FormGenerator.js";import{H as ai}from"./HelpSection.js";import{Z as ue,c as ee,an as pt,_ as U,l,J as E,K as q,v as n,F as _,X as ne,I as k,x as c,q as u,G as T,k as g,o,t as N,a1 as ae,m as I,aQ as $s,ap as ge,W as Q,L as M,B as R,E as B,A as ea,H as Ee,C as X,N as Fe,U as st,aq as ze,ad as ye,a2 as pe,s as ve,d as gt,a as ta,h as Zt,as as ni,e as ht,aj as ii,ar as oi,w as ri,ba as $t,n as li,bb as sa,a5 as Ot,T as Se,D as _e,ae as ft,ag as Xe,S as aa,R as Pe,ai as na,b3 as as,a4 as ia,a6 as oa,b6 as ns,a3 as ra,bc as It,f as Te,b0 as la,ao as Qe,a$ as He,P as _t,V as da,Y as Us,af as Oe,j as at,aB as is,aX as ca,ah as ke,aV as Le,bd as ua,be as ha,bf as di,bg as ci,aN as ui,y as hi,z as mi,aI as pi,bh as gi,aE as Bs}from"./bootstrap.js";import{b as At,a as je,g as fi,e as _i}from"./DataTableActions.js";import{v as bi,R as ma,L as pa,A as vi,a as yi,b as ki}from"./approvalTicketRules.js";import{B as wi}from"./BarcodeModal.js";import{C as os}from"./Loader.js";import{S as rs}from"./AdminNavigationBar.js";import{C as Lt}from"./Checkbox.js";import{E as Ci}from"./EleaTicketThreadSummary.js";import{T as Et}from"./PermaLink.js";const Si={name:"agent-panel-layout",setup(){const e=ue();return{getPushMenu:ee(()=>e.getters.getPushMenu)}},props:{auth:{type:Object,default:()=>{}},company:{type:Object,default:()=>{}},portal:{type:Object,default:()=>{}},whiteLabel:{type:Boolean,default:!1},tag:{type:String,default:""},version:{type:String,default:""},isMailConfigured:{type:Boolean,default:!0},isFAEnforced:{type:[Boolean,Number],default:!1},dummyInstall:{type:Boolean,default:!1},isUpdatedVersion:{type:[Boolean,Number],default:!1}},components:{"agent-nav-bar":Pn,"agent-side-bar":Rn,"agent-bread-crumbs":Fn,"agent-footer":Nn,"help-widget":ai},data(){return{selectedOption:"1 Day",alertWrapper:0,alertData:"",alertContent:"",searchCron:!1,isAnyMigration:!1}},beforeMount(){this.checkForUpdate(),this.checkSearchCronCommand()},updated(){this.logAlertWrapperHeight()},mounted(){this.logAlertWrapperHeight(),window.addEventListener("resize",this.onWindowResize)},beforeDestroy(){window.removeEventListener("resize",this.onWindowResize)},methods:{layoutLoaded(){window.emitter.emit("layout-loaded",{whiteLabel:this.whiteLabel})},getAlertBackgroundColor(e){const t="#ffc107",r=parseInt(t.slice(1,3),16)+e*10,s=parseInt(t.slice(3,5),16)+e*10,i=parseInt(t.slice(5,7),16)+e*10,d=m=>Math.min(255,Math.max(0,m));return`rgb(${d(r)}, ${d(s)}, ${d(i)})`},async checkForUpdate(){try{const e=await axios.post("/display-pop-ups");this.alertData=e.data.map(s=>({...s,selectedOption:"1 Day",topPosition:0}));const t=[];for(const s of this.alertData)try{const i={value:s.description},d=await axios.post("/give-me-read",i);t.push(d.data)}catch(i){console.log(i),t.push("")}this.alertData.forEach((s,i)=>{s.description=t[i].replace("18px","14px")});const r=(await axios.get("/get-days")).data.data;for(const s of this.alertData){const i=s.id.toString();if(r.hasOwnProperty(i)){const d=r[i];s.selectedOption=d===1?"1 Day":`${d} Days`}}this.alertContent=this.alertData,await this.logAlertWrapperHeight()}catch(e){console.log(e)}},onCloseAlert(e){Array.isArray(this.alertContent)||(this.alertContent=[]);const t=this.alertContent.findIndex(s=>s.id===e.id);t>-1&&this.alertContent.splice(t,1);const a={};a.pop_id=e.id;let r=parseInt(e.selectedOption.match(/\d+/)[0],10);a.days=r=r,a.user_id=this.auth.user_data.id,axios.post("/post-days",a).then(s=>{this.checkForUpdate()}).catch(s=>{console.log(s)})},logAlertWrapperHeight(){this.$nextTick(()=>{const e=this.$refs.alertWrapperElements;if(e){let t=0;e.forEach((a,r)=>{if(a){const s=a.clientHeight;t+=s;const i=t-s;this.alertContent[r].topPosition=i}}),this.alertWrapper=t}})},onWindowResize(){this.logAlertWrapperHeight()},updateSelectedOption(e,t){e.selectedOption=t},checkSearchCronCommand(){axios.get("check/search-cron").then(e=>{this.searchCron=e.data.data.cron_status,this.isAnyMigration=e.data.data.is_any_migration}).catch(e=>{this.searchCron=!1,this.isAnyMigration=!1})},eleaWidgetLoaded(){window.emitter.emit("elea-widget-loaded",{user_data:this.auth.user_data,whiteLabel:this.whiteLabel})},closeSideBar(){let e=document.getElementById("layout_body");this.getPushMenu||(this.$store.dispatch("setPushMenu",!this.getPushMenu),e.classList.add("sidebar-collapse"),e.classList.remove("sidebar-open"))}},computed:{...pt(["isSettingActive"]),hasIsSettingActiveGetter(){return this.$store.getters.hasOwnProperty("isSettingActive")}}},Di={class:"row"},Ti={class:"col-sm-12 alert-description"},Mi={class:"col-sm-10"},Oi=["innerHTML"],Ii=["href"],Ai=["href"],Li=["innerHTML"],Ei={class:"remind-select float-end"},xi={class:"btn-group"},Pi={class:"dropdown-menu option-container"},Ri=["onClick"],Fi=["onClick"],Ni=["onClick"],Vi=["onClick"],ji={class:"app-main"},Ui={class:"app-content"},Bi={class:"container-fluid"},zi={key:0,class:"alert alert-info alert-dismissible"},Hi=["href"],Wi={key:1,class:"alert alert-warning"},qi=["href"],Ki={key:2,class:"alert alert-warning"},Yi={class:"row g-4"},Gi={id:"monitoring-system-status"},Qi={key:0,id:"ai-assistant-widget"};function Xi(e,t,a,r,s,i){const d=g("agent-nav-bar"),m=g("agent-side-bar"),p=g("agent-bread-crumbs"),f=g("alert"),b=g("router-view"),y=g("vue-progress-bar"),D=g("agent-footer");return o(),l(E,null,[(o(!0),l(E,null,q(s.alertContent,(w,S)=>(o(),l("div",{key:S},[w.use===1?(o(),l("div",{key:0,ref_for:!0,ref:"alertWrapperElements",class:"alert-warning alert-wrapper mb-0 pt-2 ps-3 pb-1",style:ne({top:w.topPosition+"px",backgroundColor:i.getAlertBackgroundColor(S),zIndex:S===s.alertContent.length-1?9999:99999999})},[n("div",Di,[n("div",Ti,[n("div",Mi,[a.auth.user_data.role=="admin"?(o(),l(E,{key:0},[t[1]||(t[1]=n("span",{style:{"vertical-align":"1px"}},[n("i",{class:"fas fa-warning"})],-1)),n("span",{innerHTML:w.description},null,8,Oi),t[2]||(t[2]=k("  ")),w.pop_name==="update"&&w.link?(o(),l("a",{key:0,href:w.link+"admin/check-updates"},c(e.trans("click-here-to-update")),9,Ii)):u("",!0),w.pop_name==="renew"&&w.link?(o(),l("a",{key:1,href:w.link,target:"_blank"},c(e.trans("click-here-to-renew")),9,Ai)):u("",!0)],64)):(o(),l(E,{key:1},[t[3]||(t[3]=n("span",{style:{"vertical-align":"1px"}},[n("i",{class:"fas fa-warning"})],-1)),n("span",{innerHTML:w.description},null,8,Li)],64))]),n("div",Ei,[t[4]||(t[4]=n("label",{class:"remind-option"},c("Remind me after : "),-1)),t[5]||(t[5]=k("  ")),n("div",xi,[n("button",{type:"button",class:"dropdown-toggle select-button alert-warning btn btn-outline",style:ne([{backgroundColor:i.getAlertBackgroundColor(S)},{"margin-right":"0px !important"}]),"data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},c(w.selectedOption),5),n("div",Pi,[n("div",{class:N(["dropdown-item option-select",{alertDay:w.selectedOption==="1 Day"}]),onClick:L=>i.updateSelectedOption(w,"1 Day")},"1 Day",10,Ri),n("div",{class:N(["dropdown-item option-select",{alertDay:w.selectedOption==="3 Days"}]),onClick:L=>i.updateSelectedOption(w,"3 Days")},"3 Days",10,Fi),n("div",{class:N(["dropdown-item option-select",{alertDay:w.selectedOption==="7 Days"}]),onClick:L=>i.updateSelectedOption(w,"7 Days")},"7 Days",10,Ni)])])]),n("button",{type:"button",onClick:L=>i.onCloseAlert(w),class:"btn-close pt-2 ps-4 pe-3",id:"alert_close"},null,8,Vi)])])],4)):u("",!0)]))),128)),n("div",{class:"app-wrapper",style:ne({top:s.alertContent?this.alertWrapper+"px !important":""})},[_(d,{style:ne({top:s.alertContent?this.alertWrapper+"px !important":""}),auth:a.auth,portal:a.portal},null,8,["style","auth","portal"]),_(m,{style:ne({top:s.alertContent?this.alertWrapper+"px !important":""}),alertWrapper:s.alertWrapper,alertData:s.alertContent,auth:a.auth,company:a.company,portal:a.portal},null,8,["style","alertWrapper","alertData","auth","company","portal"]),n("div",ji,[_(p),n("div",Ui,[n("div",Bi,[_(f,{componentName:"layout"}),a.dummyInstall?(o(),l("div",zi,[t[6]||(t[6]=n("button",{type:"button",class:"close","data-dismiss":"alert","aria-hidden":"true"},"×",-1)),t[7]||(t[7]=n("i",{class:"fas fa-warning"},null,-1)),a.auth.user_data.role=="admin"?(o(),l(E,{key:0},[k(c(e.trans("dummy_data_installation_message"))+" ",1),n("a",{href:e.basePath()+"/admin/clean-dummy-data"},c(e.trans("click"))+" ",9,Hi),k(c(e.trans("clear-dummy-data")),1)],64)):(o(),l(E,{key:1},[k(c(e.trans("clear-dummy-data-agent-message")),1)],64))])):u("",!0),!a.dummyInstall&&!a.isMailConfigured?(o(),l("div",Wi,[t[8]||(t[8]=k("  ")),t[9]||(t[9]=n("i",{class:"fas fa-warning"},null,-1)),t[10]||(t[10]=k("  ")),a.auth.user_data.role=="admin"?(o(),l(E,{key:0},[k(c(e.trans("system-outgoing-incoming-mail-not-configured"))+" ",1),n("a",{href:e.basePath()+"/admin/email/create"},c(e.trans("confihure-the-mail-now")),9,qi)],64)):(o(),l(E,{key:1},[k(c(e.trans("system-mail-not-configured-agent-message")),1)],64))])):u("",!0),!a.dummyInstall&&(s.searchCron||s.isAnyMigration)?(o(),l("div",Ki,[t[11]||(t[11]=k("  ")),t[12]||(t[12]=n("i",{class:"fas fa-spinner"},null,-1)),k("  "+c(s.isAnyMigration?e.trans("module-migration"):e.trans("search-cron-running")),1)])):u("",!0),n("div",Yi,[_(b,null,{default:T(({Component:w,route:S})=>[_(ae,{name:"fade"},{default:T(()=>[(o(),I($s(w),{key:S.fullPath,auth:a.auth,isFAEnforced:a.isFAEnforced},null,8,["auth","isFAEnforced"]))]),_:2},1024)]),_:1}),_(y,{class:"color-shift-progress-bar"})])])])]),_(D,{company:a.company,whiteLabel:a.whiteLabel,tag:a.tag,version:a.version,lang:a.auth.user_data.user_language},null,8,["company","whiteLabel","tag","version","lang"]),n("div",{class:"sidebar-overlay",onClick:t[0]||(t[0]=w=>i.closeSideBar())}),n("div",Gi,c(i.layoutLoaded()),1),i.hasIsSettingActiveGetter&&e.isSettingActive("conversation-widget")?(o(),l("div",Qi,c(i.eleaWidgetLoaded()),1)):u("",!0)],4)],64)}const Ue=U(Si,[["render",Xi],["__scopeId","data-v-8b67db78"]]);const Ji={name:"data-widget",props:{dataWidgetData:{type:Array,default:()=>[]},widgetClass:{type:Array,default:()=>["col-md-4","col-sm-6","col-xs-12"]}},data:()=>({}),methods:{subString(e,t){return ge(e,t)}}},Zi={key:0,class:"row"},$i={class:"info-box"},eo={class:"info-box-content"},to={class:"info-box-text"},so={class:"info-box-number"};function ao(e,t,a,r,s,i){const d=g("router-link"),m=Q("tooltip");return a.dataWidgetData&&a.dataWidgetData.length?(o(),l("div",Zi,[(o(!0),l(E,null,q(a.dataWidgetData,(p,f)=>(o(),l("div",{class:N(a.widgetClass),key:f},[_(d,{to:p.redirectTo?decodeURIComponent(p.redirectTo.replace(e.basePath(),"")):"",rel:"noopener",id:"dark-text",class:"text-dark",style:ne({cursor:p.redirectTo?"pointer":"auto"})},{default:T(()=>[n("div",$i,[p.icon_class?(o(),l("span",{key:0,class:N(["info-box-icon",p.is_default?"bg-light box-icon-color":""]),style:ne({background:p.icon_color})},[n("i",{class:N(p.icon_class)},null,2)],6)):u("",!0),M((o(),l("div",eo,[n("span",to,c(i.subString(p.key,50)),1),n("span",so,c(p.value),1)])),[[m,p.key+": "+p.value]])])]),_:2},1032,["to","style"])],2))),128))])):u("",!0)}const no=U(Ji,[["render",ao],["__scopeId","data-v-39453b0a"]]);const io={name:"dashboard-top-widgets",data:()=>({dataWidgetData:null,hasDataFetched:!1}),props:{topWidgetCount:{type:Number,default:3}},beforeMount(){this.getDataFromServer()},methods:{getDataFromServer(){this.$store.dispatch("startLoader",this.$options.name),R.get("api/agent/dashboard-report/top-widget").then(e=>{this.dataWidgetData=e.data.data}).catch(e=>{B(e,"dashboard-page")}).finally(()=>{this.hasDataFetched=!0,this.$store.dispatch("stopLoader",this.$options.name)})}},components:{"data-widget":no}},oo={class:"top-widget"},ro={key:0,class:"row"};function lo(e,t,a,r,s,i){const d=g("data-widget");return o(),l("div",oo,[e.dataWidgetData?u("",!0):(o(),l("div",ro,[(o(!0),l(E,null,q(a.topWidgetCount,m=>(o(),l("div",{class:"col-12 col-sm-6 col-md-3",key:m},t[0]||(t[0]=[n("div",{class:"data-widget-box-skeleton"},null,-1)])))),128))])),e.dataWidgetData&&e.hasDataFetched?(o(),I(d,{key:1,"data-widget-data":e.dataWidgetData,"widget-class":["col-md-3","col-sm-6","col-12"]},null,8,["data-widget-data"])):u("",!0)])}const co=U(io,[["render",lo],["__scopeId","data-v-92eee3e7"]]),uo={name:"dashboard-help",props:{helplink:{type:String,default:""},description:{type:String,default:""}},data:()=>({}),components:{"tool-tip":ea}},ho={key:0},mo=["href"];function po(e,t,a,r,s,i){const d=g("tool-tip");return a.helplink||a.description?(o(),l("span",ho,[a.helplink?(o(),l("a",{key:0,href:a.helplink,target:"__blank"},[_(d,{slot:"headerTooltip",message:a.description,size:"medium"},null,8,["message"])],8,mo)):u("",!0),!a.helplink&&a.description?(o(),I(d,{key:1,slot:"headerTooltip",message:a.description,size:"medium"},null,8,["message"])):u("",!0)])):u("",!0)}const nt=U(uo,[["render",po]]);const go={name:"dashboard-recent-activities",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},data:()=>({notificationData:[],page:1,hasDataFetched:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getLink(e){return e.includes("/import-tracking/")?e.replace(this.basePath(),this.basePath()+"/admin"):e},checkUrl(e){e.includes("/export/download")?R.get(e).then(t=>{let a=e.replace(this.basePath(),"");this.redirect(a)}).catch(t=>{B(t,"dashboard-page")}):window.open(e.includes("/import-tracking/")?e.replace(this.basePath(),this.basePath()+"/admin"):e)},handleContextMenu(e){e.includes("/export/download")&&event.preventDefault()},getDataFromServer(e,t=!1,a=""){this.loading=!0,R.get("api/in-app/auth/notifications"+a,{params:{page:this.page}}).then(r=>{this.updateData(r.data.data,e,t),this.loading=!1}).catch(r=>{this.loading=!1,B(r,"dashboard-page")})},updateData(e,t,a){a?this.notificationData=e:this.notificationData.push(...e),t&&t.loaded(),e.length<10&&t&&t.complete(),this.page++,this.hasDataFetched=!0},refreshData(){this.hasDataFetched=!1,this.page=1,this.notificationData=[],this.getDataFromServer(void 0,!0,"?refresh=1")}},components:{"dashboard-help":nt}},fo={class:"card card-light dashboard-widget-box"},_o={class:"card-header"},bo={class:"card-title"},vo={class:"card-tools"},yo={key:0,class:"card-body scrollable-area"},ko={class:"products-list product-list-in-card"},wo={class:"product-img"},Co={class:"product-info fw-400",style:{"padding-top":"1rem"}},So={class:"row"},Do={class:"col-sm-2"},To={class:"col-sm-8"},Mo=["href","onClick","onContextmenu"],Oo=["innerHTML"],Io={class:"col-md-2"},Ao={class:"float-end"},Lo={key:1,class:"no-data-section"};function Eo(e,t,a,r,s,i){const d=g("faveo-image-element"),m=g("infinite-loading"),p=Q("tooltip");return o(),l("div",fo,[n("div",_o,[n("h3",bo,[t[1]||(t[1]=n("i",{class:"far fa-bell","aria-hidden":"true"},null,-1)),k(" "+c(e.lang("recent_activities")),1)]),n("div",vo,[M((o(),l("button",{type:"button",class:N(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=f=>i.refreshData())},t[2]||(t[2]=[n("i",{class:"fas fa-sync-alt"},null,-1)]),2)),[[p,e.lang("refresh")]])])]),e.notificationData.length>0?(o(),l("div",yo,[n("ul",ko,[(o(!0),l(E,null,q(e.notificationData,f=>(o(),l("li",{class:"item",key:f.id},[n("div",wo,[_(d,{id:"user_img_"+f.id,"source-url":f.notified_by?f.notified_by.profile_pic:e.basePathVersion()+"/themes/default/common/images/system.png","default-image":"system.png",classes:["img-circle","img-rounder"],"alternative-text":"activity.notified_by ? activity.notified_by.full_name: 'Elea'"},null,8,["id","source-url"])]),n("div",Co,[n("div",So,[n("div",Do,c(f.notified_by?f.notified_by.full_name:"Elea"),1),n("div",To,[n("a",{class:"product-title fw-400",href:i.getLink(f.action_link),onClick:Ee(b=>i.checkUrl(f.action_link),["prevent"]),onContextmenu:b=>i.handleContextMenu(f.action_link),target:"_blank"},[n("span",{innerHTML:f.notify_message},null,8,Oo)],40,Mo)]),n("div",Io,[n("span",Ao,c(r.formattedTime(f.created_at)),1)])])])]))),128)),_(m,{onInfinite:i.getDataFromServer},{spinner:T(()=>t[3]||(t[3]=[n("span",null,null,-1)])),complete:T(()=>t[4]||(t[4]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])])])):u("",!0),e.hasDataFetched&&e.notificationData.length===0?(o(),l("div",Lo,c(e.lang("no_data_available")),1)):u("",!0)])}const xo=U(go,[["render",Eo],["__scopeId","data-v-e3b2fd49"]]);const Po={name:"dashboard-todo",data:()=>({todoList:[],newTodoText:"",editMode:!1,editTodoIndex:void 0,page:1,loading:!1,showModal:!1,deleteUrl:"",componentTitle:"todos-page",neweditedTodo:{}}),beforeMount(){this.getTodoList()},created(){window.emitter.on("taskUpdated",()=>{this.getTodoList(null,"success",!0)})},methods:{getTodoIconClass(e){switch(e){case"Open":return"text-success  fas fa-clock";case"In-progress":return"text-warning fas fa-hourglass-half";case"Closed":return"text-danger fas fa-minus-circle";default:return"text-muted fas fa-question"}},getTodoIconColor(e){return{Open:"green","In-progress":"orange",Closed:"red",pending:"red","in-progress":"orange",completed:"green"}[e]||"red"},getTodoList(e,t,a=!1){a&&(this.page=1,this.todoList=[]),this.loading=!0,R.get("api/agent/todo-list?page="+this.page).then(r=>{t&&(X(t,"todos-page"),this.loading=!1),r.data.data.data.length?(this.page++,this.todoList=[...this.todoList,...r.data.data.data],e&&e.loaded(),this.loading=!1):(e&&e.complete(),this.loading=!1)}).catch(r=>{B(r,"todos-page"),this.loading=!1}).finally(()=>{setTimeout(()=>{this.$refs.todoInput.focus()},1)})},editTodoName(){if(typeof this.editTodoIndex<"u"){let e=JSON.parse(JSON.stringify(this.todoList));e[this.editTodoIndex].name=this.newTodoText,this.updateTodo(e).then(t=>{X(t,"todos-page"),this.todoList[this.editTodoIndex].name=this.newTodoText,this.newTodoText="",this.editMode=!1,this.loading=!1}).catch(t=>{this.loading=!1,B(t,"todos-page")})}},onTodoMarkClick(e){const t=this.todoList[e].status;this.todoList[e].status=this.getNextState(t),this.updateTodo([this.todoList[e]]).then(a=>{a.data.success?X(a,"todos-page"):(this.todoList[e].status=t,B(a,"todos-page")),this.loading=!1}).catch(a=>{this.todoList[e].status=t,B(a,"todos-page"),this.loading=!1})},getTodoMarkerTitle(e){return this.trans("click_to_change_status")+`${this.trans(this.getNextState(e))}`},getNextState(e){return{pending:"in-progress","in-progress":"completed",completed:"pending",Open:"In-progress","In-progress":"Closed",Closed:"Open"}[e]},onReorder(){this.updateTodo(this.todoList).then(e=>{X(e,"todos-page"),this.loading=!1}).catch(e=>{B(e,"todos-page"),this.loading=!1})},addNewTodo(){this.loading=!0,this.newTodoText===""&&(this.$store.dispatch("setAlert",{type:"danger",message:this.lang("this_field_is_required"),component_name:"todos-page"}),this.loading=!1),R.post("api/agent/create-todo",{name:this.newTodoText}).then(e=>{this.newTodoText="",this.getTodoList(null,e,!0),window.emitter.emit("refreshData"),this.loading=!1}).catch(e=>{this.loading=!1,this.$store.dispatch("setAlert",{type:"danger",message:e.response.data.message.name,component_name:"todos-page"})})},deleteTodo(e){this.showModal=!0,this.deleteUrl="api/agent/todo/"+e},onClose(){this.showDeleteModal=!1,this.showAssociateModal=!1,this.showModal=!1},updateTodo(e){if(this.editTodoIndex!==void 0){const a=e[this.editTodoIndex];if(this.neweditedTodo=[a],a.name.length>50){this.$store.dispatch("setAlert",{type:"danger",message:this.trans("name_should_be_less_than_50_characters"),component_name:"todos-page"}),this.loading=!1;return}}const t=this.neweditedTodo.length>=0?this.neweditedTodo:e;return this.loading=!0,R.post("api/agent/update-todos",{todos:t}).then(a=>{X(a,"todos-page"),this.loading=!1,this.getTodoList(null,a,!0),window.emitter.emit("refreshData"),this.editMode=!1,this.newTodoText=""}).catch(a=>{B(a,"todos-page"),this.loading=!1})},onEditTodo(e){this.editMode=!0,this.editTodoIndex=e,this.newTodoText=this.todoList[e].name,this.$nextTick(()=>{this.$refs.todoInput.focus()})},cancelEditMode(){this.editMode=!1,this.newTodoText="",this.editTodoIndex=void 0}},components:{"delete-modal":At,"draggable-element":es}},Ro={class:"card card-light dashboard-widget-box"},Fo={class:"card-header"},No={class:"card-title"},Vo={key:0,class:"card-tools"},jo={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},Uo={class:"card-body todo-list-body"},Bo={class:"row"},zo=["disabled","placeholder"],Ho={class:"col-md-3"},Wo={key:0,class:"no-todo-section"},qo={class:"list-group-item todo_item"},Ko={class:"row"},Yo={class:"col-sm-9"},Go={key:0,class:"todo-mark"},Qo=["onClick"],Xo={class:"todo-tools col-sm-3 text-end"},Jo=["onClick"],Zo=["onClick"];function $o(e,t,a,r,s,i){const d=g("alert"),m=g("draggable-element"),p=g("infinite-loading"),f=g("delete-modal"),b=Q("tooltip");return o(),l(E,null,[n("div",Ro,[n("div",Fo,[n("h3",No,[t[4]||(t[4]=n("i",{class:"fas fa-list-ul"},null,-1)),k(" "+c(e.lang("todo")),1)]),e.loading?(o(),l("div",Vo,[M((o(),l("button",jo,t[5]||(t[5]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[b,e.lang("refresh")]])])):u("",!0)]),n("div",Uo,[_(d,{componentName:"todos-page"}),n("div",Bo,[n("div",{class:N(e.editMode?"col-md-9":"col-md-12")},[M(n("input",{class:N(["form-control",{"cursor-none":e.loading}]),ref:"todoInput",disabled:e.loading,placeholder:e.lang("todo_placeholder"),autofocus:"","onUpdate:modelValue":t[0]||(t[0]=y=>e.newTodoText=y),onKeyup:t[1]||(t[1]=st(y=>e.editMode?i.editTodoName():i.addNewTodo(),["enter"]))},null,42,zo),[[Fe,e.newTodoText,void 0,{trim:!0}]])],2),n("div",Ho,[e.editMode?M((o(),l("button",{key:0,type:"button",class:"btn btn-light pull-right todo_edit_btn",onClick:t[2]||(t[2]=(...y)=>i.cancelEditMode&&i.cancelEditMode(...y))},[t[6]||(t[6]=n("i",{class:"fas fa-times"},null,-1)),k(" "+c(e.lang("cancel")),1)])),[[b,e.lang("cancel_editing")]]):u("",!0)])]),e.todoList.length===0?(o(),l("div",Wo,[n("blockquote",null,'" '+c(e.lang("todo_quote"))+' "',1)])):(o(),l("div",{key:1,class:"scrollable-area mt-2",onScroll:t[3]||(t[3]=(...y)=>e.handleScroll&&e.handleScroll(...y))},[_(m,{class:"list-group",tag:"ul",list:e.todoList,onEnd:i.onReorder,itemKey:"id"},{item:T(({element:y,index:D})=>[n("li",qo,[n("div",Ko,[n("div",Yo,[y.is_private?M((o(),l("span",Go,t[7]||(t[7]=[n("i",{class:"fas fa-lock fa-lg","aria-hidden":"true",style:{color:"grey"}},null,-1),k("  ")]))),[[b,e.trans("private_task")]]):u("",!0),M((o(),l("span",{class:"todo-mark",onClick:w=>i.onTodoMarkClick(D)},[n("i",{class:N(i.getTodoIconClass(y.status)),"aria-hidden":"true",style:ne({color:i.getTodoIconColor(y.status)})},null,6)],8,Qo)),[[b,i.getTodoMarkerTitle(y.status)]]),n("span",{class:"text todo-text",style:ne(["completed","Closed"].includes(y.status)?{"text-decoration":"line-through"}:{})},c(y.name),5),M(n("span",{class:"badge text-bg-success text-lowercase ms-1"},c(y.status==="Closed"?"Close":e.lang(y.status)),513),[[ze,["Open"].includes(y.status)]]),M(n("span",{class:"badge text-bg-warning text-lowercase ms-1"},c(e.lang(y.status)),513),[[ze,["in-progress","In-progress"].includes(y.status)]]),M(n("span",{class:"badge text-bg-danger text-lowercase ms-1"},c(y.status==="Closed"?"Closed":e.lang(y.status)),513),[[ze,["pending","Closed"].includes(y.status)]])]),n("div",Xo,[M(n("i",{class:"fas fa-trash",onClick:w=>i.deleteTodo(y.id,D),style:{cursor:"pointer",color:"red"},"aria-hidden":"true"},null,8,Jo),[[b,e.lang("remove")]]),t[8]||(t[8]=k("  ")),M(n("i",{class:"fas fa-pencil-alt",onClick:w=>i.onEditTodo(D),style:{cursor:"pointer"},"aria-hidden":"true"},null,8,Zo),[[b,e.lang("edit")]])])])])]),_:1},8,["list","onEnd"]),_(p,{onInfinite:i.getTodoList,ref:"infiniteLoading"},{spinner:T(()=>t[9]||(t[9]=[n("span",null,null,-1)])),complete:T(()=>t[10]||(t[10]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])],32))])]),e.showModal?(o(),I(f,{key:0,onClose:i.onClose,showModal:e.showModal,deleteUrl:e.deleteUrl,alertComponentName:"todos-page",componentTitle:e.componentTitle},null,8,["onClose","showModal","deleteUrl","componentTitle"])):u("",!0)],64)}const er=U(Po,[["render",$o],["__scopeId","data-v-6621ddc1"]]);const tr={name:"dashboard-system-analysis",data:()=>({sysAnalysisData:null,hasDataFetched:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getDataFromServer(e=""){this.loading=!0,R.get("api/agent/dashboard-report/system-analysis"+e).then(t=>{this.sysAnalysisData=t.data.data,this.hasDataFetched=!0,this.loading=!1}).catch(t=>{this.loading=!1,B(t,"dashboard-page")}).finally(()=>{this.hasDataFetched=!0})},refreshData(){this.hasDataFetched=!1,this.page=1,this.notificationData=[],this.getDataFromServer("?refresh=1")}},components:{"dashboard-help":nt}},sr={class:"card card-light dashboard-widget-box"},ar={class:"card-header"},nr={class:"card-title"},ir={class:"card-tools"},or={key:0,class:"card-body scrollable-area"},rr={class:"system-analysis-list"},lr={class:"nav flex-column"},dr=["innerHTML"];function cr(e,t,a,r,s,i){const d=g("dashboard-help"),m=Q("tooltip");return o(),l("div",sr,[n("div",ar,[e.sysAnalysisData?(o(),l(E,{key:0},[n("h3",nr,[t[1]||(t[1]=n("i",{class:"fas fa-desktop","aria-hidden":"true"},null,-1)),k(" "+c(e.sysAnalysisData.title),1)]),_(d,{helplink:e.sysAnalysisData.helpLink,description:e.sysAnalysisData.description},null,8,["helplink","description"])],64)):u("",!0),n("div",ir,[M((o(),l("button",{type:"button",class:N(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=p=>i.refreshData())},t[2]||(t[2]=[n("i",{class:"fas fa-sync-alt"},null,-1)]),2)),[[m,e.lang("refresh")]])])]),e.sysAnalysisData?(o(),l("div",or,[(o(!0),l(E,null,q(e.sysAnalysisData.data,(p,f)=>(o(),l("div",{key:f},[n("div",rr,[n("ul",lr,[(o(!0),l(E,null,q(p.attributes,(b,y)=>(o(),l("li",{key:y},[k(c(p.title)+" ",1),n("span",{class:"float-end badge text-bg-blue",innerHTML:b.value},null,8,dr)]))),128))])])]))),128))])):u("",!0)])}const ur=U(tr,[["render",cr],["__scopeId","data-v-9aa46b72"]]);const hr={name:"dashboard-require-immediate-action",data:()=>({ticketData:{title:"",data:[]},page:1,hasDataFetched:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getRoute(e,t){var a=new DOMParser,r=a.parseFromString(e,"text/html");return t=="href"?r.getElementById("hyper_link")[t].replace(this.basePath(),""):r.getElementById("hyper_link")[t]},getDataFromServer(e,t,a=""){this.loading=!0,R.get("api/agent/dashboard-report/require-immediate-action"+a,{params:{page:this.page}}).then(r=>{this.updateData(r.data.data,e,t),this.loading=!1}).catch(r=>{this.loading=!1,B(r,"dashboard-page")})},updateData(e,t,a){this.ticketData.title=e.title,this.ticketData.description=e.description,this.ticketData.helplink=e.helpLink,a?this.ticketData.data=e.data:this.ticketData.data.push(...e.data),t&&t.loaded(),e.data.length<10&&t&&t.complete(),this.page++,this.hasDataFetched=!0},refreshData(){this.ticketData.data=[],this.page=1,this.hasDataFetched=!1,this.getDataFromServer(void 0,!0,"?refresh=1")}},components:{"dashboard-help":nt}},mr={class:"card card-light dashboard-widget-box"},pr={class:"card-header with-border"},gr={class:"card-title"},fr={class:"card-tools"},_r={key:0,class:"card-body scrollable-area"},br={class:"products-list product-list-in-card px-2"},vr={class:"product-info"},yr={key:0,class:"badge text-bg-info"},kr={key:1,class:"badge text-bg-warning"},wr={class:"float-end"},Cr=["innerHTML"],Sr={key:1,class:"no-data-section"};function Dr(e,t,a,r,s,i){const d=g("dashboard-help"),m=g("router-link"),p=g("infinite-loading"),f=Q("tooltip");return o(),l("div",mr,[n("div",pr,[e.hasDataFetched&&e.ticketData.title?(o(),l(E,{key:0},[n("h3",gr,[t[1]||(t[1]=n("i",{class:"fas fa-exclamation-triangle text-danger","aria-hidden":"true"},null,-1)),k(" "+c(e.ticketData.title),1)]),_(d,{helplink:e.ticketData.helpLink,description:e.ticketData.description},null,8,["helplink","description"])],64)):u("",!0),n("div",fr,[M((o(),l("button",{type:"button",class:N(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=b=>i.refreshData())},t[2]||(t[2]=[n("i",{class:"fas fa-sync-alt"},null,-1)]),2)),[[f,e.lang("refresh")]])])]),e.ticketData.data.length>0?(o(),l("div",_r,[n("ul",br,[(o(!0),l(E,null,q(e.ticketData.data,(b,y)=>(o(),l("li",{class:"item",key:y},[n("div",vr,[n("span",null,[_(m,{to:i.getRoute(b.title,"href"),class:N(i.getRoute(b.title,"className"))},{default:T(()=>[k(c(i.getRoute(b.title,"textContent")),1)]),_:2},1032,["to","class"])]),t[3]||(t[3]=k("   ")),b.metaData.assigned_to_me?(o(),l("span",yr,c(e.lang("assigned_to_me")),1)):u("",!0),t[4]||(t[4]=k("  ")),b.metaData.reopened?(o(),l("span",kr,c(e.lang("reopened")),1)):u("",!0),n("div",wr,[(o(!0),l(E,null,q(b.attributes,(D,w)=>(o(),l("div",{key:w,class:"float-end"},[D.value?(o(),l("div",{key:0,class:N(b.metaData.overdue?"text-danger":"")},[k(c(D.key)+": ",1),n("span",{innerHTML:D.value},null,8,Cr)],2)):u("",!0)]))),128))])])]))),128)),_(p,{onInfinite:i.getDataFromServer},{spinner:T(()=>t[5]||(t[5]=[n("span",null,null,-1)])),complete:T(()=>t[6]||(t[6]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])])])):u("",!0),e.hasDataFetched&&e.ticketData.data.length===0?(o(),l("div",Sr,c(e.lang("no_data_available")),1)):u("",!0)])}const Tr=U(hr,[["render",Dr],["__scopeId","data-v-1574812a"]]);const Mr={name:"dashboard-agent-summary",data:()=>({agentsData:{title:"",data:[]},page:1,hasDataFetched:!1,refresh:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getRoute(e,t){var a=new DOMParser,r=a.parseFromString(e,"text/html");return t=="href"?r.getElementById("hyper_link")[t].replace(this.basePath(),""):r.getElementById("hyper_link")[t]},getDataFromServer(e,t,a=""){this.loading=!0,R.get("api/agent/dashboard-report/manager/agent-analysis"+a,{params:{page:this.page}}).then(r=>{this.updateData(r.data.data,e,t),this.loading=!1}).catch(r=>{this.loading=!1,this.refresh=!1,B(r,"dashboard-page",this.$options.name)})},updateData(e,t,a){this.agentsData.title=e.title,this.agentsData.description=e.description,this.agentsData.helplink=e.helpLink,a?this.agentsData.data=e.data:this.agentsData.data.push(...e.data),t&&t.loaded(),e.data.length<10&&t&&t.complete(),this.page++,this.hasDataFetched=!0,this.refresh=!1},refreshData(){this.refresh=!0,this.hasDataFetched=!1,this.page=1,this.agentsData.data=[],this.getDataFromServer(void 0,!0,"?refresh=1")}},components:{"dashboard-help":nt}},Or={class:"card card-light dashboard-widget-box"},Ir={class:"card-header"},Ar={class:"card-title"},Lr={class:"card-tools"},Er={key:0,class:"card-body scrollable-area"},xr={class:"products-list product-list-in-card"},Pr={key:0,class:"product-info"},Rr={class:"row"},Fr={class:"col-md-7"},Nr={class:"product-img"},Vr={style:{"padding-left":"5rem","padding-top":"1.0rem"}},jr={class:"float-end col-md-5"},Ur={style:{padding:"0.3rem"}},Br={class:"attribute-value-text float-end"},zr={key:1,class:"no-data-section"};function Hr(e,t,a,r,s,i){const d=g("dashboard-help"),m=g("faveo-image-element"),p=g("router-link"),f=g("infinite-loading"),b=Q("tooltip");return o(),l("div",Or,[n("div",Ir,[e.hasDataFetched&&e.agentsData.title?(o(),l(E,{key:0},[n("h3",Ar,[t[1]||(t[1]=n("i",{class:"fas fa-user","aria-hidden":"true"},null,-1)),k(" "+c(e.agentsData.title),1)]),_(d,{helplink:e.agentsData.helpLink,description:e.agentsData.description},null,8,["helplink","description"])],64)):u("",!0),n("div",Lr,[M((o(),l("button",{type:"button",class:N(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=y=>i.refreshData())},t[2]||(t[2]=[n("i",{class:"fas fa-sync-alt"},null,-1)]),2)),[[b,e.lang("refresh")]])])]),e.agentsData.data.length>0?(o(),l("div",Er,[n("ul",xr,[(o(!0),l(E,null,q(e.agentsData.data,(y,D)=>(o(),l("li",{class:"item",key:D},[y.title?(o(),l("div",Pr,[n("div",Rr,[n("div",Fr,[n("div",Nr,[_(m,{id:"user_img_"+D,"source-url":y.picture,classes:["img-circle","img-rounder"],"alternative-text":""},null,8,["id","source-url"])]),n("div",Vr,[n("span",null,[_(p,{to:i.getRoute(y.title,"href"),class:N(i.getRoute(y.title,"className"))},{default:T(()=>[k(c(i.getRoute(y.title,"textContent")),1)]),_:2},1032,["to","class"])])])]),n("div",jr,[(o(!0),l(E,null,q(y.attributes,(w,S)=>(o(),l("div",{key:S},[n("div",Ur,[k(c(w.key)+": ",1),n("span",Br,[_(p,{to:i.getRoute(w.value,"href"),class:N(i.getRoute(w.value,"className"))},{default:T(()=>[k(c(i.getRoute(w.value,"textContent")),1)]),_:2},1032,["to","class"])])])]))),128))])])])):u("",!0)]))),128)),_(f,{onInfinite:i.getDataFromServer},{spinner:T(()=>t[3]||(t[3]=[n("span",null,null,-1)])),complete:T(()=>t[4]||(t[4]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])])])):u("",!0),e.hasDataFetched&&e.agentsData&&e.agentsData.data&&e.agentsData.data.length===0&&!e.refresh?(o(),l("div",zr,c(e.lang("no_data_available")),1)):u("",!0)])}const Wr=U(Mr,[["render",Hr],["__scopeId","data-v-aa6c3ec2"]]);const qr={name:"dashboard-department-summary",data:()=>({departmentSummary:{title:"",data:[]},hasDataFetched:!1,page:1,refresh:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getRoute(e,t){var a=new DOMParser,r=a.parseFromString(e,"text/html");return t=="href"?r.getElementById("hyper_link")[t].replace(this.basePath(),""):r.getElementById("hyper_link")[t]},getDataFromServer(e,t,a=""){this.loading=!0,R.get("api/agent/dashboard-report/manager/department-analysis"+a,{params:{page:this.page}}).then(r=>{this.updateData(r.data.data,e,t),this.loading=!1}).catch(r=>{this.refresh=!1,this.loading=!1,B(r,"dashboard-page",this.$options.name)})},updateData(e,t,a){this.departmentSummary.title=e.title,this.departmentSummary.description=e.description,this.departmentSummary.helplink=e.helpLink,a?this.departmentSummary.data=e.data:this.departmentSummary.data.push(...e.data),t&&t.loaded(),e.data.length<10&&t&&t.complete(),this.page++,this.hasDataFetched=!0,this.refresh=!1},refreshData(){this.refresh=!0,this.hasDataFetched=!1,this.page=1,this.departmentSummary.data=[],this.getDataFromServer(void 0,!0,"?refresh=1")}},components:{"dashboard-help":nt}},Kr={class:"card card-light dashboard-widget-box"},Yr={class:"card-header"},Gr={class:"card-title"},Qr={class:"card-tools"},Xr={key:0,class:"card-body scrollable-area"},Jr={class:"widget-user-header",style:{padding:"0px"}},Zr={class:"widget-user-username widget-name"},$r={class:"card-footer p-0"},el={class:"nav flex-column bg-white"},tl={class:"nav-link department-list"},sl={class:"float-end badge text-bg-primary font-14 pad-0"},al={key:1,class:"no-data-section"};function nl(e,t,a,r,s,i){const d=g("dashboard-help"),m=g("router-link"),p=g("infinite-loading"),f=Q("tooltip");return o(),l("div",Kr,[n("div",Yr,[e.departmentSummary.title?(o(),l(E,{key:0},[n("h3",Gr,[t[1]||(t[1]=n("i",{class:"fas fa-sitemap","aria-hidden":"true"},null,-1)),k(" "+c(e.lang(e.departmentSummary.title)),1)]),_(d,{helplink:e.departmentSummary.helpLink,description:e.departmentSummary.description},null,8,["helplink","description"])],64)):u("",!0),n("div",Qr,[M((o(),l("button",{type:"button",class:N(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=b=>i.refreshData())},t[2]||(t[2]=[n("i",{class:"fas fa-sync-alt"},null,-1)]),2)),[[f,e.lang("refresh")]])])]),e.departmentSummary.data.length>0?(o(),l("div",Xr,[(o(!0),l(E,null,q(e.departmentSummary.data,(b,y)=>(o(),l("div",{class:"card card-widget widget-user-2 shadow-0",key:y},[n("div",Jr,[n("h3",Zr,c(b.title),1)]),n("div",$r,[n("ul",el,[(o(!0),l(E,null,q(b.attributes,(D,w)=>(o(),l("li",{class:"nav-item",key:w},[n("a",tl,[k(c(D.key)+" ",1),n("span",sl,[_(m,{to:i.getRoute(D.value,"href"),class:N(i.getRoute(D.value,"className"))},{default:T(()=>[k(c(i.getRoute(D.value,"textContent")),1)]),_:2},1032,["to","class"])])])]))),128))])])]))),128)),_(p,{onInfinite:i.getDataFromServer},{spinner:T(()=>t[3]||(t[3]=[n("span",null,null,-1)])),complete:T(()=>t[4]||(t[4]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])])):u("",!0),e.hasDataFetched&&e.departmentSummary.data.length===0&&!e.refresh?(o(),l("div",al,c(e.lang("no_data_available")),1)):u("",!0)])}const il=U(qr,[["render",nl],["__scopeId","data-v-02498674"]]);const ol={name:"dashboard-agent-performance-widget",data:()=>({topAgentData:null,hasDataFetched:!1,loading:!1}),beforeMount(){this.getDataFromServer()},methods:{getDataFromServer(e=""){this.loading=!0,R.get("api/agent/dashboard-report/agent-performance-widget"+e).then(t=>{this.topAgentData=t.data.data,this.hasDataFetched=!0,this.loading=!1}).catch(t=>{B(t,"dashboard-page"),this.loading=!1}).finally(()=>{this.hasDataFetched=!0})},getProgressBarClass(e){return e>=90?"progress-bar progress-bar-green":e>=70?"progress-bar progress-bar-aqua":e>=50?"progress-bar progress-bar-yellow":"progress-bar progress-bar-red"},getProgressBarStyle(e){return e===null&&(e=0),{width:e+"%"}},refreshData(){this.hasDataFetched=!1,this.getDataFromServer("?refresh=1")}},components:{"dashboard-help":nt}},rl={class:"card card-light dashboard-widget-box"},ll={class:"card-header"},dl={class:"card-title"},cl={class:"card-tools"},ul={key:0,class:"card-body scrollable-area"},hl=["title"],ml={class:"progress-text"},pl={class:"progress-number"},gl={class:"progress sm"};function fl(e,t,a,r,s,i){const d=g("dashboard-help"),m=Q("tooltip");return o(),l("div",rl,[n("div",ll,[e.hasDataFetched&&e.topAgentData?(o(),l(E,{key:0},[n("h3",dl,[t[1]||(t[1]=n("i",{class:"far fa-star","aria-hidden":"true"},null,-1)),k(" "+c(e.topAgentData.title),1)]),_(d,{helplink:e.topAgentData.helpLink,description:e.topAgentData.description},null,8,["helplink","description"]),t[2]||(t[2]=k("  ")),t[3]||(t[3]=n("sup",{style:{"font-size":"14px"}},[n("span",{class:"badge text-bg-info"},"Beta")],-1))],64)):u("",!0),n("div",cl,[M((o(),l("button",{type:"button",class:N(["btn btn-tool",e.loading?"rotating":""]),"data-card-widget":"refresh",onClick:t[0]||(t[0]=p=>i.refreshData())},t[4]||(t[4]=[n("i",{class:"fas fa-sync-alt"},null,-1)]),2)),[[m,e.lang("refresh")]])])]),e.hasDataFetched&&e.topAgentData?(o(),l("div",ul,[(o(!0),l(E,null,q(e.topAgentData.data,(p,f)=>(o(),l("div",{class:"col-md-12",style:{"padding-bottom":"0.8rem"},key:f},[n("div",{class:"progress-group",title:p.description},[n("span",ml,c(p.key),1),n("span",pl,[n("b",null,c(p.value?p.value+"%":""),1)]),n("div",gl,[n("div",{class:N(i.getProgressBarClass(p.value)),style:ne(i.getProgressBarStyle(p.value))},null,6)])],8,hl)]))),128))])):u("",!0)])}const _l=U(ol,[["render",fl],["__scopeId","data-v-cd6ce2fc"]]);function bl(e){const{module:t,name:a,category:r,tickets_view:s}=e;let i={module:[t,"isRequired"],name:[a,"isRequired"]};t&&(i.category=[r,"isRequired"],i.tickets_view=[s,"isRequired"]);const d=new ye(pe),{errors:m,isValid:p}=d.validate(i);return ve.dispatch("setValidationError",m),{errors:m,isValid:p}}const ga={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},vl={ariaLabel:{type:String},ariaDescribedby:{type:String}},yl={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...ga,...vl},kl=ni[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function tt(e){return sa(e)?$t(e):e}function wl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return sa(t)?new Proxy(e,{}):e}function Cl(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function fa(e,t){e.labels=t}function _a(e,t,a){const r=[];e.datasets=t.map(s=>{const i=e.datasets.find(d=>d[a]===s[a]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function Sl(e,t){const a={labels:[],datasets:[]};return fa(a,e.labels),_a(a,e.datasets,t),a}const Dl=gt({props:yl,setup(e,t){let{expose:a,slots:r}=t;const s=ht(null),i=ta(null);a({chart:i});const d=()=>{if(!s.value)return;const{type:f,data:b,options:y,plugins:D,datasetIdKey:w}=e,S=Sl(b,w),L=wl(S,b);i.value=new mt(s.value,{type:f,data:L,options:{...y},plugins:D})},m=()=>{const f=$t(i.value);f&&(e.destroyDelay>0?setTimeout(()=>{f.destroy(),i.value=null},e.destroyDelay):(f.destroy(),i.value=null))},p=f=>{f.update(e.updateMode)};return ii(d),oi(m),ri([()=>e.options,()=>e.data],(f,b)=>{let[y,D]=f,[w,S]=b;const L=$t(i.value);if(!L)return;let x=!1;if(y){const P=tt(y),F=tt(w);P&&P!==F&&(Cl(L,P),x=!0)}if(D){const P=tt(D.labels),F=tt(S.labels),O=tt(D.datasets),j=tt(S.datasets);P!==F&&(fa(L.config.data,P),x=!0),O&&O!==j&&(_a(L.config.data,O,e.datasetIdKey),x=!0)}x&&li(()=>{p(L)})},{deep:!0}),()=>Zt("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:s},[Zt("p",{},[r.default?r.default():""])])}});function xt(e,t){return mt.register(t),gt({props:ga,setup(a,r){let{expose:s}=r;const i=ta(null),d=m=>{i.value=m==null?void 0:m.chart};return s({chart:i}),()=>Zt(Dl,kl({ref:d},{type:e,...a}))}})}const Tl=xt("bar",Vn),Ml=xt("doughnut",jn),kP=xt("line",Bn),wP=xt("pie",Un),Ol={labels:["Low","Medium","Normal","Warning"],datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16"],data:[40,20,80,10]}]},Il={responsive:!0,maintainAspectRatio:!1,plugins:{legend:!1}},Al={labels:["Low","Medium","Normal","Warning","High","Emergency"],datasets:[{label:"Dataset",data:[10,20,30,40,50,60],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 205, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(54, 162, 235, 0.2)","rgba(153, 102, 255, 0.2)"]}]},Ll={responsive:!0,plugins:{legend:!1}},El=[{label:"immediate_ticket_1",link:"javascript:;",overdue:!0,dueTime:"immediate_ticket_1_time"},{label:"immediate_ticket_2",link:"javascript:;",overdue:!1,dueTime:"immediate_ticket_2_time"},{label:"immediate_ticket_3",link:"javascript:;",overdue:!1,dueTime:"immediate_ticket_3_time"},{label:"immediate_ticket_4",link:"javascript:;",overdue:!1,dueTime:"immediate_ticket_4_time"}],xl=[{imageUrl:"",agentType:"agent",message:"recent_activity_msg_1",date:"2022-10-19"},{imageUrl:"",agentType:"admin",message:"recent_activity_msg_2",date:"2022-01-02"},{imageUrl:"",agentType:"admin",message:"recent_activity_msg_3",date:"2023-12-14"},{imageUrl:"",agentType:"agent",message:"recent_activity_msg_4",date:"2024-01-24"}],Pl=[{imageUrl:"",name:"agent",reopenedTickets:12,overdueTickets:34},{imageUrl:"",name:"admin",reopenedTickets:25,overdueTickets:46}],Rl=[{name:"support",summaryMessage:"dept_summary_msg_1",badgeValue:34},{name:"development",summaryMessage:"dept_summary_msg_2",badgeValue:6}],Fl=[{message:"agent_performance_msg_1",percent:50},{message:"agent_performance_msg_2",percent:10},{message:"agent_performance_msg_3",percent:60},{message:"agent_performance_msg_4",percent:5}],Nl=[{message:"summary_msg_1",value:6e3},{message:"summary_msg_2",value:34},{message:"summary_msg_3",value:567},{message:"summary_msg_4",value:9},{message:"summary_msg_5",value:107}],Vl=Object.freeze(Object.defineProperty({__proto__:null,agentPerformances:Fl,agentSummary:Pl,barChartData:Al,barChartOptions:Ll,departmentSummaries:Rl,donutChartData:Ol,donutChartOptions:Il,immediateTickets:El,recentActivities:xl,systemAnalysisSummaries:Nl},Symbol.toStringTag,{value:"Module"})),jl={name:"basic-delete-modal",description:"Basic delete modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},deleteUrl:{type:String,default:""},alert:{type:String,default:""},redirectUrl:{type:String,default:""},updateList:{type:Function,default:()=>{}},from:{type:String,default:""}},data(){return{isDisabled:!1,loading:!1,containerStyle:{width:"500px"}}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,R.delete(this.deleteUrl).then(e=>{this.from==="widget"?(window.emitter.emit("reloadTopWidgets"),window.emitter.emit("updateAgentSidebar")):this.updateList(),this.loading=!1,this.isDisabled=!0,X(e,this.alert),this.onClose(),this.redirectUrl&&setTimeout(()=>this.$router.push({path:this.redirectUrl}),3e3)}).catch(e=>{this.loading=!1,this.onClose(),B(e,this.alert)})}},components:{Modal:Ot}},Ul={class:"modal-title"},Bl={key:0},zl={key:1},Hl={key:2,class:"row"},Wl=["disabled"];function ql(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("modal");return a.showModal?(o(),I(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",Ul,c(e.trans("delete")),1)]),fields:T(()=>[!s.loading&&a.from==="charts"?(o(),l("span",Bl,c(e.trans("are_you_sure_you_want_to_delete")),1)):u("",!0),!s.loading&&a.from==="widget"?(o(),l("span",zl,c(e.trans("are_you_sure_you_want_to_delete_this_widget")),1)):u("",!0),s.loading?(o(),l("div",Hl,[_(d,{duration:4e3})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...p)=>i.onSubmit&&i.onSubmit(...p)),class:"btn btn-secondary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-trash"},null,-1)),k(" "+c(e.trans("delete")),1)],8,Wl)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const Kl=U(jl,[["render",ql]]);mt.register(zn,Hn,Wn,qn,Kn,Yn,Gn,Qn);const Yl={name:"dashboard-edit",components:{TextField:Se,DynamicSelect:_e,NumberField:ft,StaticSelect:Xe,Bar:Tl,Doughnut:Ml,BasicDeleteModal:Kl,ToolTip:ea},props:{closeEditDash:{type:Function}},computed:{dashConfig(){return{...Vl}}},data(){return{dashboardWidget:"",dashboardWidgetData:[],moduleLoad:!1,showModal:!1,selectedWidget:"",cache:0,loading:!1,modalTitle:"",chart_type:"bar_chart",module:"",name:"",category:"",tickets_view:"",viewOptions:[],categoryOptions:[],optionsLoading:!1,dashboardCharts:[],showDeleteModal:!1,deleteUrl:"",editChartId:"",viewOptionStatus:[],widgetsData:[],deleteWidgetKey:!1,showWidgetDeleteModal:!1,from:"",refreshWidgets:!1}},beforeMount(){this.getEditableWidgets(),this.getAddedCharts()},created(){window.emitter.on("reloadTopWidgets",()=>this.refreshWidgets=!0)},beforeUnmount(){this.closeEditDash(!0)},watch:{refreshWidgets(e,t){e===!0&&this.getDashboardWidgets(),this.refreshWidgets=!1}},methods:{onChartRemove(e,t){let a=null;this.showDeleteModal=!0,this.from=t,t==="widget"&&(a=e.startsWith("filter_")?e.replace("filter_",""):e),this.deleteUrl=t==="charts"?"/service-desk/api/delete/dashboard-widgets/"+e:"/api/agent/ticket-filter/"+a},onChartModalClose(){this.showDeleteModal=!1,this.deleteUrl="",this.resetChartData()},isValid(){const{errors:e,isValid:t}=bl(this.$data);return t},onSaveChart(){if(this.isValid()){this.loading=!0;let e={};const{assigned:t,only_assigned:a,only_unassigned:r,status_id:s}=this.viewOptions.find(i=>i.status_options===this.tickets_view);e.module_id=this.module.id,e.status_id=s,e.categorized_by=this.category,e.assigned=t,e.chart_type=this.chart_type,e.only_assigned=a,e.only_unassigned=r,e.cache=this.cache?parseInt(this.cache):0,e.name=this.name,e.dashboard_module=this.dashboardWidgetData.find(i=>i.key==="dashboard-charts"),this.editChartId&&(e.id=this.editChartId),R.post("/service-desk/api/store/chart",e).then(i=>{this.loading=!1,this.showModal=!1,this.getAddedCharts(),this.resetChartData(),X(i,"dashboard-page")}).catch(i=>{B(i,"dashboard-page"),this.loading=!1})}},resetChartData(){this.chart_type="bar_chart",this.module="",this.name="",this.category="",this.tickets_view="",this.editChartId=""},getAddedCharts(){R.get("/service-desk/api/get/dashboard-charts").then(e=>{this.dashboardCharts=e.data.data}).catch(e=>{this.dashboardCharts=[]})},onChange(e,t){this[t]=e||"",t==="module"&&(e?(this.getCategoryAndOptions(e.id,""),this.tickets_view="",this.category=""):(this.viewOptions=[],this.categoryOptions=[],this.name="")),(t==="category"||t==="tickets_view")&&(this.name=this.viewOptions.find(a=>a.status_options===this.tickets_view).status_options+" by "+this.categoryOptions.find(a=>a.column_name===this.category).name)},getCategoryAndOptions(e,t){this.optionsLoading=!0;let a=t==="edit"?e.module_id:e;R.get("/service-desk/api/widget-options/list/"+a).then(r=>{const{options:s,categorizedBy:i}=r.data.data;if(this.viewOptions=s,this.categoryOptions=i,this.viewOptionStatus=this.viewOptions.map(p=>p.status_options),t==="edit"){let p=this.viewOptions.find(f=>f.status_id===e.status_id&&f.assigned===e.assigned&&f.only_assigned===e.only_assigned&&f.only_unassigned===e.only_unassigned);this.tickets_view=p.status_options,this.category=e.categorized_by}else this.tickets_view=s[0].status_options,this.category=i[0].column_name;const d=this.viewOptions.find(p=>p.status_options===this.tickets_view),m=this.categoryOptions.find(p=>p.column_name===this.category);this.name=this.name||`${d.status_options} by ${m.name}`,this.optionsLoading=!1,this.$store.dispatch("unsetValidationError")}).catch(r=>{this.viewOptions=[],this.categoryOptions=[],this.optionsLoading=!1})},updateDashboardWidgets(e){this.loading=!0;let t={};t.module_id=this.dashboardWidget.id,t.sub_module=this.dashboardWidgetData.filter(a=>a.key!=="dashboard-charts").map(a=>({id:a.id,display:a.display?1:0,cache:a.display?parseInt(a.cache):0})),R.post("/update/sub-module",t).then(a=>{this.loading=!1,this.closeEditDash(!0),X(a,"dashboard-page")}).catch(a=>{B(a,"dashboard-page"),this.loading=!1})},onInput(){if(this.cache.toString().length<=3)return!0;this.cache=this.cache.toString().substring(0,this.cache.toString().length-1)},checkValue(e){e=e||window.event;let t=e.which?e.which:e.keyCode;if(t>31&&(t<48||t>57))e.preventDefault();else return!0},onPaste(e){e=e||window.event,e.preventDefault()},onSave(){this.showModal=!1,this.selectedWidget.display=!0,this.selectedWidget.cache=this.cache},onRemove(e){e.display=!1,e.cache=0},onAdd(e){this.cache=0,this.selectedWidget=e,e.key==="ticket-widget"&&this.getDashboardWidgets(),e.key==="dashboard-charts"?(this.showModal=!0,this.modalTitle="add"):this.onSave()},onEdit(e,t=""){this.cache=e.cache,this.selectedWidget=e,t==="chart"&&(this.editChartId=e.id,this.chart_type=e.chart_type,this.module=e.module,this.name=e.name,this.getCategoryAndOptions(e,"edit"),this.selectedWidget.key="dashboard-charts",this.selectedWidget.label="dashboard-charts"),this.showModal=!0,this.modalTitle="update"},onClose(){this.selectedWidget="",this.resetChartData(),this.showModal=!1},onMouseEnter(e){e.showOnlyIcon=!0},onMouseLeave(e){e.showOnlyIcon=!1},getEditableWidgets(){this.editDash=!0,this.moduleLoad=!0,R.get("/api/modules").then(e=>{this.dashboardWidget=e.data.data.helpdesk.find(t=>t.key=="Dashboard"),R.get(this.dashboardWidget.key_url).then(t=>{this.dashboardWidgetData=t.data.message.map(a=>({...a,display:a.display?a.display:!1,cache:a.cache?a.cache:0,showOnlyIcon:!1})),this.dashboardWidgetData.forEach(a=>{a.key==="ticket-widget"&&a.display&&this.getDashboardWidgets()}),this.moduleLoad=!1}).catch(t=>{this.moduleLoad=!1,this.editDash=!1})}).catch(e=>{this.moduleLoad=!1,this.editDash=!1})},getDashboardWidgets(){R.get("api/agent/dashboard-report/top-widget").then(e=>{this.widgetsData=e.data.data}).catch(e=>{B(e,"dashboard-page")}).finally(()=>{this.moduleLoad=!1})},subString(e,t){return ge(e,t)}}},Gl={key:1,class:"row"},Ql={class:"row mb-3 text-end"},Xl={class:"col-sm-12"},Jl={class:"row"},Zl={class:"col-sm-9"},$l={class:"card card-light"},ed={class:"card-header"},td={class:"card-title"},sd={class:"card-body"},ad={class:"row"},nd={class:"card card-light shadow"},id={class:"card-header"},od={class:"card-title"},rd={class:"card-tools"},ld={class:"badge text-bg-primary"},dd=["onClick"],cd=["onClick"],ud={class:"card-body mh-255"},hd={key:0,class:"row"},md={class:"info-box pe-0"},pd={class:"info-box-content"},gd={class:"info-box-text"},fd={class:"info-box-number"},_d=["onClick"],bd={key:1,class:"products-list product-list-in-card ps-2 pe-2"},vd={class:"fw-500"},yd=["href"],kd={key:0,class:"badge text-bg-danger"},wd={class:"float-end"},Cd={class:"float-end"},Sd={class:"text-danger"},Dd={key:3,class:"products-list product-list-in-card"},Td={class:"product-img"},Md={class:"fw-400"},Od={class:"row"},Id={class:"col-sm-2"},Ad={class:"col-sm-7"},Ld={href:"javascript:;"},Ed={class:"col-md-3"},xd={class:"float-end"},Pd={key:4,class:"products-list product-list-in-card"},Rd={class:"row"},Fd={class:"col-md-2"},Nd={class:"product-img"},Vd={class:"col-sm-4 mt-2"},jd={href:"javascript:;"},Ud={class:"float-end col-md-6"},Bd={style:{padding:"0.3rem"}},zd={class:"float-end"},Hd={href:"javascript:;",class:"badge text-bg-blue"},Wd={style:{padding:"0.3rem"}},qd={class:"float-end"},Kd={href:"javascript:;",class:"badge text-bg-blue"},Yd={class:"widget-user-header p-0"},Gd={class:"widget-user-username widget-name"},Qd={class:"card-footer p-0"},Xd={class:"nav flex-column bg-white"},Jd={class:"nav-item"},Zd={class:"nav-link"},$d={class:"float-end"},ec={href:"javascript:;",class:"badge text-bg-blue"},tc={class:"progress-group"},sc={class:"progress-text"},ac={class:"progress-number"},nc={class:"progress sm"},ic={class:"system-analysis-list"},oc={class:"nav flex-column"},rc={class:"float-end badge text-bg-blue"},lc={class:"col-sm-6"},dc={class:"card card-light shadow"},cc={class:"card-header"},uc={class:"card-title"},hc={class:"card-tools"},mc={class:"badge text-bg-primary"},pc=["onClick"],gc=["onClick"],fc={class:"card-body h-255"},_c={class:"col-sm-3"},bc={class:"card card-light"},vc={class:"card-header"},yc={class:"card-title"},kc={class:"card-body"},wc={key:0,class:"row"},Cc=["onMouseenter","onMouseleave","onClick"],Sc={class:"info-box bg-light"},Dc={class:"info-box-content"},Tc={class:"info-box-text text-center text-muted"},Mc={key:1,class:"fas fa-plus fa-2x"},Oc={class:"modal-title"},Ic={class:"row"},Ac={class:"col-sm-4"},Lc={class:"form-group"},Ec={class:"col-sm-4"},xc={class:"form-group"},Pc={class:"row"},Rc={key:1,class:"row widget-interval"},Fc={class:"input-group"},Nc={type:"button",class:"btn btn-light disabled cursor-default"};function Vc(e,t,a,r,s,i){const d=g("custom-loader"),m=g("reuse-loader"),p=g("faveo-image-element"),f=g("Bar"),b=g("Doughnut"),y=g("tool-tip"),D=g("dynamic-select"),w=g("static-select"),S=g("text-field"),L=g("modal"),x=g("BasicDeleteModal"),P=Q("tooltip"),F=Q("focus-first-input");return o(),l("div",null,[s.loading?(o(),I(d,{key:0,duration:4e3})):u("",!0),s.moduleLoad?(o(),l("div",Gl,[_(m,{"animation-duration":4e3,size:60})])):(o(),l(E,{key:2},[n("div",Ql,[n("div",Xl,[n("button",{type:"button",class:"btn btn-primary btn-md",onClick:t[0]||(t[0]=(...O)=>i.updateDashboardWidgets&&i.updateDashboardWidgets(...O))},[t[14]||(t[14]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(e.trans("update")),1)]),n("button",{type:"button",class:"btn btn-secondary btn-md",onClick:t[1]||(t[1]=(...O)=>a.closeEditDash&&a.closeEditDash(...O))},[t[15]||(t[15]=n("i",{class:"fas fa-times"},null,-1)),k(" "+c(e.trans("cancel")),1)])])]),n("div",Jl,[n("div",Zl,[n("div",$l,[n("div",ed,[n("h3",td,c(e.trans("added_widgets")),1)]),n("div",sd,[n("div",ad,[(o(!0),l(E,null,q(s.dashboardWidgetData.filter(O=>O.display&&O.key!=="dashboard-charts"),O=>(o(),l("div",{class:N({"col-sm-12":O.key==="ticket-widget","col-sm-6":O.key!=="ticket-widget"}),key:O.id},[n("div",nd,[n("div",id,[n("h3",od,c(e.trans(O.label)),1),n("div",rd,[M((o(),l("span",ld,[k(c(O.cache),1)])),[[P,e.trans("cache")]]),M((o(),l("button",{type:"button",class:"btn btn-tool",onClick:j=>i.onEdit(O)},t[16]||(t[16]=[n("i",{class:"fas fa-pencil-alt"},null,-1)]),8,dd)),[[P,e.trans("edit")]]),M((o(),l("button",{type:"button",class:"btn btn-tool",onClick:j=>i.onRemove(O)},t[17]||(t[17]=[n("i",{class:"fas fa-times"},null,-1)]),8,cd)),[[P,e.trans("remove")]])])]),n("div",ud,[O.key==="ticket-widget"?(o(),l("div",hd,[(o(!0),l(E,null,q(s.widgetsData,j=>(o(),l("div",{class:"col-sm-4",key:j.id},[n("div",md,[j.icon_class?(o(),l("span",{key:0,class:N(["info-box-icon",j.is_default?"bg-light box-icon-color":""]),style:ne({background:j.icon_color})},[n("i",{class:N(j.icon_class)},null,2)],6)):u("",!0),M((o(),l("div",pd,[n("span",gd,c(i.subString(j.key,50)),1),n("span",fd,c(j.value),1)])),[[P,j.key+": "+j.value]]),j.is_deletable&&j.widget_type!=="Service Desk"?M((o(),l("button",{key:1,type:"button",onClick:J=>i.onChartRemove(j.id,"widget"),class:"btn btn-tool"},t[18]||(t[18]=[n("i",{class:"fas fa-trash-alt trash-color mb-5"},null,-1)]),8,_d)),[[P,e.trans("delete")]]):u("",!0)])]))),128))])):u("",!0),O.key==="immediate-action"?(o(),l("ul",bd,[(o(!0),l(E,null,q(i.dashConfig.immediateTickets,(j,J)=>(o(),l("li",{class:"item",key:J},[n("span",vd,[n("a",{href:j.link},c(e.trans(j.label)),9,yd)]),t[19]||(t[19]=k("   ")),j.overdue?(o(),l("span",kd,c(e.trans("overdue")),1)):u("",!0),n("div",wd,[n("div",Cd,[n("div",Sd,[k(c(e.trans("due_at"))+": ",1),n("span",null,c(e.trans(j.dueTime)),1)])])])]))),128))])):u("",!0),O.key==="todo"?(o(),l(E,{key:2},[t[20]||(t[20]=n("span",null,"→",-1)),t[21]||(t[21]=k(" ")),n("i",null,c(e.trans("todo_msg")),1)],64)):u("",!0),O.key==="recent-activities"?(o(),l("ul",Dd,[(o(!0),l(E,null,q(i.dashConfig.recentActivities,(j,J)=>(o(),l("li",{class:"item",key:J},[n("div",Td,[_(p,{"source-url":j.imageUrl,classes:["img-circle img-30"],id:"recent_img"+(J+1)},null,8,["source-url","id"])]),n("div",Md,[n("div",Od,[n("div",Id,c(e.trans(j.agentType)),1),n("div",Ad,[n("a",Ld,[n("span",null,c(e.trans(j.message)),1)])]),n("div",Ed,[n("span",xd,c(j.date),1)])])])]))),128))])):u("",!0),O.key==="agent-summary"?(o(),l("ul",Pd,[(o(!0),l(E,null,q(i.dashConfig.agentSummary,(j,J)=>(o(),l("li",{class:"item",key:J},[n("div",Rd,[n("div",Fd,[n("div",Nd,[_(p,{"source-url":j.imageUrl,classes:["img-circle"],id:"agent_sum_img"+(J+1)},null,8,["source-url","id"])])]),n("div",Vd,[n("span",null,[n("a",jd,c(e.trans(j.name)),1)])]),n("div",Ud,[n("div",null,[n("div",Bd,[k(c(e.trans("reopened_tickets"))+": ",1),n("span",zd,[n("a",Hd,c(j.reopenedTickets),1)])]),n("div",Wd,[k(c(e.trans("overdue-tickets"))+": ",1),n("span",qd,[n("a",Kd,c(j.overdueTickets),1)])])])])])]))),128))])):u("",!0),O.key==="department-summary"?(o(!0),l(E,{key:5},q(i.dashConfig.departmentSummaries,(j,J)=>(o(),l("div",{class:"card card-widget widget-user-2 shadow-0",key:J},[n("div",Yd,[n("h3",Gd,c(e.trans(j.name)),1)]),n("div",Qd,[n("ul",Xd,[n("li",Jd,[n("a",Zd,[k(c(e.trans(j.summaryMessage))+" ",1),n("span",$d,[n("a",ec,c(j.badgeValue),1)])])])])])]))),128)):u("",!0),O.key==="agent-performance"?(o(!0),l(E,{key:6},q(i.dashConfig.agentPerformances,(j,J)=>(o(),l("div",{class:"col-md-12",key:J},[n("div",tc,[n("span",sc,c(e.trans(j.message)),1),n("span",ac,[n("b",null," "+c(j.percent)+"%",1)]),n("div",nc,[n("div",{class:"progress-bar progress-bar-red",style:ne({width:j.percent+"%"})},null,4)])])]))),128)):u("",!0),O.key==="system-summary"?(o(!0),l(E,{key:7},q(i.dashConfig.systemAnalysisSummaries,(j,J)=>(o(),l("div",{key:J},[n("div",ic,[n("ul",oc,[n("li",null,[k(c(e.trans(j.message))+" ",1),n("span",rc,c(j.value),1)])])])]))),128)):u("",!0)])])],2))),128)),s.dashboardCharts&&s.dashboardCharts.length?(o(!0),l(E,{key:0},q(s.dashboardCharts,O=>(o(),l("div",lc,[n("div",dc,[n("div",cc,[n("h3",uc,c(e.trans(O.name)),1),n("div",hc,[M((o(),l("span",mc,[k(c(O.cache),1)])),[[P,e.trans("cache")]]),M((o(),l("button",{type:"button",class:"btn btn-tool",onClick:j=>i.onEdit(O,"chart")},t[22]||(t[22]=[n("i",{class:"fas fa-pencil-alt"},null,-1)]),8,pc)),[[P,e.trans("edit")]]),M((o(),l("button",{type:"button",class:"btn btn-tool",onClick:j=>i.onChartRemove(O.id,"charts")},t[23]||(t[23]=[n("i",{class:"fas fa-times"},null,-1)]),8,gc)),[[P,e.trans("remove")]])])]),n("div",fc,[O.chart_type==="bar_chart"?(o(),I(f,{key:0,id:O.id+"my-chart-id",options:i.dashConfig.barChartOptions,data:i.dashConfig.barChartData},null,8,["id","options","data"])):u("",!0),O.chart_type==="donut_chart"?(o(),I(b,{key:1,id:O.id+"my-chart-id",data:i.dashConfig.donutChartData,options:i.dashConfig.donutChartOptions},null,8,["id","data","options"])):u("",!0)])])]))),256)):u("",!0)])])])]),n("div",_c,[n("div",bc,[n("div",vc,[n("h3",yc,c(e.trans("add_widgets")),1)]),n("div",kc,[s.dashboardWidgetData.length?(o(),l("div",wc,[(o(!0),l(E,null,q(s.dashboardWidgetData.filter(O=>O.key==="dashboard-charts"||!O.display),O=>(o(),l("div",{class:"col-sm-12",key:O.id},[n("a",{href:"javascript:;",onMouseenter:j=>i.onMouseEnter(O),onMouseleave:j=>i.onMouseLeave(O),onClick:j=>i.onAdd(O),onDragstart:t[2]||(t[2]=Ee(()=>{},["prevent"]))},[n("div",Sc,[n("div",Dc,[n("span",Tc,[O.showOnlyIcon?(o(),l("i",Mc)):(o(),l(E,{key:0},[k(c(e.trans(O.label)),1)],64))])])])],40,Cc)]))),128))])):u("",!0),s.showModal?(o(),I(L,{key:1,showModal:!0,onClose:i.onClose,containerStyle:{width:s.selectedWidget.key==="dashboard-charts"?"800px":"500px"}},{title:T(()=>[n("h4",Oc,c(e.trans(s.modalTitle))+" "+c(e.trans("dashboard-charts")),1)]),fields:T(()=>[s.selectedWidget.key==="dashboard-charts"?(o(),l(E,{key:0},[n("div",Ic,[n("div",Ac,[n("div",Lc,[t[25]||(t[25]=n("label",null,"Chart Type",-1)),M(n("select",{"onUpdate:modelValue":t[3]||(t[3]=O=>s.chart_type=O),class:"form-control"},t[24]||(t[24]=[n("option",{value:"bar_chart"},"Bar Chart",-1),n("option",{value:"donut_chart"},"Donut Chart",-1)]),512),[[aa,s.chart_type]])])]),n("div",Ec,[n("div",xc,[n("label",null,c(e.trans("dashboard_cache")),1),_(y,{message:e.trans("widget-cache"),size:"medium"},null,8,["message"]),M(n("input",{type:"number",min:"0","onUpdate:modelValue":t[4]||(t[4]=O=>s.cache=O),max:"999",class:"form-control",onInput:t[5]||(t[5]=(...O)=>i.onInput&&i.onInput(...O)),onKeypress:t[6]||(t[6]=(...O)=>i.checkValue&&i.checkValue(...O)),onPaste:t[7]||(t[7]=(...O)=>i.onPaste&&i.onPaste(...O))},null,544),[[Fe,s.cache]])])]),_(D,{name:"module",classname:"col-sm-4",apiEndpoint:"/service-desk/api/modules/list?dashboard=1",label:e.trans("module"),value:s.module,multiple:!1,onChange:i.onChange,required:!0},null,8,["label","value","onChange"])]),n("div",Pc,[s.module?(o(),l(E,{key:0},[s.optionsLoading?(o(),I(m,{key:0,"animation-duration":4e3,size:30})):(o(),l(E,{key:1},[_(D,{name:"tickets_view",classname:"col-sm-4",elements:s.viewOptionStatus,multiple:!1,label:s.module.name+" "+e.trans("view"),value:s.tickets_view,onChange:i.onChange,required:!0},null,8,["elements","label","value","onChange"]),_(w,{label:e.trans("categorized_by"),elements:s.categoryOptions,hideEmptySelect:!0,name:"category",onChange:i.onChange,value:s.category,classname:"col-sm-3","bind-value-key":"column_name",required:!0},null,8,["label","elements","onChange","value"]),s.optionsLoading?u("",!0):(o(),I(S,{key:0,label:e.trans("widget_label"),value:s.name,type:"text",name:"name",onChange:i.onChange,classname:"col-sm-5",required:!0},null,8,["label","value","onChange"]))],64))],64)):u("",!0)])],64)):M((o(),l("div",Rc,[n("label",null,c(e.trans("dashboard_cache")),1),_(y,{message:e.trans("widget-cache"),size:"medium"},null,8,["message"]),n("div",Fc,[M(n("input",{type:"number",min:"0","onUpdate:modelValue":t[8]||(t[8]=O=>s.cache=O),max:"999",class:"form-control",onInput:t[9]||(t[9]=(...O)=>i.onInput&&i.onInput(...O)),onKeypress:t[10]||(t[10]=(...O)=>i.checkValue&&i.checkValue(...O)),onPaste:t[11]||(t[11]=(...O)=>i.onPaste&&i.onPaste(...O))},null,544),[[Fe,s.cache]]),n("div",Nc,c(e.trans("minutes")),1)])])),[[F]])]),controls:T(()=>[s.selectedWidget.key==="dashboard-charts"?(o(),l("button",{key:0,type:"button",onClick:t[12]||(t[12]=(...O)=>i.onSaveChart&&i.onSaveChart(...O)),class:"btn btn-primary"},[t[26]||(t[26]=n("i",{class:"fas fa-check"},null,-1)),k("  "+c(e.trans(s.modalTitle)),1)])):(o(),l("button",{key:1,type:"button",onClick:t[13]||(t[13]=(...O)=>i.onSave&&i.onSave(...O)),class:"btn btn-primary"},[t[27]||(t[27]=n("i",{class:"fas fa-check"},null,-1)),k("  "+c(e.trans(s.modalTitle)),1)]))]),_:1},8,["onClose","containerStyle"])):u("",!0)])])])])],64)),_(ae,{name:"modal"},{default:T(()=>[s.showDeleteModal?(o(),I(x,{key:0,onClose:i.onChartModalClose,from:s.from,showModal:s.showDeleteModal,deleteUrl:s.deleteUrl,updateList:i.getAddedCharts,alert:"dashboard-page"},null,8,["onClose","from","showModal","deleteUrl","updateList"])):u("",!0)]),_:1})])}const jc=U(Yl,[["render",Vc],["__scopeId","data-v-914a755a"]]);const Uc={name:"dashboard-page",setup(){const e=ue();return{showLoader:ee(()=>e.getters.showLoader)}},data:()=>({userRoles:[],topWidgetCount:3,hasDataPopulated:!1,loading:!1,counter:0,widgetKeys:[],editDash:!1,isAdminEnabled:!0}),beforeMount(){this.getDashData()},created(){window.emitter.on("editDash",e=>{this.editDash=e})},methods:{dashboardMounted(){window.emitter.emit("dashboard-mounted")},closeEditView(e=!1){this.editDash=!1,window.emitter.emit("edit-dashboard",!0),e&&this.getDashData()},reloadDashboard(){this.counter+=1},getDashData(){this.loading=!0,R.get("/api/agent/dashboard-data/"+this.$route.meta.title).then(e=>{this.userRoles=e.data.data.roles,this.widgetKeys=e.data.data.widget.map(t=>t.key),this.topWidgetCount=e.data.data.count,this.isAdminEnabled=!!e.data.data.is_enabled,window.emitter.emit("isAdminEnabled",this.isAdminEnabled),this.hasDataPopulated=!0,this.loading=!1}).catch(e=>{this.hasDataPopulated=!0,this.userRoles=[],this.topWidgetCount=0,this.loading=!1})}},beforeDestroy(){this.$store.dispatch("forceStopLoader")},components:{"dashboard-top-widgets":co,"dashboard-recent-activities":xo,"dashboard-todo":er,"dashboard-system-analysis":ur,"dashboard-requires-immediate-action":Tr,"dashboard-agent-summary":Wr,"dashboard-department-summary":il,"dashboard-agent-performance-widget":_l,"dashboard-edit":jc}},Bc={class:"row mb-3 d-none"},zc={class:"col-sm-12"},Hc={key:0,class:"row"},Wc={key:0,class:"col-md-12"},qc={key:1,class:"col-md-6"},Kc={key:2,class:"col-md-6"},Yc={key:3,class:"col-md-6"},Gc={key:4,class:"col-md-6"},Qc={key:5,class:"col-md-6"},Xc={key:6,class:"col-md-6"},Jc={key:7,class:"col-md-6"},Zc={key:1,id:"dashboard-chart-container"},$c={key:2,class:"row"};function eu(e,t,a,r,s,i){const d=g("alert"),m=g("dashboard-edit"),p=g("dashboard-top-widgets"),f=g("dashboard-requires-immediate-action"),b=g("dashboard-todo"),y=g("dashboard-agent-summary"),D=g("dashboard-department-summary"),w=g("dashboard-recent-activities"),S=g("dashboard-agent-performance-widget"),L=g("dashboard-system-analysis"),x=g("reuse-loader");return o(),l("div",{class:"col-sm-12",key:e.counter},[_(d,{componentName:"dashboard-page"}),e.editDash?(o(),I(m,{key:0,closeEditDash:i.closeEditView},null,8,["closeEditDash"])):(o(),l(E,{key:1},[n("div",Bc,[n("div",zc,[n("button",{class:"btn bth-default",id:"dashboard_refresh",onClick:t[0]||(t[0]=(...P)=>i.reloadDashboard&&i.reloadDashboard(...P))},t[1]||(t[1]=[n("i",{class:"fas fa-sync"},null,-1)]))])]),e.hasDataPopulated?(o(),l("div",Hc,[e.widgetKeys.includes("ticket-widget")?(o(),l("div",Wc,[_(p,{"top-widget-count":e.topWidgetCount},null,8,["top-widget-count"])])):u("",!0),e.widgetKeys.includes("immediate-action")?(o(),l("div",qc,[_(f)])):u("",!0),e.widgetKeys.includes("todo")?(o(),l("div",Kc,[_(b)])):u("",!0),e.widgetKeys.includes("agent-summary")?(o(),l("div",Yc,[_(y)])):u("",!0),e.widgetKeys.includes("department-summary")?(o(),l("div",Gc,[_(D)])):u("",!0),e.widgetKeys.includes("recent-activities")?(o(),l("div",Qc,[_(w)])):u("",!0),e.widgetKeys.includes("agent-performance")?(o(),l("div",Xc,[_(S)])):u("",!0),e.widgetKeys.includes("system-summary")?(o(),l("div",Jc,[_(L)])):u("",!0)])):u("",!0),e.widgetKeys.includes("dashboard-charts")?(o(),l("div",Zc,c(i.dashboardMounted()),1)):u("",!0),e.loading?(o(),l("div",$c,[_(x,{"animation-duration":4e3,size:60})])):u("",!0)],64))])}const tu=U(Uc,[["render",eu],["__scopeId","data-v-9d28b12a"]]);function su(e){const{first_name:t}=e;let a={first_name:[t,"isRequired"]};const r=new ye(pe),{errors:s,isValid:i}=r.validate(a);return ve.dispatch("setValidationError",s),{errors:s,isValid:i}}const au={name:"agent-profie-edit",description:"Agent Profile Edit Page",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},data(){return{loading:!1,hasDataPopulated:!1,isDisabled:!1,passDisabled:!1,first_name:"",last_name:"",email:"",country_code:91,mobile:"",phone_number:"",phone_country_code:91,ext:"",profile_pic:"",not_accept_ticket:0,types:[],agent_sign:"",location:"",radioOptions:[{name:"yes",value:0},{name:"no",value:1}],labelStyle:{display:"none"},labelCss:{visibility:"hidden",margin:"auto"},old_password:"",new_password:"",confirm_password:"",profileData:"",two_factor:!1,showModal:!1,removeModal:!1,iso:"",phone_iso:"",selectedImage:"",phoneValidityStatus:{phone_number:!0,mobile:!0}}},created(){window.emitter.on("updateEditData",this.getData)},beforeMount(){this.getData()},methods:{getData(e){this.loading=!0,R.get("/api/profile/info").then(t=>{this.profileData=t.data.data,window.emitter.emit("updateSmsToggleButton",this.profileData),this.updateStatesWithData(t.data.data),e=="update"&&window.emitter.emit("updateAgentProfile",t.data.data),this.loading=!1,this.hasDataPopulated=!0}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),this.two_factor=e.is_2fa_enabled,this.mobile=this.mobile==="Not available"?"":this.mobile,this.country_code=this.country_code===""?91:this.country_code,this.phone_number=this.phone_number==="Not available"?"":this.phone_number,this.phone_country_code=this.phone_country_code===""?91:this.phone_country_code},onChange(e,t){t==="profile_pic"?(this.profile_pic=e.image,this.selectedImage=e):this[t]=e},getCountCode(e){this.country_code=e},getCountIso(e){this.iso=e},getPCountCode(e){this.phone_country_code=e},getPCountIso(e){this.phone_iso=e},checkValidity(e,t){this.phoneValidityStatus[e]=t},isValid(){const{errors:e,isValid:t}=su(this.$data);return!!t},isPasswordValid(){const{errors:e,isValid:t}=bi(this.$data);return!!t},onSubmit(){if(this.isValid()&&this.isPhoneValid){this.isDisabled=!0,this.loading=!0;var e=new FormData;if(e.append("first_name",this.first_name),e.append("last_name",this.last_name),e.append("country_code",this.country_code?this.country_code:null),e.append("iso",this.iso?this.iso:null),e.append("mobile",this.mobile),e.append("ext",this.ext?this.ext:""),e.append("phone_country_code",this.phone_country_code?this.phone_country_code:null),e.append("phone_iso",this.phone_iso?this.phone_iso:null),e.append("phone_number",this.phone_number?this.phone_number:""),this.selectedImage?e.append("profile_pic",this.selectedImage.file,this.selectedImage.name):e.append("profile_pic",null),e.append("location",this.location?this.location.id:""),e.append("agent_sign",this.agent_sign?this.agent_sign:""),e.append("not_accept_ticket",this.not_accept_ticket),this.types!=="")for(var t in this.types)e.append("type["+t+"]",this.types[t].id);e.append("_method","PATCH"),R.post("/agent-profile",e).then(a=>{X(a,"edit_agent_profile"),this.isDisabled=!1,this.loading=!1,this.getData("update")}).catch(a=>{this.loading=!1,this.isDisabled=!1,B(a,"edit_agent_profile")})}},onUpdatePassword(){var e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{6,20}$/,t=e.exec(this.new_password);if(this.isPasswordValid())if(this.old_password!==this.new_password)if(t)if(this.new_password===this.confirm_password){this.passDisabled=!0,this.loading=!0;var a=new FormData;a.append("old_password",this.old_password),a.append("new_password",this.new_password),a.append("confirm_password",this.confirm_password),a.append("_method","PATCH"),R.post("/agent-profile-password/"+this.profileData.id,a).then(r=>{this.old_password="",this.new_password="",this.confirm_password="",this.loading=!1,this.passDisabled=!1,X(r,"edit_agent_profile")}).catch(r=>{this.loading=!1,this.passDisabled=!1,B(r,"edit_agent_profile")})}else this.$store.dispatch("setValidationError",{confirm_password:"Password does not match"});else this.$store.dispatch("setValidationError",{new_password:"Password must have 8 characters and contain at least one Uppercase, one lowercase, one number and one special character"});else this.$store.dispatch("setValidationError",{new_password:"new password is same as old. Please choose a different password"})},profileBoxVisible(){window.emitter.emit("profile-box-mounted",{alert:"edit_agent_profile",twoFAStatus:this.profileData.is_2fa_enabled})},onClose(){this.showModal=!1,this.removeModal=!1,this.$store.dispatch("unsetValidationError")}},computed:{isPhoneValid(){return this.phoneValidityStatus.phone_number&&this.phoneValidityStatus.mobile}},components:{"text-field":Se,"radio-button":Pe,"number-field":ft,phoneWithCountryCode:na,"dynamic-select":_e,"image-upload":Xn,"barcode-modal":wi,"remove-modal":ma,"login-logs":pa}},nu={class:"col-sm-12"},iu={key:0,class:"row"},ou={class:"row"},ru={key:0,class:"col-md-6"},lu={class:"card card-light"},du={class:"card-header"},cu={class:"card-title"},uu={class:"card-body"},hu={class:"text-center"},mu={class:"row"},pu={class:"card-footer"},gu=["disabled"],fu={key:1,class:"col-md-6"},_u={class:"card card-light"},bu={class:"card-header"},vu={class:"card-title"},yu={class:"card-body"},ku={class:"card-footer"},wu=["disabled"],Cu={class:"card card-light"},Su={class:"card-header"},Du={class:"card-title"},Tu={class:"card-body"},Mu={class:"row"},Ou={class:"col-md-9"},Iu=["src"],Au={class:"col-md-3"},Lu=["disabled"],Eu={id:"profile-view-boxes"};function xu(e,t,a,r,s,i){const d=g("alert"),m=g("custom-loader"),p=g("image-upload"),f=g("text-field"),b=g("dynamic-select"),y=g("phoneWithCountryCode"),D=g("number-field"),w=g("tiny-editor"),S=g("radio-button"),L=g("login-logs"),x=g("barcode-modal"),P=g("remove-modal"),F=Q("tooltip");return o(),l("div",nu,[_(d,{componentName:"edit_agent_profile"}),!s.hasDataPopulated||s.loading?(o(),l("div",iu,[_(m,{duration:4e3})])):u("",!0),n("div",ou,[s.hasDataPopulated?(o(),l("div",ru,[n("div",lu,[n("div",du,[n("h3",cu,c(e.lang("profile")),1)]),n("div",uu,[n("div",hu,[_(p,{label:e.lang("profile_pic"),value:s.profile_pic,name:"profile_pic",onChange:i.onChange,labelStyle:s.labelStyle,labelCss:s.labelCss,buttonName:"change"},null,8,["label","value","onChange","labelStyle","labelCss"])]),_(f,{label:e.lang("first_name"),value:s.first_name,type:"text",name:"first_name",onChange:i.onChange,placehold:e.lang("enter_a_value"),required:!0,autofocus:!0},null,8,["label","value","onChange","placehold"]),_(f,{label:e.lang("last_name"),value:s.last_name,type:"text",name:"last_name",onChange:i.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"]),s.types.length>0?(o(),I(b,{key:0,label:e.lang("type"),multiple:!0,name:"types",required:!1,apiEndpoint:"/api/dependency/types",value:s.types,onChange:i.onChange,clearable:!!s.types,disabled:!0},null,8,["label","value","onChange","clearable"])):u("",!0),_(f,{label:e.lang("email"),value:s.email,type:"text",name:"email",onChange:i.onChange,placehold:e.lang("enter_email_addresses"),disabled:!0},null,8,["label","value","onChange","placehold"]),s.location?(o(),I(b,{key:1,label:e.lang("location"),multiple:!1,name:"location",apiEndpoint:"/api/dependency/locations",value:s.location,onChange:i.onChange,clearable:!!s.location,disabled:!0},null,8,["label","value","onChange","clearable"])):u("",!0),n("div",mu,[_(y,{id:"phone_number",classname:"col-sm-9",name:"phone_number",onChange:i.onChange,value:s.phone_number,countryCode:s.phone_country_code,countryIso:s.phone_iso,onCountCode:i.getPCountCode,onCountIso:i.getPCountIso,labelName:"phone_number",apiUrl:"/api/dependency/country-codes?time="+Date.now(),onValidPhoneNumber:i.checkValidity,fieldType:"FIXED_LINE_OR_MOBILE"},null,8,["onChange","value","countryCode","countryIso","onCountCode","onCountIso","apiUrl","onValidPhoneNumber"]),_(D,{label:e.lang("ext"),value:s.ext,name:"ext",classname:"col-sm-3",onChange:i.onChange,type:"number"},null,8,["label","value","onChange"])]),_(y,{id:"mobile",name:"mobile",onChange:i.onChange,value:s.mobile,countryCode:s.country_code,onCountCode:i.getCountCode,countryIso:s.iso,onCountIso:i.getCountIso,fieldType:"FIXED_LINE_OR_MOBILE",onValidPhoneNumber:i.checkValidity},null,8,["onChange","value","countryCode","onCountCode","countryIso","onCountIso","onValidPhoneNumber"]),_(w,{value:s.agent_sign,type:"text",id:"agent_sign_editor",onChange:i.onChange,name:"agent_sign",label:e.lang("agent_sign"),classname:"",lang:"en"},null,8,["value","onChange","label"]),_(S,{options:s.radioOptions,label:e.lang("for_auto_assign_accept_tickets"),name:"not_accept_ticket",value:s.not_accept_ticket,onChange:i.onChange,classname:"form-group"},null,8,["options","label","value","onChange"])]),n("div",pu,[n("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=O=>i.onSubmit()),disabled:s.isDisabled},[t[4]||(t[4]=n("i",{class:"fas fa-sync"},null,-1)),k(" "+c(e.lang("update")),1)],8,gu)])])])):u("",!0),s.hasDataPopulated?(o(),l("div",fu,[n("div",_u,[n("div",bu,[n("h3",vu,c(e.lang("change_password")),1)]),n("div",yu,[_(f,{label:e.lang("old_password"),value:s.old_password,type:"password",name:"old_password",onChange:i.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"]),_(f,{label:e.lang("new_password"),value:s.new_password,type:"password",name:"new_password",onChange:i.onChange,placehold:e.lang("enter_a_value"),required:!0,id:"new_password"},null,8,["label","value","onChange","placehold"]),_(f,{label:e.lang("confirm_password"),value:s.confirm_password,type:"password",name:"confirm_password",onChange:i.onChange,placehold:e.lang("enter_a_value"),required:!0,id:"confirm_password"},null,8,["label","value","onChange","placehold"])]),n("div",ku,[n("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=O=>i.onUpdatePassword()),disabled:s.passDisabled},[t[5]||(t[5]=n("i",{class:"fas fa-sync"},null,-1)),k(" "+c(e.lang("update")),1)],8,wu)])]),n("div",Cu,[n("div",Su,[n("h3",Du,c(e.lang("2fa_setup")),1)]),n("div",Tu,[n("div",Mu,[n("div",Ou,[n("span",null,[n("img",{class:"img-responsive img-circle img-sm",src:e.basePathVersion()+"/themes/default/common/images/authenticator.png",alt:"A",id:"auth_img"},null,8,Iu),k(" "+c(s.two_factor?"2-Step Verification is ON since "+r.formattedTime(s.profileData.google2fa_activation_date):e.lang("authenticator_app")),1)])]),n("div",Au,[s.two_factor?u("",!0):M((o(),l("button",{key:0,type:"button",class:"btn btn-primary float-end",onClick:t[2]||(t[2]=O=>s.showModal=!0),disabled:s.profileData.is_otp_verification_enabled},[t[6]||(t[6]=n("i",{class:"fas fa-toggle-on"},null,-1)),k(" "+c(e.lang("turn_on")),1)],8,Lu)),[[F,e.lang("google_2fa_tooltip_for_status_"+!s.profileData.is_otp_verification_enabled)]]),s.two_factor?(o(),l("button",{key:1,type:"button",class:"btn btn-secondary float-end",onClick:t[3]||(t[3]=O=>s.removeModal=!0)},[t[7]||(t[7]=n("i",{class:"fas fa-toggle-off"},null,-1)),k(" "+c(e.lang("turn_off")),1)])):u("",!0)])]),n("div",Eu,c(i.profileBoxVisible()),1)])]),_(L,{userId:s.profileData.id,showBtn:!0},null,8,["userId"]),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(x,{key:0,onClose:i.onClose,two_factor:!0,showModal:s.showModal},null,8,["onClose","showModal"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.removeModal?(o(),I(P,{key:0,onClose:i.onClose,showModal:s.removeModal,alertName:"edit_agent_profile"},null,8,["onClose","showModal"])):u("",!0)]),_:1})])):u("",!0)])])}const Pu=U(au,[["render",xu]]);var zs=function(){return Math.random().toString(36).substring(2)},Ru=gt({name:"ContentLoader",props:{width:{type:[Number,String]},height:{type:[Number,String]},viewBox:{type:String},preserveAspectRatio:{type:String,default:"xMidYMid meet"},speed:{type:Number,default:2},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"#f9f9f9"},secondaryColor:{type:String,default:"#ecebeb"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},setup:function(t){var a=ee(function(){return t.uniqueKey?"".concat(t.uniqueKey,"-idClip"):zs()}),r=ee(function(){return t.uniqueKey?"".concat(t.uniqueKey,"-idGradient"):zs()}),s=ee(function(){var m;return(m=t.width)!==null&&m!==void 0?m:400}),i=ee(function(){var m;return(m=t.height)!==null&&m!==void 0?m:130}),d=ee(function(){var m;return(m=t.viewBox)!==null&&m!==void 0?m:"0 0 ".concat(s.value," ").concat(i.value)});return{idClip:a,idGradient:r,computedViewBox:d}},render:function(){return _("svg",{width:this.width,height:this.height,viewBox:this.computedViewBox,version:"1.1",preserveAspectRatio:this.preserveAspectRatio},[_("rect",{style:{fill:"url(".concat(this.baseUrl,"#").concat(this.idGradient,")")},"clip-path":"url(".concat(this.baseUrl,"#").concat(this.idClip,")"),x:"0",y:"0",width:"100%",height:"100%"},null),_("defs",null,[_("clipPath",{id:this.idClip},[this.$slots.default?this.$slots.default():_("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"100%",height:"100%"},null)]),_("linearGradient",{id:this.idGradient},[_("stop",{offset:"0%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?_("animate",{attributeName:"offset",values:"-2; 1",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),_("stop",{offset:"50%","stop-color":this.secondaryColor,"stop-opacity":this.secondaryOpacity},[this.animate?_("animate",{attributeName:"offset",values:"-1.5; 1.5",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),_("stop",{offset:"100%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?_("animate",{attributeName:"offset",values:"-1; 2",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null])])])])}}),ba=gt(function(e,t){var a=t.attrs;return function(){return _(Ru,a,{default:function(){return[_("circle",{cx:"10",cy:"20",r:"8"},null),_("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"},null),_("circle",{cx:"10",cy:"50",r:"8"},null),_("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"},null),_("circle",{cx:"10",cy:"80",r:"8"},null),_("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"},null),_("circle",{cx:"10",cy:"110",r:"8"},null),_("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"},null)]}})}});const Fu={name:"delete-ticket-modal",description:"Delete ticket Modal component",props:{showModal:{type:Boolean,default:!1},ticketIds:{type:Array},onClose:{type:Function},componentTitle:{type:String,default:"UserTickets"},reloadTickets:{type:Function}},data:()=>({isDisabled:!1,containerStyle:{width:"600px"},loading:!1,size:60}),methods:{onSubmit(){this.loading=!0,this.isDisabled=!0;const e={"ticket-ids":this.ticketIds};R.post("api/ticket/delete-forever",e).then(t=>{this.loading=!1,this.isDisabled=!0,this.reloadTickets(),X(t,this.componentTitle),this.onClose()}).catch(t=>{this.loading=!1,this.isDisabled=!1,B(t,this.componentTitle)})}}},Nu={class:"modal-title"},Vu={key:0},ju={key:1,class:"row"},Uu=["disabled"];function Bu(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("modal");return a.showModal?(o(),I(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:T(()=>[n("h4",Nu,c(e.lang("delete_ticekt_forever")),1)]),fields:T(()=>[e.loading?u("",!0):(o(),l("div",Vu,[n("span",null,c(e.lang("are_you_sure_you_want_to_delete")),1)])),e.loading?(o(),l("div",ju,[_(d,{"animation-duration":4e3,color:"#1d78ff",size:e.size},null,8,["size"])])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=p=>i.onSubmit()),class:"btn btn-secondary",disabled:e.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-trash"},null,-1)),k(" "+c(e.lang("delete")),1)],8,Uu)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const zu=U(Fu,[["render",Bu]]);const Hu={name:"edit-ticket-modal",description:"Edit Ticket modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},ticketId:{type:[String,Number,Array],default:""},reloadTickets:{type:Function,default:()=>{}},selectedFormData:{type:Object,default:()=>{}},from:{type:String,default:""},componentTitle:{type:String,default:"inbox"},reloadDetails:{type:Function,default:()=>{}}},data(){return{formUniqueKey:"",submitFormInProgress:!1,scenario:"edit",panel:"agent",category:"ticket",selectedForm:{},formSelected:!0,ticket_id:"",fetchFormFieldApi:"",checkValidation:!1,closureTickets:[],changeTicketDetails:{},title:"",activeTicket:null,closureFormLoaded:!1,ticketList:[],page:1,next_page:!1,loader:!1,totalTickets:0,unResolvedTickets:0,initialLoad:!1,form_page:1,formCategoryList:[],form_next_page:!1,showFormLoader:!1,formRefreshed:!1}},mixins:[as],created(){window.emitter.on("updateTicketCategory",this.updateTicketCategory),window.emitter.on("validateEditForm",()=>this.formRefreshed=!0)},beforeMount(){this.from==="status"||this.from==="inboxReply"?(this.title="close_ticket",this.getInitialTicketList(),this.initialLoad=!0):(this.title="edit_ticket",this.ticket_id=this.ticketId,this.fetchFormFieldApi=`api/agent/edit-mode-ticket-details/${this.ticket_id}`,this.selectedForm=this.selectedFormData)},methods:{updateTicketCategory(){window.emitter.emit("storeCategoryId",this.selectedForm.id)},onChange(e,t){this[t]=e,this.formSelected=!1,this.updateFetchApi()},updateFetchApi(){this.$store.dispatch("destroyFormInsatnce",this.formUniqueKey),this.$store.dispatch("unsetValidationError"),this.fetchFormFieldApi="/api/agent/edit-mode-ticket-details/"+this.ticket_id+"?form_category_id="+this.selectedForm.id,setTimeout(()=>{this.$store.dispatch("createNewFormInstance",{formUniqueKey:this.formUniqueKey,scenario:this.scenario}),this.formSelected=!0},1)},popUpSubmit(){document.getElementById("edit-ticket-submit").click()},formSubmit(e,t){this.$store.dispatch("setRecaptchaKey",t),this.onSubmit()},afterSubmit(e){this.from==="status"||this.from==="inboxReply"?setTimeout(()=>{this.changeTicketStatus()},1e3):(window.emitter.emit("reset-captcha"),setTimeout(()=>{window.emitter.emit("refreshTableAndData",!0),this.reloadDetails("edit"),this.onClose()},1e3))},triggerValidation(){setTimeout(()=>{this.$refs.faveoFormObserver&&this.$refs.faveoFormObserver.validate()},100)},getInitialTicketList(){this.closureTickets=[],this.page=1,this.getClosureTicketList(null,!0)},async getClosureTicketList(e,t=!1){if(this.loader)return;this.loader=!0;let a={page:this.page};try{const r=await R.get("api/agent/ticket-closure/",{params:a});t?(this.closureTickets=r.data.data,this.totalTickets=r.data.total):(this.closureTickets.push(...r.data.data),this.unResolvedTickets=r.data.total),this.closureTickets.length>0?await this.loadClosureForm(this.closureTickets[0]):this.onClose(),this.next_page=r.data.next_page_url!==null,this.next_page&&this.page++,e&&e.loaded(),this.next_page||e&&e.complete(),this.ticketList=this.closureTickets.map(s=>s.ticket_id)}catch(r){B(r,"faveo-form")}finally{this.loader=!1}},getInitialFormCategory(){this.formCategoryList=[],this.form_page=1,this.getFormCategoryList(null,!0)},async getFormCategoryList(e,t=!1){if(this.showFormLoader)return;this.showFormLoader=!0;const a={page:this.form_page};try{const r=await R.get("/api/ticket/forms",{params:a});t?this.formCategoryList=r.data.data.data:this.formCategoryList.push(...r.data.data.data),this.form_next_page=r.data.data.next_page_url!==null,this.form_next_page&&this.form_page++,e&&e.loaded(),this.form_next_page||e&&e.complete()}catch(r){B(r,"faveo-form")}finally{this.showFormLoader=!1}},handleClosureTicketClick(e){var t;((t=this.activeTicket)==null?void 0:t.ticket_number)!==e.ticket_number&&this.loadClosureForm(e)},loadClosureForm(e){this.$refs.faveoFormObserver&&this.$refs.faveoFormObserver.resetForm(),this.$store.dispatch("unsetValidationError"),this.changeTicketDetails=e,this.ticket_id=e.ticket_id,this.selectedForm={id:e.form_category.id,name:e.form_category.name},this.activeTicket=e,this.fetchFormFieldApi="/api/agent/edit-mode-ticket-details/"+this.ticket_id+"?form_category_id="+this.selectedForm.id+"&checkTicketStatus="+!0,this.initialLoad?this.initialLoad=!1:setTimeout(()=>{window.emitter.emit("editTicketChangeStatus")},1),this.closureFormLoaded=!0},changeTicketStatus(){const{ticket_id:e,status_id:t,comment:a,"as-reply":r}=this.changeTicketDetails,s=this.ticketList.filter(d=>d!==e),i={comment:a,"as-reply":r,status_changed:!0,unprocessed_tickets:s};R.post(`/ticket/change-status/${e}/${t}`,i).then(d=>{this.closureTickets.length===1?(this.triggerRefreshEvent(),X(d,this.componentTitle),this.from==="inboxReply"&&window.emitter.emit("changeStatusAndReply")):(this.closureTickets=[],this.page=1,this.getClosureTicketList(),X(d,"faveo-form"))}).catch(d=>{this.onClose()})},onClose(){this.from==="status"&&this.closureTickets.length?this.triggerRefreshEvent():this.onClose()},triggerRefreshEvent(){this.onClose(),this.$nextTick(()=>{window.emitter.emit(this.componentTitle+"refreshData"),window.emitter.emit(this.componentTitle+"uncheckCheckbox"),window.emitter.emit("refreshUserReport"),window.emitter.emit("refreshOrgReport"),window.emitter.emit("closeTimelineActions"),window.emitter.emit("updateAgentSidebar"),this.componentTitle==="index"?this.reloadDetails("edit"):this.reloadTickets("status")})},subString(e,t=15){return ge(e,t)}},watch:{formRefreshed(e,t){e===!0&&(this.triggerValidation(),this.formRefreshed=!1)}},computed:{containerStyle(){return this.from==="status"?{width:"calc(85vw - 5rem) !important",maxWidth:"calc(90vw - 5rem) !important",height:"calc(90vh - 3rem) !important",maxHeight:"calc(95vh - 3rem) !important"}:{width:"calc(80vw - 3rem) !important",maxWidth:"calc(85vw - 3rem) !important",height:"calc(90vh - 3rem) !important",maxHeight:"calc(95vh - 3rem) !important"}}},beforeDestroy(){this.$store.dispatch("unsetAlert")},components:{StaticSelect:Xe,DynamicSelect:_e,Alert:ia,Modal:Ot,CustomLoader:oa,Loader:os,FormWithCaptcha:ns,FormRenderer:ra}},Wu={class:"modal-title"},qu={id:"ticket_modal_body"},Ku={key:0,class:"alert alert-warning"},Yu={key:0},Gu={key:1},Qu={class:"row"},Xu={key:0,class:"col-sm-3 pe-0"},Ju={class:"card ms-2"},Zu={class:"closure-list"},$u={class:"card-body"},eh=["onClick"],th={key:1,class:"mb-3"},sh=["disabled"],ah={class:"dropdown-menu dropdown-menu-lg dropdown-menu-right pb-2","aria-labelledby":"dropdown-menu-columns",id:"form-list-scrollable-ul"},nh=["onClick"],ih={key:0,class:"fas fa-check"},oh={key:1,class:"mb-3"},rh={class:"pull-right"},lh=["disabled"];function dh(e,t,a,r,s,i){const d=g("CustomLoader"),m=g("Alert"),p=g("infinite-loading"),f=g("reuse-loader"),b=g("FormRenderer"),y=g("ValidationObserver"),D=g("FormWithCaptcha"),w=g("Modal"),S=Q("tooltip");return o(),l("div",null,[s.submitFormInProgress?(o(),I(d,{key:0})):u("",!0),a.showModal?(o(),I(w,{key:1,showModal:a.showModal,onClose:i.onClose,containerStyle:i.containerStyle},{title:T(()=>[n("h4",Wu,c(e.lang(s.title)),1)]),fields:T(()=>[e.showLoader?(o(),I(d,{key:0})):u("",!0),n("div",qu,[_(m,{componentName:"faveo-form"}),a.from==="status"||a.from==="inboxReply"?(o(),l("div",Ku,[s.closureTickets.length>1?(o(),l("span",Yu,c((s.unResolvedTickets!==0?s.unResolvedTickets:s.totalTickets)+e.trans("of")+s.totalTickets+" "+e.trans("ticket_could_not_be_closed")+" "+e.trans("please_fill_required_fields_try_again")),1)):(o(),l("span",Gu,c(e.trans("please_fill_required_fields_try_again")),1))])):u("",!0),n("div",Qu,[(a.from==="status"||a.from==="inboxReply")&&s.closureFormLoaded?(o(),l("div",Xu,[n("div",Ju,[n("div",Zu,[n("div",$u,[(o(!0),l(E,null,q(s.closureTickets,L=>(o(),l("div",{onClick:x=>i.handleClosureTicketClick(L),key:L.ticket_number,class:N([{"active-ticket":s.activeTicket&&s.activeTicket.ticket_number===L.ticket_number},"card p-3 mb-2 cursor-pointer"])},c("#"+L.ticket_number),11,eh))),128))]),s.next_page?(o(),I(p,{key:0,onInfinite:i.getClosureTicketList},{spinner:T(()=>t[2]||(t[2]=[n("span",null,null,-1)])),complete:T(()=>t[3]||(t[3]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])):u("",!0),s.loader?(o(),l("div",th,[_(f,{"animation-duration":4e3,size:20})])):u("",!0)])])])):u("",!0),a.from==="status"&&s.closureFormLoaded||a.from!=="status"?(o(),l("div",{key:1,class:N(a.from==="status"||a.from==="inboxReply"?"col-sm-9 px-0 status-from-list":"col-sm-12")},[s.formUniqueKey&&s.formSelected?(o(),I(D,{key:0,loading:!e.showLoader,btnClass:"btn btn-primary pull-right",btnName:"submit",componentName:"faveo-form",btn_id:"edit-ticket-submit",formSubmit:i.formSubmit,page:"ticket_edit_agent",recaptchaContainerClass:"mt-2",disableSubmit:s.submitFormInProgress},{fields:T(()=>[_(y,{ref:"faveoFormObserver"},{default:T(({values:L,errors:x,validate:P})=>[s.fetchFormFieldApi?(o(),I(b,{key:0,category:"ticket",fetchFormFieldApi:s.fetchFormFieldApi,scenario:s.scenario,panel:s.panel,isInlineForm:!1,formUniqueKey:s.formUniqueKey,selectDependencyId:s.ticket_id,selectDependencyKey:"id",callingFrom:a.from==="status"||a.from==="inboxReply"?"changeTicketStatus":"editTicket"},{ticketedit:T(()=>[M((o(),l("button",{type:"button",class:"btn btn-light dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"true",id:"dropdown-menu-columns",onClick:t[0]||(t[0]=(...F)=>i.getInitialFormCategory&&i.getInitialFormCategory(...F)),disabled:a.from==="status"||a.from==="inboxReply"},[t[4]||(t[4]=n("i",{class:"fas fa-file-alt"}," ",-1)),k(c(i.subString(s.selectedForm.name,15)),1)],8,sh)),[[S,e.trans("selected_form")]]),n("div",ah,[(o(!0),l(E,null,q(s.formCategoryList,F=>(o(),l("a",{class:"dropdown-item ticket-category",onClick:O=>i.onChange(F,"selectedForm")},[this.selectedForm.id===F.id?(o(),l("i",ih)):u("",!0),t[5]||(t[5]=k("  ")),M((o(),l("span",{class:N(["search-text",this.selectedForm.id!==F.id?"ms-3":""])},[k(c(i.subString(F.name,30)),1)],2)),[[S,F.name.length>30?F.name:""]])],8,nh))),256)),s.form_next_page?(o(),I(p,{key:0,onInfinite:i.getFormCategoryList},{spinner:T(()=>t[6]||(t[6]=[n("span",null,null,-1)])),complete:T(()=>t[7]||(t[7]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])):u("",!0),s.showFormLoader?(o(),l("div",oh,[_(f,{"animation-duration":4e3,size:20})])):u("",!0)])]),_:1},8,["fetchFormFieldApi","scenario","panel","formUniqueKey","selectDependencyId","callingFrom"])):u("",!0)]),_:1},512)]),_:1},8,["loading","formSubmit","disableSubmit"])):u("",!0)],2)):u("",!0)])])]),controls:T(()=>[n("div",rh,[e.showLoader?u("",!0):(o(),l("button",{key:0,type:"button",class:"btn btn-primary",disabled:s.submitFormInProgress,onClick:t[1]||(t[1]=L=>i.popUpSubmit())},[t[8]||(t[8]=n("i",{class:"fas fa-sync"},null,-1)),k(" "+c(e.trans("update")),1)],8,lh))])]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)])}const va=U(Hu,[["render",dh],["__scopeId","data-v-0d7cb78f"]]);const ch={name:"ticket-actions",description:"Ticket actions component",props:{selectedTickets:{type:[Array,String],default:()=>[]},tickets:{type:[Array,String],default:()=>[]},buttonStyle:{type:Object,default:()=>{}},loadTickets:{type:Function},page:{type:String,default:""},label:{type:String,default:""},currentTicketCategory:{type:String,default:""},permissions:{type:[String,Object],default:""}},data(){return{loading:!1,parent_tickets:[],showStatusModal:!1,change_status:"",statusList:"",showAssignModal:!1,showMergeModal:!1,showDeleteModal:!1,statusDiv:0,showEditModal:!1,from:"",loadEditModal:!1}},created(){window.emitter.on("showEditTicketModalinbox",()=>this.loadEditModal=!0)},computed:{showCommonActions(){return this.page!=="archived"&&this.currentTicketCategory!=="archived"}},methods:{modalMethod(e,t){e!=="merge-ticket"?this.selectedTickets.length>0?this[t]=!0:alert("Please select tickets."):this.mergeTicket(e)},getStatusList(){if(this.statusList="",this.selectedTickets.length>0){this.loading=!0;let e={meta:!0,supplements:It(this.selectedTickets),limit:"all"};R.get("/api/dependency/statuses",{params:e}).then(t=>{this.loading=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.loading=!1})}else this.statusDiv+=1,alert("Please select tickets.")},getStatus(e){this.selectedTickets.length>0?(this.showStatusModal=!0,this.change_status=e):(alert("Please select tickets."),this.showStatusModal=!1)},mergeTicket(e){this.selectedTickets.length>1?this.showMergeModal=!0:(this.showMergeModal=!1,alert(pe("please_select_more_than_2_tickets")))},onClose(){this.statusDiv++,this.showStatusModal=!1,this.showAssignModal=!1,this.showMergeModal=!1,this.showDeleteModal=!1,this.showEditModal=!1,this.$store.dispatch("unsetValidationError"),window.emitter.emit("refreshData"),window.emitter.emit("uncheckCheckbox")},triggerEditModal(e){this.showEditModal=!0,this.from=e}},watch:{loadEditModal(){this.loadEditModal&&this.triggerEditModal("status"),this.loadEditModal=!1}},components:{"change-status-modal":Dt,"merge-ticket-modal":ts,"assign-ticket-modal":Tt,"delete-ticket-modal":zu,"edit-ticket-modal":va}},uh={class:"display_in"},hh={key:0,class:"dropdown-menu status-list"},mh={key:0,class:"row"},ph=["onClick"],gh={key:1,class:"dropdown-item",href:"javascript:;"};function fh(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("change-status-modal"),p=g("assign-ticket-modal"),f=g("merge-ticket-modal"),b=g("delete-ticket-modal"),y=g("edit-ticket-modal"),D=Q("tooltip");return o(),l("div",uh,[i.showCommonActions?M((o(),l("button",{key:0,type:"button",style:ne(a.buttonStyle),class:"btn btn-md btn-light",onClick:t[0]||(t[0]=w=>i.modalMethod("assign_ticket","showAssignModal")),id:"assign"},t[4]||(t[4]=[n("i",{class:"far fa-hand-point-right"},null,-1)]),4)),[[D,e.lang("assign-ticket")]]):u("",!0),i.showCommonActions?M((o(),l("button",{key:1,type:"button",class:"btn btn-md btn-light",style:ne(a.buttonStyle),onClick:t[1]||(t[1]=w=>i.modalMethod("merge-ticket")),id:"merge"},t[5]||(t[5]=[n("i",{class:"fas fa-cogs"},null,-1)]),4)),[[D,e.lang("merge-ticket")]]):u("",!0),a.page==="trash"||a.page==="deleted"?M((o(),l("button",{key:2,type:"button",class:"btn btn-md btn-secondary",onClick:t[2]||(t[2]=w=>i.modalMethod("delete-ticket","showDeleteModal")),id:"delete"},[t[6]||(t[6]=n("i",{class:"fas fa-trash"},null,-1)),k(" "+c(e.lang("delete_forever")),1)])),[[D,e.lang("delete-tickets")]]):u("",!0),i.showCommonActions?(o(),l("div",{class:"btn-group",key:s.statusDiv},[M((o(),l("button",{type:"button",class:"btn btn-md btn-light dropdown-toggle","data-bs-toggle":"dropdown",style:ne(a.buttonStyle),onClick:t[3]||(t[3]=w=>i.getStatusList()),id:"status"},t[7]||(t[7]=[n("i",{class:"fas fa-exchange-alt"},null,-1)]),4)),[[D,e.lang("change_status")]]),a.selectedTickets.length>0?(o(),l("div",hh,[s.loading?(o(),l("div",mh,[_(d,{"animation-duration":4e3,color:"#1d78ff",size:30})])):u("",!0),s.loading?u("",!0):(o(),l(E,{key:1},[s.statusList&&s.statusList.length>0?(o(!0),l(E,{key:0},q(s.statusList,w=>(o(),l("a",{class:"dropdown-item",onClick:S=>i.getStatus(w),href:"javascript:;"},[n("i",{class:N(w.icon),style:ne({color:w.icon_color})},null,6),k("  "+c(w.name),1)],8,ph))),256)):u("",!0),s.statusList&&s.statusList.length===0?(o(),l("a",gh,c(e.lang("no-records")),1)):u("",!0)],64))])):u("",!0)])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showStatusModal?(o(),I(m,{key:0,onClose:i.onClose,showModal:s.showStatusModal,ticketIds:a.selectedTickets,status:s.change_status,componentTitle:"inbox",reloadTickets:a.loadTickets,label:!1},null,8,["onClose","showModal","ticketIds","status","reloadTickets"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showAssignModal?(o(),I(p,{key:0,onClose:i.onClose,showModal:s.showAssignModal,ticketIds:a.selectedTickets,componentTitle:"inbox",reloadTickets:a.loadTickets,tickets:a.tickets},null,8,["onClose","showModal","ticketIds","reloadTickets","tickets"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showMergeModal?(o(),I(f,{key:0,onClose:i.onClose,showModal:s.showMergeModal,ticketIds:a.selectedTickets,componentTitle:"inbox",reloadTickets:a.loadTickets},null,8,["onClose","showModal","ticketIds","reloadTickets"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showDeleteModal?(o(),I(b,{key:0,onClose:i.onClose,showModal:s.showDeleteModal,ticketIds:a.selectedTickets,componentTitle:"inbox",reloadTickets:a.loadTickets},null,8,["onClose","showModal","ticketIds","reloadTickets"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showEditModal?(o(),I(y,{key:0,onClose:i.onClose,showModal:s.showEditModal,ticketIds:a.selectedTickets,componentTitle:"inbox",reloadDetails:a.loadTickets,reloadTickets:a.loadTickets,from:s.from,selectedFormData:a.selectedTickets},null,8,["onClose","showModal","ticketIds","reloadDetails","reloadTickets","from","selectedFormData"])):u("",!0)]),_:1})])}const _h=U(ch,[["render",fh],["__scopeId","data-v-c929fb37"]]);const bh={props:{from:{type:Object,default:()=>{}},tableHeader:{type:String,default:""},strLen:{type:Number,default:25}},computed:{fullName(){return Te(this.from)?`${this.from.first_name} ${this.from.last_name}`:""},getUserName(){return Te(this.from)&&(this.from.first_name==""||this.from.first_name==null)&&this.from.user_name?this.from.user_name:""},isUnassigned(){return this.fullName===""&&this.getUserName===""},hoverContent(){return Te(this.from)?`
            <div class='card card-light card-widget mb-0'>

              <div class='card-header pad-7'>

              <div class="user-panel d-flex">
                
                <div>

                  <img src=${this.from.profile_pic} class="img-circle" alt="User Image">
                </div>
                
                <div class="info">
                  
                  <a class="d-block">
                    ${this.from.first_name!==""?this.subString(this.from.first_name+" "+this.from.last_name):this.subString(this.from.user_name)}
                  </a>
                </div>
              </div>
              </div>

              <div class='card-body info-body'>

                <ul class='nav nav-stacked'>

                  <li id='b_bottom'>
                    <a id='cus-link' title=${this.from.email} >

                      <i class='fas fa-envelope'></i>&nbsp;
                        ${this.from.email?this.subString(this.from.email):"---"}
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          `:""}},methods:{subString(e,t=25){return ge(e,e.includes("@")?t=50:t)},showUser(e){return Te(e)?"/user/"+e.id:""}}},vh={class:"inbox-info"},yh={class:"emphasize"},kh={class:"card card-light card-widget"},wh={class:"card-header pad-7"},Ch={class:"user-panel d-flex"},Sh={class:"hover-img"},Dh=["src"],Th={key:1,src:"https://www.kindpng.com/picc/m/24-248253_user-profile-default-image-png-clipart-png-download.png",class:"img-circle img-rounder",alt:"Image"},Mh={class:"info"},Oh={class:"d-block font-weight-bold font-size-14"},Ih={class:"card-body info-body"},Ah={class:"nav nav-stacked"},Lh={id:"b_bottom"},Eh=["title"],xh={class:"pr_1"},Ph=["title"],Rh={key:0,style:{color:"red"}};function Fh(e,t,a,r,s,i){const d=g("router-link"),m=g("popover");return o(),l("span",vh,[_(m,{hover:"",arrow:"",placement:"top"},la({default:T(()=>[_(d,{class:"user_name pop",to:i.showUser(a.from),"data-container":"body","data-toggle":"popover","data-placement":"right","data-content":i.hoverContent,target:"_blank"},{default:T(()=>[n("span",yh,[k(c(i.subString(i.fullName,a.strLen))+" ",1),n("span",null,c(i.subString(i.getUserName,a.strLen)),1)])]),_:1},8,["to","data-content"])]),_:2},[a.from?{name:"content",fn:T(()=>[n("div",kh,[n("div",wh,[n("div",Ch,[n("div",Sh,[a.from.profile_pic?(o(),l("img",{key:0,src:a.from.profile_pic,class:"img-circle imgupdate img-rounder",alt:"User Image"},null,8,Dh)):(o(),l("img",Th))]),n("div",Mh,[n("a",Oh,c(a.from.first_name!=""?i.subString(a.from.first_name+" "+a.from.last_name):i.subString(a.from.user_name)),1)])])]),n("div",Ih,[n("ul",Ah,[n("li",Lh,[n("a",{id:"cus-link",title:a.from.email},[t[0]||(t[0]=n("i",{class:"fas fa-envelope"},null,-1)),t[1]||(t[1]=k("  ")),n("span",xh,c(a.from.email?i.subString(a.from.email):"---"),1)],8,Eh),t[3]||(t[3]=n("br",null,null,-1)),this.from.mobile||this.from.phone_number?(o(),l("a",{key:0,id:"cus-link mt-1",title:a.from.mobile},[t[2]||(t[2]=n("i",{class:"fas fa-phone me-1"},null,-1)),k(" "+c(a.from.mobile?"+"+a.from.country_code+" "+i.subString(a.from.mobile):"---"),1)],8,Ph)):u("",!0)])])])])]),key:"0"}:void 0]),1024),i.isUnassigned?(o(),l("span",Rh,c(e.lang("unassigned")),1)):u("",!0)])}const ya=U(bh,[["render",Fh],["__scopeId","data-v-5ad939bf"]]);const Nh={name:"ticket-popover",components:{"svg-icon-handler":rs},setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime)}},props:{details:{type:Object,default:()=>{}},tableHeader:{type:String,default:""},onTicketClick:{type:Function}},data(){return{bgStyle:{background:this.tableHeader},hasData:!1,popUpData:"",delay:300,clicks:0,timer:null}},methods:{subString(e,t=10){return ge(e,t)},getPopData(e){this.hasData=!1,R.get("/ticket/tooltip?"+Qe({ticketid:e})).then(t=>{this.hasData=!0,this.popUpData=t.data}).catch(t=>{this.hasData=!1})},onClick(e,t){!t.target.className.includes("tic-pop")&&!t.target.className.includes("tic-pop-i")&&(this.$store.dispatch("setTicketId",e),this.clicks++,this.clicks===1?this.timer=setTimeout(()=>{this.clicks=0,this.onTicketClick(e)},this.delay):this.redirectMethod(e))},redirectMethod(e,t){this.clicks=0,clearTimeout(this.timer),t=="_blank"?window.open(this.basePath()+"/panel/thread/"+e+"?"+Qe(),"_blank"):this.$router.push({path:"/thread/"+e,query:this.$route.query})},openContextMenu(e){let t=this.$refs.right_click_menu;t.href=this.basePath()+"/panel/thread/"+this.details.id},scrollClick(e){e.button===1&&this.openContextMenu()},loadLabel(e){return He(e)},removeTitle(e){return e.replace("Elea Review: ","")},loadColor(e){return{"Elea Review: Immediate Action Required":"#a70000","Elea Review: Action Recommended":"#ff8c00","Elea Review: Monitor":"#008000"}[e]||null},loadSVGIcon(e){return{"Elea Review: Immediate Action Required":"elea_immediate_action","Elea Review: Action Recommended":"elea_action_recommended","Elea Review: Monitor":"elea_monitor"}[e]||null},renderDynamicTooltip(e){return e.includes("Elea Review")?this.removeTitle(e):this.loadLabel(e)},processLabel(e){let t=[...e.matchAll(/:\w+:/g)],a=e.replace(/:\w+:/g,""),r=this.subString(a);if(!r||!r.trim())return this.loadLabel(e);let s=r;return t.forEach(i=>{let d=i.index;d<r.length?s=s.slice(0,d)+i[0]+s.slice(d):s+=i[0]}),this.loadLabel(s)}},computed:{dirCode(){return this.appLanguage==="ar"?"‏":"‎"}}},Vh={class:"inbox-pop"},jh=["data-pjax"],Uh={key:0,class:"row",id:"load_margin"},Bh={key:1,class:"card card-light card-widget m_5"},zh={class:"card-header pad-10"},Hh={class:"user-block"},Wh={class:"username text-capitalize mb-6"},qh={href:"javascript:;"},Kh={class:"description fw-400"},Yh={class:"card-body pb-0 pad-10"},Gh=["innerHTML"],Qh={key:0,class:"me-1"},Xh={class:"glyphicon glyphicon-paperclip cursor-pointer"},Jh={key:1,class:"me-1"},Zh=["innerHTML"];function $h(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("faveo-image-element"),p=g("popover"),f=g("svg-icon-handler"),b=Q("tooltip");return o(),l("div",Vh,[M((o(),l("a",{href:"javascript:;",ref:"right_click_menu",onContextmenu:t[0]||(t[0]=y=>i.openContextMenu(y)),class:N({"fw-400":a.details.isanswered}),onMousedown:t[1]||(t[1]=y=>i.scrollClick(y))},[n("span",{class:"ticket-no","data-pjax":a.details.id},"[#"+c(a.details.ticket_number)+"] "+c(i.dirCode),9,jh),k(" "+c(i.subString(a.details.title,50))+" "+c(i.dirCode)+"("+c(i.dirCode)+c(a.details.thread_count)+") ",1)],34)),[[b,a.details.title]]),_(p,{click:"",arrow:"",placement:"right"},{content:T(()=>[s.hasData?u("",!0):(o(),l("div",Uh,[_(d,{"animation-duration":4e3,color:"#1d78ff",size:30})])),s.hasData?(o(),l("div",Bh,[n("div",zh,[n("div",Hh,[_(m,{id:"popover-img","source-url":a.details.from.profile_pic,classes:["img-circle"]},null,8,["source-url"]),n("div",null,[M((o(),l("span",Wh,[n("a",qh,c(s.popUpData.user_name?i.subString(s.popUpData.user_name,30):i.subString(s.popUpData.email,30)),1)])),[[b,s.popUpData.user_name?s.popUpData.user_name:s.popUpData.email]]),n("span",Kh,c(e.lang("created_at"))+" : "+c(r.formattedTime(s.popUpData.created_at)),1)])])]),n("div",Yh,[n("p",{innerHTML:s.popUpData.body},null,8,Gh)])])):u("",!0)]),default:T(()=>[M((o(),l("a",{class:"tic-pop me-1",href:"javascript:;",onClick:t[2]||(t[2]=y=>i.getPopData(a.details.id))},t[3]||(t[3]=[n("i",{class:"fas fa-question-circle tic-pop-i"},null,-1)]))),[[b,e.trans("click_to_see_details")]])]),_:1}),a.details.attachment_count!==0?(o(),l("span",Qh,[M(n("i",Xh,null,512),[[b,e.trans("attachment")]])])):u("",!0),a.details.collaborator_count!==0&&a.details.collaborator_count!==null?(o(),l("span",Jh,t[4]||(t[4]=[n("i",{class:"fas fa-users"},null,-1)]))):u("",!0),(o(!0),l(E,null,q(a.details.labels,(y,D)=>(o(),l(E,null,[y&&y.value.includes("Elea Review")?M((o(),l("a",{key:0,href:"javascript:;",class:N(["badge me-1",{"tags-padding":!y.value.includes("Elea Review")}]),style:ne({borderColor:y.color,color:y.color,border:"solid 1px"})},[n("span",null,[_(f,{"hover-color":i.loadColor(y.value),color:i.loadColor(y.value),height:"15",width:"15","icon-from":"elea_c_icon"},null,8,["hover-color","color"]),k(" "+c(i.subString(i.removeTitle(y.value))),1)])],6)),[[b,{content:i.renderDynamicTooltip(y.value),html:!0}]]):M((o(),l("a",{key:1,href:"javascript:;",class:N(["badge me-1",{"tags-padding":!y.value.includes("Elea Review")}]),style:ne({backgroundColor:y.color,color:"#FFF"})},[n("span",{class:"p-2",innerHTML:i.processLabel(y.value)},null,8,Zh)],6)),[[b,{content:i.renderDynamicTooltip(y.value),html:!0}]])],64))),256))])}const em=U(Nh,[["render",$h],["__scopeId","data-v-df4c8d36"]]);const tm={props:{from:{type:Object,default:()=>{}}},computed:{hoverContent(){return Te(this.from)?`
            <div class='card card-light card-widget mb-0 org-toolip'>

              <div class='card-header pad-7'>

              <div class="user-panel d-flex">

                <div>

                  <img src=${this.from.logo!==null?this.from.logo:this.basePathVersion()+"/themes/default/common/images/org.png"} class="img-circle" id="org_img" alt="Org Image">
                </div>

                <div class="info">

                  <a class="d-block">
                    ${this.subString(this.from.name)}
                  </a>
                </div>
              </div>
              </div>

              <div class='card-body info-body'>

                <ul class='nav nav-stacked'>

                  <li id='b_bottom'>
                    <a id='cus-link'>

                        ${this.from.tootlip?this.from.tooltip:"---"}
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          `:""}},methods:{subString(e,t=25){return ge(e,t)}}},sm={class:"inbox-info"},am=["href","data-content"],nm={class:"card card-light card-widget mb-0 org-toolip"},im={class:"card-header pad-7"},om={class:"user-panel d-flex"},rm={class:"hover-img"},lm=["src"],dm={class:"info"},cm={class:"d-block"},um={class:"card-body info-body"},hm={class:"nav nav-stacked"},mm={id:"b_bottom"},pm={id:"cus-link"},gm=["innerHTML"];function fm(e,t,a,r,s,i){const d=g("popover");return o(),l("span",sm,[_(d,{hover:"",arrow:"",placement:"right"},la({default:T(()=>[n("a",{href:a.from.link,target:"_blank","data-container":"body","data-bs-toggle":"popover","data-placement":"right","data-content":i.hoverContent},c(a.from.name),9,am)]),_:2},[a.from?{name:"content",fn:T(()=>[n("div",nm,[n("div",im,[n("div",om,[n("div",rm,[n("img",{src:a.from.logo?a.from.logo:e.basePathVersion()+"/themes/default/common/images/org.png",class:"img-fluid img-circle",id:"org_img",alt:"Org Image"},null,8,lm)]),n("div",dm,[n("a",cm,c(this.subString(a.from.name)),1)])])]),n("div",um,[n("ul",hm,[n("li",mm,[n("a",pm,[t[0]||(t[0]=n("i",{class:"fas fa-map-marker-alt"},null,-1)),t[1]||(t[1]=k("  ")),n("span",{innerHTML:a.from.tooltip?a.from.tooltip:"---"},null,8,gm)])])])])])]),key:"0"}:void 0]),1024)])}const _m=U(tm,[["render",fm],["__scopeId","data-v-d9e05ad0"]]);const bm={name:"ticket-details",description:"Ticket details component",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),timeDiffForPast:ee(()=>e.getters.timeDiffForPast),timeDiffForFuture:ee(()=>e.getters.timeDiffForFuture),getStoredTicketId:ee(()=>e.getters.getStoredTicketId)}},props:{color:{type:String,default:""},ticket:{type:Object,default:()=>{}},appendSelect:{type:Function},onSelect:{type:Function},timelineId:{type:[String,Number],default:""}},data(){return{countdownForDuedate:"",countUpForCreated:"",countUpForUpdated:"",countUpForOverdue:"",checked:!1}},watch:{checked:function(e){this.appendSelect(this.ticket.id,e)}},beforeMount(){window.emitter.on("selectTicket",this.selectAllTicket),window.emitter.on("unCheckTicket",this.unCheck)},mounted(){this.timerActions()},methods:{subString(e,t=15){return ge(e,t)},canViewProfile(e){return e.profileAccessPermission},canViewAssignedProfile(e){return e.assignedprofileAccessPermission},onRowClick(e,t){this.$refs.ticketPopover.onClick(e,t)},redirectToTab(e){this.$refs.ticketPopover.redirectMethod(e,"_blank")},timerActions(){this.ticket.is_overdue?this.updateCountUp("duedate"):this.updateCountDownForDueDate(),this.updateCountUp("created_at"),this.updateCountUp("updated_at")},ticketClicked(e){this.onSelect(e)},selectAllTicket(e){this.checked=e},unCheck(){this.checked=!1},updateCountDownForDueDate(){this.countdownForDuedate=this.timeDiffForFuture(this.ticket.duedate),this.countdownForDuedate===0?(this.ticket.is_overdue=!0,this.ticket.due_today=!1,this.updateCountUp("duedate")):setTimeout(()=>{this.updateCountDownForDueDate(this.ticket.duedate)},1e3)},updateCountUp(e){switch(e){case"duedate":this.countUpForOverdue=this.timeDiffForPast(this.ticket[e]);break;case"created_at":this.countUpForCreated=this.timeDiffForPast(this.ticket[e]);break;case"updated_at":this.countUpForUpdated=this.timeDiffForPast(this.ticket[e]);break;default:return}var t=this;setTimeout(function(){t.updateCountUp(e)},1e4)}},components:{"org-info":_m,"user-info":ya,"ticket-popover":em}},vm={id:"ticket_user"},ym={class:"user-image"},km=["id"],wm=["for"],Cm={class:"name td-ticket-details"},Sm={class:"ticket_subject"},Dm={class:"info-data"},Tm={class:"information ellipsis"},Mm={style:{color:"#3c8dbc"}},Om={style:{color:"#3c8dbc"}},Im={style:{color:"#3c8dbc"}},Am={style:{color:"red"}},Lm={class:"departm"},Em={style:{color:"#3c8dbc"}},xm={class:"ticket-list-custom-box pb-1"},Pm={class:"org-extra-field d-block"},Rm={key:0},Fm={key:0},Nm={key:0},Vm={key:1},jm={key:0},Um=["innerHTML"],Bm={class:"td-ticket-status hideForList"},zm={class:"source source-icon hideForList"},Hm={class:"status-source source-detailed-phone"},Wm={class:"source-icon hideForList"},qm={class:"status-source source-detailed-phone"},Km={class:"assign hideForList"},Ym={style:{padding:"0px",margin:"0px","list-style":"none","font-size":"medium"}},Gm={class:"emphasize"},Qm={class:"emphasize"},Xm={key:0},Jm={class:"emphasize"},Zm={key:1},$m={class:"emphasize"};function ep(e,t,a,r,s,i){var y;const d=g("faveo-image-element"),m=g("ticket-popover"),p=g("user-info"),f=g("org-info"),b=Q("tooltip");return o(),l("tr",{class:N({unanswered:a.ticket.isanswered==0,active_ticket:r.getStoredTicketId==a.ticket.id&&a.timelineId})},[M(n("td",{class:"priority-border",style:ne({background:a.ticket.priority.priority_color+" !important"})},null,4),[[b,e.lang("priority_is")+a.ticket.priority.name]]),n("td",vm,[n("div",ym,[_(d,{id:"user_img_"+a.ticket.id,"source-url":a.ticket.from.profile_pic,"alternative-text":"User","img-width":40,"img-height":40},null,8,["id","source-url"]),M(n("input",{id:a.ticket.id,type:"checkbox",name:"check-row",class:"checkbox","onUpdate:modelValue":t[0]||(t[0]=D=>s.checked=D)},null,8,km),[[_t,s.checked]]),n("label",{for:a.ticket.id,class:"cursor-pointer"},null,8,wm)])]),n("td",Cm,[n("div",Sm,[n("h3",{class:"ticket-description-tip overdue_ticket break-word",onClick:[t[1]||(t[1]=D=>i.onRowClick(a.ticket.id,D)),t[2]||(t[2]=Ee(D=>i.redirectToTab(a.ticket.id),["ctrl"]))]},[_(m,{details:a.ticket,tableHeader:a.color,onTicketClick:i.ticketClicked,ref:"ticketPopover"},null,8,["details","tableHeader","onTicketClick"])]),n("div",Dm,[n("div",Tm,[i.canViewProfile(a.ticket)?(o(),l(E,{key:0},[n("span",null,c(e.lang("from"))+": ",1),_(p,{from:a.ticket.from,tableHeader:a.color},null,8,["from","tableHeader"]),t[3]||(t[3]=k("  "))],64)):(o(),l(E,{key:1},[n("span",null,c(e.lang("from"))+": ",1),M((o(),l("a",Mm,[k(c(i.subString(a.ticket.from.full_name)),1)])),[[b,e.trans("access_denied_now")]]),t[4]||(t[4]=k("  "))],64)),i.canViewAssignedProfile(a.ticket)&&a.ticket.assigned?(o(),l(E,{key:2},[n("span",null,c(e.lang("assigned_to"))+": ",1),_(p,{from:a.ticket.assigned,tableHeader:a.color},null,8,["from","tableHeader"]),t[5]||(t[5]=k("  "))],64)):a.ticket.assigned?(o(),l(E,{key:3},[n("span",null,c(e.lang("assigned_to"))+": ",1),M((o(),l("a",Om,[k(c(i.subString(a.ticket.assigned.full_name)),1)])),[[b,e.trans("access_denied_now")]]),t[6]||(t[6]=k("  "))],64)):u("",!0),Array.isArray(a.ticket.assigned_team)?u("",!0):(o(),l(E,{key:4},[n("span",null,c(e.lang("assigned_team"))+": ",1),n("a",Im,c(a.ticket.assigned_team.name),1),t[7]||(t[7]=k("  "))],64)),!a.ticket.assigned&&Array.isArray(a.ticket.assigned_team)?(o(),l(E,{key:5},[n("span",null,c(e.lang("assigned_to"))+": ",1),n("span",Am,c(e.lang("unassigned")),1),t[8]||(t[8]=k("  "))],64)):u("",!0),n("span",Lm,c(e.lang("department"))+": ",1),n("span",Em,c((y=a.ticket.department)==null?void 0:y.name),1),t[9]||(t[9]=k("  ")),n("div",xm,[(o(!0),l(E,null,q(a.ticket.extra_fields,D=>(o(),l("span",Pm,[D.label===e.lang("organisation")&&Array.isArray(D.value)?(o(),l("span",Rm,[D.value&&D.value.length>0?(o(),l("span",Fm,[k(c(D.label)+": ",1),(o(!0),l(E,null,q(D.value,(w,S)=>(o(),l(E,null,[_(f,{from:w},null,8,["from"]),S<D.value.length-1?(o(),l("span",Nm,", ")):u("",!0)],64))),256))])):u("",!0)])):(o(),l("span",Vm,[D.value?(o(),l("span",jm,c(D.label)+": ",1)):u("",!0),D.value?(o(),l("span",{key:1,class:"extra-field",innerHTML:D.value},null,8,Um)):u("",!0)]))]))),256))])])])])]),n("td",Bm,[M(n("span",{class:"badge text-bg-danger text-xs"},c(e.lang("overdue")),513),[[ze,a.ticket.is_overdue]]),M(n("span",{class:"badge text-bg-warning text-xs"},c(e.lang("due_today")),513),[[ze,a.ticket.due_today]])]),n("td",zm,[M((o(),l("div",Hm,[n("i",{class:N(a.ticket.source.css_class),id:"ticket-source-icon"},null,2)])),[[b,e.lang("ticket_is_generated_via")+e.lang(a.ticket.source.name)]])]),n("td",Wm,[M((o(),l("div",qm,[n("i",{class:N(a.ticket.status.icon),id:"ticket-source-icon",style:ne({color:a.ticket.status.icon_color})},null,6)])),[[b,e.lang("ticket_is")+a.ticket.status.name]])]),n("td",Km,[n("ul",Ym,[n("li",null,[k(c(e.lang("created"))+": ",1),n("span",Gm,c(s.countUpForCreated),1)]),n("li",null,[k(c(e.lang("updated"))+": ",1),n("span",Qm,c(s.countUpForUpdated),1)]),a.ticket.is_overdue?(o(),l("li",Xm,[k(c(e.lang("overdue"))+": ",1),n("span",Jm,c(s.countUpForOverdue),1)])):u("",!0),a.ticket.is_overdue?u("",!0):(o(),l("li",Zm,[k(c(e.lang("due_in"))+" ",1),n("span",$m,c(s.countdownForDuedate?s.countdownForDuedate:"---"),1)]))])])],2)}const tp=U(bm,[["render",ep],["__scopeId","data-v-bd75f11a"]]);const sp={props:{selected:{type:Array,default:()=>[]},tickets:{type:Array,default:()=>[]}},computed:{selectAll:{get(){return this.tickets.length&&this.tickets?this.selected.length==this.tickets.length:!1},set(e){e?window.emitter.emit("selectTicket",e):window.emitter.emit("selectTicket",!1)}}}},ap={class:"select-all"};function np(e,t,a,r,s,i){return o(),l("div",ap,[M(n("input",{type:"checkbox",id:"all","onUpdate:modelValue":t[0]||(t[0]=d=>i.selectAll=d),class:"cursor_pointer"},null,512),[[_t,i.selectAll]]),t[1]||(t[1]=n("label",{for:"all",class:"maxi-lab"},null,-1))])}const ip=U(sp,[["render",np],["__scopeId","data-v-4e6e2410"]]),op={props:{tableHeader:{type:String,default:""},sortPreferences:{type:Object,default:()=>{}}},data(){return{buttonStyle:{"background-color":this.tableHeader+" !important",color:"#fff","margin-top":"2px"},sortingMenu:[{name:"ticket_number",value:"ticket_number",order:"asc",class:"fas fa-sort-amount-down",order_name:"ascending"},{name:"updated_date",value:"updated_at",order:"asc",class:"fas fa-sort-amount-down",order_name:"ascending"},{name:"created_date",value:"created_at",order:"asc",class:"fas fa-sort-amount-down",order_name:"ascending"},{name:"answered",value:"isanswered",order:"desc",class:"fas fa-check"},{name:"un_answered",value:"isanswered",order:"asc",class:"fas fa-times"}]}},mounted(){this.sortPref()},watch:{sortPreferences(){this.sortPref()}},methods:{filter(e){this.$emit("filter",e),$(".sortval").html(this.trans(e.name)+" "+this.trans("tickets")+'&nbsp<span class="caret"></span>')},sort(e,t){e.value=="isanswered"?(this.$emit("sort",e),$(".sortval").html(this.trans(e.name)+" "+this.trans("tickets")+'&nbsp<span class="caret"></span>')):e.order=="asc"?(this.$emit("sort",e),$(".sortval").html(this.trans(e.name)+" "+this.trans(e.order_name)+'&nbsp<span class="caret"></span>'),this.sortingMenu[t].order="desc",this.sortingMenu[t].class="fas fa-sort-amount-up",this.sortingMenu[t].order_name=this.trans("descending")):(this.$emit("sort",e),$(".sortval").html(this.trans(e.name)+" "+this.trans(e.order_name)+'&nbsp<span class="caret"></span>'),this.sortingMenu[t].order="asc",this.sortingMenu[t].class="fas fa-sort-amount-down",this.sortingMenu[t].order_name=this.trans("ascending"))},sortPref(){const e=this.sortPreferences;e.sort_field==="isanswered"?e.sort_order==="asc"?$(".sortval").html(this.trans("un_answered")+" "+this.trans("tickets")+'&nbsp<span class="caret"></span>'):$(".sortval").html(this.trans("answered")+" "+this.trans("tickets")+'&nbsp<span class="caret"></span>'):e.sort_order==="asc"?this.sortingMenu.forEach(t=>{t.value===e.sort_field&&($(".sortval").html(this.trans(t.name)+" "+this.trans("ascending")+'&nbsp<span class="caret"></span>'),t.order="desc",t.class="fas fa-sort-amount-up",t.order_name=this.trans("descending"))}):this.sortingMenu.forEach(t=>{t.value===e.sort_field&&($(".sortval").html(this.trans(t.name)+" "+this.trans("descending")+'&nbsp<span class="caret"></span>'),t.order="asc",t.class="fas fa-sort-amount-down",t.order_name=this.trans("ascending"))})}}},rp={class:"btn-group",id:"ticket-sort"},lp={class:"dropdown-menu dropdown-menu-left",style:{}},dp=["onClick"];function cp(e,t,a,r,s,i){return o(),l("div",rp,[t[0]||(t[0]=n("button",{type:"button",class:"btn btn-md btn-light dropdown-toggle sortval","data-bs-toggle":"dropdown"},[n("i",{class:"fas fa-sort"}),k("  ")],-1)),n("div",lp,[(o(!0),l(E,null,q(s.sortingMenu,(d,m)=>(o(),l("a",{class:"dropdown-item",onClick:p=>i.sort(d,m),href:"javascript:;"},[n("i",{class:N(d.class)},null,2),k(" "+c(e.trans(d.name))+" "+c(e.trans(d.order_name)),1)],8,dp))),256))])])}const up=U(op,[["render",cp]]);const hp={name:"ticket-label",description:"Ticket label component",props:{ticketObj:{type:Object,default:()=>{}},reloadDetails:{type:Function},archive:{type:Boolean,default:!0}},data(){return{labels:"",loading:!0,checked:!1,selectedLabels:[],show_loader:!1,search:""}},beforeMount(){this.getSelectedLabels()},methods:{getSelectedLabels(){this.ticketObj.labels&&this.ticketObj.labels.forEach(e=>{this.selectedLabels.push(e.name)})},subString(e){return ge(e,30)},onCreate(){this.redirect("/labels/create")},onCancel(){var e=document.getElementById("label-dropdown");e.classList.remove("show"),this.loading=!1},onClick(e){if(this.selectedLabels.includes(e)){for(var t in this.selectedLabels)if(this.selectedLabels[t]===e){this.selectedLabels.splice(t,1);break}}else this.selectedLabels.push(e)},getLabels(e){R.get("/api/dependency/labels?limit=all&meta=true&limit-by-status=false&search-query="+e).then(t=>{this.loading=!1,this.labels=t.data.data.labels}).catch(t=>{this.loading=!1})},onSubmit(){this.loading=!0;const e={};e.ticket_id=this.ticketObj.id,e.labels=this.selectedLabels,R.post("/labels-ticket",e).then(t=>{this.onCancel(),this.reloadDetails("label"),this.loading=!1,X(t,"timeline")}).catch(t=>{this.onCancel(),this.loading=!1,B(t,"timeline")})},loadLabel(e){return He(e)}}},mp={id:"labels-div",class:"btn-group"},pp={key:0},gp=["placeholder"],fp=["onClick"],_p={id:"label_title"},bp=["innerHTML"],vp={key:0},yp={class:"text-center"},kp={class:"label_button"},wp=["disabled"];function Cp(e,t,a,r,s,i){const d=g("loader"),m=Q("tooltip");return o(),l("div",mp,[n("button",{type:"button",class:"btn btn-xs btn-light dropdown-toggle","data-bs-toggle":"dropdown",id:"labels-button",onClick:t[0]||(t[0]=p=>i.getLabels(s.search))},[t[6]||(t[6]=n("i",{class:"fab fa-lastfm"},null,-1)),k(" "+c(e.lang("labels"))+" ",1),t[7]||(t[7]=n("span",{class:"caret"},null,-1))]),n("ul",{id:"label-dropdown",class:"dropdown-menu label_menu",onClick:t[5]||(t[5]=p=>p.stopPropagation())},[s.loading?(o(),l("li",pp,[_(d,{size:30,duration:4e3,color:"#1d78ff"})])):u("",!0),s.loading?u("",!0):(o(),l(E,{key:1},[n("li",null,[M(n("input",{type:"search",class:"form-control",name:"label",placeholder:e.lang("search"),"onUpdate:modelValue":t[1]||(t[1]=p=>s.search=p),onInput:t[2]||(t[2]=p=>i.getLabels(s.search))},null,40,gp),[[Fe,s.search]])]),(o(!0),l(E,null,q(s.labels,p=>(o(),l(E,null,[p.status||s.selectedLabels.includes(p.name)?(o(),l("li",{key:0,class:N(["labels",{active:s.selectedLabels.includes(p.name)}]),onClick:f=>i.onClick(p.name)},[n("div",{class:"color mr-2",id:"label_color",style:ne({backgroundColor:p.color})},null,4),M((o(),l("label",_p,[n("span",{innerHTML:i.subString(i.loadLabel(p.name))},null,8,bp)])),[[m,{content:i.loadLabel(p.name),html:!0}]]),s.selectedLabels.includes(p.name)?(o(),l("i",{key:0,class:N(["fas fa-times",{cancel_ar:e.isRtlLayout,cancel:!e.isRtlLayout}])},null,2)):u("",!0)],10,fp)):u("",!0)],64))),256)),s.labels.length===0?(o(),l("li",vp,[n("p",yp,c(e.lang("no_results_found")),1)])):u("",!0),n("li",kp,[n("button",{class:N(["btn btn-xs btn-light",{right:e.isRtlLayout,left:!e.isRtlLayout}]),onClick:t[3]||(t[3]=p=>i.onCancel())},[t[8]||(t[8]=n("i",{class:"fas fa-times"},null,-1)),k(" "+c(e.lang("cancel")),1)],2),n("button",{class:N(["btn btn-xs btn-light left",{left:e.isRtlLayout,right:!e.isRtlLayout}]),onClick:t[4]||(t[4]=p=>i.onSubmit()),disabled:a.ticketObj.labels.length===0&&s.selectedLabels.length===0},[t[9]||(t[9]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.lang("apply")),1)],10,wp)])],64))])])}const Sp=U(hp,[["render",Cp],["__scopeId","data-v-78116704"]]);const Dp={name:"ticket-label",description:"Ticket label component",props:{ticketObj:{type:Object,default:()=>{}},reloadDetails:{type:Function},archive:{type:Boolean,default:!0}},data(){return{tags:[],loading:!1,checked:!1,selectedTags:[],show_loader:!1,search:"",labelStyle:{display:"none"}}},beforeMount(){this.getSelectedTags()},methods:{onChange(e,t){this[t]=e},getSelectedTags(){this.ticketObj.tags&&this.ticketObj.tags.forEach(e=>{this.selectedTags.push(e.name)})},subString(e){return ge(e,30)},onCancel(){var e=document.getElementById("dropdown-tag");e.classList.remove("show"),this.loading=!1},onClick(e){if(this.selectedTags.includes(e)){for(var t in this.selectedTags)if(this.selectedTags[t]===e){this.selectedTags.splice(t,1);break}}else this.selectedTags.push(e)},onSubmit(){this.tags.length>0&&this.tags.forEach(t=>{this.selectedTags.includes(t.name)||this.selectedTags.push(t.name)}),this.loading=!0;const e={};e.ticket_id=this.ticketObj.id,e.tags=this.selectedTags,R.post("/add-tag",e).then(t=>{this.loading=!1,this.tags=[],this.onCancel(),this.reloadDetails("tag"),X(t,"timeline")}).catch(t=>{this.loading=!1,B(t,"timeline"),this.selectedTags=this.selectedTags.filter(a=>a.length<21)})},loadLabel(e){return He(e)}},components:{"dynamic-select":_e}},Tp={id:"tags-div",class:"btn-group"},Mp={type:"button",class:"btn btn-xs btn-light dropdown-toggle","data-bs-toggle":"dropdown",id:"tags-button"},Op={key:0,class:"px-2"},Ip={class:"tags_menu",id:"tags-dropdown"},Ap={key:0,class:"mt-3 mb-2"},Lp=["onClick"],Ep={id:"tag_title"},xp={class:"tag_button"},Pp=["disabled"];function Rp(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("loader"),p=Q("tooltip");return o(),l("div",Tp,[n("button",Mp,[t[3]||(t[3]=n("i",{class:"fas fa-tag"},null,-1)),k(" "+c(e.lang("tags"))+" ",1),t[4]||(t[4]=n("span",{class:"caret"},null,-1))]),n("ul",{class:"dropdown-menu",onClick:t[2]||(t[2]=f=>f.stopPropagation()),id:"dropdown-tag"},[s.loading?u("",!0):(o(),l("li",Op,[_(d,{label:e.lang("tags"),multiple:!0,name:"tags",classname:"col-sm-12",apiEndpoint:"/api/dependency/tags",value:s.tags,onChange:i.onChange,labelStyle:s.labelStyle,taggable:!0,callingFrom:"ticket-tags"},null,8,["label","value","onChange","labelStyle"])])),n("div",Ip,[s.loading?(o(),l("li",Ap,[_(m,{size:30,duration:4e3,color:"#1d78ff"})])):u("",!0),s.loading?u("",!0):(o(),l(E,{key:1},[(o(!0),l(E,null,q(s.selectedTags,f=>(o(),l("li",{class:"tags active",onClick:b=>i.onClick(f)},[n("i",{class:N(["fas fa-tag",{cancel:e.isRtlLayout,cancel_ar:!e.isRtlLayout}])},null,2),M((o(),l("label",Ep,[k(c(i.loadLabel(i.subString(f))),1)])),[[p,{content:i.loadLabel(e.trans(f)),html:!0}]]),n("i",{class:N(["fas fa-times",{cancel_ar:e.isRtlLayout,cancel:!e.isRtlLayout}])},null,2)],8,Lp))),256)),n("li",xp,[n("button",{class:N(["btn btn-xs btn-light",{right:e.isRtlLayout,left:!e.isRtlLayout}]),onClick:t[0]||(t[0]=f=>i.onCancel())},[t[5]||(t[5]=n("i",{class:"fas fa-times"},null,-1)),k(" "+c(e.lang("cancel")),1)],2),n("button",{class:N(["btn btn-xs btn-primary left",{left:e.isRtlLayout,right:!e.isRtlLayout}]),onClick:t[1]||(t[1]=f=>i.onSubmit()),disabled:a.ticketObj.tags.length===0&&s.tags.length===0},[t[6]||(t[6]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.lang("apply")),1)],10,Pp)])],64))])])])}const Fp=U(Dp,[["render",Rp],["__scopeId","data-v-d5d2c75d"]]),Np={name:"change-requester-modal",description:"Change requester modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},ticketId:{type:[String,Number],default:""},reloadDetails:{type:Function}},data(){return{isDisabled:!1,loading:!1,user:"",divStyle:{width:"500px"}}},beforeMount(){this.isDisabled=!this.user},methods:{onChange(e,t){this[t]=e,this.isDisabled=!e},onSubmit(){this.loading=!0,this.isDisabled=!0;const e={};e.owner_id=this.user.id,R.post("/api/change-owner/"+this.ticketId,e).then(t=>{this.reloadDetails("requester"),X(t,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(t=>{B(t,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()})}},components:{"dynamic-select":_e}},Vp={class:"modal-title"},jp={key:0,class:"row"},Up={key:1,class:"row"},Bp=["disabled"];function zp(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("reuse-loader"),p=g("modal");return a.showModal?(o(),I(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.divStyle},{title:T(()=>[n("h4",Vp,c(e.lang("change_requester")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",jp,[_(d,{label:e.lang("users"),multiple:!1,name:"user",required:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/users?meta=true&package_filter=true",value:s.user,onChange:i.onChange,clearable:!!s.user,strlength:"60"},null,8,["label","value","onChange","clearable"])])),s.loading?(o(),l("div",Up,[_(m,{duration:4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...f)=>i.onSubmit&&i.onSubmit(...f)),class:"btn btn-primary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(e.lang("update")),1)],8,Bp)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const Hp=U(Np,[["render",zp]]);const Wp={name:"fork-ticket-modal",description:"Fork Ticket modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},ticketId:{type:[String,Number],default:""},componentTitle:{type:String,default:""},reloadDetails:{type:Function},selectedFormData:{type:Object,default:()=>{}}},data:()=>({formUniqueKey:null,submitFormInProgress:!1,scenario:"fork",panel:"agent",category:"ticket",keepTicketStatusOpenAfterFork:1,Parent:1,radioOptions:[{name:"yes",value:1},{name:"no",value:0}]}),mixins:[as],created(){window.emitter.on("updateTicketCategory",this.updateTicketCategory)},methods:{updateTicketCategory(){window.emitter.emit("storeCategoryId",this.selectedFormData.id)},popUpSubmit(){document.getElementById("fork-ticket-submit").click()},formSubmit(e,t){this.$store.dispatch("setRecaptchaKey",t),this.onSubmit({keep_status_of_parent_ticket_as_open_after_forking:this.keepTicketStatusOpenAfterFork,parent_ticket_thread_copy:this.Parent})},onChange(e,t){this[t]=e},afterSubmit(e){window.emitter.emit("reset-captcha"),setTimeout(()=>{let t=e.data.data.id;this.$router.push("/thread/"+t),window.emitter.emit("refreshTableAndData",!0),this.reloadDetails("fork"),this.onClose()},1e3)}},beforeDestroy(){this.$store.dispatch("unsetAlert")},components:{FormWithCaptcha:ns,RadioButton:Pe,CustomLoader:oa,Loader:os,Alert:ia,FormRenderer:ra,Modal:Ot}},qp={class:"modal-title"},Kp={id:"ticket_fork_body"},Yp={key:0,class:"row ms-0 p-2"},Gp=["disabled"];function Qp(e,t,a,r,s,i){const d=g("CustomLoader"),m=g("Loader"),p=g("Alert"),f=g("FormRenderer"),b=g("ValidationObserver"),y=g("FormWithCaptcha"),D=g("RadioButton"),w=g("Modal");return o(),l("div",null,[e.submitFormInProgress?(o(),I(d,{key:0})):u("",!0),a.showModal?(o(),I(w,{key:1,showModal:a.showModal,onClose:a.onClose,containerStyle:{width:"1200px",maxWidth:"1200px !important"}},{title:T(()=>[n("h4",qp,c(e.lang("fork_ticket")),1)]),fields:T(()=>[e.showLoader?(o(),I(m,{key:0})):u("",!0),n("div",Kp,[_(p,{componentName:"faveo-form"}),_(y,{loading:!e.showLoader,btnClass:"btn btn-primary pull-right",btnName:"submit",componentName:"faveo-form",btn_id:"fork-ticket-submit",formSubmit:i.formSubmit,page:"ticket_fork_agent",recaptchaContainerClass:"mt-2",disableSubmit:e.submitFormInProgress},{fields:T(()=>[_(b,{ref:"faveoFormObserver"},{default:T(({values:S,errors:L,validate:x})=>[_(f,{category:"ticket",fetchFormFieldApi:"api/agent/edit-mode-ticket-details/"+this.ticketId,scenario:e.scenario,panel:e.panel,isInlineForm:!1,formUniqueKey:e.formUniqueKey,selectDependencyId:a.ticketId,selectDependencyKey:"id"},null,8,["fetchFormFieldApi","scenario","panel","formUniqueKey","selectDependencyId"])]),_:1},512)]),_:1},8,["loading","formSubmit","disableSubmit"]),e.showLoader?u("",!0):(o(),l("div",Yp,[_(D,{options:e.radioOptions,label:e.trans("ticket_fork_keep_status_of_parent_ticket_as_open_after_forking"),name:"keepTicketStatusOpenAfterFork",value:e.keepTicketStatusOpenAfterFork,onChange:i.onChange,classname:"col-sm-6"},null,8,["options","label","value","onChange"]),t[1]||(t[1]=n("br",null,null,-1)),_(D,{options:e.radioOptions,label:e.trans("parent_ticket_thread"),name:"Parent",value:e.Parent,onChange:i.onChange,classname:"col-sm-6"},null,8,["options","label","value","onChange"])]))])]),controls:T(()=>[e.showLoader?u("",!0):(o(),l("button",{key:0,type:"submit",class:"btn btn-primary pull-right",onClick:t[0]||(t[0]=S=>i.popUpSubmit()),disabled:e.submitFormInProgress},[t[2]||(t[2]=n("span",null,[n("i",{class:"fas fa-code-branch"})],-1)),k("  "+c(e.trans("ticket-fork")),1)],8,Gp))]),_:1},8,["showModal","onClose"])):u("",!0)])}const Xp=U(Wp,[["render",Qp],["__scopeId","data-v-564db2e3"]]);function Jp(e){const{description:t,worktime:a,actions:r,worktime_type:s}=e;let i={description:[t,"isRequired"],worktime:[a,"isRequired","minValue(1)","maxValue(609940)"]};r.show_worktime_type&&r.require_worktime_type_field&&a&&(i.worktime_type=[s,"isRequired"]);const d=new ye(pe),{errors:m,isValid:p}=d.validate(i);return ve.dispatch("setValidationError",m),{errors:m,isValid:p}}const Zp={name:"time-field",description:"time field component along with error block",props:{label:{type:String,required:!0},hint:{type:String,default:""},value:{required:!0},name:{type:String,required:!0},type:{type:String,default:"number"},onChange:{type:Function,Required:!0},classname:{type:String,default:""},required:{type:Boolean,default:!1},labelStyle:{type:Object},formStyle:{type:Object}},data(){return{hoursValue:0,minutesValue:0}},created(){window.emitter.on("removeVal",this.initialState)},mounted(){this.value!==""&&this.value!==0?(this.hoursValue=Math.floor(this.value/60),this.minutesValue=this.value%60):(this.hoursValue=0,this.minutesValue=0)},methods:{onInput(){this.onChange(+this.hoursValue*60+ +this.minutesValue,this.name)},checkValue(e){e=e||window.event;var t=e.which?e.which:e.keyCode;if(t>31&&(t<48||t>57))e.preventDefault();else return!0},onPaste(e){e=e||window.event,e.clipboardData.getData("Text").match(/[^\d]/)&&e.preventDefault()},minutesValidation(e){e=e||window.event,e.which?e.which:e.keyCode;var t=this.minutesValue;(t<0||t>59)&&(this.minutesValue=59,this.onChange(+this.hoursValue*60+ +this.minutesValue,this.name))},initialState(){this.hoursValue=0,this.minutesValue=0}},components:{"form-field-template":da}},$p={class:"inline"},eg=["type"],tg=["type"];function sg(e,t,a,r,s,i){const d=g("form-field-template");return o(),I(d,{label:a.label,labelStyle:a.labelStyle,name:a.name,classname:a.classname,hint:a.hint,required:a.required},{default:T(()=>[n("span",$p,[M(n("input",{class:"form-control",style:ne(a.formStyle),maxlength:"4",type:a.type,id:"txtHours","onUpdate:modelValue":t[0]||(t[0]=m=>s.hoursValue=m),onInput:t[1]||(t[1]=m=>i.onInput()),placeholder:"0",onKeypress:t[2]||(t[2]=(...m)=>i.checkValue&&i.checkValue(...m)),onPaste:t[3]||(t[3]=(...m)=>i.onPaste&&i.onPaste(...m))},null,44,eg),[[Us,s.hoursValue]]),k(" "+c(e.lang("hrs"))+" ",1),M(n("input",{class:"form-control",style:ne(a.formStyle),maxlength:"4",type:a.type,id:"txtMins","onUpdate:modelValue":t[4]||(t[4]=m=>s.minutesValue=m),onInput:t[5]||(t[5]=m=>i.onInput()),placeholder:"0",onKeypress:t[6]||(t[6]=(...m)=>i.checkValue&&i.checkValue(...m)),onPaste:t[7]||(t[7]=(...m)=>i.onPaste&&i.onPaste(...m)),onKeyup:t[8]||(t[8]=(...m)=>i.minutesValidation&&i.minutesValidation(...m))},null,44,tg),[[Us,s.minutesValue]]),k(" "+c(e.lang("minute")),1)])]),_:1},8,["label","labelStyle","name","classname","hint","required"])}const ls=U(Zp,[["render",sg],["__scopeId","data-v-3c473f32"]]),ag={name:"change-requester-modal",description:"Change requester modal component",setup(){const e=ue();return{getTicketActions:ee(()=>e.getters.getTicketActions)}},props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},ticketId:{type:[String,Number],default:""},reloadDetails:{type:Function},deleteTrack:{type:Boolean,default:!1},editTrack:{type:Boolean,default:!1},trackData:{type:Object,default:()=>{}},updateData:{type:Function}},data(){return{isDisabled:!1,loading:!1,description:"",worktime:0,divStyle:{width:"700px"},formStyle:{width:"30%"},btnName:"save",iconClass:"fas fa-save",btnClass:"btn btn-primary",apiUrl:"ticket/"+this.ticketId+"/time-track",actions:"",worktime_type:""}},beforeMount(){this.getInitialValues(),this.actions=this.getTicketActions},methods:{getInitialValues(){this.editTrack&&(this.btnName="update",this.iconClass="fas fa-sync-alt",this.description=this.trackData.description,this.worktime=this.trackData.work_time,this.apiUrl="ticket/"+this.trackData.ticket_id+"/time-track/"+this.trackData.id,this.trackData.worktime_type&&(this.worktime_type={id:this.trackData.worktime_type.id,name:this.trackData.worktime_type.name})),this.deleteTrack&&(this.btnName="delete",this.iconClass="fas fa-trash",this.btnClass="btn btn-secondary")},onChange(e,t){this[t]=e},isValid(){const{errors:e,isValid:t}=Jp(this.$data);return!!t},onSubmit(){if(this.deleteTrack)this.deleteTime();else if(this.worktime_type=this.worktime_type||"",this.isValid()){this.loading=!0,this.isDisabled=!0;const e={};e.description=this.description,e.work_time=this.worktime,e.entrypoint="popup",this.worktime_type&&(e.worktime_type=this.worktime_type.id),R.post(this.apiUrl,e).then(t=>{X(t,"timeline"),this.updateData("track"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(t=>{B(t,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()})}},deleteTime(){this.loading=!0,this.isDisabled=!0,R.delete("ticket/time-track/"+this.trackData.id).then(e=>{this.loading=!1,this.isDisabled=!0,X(e,"timeline"),this.updateData("track"),this.onClose()}).catch(e=>{B(e,"timeline"),this.loading=!1,this.isDisabled=!0,this.onClose()})}},components:{"text-field":Se,"time-field":ls,"dynamic-select":_e}},ng={class:"modal-title"},ig={key:0,class:"row"},og={class:"col-sm-12"},rg={key:1},lg={class:"row"},dg={class:"row"},cg={key:2,class:"row"},ug=["disabled"];function hg(e,t,a,r,s,i){const d=g("time-field"),m=g("dynamic-select"),p=g("text-field"),f=g("reuse-loader"),b=g("modal"),y=Q("focus-first-input");return a.showModal?(o(),I(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.divStyle},{title:T(()=>[n("h4",ng,c(e.lang("time-track")),1)]),fields:T(()=>[!s.loading&&a.deleteTrack?(o(),l("div",ig,[n("div",og,[n("span",null,c(e.lang("are_you_sure_you_want_to_delete")),1)])])):u("",!0),!s.loading&&!a.deleteTrack?(o(),l("div",rg,[M((o(),l("div",lg,[_(d,{label:e.lang("worktime"),value:s.worktime,formStyle:s.formStyle,type:"number",name:"worktime",onChange:i.onChange,classname:"col-sm-6",required:!0},null,8,["label","value","formStyle","onChange"]),r.getTicketActions.show_worktime_type&&s.worktime?(o(),I(m,{key:0,label:e.trans("worktime_type"),name:"worktime_type",value:s.worktime_type,onChange:i.onChange,strlength:30,multiple:!1,classname:"col-sm-6",apiEndpoint:"api/worktime-type-list",required:r.getTicketActions.show_worktime_type&&r.getTicketActions.require_worktime_type_field&&s.worktime},null,8,["label","value","onChange","required"])):u("",!0)])),[[y]]),n("div",dg,[_(p,{label:e.lang("description"),value:s.description,type:"textarea",name:"description",onChange:i.onChange,required:!0,classname:"col-md-12"},null,8,["label","value","onChange"])])])):u("",!0),s.loading?(o(),l("div",cg,[_(f,{duration:4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...D)=>i.onSubmit&&i.onSubmit(...D)),class:N(s.btnClass),disabled:s.isDisabled},[n("i",{class:N(s.iconClass)},null,2),k(" "+c(e.lang(s.btnName)),1)],10,ug)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const ka=U(ag,[["render",hg]]);function mg(e){const{title:t,parentTicket:a,childTicket:r}=e;let s={parentTicket:[a,"isRequired"],childTicket:[r,"isRequired"],title:[t,"isRequired"]};const i=new ye(pe),{errors:d,isValid:m}=i.validate(s);return ve.dispatch("setValidationError",d),{errors:d,isValid:m}}const pg={name:"timeline-merge-modal",description:"Timeline merge ticket Modal component",props:{showModal:{type:Boolean,default:!1},ticket:{type:Object,default:{}},onClose:{type:Function},componentTitle:{type:String,default:"timeline"},reloadTickets:{type:Function}},data:()=>({isDisabled:!1,loading:!1,size:60,merge_reason:"",title:"",parent_tickets:"",parentTicket:"",parentTicketId:"",childTicket:"",childTicketDisabled:!0,mergerTickets_CC:!1}),beforeMount(){let e={ticket_id:this.ticket.id,title:"#"+this.ticket.ticket_number+"("+this.ticket.title+")",name:this.ticket.title};this.onChange(e,"parentTicket")},computed:{getApiParameters(){return{"ticket-id":this.ticket.id}},containerStyle(){return{width:"900px",maxWidth:"900px !important"}}},methods:{isValid(){const{errors:e,isValid:t}=mg(this.$data);return!!t},onChange(e,t){t==="parentTicket"?(this.childTicketDisabled=!e,this.childTicket=e?this.childTicket:"",this.title=e?e.name:"",this.parentTicket=e||"",this.parentTicketId=e?e.ticket_id:""):this[t]=e},onSubmit(){if(this.isValid()){this.loading=!0,this.isDisabled=!0;const e={};e.title=this.title,e.p_id=this.parentTicketId,e.reason=this.merge_reason,e._method="PATCH",e.t_id=this.childTicket.map(t=>t.ticket_id),e.mergerTickets_CC=this.mergerTickets_CC,R.post("/merge-tickets/"+this.ticket.id,e).then(t=>{this.loading=!1,this.isDisabled=!1,this.reloadTickets("timeline_merge"),X(t,this.componentTitle),this.onClose()}).catch(t=>{this.loading=!1,this.isDisabled=!1,B(t,this.componentTitle),this.onClose()})}}},components:{checkbox:Lt,"text-field":Se,"static-select":Xe,"dynamic-select":_e}},gg={class:"modal-title"},fg={key:0,id:"merge_content"},_g={class:"row"},bg={class:"row"},vg={class:"row"},yg={class:"row"},kg={class:"col-sm-6"},wg={key:1,class:"row"},Cg=["disabled"];function Sg(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("text-field"),p=g("checkbox"),f=g("reuse-loader"),b=g("modal");return a.showModal?(o(),I(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:i.containerStyle},{title:T(()=>[n("h4",gg,c(e.lang("merge-ticket")),1)]),fields:T(()=>[e.loading?u("",!0):(o(),l("div",fg,[n("div",_g,[_(d,{"api-parameters":i.getApiParameters,optionLabel:"title",label:e.lang("select-pparent-ticket"),name:"parentTicket",classname:"col-sm-6",hint:e.trans("parent_ticket_tooltip"),"api-endpoint":"/api/agent/tickets/get-merge-tickets",value:e.parentTicket,onChange:i.onChange,strlength:"25",required:!0},null,8,["api-parameters","label","hint","value","onChange"]),_(d,{"api-parameters":i.getApiParameters,optionLabel:"title",label:e.lang("select_tickets"),multiple:!0,hint:e.trans("selected_tickets_tooltip"),name:"childTicket",classname:"col-sm-6","api-endpoint":"/api/agent/tickets/get-merge-tickets?parent_ticket_id="+e.parentTicketId,value:e.childTicket,onChange:i.onChange,strlength:"30",required:!0,disabled:e.childTicketDisabled},null,8,["api-parameters","label","hint","api-endpoint","value","onChange","disabled"])]),n("div",bg,[_(m,{label:e.lang("subject"),value:e.title,type:"text",name:"title",onChange:i.onChange,classname:"col-sm-6",required:!0,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"])]),n("div",vg,[_(m,{label:e.lang("merge-reason"),value:e.merge_reason,type:"textarea",name:"merge_reason",onChange:i.onChange,classname:"col-sm-12",placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"])]),n("div",yg,[n("div",kg,[_(p,{id:"mergerTickets_CC",name:"mergerTickets_CC",value:e.mergerTickets_CC,label:e.trans("tickets_recipients_to_cc"),onChange:i.onChange,classname:"col-sm-12"},null,8,["value","label","onChange"])])])])),e.loading?(o(),l("div",wg,[_(f,{"animation-duration":4e3,color:"#1d78ff",size:e.size},null,8,["size"])])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...y)=>i.onSubmit&&i.onSubmit(...y)),class:"btn btn-primary",disabled:e.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.lang("proceed")),1)],8,Cg)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const Dg=U(pg,[["render",Sg]]),Tg={name:"surrender-modal",description:"Surrender modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},ticketId:{type:[String,Number],default:""},reloadDetails:{type:Function}},data(){return{isDisabled:!1,loading:!1,divStyle:{width:"500px"}}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,R.get("/ticket/surrender/"+this.ticketId).then(e=>{this.reloadDetails("surrender"),X(e,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{B(e,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()})}}},Mg={class:"modal-title"},Og={key:0,class:"row"},Ig=["disabled"];function Ag(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("modal");return a.showModal?(o(),I(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.divStyle},{title:T(()=>[n("h4",Mg,c(e.lang("surrender")),1)]),fields:T(()=>[n("span",null,c(e.lang("are_you_sure_you_want_to_surrender_this_ticket"))+"?",1),s.loading?(o(),l("div",Og,[_(d,{duration:4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...p)=>i.onSubmit&&i.onSubmit(...p)),class:"btn btn-primary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(e.lang("update")),1)],8,Ig)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const Lg=U(Tg,[["render",Ag]]),Eg={name:"department-modal",description:"Department modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},ticketId:{type:[String,Number],default:""},reloadDetails:{type:Function}},data(){return{isDisabled:!1,loading:!1,department:"",divStyle:{width:"500px"}}},beforeMount(){this.isDisabled=!this.department},methods:{onChange(e,t){this[t]=e,this.isDisabled=!e},onSubmit(){this.loading=!0,this.isDisabled=!0;const e={};e["ticket-id"]=this.ticketId,e["dept-id"]=this.department.id,R.post("/api/ticket/change-department",e).then(t=>{this.reloadDetails("department"),X(t,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(t=>{B(t,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()})}},components:{"dynamic-select":_e}},xg={class:"modal-title"},Pg={key:0,class:"row"},Rg={key:1,class:"row"},Fg=["disabled"];function Ng(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("reuse-loader"),p=g("modal");return a.showModal?(o(),I(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.divStyle},{title:T(()=>[n("h4",xg,c(e.lang("change_department")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",Pg,[_(d,{label:e.lang("departments"),multiple:!1,name:"department",required:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/departments",value:s.department,onChange:i.onChange,clearable:!!s.department,strlength:"60"},null,8,["label","value","onChange","clearable"])])),s.loading?(o(),l("div",Rg,[_(m,{duration:4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...f)=>i.onSubmit&&i.onSubmit(...f)),class:"btn btn-primary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(e.lang("update")),1)],8,Fg)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const Vg=U(Eg,[["render",Ng]]),jg={name:"apply-approval-workflow",description:"applies selected workflow on the given ticketId",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},ticketId:{type:[String,Number],default:""},reloadDetails:{type:Function}},data(){return{isDisabled:!1,loading:!1,workflow:"",divStyle:{width:"500px"}}},beforeMount(){this.isDisabled=!this.workflow},methods:{onChange(e,t){this[t]=e,this.isDisabled=!e},onSubmit(){this.loading=!0,this.isDisabled=!0;const e={};e.ticket_id=this.ticketId,e.workflow_id=this.workflow.id,R.post("/api/apply-approval-workflow",e).then(t=>{window.emitter.emit("approvalWorkflowApplied"),this.reloadDetails("approval"),X(t,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(t=>{B(t,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()})}},components:{"dynamic-select":_e}},Ug={class:"modal-title"},Bg={key:0,class:"row"},zg={key:1,class:"row"},Hg=["disabled"];function Wg(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("reuse-loader"),p=g("modal");return a.showModal?(o(),I(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.divStyle},{title:T(()=>[n("h4",Ug,c(e.lang("apply_approval_workflow")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",Bg,[_(d,{label:e.lang("approval_workflow"),multiple:!1,name:"workflow",required:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/approval-workflows",value:s.workflow,onChange:i.onChange,clearable:!!s.workflow,strlength:"60"},null,8,["label","value","onChange","clearable"])])),s.loading?(o(),l("div",zg,[_(m,{duration:4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...f)=>i.onSubmit&&i.onSubmit(...f)),class:"btn btn-primary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(e.lang("update")),1)],8,Hg)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const qg=U(jg,[["render",Wg]]);const Kg={name:"forward-modal",description:"applies selected workflow on the given ticketId",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},ticketId:{type:[String,Number],default:""},reloadDetails:{type:Function}},data(){return{isDisabled:!1,loading:!1,users:[],description:null,sendAttachments:!1,divStyle:{width:"700px"}}},beforeMount(){this.isDisabled=!(this.users.length>0)},methods:{onChange(e,t){this[t]=e,t==="users"&&(this.isDisabled=!(e&&e.length>0))},onSubmit(){let e=this.users.map(a=>a.hasOwnProperty("email")?a.email:a.name);this.loading=!0,this.isDisabled=!0;const t={};t.ticket_id=this.ticketId,t.emails=e,t.send_attachments=this.sendAttachments,t.description=this.description?this.description.replaceAll(`
`,"<br>"):this.description,R.post("/api/forward-ticket",t).then(a=>{this.reloadDetails("forward"),X(a,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(a=>{B(a,"timeline"),this.loading=!1,this.isDisabled=!1})}},components:{"dynamic-select":_e,checkbox:Lt,"text-field":Se}},Yg={class:"modal-title"},Gg={key:0,class:"row"},Qg={key:1,class:"row"},Xg=["disabled"];function Jg(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("text-field"),p=g("checkbox"),f=g("reuse-loader"),b=g("modal");return a.showModal?(o(),I(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.divStyle},{title:T(()=>[n("h4",Yg,c(e.lang("forward_ticket")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",Gg,[_(d,{label:e.lang("users"),multiple:!0,name:"users",required:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/users?meta=true",value:s.users,onChange:i.onChange,taggable:!0},null,8,["label","value","onChange"]),_(m,{label:e.lang("description"),id:"forward-modal-description-field",value:s.description,type:"textarea",name:"description",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",rows:"5",length:!1},null,8,["label","value","onChange","placehold"]),_(p,{id:"forward-modal-send-attachments",name:"sendAttachments",value:s.sendAttachments,label:e.lang("send_attachments_along_with_ticket"),onChange:i.onChange,classname:"col-sm-12"},null,8,["value","label","onChange"])])),s.loading?(o(),l("div",Qg,[_(f,{duration:4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...y)=>i.onSubmit&&i.onSubmit(...y)),class:"btn btn-primary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(e.lang("update")),1)],8,Xg)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const Zg=U(Kg,[["render",Jg]]);const $g={name:"due-date-modal",description:"Due Date modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},ticketId:{type:[String,Number],default:""},reloadDetails:{type:Function}},data(){return{isDisabled:!1,loading:!1,due_date:"",divStyle:{width:"500px"}}},beforeMount(){this.isDisabled=!this.due_date},methods:{onChange(e,t){this[t]=e,this.isDisabled=!e},onSubmit(){this.loading=!0,this.isDisabled=!0;const e={};e["ticket-id"]=this.ticketId,e.duedate=Oe(this.due_date).format("YYYY-MM-DD HH:mm:ss"),R.post("/api/ticket/change-duedate",e).then(t=>{this.reloadDetails("duedate"),X(t,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(t=>{B(t,"timeline"),this.loading=!1,this.isDisabled=!1,this.onClose()})}},components:{"date-time-field":at}},ef={class:"modal-title"},tf={key:0,class:"row"},sf={key:1,class:"row"},af=["disabled"];function nf(e,t,a,r,s,i){const d=g("date-time-field"),m=g("reuse-loader"),p=g("modal");return a.showModal?(o(),I(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.divStyle},{title:T(()=>[n("h4",ef,c(e.lang("change_due_date")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",tf,[_(d,{label:e.lang("select_date"),value:"",type:"datetime",key:"due_date",id:"due_date",name:"due_date",onChange:i.onChange,required:!0,format:"YYYY-MM-DD HH:mm:ss",classname:"col-sm-12 due_picker",clearable:!0,disabled:!1,editable:!0,currentYearDate:!1,notBefore:new Date},null,8,["label","onChange","notBefore"])])),s.loading?(o(),l("div",sf,[_(m,{duration:4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...f)=>i.onSubmit&&i.onSubmit(...f)),class:"btn btn-primary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(e.lang("update")),1)],8,af)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const of=U($g,[["render",nf]]),rf={name:"generate-pdf-modal",props:{showModal:{type:Boolean,default:!1},ticket:{type:Object,default:()=>{}},onClose:{type:Function,default:()=>{}}},data:()=>({containerStyle:{width:"860px"},loading:!1,pdf:"default",radioOptions:[],defaultOptions:[{key:"ticketConversation",name:"ticket_conversations",checked:!1},{key:"internalNote",name:"ticket_conversation_with_notes",checked:!1},{key:"allTicketDetails",name:"ticket_conversation_with_details",checked:!1},{key:"requesterDetails",name:"ticket_conversation_with_requester_details",checked:!1},{key:"assignedAgentDetails",name:"ticket_conversation_with_agent_details",checked:!1}],template:""}),beforeMount(){this.radioOptions=[{name:"default_pdf_template",value:"default"},{name:"customized_pdf_template",value:"custom"}]},methods:{onCheck(e,t){this.defaultOptions.forEach(function(a){if(a.key==t){a.checked=e;return}})},onChange(e,t){this[t]=e,t==="pdf"&&this.defaultOptions.forEach(function(a){a.checked=!1})},generatePdf(){let e="";if(this.pdf==="default")for(let t in this.defaultOptions)e+=this.defaultOptions[t].key+"="+this.defaultOptions[t].checked+"&";else if(this.template)e="template_id="+this.template.id,this.$store.dispatch("unsetValidationError");else{this.$store.dispatch("setValidationError",{template:"This field is required"});return}e[e.length-1]==="&"&&(e=e.slice(0,-1)),this.loading=!0,R.get("/ticket/print/"+this.ticket.id+"?"+e).then(t=>{t.data.message?(X(t,"timeline"),this.onClose(),this.loading=!1):(this.loading=!1,this.openInNewTab(this.basePath()+"/ticket/print/"+this.ticket.id+"?"+e),this.onClose())}).catch(t=>{this.onClose(),B(t,"timeline")})},openInNewTab(e){const t=window.open(e,"_blank");t&&t.focus()}},components:{checkbox:Lt,"dynamic-select":_e,"radio-button":Pe,"text-field":Se}},lf={class:"modal-title"},df={class:"row"},cf={key:0,class:"row"},uf={key:1,class:"row"},hf={key:1,class:"row"};function mf(e,t,a,r,s,i){const d=g("radio-button"),m=g("checkbox"),p=g("dynamic-select"),f=g("reuse-loader"),b=g("modal");return a.showModal?(o(),I(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:T(()=>[n("h4",lf,c(e.trans("generate_pdf")),1)]),fields:T(()=>[e.loading?u("",!0):(o(),l(E,{key:0},[n("div",df,[_(d,{options:e.radioOptions,label:e.trans("select_an_action"),name:"pdf",value:e.pdf,onChange:i.onChange,classname:"form-group col-sm-12",optionClass:"col-sm-4"},null,8,["options","label","value","onChange"])]),e.pdf==="default"?(o(),l("div",cf,[e.loggedUserRole=="agent"?(o(!0),l(E,{key:0},q(e.defaultOptions.slice(0,3),y=>(o(),l("div",{class:"col-sm-12",key:y.key},[_(m,{name:y.key,value:y.checked,label:y.name,title:y.name,onChange:i.onCheck,id:y.key,defaultClass:"",labelClass:"fw-400"},null,8,["name","value","label","title","onChange","id"])]))),128)):(o(!0),l(E,{key:1},q(e.defaultOptions,y=>(o(),l("div",{class:"col-sm-12",key:y.key},[_(m,{name:y.key,value:y.checked,label:y.name,title:y.name,onChange:i.onCheck,id:y.key,defaultClass:"",labelClass:"fw-400"},null,8,["name","value","label","title","onChange","id"])]))),128))])):u("",!0),e.pdf==="custom"?(o(),l("div",uf,[_(p,{label:e.trans("templates"),multiple:!1,name:"template",required:!0,classname:"col-sm-12",apiEndpoint:"/api/get/pdfTemplates",value:e.template,onChange:i.onChange},null,8,["label","value","onChange"])])):u("",!0)],64)),e.loading?(o(),l("div",hf,[_(f,{"animation-duration":4e3,color:"#1d78ff",size:e.size},null,8,["size"])])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...y)=>i.generatePdf&&i.generatePdf(...y)),class:"btn btn-primary",id:"submit_btn"},[t[1]||(t[1]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.trans("generate_pdf")),1)])]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const pf=U(rf,[["render",mf]]);const gf={props:{actions:{type:Object,default:()=>{}},ticket:{type:Object,default:()=>{}},user:{type:Object,default:()=>{}},updateDetails:{type:Function}},data(){return{showRequesterModal:!1,showMergeModal:!1,showForkModal:!1,showTimeModal:!1,showDueModal:!1,showApprovalModal:!1,showForwardModal:!1,showSurrenderModal:!1,showDeptModal:!1,showGenerateModal:!1,loading:!1,actionsList:this.actions,integration_status:!1,btnName:"",btnIcon:"",integrateAppBtn:"hide_app",integration_data:[]}},created(){window.emitter.on("iframeReload",this.getIntegrationStatus)},mounted(){this.getIntegrationStatus()},methods:{subString(e,t=30){return ge(e,t)},reloadData(e){this.updateDetails(e)},updateTimeTrack(){window.emitter.emit("refreshTimeTrack")},onClose(){this.showRequesterModal=!1,this.showMergeModal=!1,this.showForkModal=!1,this.showTimeModal=!1,this.showDueModal=!1,this.showSurrenderModal=!1,this.showDeptModal=!1,this.showApprovalModal=!1,this.showForwardModal=!1,this.showGenerateModal=!1},requestFeedback(){this.loading=!0,R.post("/api/request/rating/"+this.ticket.id).then(e=>{this.loading=!1,X(e,"timeline")}).catch(e=>{this.loading=!1,B(e,"timeline")})},getIntegrationStatus(){R.get("/api/integration-status?route_name=Ticket Details&ticket_id="+this.ticket.id).then(e=>{var t,a;e.data.data.integrations.length>0&&(this.integration_status=!0),this.btnName=(t=e.data.data.integrations[0])==null?void 0:t.button_name,this.btnIcon=(a=e.data.data.integrations[0])==null?void 0:a.button_icon,this.integration_data=e.data.data.integrations,window.emitter.emit("showIframeCard",{integration_btn:this.integrateAppBtn,integration_data:this.integration_data,reload:!0})}).catch(e=>{this.loading=!1})},integrationMethod(){this.integrateAppBtn=this.integrateAppBtn==="hide_app"?"show_app":"hide_app",window.emitter.emit("showIframeCard",{integration_btn:this.integrateAppBtn,integration_data:this.integration_data,reload:!1})}},components:{"change-requester-modal":Hp,"ticket-fork-modal":Xp,"record-time-modal":ka,"timeline-merge-modal":Dg,"surrender-modal":Lg,"change-dept-modal":Vg,"approval-modal":qg,"forward-modal":Zg,"due-date-modal":of,"generate-pdf-modal":pf}},ff={class:"btn-group",id:"more-evt"},_f={type:"button",class:"btn btn-xs btn-light rounded-1","data-bs-toggle":"dropdown"},bf={class:"dropdown-menu dropdown-menu-right"},vf={key:0,class:"row"};function yf(e,t,a,r,s,i){const d=g("due-date-modal"),m=g("generate-pdf-modal"),p=g("surrender-modal"),f=g("change-dept-modal"),b=g("approval-modal"),y=g("forward-modal"),D=g("change-requester-modal"),w=g("timeline-merge-modal"),S=g("ticket-fork-modal"),L=g("record-time-modal"),x=g("custom-loader"),P=Q("tooltip");return o(),l("div",ff,[M((o(),l("button",_f,t[12]||(t[12]=[n("i",{class:"fas fa-ellipsis-v"},null,-1)]))),[[P,e.lang("more-actions")]]),n("div",bf,[n("a",{class:"dropdown-item",href:"javascript:;",onClick:t[0]||(t[0]=F=>s.showRequesterModal=!0)},[t[13]||(t[13]=n("i",{class:"far fa-user"},null,-1)),k(" "+c(e.lang("change_requester")),1)]),n("a",{class:"dropdown-item",href:"javascript:;",onClick:t[1]||(t[1]=F=>s.showMergeModal=!0)},[t[14]||(t[14]=n("i",{class:"fas fa-cog"},null,-1)),k(" "+c(e.lang("merge-ticket")),1)]),n("a",{class:"dropdown-item",href:"javascript:;",onClick:t[2]||(t[2]=F=>s.showForkModal=!0)},[t[15]||(t[15]=n("i",{class:"fas fa-code-branch"},null,-1)),k(" "+c(e.lang("ticket-fork")),1)]),n("a",{href:"javascript:;",class:"dropdown-item",onClick:t[3]||(t[3]=(...F)=>i.requestFeedback&&i.requestFeedback(...F))},[t[16]||(t[16]=n("i",{class:"far fa-star"},null,-1)),k(c(e.lang("request-feedback")),1)]),a.actions.time_track_enabled?(o(),l("a",{key:0,class:"dropdown-item",href:"javascript:;",onClick:t[4]||(t[4]=F=>s.showTimeModal=!0)},[t[17]||(t[17]=n("i",{class:"far fa-clock"},null,-1)),k(" "+c(e.lang("record_time")),1)])):u("",!0),s.actionsList.change_duedate?(o(),l("a",{key:1,class:"dropdown-item",href:"javascript:;",onClick:t[5]||(t[5]=F=>s.showDueModal=!0)},[t[18]||(t[18]=n("i",{class:"far fa-calendar"},null,-1)),k(" "+c(e.lang("change_due_date")),1)])):u("",!0),s.actionsList.surrender?(o(),l("a",{key:2,class:"dropdown-item",href:"javascript:;",onClick:t[6]||(t[6]=F=>s.showSurrenderModal=!0)},[t[19]||(t[19]=n("i",{class:"fas fa-arrows-alt"},null,-1)),k(" "+c(e.lang("surrender")),1)])):u("",!0),s.actionsList.transfer?(o(),l("a",{key:3,class:"dropdown-item",href:"javascript:;",onClick:t[7]||(t[7]=F=>s.showDeptModal=!0)},[t[20]||(t[20]=n("i",{class:"far fa-hand-point-right"},null,-1)),k(" "+c(e.lang("change_department")),1)])):u("",!0),n("a",{href:"javascript:;",class:"dropdown-item",onClick:t[8]||(t[8]=F=>s.showGenerateModal=!0)},[t[21]||(t[21]=n("i",{class:"far fa-file-pdf"},null,-1)),k(" "+c(e.lang("generate_pdf")),1)]),s.actionsList.allowed_enforce_approval_workflow?(o(),l("a",{key:4,class:"dropdown-item",href:"javascript:;",onClick:t[9]||(t[9]=F=>s.showApprovalModal=!0)},[t[22]||(t[22]=n("i",{class:"fas fa-pause"},null,-1)),k(" "+c(e.lang("apply_approval_workflow")),1)])):u("",!0),n("a",{class:"dropdown-item",href:"javascript:;",onClick:t[10]||(t[10]=F=>s.showForwardModal=!0)},[t[23]||(t[23]=n("i",{class:"fas fa-forward"},null,-1)),k(" "+c(e.lang("forward_ticket")),1)]),s.integration_status?M((o(),l("a",{key:5,class:N(["dropdown-item",{"bg-primary":s.integrateAppBtn==="show_app"}]),href:"javascript:;",onClick:t[11]||(t[11]=(...F)=>i.integrationMethod&&i.integrationMethod(...F))},[n("i",{class:N(s.btnIcon)},null,2),k("   "+c(i.subString(s.btnName,10)),1)],2)),[[P,s.btnName]]):u("",!0)]),_(ae,{name:"modal"},{default:T(()=>[s.showDueModal?(o(),I(d,{key:0,onClose:i.onClose,showModal:s.showDueModal,ticketId:a.ticket.id,componentTitle:"timeline",reloadDetails:i.reloadData},null,8,["onClose","showModal","ticketId","reloadDetails"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showGenerateModal?(o(),I(m,{key:0,onClose:i.onClose,showModal:s.showGenerateModal,ticket:a.ticket},null,8,["onClose","showModal","ticket"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showSurrenderModal?(o(),I(p,{key:0,onClose:i.onClose,showModal:s.showSurrenderModal,ticketId:a.ticket.id,componentTitle:"timeline",reloadDetails:i.reloadData},null,8,["onClose","showModal","ticketId","reloadDetails"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showDeptModal?(o(),I(f,{key:0,onClose:i.onClose,showModal:s.showDeptModal,ticketId:a.ticket.id,componentTitle:"timeline",reloadDetails:i.reloadData},null,8,["onClose","showModal","ticketId","reloadDetails"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showApprovalModal?(o(),I(b,{key:0,onClose:i.onClose,showModal:s.showApprovalModal,ticketId:a.ticket.id,componentTitle:"timeline",reloadDetails:i.reloadData},null,8,["onClose","showModal","ticketId","reloadDetails"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showForwardModal?(o(),I(y,{key:0,onClose:i.onClose,showModal:s.showForwardModal,ticketId:a.ticket.id,componentTitle:"timeline",reloadDetails:i.reloadData},null,8,["onClose","showModal","ticketId","reloadDetails"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showRequesterModal?(o(),I(D,{key:0,onClose:i.onClose,showModal:s.showRequesterModal,ticketId:a.ticket.id,componentTitle:"timeline",reloadDetails:i.reloadData},null,8,["onClose","showModal","ticketId","reloadDetails"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showMergeModal?(o(),I(w,{key:0,onClose:i.onClose,showModal:s.showMergeModal,ticket:a.ticket,componentTitle:"timeline",reloadTickets:i.reloadData},null,8,["onClose","showModal","ticket","reloadTickets"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showForkModal?(o(),I(S,{key:0,onClose:i.onClose,showModal:s.showForkModal,ticketId:a.ticket.id,componentTitle:"timeline",reloadDetails:i.reloadData,selectedFormData:a.ticket.form},null,8,["onClose","showModal","ticketId","reloadDetails","selectedFormData"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showTimeModal?(o(),I(L,{key:0,onClose:i.onClose,showModal:s.showTimeModal,ticketId:a.ticket.id,componentTitle:"timeline",updateData:i.updateTimeTrack},null,8,["onClose","showModal","ticketId","updateData"])):u("",!0)]),_:1}),s.loading?(o(),l("div",vf,[_(x,{size:60})])):u("",!0)])}const kf=U(gf,[["render",yf],["__scopeId","data-v-fe864d6b"]]);const wf={name:"timeline-action",description:"Timeline Actions Component",props:{actions:{type:[Object,String],default:""},id:{type:[String,Number],default:""},data:{type:Object,default:()=>{}},afterAction:{type:Function,default:()=>{}}},data(){return{actionsList:this.actions}},methods:{reloadData(e){this.afterAction(e)},timelineActionBarMounted(){this.data.alertName="timeline",window.emitter.emit("timeline-action-bar-mounted",this.data)},timelineActionDivMounted(){this.data.alertName="timeline",this.data.showTaskCount=!0,this.data.ticket_id=this.id,this.data.entity_id=this.id,this.data.entity_type="ticket",window.emitter.emit("timeline-action-div-mounted",this.data)},loadSummarizeModal(){window.emitter.emit("elea-ticket-summary-loaded",{ticketData:this.data,summary_for:"ticket"})}},computed:{...pt(["isSettingActive"]),hasIsSettingActiveGetter(){return this.$store.getters.hasOwnProperty("isSettingActive")}},components:{"ticket-label":Sp,"ticket-tag":Fp,"more-events":kf}},Cf={class:"timeline-actions-span"},Sf={key:0,id:"ai-ticket-summary-modal",class:"inline-block"},Df={key:3,id:"timeline-action-div",class:"inline-block"},Tf={key:4,id:"timeline-action-bar",class:"inline-block"};function Mf(e,t,a,r,s,i){const d=g("ticket-label"),m=g("ticket-tag"),p=g("more-events");return o(),l("span",Cf,[!a.actions.block_ticket_actions&&a.actions.view_tickets_without_actions?(o(),l(E,{key:0},[i.hasIsSettingActiveGetter&&(e.isSettingActive("summarize_ticket_key")||e.isSettingActive("article_generate"))?(o(),l("div",Sf,c(i.loadSummarizeModal()),1)):u("",!0),a.data.ticketMerged?u("",!0):(o(),I(d,{key:1,ticketObj:a.data,reloadDetails:i.reloadData},null,8,["ticketObj","reloadDetails"])),a.data.ticketMerged?u("",!0):(o(),I(m,{key:2,ticketObj:a.data,reloadDetails:i.reloadData},null,8,["ticketObj","reloadDetails"])),a.data.ticketMerged?u("",!0):(o(),l("div",Df,c(i.timelineActionDivMounted()),1)),a.data.ticketMerged?u("",!0):(o(),l("div",Tf,c(i.timelineActionBarMounted()),1))],64)):u("",!0),is(e.$slots,"left-actions"),!a.actions.block_ticket_actions&&a.actions.view_tickets_without_actions&&!a.data.ticketMerged?(o(),I(p,{key:1,actions:s.actionsList,ticket:a.data,updateDetails:i.reloadData},null,8,["actions","ticket","updateDetails"])):u("",!0)])}const Of=U(wf,[["render",Mf]]);const If={name:"timeline-data",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),customFormattedTime:ee(()=>e.getters.customFormattedTime)}},props:{ticket:{type:Object,default:()=>{}},color:{type:String,default:""},actions:{type:[Object,String],default:""},afterAction:{type:Function,default:()=>{}},id:{type:[String,Number],default:""}},data(){return{timelineData:this.ticket,showEditModal:!1,showAssignModal:!1,showStatusModal:!1,change_status:"",statusList:"",loading:!1,from:"",loadEditModal:!1,eventFrom:""}},watch:{ticket(e,t){this.timelineData.custom_field_values=[],setTimeout(()=>{this.timelineData=e},1e3)},loadEditModal(){this.loadEditModal&&this.triggerEditModal(this.eventFrom),this.loadEditModal=!1}},created(){window.emitter.on("showEditTicketModaltimeline",e=>{this.eventFrom=e,this.loadEditModal=!0})},methods:{getStatusList(){this.loading=!0;let e={meta:!0,supplements:It([this.id]),limit:"all"};R.get("/api/dependency/statuses",{params:e}).then(t=>{this.loading=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.loading=!1})},getStatus(e){this.showStatusModal=!0,this.change_status=e},reloadData(e){this.afterAction(e)},subString(e,t=15){return ge(e,t)},timelineMetaListBoxMounted(){window.emitter.emit("timeline-meta-box-mounted",this.ticket)},onClose(){this.showEditModal=!1,this.showAssignModal=!1,this.showStatusModal=!1,this.$store.dispatch("unsetValidationError")},triggerEditModal(e){this.showEditModal=!0,this.from=e}},components:{"edit-ticket-modal":va,"assign-ticket-modal":Tt,"change-status-modal":Dt,UserInfo:ya}},Af={class:"row"},Lf={class:"col-sm-12"},Ef={class:"card card-light"},xf={key:0,class:"card-header pbt-4",id:"timeline-details-header"},Pf={class:"card-tools"},Rf={class:"badge text-bg-success text-sm mbt-4"},Ff={key:1},Nf={class:"badge text-bg-danger text-sm mbt-4"},Vf={class:"btn-group"},jf={class:"dropdown-menu status-list dropdown-menu-right"},Uf={key:0,class:"row"},Bf=["onClick"],zf={key:1,class:"dropdown-item",href:"javascript:;"},Hf={class:"row"},Wf={class:"col-md-12 info-row"},qf={class:"row"},Kf={class:"col-sm-6"},Yf={class:"col-sm-6"},Gf={class:"col-md-12 info-row"},Qf={class:"row"},Xf={class:"col-sm-6"},Jf={class:"col-sm-6"},Zf={class:"col-md-12 info-row"},$f={class:"row"},e_={class:"col-sm-6"},t_={class:"col-sm-6"},s_={class:"col-md-12 info-row"},a_={class:"row"},n_={class:"col-sm-6"},i_={class:"col-sm-6"},o_={key:0,class:"col-md-12 info-row"},r_={class:"row"},l_={class:"col-sm-6"},d_={key:1,class:"col-md-12 info-row"},c_={class:"row"},u_={class:"col-sm-6"},h_={key:2,class:"col-md-12 info-row"},m_={class:"d-flex"},p_={class:"col-sm-6"},g_={class:"permssion-update col-sm-6"},f_={key:3,class:"col-md-12 info-row"},__={class:"row"},b_={class:"col-sm-6"},v_={key:4,class:"col-md-12 info-row"},y_={class:"d-flex"},k_={class:"col-sm-6"},w_={class:"permssion-update col-sm-6"},C_={key:5,class:"col-md-12 info-row"},S_={class:"row"},D_={class:"col-sm-6"},T_={key:6,class:"col-md-12 info-row"},M_={class:"d-flex"},O_={class:"col-sm-6"},I_={class:"permssion-update col-sm-6"},A_={key:7,class:"col-md-12 info-row"},L_={class:"row"},E_={class:"col-sm-6"},x_={key:8,class:"col-md-12 info-row"},P_={class:"d-flex"},R_={class:"col-sm-6"},F_={class:"permssion-update col-sm-6"},N_={key:9,class:"col-md-12 info-row"},V_={class:"row"},j_={class:"col-sm-6"},U_={key:10,class:"col-md-12 info-row"},B_={class:"row"},z_={class:"col-sm-6"},H_={key:11,class:"col-md-12 info-row"},W_={class:"row"},q_={class:"col-sm-6"},K_={key:12,class:"col-md-12 info-row"},Y_={class:"row"},G_={class:"col-sm-6"},Q_={key:13,class:"col-md-12 info-row"},X_={class:"row"},J_={class:"col-sm-6"},Z_={key:14,class:"col-md-12 info-row"},$_={class:"row"},eb={class:"col-sm-6"},tb={key:15,class:"col-md-12 info-row"},sb={class:"row"},ab={class:"col-sm-6"},nb={key:16,class:"col-md-12 info-row"},ib={class:"row"},ob={class:"col-sm-6"},rb={key:17,class:"col-md-12 info-row"},lb={class:"row"},db={class:"col-sm-6"},cb={class:"col-md-12 info-row"},ub={key:0,class:"row"},hb={class:"col-sm-6"},mb={key:0,class:"col-sm-6"},pb={id:"timeline-meta-list-box",class:"col-sm-12"};function gb(e,t,a,r,s,i){var w,S,L,x;const d=g("router-link"),m=g("reuse-loader"),p=g("user-info"),f=g("edit-ticket-modal"),b=g("assign-ticket-modal"),y=g("change-status-modal"),D=Q("tooltip");return o(),l("div",Af,[n("div",Lf,[n("div",Ef,[!Array.isArray(a.actions)&&!a.actions.block_ticket_actions?(o(),l("div",xf,[n("div",Pf,[a.ticket.assignee?M((o(),I(d,{key:0,class:"col-sm-6 me-1",to:a.ticket.assignee.href.replace(e.basePath(),"")},{default:T(()=>[n("span",Rf,c(e.trans("assigned")),1)]),_:1},8,["to"])),[[D,a.ticket.assignee.name]]):(o(),l("span",Ff,[n("span",Nf,c(e.trans("unassigned")),1),t[4]||(t[4]=k("  "))])),a.actions.view_tickets_without_actions&&!a.ticket.ticketMerged?(o(),l("button",{key:2,type:"button",class:"btn btn-xs fs-9 btn-light mbt-4",onClick:t[0]||(t[0]=P=>i.triggerEditModal("edit"))},[t[5]||(t[5]=n("i",{class:"far fa-edit"},null,-1)),k(" "+c(e.trans("edit")),1)])):u("",!0),a.actions.assign&&!a.ticket.ticketMerged?(o(),l("button",{key:3,type:"button",class:"btn btn-xs fs-9 btn-light mbt-4",onClick:t[1]||(t[1]=P=>s.showAssignModal=!0)},[t[6]||(t[6]=n("i",{class:"far fa-hand-point-right"},null,-1)),k(" "+c(e.trans("assign")),1)])):u("",!0),n("div",Vf,[a.actions.view_tickets_without_actions&&!a.ticket.ticketMerged?(o(),l("button",{key:0,type:"button",class:"btn btn-xs fs-9 btn-light dropdown-toggle mbt-4","data-bs-toggle":"dropdown",onClick:t[2]||(t[2]=P=>i.getStatusList()),id:"status"},[t[7]||(t[7]=n("i",{class:"fas fa-exchange-alt"},null,-1)),k(" "+c(e.trans("change_status")),1)])):u("",!0),n("div",jf,[s.loading?(o(),l("div",Uf,[_(m,{"animation-duration":4e3,color:"#1d78ff",size:20})])):u("",!0),s.loading?u("",!0):(o(),l(E,{key:1},[s.statusList&&s.statusList.length>0?(o(!0),l(E,{key:0},q(s.statusList,P=>(o(),l("a",{class:"dropdown-item",id:"change_status",onClick:F=>i.getStatus(P),href:"javascript:;"},[n("i",{class:N(P.icon),style:ne({color:P.icon_color})},null,6),k("  "+c(P.name),1)],8,Bf))),256)):u("",!0),s.statusList&&s.statusList.length===0?(o(),l("a",zf,c(e.trans("no-records")),1)):u("",!0)],64))])])])])):u("",!0),n("div",{class:"card-body",id:"ticket_data",onScroll:t[3]||(t[3]=(...P)=>e.handleScroll&&e.handleScroll(...P))},[n("div",Hf,[n("div",Wf,[n("div",qf,[n("label",Kf,c(e.trans("created_at")),1),M((o(),l("a",Yf,[k(c(r.formattedTime(a.ticket.created_at)),1)])),[[D,r.formattedTime(a.ticket.created_at)]])])]),n("div",Gf,[n("div",Qf,[n("label",Xf,c(e.trans("updated_at")),1),M((o(),l("a",Jf,[k(c(r.formattedTime(a.ticket.updated_at)),1)])),[[D,r.formattedTime(a.ticket.updated_at)]])])]),n("div",Zf,[n("div",$f,[n("label",e_,c(e.trans("status-changed-at")),1),M((o(),l("a",t_,[k(c(r.formattedTime(a.ticket.status_changed_at)),1)])),[[D,r.formattedTime(a.ticket.status_changed_at)]])])]),n("div",s_,[n("div",a_,[n("label",n_,c(e.trans("assigned_at")),1),M((o(),l("a",i_,[k(c(r.formattedTime(a.ticket.assigned_at)),1)])),[[D,r.formattedTime(a.ticket.assigned_at)]])])]),a.ticket.status?(o(),l("div",o_,[n("div",r_,[n("label",l_,c(e.trans("status")),1),_(d,{class:"col-sm-6",to:a.ticket.status.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.status.name,30)),1)])),[[D,a.ticket.status.name]])]),_:1},8,["to"])])])):u("",!0),a.ticket.last_replier&&a.ticket.canViewLastReplierProfile?(o(),l("div",d_,[n("div",c_,[n("label",u_,c(e.trans("last_replier")),1),_(p,{from:a.ticket.last_replier,tableHeader:a.color,class:"custom-user-info",strLen:15},null,8,["from","tableHeader"])])])):a.ticket.last_replier?(o(),l("div",h_,[n("div",m_,[n("label",p_,c(e.trans("last_replier")),1),n("a",g_,[M((o(),l("span",null,[k(c(i.subString((w=a.ticket.last_replier)==null?void 0:w.full_name)),1)])),[[D,e.trans("access_denied_now")]])]),t[8]||(t[8]=k("  "))])])):u("",!0),a.ticket.user&&a.ticket.canViewRequestorProfile?(o(),l("div",f_,[n("div",__,[n("label",b_,c(e.trans("requester")),1),_(p,{from:a.ticket.user,tableHeader:a.color,class:"custom-user-info",strLen:15},null,8,["from","tableHeader"])])])):(o(),l("div",v_,[n("div",y_,[n("label",k_,c(e.trans("requester")),1),n("a",w_,[M((o(),l("span",null,[k(c(i.subString((S=a.ticket.user)==null?void 0:S.full_name)),1)])),[[D,e.trans("access_denied_now")]])]),t[9]||(t[9]=k("  "))])])),a.ticket.creator&&a.ticket.canViewCreatorProfile?(o(),l("div",C_,[n("div",S_,[n("label",D_,c(e.trans("creator")),1),_(p,{from:a.ticket.creator,tableHeader:a.color,class:"custom-user-info",strLen:15},null,8,["from","tableHeader"])])])):(o(),l("div",T_,[n("div",M_,[n("label",O_,c(e.trans("creator")),1),n("a",I_,[M((o(),l("span",null,[k(c(i.subString((L=a.ticket.creator)==null?void 0:L.full_name)),1)])),[[D,e.trans("access_denied_now")]])]),t[10]||(t[10]=k("  "))])])),a.ticket.assigned&&a.ticket.canViewAssigneeProfile?(o(),l("div",A_,[n("div",L_,[n("label",E_,c(e.trans("assigned_to")),1),_(p,{from:a.ticket.assigned,tableHeader:a.color,class:"custom-user-info",strLen:15},null,8,["from","tableHeader"])])])):a.ticket.assigned?(o(),l("div",x_,[n("div",P_,[n("label",R_,c(e.trans("assigned_to")),1),n("a",F_,[M((o(),l("span",null,[k(c(i.subString((x=a.ticket.assigned)==null?void 0:x.full_name)),1)])),[[D,e.trans("access_denied_now")]])]),t[11]||(t[11]=k("  "))])])):u("",!0),Array.isArray(a.ticket.assigned_team)?u("",!0):(o(),l("div",N_,[n("div",V_,[n("label",j_,c(e.trans("assigned_team")),1),_(d,{class:"col-sm-6",to:a.ticket.assigned_team.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.assigned_team.name,30)),1)])),[[D,a.ticket.assigned_team.name]])]),_:1},8,["to"])])])),a.ticket.source?(o(),l("div",U_,[n("div",B_,[n("label",z_,c(e.trans("source")),1),_(d,{class:"col-sm-6",to:a.ticket.source.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.source.name,30)),1)])),[[D,a.ticket.source.name]])]),_:1},8,["to"])])])):u("",!0),a.ticket.type?(o(),l("div",H_,[n("div",W_,[n("label",q_,c(e.trans("type")),1),_(d,{class:"col-sm-6",to:a.ticket.type.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.type.name,30)),1)])),[[D,a.ticket.type.name]])]),_:1},8,["to"])])])):u("",!0),a.ticket.priority?(o(),l("div",K_,[n("div",Y_,[n("label",G_,c(e.trans("priority")),1),_(d,{class:"col-sm-6",to:a.ticket.priority.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.priority.name,30)),1)])),[[D,a.ticket.priority.name]])]),_:1},8,["to"])])])):u("",!0),a.ticket.departments?(o(),l("div",Q_,[n("div",X_,[n("label",J_,c(e.trans("departments")),1),_(d,{class:"col-sm-6",to:a.ticket.departments.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.departments.name,30)),1)])),[[D,a.ticket.departments.name]])]),_:1},8,["to"])])])):u("",!0),a.ticket.sla_plan?(o(),l("div",Z_,[n("div",$_,[n("label",eb,c(e.trans("sla_plan")),1),_(d,{class:"col-sm-6",to:a.ticket.sla_plan.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.sla_plan.name,30)),1)])),[[D,a.ticket.sla_plan.name]])]),_:1},8,["to"])])])):u("",!0),a.ticket.helptopic?(o(),l("div",tb,[n("div",sb,[n("label",ab,c(e.trans("helptopic")),1),_(d,{class:"col-sm-6",to:a.ticket.helptopic.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.helptopic.name,30)),1)])),[[D,a.ticket.helptopic.name]])]),_:1},8,["to"])])])):u("",!0),a.ticket.location?(o(),l("div",nb,[n("div",ib,[n("label",ob,c(e.trans("location")),1),_(d,{class:"col-sm-6",to:a.ticket.location.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.location.name,30)),1)])),[[D,a.ticket.location.name]])]),_:1},8,["to"])])])):u("",!0),a.ticket.form?(o(),l("div",rb,[n("div",lb,[n("label",db,c(e.trans("form")),1),_(d,{class:"col-sm-6",to:a.ticket.form.href?a.ticket.form.href.replace(e.basePath(),""):"",target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(a.ticket.form.name,30)),1)])),[[D,a.ticket.form.name]])]),_:1},8,["to"])])])):u("",!0),s.timelineData.custom_field_values&&s.timelineData.custom_field_values.length>0?(o(!0),l(E,{key:18},q(s.timelineData.custom_field_values,P=>(o(),l("div",cb,[e.boolean(P.value)||P.field_type==="number"||P.value==="0"?(o(),l("div",ub,[n("label",hb,c(P.label),1),Array.isArray(P.value)?(o(),l("ul",mb,[(o(!0),l(E,null,q(P.value,(F,O)=>(o(),l("li",null,[_(d,{to:P.href[O].replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(F,30)),1)])),[[D,F]]),t[12]||(t[12]=k("  "))]),_:2},1032,["to"])]))),256))])):(o(),l(E,{key:1},[P.field_type==="date"?M((o(),I(d,{key:0,class:"col-sm-6",to:P.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[k(c(P.value),1)]),_:2},1032,["to"])),[[D,P.value]]):(o(),I(d,{key:1,class:"col-sm-6",to:P.href.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[M((o(),l("span",null,[k(c(i.subString(P.value,30)),1)])),[[D,P.value]])]),_:2},1032,["to"]))],64))])):u("",!0)]))),256)):u("",!0),n("div",pb,c(i.timelineMetaListBoxMounted()),1)])],32)])]),_(ae,{name:"modal"},{default:T(()=>[s.showEditModal?(o(),I(f,{key:0,onClose:i.onClose,showModal:s.showEditModal,ticketId:a.id,componentTitle:"timeline",reloadDetails:i.reloadData,reloadTickets:i.reloadData,from:s.from,selectedFormData:a.ticket.form},null,8,["onClose","showModal","ticketId","reloadDetails","reloadTickets","from","selectedFormData"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showAssignModal?(o(),I(b,{key:0,onClose:i.onClose,showModal:s.showAssignModal,ticketIds:[a.id],componentTitle:"timeline",reloadTickets:i.reloadData,deptId:a.ticket.departments?a.ticket.departments.id:"",teamId:a.ticket.assignee&&a.ticket.assignee.type=="team"?a.ticket.assignee.id:""},null,8,["onClose","showModal","ticketIds","reloadTickets","deptId","teamId"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showStatusModal?(o(),I(y,{key:0,onClose:i.onClose,showModal:s.showStatusModal,ticketIds:[a.id],status:s.change_status,componentTitle:"timeline",reloadTickets:i.reloadData},null,8,["onClose","showModal","ticketIds","status","reloadTickets"])):u("",!0)]),_:1})])}const fb=U(If,[["render",gb],["__scopeId","data-v-e793234c"]]);const _b={name:"timeline-requester",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime)}},data(){return{cardOpen:!0}},props:{user:{type:Object,default:()=>{}},latestTickets:{type:Array,default:()=>[]},org:{type:Array,default:()=>[]},archive:{type:Boolean,default:!1}},methods:{toggleCard(){this.cardOpen=!this.cardOpen},subString(e,t=15){return ge(e,t)},showUserProfile(e){return this.basePath()+"/panel/user/"+e}}},bb={class:"card card-light"},vb={class:"card-title"},yb={class:"card-tools"},kb={type:"button",class:"btn btn-tool"},wb={key:0,class:"card-body box-profile"},Cb={class:"user-details"},Sb={class:"image-container mb-3"},Db=["src"],Tb={class:"list-group list-group-unbordered mb-3"},Mb={class:"list-group-item"},Ob={class:"float-end"},Ib={class:"list-group-item"},Ab={class:"float-end"},Lb={class:"list-group-item"},Eb={class:"float-end"},xb={key:0,class:"list-group-item"},Pb={class:"float-end"},Rb={key:0,class:"ticket-label text-muted border-bottom"},Fb={class:"col-md-12 info-row"},Nb={class:"timeline"},Vb={class:"timeline-item"},jb={class:"timeline-header"},Ub={class:"thread_time"},Bb={class:"timeline-body"},zb={key:0,class:"last-element"};function Hb(e,t,a,r,s,i){const d=g("router-link"),m=Q("tooltip");return o(),l("div",bb,[n("div",{class:"card-header pointer",onClick:t[0]||(t[0]=(...p)=>i.toggleCard&&i.toggleCard(...p))},[n("h3",vb,c(e.trans("requester_and_tickets")),1),n("div",yb,[n("button",kb,[n("i",{class:N([{"fas fa-angle-up":s.cardOpen,"fas fa-angle-down":!s.cardOpen},"fs-25"])},null,2)])])]),s.cardOpen?(o(),l("div",wb,[n("div",Cb,[n("div",Sb,[n("img",{class:"img-circle img-bordered-sm me-2 img-40",src:a.user.profile_pic,alt:"user image"},null,8,Db),_(d,{to:"/user/"+a.user.id},{default:T(()=>[k(c(a.user.full_name),1)]),_:1},8,["to"])]),n("ul",Tb,[n("li",Mb,[n("label",null,c(e.trans("role")),1),t[1]||(t[1]=k()),n("span",Ob,c(a.user.role),1)]),n("li",Ib,[n("label",null,c(e.trans("email")),1),t[2]||(t[2]=k()),M((o(),l("span",Ab,[k(c(i.subString(a.user.email,30)),1)])),[[m,a.user.email]])]),n("li",Lb,[n("label",null,c(e.trans("mobile")),1),t[3]||(t[3]=k()),n("span",Eb,c(a.user.mobile),1)]),e.boolean(a.org)?(o(),l("li",xb,[n("label",null,c(e.trans("organization")),1),n("ul",Pb,[(o(!0),l(E,null,q(a.org,p=>(o(),l("li",null,[M((o(),I(d,{to:p.href.replace(e.basePath(),"")},{default:T(()=>[k(c(i.subString(p.name,30)),1)]),_:2},1032,["to"])),[[m,p.name]])]))),256))])])):u("",!0)])]),a.latestTickets.length?(o(),l("div",Rb,[n("label",null,c(e.lang("latest_tickets")),1)])):u("",!0),n("div",Fb,[n("div",Nb,[(o(!0),l(E,null,q(a.latestTickets,p=>(o(),l("div",null,[t[6]||(t[6]=n("i",{class:"far fa-dot-circle timeline-icon bg-secondary"},null,-1)),n("div",Vb,[n("span",{class:"time badge text-white p-1 mt-3 me-2",style:ne({backgroundColor:p.statuses.icon_color})},c(p.statuses.name),5),n("h3",jb,[M((o(),I(d,{to:"/thread/"+p.first_thread.ticket_id},{default:T(()=>[k(" #"+c(p.ticket_number),1)]),_:2},1032,["to"])),[[m,p.ticket_number]]),t[5]||(t[5]=n("br",null,null,-1)),n("span",Ub,[t[4]||(t[4]=n("i",{class:"far fa-clock"},null,-1)),k(" "+c(r.formattedTime(p.updated_at)),1)])]),n("div",Bb,[n("p",null,c(p.first_thread.title),1)])])]))),256)),a.latestTickets.length?(o(),l("div",zb,[t[7]||(t[7]=n("i",{class:"fas fa-ellipsis-h bg-gray timeline-icon"},null,-1)),n("span",{class:N(["text-md",{"requester-timeline-text":e.appLanguage==="ar"}])},[_(d,{to:"/user/"+a.user.id},{default:T(()=>[k(c(e.trans("view_all_tickets")),1)]),_:1},8,["to"])],2)])):u("",!0)])])])):u("",!0)])}const Wb=U(_b,[["render",Hb],["__scopeId","data-v-268f658f"]]);const qb={name:"RatingPopOver",data:()=>({value:""}),props:{ratings:{type:Array,default:()=>[]}}};function Kb(e,t,a,r,s,i){const d=g("star-rating"),m=g("faveo-box");return o(),l("div",null,[_(m,{class:"mb-0",title:"Additional Ratings"},{default:T(()=>[n("table",null,[n("tbody",null,[(o(!0),l(E,null,q(a.ratings,(p,f)=>(o(),l("tr",{key:f},[n("td",null,c(p.name)+" ",1),n("td",null,[_(d,{class:"tooltip-target additional-rating",rating:p.value,"max-rating":p.scale,"read-only":!0,"star-size":15,"show-rating":!1},null,8,["rating","max-rating"])])]))),128))])])]),_:1})])}const Yb=U(qb,[["render",Kb],["__scopeId","data-v-87dbd6ed"]]);const Gb={components:{RatingPopOver:Yb},setup(){const e=ue();return{getDefaultRatings:ee(()=>e.getters.getDefaultRatings),getRatingTypes:ee(()=>e.getters.getRatingTypes)}},props:{rating:{type:Object},ratings:{type:Array},labelStyle:{type:Object,default:()=>{}},classname:{type:String,default:""},readOnlyStar:{type:Boolean,default:!1}},data(){return{matched_rating:{},rating_value:0,lang_locale:"",all_ratings:""}},watch:{rating(e,t){return e}},computed:{toolTipMessage(){return this.rating.questions?{content:this.rating.questions,html:!0,classes:["star-rating-tooltip"],delay:{show:500,hide:300}}:""}},created(){this.lang_locale=localStorage.getItem("LANGUAGE")},beforeMount(){this.ratingTypes()},methods:{ratingTypes(){this.all_ratings=this.getDefaultRatings,this.loading=!1}}},Qb={class:"row"},Xb={class:"col-md-12"},Jb={class:"cursor-default"},Zb={class:"star-rating-control"};function $b(e,t,a,r,s,i){const d=g("star-rating");return o(),l("div",Qb,[n("div",Xb,[n("div",{class:N([[a.classname,{left1:s.lang_locale=="ar"}],"ticketratings"]),id:"ticketratings"},[t[1]||(t[1]=k("   ")),n("table",null,[n("tbody",null,[n("tr",null,[n("th",Jb,[n("div",{class:"ticketratingtitle",style:ne(a.labelStyle)},c(e.lang(a.rating.name))+" ",5)]),n("td",Zb,[_(d,{modelValue:s.all_ratings.rating_value,"onUpdate:modelValue":t[0]||(t[0]=m=>s.all_ratings.rating_value=m),"star-size":18,"read-only":a.readOnlyStar,"show-rating":!1,"max-rating":s.all_ratings.rating_scale,rating:s.all_ratings.rating_value},null,8,["modelValue","read-only","max-rating","rating"])])])])])],2)])])}const wa=U(Gb,[["render",$b]]);const ev={kb:"article-create",page:"page-create",reply:"inboxActions",internal_note:"inboxActions",canned:"canned-create-edit",problem_bulk_action:"problem-associated-ticket-alert",task_comment:"task-comment-threads"},tv={name:"add-media",description:"Media files uploader component",props:{description:{type:String,default:""},classname:{type:String,default:"p-0"},show_error:{type:Boolean,default:!1},noDropdown:{type:Boolean,default:!1},page_name:{type:String,default:""},attachments:{type:Array,default:()=>[]},inlineFile:{type:Array,default:()=>[]},onAttach:{type:Function,default:()=>!0},onInline:{type:Function,default:()=>!0},onInput:{type:Function,default:()=>!0},chunkApi:{type:String,default:"/chunk/upload"},filesApi:{type:String,default:"/media/files"},name:{type:String,default:"description"},id:{type:String,default:""},type:{type:String,default:""},from:{type:String,default:""},labelName:{type:String,default:"description"}},data(){return{attchments:this.attachments,inline:this.inlineFile,labelStyle:{display:"none"},loading:!1}},watch:{attachments(e,t){this.attchments=e}},methods:{bytesToKB(e){if(!e)return"0 KB";const t=parseFloat(e);return isNaN(t)?"Invalid size":(t*1024).toFixed(0)+" KB"},async addInlinePdf(e){let t=JSON.stringify(e.files),a="";this.loading=!0;try{let r={names:t,disk:e.disk};this.page_name==="kb"&&(r.auth=!1),(await R.get("file-manager/inline-files-info",{params:r})).data.data.forEach(d=>{a+=`<a target='_blank' href=${d.link}>${d.name}</a><br>`}),a&&this.getPDF(a)}catch(r){B(r,ev[this.page_name])}finally{this.loading=!1}},async getAttachmentInfo(e){let t=JSON.stringify(e.files);this.loading=!0;try{let a={names:t,disk:e.disk};this.page_name==="Kb"&&(a.auth=!1),(await R.get("file-manager/files-info",{params:a})).data.data.forEach(i=>{this.attachments.push(i)})}catch{await this.$store.dispatch("setAlert",{type:"danger",message:this.lang("file-manager-modal-error-message"),component_name:"inboxActions"})}finally{this.loading=!1}},onChange(e,t){this.onInput(e,t)},getPDF(e){this.onInput(this.description+"<br>"+e,this.name)},getAttachment(e){this.attchments.push(e),this.onAttach(this.attchments)},removeAttachment(e){this.attchments.splice(e,1),this.onAttach(this.attchments)},getInline(e){this.inline.push(e),this.onInline(this.inline)}}},sv={class:"form-group",id:"reply_content_class"},av={class:"col-md-12 pe-0"},nv={key:1,class:"text-danger"},iv={key:2,id:"file_details"},ov={key:0,class:"file-detail-box",contenteditable:"false"},rv={class:"file-details"},lv={class:"float-end"},dv=["onClick"],cv={class:"fas fa-times pointer"};function uv(e,t,a,r,s,i){const d=g("file-manager-container"),m=g("custom-loader"),p=g("tiny-editor"),f=Q("tooltip");return o(),l("div",{class:N(["col-12",a.classname])},[n("div",sv,[n("div",av,[n("label",{style:ne([a.show_error?{color:"#dc3545 "}:{color:"black"}]),for:"Reply Content"},c(e.lang(a.labelName)),5),t[0]||(t[0]=n("span",{class:"text-danger"}," *",-1)),_(d,{type:a.type,page:a.page_name,onFilesChosen:i.getAttachmentInfo,onFileChosenInlinePdf:i.addInlinePdf},{templateBtn:T(()=>[is(e.$slots,"template",{},void 0,!0)]),_:3},8,["type","page","onFilesChosen","onFileChosenInlinePdf"]),s.loading?(o(),I(m,{key:0})):u("",!0),_(p,{from:a.from,value:a.description,type:"text",onChange:i.onChange,name:a.name,label:e.lang("description"),classname:"",required:!1,labelStyle:s.labelStyle,lang:"en",page:a.page_name,id:a.id},null,8,["from","value","onChange","name","label","labelStyle","page","id"]),a.show_error?(o(),l("span",nv,c(e.lang("this_field_is_required")),1)):u("",!0),a.page_name!="kb"?(o(),l("div",iv,[(o(!0),l(E,null,q(s.attchments,(b,y)=>(o(),l(E,{key:y},[b.disposition!=="inline"?(o(),l("div",ov,[n("div",rv,[k(c(b.name)+" ("+c(i.bytesToKB(b.size?b.size:b.file_size))+") ",1),n("div",lv,[n("span",{onClick:D=>i.removeAttachment(y),class:"me-1 text-muted"},[M(n("i",cv,null,512),[[f,e.trans("remove")]])],8,dv)])])])):u("",!0)],64))),128))])):u("",!0)])])],2)}const it=U(tv,[["render",uv],["__scopeId","data-v-84ca4ff6"]]);const hv={name:"thread-body",description:"Thread Body Component",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),getRatingTypes:ee(()=>e.getters.getRatingTypes)}},props:{thread:{type:Object,default:()=>{}},index:{type:[String,Number],default:""},total:{type:Number,default:""},max:{type:Boolean,default:!1},ticketMerged:{type:Boolean,default:!1},pluginStatus:{type:Boolean,default:!1},ticketId:{type:[String,Number],default:""},from:{type:String,default:""},showRedaction:{type:Boolean,default:!1},showThreadActions:{type:Boolean,default:!0}},data(){return{ratings:[],labelStyle:{display:"none"},isEditing:!1,showDropdown:!1,selectedText:"",newselectedText:"",showPopupUndo:!1,nonRedactedResponse:[],isRedactionTypeSelected:!1,redactionSelections:[],topPosition:0,leftPosition:0,isViewingRedaction:!1,previousRedactedContent:"",combinedText:"",description:"",isEditingInternalNote:!1,attachments:[],inline:[],showAddMedia:!0,showModal:!1,deleteUrl:"",threads:[],modalMessage:this.trans("are_you_sure_want_delete_this_thread"),showLangDropdown:!1,languages:[],showSummary:!1,translateTo:"",threadData:""}},mounted(){this.isEditing&&(document.addEventListener("selectionchange",this.handleSelection),this.showDropdown=!1),this.loadLanguage()},beforeDestroy(){document.removeEventListener("selectionchange",this.handleSelection)},created(){window.emitter.on("threadUpdated",()=>{window.emitter.emit("updateTimelineThreads"),window.emitter.emit("refreshData")}),window.emitter.on("showRedactionOptions",()=>{this.makeEditable()})},methods:{lang:pe,subString(e,t=25){return ge(e,t)},getAttachments(e){this.attachments=e},getInlineImages(e){this.inline=e},onInput(e,t){this[t]=e||""},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isHTMLContent(e){return/<[a-z][\s\S]*>/i.test(e)},handleSelection(){const e=window.getSelection();if(!this.isEditing||e.isCollapsed){this.showDropdown=!1;return}if(e&&e.rangeCount>0){const t=e.getRangeAt(0),r=t.getBoundingClientRect().left/2;this.leftPosition=r/2;const s=t.toString();let i=t.commonAncestorContainer;if(t.commonAncestorContainer.parentNode.outerHTML.includes("<permanent>")){this.showDropdown=!1;return}for(;i&&i!==document.body;){if(i.tagName==="REDACTED"||i.tagName==="BLOCKQUOTE"||i.tagName==="REDACTEDIMG"||i.tagName==="REDACTEDATTACHMENT"){if(i.tagName==="BLOCKQUOTE"){this.showDropdown=!1;return}this.showDropdown=!0;break}i=i.parentNode}let m=i&&(i.tagName==="REDACTED"||i.tagName==="REDACTEDIMG"||i.tagName==="REDACTEDATTACHMENT");!m&&s.trim().length>0?this.showDropdown=!0:this.showDropdown=!1;const f=t.cloneRange().cloneContents(),b=document.createElement("div");b.appendChild(f),this.combinedText=b.innerHTML;const y=b.querySelectorAll("img");let D="";y.length>0&&y.forEach(S=>{const L=document.createElement("p");L.appendChild(S.cloneNode(!0)),D=L.outerHTML});const w=m?i.outerHTML:s;if(this.isEditing){this.selectedText=s||w||D;let S=this.selectedText.replace(/^<p>|<\/p>$/g,"");S!==this.combinedText?this.showDropdown=!1:this.showDropdown=!e.isCollapsed,this.newselectedText=w,this.showPopupUndo=m;const L=/<redactedattachment id="(\d+)">/,x=this.newselectedText.match(L);this.redactedImgId=x?x[1]:null,this.showDropdown=!e.isCollapsed&&!m&&S.length>0}m&&this.isEditing&&(this.showPopupUndo=!0,this.showDropdown=!1),s.includes("█")&&(this.showDropdown=!1)}},markForRedaction(e,t){var r,s;this.isRedactionTypeSelected=!0;const a=window.getSelection();if(!a.isCollapsed){const i=this.selectedText.toString().trim(),d=this.selectedText.match(/<img[^>]*\sid="(\d+)"[^>]*>/),m=d?d[1]:null;this.redactionSelections.push({text:i,type:e,attachmentId:m});const p=f=>{const b=document.createElement("span");return b.style.backgroundColor="rgba(255, 0, 0, 0.1)",b.style.border=`2px solid ${f}`,b.style.display="inline-block",b.className="redacted-span",b};if(a.rangeCount>0&&i.includes("<img")){const f=a.getRangeAt(0),y=((r=this.redactionSelections[this.redactionSelections.length-1])==null?void 0:r.type)==="temporary"?"#495057":"black";f.surroundContents(p(y)),this.thread.body=document.getElementById(t).innerHTML}else{const b=((s=this.redactionSelections[this.redactionSelections.length-1])==null?void 0:s.type)==="temporary"?"#495057":"black";a.getRangeAt(0).surroundContents(p(b)),this.thread.body=document.getElementById(t).innerHTML}this.isViewingRedaction&&(this.thread.body=this.previousRedactedContent,this.isViewingRedaction=!1,this.previousRedactedContent=""),this.submitRedaction(t),a.removeAllRanges(),this.showDropdown=!1}},cancelEditing(){this.isEditing=!1,this.redactionSelections.forEach(e=>{this.thread.body=this.thread.body.replace(new RegExp(`<span[^>]*>${e.text}</span>`,"g"),e.text)}),this.redactionSelections=[],window.getSelection().removeAllRanges(),window.emitter.emit("updateTimelineThreads"),this.showDropdown=!1},async submitRedaction(e){try{let t=this.thread.body;const a={};this.redactionSelections.forEach(s=>{if(s&&s.text&&s.type){const i=s.type==="permanent"?"<permanentRedacted>":"<redacted>",d=s.type==="permanent"?"</permanentRedacted>":"</redacted>";document.querySelectorAll("#"+e+" span.redacted-span").forEach(p=>{if(s.text.includes("<img src")){let f=this.selectedText.replace(/^<p>|<\/p>$/g,"");t=t.replace(p.outerHTML,`${i}${f}${d}`)}else t=t.replace(p.outerHTML,`${i}${s.text}${d}`)}),s.attachmentId&&(a[s.attachmentId]=s.type)}});const r=await axios.post("secret/api/thread/redact",{threadId:this.thread.id,text:t,attachments:a});X(r,"timeline"),window.emitter.emit("updateTimelineThreads")}catch(t){B(t,"timeline")}},viewRedaction(){this.isViewingRedaction=!0,this.previousRedactedContent=this.thread.body;const e=this.newselectedText.replace(/<redactedImg/gi,"<redactedimg").replace(/<\/redactedimg>/g,"</redactedimg>"),t=this.newselectedText.replace(/<redactedimg/gi,"<redacted").replace(/<\/redactedimg>/g,"</redacted>");axios.post("secret/api/thread/viewRedaction",{threadId:this.thread.id,text:t,attachment:this.redactedImgId}).then(a=>{this.nonRedactedResponse=a.data.data[0],this.thread.attach.forEach(r=>{r.id===this.nonRedactedResponse.id&&(r.thumbnail_url=this.nonRedactedResponse.thumbnail_url,r.view_url=this.nonRedactedResponse.view_url,r.name=this.nonRedactedResponse.filename,r.download_url=this.nonRedactedResponse.download_url)}),this.thread.body=this.thread.body.replaceAll(e,a.data.data),X(a,"timeline"),this.showPopupUndo=!1}).catch(a=>{B(a,"timeline")})},undoRedaction(){const e=this.newselectedText.replace(/<redactedimg/gi,"<redactedImg").replace(/<\/redactedimg>/g,"</redactedImg>").replace(/redactedImg|redacted/g,"unredacted");axios.post("secret/api/thread/rollbackRedaction",{threadId:this.thread.id,text:e,attachments:this.redactedImgId}).then(t=>{X(t,"timeline"),window.emitter.emit("updateTimelineThreads"),window.emitter.emit("refreshData"),this.isEditing=!1,this.showPopupUndo=!1}).catch(t=>{B(t,"timeline")})},makeEditable(){this.isEditing=!this.isEditing},updatedBody(e){return"<div>"+e.replace(/\r?\n/g,"").trim()+"</div>"},replyThread(e,t,a){const r="On "+this.formattedTime(a)+" <b>"+t+"</b> wrote :";var s;s="<p id='extra_p'>&nbsp;</p><blockquote>"+r+"<figure  id='mine'>"+e+"</figure></blockquote>",this.thread.content=s,window.emitter.emit("threadReply",this.thread)},ratingTypes(e){this.ratings=e;var t=[];if(this.thread.ratings.length!=0)for(var a in this.ratings)for(var r in this.thread.ratings)this.ratings[a].id==this.thread.ratings[r].rating_id&&this.ratings[a].rating_area=="Comment Area"&&(this.ratings[a].rating_value=this.thread.ratings[r].rating_value,this.ratings[a].ticket_id=this.thread.ticket_id,t.push(this.ratings[a]));this.ratings=t},deleteThreadClicked(e){const{id:t}=e;window.emitter.emit("threadDelete",{id:t})},editThreadClicked(e){const{id:t,originalText:a,attach:r}=e;window.emitter.emit("threadEdit",{id:t,originalText:a,attach:r})},onSubmit(){const e={content:this.description,attachment:this.attachments};axios.post("api/thread/internal/note/"+this.thread.id,e).then(t=>{X(t,"timeline"),window.emitter.emit("updateTimelineThreads")}).catch(t=>{B(t,"timeline")})},editInternalNoteThread(){axios.get("api/thread/internal/note/"+this.thread.id).then(e=>{this.description=e.data.data.body,this.attachments=e.data.data.attach,this.isEditingInternalNote=!0}).catch(e=>{B(e,"timeline")})},deleteThread(){this.deleteUrl="api/thread/delete/"+this.thread.id,this.showModal=!0,this.$emit("threadDeleted",this.thread.id)},onClose(){this.showModal=!1,this.showSummary&&(this.showSummary=!1),this.$store.dispatch("unsetValidationError")},bgClass(e){return e?e.includes(this.lang("posted_by_client"))?"bg-client":e.includes(this.lang("posted_as_internal_note"))?"bg-note":e.includes(this.lang("posted_by_system"))?"bg-system":"bg-default":"bg-note"},loadThreadSummarizeModal(e){this.threadData=this.updatedBody(this.thread.body),this.translateTo=e,this.showSummary=!0},toggleLanguageDropdown(){this.showLangDropdown=!this.showLangDropdown,this.showLangDropdown&&this.scrollToTop()},scrollToTop(){this.$nextTick(()=>{const e=this.$refs.languageList;e&&(e.scrollTop=0)})},async loadLanguage(){let e=[];const t=ue();t&&t.getters&&(e=await t.getters.isLanguageList),e&&(this.languages=e.filter(a=>a.language!=="auto"))}},computed:{positionFix(){return{top:this.topPosition+"px",left:this.leftPosition+"px",position:"absolute"}},...pt(["isSettingActive"]),hasIsSettingActiveGetter(){return this.$store.getters.hasOwnProperty("isSettingActive")},isEmptyContent(){return this.thread.body.replace(/<[^>]*>/g,"").trim().length===0}},components:{"elea-ticket-thread-summary":Ci,"svg-icon-handler":rs,"delete-modal":At,AddMedia:it,"rating-component":wa,attachment:vi,"activity-parser":ca}},mv={class:"inbox-thread-body"},pv={key:0,class:"timeline-item"},gv={class:"card-header internal-Note"},fv={class:"card-title"},_v={class:"m-3 descrp"},bv={class:"card-footer"},vv={key:1,class:"timeline-item"},yv={class:"time thread_right"},kv={class:"thread_rating"},wv={key:0,class:"mt_4"},Cv={key:1,class:"div"},Sv={key:0,class:"inline-block ai-ticket-thread-summary"},Dv={class:"dropdown"},Tv={type:"button",class:"pointer margin_5px dropdown-bs-toggle","data-bs-toggle":"dropdown",id:"elea-dropdown","aria-haspopup":"true","aria-expanded":"false"},Mv={class:"dropdown-menu summary-menu elea-dropdown-menu","aria-labelledby":"elea-dropdown"},Ov={key:0},Iv={class:"dropdown-item summary-dropdown dropdown-toggle"},Av=["onClick"],Lv={key:4,class:"dropdown"},Ev={"data-bs-toggle":"dropdown",id:"redact-toggle","aria-expanded":"true",class:"pointer margin_5px"},xv={class:"dropdown-menu dropdown-menu-right",role:"menu","aria-labelledby":"redact-toggle"},Pv={class:"timeline-header bg-light"},Rv={class:"hover-card"},Fv={class:"hover-card-content"},Nv={class:"d-flex align-items-center mb-2"},Vv=["src"],jv={class:"ms-2"},Uv={class:"email-wrapper"},Bv={class:"email"},zv={class:"thread_time"},Hv={key:0,class:"thread_time",id:"redactioninfo"},Wv=["id","contentEditable"],qv=["contentEditable"],Kv={class:"mailbox-attachments align-items-stretch clearfix mb-0 clearfixapply"},Yv={key:0},Gv=["innerHTML"],Qv={key:1,class:"d-flex"},Xv={key:3,class:"timeline-footer",id:"editableContent_footer"};function Jv(e,t,a,r,s,i){const d=g("add-media"),m=g("rating-component"),p=g("svg-icon-handler"),f=g("delete-modal"),b=g("elea-ticket-thread-summary"),y=g("faveo-image-element"),D=g("router-link"),w=g("activity-parser"),S=g("attachment"),L=Q("tooltip");return o(),l("div",mv,[M(n("i",{class:N(["timeline-icon",a.thread.thread_type_icon_class])},null,2),[[L,a.thread.thread_type_text]]),s.isEditingInternalNote?(o(),l("div",pv,[n("div",gv,[n("h3",fv,c(e.trans("edit_internal_note")),1)]),n("div",_v,[s.showAddMedia?(o(),I(d,{key:0,attachments:s.attachments,inlineFile:s.inline,description:s.description,id:"focus_editor"+a.thread.id,classname:"col-sm-12",name:"description",onAttach:i.getAttachments,onInline:i.getInlineImages,onInput:i.onChange,page_name:"description"},null,8,["attachments","inlineFile","description","id","onAttach","onInline","onInput"])):u("",!0)]),n("div",bv,[n("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=x=>i.onSubmit())},[t[17]||(t[17]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(i.lang("update")),1)])])])):(o(),l("div",vv,[n("span",yv,[M((o(),l("span",kv,[(o(!0),l(E,null,q(s.ratings,x=>(o(),I(m,{key:x.id,rating:x,labelStyle:s.labelStyle},null,8,["rating","labelStyle"]))),128))])),[[L,i.lang("reply_rating")]]),s.ratings.length>0?(o(),l("span",wv," |  ")):u("",!0),!a.ticketMerged&&a.showThreadActions?(o(),l("div",Cv,[!i.isEmptyContent&&i.hasIsSettingActiveGetter&&(e.isSettingActive("summarize_ticket_key")||e.isSettingActive("translate_ticket_content_key"))&&a.from==="inbox"?(o(),l("div",Sv,[n("div",Dv,[n("a",Tv,[_(p,{StyleCss:"p-0",height:"20",width:"20",color:"#66686a","icon-from":"elea_c_icon"})]),n("ul",Mv,[e.isSettingActive("summarize_ticket_key")?(o(),l("li",Ov,[n("a",{class:"dropdown-item summary-dropdown",onClick:t[1]||(t[1]=x=>i.loadThreadSummarizeModal(e.langKey=""))},[t[18]||(t[18]=n("i",{class:"fas fa-clipboard-list"},null,-1)),k(" "+c(i.lang("summarize_thread")),1)])])):u("",!0),e.isSettingActive("translate_ticket_content_key")?(o(),l("li",{key:1,class:"dropdown-submenu summary-submenu",onClick:t[3]||(t[3]=Ee((...x)=>i.toggleLanguageDropdown&&i.toggleLanguageDropdown(...x),["stop"]))},[n("a",Iv,[t[19]||(t[19]=n("i",{class:"fas fa-language"},null,-1)),k(" "+c(i.lang("translate")),1)]),n("ul",{ref:"languageList",class:"dropdown-menu summary-menu lang-dropdown",style:ne({display:s.showLangDropdown?"block":"none"}),onMouseleave:t[2]||(t[2]=x=>s.showLangDropdown=!1)},[(o(!0),l(E,null,q(s.languages,(x,P)=>(o(),l("li",{key:x.language,class:N({"lang-highlight":P===0})},[n("a",{class:"dropdown-item summary-dropdown",onClick:F=>i.loadThreadSummarizeModal(x.language)},c(x.name),9,Av)],2))),128))],36)])):u("",!0)])])])):u("",!0),a.thread.is_internal!==1&&!a.max?M((o(),l("a",{key:1,class:"pointer margin_5px",onClick:t[4]||(t[4]=x=>i.replyThread(a.thread.body,a.thread.user.name,a.thread.created_at))},t[20]||(t[20]=[n("i",{class:"fas fa-reply"},null,-1)]))),[[L,i.lang("reply_to_this_thread")]]):u("",!0),a.thread.is_internal===1?M((o(),l("a",{key:2,class:"pointer margin_5px",onClick:t[5]||(t[5]=x=>i.editInternalNoteThread(a.thread))},t[21]||(t[21]=[n("i",{class:"fa-solid fa-pen-to-square"},null,-1)]))),[[L,i.lang("edit_internal_note")]]):u("",!0),a.index!==a.total-1&&!a.thread.allows_modification?M((o(),l("a",{key:3,class:"pointer margin_5px",onClick:t[6]||(t[6]=(...x)=>i.deleteThread&&i.deleteThread(...x))},t[22]||(t[22]=[n("i",{class:"fa-solid fa-trash"},null,-1)]))),[[L,a.thread.thread_type==="note"?i.lang("delete_note"):i.lang("delete_reply")]]):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(f,{key:0,modalMessage:s.modalMessage,onClose:i.onClose,alertComponentName:"timeline",showModal:s.showModal,deleteUrl:s.deleteUrl},null,8,["modalMessage","onClose","showModal","deleteUrl"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showSummary?(o(),I(b,{key:0,data:s.threadData,showModal:s.showSummary,translate:s.translateTo,onClose:i.onClose,ticketId:a.ticketId},null,8,["data","showModal","translate","onClose","ticketId"])):u("",!0)]),_:1}),a.showRedaction&&a.pluginStatus?(o(),l("span",Lv,[M((o(),l("a",Ev,t[23]||(t[23]=[n("i",{class:"fas fa-ellipsis-v"},null,-1)]))),[[L,i.lang("redact_to_this_thread")]]),n("div",xv,[n("a",{class:"dropdown-item",href:"javascript:;",onClick:t[7]||(t[7]=x=>i.makeEditable())},c(i.lang("redact")),1)])])):u("",!0)])):u("",!0),a.thread.allows_modification&&a.showThreadActions?(o(),l(E,{key:2},[M((o(),l("a",{class:"pointer margin_5px",onClick:t[8]||(t[8]=Ee(x=>i.editThreadClicked(a.thread),["prevent"]))},t[24]||(t[24]=[n("i",{class:"fas fa-edit"},null,-1)]))),[[L,e.trans("edit")]]),M((o(),l("a",{class:"pointer margin_5px",onClick:t[9]||(t[9]=Ee(x=>i.deleteThreadClicked(a.thread),["prevent"]))},t[25]||(t[25]=[n("i",{class:"fas fa-trash"},null,-1)]))),[[L,e.trans("delete")]])],64)):u("",!0)]),n("h3",Pv,[_(y,{id:"thread_img","source-url":a.thread.user.profile_pic,classes:["img-circle","img-bordered-sm","img-rounder"],"alternative-text":"User Image","img-width":25,"img-height":25},null,8,["source-url"]),t[29]||(t[29]=k("  ")),n("div",Rv,[_(D,{to:"/user/"+this.thread.user.id,id:"thread_head_name",class:"ml-1"},{default:T(()=>[k(c(i.subString(a.thread.user.name)),1)]),_:1},8,["to"]),n("div",Fv,[n("div",Nv,[n("img",{src:a.thread.user.profile_pic,style:{height:"40px",width:"40px","border-radius":"24px",border:"2px solid #3788d8"},alt:"Profile Picture"},null,8,Vv),n("div",jv,[n("div",null,c(i.subString(a.thread.user.name)),1)])]),n("div",Uv,[t[26]||(t[26]=n("i",{class:"fas fa-envelope"},null,-1)),n("span",Bv,c(i.subString(a.thread.user.email)),1)])])]),n("span",zv,[t[27]||(t[27]=k(" -  ")),t[28]||(t[28]=n("i",{class:"far fa-clock"},null,-1)),k(" "+c(r.formattedTime(a.thread.created_at)),1)]),s.isEditing&&a.showThreadActions?(o(),l("p",Hv,[k(c(i.lang("highlight_redact_text"))+" ",1),n("strong",null,c(i.lang("mark_for_redaction_option")),1)])):u("",!0)]),n("div",{class:N(["timeline-body thread_desc w-100",i.bgClass(a.thread.thread_type_text)]),id:"thread_desc_"+a.thread.id,contentEditable:s.isEditing.toString(),onMouseup:t[10]||(t[10]=(...x)=>i.handleSelection&&i.handleSelection(...x))},[_(w,{data:i.updatedBody(a.thread.body)},null,8,["data"])],42,Wv),s.showDropdown&&s.isEditing&&a.showThreadActions?(o(),l("div",{key:0,class:"rounded dropadded",style:ne(i.positionFix)},[n("a",{class:"dropdown-item cursor-pointer px-2 py-1",href:"javascript:;",onClick:t[11]||(t[11]=x=>i.markForRedaction("permanent","thread_desc_"+a.thread.id))},c(i.lang("mark_for_permanent_redaction")),1),n("a",{class:"dropdown-item cursor-pointer px-2 py-1",href:"javascript:;",onClick:t[12]||(t[12]=x=>i.markForRedaction("temporary","thread_desc_"+a.thread.id))},c(i.lang("mark_for_temporary_redaction")),1)],4)):u("",!0),a.thread.attach.length?(o(),l("div",{key:1,class:"timeline-footer",contentEditable:s.isEditing.toString(),onMouseup:t[13]||(t[13]=(...x)=>i.handleSelection&&i.handleSelection(...x))},[n("ul",Kv,[(o(!0),l(E,null,q(a.thread.attach,(x,P)=>(o(),l(E,null,[x.poster==="ATTACHMENT"&&x.temporary_redaction===0&&x.permanent_redaction===0?(o(),I(S,{key:0,attachment:x},null,8,["attachment"])):x.temporary_redaction===1||x.permanent_redaction===1?(o(),l(E,{key:1},[i.isHTMLContent(x.thumbnail_url)?(o(),l("div",Yv,[n("div",{innerHTML:x.thumbnail_url},null,8,Gv)])):(o(),l("div",Qv,[_(S,{attachment:x},null,8,["attachment"])]))],64)):u("",!0)],64))),256))])],40,qv)):u("",!0),s.showPopupUndo&&a.showThreadActions?(o(),l("div",{key:2,style:ne(i.positionFix),id:"popup_undo",class:"rounded dropadded"},[n("a",{class:"dropdown-item redact-dropdown-item",href:"javascript:;",onClick:t[14]||(t[14]=(...x)=>i.viewRedaction&&i.viewRedaction(...x)),id:"viewButton"},c(i.lang("view")),1),n("a",{class:"dropdown-item redact-dropdown-item",href:"javascript:;",onClick:t[15]||(t[15]=(...x)=>i.undoRedaction&&i.undoRedaction(...x)),id:"undoButton"},c(i.lang("undo")),1)],4)):u("",!0),s.isEditing&&a.showThreadActions?(o(),l("div",Xv,[n("button",{type:"button",id:"editableContent_cancelBtn",class:"btn btn-light border btn-sm",onClick:t[16]||(t[16]=(...x)=>i.cancelEditing&&i.cancelEditing(...x))},[t[30]||(t[30]=n("i",{class:"fas fa-times me-1"},null,-1)),k(c(i.lang("cancel")),1)])])):u("",!0)]))])}const Ca=U(hv,[["render",Jv],["__scopeId","data-v-b19e03e9"]]);const Zv={name:"inbox-threads",description:"Inbox Threads Component",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},props:{ticketId:{type:[String,Number],default:""},maximized:{type:Boolean,default:!1},ticketMerged:{type:Boolean,default:!1},pluginStatus:{type:Boolean,default:!1},trigger:{type:String,default:""},showThreadActions:{type:Boolean,default:!0}},data(){return{inboxThreads:[],page:1,showLoader:!1,ticketNum:this.ticketId,refreshThreads:!1,total:null,pluginStatus:"",sort_order:"",showInfinite:!0}},async created(){try{const e=await R.get("api/agent/checkplugin");this.pluginStatus=e.data.data.plugin_status}catch(e){B(e,"inbox-threads")}window.emitter.on("updateTimelineThreads",()=>{this.refreshThreads=!0})},mounted(){this.getData()},watch:{showLoader(e,t){return this.$emit("loaderState",e),this.showLoader=e,e},refreshThreads(e){e===!0&&this.updateLogs(),this.refreshThreads=!1},trigger(e){this.sort_order=e,this.getThreads(void 0,!0,"sort")}},methods:{updateLogs(){this.showLoader=!0,this.inboxThreads=[],this.page=1,this.getThreads(void 0,!0)},getData(e,t=!1){this.getThreads(e,t)},getThreads(e,t=!1,a){this.page,a==="sort"&&(this.page=1,this.page,this.sort_order,this.inboxThreads=[],this.showInfinite=!1,setTimeout(()=>this.showInfinite=!0,0)),this.showLoader=!0,this.ticketNum=this.ticketId?this.ticketId:ke(window.location.pathname);let r=this.page,s=this.sort_order,i=Date.now();const d=Le();let m=Object.entries({page:r,sort:s,time:i,...d}).map(([p,f])=>`${encodeURIComponent(p)}=${encodeURIComponent(f)}`).join("&");R.get("/api/agent/ticket-conversation/"+this.ticketNum+"?"+m).then(p=>{this.total=p.data.data.total,this.sort_order=p.data.data.sort_order,this.$emit("sortOrder",this.sort_order),t?this.inboxThreads=p.data.data.data:this.inboxThreads.push(...p.data.data.data),e&&e.loaded(),p.data.data.data.length<10&&e&&e.complete(),this.page++,this.showLoader=!1}).catch(p=>{B(p,"inbox-threads"),this.inboxThreads=[],this.showLoader=!1})},checkDate(e){if(e==0)return!0;var t=this.formattedDate(this.inboxThreads[e-1].created_at),a=this.formattedDate(this.inboxThreads[e].created_at);if(t!=a)return!0},showThreadEnd(e){return e===this.inboxThreads.length-1},handleScroll(){document.querySelectorAll(".rte-autocomplete.dropdown-menu").forEach(t=>{t.remove()})}},components:{"thread-body":Ca}},$v={class:"inbox-threads",id:"inbox-thread-body"},ey={key:0,class:"timeline"},ty={key:0,class:"time-label"},sy={class:"text-bg-light border"},ay={key:1};function ny(e,t,a,r,s,i){const d=g("thread-body"),m=g("infinite-loading");return o(),l("div",$v,[n("div",{class:N({"scrollable-thread":!a.maximized}),id:"thread_scroll",onScroll:t[0]||(t[0]=(...p)=>i.handleScroll&&i.handleScroll(...p))},[s.inboxThreads?(o(),l("div",ey,[(o(!0),l(E,null,q(s.inboxThreads,(p,f)=>(o(),l(E,{key:"thread"+f},[i.checkDate(f)?(o(),l("div",ty,[n("span",sy,c(r.formattedDate(p.created_at)),1)])):u("",!0),_(d,{pluginStatus:s.pluginStatus,showRedaction:!0,from:"inbox",thread:p,total:s.total,index:f,max:a.maximized,ticketId:a.ticketId,ticketMerged:a.ticketMerged,showThreadActions:a.showThreadActions},null,8,["pluginStatus","thread","total","index","max","ticketId","ticketMerged","showThreadActions"]),i.showThreadEnd(f)?(o(),l("div",ay,t[1]||(t[1]=[n("i",{class:"timeline-icon fas fa-history text-bg-secondary"},null,-1)]))):u("",!0)],64))),128)),s.showInfinite?(o(),I(m,{key:0,onInfinite:i.getData,firstload:!1,ref:"infiniteLoading"},{spinner:T(()=>t[2]||(t[2]=[n("span",null,null,-1)])),complete:T(()=>t[3]||(t[3]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])):u("",!0)])):u("",!0)],34)])}const iy=U(Zv,[["render",ny],["__scopeId","data-v-899be32b"]]);const oy={name:"inbox-ticket-activity-log",description:"Inbox Ticket Activity Log Component",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},props:{ticketId:{type:[String,Number],default:""},maximized:{type:Boolean,default:!1}},data(){return{activityLogs:[],page:1,showLoader:!1,ticketNum:this.ticketId}},beforeMount(){this.getLogs()},created(){window.emitter.on("updateTimelineActivity",this.updateLogs)},watch:{showLoader(e,t){return this.$emit("loaderState",e),this.showLoader=e,e}},methods:{updateLogs(){this.showLoader=!0,this.activityLogs=[],this.page=1,this.getLogs(void 0,!0)},getLogs(e,t=!1){this.showLoader=!0,this.ticketNum=this.ticketId?this.ticketId:ke(window.location.pathname);let a=this.page,r=Date.now();const s=Le();let i=Object.entries({page:a,time:r,...s}).map(([d,m])=>`${encodeURIComponent(d)}=${encodeURIComponent(m)}`).join("&");setTimeout(()=>{R.get("/api/agent/ticket-activity-log/"+this.ticketNum+"?"+i).then(d=>{t?this.activityLogs=d.data.data.data:this.activityLogs.push(...d.data.data.data),e&&e.loaded(),d.data.data.data.length<10&&e&&e.complete(),this.page++,this.activityLogs.forEach(function(m,p){m.text="<div>"+m.text+"</div>"}),this.showLoader=!1}).catch(d=>{B(d,"inbox-threads"),this.activityLogs=[],this.showLoader=!1})},1)},checkDate(e){if(e==0)return!0;var t=this.formattedDate(this.activityLogs[e-1].created_at),a=this.formattedDate(this.activityLogs[e].created_at);if(t!=a)return!0},showThreadEnd(e){return e===this.activityLogs.length-1}},components:{"thread-body":Ca,"activity-parser":ca}},ry={class:"inbox-tic-activity"},ly={key:0,class:"timeline timeline-inverse"},dy={key:0,class:"time-label"},cy={class:"text-bg-light border"},uy={class:"timeline-item"},hy={class:"time"},my={class:"timeline-body",id:"activity	_desc"},py={key:1},gy={key:1},fy={class:"text-center"};function _y(e,t,a,r,s,i){const d=g("activity-parser"),m=g("infinite-loading");return o(),l("div",ry,[n("div",{class:N({"scrollable-log":!a.maximized}),id:"activity_scroll"},[s.activityLogs.length>0?(o(),l("div",ly,[(o(!0),l(E,null,q(s.activityLogs,(p,f)=>(o(),l(E,null,[i.checkDate(f)?(o(),l("div",dy,[n("span",cy,c(r.formattedDate(p.created_at)),1)])):u("",!0),n("div",null,[t[1]||(t[1]=n("i",{class:"far fa-dot-circle timeline-icon"},null,-1)),n("div",uy,[n("span",hy,[t[0]||(t[0]=n("i",{class:"far fa-clock"},null,-1)),k(" "+c(r.formattedTime(p.created_at)),1)]),n("div",my,[_(d,{data:p.text,from:"ticket-activity"},null,8,["data"])])])]),i.showThreadEnd(f)?(o(),l("div",py,t[2]||(t[2]=[n("i",{class:"fas fa-history text-bg-secondary timeline-icon"},null,-1)]))):u("",!0)],64))),256)),_(m,{onInfinite:i.getLogs,ref:"infiniteLoading"},{spinner:T(()=>t[3]||(t[3]=[n("span",null,null,-1)])),complete:T(()=>t[4]||(t[4]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])])):u("",!0),!s.showLoader&&!s.activityLogs.length?(o(),l("div",gy,[n("h6",fy,c(e.trans("no-records")),1)])):u("",!0)],2)])}const by=U(oy,[["render",_y],["__scopeId","data-v-4e9d4365"]]);const vy={name:"associated-ticket-crt",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},data(){return{apiUrl:"",columns:["ticket_number","ticket_title","status","type"],options:{},cardOpen:!1,showTemplate:!1,loading:!0}},props:{ticketId:{type:[String,Number]}},beforeMount(){this.apiUrl="api/agent/associated-tickets?"+Qe({ticket_id:this.ticketId}),this.checkForVisibility();const e=this;this.options={headings:{ticket_number:this.trans("ticket_number"),type:this.trans("parent/child"),ticket_title:this.trans("subject"),status:this.trans("status")},columnsClasses:{ticket_number:"ticket-number",ticket_type_for_crt:"ticket-type-parent-or-child",ticket_title:"ticket-subject",ticket_status:"associated-ticket-status"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{ticket_number:(t,a)=>{let r=a.id;return r?e.h(Ve,{to:"/thread/"+r+"?"+Qe()},a.ticket_number):"--"},status:(t,a)=>{let r=a.status,s=a.status_icon_color;return r?e.h("span",{class:"badge",style:`background-color: ${s}; color: white`},r):"--"}},sortable:["ticket_number"],filterable:!1,pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{sort_field:t.orderBy?t.orderBy:"id",sort_order:t.ascending?"desc":"asc",search_term:t.query,page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data,count:t.data.total}},orderBy:{column:"id",ascending:!0}}},methods:{toggleCard(){this.cardOpen=!this.cardOpen},async checkForVisibility(){try{let{data:e}=await R.get(this.apiUrl+"&count=1&"+Qe());e.data.count&&(this.showTemplate=!0)}catch(e){console.log("Error, while checking visibility of associated tickets",e)}},handelLoader(e){this.loading=e}}},yy={key:0,class:"card card-light"},ky={class:"card-title"},wy={class:"card-tools"},Cy={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},Sy={type:"button",class:"btn btn-tool"},Dy={key:0,class:"card-body",id:"crt-associated-tickets"};function Ty(e,t,a,r,s,i){const d=g("data-table");return s.showTemplate?(o(),l("div",yy,[n("div",{class:"card-header pointer",onClick:t[0]||(t[0]=(...m)=>i.toggleCard&&i.toggleCard(...m))},[n("h3",ky,c(e.trans("ticket_details_associated_tickets")),1),n("div",wy,[s.loading&&s.cardOpen?(o(),l("button",Cy,t[1]||(t[1]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))):u("",!0),n("button",Sy,[n("i",{class:N([{"fas fa-angle-up":s.cardOpen,"fas fa-angle-down":!s.cardOpen},"fs-25"])},null,2)])])]),s.cardOpen?(o(),l("div",Dy,[_(d,{url:s.apiUrl,dataColumns:s.columns,onLoaderState:i.handelLoader,disableLoader:"true",scroll_to:"crt-associated-tickets",option:s.options},null,8,["url","dataColumns","onLoaderState","option"])])):u("",!0)])):u("",!0)}const My=U(vy,[["render",Ty],["__scopeId","data-v-7ff71c83"]]);function Oy(e){const{add_approver:t,approver_comment:a,addRemoveType:r}=e;let s={approver_comment:[a,"isRequired",{"max(250)":"The reason should be less than 250 characters."}]};r==="add"&&(s.add_approver=[t,"isRequired"]);const i=new ye(pe),{errors:d,isValid:m}=i.validate(s);return ve.dispatch("setValidationError",d),{errors:d,isValid:m}}const Iy={name:"approval-progress",description:"Handles Approval Progress of a ticket at any given time",setup(){const e=ue();return{shallApprovalActionsBeVisible:ee(()=>e.getters.getApprovalActionVisibility)}},props:{ticketId:{type:[Number,String],required:!0},actions:{type:Object,default:()=>{}},alertName:{type:String,default:""}},data(){return{modalLoad:!1,showAddRemoveModal:!1,add_approver:"",approver_comment:"",addRemoveLevelId:"",addRemoveType:"",loading:!1,workflowData:[],comment:"",showModal:!1,action:"",cardOpen:!1}},created(){window.emitter.on("approvalWorkflowApplied",this.getDataFromServer)},methods:{closeAddModal(){this.showAddRemoveModal=!1,this.approver_comment="",this.$store.dispatch("unsetValidationError"),this.$store.dispatch("unsetAlert")},isAddRemoveValid(){const{errors:e,isValid:t}=Oy(this.$data);return t},onAddRemoveConfirm(){if(this.isAddRemoveValid()){this.endPoint=this.addRemoveType==="add"?"add-approver":"remove-approver",this.modalLoad=!0;let e={};e.action=this.addRemoveType,e.approver_id=this.addRemoveType==="add"?this.add_approver.id:this.add_approver,e.ticket_id=this.ticketId,e.level_id=this.addRemoveLevelId,e.comment=this.approver_comment,R.post("/api/workflow/"+this.endPoint,e).then(t=>{this.modalLoad=!1,X(t,"timeline"),window.emitter.emit("approvalWorkflowApplied"),window.emitter.emit("workflowUpdated","approval"),this.showAddRemoveModal=!1,this.addRemoveType="",this.addRemoveLevelId="",this.add_approver=""}).catch(t=>{this.modalLoad=!1,B(t,"add_remove_approver")})}},addRemoveApprover(e,t,a=""){this.addRemoveType=e,this.addRemoveLevelId=t,this.add_approver=a,this.showAddRemoveModal=!0},resumeReminder(e){this.loading=!0,R.get("/api/resume-auto-reminder/"+e).then(t=>{this.getDataFromServer(),X(t,"timeline")}).catch(t=>{this.loading=!1,B(t,"timeline")})},stopReminder(e){this.loading=!0,R.get("/api/stop-auto-reminder/"+e).then(t=>{this.getDataFromServer(),X(t,"timeline")}).catch(t=>{this.loading=!1,B(t,"timeline")})},sendReminder(e,t="",a=""){this.loading=!0;let r={};r.type=e,r.ticket_id=this.ticketId,r[e==="level"?"level_id":null]=t,e==="approver"&&(r.user_id=a,r.level_id=t),R.post("/api/send_approval_reminder",r).then(s=>{this.getDataFromServer(),X(s,"timeline")}).catch(s=>{this.loading=!1,B(s,"timeline")})},closeModal(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},subString(e,t=15){return ge(e,t)},toggleCard(){this.cardOpen=!this.cardOpen,this.cardOpen&&this.getDataFromServer()},getDataFromServer(){this.workflowData=[],this.loading=!0,R.get("/api/ticket-approval-status/"+this.ticketId+"?"+Qe()).then(e=>{this.workflowData=e.data.data}).catch(e=>{B(e,"timeline")}).finally(e=>{this.loading=!1})},isValid(){const{errors:e,isValid:t}=yi(this.$data);return!!t},onChange(e,t){this[t]=e},onWorkflowAction(e){this.showModal=!0,this.action=e},getIconStyle(e,t="icon"){switch(e){case"PENDING":return t=="icon"?"glyphicon glyphicon-time text-warning":"#eee";case"APPROVED":return t=="icon"?"glyphicon glyphicon-check text-success":"#cbe0d3";case"DENIED":return t=="icon"?"glyphicon glyphicon-exclamation-sign text-danger":"#f6ddd8";default:return null}},getOpacity(e){return e==1?1:.5},onWorkflowActionConfirm(){this.action!=="remove"?this.isValid()&&(this.loading=!0,R.post("/api/approval-action-without-hash/"+this.ticketId,{action_type:this.action,comment:this.comment}).then(e=>{X(e,this.alertName)}).catch(e=>{B(e)}).finally(e=>{window.emitter.emit("workflowUpdated","approval"),this.showModal=!1,this.action="",this.comment="",this.workflowData=[],this.getDataFromServer()})):(this.loading=!0,R.delete("/api/remove-approval-workflow/"+this.ticketId).then(e=>{X(e,this.alertName),window.emitter.emit("workflowUpdated","approval"),this.showModal=!1,this.action="",this.comment="",this.workflowData=[]}).catch(e=>{B(e)}))},initialActions(){this.showModal=!1,this.action="",this.comment=""}},computed:{modalTitle(){return this.action=="approve"?"approve_ticket":this.action=="remove"?"remove_workflow":"deny_ticket"},modalQuestion(){let e=`${pe("are_you_sure_you_want_to")} ${this.action}?`;return this.action=="remove"?e:`${e} ${pe("mention_a_reason")}`},isProceedButtonDisabled(){return!this.add_approver||!this.approver_comment}},components:{DynamicSelect:_e,Modal:Ot,"text-field":Se}},Ay={class:"card card-light"},Ly={class:"card-title"},Ey={class:"card-tools"},xy={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},Py={type:"button",class:"btn btn-tool"},Ry={key:0,class:"card-body"},Fy={id:"approval-progress",class:"appproval"},Ny={key:0,id:"approval-progress"},Vy=["id"],jy={class:"card-title"},Uy={class:"card-tools approval-tools"},By=["onClick"],zy=["onClick"],Hy={class:"card-body"},Wy={class:"levels"},qy=["id"],Ky={class:"card-title ms-2"},Yy={class:"card-tools toolsKit"},Gy={key:0},Qy=["onClick"],Xy={key:1,class:"btn btn-tool not-cursor p-0"},Jy=["onClick"],Zy={key:3,class:"btn btn-tool not-cursor p-0"},$y={class:"card-body"},e1=["id"],t1={class:"list-group list-group-unbordered"},s1={id:"highlight",class:"list-group-item border-0 p-2p px-2 rounded"},a1={class:"approver-name"},n1={class:"float-end"},i1=["onClick"],o1={key:1,class:"text-dark me-3 not-cursor"},r1=["onClick"],l1={key:3,class:"text-danger me-3 not-cursor"},d1=["id"],c1={class:"list-group list-group-unbordered"},u1={id:"highlight",class:"list-group-item border-0 p-2p px-2 rounded"},h1={class:"approver-name"},m1={class:"float-end"},p1=["onClick"],g1={key:1,class:"text-dark me-3 not-cursor"},f1=["onClick"],_1={key:3,class:"text-danger me-3 not-cursor"},b1={key:1,id:"approval-workflow-actions"},v1={class:"modal-title"},y1={key:1},k1={class:"row"},w1={class:"modal-title"},C1={key:1,class:"row"},S1=["disabled"];function D1(e,t,a,r,s,i){const d=g("alert"),m=g("reuse-loader"),p=g("text-field"),f=g("modal"),b=g("dynamic-select"),y=Q("tooltip"),D=Q("focus-first-input");return o(),l("div",Ay,[n("div",{class:"card-header pointer",onClick:t[0]||(t[0]=(...w)=>i.toggleCard&&i.toggleCard(...w))},[n("h3",Ly,c(e.lang("approval_progress")),1),n("div",Ey,[s.loading&&s.cardOpen?M((o(),l("button",xy,t[6]||(t[6]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[y,e.lang("refresh")]]):u("",!0),n("button",Py,[n("i",{class:N([{"fas fa-angle-up":s.cardOpen,"fas fa-angle-down":!s.cardOpen},"fs-25"])},null,2)])])]),s.cardOpen?(o(),l("div",Ry,[n("div",Fy,[s.loading?u("",!0):(o(),l("div",Ny,[(o(!0),l(E,null,q(s.workflowData,(w,S)=>(o(),l("div",{class:"card",key:"workflow"+S,id:"approval-progress-element-"+S,style:ne({"border-color":i.getIconStyle(w.status,"color")})},[n("div",{class:"card-header",style:ne({"background-color":i.getIconStyle(w.status,"color")})},[n("h3",jy,c(w.name),1),n("div",Uy,[w.status=="PENDING"?(o(),l(E,{key:0},[w.send_auto_reminders?u("",!0):M((o(),l("button",{key:0,class:"btn btn-tool",onClick:L=>i.resumeReminder(w.id)},t[7]||(t[7]=[n("i",{class:"fas fa-play"},null,-1)]),8,By)),[[y,e.trans("resume_reminder")]]),w.send_auto_reminders?M((o(),l("button",{key:1,class:"btn btn-tool",onClick:L=>i.stopReminder(w.id)},t[8]||(t[8]=[n("i",{class:"fas fa-stop"},null,-1)]),8,zy)),[[y,e.trans("stop_reminder")]]):u("",!0)],64)):u("",!0),M(n("button",{class:N(["btn btn-tool",i.getIconStyle(w.status)])},null,2),[[y,w.status]])])],4),n("div",Hy,[n("div",Wy,[(o(!0),l(E,null,q(w.approval_levels,(L,x)=>(o(),l("div",{class:"approval-level",id:"approval-level-"+x,style:ne({opacity:i.getOpacity(L.is_active)})},[n("div",{class:"card",style:ne({"border-color":i.getIconStyle(L.status,"color")})},[n("div",{class:"card-header",style:ne({"background-color":i.getIconStyle(L.status,"color")})},[n("h3",Ky,c(L.name),1),n("div",Yy,[L.status=="PENDING"?(o(),l("div",Gy,[L.is_active?M((o(),l("button",{key:0,class:"btn btn-tool p-0",onClick:P=>i.sendReminder("level",L.id)},t[9]||(t[9]=[n("i",{class:"fas fa-paper-plane pe-2"},null,-1)]),8,Qy)),[[y,e.trans("send_reminder")]]):M((o(),l("button",Xy,t[10]||(t[10]=[n("i",{class:"fas fa-paper-plane pe-2"},null,-1)]))),[[y,e.trans("cant_send_reminder_level")]]),L.is_active?M((o(),l("button",{key:2,class:"btn btn-tool p-0",onClick:P=>i.addRemoveApprover("add",L.id)},t[11]||(t[11]=[n("i",{class:"fas fa-plus"},null,-1)]),8,Jy)),[[y,e.trans("add_approver")]]):u("",!0),L.is_active?u("",!0):M((o(),l("button",Zy,t[12]||(t[12]=[n("i",{class:"fas fa-plus"},null,-1)]))),[[y,e.trans("you_cant_add_approver")]]),M(n("button",{class:N(["btn btn-tool",[i.getIconStyle(L.status)]])},null,2),[[y,L.status]])])):u("",!0)])],4),n("div",$y,[(o(!0),l(E,null,q(L.approve_users,(P,F)=>(o(),l("div",{id:"level-user-"+F},[n("ul",t1,[n("li",s1,[n("span",a1,c(P.name)+"    ",1),n("span",n1,[P.status=="PENDING"?(o(),l(E,{key:0},[L.is_active?M((o(),l("a",{key:0,href:"javascript:;",class:"text-dark me-3",onClick:O=>i.sendReminder("approver",L.id,P.id)},t[13]||(t[13]=[n("i",{class:"fas fa-paper-plane"},null,-1)]),8,i1)),[[y,e.trans("send_reminder")]]):M((o(),l("a",o1,t[14]||(t[14]=[n("i",{class:"fas fa-paper-plane"},null,-1)]))),[[y,e.trans("cant_send_reminder_approver")]]),L.is_active?M((o(),l("a",{key:2,class:"text-danger me-3",href:"javascript:;",onClick:O=>i.addRemoveApprover("remove",L.id,P.id)},t[15]||(t[15]=[n("i",{class:"fas fa-times"},null,-1)]),8,r1)),[[y,e.trans("remove_approver")]]):u("",!0),L.is_active?u("",!0):M((o(),l("a",l1,t[16]||(t[16]=[n("i",{class:"fas fa-times"},null,-1)]))),[[y,e.trans("you_cant_remove_approver")]])],64)):u("",!0),M(n("span",{class:N(["approver-status",i.getIconStyle(P.status)])},null,2),[[y,P.status]])])])])],8,e1))),256)),(o(!0),l(E,null,q(L.approve_user_types,(P,F)=>(o(),l("div",{id:"level-user-type-"+F},[n("ul",c1,[n("li",u1,[M((o(),l("span",h1,[k(c(i.subString(e.lang(P.name),25)),1)])),[[y,e.lang(P.name)]]),n("span",m1,[P.status=="PENDING"?(o(),l(E,{key:0},[L.is_active?M((o(),l("a",{key:0,href:"javascript:;",class:"text-dark me-3",onClick:O=>i.sendReminder("approver",L.id,P.id)},t[17]||(t[17]=[n("i",{class:"fas fa-paper-plane"},null,-1)]),8,p1)),[[y,e.trans("send_reminder")]]):M((o(),l("a",g1,t[18]||(t[18]=[n("i",{class:"fas fa-paper-plane"},null,-1)]))),[[y,e.trans("cant_send_reminder_approver_type")]]),L.is_active?M((o(),l("a",{key:2,class:"text-danger me-3",href:"javascript:;",onClick:O=>i.addRemoveApprover("remove",L.id,P.id)},t[19]||(t[19]=[n("i",{class:"fas fa-times"},null,-1)]),8,f1)),[[y,e.trans("remove_approver_type")]]):u("",!0),L.is_active?u("",!0):M((o(),l("a",_1,t[20]||(t[20]=[n("i",{class:"fas fa-times"},null,-1)]))),[[y,e.trans("you_cant_remove_approver_type")]])],64)):u("",!0),M(n("span",{class:N(["approver-status",i.getIconStyle(P.status)])},null,2),[[y,P.status]])])])])],8,d1))),256))])],4)],12,qy))),256))])])],12,Vy))),128))])),s.loading?u("",!0):(o(),l("div",b1,[r.shallApprovalActionsBeVisible?(o(),l("button",{key:0,class:"btn btn-primary",id:"approve-button",onClick:t[1]||(t[1]=w=>i.onWorkflowAction("approve")),name:"button"},[t[21]||(t[21]=n("span",{class:"glyphicon glyphicon-ok"},null,-1)),k(" "+c(e.lang("approve")),1)])):u("",!0),r.shallApprovalActionsBeVisible?(o(),l("button",{key:1,class:"btn btn-light btn-light",id:"deny-button",onClick:t[2]||(t[2]=w=>i.onWorkflowAction("deny")),name:"button"},[t[22]||(t[22]=n("span",{class:"glyphicon glyphicon-remove"},null,-1)),k(" "+c(e.lang("deny")),1)])):u("",!0),a.actions.remove_approval_workflow?(o(),l("button",{key:2,class:"btn btn-light",id:"remove-button",onClick:t[3]||(t[3]=w=>i.onWorkflowAction("remove")),name:"button"},[t[23]||(t[23]=n("span",{class:"fas fa-trash"},null,-1)),k(" "+c(e.lang("remove")),1)])):u("",!0)])),s.showModal?(o(),I(f,{key:2,showModal:!0,onClose:()=>s.showModal=!1},{title:T(()=>[n("h4",v1,c(e.lang(i.modalTitle)),1)]),alert:T(()=>[_(d)]),fields:T(()=>[s.loading?(o(),I(m,{key:0})):u("",!0),s.loading?u("",!0):(o(),l("span",y1,c(e.lang(i.modalQuestion)),1)),M((o(),l("div",k1,[!s.loading&&s.action!=="remove"?(o(),I(p,{key:0,id:"textarea",label:e.lang("comment"),value:s.comment,type:"textarea",name:"comment",onChange:i.onChange,classname:"col-sm-12",required:!0},null,8,["label","value","onChange"])):u("",!0)])),[[D]])]),controls:T(()=>[n("button",{id:"approval-action-confirm",type:"button",onClick:t[4]||(t[4]=w=>i.onWorkflowActionConfirm()),class:"btn btn-primary"},[t[24]||(t[24]=n("i",{class:"glyphicon glyphicon-ok","aria-hidden":"true"},null,-1)),k(" "+c(e.lang("confirm")),1)])]),_:1},8,["onClose"])):u("",!0),s.showAddRemoveModal?(o(),I(f,{key:3,showModal:!0,onClose:i.closeAddModal,containerStyle:e.containerStyle},{title:T(()=>[n("h4",w1,c(s.addRemoveType==="add"?e.lang("add_approver"):e.lang("remove_approver")),1)]),alert:T(()=>[_(d,{componentName:"add_remove_approver"})]),fields:T(()=>[s.modalLoad?(o(),I(m,{key:0})):(o(),l("div",C1,[s.addRemoveType==="add"?(o(),I(b,{key:0,label:e.lang("approver"),value:s.add_approver,onChange:i.onChange,name:"add_approver",apiEndpoint:"/api/dependency/users?meta=true",multiple:!1,classname:"col-md-12",strlength:"50",required:!0},null,8,["label","value","onChange"])):u("",!0),_(p,{id:"textarea",label:e.lang("reason"),value:s.approver_comment,autofocus:s.addRemoveType!="add",type:"textarea",name:"approver_comment",onChange:i.onChange,classname:"col-sm-12",required:!0},null,8,["label","value","autofocus","onChange"])]))]),controls:T(()=>[n("button",{type:"button",onClick:t[5]||(t[5]=w=>i.onAddRemoveConfirm()),class:"btn btn-primary",disabled:i.isProceedButtonDisabled},[t[25]||(t[25]=n("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)),k(" "+c(e.lang("proceed")),1)],8,S1)]),_:1},8,["onClose","containerStyle"])):u("",!0)])])):u("",!0)])}const T1=U(Iy,[["render",D1],["__scopeId","data-v-8938d261"]]),M1={props:{id:{type:[String,Number],required:!0},actions:{type:Object,default:()=>{}}},data(){return{counter:0}},created(){window.emitter.on("approvalWorkflowApplied",this.updateData)},methods:{updateData(){this.counter+=1}},components:{"approval-progress":T1}},O1={class:"inbox-approval"};function I1(e,t,a,r,s,i){const d=g("approval-progress");return o(),l("div",O1,[(o(),I(d,{ticketId:a.id,actions:a.actions,alertName:"timeline",key:"approval"+s.counter},null,8,["ticketId","actions"]))])}const A1=U(M1,[["render",I1]]);const L1={name:"record-row",description:"Time track table row component",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},props:{track:{type:Object,default:()=>{}},current:{type:[Number,String],default:""},reloadData:{type:Function}},components:{"record-event":ka},data(){return{show:null,showModal:!1,deleteTrack:!1,editTrack:!1,trackData:{},paramsObj:{},curPage:this.current}},methods:{showButton(e){this.show=e},hideButton(e){this.show=null},editTimeTrack(e){this.trackData=e,this.editTrack=!0,this.showModal=!0},onClose(){this.paramsObj.page=this.curPage,this.showModal=!1,this.deleteTrack=!1,this.editTrack=!1,this.trackData="",this.$store.dispatch("unsetValidationError")},getDeleteId(e){this.trackData=e,this.deleteTrack=!0,this.showModal=!0}}},E1={key:0},x1={class:"mailbox-name",style:{"border-bottom":"1px solid #f4f4f4","border-top":"none !important"}},P1={for:"Time and amount details"},R1={class:"row-label"},F1={key:0},N1={style:{"font-weight":"bold"}},V1={key:0,class:"float-end"},j1={for:"description"},U1={style:{"word-wrap":"break-word"}},B1={for:"created time details",style:{"margin-top":"-15px"}},z1={id:"span"},H1={id:"span"},W1={key:0,id:"span"},q1=["href"];function K1(e,t,a,r,s,i){const d=g("router-link"),m=g("record-event");return a.track?(o(),l("tbody",E1,[n("tr",{style:{background:"none !important"},id:"row",onMouseenter:t[3]||(t[3]=p=>i.showButton(a.track.id)),onMouseleave:t[4]||(t[4]=p=>i.hideButton(a.track.id))},[n("td",x1,[n("div",P1,[n("label",R1,[a.track.user?(o(),l("span",F1,[_(d,{to:"/agent/"+a.track.user.id,target:"_blank"},{default:T(()=>[k(c(a.track.user.full_name),1)]),_:1},8,["to"]),t[5]||(t[5]=n("span",{style:{color:"#bab8b8","font-size":"12px","font-weight":"normal"}}," logged ",-1))])):u("",!0),n("a",{href:"javascript:;",onClick:t[0]||(t[0]=p=>i.editTimeTrack(a.track))},[k(c(e.lang("worktime"))+" ",1),t[6]||(t[6]=n("span",{style:{color:"#bab8b8","font-size":"12px","font-weight":"normal"}}," (hr:min) :   ",-1))])]),n("span",N1,c(Math.floor(a.track.work_time/60)<10?"0"+Math.floor(a.track.work_time/60):Math.floor(a.track.work_time/60))+":"+c(a.track.work_time%60<10?"0"+a.track.work_time%60:a.track.work_time%60),1),t[9]||(t[9]=k("   ")),s.show===a.track.id?(o(),l("div",V1,[n("button",{id:"btn",class:"btn btn-primary btn-sm",onClick:t[1]||(t[1]=p=>i.editTimeTrack(a.track))},t[7]||(t[7]=[n("i",{class:"far fa-edit"},null,-1)])),n("button",{id:"del",class:"btn btn-secondary btn-sm",onClick:t[2]||(t[2]=p=>i.getDeleteId(a.track))},t[8]||(t[8]=[n("i",{class:"fas fa-trash"},null,-1)]))])):u("",!0)]),n("div",j1,[n("p",U1,c(e.trans(a.track.description)),1)]),n("div",B1,[n("span",z1,c(e.trans("created_on"))+": "+c(r.formattedTime(a.track.created_at))+" ",1),t[10]||(t[10]=k("   ")),n("span",H1,c(e.trans("modified_on"))+": "+c(r.formattedTime(a.track.updated_at))+" ",1),a.track.worktime_type?(o(),l("span",W1,[n("a",{href:"worktime-type/"+a.track.worktime_type.id},c(e.trans("worktime_type"))+": "+c(a.track.worktime_type.name),9,q1)])):u("",!0)])])],32),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(m,{key:0,onClose:i.onClose,showModal:s.showModal,trackData:s.trackData,deleteTrack:s.deleteTrack,editTrack:s.editTrack,updateData:a.reloadData},null,8,["onClose","showModal","trackData","deleteTrack","editTrack","updateData"])):u("",!0)]),_:1})])):u("",!0)}const Y1=U(L1,[["render",K1],["__scopeId","data-v-9f2a09ae"]]);const G1={name:"timetrack-event",description:"time track table page",props:{id:{type:[String,Number],default:""}},data(){return{loading:!0,data:[],per_page:null,total:null,pagination:1,paramsObj:{},totalTime:null,cardOpen:!1}},created(){window.emitter.on("refreshTimeTrack",this.updateTableData)},methods:{toggleCard(){this.cardOpen=!this.cardOpen,this.cardOpen&&this.getTableData()},updateData(){this.getTableData()},updateTableData(){this.loading=!0,this.pagination=1,this.getTableData()},getTableData(e){this.loading=!0;var t;t=Qe(e),R.get("ticket/"+this.id+"/time-track?"+t).then(a=>{this.loading=!1,this.data=a.data.data.data,this.per_page=a.data.data.per_page,this.total=a.data.data.total;var r=this.data.map(s=>s.work_time);this.totalTime=r.reduce((s,i)=>s+i)}).catch(a=>{this.loading=!1,B(a)})},pageChanged(){this.paramsObj.page=this.pagination,this.getTableData(this.paramsObj);var e=document.getElementById("time-track-list");e.scrollIntoView({behavior:"smooth"})}},components:{"table-row":Y1}},Q1={class:"card card-light"},X1={class:"card-title"},J1={class:"card-tools"},Z1={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},$1={type:"button",class:"btn btn-tool"},ek={key:0,class:"card-body",id:"time-track-list"},tk={class:"table table-striped"},sk={key:1},ak={style:{background:"none !important"}},nk={class:"mailbox-name"},ik={class:"ticket_subject"},ok={style:{"font-weight":"bold"}},rk={for:"Time and amount details",style:{"margin-bottom":"5px"}},lk={style:{color:"#878686"}},dk={style:{"font-weight":"bold"}},ck={key:2,class:"pull-right"},uk={key:0},hk={style:{"text-align":"center"}};function mk(e,t,a,r,s,i){const d=g("table-row"),m=g("uib-pagination"),p=Q("tooltip");return o(),l("div",Q1,[n("div",{class:"card-header pointer",onClick:t[0]||(t[0]=(...f)=>i.toggleCard&&i.toggleCard(...f))},[n("h3",X1,c(e.trans("time-track")),1),n("div",J1,[s.loading&&s.cardOpen?M((o(),l("button",Z1,t[3]||(t[3]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[p,e.lang("refresh")]]):u("",!0),n("button",$1,[n("i",{class:N([{"fas fa-angle-up":s.cardOpen,"fas fa-angle-down":!s.cardOpen},"fs-25"])},null,2)])])]),s.cardOpen?(o(),l("div",ek,[n("table",tk,[s.total>0?(o(!0),l(E,{key:0},q(s.data,f=>(o(),I(d,{key:f.id,track:f,current:s.pagination,reloadData:i.updateData},null,8,["track","current","reloadData"]))),128)):u("",!0),s.total>0?(o(),l("tbody",sk,[n("tr",ak,[n("td",nk,[n("div",ik,[n("h4",ok,c(e.lang("total")),1),n("div",rk,[n("label",null,[n("a",lk,[k(c(e.lang("worktime"))+" ",1),t[4]||(t[4]=n("span",{style:{color:"#bab8b8","font-size":"12px","font-weight":"normal"}}," (hr:min) :  ",-1))])]),n("span",dk,c(Math.floor(s.totalTime/60)<10?"0"+Math.floor(s.totalTime/60):Math.floor(s.totalTime/60))+":"+c(s.totalTime%60<10?"0"+s.totalTime%60:s.totalTime%60),1),t[5]||(t[5]=k("   "))])])])])])):u("",!0),s.total>10?(o(),l("div",ck,[_(m,{records:s.total,modelValue:s.pagination,"onUpdate:modelValue":t[1]||(t[1]=f=>s.pagination=f),class:"pagination","boundary-links":!0,"per-page":s.per_page,onPaginate:t[2]||(t[2]=f=>i.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"])])):u("",!0)]),s.total==0?(o(),l("div",uk,[n("p",hk,c(e.lang("no-data-to-show")),1)])):u("",!0)])):u("",!0)])}const pk=U(G1,[["render",mk],["__scopeId","data-v-bf4462a4"]]),gk={name:"inbox-associates",description:"Inbox Assciates Component",setup(){const e=ue();return{getTicketActions:ee(()=>e.getters.getTicketActions)}},props:{ticketId:{type:[String,Number],default:""},ticketData:{type:Object,default:()=>{}}},created(){window.emitter.on("updateTimelineActivity",()=>{this.refreshKey++})},data(){return{refreshKey:Math.floor(Math.random()*1e4+1)}},methods:{scrollCurrent(e="inbox-associates",t=140){return ua(e,t)},timelineTabVisible(){this.getTicketActions&&window.emitter.emit("ticket-tab-mounted",{...this.getTicketActions,disableLoader:"true"})},timelineBoxVisibleTasks(){window.emitter.emit("ticket-timeline-mounted-tasks",this.ticketId)},timelineBoxVisible(){window.emitter.emit("ticket-timeline-boxes-mounted",this.ticketData)}},components:{"ticket-approval-progress":A1,"ticket-time-track":pk,"associated-tickets":My}},fk={id:"inbox-associates"},_k={id:"timeline-tab"},bk={id:"timeline-display-box-tasks"},vk={id:"timeline-boxes"};function yk(e,t,a,r,s,i){const d=g("ticket-approval-progress"),m=g("ticket-time-track"),p=g("associated-tickets");return o(),l("div",fk,[r.getTicketActions.view_approval_progress?(o(),I(d,{key:0,actions:r.getTicketActions,id:a.ticketId},null,8,["actions","id"])):u("",!0),r.getTicketActions.time_track_enabled?(o(),I(m,{key:1,id:a.ticketId},null,8,["id"])):u("",!0),(o(),I(p,{"ticket-id":a.ticketId,key:s.refreshKey},null,8,["ticket-id"])),n("div",_k,c(i.timelineTabVisible()),1),n("div",bk,c(i.timelineBoxVisibleTasks()),1),n("div",vk,c(i.timelineBoxVisible()),1)])}const kk=U(gk,[["render",yk]]);const wk={name:"inbox-reply",description:"Inbox Reply Component",setup(){const e=ue();return{getTicketActions:ee(()=>e.getters.getTicketActions)}},props:{id:{type:[String,Number],default:""},user:{type:Object,default:()=>{}},ticket:{type:Object,default:()=>{}},ccArray:{type:[Array,String],default:()=>[]},updateThreads:{type:Function}},data(){return{type:"reply",worktime:0,worktime_type:"",reply:"",to:this.user,cc:this.ccArray,response:"",attachments:[],inline:[],isDisabled:!1,loading:!1,formStyle:{width:"40%"},fieldLoader:!1,replyZindex:!1,resetCC:0,showCanned:!1,rules:"",panel:"agent",notify_department:[],notify_agent:[],notify_team:[],statusList:"",lang_locale:""}},beforeMount(){this.lang_locale=this.appLanguage},watch:{user(e,t){this.to=e}},created(){this.getStatusList(),window.emitter.on("updateContent",this.updateReply),window.emitter.on("fileModal",this.getModal),window.emitter.on("changeStatusAndReply",this.onSubmit)},methods:{subString(e,t=15){return ge(e,t)},displaySupportSession(){window.emitter.emit("support-session-renderer",{ticket:this.ticket})},displayRedaction(){window.emitter.emit("redaction-box-mounted",{ticket:this.ticket})},toggleCanned(){this.showCanned=!this.showCanned},getModal(e){this.replyZindex=e},updateReply(e){this.reply=e.content,document.body.classList.remove("overflow-hidden")},isMail(e,t,a){var r=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,20}$/;return r.test(e.email?e.email:e.name)},onChange(e,t){this[t]=e,t=="cc"&&(e.length?this.rules=e.every(this.isMail)?"":"email":this.rules=""),t=="response"&&(e?R.get("/get-canned-response-message/"+e.id+"/"+this.id).then(a=>{this.reply=a.data.data.message+this.reply.replace("<p id='extra_p'>&nbsp;</p>",""),this.attachments=a.data.data.attachments}).catch(a=>{this.reply="",this.attachments=[]}):(this.reply="",this.attachments=[]))},isValid(){const{errors:e,isValid:t}=ki(this.$data);return!!t},getAttachments(e){this.attachments=e},getInlineImages(e){this.inline=e},onSubmit(e){if(this.worktime_type=this.worktime_type||"",this.isValid()){this.loading=!0,this.isDisabled=!0,this.worktime!=0&&this.saveTimeTrack(),this.addInlineStyles(),this.getNotifyIds();const t={};t.content=this.reply,t.attachment=this.attachments,t.ticket_id=this.id,t.to=[this.to.id],this.cc.length>0?t.cc=this.cc.map(a=>a.hasOwnProperty("email")&&a.email?a.email:a.name):t.cc=[],t.notify_department=this.notify_department.length?this.notify_department.toString():"",t.notify_team=this.notify_team.length?this.notify_team.toString():"",t.notify_agent=this.notify_agent.length?this.notify_agent.toString():"",R.post("api/thread/reply/"+this.id,t).then(a=>{this.initialState(),e==="sendReply"&&X(a,"timeline"),window.emitter.emit("refreshTableAndData",!0),this.updateThreads("reply"),(e==="statusChange"||e==="sendReply")&&window.emitter.emit("closeReplyBox"),this.resetCC+=1}).catch(a=>{this.loading=!1,this.isDisabled=!1,B(a,"timeline")})}},initialState(){this.loading=!1,this.isDisabled=!1,this.reply="",this.to=this.ticket.user,this.attachments=[],this.response="",this.worktime=0,this.fieldLoader=!0,setTimeout(()=>{this.fieldLoader=!1},1)},saveTimeTrack(){const e={};e.work_time=this.worktime,e.entrypoint="reply",this.worktime_type&&(e.worktime_type=this.worktime_type.id),R.post("ticket/"+this.id+"/time-track",e).then(t=>{this.worktime=0,this.worktime_type="",window.emitter.emit("refreshTimeTrack")}).catch(t=>{this.worktime=0,this.worktime_type=""})},getNotifyIds(){var e=new DOMParser,t=e.parseFromString(this.reply,"text/html");t.getElementsByTagName("body")[0].querySelectorAll('[title="mention_link"]').forEach(s=>{let d=s.href.replace(this.basePath(),"").split("/").filter(m=>m);d[d.length-2]=="user"&&this.notify_agent.push(d[d.length-1]),d[d.length-2]=="department"&&this.notify_department.push(d[d.length-1]),d[d.length-2]=="team"&&this.notify_team.push(d[d.length-1])})},addInlineStyles(){this.reply=this.reply.replace(/<td([^>]*)>/g,(e,t)=>{const a=/style\s*=\s*["']([^"']*)["']/.test(t),r=/padding\s*:\s*[^;]+/.test(t);return a?r?e:e.replace(/style\s*=\s*["']([^"']*)["']/,(s,i)=>`style="${i} padding: 6.4px;"`):`<td${t} style="padding: 6.4px;">`}).replace(/<table([^>]*)>/g,(e,t)=>{const a=/style\s*=\s*["']([^"']*)["']/.test(t),r=/border\s*=\s*["']([^"']*)["']/.test(t);return a?e.replace(/style\s*=\s*["']([^"']*)["']/,(s,i)=>`style="${i} border-collapse: collapse;" ${r?"":'border="1"'}`):`<table${t} style="border-collapse: collapse;" ${r?"":'border="1"'}>`})},getStatusList(){this.statusList="",this.loading=!0;const e=[];e.push(this.id);let t={meta:!0,supplements:e,limit:"all"};R.get("/api/dependency/statuses",{params:t}).then(a=>{this.loading=!1,this.statusList=a.data.data.statuses}).catch(a=>{this.loading=!1})},onStatusSubmit(e){if(this.isValid()){this.loading=!0,this.isDisabled=!0;const t=Date.now().toString();R.post("/ticket/change-status/"+this.id+"/"+e.id,{comment:"","as-reply":!1,uniqueKey:t}).then(a=>{X(a,"timeline"),this.onSubmit("statusChange")}).catch(a=>{this.loading=!1,this.isDisabled=!1,a.response.status===302?(window.emitter.emit("closeReplyBox"),window.emitter.emit("showEditTicketModaltimeline","inboxReply"),this.$store.dispatch("setAlert",{type:"danger",message:a.response.data.message,component_name:"faveo-form"})):(window.emitter.emit("closeReplyBox"),B(a,"timeline"))})}}},components:{"add-media":it,"time-field":ls,"dynamic-select":_e}},Ck={class:"card-header"},Sk={class:"card-title"},Dk={class:"card-tools d-flex"},Tk={id:"support-session-view"},Mk={id:"redaction-view"},Ok={class:"card-body"},Ik={class:"row"},Ak={class:"row"},Lk={key:3,class:"col-sm-6 load_margin"},Ek={class:"row"},xk={key:0},Pk={class:"card-footer"},Rk={class:"btn-group"},Fk=["disabled"],Nk=["disabled"],Vk={class:"dropdown-menu min-content-width"},jk=["onClick"];function Uk(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("time-field"),p=g("reuse-loader"),f=g("add-media"),b=g("custom-loader"),y=Q("tooltip");return o(),l("div",{class:N(["card card-light",{"reply-card":!s.replyZindex}])},[n("div",Ck,[n("h3",Sk,c(e.trans("reply")),1),n("div",Dk,[n("div",Tk,c(i.displaySupportSession()),1),s.showCanned?(o(),l("button",{key:0,class:"btn btn-light btn-sm",onClick:t[0]||(t[0]=(...D)=>i.toggleCanned&&i.toggleCanned(...D))},[t[3]||(t[3]=n("i",{class:"fas fa-minus"},null,-1)),k(" "+c(e.trans("hide_canned_response")),1)])):(o(),l("button",{key:1,class:"btn btn-light btn-sm",onClick:t[1]||(t[1]=(...D)=>i.toggleCanned&&i.toggleCanned(...D))},[t[4]||(t[4]=n("i",{class:"glyphicon glyphicon-plus"},null,-1)),k(" "+c(e.trans("add_canned_response")),1)])),n("div",Mk,c(i.displayRedaction()),1)])]),n("div",Ok,[n("div",Ik,[_(d,{label:e.trans("to"),name:"to",value:s.to,onChange:i.onChange,disabled:!0,strlength:30,multiple:!1,classname:"col-sm-6",clearable:!1,optionLabel:"meta_name"},null,8,["label","value","onChange"]),(o(),I(d,{label:e.trans("cc"),name:"cc",value:s.cc,onChange:i.onChange,taggable:!0,close_on_select:!0,apiEndpoint:"/api/dependency/users?meta=true",multiple:!0,strlength:30,classname:"col-sm-6 cc_field",rules:s.rules,key:s.resetCC},null,8,["label","value","onChange","rules"]))]),n("div",Ak,[s.showCanned?(o(),I(d,{key:0,label:e.trans("response"),name:"response",value:s.response,onChange:i.onChange,strlength:30,multiple:!1,classname:"col-sm-6",apiEndpoint:"/api/dependency/canned-responses"},null,8,["label","value","onChange"])):u("",!0),r.getTicketActions.show_thread_worktime&&!s.fieldLoader?(o(),I(m,{key:1,label:e.trans("worktime"),formStyle:s.formStyle,value:s.worktime,type:"number",name:"worktime",onChange:i.onChange,classname:"col-sm-6",required:r.getTicketActions.require_thread_worktime},null,8,["label","formStyle","value","onChange","required"])):u("",!0),r.getTicketActions.show_worktime_type&&!s.fieldLoader&&s.worktime?(o(),I(d,{key:2,label:e.trans("worktime_type"),name:"worktime_type",value:s.worktime_type,onChange:i.onChange,strlength:30,multiple:!1,classname:"col-sm-6",apiEndpoint:"api/worktime-type-list",required:r.getTicketActions.require_worktime_type_field&&s.worktime},null,8,["label","value","onChange","required"])):u("",!0),r.getTicketActions.show_thread_worktime&&s.fieldLoader?(o(),l("div",Lk,[_(p,{size:30,duration:4e3})])):u("",!0)]),n("div",Ek,[_(f,{type:s.type,attachments:s.attachments,inlineFile:s.inline,description:s.reply,id:"focus_editor",classname:"col-sm-12",name:"reply",onAttach:i.getAttachments,onInline:i.getInlineImages,onInput:i.onChange,page_name:"reply"},null,8,["type","attachments","inlineFile","description","onAttach","onInline","onInput"])]),s.loading?(o(),l("div",xk,[_(b,{size:60,duration:4e3})])):u("",!0)]),n("div",Pk,[n("div",Rk,[n("button",{type:"button",class:N(["btn btn-primary",{"right-margin-0":s.lang_locale!=="ar","border-line-left":s.lang_locale==="ar"}]),onClick:t[2]||(t[2]=D=>i.onSubmit("sendReply")),disabled:s.isDisabled},[t[5]||(t[5]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(e.trans("send_reply")),1)],10,Fk),n("button",{type:"button",class:N(["btn btn-primary dropdown-toggle dropdown-toggle-split border-line-left",{"right-margin-0 border-line-left":s.lang_locale==="ar"}]),disabled:s.isDisabled,"data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t[6]||(t[6]=[n("span",{class:"sr-only"},null,-1)]),10,Nk),n("div",Vk,[(o(!0),l(E,null,q(s.statusList,D=>M((o(),l("a",{class:"dropdown-item","data-test-id":"submit-button",onClick:w=>i.onStatusSubmit(D),href:"javascript:;"},[n("i",{style:ne({color:D.icon_color}),class:N(D.icon)},null,6),k(" "+c(e.lang("send_and_set_status_as")+" "+i.subString(D.name,8)),1)],8,jk)),[[y,e.lang("send_and_set_status_as")+" "+D.name]])),256))])])])],2)}const Bk=U(wk,[["render",Uk],["__scopeId","data-v-083abb2e"]]);function zk(e){const{internal_note:t,worktime:a,worktime_type:r}=e;let s={internal_note:[t,"isRequired"]},i=ve.getters.getTicketActions;i.show_thread_worktime&&i.require_thread_worktime&&(s.worktime=[a,"isRequired","minValue(1)"]),i.show_worktime_type&&i.require_worktime_type_field&&a&&(s.worktime_type=[r,"isRequired"]);const d=new ye(pe),{errors:m,isValid:p}=d.validate(s);return ve.dispatch("setValidationError",m),{errors:m,isValid:p}}const Hk={name:"inbox-notes",description:"Inbox Internal Notes Component",setup(){const e=ue();return{getTicketActions:ee(()=>e.getters.getTicketActions)}},props:{id:{type:[String,Number],default:""},updateThreads:{type:Function}},data(){return{worktime:0,worktime_type:"",internal_note:"",loading:!1,formStyle:{width:"40%"},fieldLoader:!1,attachments:[],inline:[],counter:0,replyZindex:!1,notify_department:[],notify_agent:[],notify_team:[],showCanned:!1}},created(){window.emitter.on("fileModal",this.getModal)},methods:{toggleCanned(){this.showCanned=!this.showCanned},getModal(e){this.replyZindex=e},setAttachments(e){this.attachments=e},setInlineImages(e){this.inline=e},onChange(e,t){this[t]=e,t=="response"&&(e?R.get("/get-canned-response-message/"+e.id+"/"+this.id).then(a=>{this.internal_note=a.data.data.message+this.internal_note.replace("<p id='extra_p'>&nbsp;</p>",""),this.attachments=a.data.data.attachments}).catch(a=>{this.internal_note="",this.attachments=[]}):(this.internal_note="",this.attachments=[]))},isValid(){const{errors:e,isValid:t}=zk(this.$data);return t},onSubmit(){if(this.worktime_type=this.worktime_type||"",this.isValid()){if(!this.internal_note)return;this.loading=!0,this.worktime!=0&&this.saveTimeTrack(),this.getNotifyIds();const e={content:this.internal_note,ticket_id:this.id,is_internal_note:!0,attachment:this.attachments,notify_department:this.notify_department.length?this.notify_department.toString():"",notify_team:this.notify_team.length?this.notify_team.toString():"",notify_agent:this.notify_agent.length?this.notify_agent.toString():""};R.post("api/thread/reply/"+this.id,e).then(t=>{this.counter++,this.loading=!1,this.internal_note="",this.notify_agent=[],this.notify_team=[],this.notify_department=[],this.attachments=[],this.worktime=0,this.fieldLoader=!0,setTimeout(()=>{this.fieldLoader=!1},1),this.$store.dispatch("setAlert",{type:"success",message:this.lang("internal_note")+" "+this.lang("added_successfully"),component_name:"timeline"}),this.updateThreads("note"),window.emitter.emit("closeNoteBox")}).catch(t=>{this.loading=!1,B(t,"timeline")})}},getNotifyIds(){var e=new DOMParser,t=e.parseFromString(this.internal_note,"text/html");t.getElementsByTagName("body")[0].querySelectorAll('[title="mention_link"]').forEach(s=>{let d=s.href.replace(this.basePath(),"").split("/").filter(m=>m);d[d.length-2]=="user"&&this.notify_agent.push(d[d.length-1]),d[d.length-2]=="department"&&this.notify_department.push(d[d.length-1]),d[d.length-2]=="team"&&this.notify_team.push(d[d.length-1])})},saveTimeTrack(){const e={};e.work_time=this.worktime,e.entrypoint="note",this.worktime_type&&(e.worktime_type=this.worktime_type.id),R.post("ticket/"+this.id+"/time-track",e).then(t=>{this.worktime=0,this.worktime_type="",window.emitter.emit("refreshTimeTrack")}).catch(t=>{this.worktime_type="",this.worktime=0})}},components:{"time-field":ls,"add-media":it,"dynamic-select":_e}},Wk={class:"card-header"},qk={class:"card-title"},Kk={class:"card-tools"},Yk={class:"card-body"},Gk={class:"row"},Qk={class:"form-group"},Xk={key:2,class:"col-sm-6 load_margin"},Jk={key:0},Zk={class:"card-footer"},$k=["disabled"];function ew(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("time-field"),p=g("reuse-loader"),f=g("add-media"),b=g("custom-loader"),y=Q("focus-first-input");return o(),l("div",{class:N(["card card-light",{"note-card":!s.replyZindex}])},[n("div",Wk,[n("h3",qk,c(e.trans("add_note")),1),n("div",Kk,[s.showCanned?(o(),l("button",{key:0,class:"btn btn-light btn-sm",onClick:t[0]||(t[0]=(...D)=>i.toggleCanned&&i.toggleCanned(...D))},[t[3]||(t[3]=n("i",{class:"fas fa-minus"},null,-1)),k(" "+c(e.trans("hide_canned_response")),1)])):(o(),l("button",{key:1,class:"btn btn-light btn-sm",onClick:t[1]||(t[1]=(...D)=>i.toggleCanned&&i.toggleCanned(...D))},[t[4]||(t[4]=n("i",{class:"glyphicon glyphicon-plus"},null,-1)),k(" "+c(e.trans("add_canned_response")),1)]))])]),n("div",Yk,[n("div",Gk,[s.showCanned?(o(),I(d,{key:0,label:e.trans("response"),name:"response",value:e.response,onChange:i.onChange,strlength:30,multiple:!1,classname:"col-sm-6",apiEndpoint:"/api/dependency/canned-responses"},null,8,["label","value","onChange"])):u("",!0)]),n("div",Qk,[M((o(),l("div",{class:"row me-3",key:s.counter},[r.getTicketActions.show_thread_worktime&&!s.fieldLoader?(o(),I(m,{key:0,label:e.trans("worktime"),formStyle:s.formStyle,value:s.worktime,type:"number",name:"worktime",onChange:i.onChange,classname:"col-sm-6",required:r.getTicketActions.require_thread_worktime},null,8,["label","formStyle","value","onChange","required"])):u("",!0),r.getTicketActions.show_worktime_type&&!s.fieldLoader&&s.worktime?(o(),I(d,{key:1,label:e.trans("worktime_type"),name:"worktime_type",value:s.worktime_type,onChange:i.onChange,strlength:30,multiple:!1,classname:"col-sm-6",apiEndpoint:"api/worktime-type-list",required:r.getTicketActions.require_worktime_type_field&&s.worktime},null,8,["label","value","onChange","required"])):u("",!0),r.getTicketActions.show_thread_worktime&&s.fieldLoader?(o(),l("div",Xk,[_(p,{size:30,duration:4e3})])):u("",!0)])),[[y]]),(o(),l("div",{class:"row ps-2",key:s.counter},[_(f,{attachments:s.attachments,inlineFile:s.inline,description:s.internal_note,classname:"col-sm-12",name:"internal_note",onAttach:i.setAttachments,onInline:i.setInlineImages,onInput:i.onChange,page_name:"internal_note",id:r.getTicketActions.show_thread_worktime?"inbox_thread":"focus_editor"},null,8,["attachments","inlineFile","description","onAttach","onInline","onInput","id"]),s.loading?(o(),l("div",Jk,[_(b,{size:60,duration:4e3})])):u("",!0)]))])]),n("div",Zk,[n("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...D)=>i.onSubmit&&i.onSubmit(...D)),disabled:!s.internal_note||s.loading},[t[5]||(t[5]=n("i",{class:"fas fa-sync-alt"},null,-1)),k(" "+c(e.trans("update")),1)],8,$k)])],2)}const tw=U(Hk,[["render",ew],["__scopeId","data-v-5504db6e"]]);const sw={class:"card card-light card-tabs"},aw={key:0,class:"card-header border-0 p-0 pt-2 d-flex"},nw={class:"nav-item"},iw=["onClick"],ow={key:0,class:"nav-item dropdown"},rw={class:"nav-link dropdown-toggle pointer","data-bs-toggle":"dropdown",role:"tab","aria-expanded":"false"},lw={class:"dropdown-menu min-content-width"},dw=["onClick"],cw={class:"card-body parent-class box-profile"},uw={class:"child-class"},hw=["src"],mw=["href"],pw={__name:"IframeInjection",props:{integrationData:{type:Array,default:()=>[]}},setup(e){var b;const t=e,a=ht(!0),r=ht(((b=t.integrationData[0])==null?void 0:b.app_url)||""),s=ht(0),i=ht(!1),d=()=>{a.value=!a.value},m=(y,D)=>{r.value!==D.app_url&&(i.value=!1),s.value=y,r.value=D.app_url},p=()=>{i.value=!0},f=y=>ge(y,14);return(y,D)=>{const w=Q("tooltip");return o(),l("div",sw,[t.integrationData?(o(),l("div",aw,[n("ul",{class:N(["nav nav-tabs col-sm-10",{"tabs-disabled":!a.value}]),id:"custom-tabs-one-tab",role:"tablist"},[(o(!0),l(E,null,q(t.integrationData.slice(0,3),(S,L)=>(o(),l("li",nw,[M((o(),l("span",{class:N(["nav-link card-header-link cursor-pointer",{active:L===s.value}]),id:"custom-tabs-one-home-tab",onClick:x=>m(L,S),"data-bs-toggle":"pill",role:"tab","aria-controls":"custom-tabs-one-home"},[k(c(f(S.app_name)),1)],10,iw)),[[w,S.app_name]])]))),256)),t.integrationData.length>3?(o(),l("li",ow,[n("span",rw,c(y.lang("more")),1),n("ul",lw,[(o(!0),l(E,null,q(t.integrationData.slice(3),(S,L)=>(o(),l("li",null,[M((o(),l("span",{class:N(["dropdown-item cursor-pointer",{active:L+3===s.value}]),id:"custom-tabs-one-home-tab",onClick:x=>m(L+3,S),"data-bs-toggle":"pill",role:"tab","aria-controls":"custom-tabs-one-home"},[k(c(f(S.app_name)),1)],10,dw)),[[w,S.app_name]])]))),256))])])):u("",!0)],2),n("button",{type:"button",class:"btn btn-tool col-sm-2",onClick:d},[n("i",{class:N([{"fas fa-angle-up":a.value,"fas fa-angle-down":!a.value},"fs-25 pl-28"])},null,2)])])):u("",!0),M(n("div",cw,[n("div",uw,[i.value?u("",!0):(o(),I(os,{key:0}))]),n("iframe",{src:r.value,loading:"lazy",onLoad:p,class:"border-0",width:"100%",height:"500px"},null,40,hw),i.value?(o(),l("a",{key:0,href:r.value,target:"_blank",class:"btn btn-primary w-100 btn-block"},[D[0]||(D[0]=n("i",{class:"fas fa-external-link mr-2"},null,-1)),k(" "+c(y.trans("view_more_info")),1)],8,mw)):u("",!0)],512),[[ze,a.value]])])}}},Sa=U(pw,[["__scopeId","data-v-af285b25"]]);const gw={name:"ticket-timeline",description:"Ticket Timeline",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),getDefaultRatings:ee(()=>e.getters.getDefaultRatings),getTicketActions:ee(()=>e.getters.getTicketActions),timeDiffForPast:ee(()=>e.getters.timeDiffForPast),timeDiffForFuture:ee(()=>e.getters.timeDiffForFuture)}},props:{ticketId:{type:[String,Number],default:""},from:{type:String,default:""},fromComp:{type:String,default:""},updateTable:{type:Function,default:()=>{}},currentTicketCategory:{type:String,default:""}},data(){return{ticketNum:this.ticketId,ticketData:"",loading:!0,hasDataPopulated:!1,actionsPopulated:!1,system_ratings:[],ticket_ratings:[],refresh:!1,currentActivity:"ticket-conversation",activityCompBtn:"hide_activity",associateCompBtn:"show_associates",styleObj:{},replyCompBtn:"reply",internalCompBtn:"add_note",dataCounter:0,activityCounter:0,replyUser:"",updateMCE:0,viewAll:!1,countdownForDuedate:"",countUpForOverdue:"",expand:!1,maximized:!1,userCompBtn:"show_requester",showLoader:!1,ticketMerged:!1,integrateAppBtn:"show_app",triggerApiCall:!1,conversation_sort_order:"",integration_data:[],showThreadActions:!0}},beforeMount(){this.from==="timeline"&&(this.ticketNum=ke(window.location.pathname)),this.getTicketData()},mounted(){this.timerActions()},computed:{activityComponent(){return this.currentActivity},styleData(){let e={};return this.ticketData.priority!=null&&(e["border-top"]="3px solid "+this.ticketData.priority.priority_color),e}},created(){window.emitter.on("workflowUpdated",this.updateTimeline),window.emitter.on("actionDone",this.updateTimeline),window.emitter.on("showHidedData",this.hideMethod),window.emitter.on("threadReply",this.replyOnThread),window.emitter.on("closeReplyBox",this.replyMethod),window.emitter.on("closeNoteBox",this.noteMethod),window.emitter.on("showIframeCard",this.iframeMethod)},methods:{conversationSort(e){this.triggerApiCall=e},sortOrder(e){this.conversation_sort_order=e},labelPath(e){return e.includes("/panel/")?e:e.replace(this.basePath(),this.basePath()+"/panel")},formattedTimeAndHours(e){let t=this.formattedTime(e.duedate);return e.departmentDueTrack!==null&&e.departmentDueTrack?e.departmentDueTrack.forEach(a=>{t=t+` <br> ${a.department} : ${a.workingHours}`}):t=t+" <br>",t},getMsg(e){let t=e.labels.length+e.tags.length;return this.viewAll?"View less":"View all "+t},expandView(){this.expand=!this.expand},maxView(){this.maximized=!this.maximized,console.log(this.maximized)},userMethod(){this.userCompBtn=this.userCompBtn=="hide_requester"?"show_requester":"hide_requester"},timerActions(){this.ticketData.is_overdue?this.updateCountUp("duedate"):this.updateCountDownForDueDate()},updateCountDownForDueDate(){this.countdownForDuedate=this.timeDiffForFuture(this.ticketData.duedate),this.countdownForDuedate===0?(this.ticketData.is_overdue=!0,this.ticketData.due_today=!1,this.updateCountUp("duedate")):setTimeout(()=>{this.updateCountDownForDueDate(this.ticketData.duedate)},1e3)},updateCountUp(e){switch(e){case"duedate":this.countUpForOverdue=this.timeDiffForPast(this.ticketData[e]);break;default:return}var t=this;setTimeout(function(){t.updateCountUp(e)},1e4)},toggleAll(){this.viewAll=!this.viewAll},reloadTimeline(){this.hasDataPopulated=!1,this.loading=!0,this.getTicketData(),window.emitter.emit("iframeReload")},replyOnThread(e){document.body.classList.add("overflow-hidden"),this.updateMCE+=1,this.replyCompBtn="hide_reply",this.internalCompBtn="add_note",this.scrollToTarget("actions-card"),this.replyUser=e.user,setTimeout(()=>{window.emitter.emit("updateContent",e)},1e3)},updateTimeline(e){if(window.emitter.emit("updateAgentSidebar"),this.updateTable(e),e=="external"){this.actionsPopulated=!1,window.emitter.emit("closeTimelineActions"),this.getTicketData();return}window.emitter.emit("closeTimelineActions"),this.associateCompBtn="show_associates",["forward"].includes(e)&&window.emitter.emit("updateTimelineActivity"),["status","note","reply"].includes(e)&&(this.activityCounter+=1,this.getTicketData()),["edit","assign","surrender","department","label","tag","approval","requester","timeline_merge","delete","fork"].includes(e)&&(window.emitter.emit("updateTimelineActivity"),this.getTicketData()),e=="duedate"&&(this.loading=!0,this.hasDataPopulated=!1,this.ticketData="",window.emitter.emit("updateTimelineActivity"),this.getTicketData())},scrollToTarget(e){return ua(e)},replyMethod(){this.replyCompBtn=this.replyCompBtn=="reply"?"hide_reply":"reply",this.internalCompBtn="add_note",this.replyCompBtn=="hide_reply"&&this.scrollToTarget("actions-card")},noteMethod(){this.internalCompBtn=this.internalCompBtn=="add_note"?"hide_note":"add_note",this.replyCompBtn="reply",this.internalCompBtn=="hide_note"&&this.scrollToTarget("actions-card")},activityMethod(){this.activityCompBtn=this.activityCompBtn=="show_activity"?"hide_activity":"show_activity",this.currentActivity=this.currentActivity=="ticket-conversation"?"ticket-activity":"ticket-conversation"},hideMethod(){this.associateCompBtn="hide_associates",setTimeout(()=>{this.$refs.inboxAssociates.scrollCurrent(),setTimeout(()=>{window.emitter.emit("showHideDiv")},1500)},1)},subString(e,t=30){return ge(e,t)},getTicketData(){this.$store.dispatch("setRatingTypes",this.ticketNum),this.$store.dispatch("setTicketId",this.ticketNum),this.$store.dispatch("updateTicketActions",this.ticketNum);const e=Le();e.hasOwnProperty("category")&&e.category==="archived"&&(this.showThreadActions=!1);let t=Object.entries(e).map(([a,r])=>`${encodeURIComponent(a)}=${encodeURIComponent(r)}`).join("&");R.get("/api/agent/ticket-details/"+this.ticketNum+"?"+t).then(a=>{this.dataCounter+=1,this.loading=!1,this.refresh=!1,this.hasDataPopulated=!0,this.actionsPopulated=!0,this.ticketData=a.data.data.ticket,this.replyUser=this.ticketData.user,this.ticket_ratings=this.ticketData.ratings,this.ticketMerged=this.ticketData.ticketMerged,this.ratingTypes(),this.timerActions()}).catch(a=>{this.loading=!1,this.hasDataPopulated=!0,this.actionsPopulated=!0})},ratingTypes(){this.system_ratings=this.getDefaultRatings},handelLoader(e){this.showLoader=e},loadLabel(e){return He(e)},removeTitle(e){return e.replace("Elea Review: ","")},loadColor(e){return{"Elea Review: Immediate Action Required":"#a70000","Elea Review: Action Recommended":"#ff8c00","Elea Review: Monitor":"#008000"}[e]||null},loadSVGIcon(e){return{"Elea Review: Immediate Action Required":"elea_immediate_action","Elea Review: Action Recommended":"elea_action_recommended","Elea Review: Monitor":"elea_monitor"}[e]||null},renderDynamicTooltip(e){return e.includes("Elea Review")?this.removeTitle(e):this.loadLabel(e)},processLabel(e){let t=[...e.matchAll(/:\w+:/g)],a=e.replace(/:\w+:/g,""),r=this.subString(a);if(!r||!r.trim())return this.loadLabel(e);let s=r;return t.forEach(i=>{let d=i.index;d<r.length?s=s.slice(0,d)+i[0]+s.slice(d):s+=i[0]}),this.loadLabel(s)},iframeMethod(e){e.reload||(this.integrateAppBtn=e.integration_btn==="hide_app"?"show_app":"hide_app"),this.integration_data=e.integration_data}},components:{BulletListLoader:ba,"timeline-actions":Of,"timeline-data":fb,"timeline-user":Wb,"rating-component":wa,"ticket-conversation":iy,"ticket-activity":by,"inbox-associates":kk,"ticket-reply":Bk,"ticket-note":tw,"svg-icon-handler":rs,"timeline-integration":Sa}},fw={key:0,ref:"ticketTimelineDrag",class:"col-sm-12"},_w={key:0,class:"alert alert-danger"},bw={key:0,class:"card-header"},vw={class:"card-title"},yw={key:0,class:"card-tools timelinebtns"},kw={key:1,class:"card-body"},ww={class:"row mb-2"},Cw={class:"col-sm-9"},Sw={class:"me-1"},Dw={key:0,class:"badge text-bg-danger fs-8 me-1 tags-padding"},Tw={key:1,class:"badge text-bg-warning me-1 tags-padding"},Mw=["href"],Ow=["href"],Iw=["innerHTML"],Aw=["href"],Lw=["innerHTML"],Ew={class:"col-sm-3"},xw={class:"row"},Pw={id:"actions-card"},Rw={class:"card-header p-0 pt-2"},Fw={class:"nav nav-tabs",role:"tablist"},Nw={class:"nav-item"},Vw={key:0,class:"p-1"},jw={class:"dropdown-menu dropdown-menu-class dropdown-menu-right"},Uw={key:0,class:"fas fa-check"},Bw={key:0,class:"fas fa-check"},zw={class:"nav-item"},Hw={class:"nav-item ms-auto mt-04"},Ww={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},qw={key:1,class:"btn-tool text-small",href:"javascript:;"},Kw={key:2,class:"btn-tool text-small",href:"javascript:;"},Yw={key:0,class:"col-sm-4"},Gw={key:2,class:"bullet-load"};function Qw(e,t,a,r,s,i){const d=g("alert"),m=g("timeline-actions"),p=g("svg-icon-handler"),f=g("router-link"),b=g("rating-component"),y=g("ticket-reply"),D=g("ticket-note"),w=g("inbox-associates"),S=g("timeline-integration"),L=g("timeline-user"),x=g("timeline-data"),P=g("BulletListLoader"),F=Q("tooltip");return s.ticketNum?(o(),l("div",fw,[_(d,{componentName:"timeline"}),s.hasDataPopulated&&!s.ticketData?(o(),l("div",_w,c(e.trans("no-ticket-found")),1)):u("",!0),s.hasDataPopulated?(o(),l("div",{key:1,class:"card card-light",style:ne(i.styleData)},[s.ticketData?(o(),l("div",bw,[n("h3",vw,[t[11]||(t[11]=n("i",{class:"fas fa-ticket"},null,-1)),k(" #"+c(s.ticketData.ticket_number)+"‏ ",1)]),s.actionsPopulated?(o(),l("div",yw,[(o(),I(m,{id:s.ticketNum,data:s.ticketData,afterAction:i.updateTimeline,actions:r.getTicketActions,ref:"timelineActions",key:s.dataCounter},{"left-actions":T(()=>[r.getTicketActions.view_tickets_without_actions&&!s.ticketMerged?(o(),l("button",{key:0,type:"button",class:N(["btn btn-light btn-xs",{"bg-primary border-b":s.replyCompBtn=="hide_reply"}]),onClick:t[0]||(t[0]=(...O)=>i.replyMethod&&i.replyMethod(...O))},[t[12]||(t[12]=n("i",{class:"fas fa-reply"},null,-1)),k(" "+c(e.trans("reply")),1)],2)):u("",!0),r.getTicketActions.view_tickets_without_actions&&!s.ticketMerged?(o(),l("button",{key:1,type:"button",class:N(["btn btn-light btn-xs",{"bg-primary border-b":s.internalCompBtn=="hide_note"}]),onClick:t[1]||(t[1]=(...O)=>i.noteMethod&&i.noteMethod(...O))},[t[13]||(t[13]=n("i",{class:"fas fa-edit"},null,-1)),k(" "+c(e.trans("add_note")),1)],2)):u("",!0),r.getTicketActions.view_tickets_without_actions&&s.ticketData.user&&!s.expand&&!s.ticketMerged?(o(),l("button",{key:2,type:"button",class:N(["btn btn-xs btn-light",{"bg-primary border-b":s.userCompBtn=="hide_requester"}]),onClick:t[2]||(t[2]=(...O)=>i.userMethod&&i.userMethod(...O)),id:"user_btn"},[t[14]||(t[14]=n("i",{class:"fas fa-user"},null,-1)),k(" "+c(e.trans("requester")),1)],2)):u("",!0),a.fromComp!="index"?M((o(),l("button",{key:3,class:"btn btn-light btn-xs",onClick:t[3]||(t[3]=(...O)=>i.reloadTimeline&&i.reloadTimeline(...O))},t[15]||(t[15]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[F,e.trans("refresh")]]):u("",!0),M((o(),l("button",{type:"button",class:"btn btn-xs btn-light",onClick:t[4]||(t[4]=(...O)=>i.expandView&&i.expandView(...O))},[n("i",{class:N({"fas fa-expand":!s.expand,"fas fa-compress":s.expand})},null,2)])),[[F,s.expand?e.trans("show_sidebar"):e.trans("hide_sidebar")]])]),_:1},8,["id","data","afterAction","actions"])),is(e.$slots,"headerMenu",{},void 0,!0)])):u("",!0)])):u("",!0),s.ticketData?(o(),l("div",kw,[n("div",ww,[n("div",Cw,[n("h5",Sw,[k(c(s.ticketData.title)+"  ",1),n("span",null,[s.ticketData.is_overdue||s.ticketData.due_today?(o(),l(E,{key:0},[s.ticketData.is_overdue?M((o(),l("span",Dw,[k(c(e.trans("overdue")),1)])),[[F,e.trans("this_ticket_is_marked_as_overdue")]]):u("",!0),s.ticketData.due_today?M((o(),l("span",Tw,[k(c(e.trans("due_today")),1)])),[[F,e.trans("this_ticket_is_marked_as_duetoday")]]):u("",!0)],64)):u("",!0),!s.viewAll&&s.ticketData.labels.length>2?(o(!0),l(E,{key:1},q(s.ticketData.labels.slice(0,2),(O,j)=>(o(),l(E,null,[O.name.includes("Elea Review")?M((o(),l("a",{key:0,target:"_blank",href:O.href,class:N(["badge me-1",{"tags-padding":!O.name.includes("Elea Review")}]),style:ne({borderColor:O.color,color:O.color,border:"solid 1px"})},[n("span",null,[_(p,{"hover-color":i.loadColor(O.name),color:i.loadColor(O.name),height:"15",width:"15","icon-from":"elea_c_icon"},null,8,["hover-color","color"]),k(" "+c(i.subString(i.removeTitle(O.name))),1)])],14,Mw)),[[F,{content:i.renderDynamicTooltip(O.name),html:!0}]]):M((o(),l("a",{key:1,target:"_blank",href:i.labelPath(O.href),class:N(["badge me-1",{"tags-padding":!O.name.includes("Elea Review")}]),style:ne({backgroundColor:O.color,color:"#FFF"})},[n("span",{class:"p-2",innerHTML:i.processLabel(O.name)},null,8,Iw)],14,Ow)),[[F,{content:i.renderDynamicTooltip(O.name),html:!0}]])],64))),256)):u("",!0),!s.viewAll&&s.ticketData.tags.length>2?(o(!0),l(E,{key:2},q(s.ticketData.tags.slice(0,2),(O,j)=>M((o(),l("a",{target:"_blank",href:i.labelPath(O.href),class:"badge me-1 tags-padding",id:"ticket_tags"},[t[16]||(t[16]=n("i",{class:"fas fa-tag"},null,-1)),k(" "+c(i.processLabel(O.name)),1)],8,Aw)),[[F,{content:i.loadLabel(e.trans(O.name)),html:!0}]])),256)):u("",!0),s.viewAll||s.ticketData.labels.length<=2&&s.ticketData.tags.length<=2?(o(),l(E,{key:3},[(o(!0),l(E,null,q(s.ticketData.labels,(O,j)=>(o(),l(E,null,[O.name.includes("Elea Review")?M((o(),I(f,{key:0,target:"_blank",to:O.href.replace(e.basePath(),""),class:N(["badge me-1",{"tags-padding":!O.name.includes("Elea Review")}]),style:ne({borderColor:O.color,color:O.color,border:"solid 1px"})},{default:T(()=>[n("span",null,[_(p,{"hover-color":i.loadColor(O.name),color:i.loadColor(O.name),height:"15",width:"15","icon-from":"elea_c_icon"},null,8,["hover-color","color"]),k(" "+c(i.subString(i.removeTitle(O.name))),1)])]),_:2},1032,["to","class","style"])),[[F,{content:i.renderDynamicTooltip(O.name),html:!0}]]):M((o(),I(f,{key:1,target:"_blank",to:O.href.replace(e.basePath(),""),class:N(["badge me-1",{"tags-padding":!O.name.includes("Elea Review")}]),style:ne({backgroundColor:O.color,color:"#FFF"})},{default:T(()=>[n("span",{class:"p-2",innerHTML:i.processLabel(O.name)},null,8,Lw)]),_:2},1032,["to","class","style"])),[[F,{content:i.renderDynamicTooltip(O.name),html:!0}]])],64))),256)),(o(!0),l(E,null,q(s.ticketData.tags,(O,j)=>M((o(),I(f,{target:"_blank",to:O.href.replace(e.basePath(),""),class:"badge me-1 tags-padding",id:"ticket_tags"},{default:T(()=>[t[17]||(t[17]=n("i",{class:"fas fa-tag"},null,-1)),k(" "+c(i.processLabel(O.name)),1)]),_:2},1032,["to"])),[[F,{content:i.loadLabel(e.trans(O.name)),html:!0}]])),256))],64)):u("",!0),s.ticketData.labels.length>2||s.ticketData.tags.length>2?(o(),l("a",{key:4,href:"javascript:;",class:"fs-8 me-1",onClick:t[5]||(t[5]=(...O)=>i.toggleAll&&i.toggleAll(...O))},[t[18]||(t[18]=n("i",{class:"fas fa-ellipsis-h"},null,-1)),k(" "+c(i.getMsg(s.ticketData)),1)])):u("",!0)])])]),n("div",Ew,[s.system_ratings.name&&!s.refresh&&!s.ticketMerged?(o(),I(b,{key:0,url:"rating/",rating:s.system_ratings,ticket_id:"",classname:"mb-2 lh-1",readOnlyStar:!0},null,8,["rating"])):u("",!0)])]),n("div",xw,[n("div",{class:N({"col-sm-12":s.expand,"col-sm-8":!s.expand})},[n("div",Pw,[s.replyCompBtn=="hide_reply"?(o(),I(y,{id:s.ticketNum,user:s.replyUser,ccArray:s.ticketData.collaborators,ticket:s.ticketData,updateThreads:i.updateTimeline,key:s.updateMCE},null,8,["id","user","ccArray","ticket","updateThreads"])):u("",!0),s.internalCompBtn=="hide_note"?(o(),I(D,{key:1,id:s.ticketNum,updateThreads:i.updateTimeline},null,8,["id","updateThreads"])):u("",!0)]),n("div",{class:N(["card card-light card-tabs",{"maximized-card":s.maximized}])},[n("div",Rw,[n("ul",Fw,[n("li",Nw,[n("a",{class:N(["nav-link",{active:s.activityCompBtn=="hide_activity","pb-11":s.currentActivity==="ticket-activity"}]),"data-bs-toggle":"pill",role:"tab",href:"javascript:;"},[n("span",{class:"p-1",onClick:t[6]||(t[6]=O=>i.activityMethod("ticket_conversation"))},[t[19]||(t[19]=n("i",{class:"far fa-comments"},null,-1)),k(" "+c(e.trans("ticket_conversation")),1)]),this.currentActivity==="ticket-conversation"?(o(),l("span",Vw,[t[22]||(t[22]=n("button",{type:"button",class:"btn btn-light btn-xs dropdown-toggle","data-bs-toggle":"dropdown"},null,-1)),n("div",jw,[n("a",{class:N(["dropdown-item item-hover",{"bg-gray-light":this.conversation_sort_order==="ASC"}]),onClick:t[7]||(t[7]=O=>i.conversationSort("ASC")),href:"javascript:;"},[t[20]||(t[20]=n("i",{class:"fas fa-sort-amount-down"},null,-1)),k(" "+c(e.trans("created_date")+" "+e.trans("ascending"))+" ",1),this.conversation_sort_order==="ASC"?(o(),l("i",Uw)):u("",!0)],2),n("a",{class:N(["dropdown-item item-hover",{"bg-gray-light":this.conversation_sort_order==="DESC"}]),onClick:t[8]||(t[8]=O=>i.conversationSort("DESC")),href:"javascript:;"},[t[21]||(t[21]=n("i",{class:"fas fa-sort-amount-up"},null,-1)),k(" "+c(e.trans("created_date")+" "+e.trans("descending"))+" ",1),this.conversation_sort_order==="DESC"?(o(),l("i",Bw)):u("",!0)],2)])])):u("",!0)],2)]),n("li",zw,[n("a",{class:N(["nav-link pb-11",{active:s.activityCompBtn=="show_activity"}]),"data-bs-toggle":"pill",role:"tab",href:"javascript:;",onClick:t[9]||(t[9]=O=>i.activityMethod("ticket_activity"))},[t[23]||(t[23]=n("i",{class:"fas fa-history"},null,-1)),k(" "+c(e.trans("ticket_activity")),1)],2)]),n("li",Hw,[s.showLoader?M((o(),l("button",Ww,t[24]||(t[24]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[F,e.lang("refresh")]]):u("",!0),s.ticketData.is_overdue?M((o(),l("a",qw,[n("em",null,[k(c(e.trans("overdue"))+" - ",1),n("b",null,c(s.countUpForOverdue),1)])])),[[F,{content:r.getTicketActions.block_ticket_actions?"--":i.formattedTimeAndHours({duedate:s.ticketData.duedate,departmentDueTrack:s.ticketData["department-due-track"]}),html:!0}]]):u("",!0),s.ticketData.is_overdue?u("",!0):M((o(),l("a",Kw,[n("em",null,[k(c(e.trans("due_in"))+" - ",1),n("b",null,c(s.countdownForDuedate?s.countdownForDuedate:"--"),1)])])),[[F,{content:r.getTicketActions.block_ticket_actions?"--":i.formattedTimeAndHours({duein:s.ticketData.duedate,departmentDueTrack:s.ticketData["department-due-track"]}),html:!0}]]),M((o(),l("button",{type:"button",class:"btn btn-tool","data-lte-toggle":"card-maximize",onClick:t[10]||(t[10]=(...O)=>i.maxView&&i.maxView(...O))},t[25]||(t[25]=[n("i",{class:"fas fa-expand"},null,-1)]))),[[F,s.maximized?e.trans("minimize"):e.trans("maximize")]])])])]),n("div",{class:N(["card-body",{"maximized-logs ":s.maximized}])},[(o(),I($s(i.activityComponent),{trigger:s.triggerApiCall,onSortOrder:i.sortOrder,ticketMerged:s.ticketMerged,ticketId:s.ticketNum,key:s.activityCounter,onLoaderState:i.handelLoader,maximized:s.maximized,showThreadActions:s.showThreadActions},null,40,["trigger","onSortOrder","ticketMerged","ticketId","onLoaderState","maximized","showThreadActions"]))],2)],2),s.hasDataPopulated?(o(),I(w,{key:0,ticketId:s.ticketNum,ticketData:s.ticketData,ref:"inboxAssociates"},null,8,["ticketId","ticketData"])):u("",!0)],2),s.expand?u("",!0):(o(),l("div",Yw,[s.ticketData.user&&s.integrateAppBtn==="hide_app"&&s.integration_data?(o(),I(S,{key:0,integrationData:s.integration_data},null,8,["integrationData"])):u("",!0),s.ticketData.user&&s.userCompBtn=="hide_requester"?(o(),I(L,{key:1,user:s.ticketData.user,latestTickets:s.ticketData.latestTickets,org:s.ticketData.organizations},null,8,["user","latestTickets","org"])):u("",!0),(o(),I(x,{id:s.ticketNum,ticket:s.ticketData,key:s.dataCounter,actions:r.getTicketActions,afterAction:i.updateTimeline},null,8,["id","ticket","actions","afterAction"]))]))])])):u("",!0)],4)):u("",!0),s.loading?(o(),l("div",Gw,[_(P,{viewBox:"0 0 300 200"})])):u("",!0)],512)):u("",!0)}const Da=U(gw,[["render",Qw],["__scopeId","data-v-e0c313fe"]]),Xw={setup(){const e=ue();return{customFormattedTime:ee(()=>e.getters.customFormattedTime)}},props:["data","keyName","timestampFormat"]},Jw=["innerHTML"];function Zw(e,t,a,r,s,i){return o(),l("span",{innerHTML:r.customFormattedTime(a.data[a.keyName],a.timestampFormat)},null,8,Jw)}const $w=U(Xw,[["render",Zw]]);const e0={name:"asset-image-modal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function,default:()=>{}},imageSrc:{type:String,default:""}},data(){return{modalWidth:"80%"}},methods:{onImageLoad(){const e=this.$refs.imageContainer.clientWidth;this.modalWidth=`${e}px`}}},t0={key:0,class:"modal"},s0={class:"modal-header"},a0={class:"modal-bodyy"},n0={class:"image-container",ref:"imageContainer"},i0=["src"];function o0(e,t,a,r,s,i){return a.showModal?(o(),l("div",t0,[n("div",{class:"overlay",onClick:t[0]||(t[0]=(...d)=>a.onClose&&a.onClose(...d))}),n("div",{class:"modal-content",style:ne({width:s.modalWidth})},[n("div",s0,[n("button",{type:"button",class:"close-button",onClick:t[1]||(t[1]=(...d)=>a.onClose&&a.onClose(...d))},t[3]||(t[3]=[n("span",{"aria-hidden":"true",id:"modal_close"},"×",-1)]))]),n("div",a0,[n("div",n0,[n("img",{src:a.imageSrc,alt:"Asset Image",class:"img-fluid",onLoad:t[2]||(t[2]=(...d)=>i.onImageLoad&&i.onImageLoad(...d))},null,40,i0)],512)])],4)])):u("",!0)}const r0=U(e0,[["render",o0],["__scopeId","data-v-744b1215"]]);const l0={name:"AssetImage",components:{AssetImageModal:r0},data(){return{showImage:!1}},props:{data:{type:Object,required:!0}},methods:{onClose(){this.showImage=!1}}},d0={key:0},c0={key:1,class:"asset_image"},u0=["src"];function h0(e,t,a,r,s,i){const d=g("asset-image-modal");return o(),l(E,null,[a.data.asset_image===null?(o(),l("div",d0,c("--"))):(o(),l("div",c0,[n("img",{href:"javascript:;",onClick:t[0]||(t[0]=m=>s.showImage=!0),src:a.data.asset_image.view_url,class:"assetimage"},null,8,u0)])),s.showImage&&a.data.asset_image.view_url?(o(),I(d,{key:2,onClose:i.onClose,showModal:s.showImage,"image-src":a.data.asset_image.view_url},null,8,["onClose","showModal","image-src"])):u("",!0)],64)}const m0=U(l0,[["render",h0],["__scopeId","data-v-03ecfde5"]]);const p0={class:"name-container"},g0={class:"name"},f0={class:"name-status"},_0={key:0,class:"badge text-bg-danger"},b0={__name:"DataTableNameWithStatus",props:{data:{type:Object,required:!0}},setup(e){const t=e,a=ee(()=>{switch(t.data.status){case"Open":return"text-bg-success";case"Closed":return"text-bg-danger";case"In-progress":return"text-bg-warning";default:return"text-bg-light"}}),r=ee(()=>new Date().toISOString()>t.data.end_date);return(s,i)=>{const d=g("router-link"),m=Q("tooltip");return o(),l("div",p0,[n("div",g0,[_(d,{class:"redirect-link",to:e.data.view_url},{default:T(()=>[M((o(),l("span",null,[k(c(e.data.name),1)])),[[m,e.data.name]])]),_:1},8,["to"])]),n("div",f0,[n("span",{class:N(["badge",a.value])},c(s.lang(e.data.status)),3),i[0]||(i[0]=k("  ")),r.value?(o(),l("span",_0,c(s.lang("task-plugin-overdue")),1)):u("",!0)])])}}},v0=U(b0,[["__scopeId","data-v-47c07b73"]]);const y0={name:"SimpleTableListElements",props:["data","index","column"],data(){return{limit:2,isReadMore:!0}},computed:{listElements:function(){let e=this.data[this.column];return e?e.slice(0,this.limit):[]},displayShowAllButton:function(){return this.isReadMore&&this.data[this.column].length>2},urlTarget(){return this.data.listElementObj.redirectUrl?"_blank":""}},methods:{readMore(){this.isReadMore=!1,this.limit=this.data[this.column].length},readLess(){this.isReadMore=!0,this.limit=2},url(e){return this.data.listElementObj.redirectUrl?this.data.listElementObj.redirectUrl.replace(this.basePath(),"")+e.id:""}}},k0={class:"element-list-box"},w0={key:0},C0=["href"],S0={key:2,href:"javascript:;"};function D0(e,t,a,r,s,i){const d=g("router-link");return o(),l("div",k0,[i.listElements.length===0?(o(),l("span",w0,"--")):u("",!0),i.listElements.length>0?(o(),l(E,{key:1},[(o(!0),l(E,null,q(i.listElements,m=>(o(),l("div",{key:m.id},[m.url&&m.url.includes("admin")?(o(),l("a",{key:0,href:m.url},c(m.name),9,C0)):m.url?(o(),I(d,{key:1,to:m.url},{default:T(()=>[k(c(m.name),1)]),_:2},1032,["to"])):(o(),l("a",S0,c(m.name),1))]))),128)),n("div",null,[i.displayShowAllButton?(o(),l("button",{key:0,class:"btn btn-light btn-sm",onClick:t[0]||(t[0]=(...m)=>i.readMore&&i.readMore(...m))},c(e.trans("show_all")),1)):u("",!0),s.isReadMore?u("",!0):(o(),l("button",{key:1,class:"btn btn-light btn-sm",onClick:t[1]||(t[1]=(...m)=>i.readLess&&i.readLess(...m))},c(e.trans("show_less")),1))])],64)):u("",!0)])}const T0=U(y0,[["render",D0],["__scopeId","data-v-43d41008"]]);const M0=gt({name:"DataTableStatus",props:{data:{type:Object,required:!0}},setup(e){const t=ee(()=>{switch(e.data.status){case"Open":return"badge-success";case"Close":return"badge-danger";case"In-progress":return"badge-warning";default:return"badge-light"}}),a=ee(()=>{switch(e.data.status){case"Open":return"fas fa-clock";case"In-progress":return"fas fa-hourglass-half";case"Closed":return"fas fa-minus-circle";default:return"fas fa-question"}});return{labelClass:t,statusIconClass:a,changeTaskStatus:async s=>{if(e.data.status.toLowerCase()!==s)try{const i=await R.get(`/tasks/api/change-task/${e.data.id}/${s}`);X(i,"task-datatable-view"),window.emitter.emit("refreshData")}catch(i){B(i,"task-datatable-view")}}}}}),O0={class:"dropdown-menu dropItem"};function I0(e,t,a,r,s,i){return o(),l(E,null,[n("button",{class:N(["btn btn-tool dropdown-toggle btnChange",e.labelClass]),"data-bs-toggle":"dropdown"},[n("i",{class:N(["me-2",e.statusIconClass])},null,2),k(" "+c(e.lang(e.data.status)),1)],2),n("div",O0,[n("a",{href:"javascript:;",class:N([{disabledLink:e.data.status==="Open"},"dropdown-item"]),onClick:t[0]||(t[0]=Ee(d=>e.changeTaskStatus("open"),["prevent"]))},[t[3]||(t[3]=n("i",{class:"fas fa-minus-circle me-1",style:{color:"limegreen"}},null,-1)),k(c(e.lang("open")),1)],2),n("a",{href:"javascript:;",class:N([{disabledLink:e.data.status==="In-progress"},"dropdown-item"]),onClick:t[1]||(t[1]=Ee(d=>e.changeTaskStatus("inprogress"),["prevent"]))},[t[4]||(t[4]=n("i",{class:"fas fa-hourglass-half me-1",style:{color:"orange"}},null,-1)),k(c(e.lang("inprogress")),1)],2),n("a",{href:"javascript:;",class:N([{disabledLink:e.data.status==="Closed"},"dropdown-item"]),onClick:t[2]||(t[2]=Ee(d=>e.changeTaskStatus("close"),["prevent"]))},[t[5]||(t[5]=n("i",{class:"fas fa-minus-circle me-1",style:{color:"#ff0000"}},null,-1)),k(" "+c(e.lang("close")),1)],2)])],64)}const A0=U(M0,[["render",I0],["__scopeId","data-v-c7d9a159"]]);const L0={data(){return{columnNames:[],options:{},templateObject:{}}},props:{dataUrl:{type:String,required:!0},columns:{type:Object,required:!0},tickets:{type:Function,default:()=>[]},columnsMeta:{type:Array,required:!0},filterParams:{type:Object,required:!0},staticColumns:{type:Array,default:()=>[]},reportType:{type:String,default:""},show_pagination:{type:Boolean,default:!1},showNameWithStatus:{type:Boolean,default:!1},deleteMessage:{type:String,default:""},perpage:{type:[Number,String],default:10},perPageValues:{type:Array,default:()=>[10,25,50,100,200,500]}},beforeMount(){this.prepareDynamicComponents(),this.updateColumnNames(),this.updateOptions()},methods:{prepareDynamicComponents(){this.columnsMeta.map(e=>{let t=e.key.replace(/\./g,"-");if(e.is_html){let a=e.key.split(".");this.getHyperlinkInstance(t,e.key,a[0])}if(e.is_timestamp){let a=ha(e.timestamp_format);this.getTimestampInstance(t,e.key,a)}})},updateColumnNames(){this.columnNames=Object.keys(this.columns),this.staticColumns.length&&this.staticColumns.map(e=>{e=="id"?this.columnNames.unshift(e):this.columnNames.push(e)})},sortableFields(){let e=[];return this.columnsMeta.map(t=>{t.is_sortable&&e.push(t.key)}),e},getHyperlinkInstance(e,t,a){this.templateObject[t]=(r,s,i)=>{if(this.showNameWithStatus){if(t==="name")return this.h(v0,{data:s});if(["tickets.url","changes.url","users.url","teams.url"].includes(t))return this.h(T0,{data:s,index:i,column:a});if(t==="closed_by.full_name"||t==="created_by.full_name")return this.h(js,{data:s,keyName:t,colName:a})}else return this.h(js,{data:s,keyName:t,colName:a,reportType:this.reportType})}},getTimestampInstance(e,t,a){this.templateObject[t]=(r,s)=>this.h($w,{data:s,keyName:t,timestampFormat:a})},updateOptions(){const e=this.reportType,t=this.deleteMessage;this.options={headings:this.columns?{...this.columns,id:"Id",user_actions:this.trans("user_actions"),asset_image:this.trans("asset_image"),actions:this.trans("actions"),active:this.trans("active"),info:this.trans("info"),taskstatus:this.trans("status"),status:this.trans("status")}:null,perPage:this.perpage,perPageValues:this.perPageValues,sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},templates:{user_actions:(a,r)=>this.h(Jn,{data:r}),asset_image:(a,r)=>this.h(m0,{data:r}),actions:(a,r)=>this.h(je,{data:r}),info:(a,r)=>this.h(Xs,{data:r}),status:(a,r)=>this.h(ss,{data:r}),taskstatus:(a,r)=>this.h(A0,{data:r}),...this.templateObject},texts:{filter:"",limit:""},responseAdapter({data:a}){window.emitter.emit("dataCount",a.data.total),window.emitter.emit("responseData",a);let r=e?a.data[e]:a.data.data;return Array.isArray(r)&&(r=r.map(s=>(t&&t.trim()!==""&&(s.deleteMessage=t),s))),{data:r,count:a.data.total}},requestAdapter:a=>{let r={"sort-field":a.orderBy,"sort-order":a.ascending?"desc":"asc","search-query":a.query.trim(),limit:a.limit};return this.show_pagination||(r.page=a.page),{...this.filterParams,...r}},columnsClasses:{ticket_number:"ticket_number",subject:"subject",periods:"periods",version:"version",persons:"persons",actions:"actions"},sortable:this.sortableFields(),filterable:!0}}},watch:{filterParams(){window.emitter.emit("refreshData")},columns(){this.prepareDynamicComponents(),this.updateColumnNames(),this.updateOptions(),window.emitter.emit("refreshData")}}},E0={id:"dynamic-datatable-container"};function x0(e,t,a,r,s,i){const d=g("data-table");return o(),l("div",E0,[_(d,{id:"dynamic-datatable",url:a.dataUrl,dataColumns:s.columnNames,option:s.options,tickets:a.tickets,show_pagination:a.show_pagination,scroll_to:"dynamic-datatable"},null,8,["url","dataColumns","option","tickets","show_pagination"])])}const Ta=U(L0,[["render",x0]]);function P0(e){const{name:t,equation:a}=e;let r={name:[t,"isRequired","max(60)"],equation:[a,"isRequired","max(200)"]};const s=new ye(pe),{errors:i,isValid:d}=s.validate(r);return ve.dispatch("setValidationError",i),{errors:i,isValid:d}}const R0={name:"custom-report-column",description:"handles adding custom columns in reports",props:{closeView:{type:Function,required:!0},column:{type:Object,default:()=>({})},isEditing:{type:Boolean,default:!1},addCustomColumnUrl:{type:String,required:!0},shortCodeUrl:{type:String,required:!0}},data(){return{id:0,name:"",equation:"",isTimestamp:!1,timestampFormats:["F j, Y g:i  a","Y-m-d g:i a","d-m-Y g:i a","m-d-Y g:i a","F j, Y","Y-m-d","d-m-Y","m-d-Y","g:i  a"],selectedTimestampFormat:"",loading:!1,shortCodes:[]}},beforeMount(){this.getShortCodes(),this.selectedTimestampFormat=this.timestampFormats[0],this.isEditing&&this.populateColumnData()},methods:{getTimestampExample(){return di(ha(this.selectedTimestampFormat))},populateColumnData(){this.id=this.column.id,this.name=this.column.label,this.equation=this.column.equation,this.isTimestamp=this.column.is_timestamp,this.selectedTimestampFormat=this.column.timestamp_format?this.column.timestamp_format:this.timestampFormats[0]},isValid(){const{errors:e,isValid:t}=P0(this.$data);return!!t},onSubmit(){if(this.isValid()){this.loading=!0;let e={name:this.name,equation:this.equation,is_timestamp:this.isTimestamp,id:this.id};this.isTimestamp&&(e.timestamp_format=this.selectedTimestampFormat),R.post(this.addCustomColumnUrl,e).then(t=>{setTimeout(()=>this.closeView(),2e3),X(t,"custom-report-column"),window.emitter.emit("refresh-report")}).catch(t=>{B(t,"custom-report-column")}).finally(t=>{this.loading=!1,this.hasDataPopulated=!0})}},getShortCodes(){R.get(this.shortCodeUrl).then(e=>{this.shortCodes=e.data.data}).catch(e=>{B(e)})},onChange(e,t){this[t]=e}},computed:{isDisabled(){return this.name===""||this.equation===""||this.loading}},components:{"text-field":Se,checkbox:Lt,"dynamic-select":_e}},F0={id:"custom-report-column"},N0={class:"modal-title"},V0={id:"link-container",refs:"modalBodyRef"},j0={id:"short-code-container"},U0={class:"card card-light"},B0={class:"card-header"},z0={class:"card-title"},H0={class:"card-body"},W0={key:1,id:"report-shortcode-list",class:"row"},q0={class:"col col-sm-6"},K0={class:"row"},Y0={class:"col-sm-6"},G0={for:"timestamp_format"},Q0=["value"],X0=["disabled"];function J0(e,t,a,r,s,i){const d=g("custom-loader"),m=g("alert"),p=g("loader"),f=g("text-field"),b=g("checkbox"),y=g("modal"),D=Q("focus-first-input");return o(),l("div",F0,[_(y,{showModal:!0,onClose:a.closeView,modalBodyClass:"custom-column-modal-body"},{title:T(()=>[n("h4",N0,c(e.lang("custom_column")),1),s.loading?(o(),I(d,{key:0})):u("",!0)]),alert:T(()=>[_(m,{componentName:"custom-report-column"})]),fields:T(()=>[M((o(),l("div",V0,[n("div",j0,[n("div",U0,[n("div",B0,[n("h3",z0,c(e.lang("list_of_available_shortcodes")),1)]),n("div",H0,[s.shortCodes.length?(o(),l("ul",W0,[(o(!0),l(E,null,q(s.shortCodes,w=>(o(),l("li",q0,c(w),1))),256))])):(o(),I(p,{key:0}))])])]),_(f,{label:e.lang("column_name"),value:s.name,name:"name",required:!0,onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",hint:e.lang("report_custom_column_name_hint")},null,8,["label","value","onChange","placehold","hint"]),_(f,{label:e.lang("equation"),value:s.equation,name:"equation",required:!0,onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",type:"textarea",hint:e.lang("report_custom_column_equation_hint")},null,8,["label","value","onChange","placehold","hint"]),_(b,{name:"isTimestamp",value:s.isTimestamp,label:e.lang("is_timestamp"),onChange:i.onChange,classname:"col-sm-12"},null,8,["value","label","onChange"]),M(n("div",K0,[n("div",Y0,[n("label",G0,c(e.lang("timestamp_format")),1),M(n("select",{id:"timestamp_format",class:"form-control",name:"timestamp_format","onUpdate:modelValue":t[0]||(t[0]=w=>s.selectedTimestampFormat=w)},[(o(!0),l(E,null,q(s.timestampFormats,(w,S)=>(o(),l("option",{key:S,value:w},c(w),9,Q0))),128))],512),[[aa,s.selectedTimestampFormat]])]),_(f,{name:"timestamp_format_example",label:e.lang("preview"),value:i.getTimestampExample(),classname:"col-sm-6",disabled:!0,onChange:()=>{}},null,8,["label","value"])],512),[[ze,s.isTimestamp]])])),[[D]])]),controls:T(()=>[n("button",{type:"button",id:"custom-column-submit",onClick:t[1]||(t[1]=(...w)=>i.onSubmit&&i.onSubmit(...w)),disabled:i.isDisabled,class:"btn btn-primary update-btn"},[t[2]||(t[2]=n("span",{class:"fas fa-sync"},null,-1)),k(" "+c(e.lang("submit")),1)],8,X0)]),_:1},8,["onClose"])])}const Z0=U(R0,[["render",J0]]);const $0={name:"column-list",data(){return{loading:!1,hasDataPopulated:!1,columns:[],column:{},showAddCustomColumn:!1,isEditingCustomColumn:!1,showLoader:!1,next_page:!0,max_count:0,saveColumnsData:[],filterObj:{},showDropdown:!0}},props:{filterParams:{type:Object,default:()=>{}},tableColumns:{type:Array,required:!0},addCustomColumnUrl:{type:String,required:!0},deleteCustomColumnUrl:{type:String,required:!0},shortCodeUrl:{type:String,required:!0},subReportId:{type:Number,required:!0},reportIndex:{type:Number,required:!0},reportId:{type:Number,required:!0},showAddColumn:{type:Boolean,default:!0}},beforeMount(){this.hasDataPopulated=!1,this.columns=this.tableColumns,this.saveColumnsData=this.tableColumns,this.filterObj=this.filterParams,this.tableColumns.length>0&&this.getInitialColumns()},created(){window.emitter.on("refresh-report",this.getInitialColumns),window.emitter.on("onFilterSelected",e=>{this.filterObj=e})},computed:{parsedColumns(){return this.columns.forEach(e=>{e.is_visible=!!e.is_visible}),this.columns}},methods:{subString(e,t=20){return ge(e,t)},getDataFromServer(){this.loading=!0,R.get("api/agent/report-columns/"+this.subReportId).then(e=>{this.columns=e.data.data,window.emitter.emit("onColumnUpdate",{columns:this.columns})}).catch(e=>{B(e,"tabular-report-layout")}).finally(e=>{this.loading=!1,this.hasDataPopulated=!0})},saveColumns(){this.columns.forEach((e,t)=>{e.order=t+1}),this.saveColumnsData.forEach(e=>{let t=this.columns.find(a=>a.id===e.id);t&&(e.order=t.order)}),this.saveColumnsData.sort((e,t)=>e.order-t.order),this.loading=!0,R.post("api/agent/report-columns/"+this.subReportId,this.saveColumnsData).then(e=>{window.emitter.emit("onReportsColumnUpdate",this.saveColumnsData),X(e,"tabular-report-layout")}).catch(e=>{B(e,"tabular-report-layout")}).finally(()=>{this.loading=!1})},onDelete(e){this.updateDropdown(),this.loading=!0,R.delete(this.deleteCustomColumnUrl+"/"+e).then(t=>{X(t,"tabular-report-layout"),this.getInitialColumns()}).catch(t=>{B(t,"tabular-report-layout")}).finally(()=>{this.loading=!1})},onLabelClick(e,t){this.saveColumnsData.length===1&&element.is_visible||(t.is_visible=!t.is_visible,this.handelSaveColumns(t)),this.preventToCloseBox(e)},preventToCloseBox(e){e.stopPropagation()},checkBoxClicked(e){e.is_visible=!e.is_visible,this.handelSaveColumns(e)},onEdit(e){this.showAddCustomColumn=!0,this.isEditingCustomColumn=!0,this.column=e,this.updateDropdown()},updateDropdown(){this.showDropdown=!1,setTimeout(()=>{this.showDropdown=!0},1)},hideCustomColumn(){this.showAddCustomColumn=!1,this.isEditingCustomColumn=!1,this.column={}},getInitialColumns(){this.columns=[],this.page=1,this.getColumns()},getColumns(e,t=!1){this.showLoader=!0;let a={page:this.page};["dept-ids","helptopic-ids"].forEach(s=>{this.filterObj.hasOwnProperty(s)&&this.filterObj[s]&&(a[`${s}[]`]=this.filterObj[s].map(i=>i.id?i.id:i))}),R.get("api/agent/report-columns/paginate/"+this.reportId,{params:a}).then(s=>{this.max_count=s.data.data.max_count,t?this.columns=s.data.data.report_columns.data:this.columns.push(...s.data.data.report_columns.data),this.columns.map(i=>{i.is_visible=!!i.is_visible}),e&&e.loaded(),this.next_page=s.data.data.report_columns.next_page_url!==null,this.next_page?this.page++:e&&e.complete(),this.showLoader=!1}).catch(s=>{this.showLoader=!1,B(s,"tabular-report-layout")})},handelSaveColumns(e){const t=this.saveColumnsData.findIndex(a=>a.id===e.id);t===-1&&e.is_visible?this.saveColumnsData.push(e):t!==-1&&!e.is_visible&&this.saveColumnsData.splice(t,1)}},components:{"custom-column":Z0,"draggable-element":es}},eC={id:"column-list"},tC={key:0,class:"btn-group float-end"},sC=["onClick","value","onUpdate:modelValue","disabled"],aC=["onClick"],nC=["onClick"],iC=["onClick"],oC={key:1,class:"mb-3"},rC={class:"column-list-btn-element",slot:"footer"},lC=["disabled"];function dC(e,t,a,r,s,i){const d=g("draggable-element"),m=g("infinite-loading"),p=g("reuse-loader"),f=g("custom-column"),b=g("custom-loader"),y=Q("tooltip");return o(),l("span",eC,[s.showDropdown?(o(),l("div",tC,[n("button",{type:"button",class:"btn btn-light dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"true",id:"dropdown-menu-columns",onClick:t[0]||(t[0]=(...D)=>i.getInitialColumns&&i.getInitialColumns(...D))},[t[6]||(t[6]=n("i",{class:"fas fa-columns"},null,-1)),k(" "+c(e.lang("columns")),1)]),n("div",{class:"dropdown-menu dropdown-menu-right",role:"menu","x-placement":"bottom-end","aria-labelledby":"dropdown-menu-columns",id:"scrollable-ul",onScroll:t[5]||(t[5]=(...D)=>e.handleScroll&&e.handleScroll(...D))},[_(d,{list:i.parsedColumns,handle:".drag-btn",class:"report-column-element",itemKey:"id"},{item:T(({element:D,index:w})=>[(o(),l("a",{href:"javascript:;",class:"dropdown-item report-column-list",key:D.id,onClick:t[2]||(t[2]=(...S)=>i.preventToCloseBox&&i.preventToCloseBox(...S))},[M(n("input",{type:"checkbox",class:"form-check-input",onClick:S=>i.checkBoxClicked(D),value:D.key,"onUpdate:modelValue":S=>D.is_visible=S,disabled:s.saveColumnsData.length===1&&D.is_visible},null,8,sC),[[_t,D.is_visible],[y,s.saveColumnsData.length===1&&D.is_visible?e.trans("atleast_one_column_needs_to_be_selected"):""]]),M((o(),l("span",{onClick:S=>i.onLabelClick(S,D),class:"column-label"},[k("  "+c(i.subString(D.label,30)),1)],8,aC)),[[y,D.hover?D.hover:D.label]]),D.is_custom?(o(),l("button",{key:0,class:"btn btn-secondary btn-sm float-end",onClick:()=>i.onDelete(D.id)},t[7]||(t[7]=[n("i",{class:"fas fa-trash"},null,-1)]),8,nC)):u("",!0),D.is_custom?(o(),l("button",{key:1,class:"btn btn-primary btn-sm float-end margin-horizontal-5",onClick:()=>i.onEdit(D)},t[8]||(t[8]=[n("i",{class:"fas fa-edit"},null,-1)]),8,iC)):u("",!0),n("span",{class:"float-end margin-horizontal-5 drag-btn",title:"Move this column",onClick:t[1]||(t[1]=(...S)=>i.preventToCloseBox&&i.preventToCloseBox(...S))},t[9]||(t[9]=[n("i",{class:"fas fa-arrows-alt-v","aria-hidden":"true"},null,-1)]))]))]),_:1},8,["list"]),s.next_page&&!s.showLoader?(o(),I(m,{key:0,onInfinite:i.getColumns},{spinner:T(()=>t[10]||(t[10]=[n("span",null,null,-1)])),complete:T(()=>t[11]||(t[11]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])):u("",!0),s.showLoader?(o(),l("div",oC,[_(p,{"animation-duration":4e3,size:20})])):u("",!0),n("div",rC,[M((o(),l("button",{type:"button",id:"save-columns",class:"btn btn-sm btn-primary mb-1",onClick:t[3]||(t[3]=(...D)=>i.saveColumns&&i.saveColumns(...D)),disabled:s.saveColumnsData.length>s.max_count},[t[12]||(t[12]=n("i",{class:"fas fa-sync"},null,-1)),k(" "+c(e.lang("apply")),1)],8,lC)),[[y,s.saveColumnsData.length>s.max_count&&!s.showLoader?e.trans("column-tooltip")+s.max_count+" "+e.trans("columns"):""]]),a.showAddColumn?(o(),l("button",{key:0,class:"btn btn-sm btn-primary mb-1",id:"add-custom-column",onClick:t[4]||(t[4]=()=>s.showAddCustomColumn=!0)},[t[13]||(t[13]=n("i",{class:"glyphicon glyphicon-plus"},null,-1)),k(" "+c(e.lang("add_custom_column")),1)])):u("",!0)])],32)])):u("",!0),s.showAddCustomColumn?(o(),I(f,{key:1,"add-custom-column-url":a.addCustomColumnUrl,"short-code-url":a.shortCodeUrl,column:s.column,closeView:i.hideCustomColumn,isEditing:s.isEditingCustomColumn},null,8,["add-custom-column-url","short-code-url","column","closeView","isEditing"])):u("",!0),s.loading&&s.hasDataPopulated?(o(),I(b,{key:2})):u("",!0)])}const cC=U($0,[["render",dC],["__scopeId","data-v-03b053bc"]]);const uC={name:"tabular-report-layout",description:"Common layout component for tabular reports",props:{tickets:{type:Function,default:()=>[]},dataUrl:{type:String,required:!0},tableColumns:{type:Array,required:!0},exportUrl:{type:String,required:!0},subReportId:{type:Number,required:!0},addCustomColumnUrl:{type:String,required:!0},deleteCustomColumnUrl:{type:String,required:!0},shortCodeUrl:{type:String,required:!0},filterParams:{type:Object,default:()=>{}},reportIndex:{type:Number,required:!0},reportId:{type:Number,required:!0},reportType:{type:String,default:""},showAddColumn:{type:Boolean,default:!0},staticColumns:{type:Array,default:()=>[]},perpage:{type:[Number,String],default:10},perPageValues:{type:Array,default:()=>[]}},data(){return{isLoading:!1,columns:[],visibleColumns:{},show_pagination:!0}},created(){window.emitter.on("onReportsColumnUpdate",this.onColumnUpdate)},beforeMount(){this.columns=this.tableColumns,this.updateVisibleColumns()},methods:{onColumnUpdate(e){this.columns=e,this.updateVisibleColumns()},updateVisibleColumns(){this.visibleColumns={},this.columns.map(e=>{Te(e.is_visible)&&(this.visibleColumns[e.key]=e.label)})}},components:{"ticket-filter":Js,"dynamic-datatable":Ta,"column-list":cC}},hC={class:"tabular-layout"},mC={class:"column-list-right"};function pC(e,t,a,r,s,i){const d=g("alert"),m=g("column-list"),p=g("dynamic-datatable");return o(),l("div",hC,[_(d,{componentName:"tabular-report-layout"}),n("div",mC,[_(m,{"table-columns":s.columns,"sub-report-id":a.subReportId,"add-custom-column-url":a.addCustomColumnUrl,filterParams:a.filterParams,"delete-custom-column-url":a.deleteCustomColumnUrl,"short-code-url":a.shortCodeUrl,"report-index":a.reportIndex,"report-id":a.reportId,showAddColumn:a.showAddColumn},null,8,["table-columns","sub-report-id","add-custom-column-url","filterParams","delete-custom-column-url","short-code-url","report-index","report-id","showAddColumn"])]),n("div",null,[s.columns.length?(o(),I(p,{key:0,show_pagination:s.show_pagination,"data-url":a.dataUrl,columns:s.visibleColumns,columnsMeta:s.columns,filterParams:a.filterParams,reportType:a.reportType,staticColumns:a.staticColumns,tickets:a.tickets,perpage:a.perpage,perPageValues:a.perPageValues},null,8,["show_pagination","data-url","columns","columnsMeta","filterParams","reportType","staticColumns","tickets","perpage","perPageValues"])):u("",!0)])])}const gC=U(uC,[["render",pC],["__scopeId","data-v-679b1f20"]]);const fC={props:{selectedColor:{type:String,default:""},ticketPage:{type:String,default:""},permissions:{type:[String,Object],default:""}},data(){return{buttonStyle:{"background-color":this.selectedColor+" !important",color:"#fff"},loading:!0,ticketsArray:[],ticketResponse:"",perpage:"",pagination:1,paramsObj:{},hasDataPopulated:!0,search:"",selectedTickets:[],timelineId:"",url_params:[],isApplyClicked:!1,activePage:this.ticketPage,isShowFilter:!1,counter:0,next_page:"",prev_page:"",searchShortCode:"",searchFilter:["id"],filterArray:[],sourceType:"",filterLoad:!1,sort_preferences:{},viewMode:"list",reportConfigObj:null,dataCount:0,filterParams:{},tableId:"",dataUrl:"",currentTicketCategory:"",pageType:""}},beforeMount(){let e=new URLSearchParams(window.location.search);this.timelineId=e.get("timelineId")?e.get("timelineId"):"",this.currentTicketCategory=e.get("category")?e.get("category"):"",this.getTicketsViewMode()},mounted(){this.timelineId&&$("html, body").animate({scrollTop:$("#ticket-timeline").offset().top-70},"slow")},created(){window.emitter.on("refreshInbox",this.getRefreshList),window.emitter.on("closeTimelineView",this.closeTimeline),window.emitter.on("dataCount",this.getCount),window.emitter.on("refreshTicketsIndex",this.refreshTickets),window.emitter.on("responseData",this.handleTicketData),window.emitter.on("updatedLimit",e=>{this.perpage=e})},computed:{isHighlighted(){const e=this.searchFilter.map(t=>"is:"+t+" ").join("");return this.search===e},showExportButton:function(){if(this.reportConfigObj&&Array.isArray(this.reportConfigObj.sub_reports)){for(let e=0;e<this.reportConfigObj.sub_reports.length;e++)if(this.reportConfigObj.sub_reports[e].data_type==="datatable")return!0}return!1}},methods:{ticketActionsMounted(){window.emitter.emit("ticketActionsMounted",{component:{selectedTickets:this.selectedTickets,permissions:this.permissions},category:this.sourceType?this.sourceType:this.pageType})},handleTicketData(e){this.pageType=e.data.category},ticketsData(e){this.selectedTickets=e},onColumnUpdate(){window.emitter.emit("refreshData")},exportReport(){var t,a;const e={...this.filterParams,total:this.dataCount,filter_id:(a=(t=this.$route)==null?void 0:t.params)==null?void 0:a.id};this.hasDataPopulated=!0,R.post(this.reportConfigObj.export_url,e).then(r=>{this.hasDataPopulated=!1,X(r,"inbox")}).catch(r=>{this.hasDataPopulated=!1,B(r,"inbox")})},getCount(e){this.dataCount=e},getTicketsViewMode(){R.get("/ticket-datatable-settings").then(e=>{this.viewMode=e.data.data.view,this.perpage=parseInt(e.data.data.per_page),this.callTickets()}).catch(e=>{B(e,"inbox")})},updateViewMode(e){this.viewMode=e,this.loading=!0,this.hasDataPopulated=!0,this.selectedTickets=[],R.post("/update-settings/ticket-datatable",{ticket_view:e}).then(t=>{X(t,"inbox"),this.callTickets()}).catch(t=>{B(t,"inbox")})},callTickets(){const e=Le();this.viewMode==="list"?(ke(window.location.pathname)&&(this.paramsObj.filter_id=ke(window.location.pathname)),this.getTicketList({...this.paramsObj,...e}),this.getSearchShorCodes(),this.search=this.formatSearchFilter(),this.filterArray.push(this.search),window.emitter.emit("updateAgentSidebar")):(ke(window.location.pathname)&&(this.paramsObj.filter_id=ke(window.location.pathname)),this.getTableConfiguration({...this.paramsObj,...e}))},getTableConfiguration(e){let t="ticket-export";const a=Le();a&&a.hasOwnProperty("category")&&a.category==="archived"&&(t="archived-ticket-export"),R.get("/api/agent/report-config/"+t).then(r=>{let s="";if(!this.isApplyClicked){var i=location.search.substring(1);i.length!==0&&(this.url_params=JSON.parse('{"'+decodeURIComponent(i).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/%2F/g,"/")+'"}')),s={...this.handleUrlParamsInTicketFilter(s),...e},e=s||e}let d=this.activePage;d=d==="trash"?"deleted":d,e&&e.hasOwnProperty("category")&&e.category&&e.filter_id&&delete e.filter_id;let m=Object.entries({category:d,...e}).map(([f,b])=>{if(f!=="limit")return Array.isArray(b)?b.map(y=>`${encodeURIComponent(f)}[]=${encodeURIComponent(y)}`).join("&"):`${encodeURIComponent(f)}=${encodeURIComponent(b)}`}).join("&");const p=new Date().getTime();this.dataUrl=`/api/agent/ticket-list?${m}&timestamp=${p}`,this.reportConfigObj=r.data.data,this.filterId=r.data.data.filter_id,this.tableId=r.data.data.id,this.updateFilterObj(e),this.loading=!1,this.hasDataPopulated=!1}).catch(r=>{this.loading=!1,B(r,"inbox")})},updateFilterObj(e){if(Array.isArray(this.reportConfigObj.filters)){let t={};this.reportConfigObj.filters.forEach(a=>{t[a.key]=a.value}),this.filterParams=t}else if(this.viewMode==="datatable"){let t={};for(const a in e)if(a.endsWith("[]")){const r=a.replace("[]",""),s=e[a];t[r]=Array.isArray(s)?s:[s].map(i=>isNaN(i)?i:Number(i))}else a.includes("[]")||(t[a]=e[a]);this.filterParams=t}},refreshDetails(){this.$refs.ticketTimeline.reloadTimeline()},backToInbox(){var e=document.getElementById("tickets-index");e.scrollIntoView({behavior:"smooth"})},toggleFilterView(){this.isShowFilter=!this.isShowFilter},reloadData(e){e&&e=="duedate"&&(this.ticketsArray=[],this.loading=!0),this.hasDataPopulated=!0,this.getTicketList(this.paramsObj)},closeTimeline(){var e=document.getElementById("tickets-index");e.scrollIntoView({behavior:"smooth"}),this.timelineId="";const t=new URL(window.location.href);t.searchParams.delete("timelineId"),window.history.replaceState(null,null,t.toString())},onTicketSelect(e){if($("html, body").animate({scrollTop:$("#ticket-timeline").offset().top-70},"slow"),new URLSearchParams(window.location.search).get("timelineId")){const a="timelineId",r=e,s=new URLSearchParams(window.location.search);s.set(a,r);const i=`${window.location.origin}${window.location.pathname}?${s.toString()}`;window.history.replaceState(null,null,i)}else{const a="timelineId",r=e,s=window.location.href,i=s.includes("?")?"&":"?",d=`${s}${i}${a}=${r}`;window.history.replaceState(null,null,d)}this.timelineId=e,this.counter+=1},refreshTickets(){this.getRefreshList(),window.emitter.emit("unCheckTicket"),window.emitter.emit("refreshTicket")},doSearch(e,t){const a=Le();let r=this.formatSearchFilter(),s=t.replace(r,""),i=decodeURIComponent(s).replace(/[^\x00-\x7F]/g,"");this.commonActions(),this.paramsObj.page=1,this.paramsObj["search-query"]=i.trim(),this.paramsObj.short_code=this.searchFilter,this.getTicketList({...this.paramsObj,...a}),this.pagination=1},getTicketList(e,t=""){let a="";if(!this.isApplyClicked){var r=location.search.substring(1);r.length!==0&&(this.url_params=JSON.parse('{"'+decodeURIComponent(r).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/%2F/g,"/")+'"}')),a={...this.handleUrlParamsInTicketFilter(a),...e},e=a||e}e&&e.hasOwnProperty("category")&&e.category&&e.filter_id&&delete e.filter_id,R.get("/api/agent/ticket-list",{params:e}).then(s=>{this.ticketResponse=s.data.data,this.perpage=parseInt(this.ticketResponse.per_page),this.sort_preferences=s.data.data.sort_preferences,this.ticketsArray=s.data.data.tickets,this.next_page=s.data.data.next_page_url,this.prev_page=s.data.data.prev_page_url,this.sourceType=this.ticketResponse.category==="deleted"?"trash":this.ticketResponse.category,this.loading=!1,this.hasDataPopulated=!1,!this.ticketsArray.length&&this.pagination!==1&&(this.pagination=1,this.paramsObj.page=1,this.getTicketList(this.paramsObj))}).catch(s=>{this.loading=!1,this.hasDataPopulated=!1,B(s,"inbox")})},getPageNumberFromUrl(e){const t=/[?&]page=(\d+)/,a=e.match(t);return a?parseInt(a[1]):null},refreshIndex(){R.get("/ticket-datatable-settings").then(e=>{this.viewMode=e.data.data.view,this.perpage=parseInt(e.data.data.per_page),window.emitter.emit("uncheckCheckbox"),this.selectedTickets=[];const t=Le();this.viewMode==="list"?(this.hasDataPopulated=!0,this.paramsObj.page=1,ke(window.location.pathname)&&(this.paramsObj.filter_id=ke(window.location.pathname)),this.getTicketList({...this.paramsObj,...t}),window.emitter.emit("updateAgentSidebar")):(this.hasDataPopulated=!0,ke(window.location.pathname)&&(this.paramsObj.filter_id=ke(window.location.pathname)),this.getTableConfiguration({...this.paramsObj,...t})),this.isShowFilter&&(this.filterLoad=!0,this.isShowFilter=!1,setTimeout(()=>{this.isShowFilter=!0,this.filterLoad=!1},1e3)),this.pagination=1}).catch(e=>{B(e,"inbox")})},commonActions(){window.emitter.emit("unCheckTicket"),this.selectedTickets=[],this.hasDataPopulated=!0;var e=document.getElementById("tickets-index");e.scrollIntoView({behavior:"smooth"})},getRefreshList(){const e=Le();this.paramsObj.page=this.pagination,this.commonActions(),this.getTicketList({...this.paramsObj,...e})},pageChanged(e){const t=Le();this.commonActions();let a="";e==="next"&&this.next_page&&(a=this.getPageNumberFromUrl(this.next_page)),e==="previous"&&this.prev_page&&(a=this.getPageNumberFromUrl(this.prev_page)),this.paramsObj.page=a,this.getTicketList({...this.paramsObj,...t})},handlePageCount(e){const t=Le();this.commonActions(),this.paramsObj.page=1,this.paramsObj.limit=e,this.getTicketList({...this.paramsObj,...t}),this.pagination=1},sorting(e){const t=Le();this.commonActions(),this.paramsObj.answered="",this.paramsObj["sort-field"]=e.value,this.paramsObj["sort-order"]=e.order,this.getTicketList({...this.paramsObj,...t})},filtering(e){const t=Le();this.commonActions(),this.paramsObj.answered=e.value,this.getTicketList({...this.paramsObj,...t})},appendSelect(e,t){t?this.selectedTickets.push(e):this.selectedTickets.splice(this.selectedTickets.indexOf(e),1)},setFilter(e,t,a){R.get("/ticket-datatable-settings").then(r=>{this.viewMode=r.data.data.view,this.commonActions(),this.isApplyClicked=a;const s=["due-on","created-at","updated-at"];for(const i in e)e.hasOwnProperty(i)&&s.includes(i)&&(e[i]=e[i]);this.pagination=1,e.category===""&&(e.category=this.url_params["show[]"]?this.url_params["show[]"]:""),this.paramsObj=JSON.parse(JSON.stringify(e)),this.setParamsAndApplyFilter(this.paramsObj,t),this.filterParams=JSON.parse(JSON.stringify(e))}).catch(r=>{B(r,"inbox")})},handleUrlParamsInTicketFilter(e){if(Te(this.url_params["filter-by-url"])){for(const t in e)e.hasOwnProperty(t)&&(this.url_params.hasOwnProperty(t)?this.url_params[t]!==e[t]&&(this.url_params[t]=e[t]):this.url_params[t]=e[t]);return this.url_params}return e},setParamsAndApplyFilter(e,t=!1){if(!this.isApplyClicked){let a=location.search.substring(1);a.length!==0&&(this.url_params=JSON.parse('{"'+decodeURIComponent(a).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/%2F/g,"/")+'"}')),e=this.handleUrlParamsInTicketFilter(e)}if(this.url_params["show[]"]==="trash"&&(this.url_params["show[]"]="deleted",this.deleteForver=!0),typeof e>"u"){let a=JSON.parse(JSON.stringify(this.paramsObj));a.category=a.category!==void 0?a.category:this.url_params["show[]"]?this.url_params["show[]"]:"",this.viewMode==="list"?this.getTicketList(a):this.getTableConfiguration(a)}else{t&&window.emitter.emit("hideInboxTimeline");let a=e;a.category=a.category!==void 0?a.category:this.url_params["show[]"]?this.url_params["show[]"]:"",a.limit=this.perpage,this.viewMode==="list"?this.getTicketList(a):this.getTableConfiguration(a)}},getSearchShorCodes(){R.get("/filter/search-shortcodes").then(e=>{this.searchShortCode=e.data,this.loading=!1}).catch(e=>{this.loading=!1})},toggleSearchFilter(e,t){const a=this.searchFilter.indexOf(t);a!==-1?this.searchFilter.splice(a,1):this.searchFilter.push(t);let r=new RegExp("is:[^ ]+\\s","g"),s=this.search.replace(r,"");this.search=this.formatSearchFilter()+s,this.filterArray=this.searchFilter.map(i=>"is:"+i+" "),this.preventToCloseBox(e)},preventToCloseBox(e){e.stopPropagation()},formatSearchFilter(){return this.searchFilter.map(e=>"is:"+e+" ").join("")},handleKeyDown(e){e.key==="Backspace"&&this.isAllTextSelected()&&(this.search="",this.searchFilter=[],this.filterArray=[])},isAllTextSelected(){return document.activeElement.selectionStart===0&&document.activeElement.selectionEnd===this.search.length}},watch:{selectedTickets(e,t){window.emitter.emit("selectedTickets",e)},search(){for(let e=0;e<this.filterArray.length;e++){const t=this.filterArray[e];if(!this.search.includes(t)){let a=t.replace("is:","").trim();const r=this.searchFilter.indexOf(a);r!==-1&&this.searchFilter.splice(r,1),this.filterArray.splice(e,1),this.search=this.filterArray.filter(s=>this.filterArray.includes(s)).join(""),e--}}}},components:{BulletListLoader:ba,"ticket-actions":_h,"ticket-details":tp,"per-page":Zn,"select-all":ip,"ticket-sorting":up,"ticket-timeline":Da,"ticket-filter":Js,"simple-pagination":fi,TabularReportLayout:gC}},_C={id:"tickets-index"},bC={class:"card card-light"},vC={class:"card-header"},yC={class:"card-title"},kC={class:"card-tools"},wC={class:"btn-group"},CC={class:"card-body"},SC={key:0,style:{padding:"1rem"}},DC={key:1,class:"row"},TC={class:"col-md-12 pl-13"},MC={class:"search-div form-group form-inline float-end VueTables__search"},OC={class:"VueTables__search-field"},IC={class:"input-group ticket-searchbar mb-3"},AC={class:"input-group-prepend"},LC={type:"button",class:"btn btn-light dropdown-toggle filter-ticket rounded-end-0","data-bs-toggle":"dropdown"},EC={class:"dropdown-menu filter-column"},xC=["onClick"],PC={key:0,class:"fas fa-check"},RC=["placeholder"],FC={class:"form-group float-start VueTables__limit ms-0"},NC={class:"VueTables__limit-field"},VC={type:"button",class:"btn btn-light btn-md cursor_def"},jC={key:0,id:"ticket-actions-mounted"},UC={key:2},BC={key:3},zC={class:"mailbox-messages mailinbox"},HC={class:"row ticket-box"},WC={class:"col-md-12 col-sm-12 col-12"},qC={key:0,id:"tickets-expanded"},KC={key:1},YC={class:"text-center no-ticket-found"},GC={class:"mailbox-controls"},QC={class:"row"},XC={class:"col-sm-6 pad-top-18"},JC={key:2,class:"me-2"},ZC={class:"col-sm-6"},$C={key:0,class:"float-end mr-2"},eS={class:"form-group mt_11"},tS={class:"VueTables__limit-field"},sS={key:0,id:"ticket-actions-mounted"},aS={class:"time-ab-div"},nS={id:"ticket-timeline",class:"row timelinebtns"};function iS(e,t,a,r,s,i){var F;const d=g("alert"),m=g("BulletListLoader"),p=g("select-all"),f=g("ticket-actions"),b=g("per-page"),y=g("ticket-sorting"),D=g("ticket-filter"),w=g("ticket-details"),S=g("simple-pagination"),L=g("TabularReportLayout"),x=g("ticket-timeline"),P=Q("tooltip");return o(),l("div",_C,[_(d,{componentName:"inbox"}),n("div",bC,[n("div",vC,[n("h3",yC,c(e.trans("tickets")),1),n("div",kC,[s.loading?u("",!0):(o(),l(E,{key:0},[i.showExportButton&&s.dataCount&&s.viewMode==="datatable"&&((F=a.permissions)!=null&&F.ticket_export)?M((o(),l("button",{key:0,id:"export-report",class:"btn btn-light btn-sm",onClick:t[0]||(t[0]=(...O)=>i.exportReport&&i.exportReport(...O))},t[11]||(t[11]=[n("i",{class:"fas fa-paper-plane","aria-hidden":"true"},null,-1)]))),[[P,e.lang("export")]]):u("",!0),n("div",wC,[M((o(),l("button",{type:"button",class:N(["btn btn-light btn-sm",{active_btn:s.viewMode==="list"}]),onClick:t[1]||(t[1]=O=>i.updateViewMode("list")),id:"mr-0"},t[12]||(t[12]=[n("i",{class:"fa fa-columns"},null,-1)]),2)),[[P,e.trans("list_view")]]),M((o(),l("button",{type:"button",class:N(["btn btn-light btn-sm",{active_btn:s.viewMode==="datatable"}]),onClick:t[2]||(t[2]=O=>i.updateViewMode("datatable"))},t[13]||(t[13]=[n("i",{class:"fas fa-table"},null,-1)]),2)),[[P,e.trans("table_view")]])]),M((o(),l("button",{type:"button",class:"btn btn-light btn-sm",onClick:t[3]||(t[3]=O=>i.toggleFilterView())},t[14]||(t[14]=[n("i",{class:"glyphicon glyphicon-filter"},null,-1)]))),[[P,e.trans("filter_tickets")]])],64)),M((o(),l("button",{type:"button",class:"btn btn-light btn-sm",onClick:t[4]||(t[4]=O=>i.refreshIndex())},[n("i",{class:N(["fas fa-sync-alt",s.hasDataPopulated?"fa-spin":""])},null,2)])),[[P,e.trans("refresh")]])])]),n("div",CC,[s.loading&&s.hasDataPopulated?(o(),l("div",SC,[_(m,{viewBox:"0 0 300 200"})])):u("",!0),!s.loading&&s.viewMode==="list"?(o(),l("div",DC,[n("div",TC,[n("div",MC,[n("div",OC,[n("div",IC,[n("div",AC,[n("button",LC,c(e.lang("search_by")),1),n("div",EC,[(o(!0),l(E,null,q(s.searchShortCode,(O,j)=>(o(),l("div",null,[n("a",{class:"dropdown-item search-filter",onClick:J=>i.toggleSearchFilter(J,j)},[s.searchFilter.includes(j)?(o(),l("i",PC)):u("",!0),t[15]||(t[15]=k("  ")),n("span",{class:N(["search-text",s.searchFilter.includes(j)?"":"ms-3"])},c(O),3)],8,xC)]))),256))])]),M(n("input",{type:"text",class:N(["form-control",{highlighted:i.isHighlighted}]),placeholder:e.lang("type_and_enter_to_search"),"onUpdate:modelValue":t[5]||(t[5]=O=>s.search=O),onKeyup:t[6]||(t[6]=st(O=>i.doSearch(O,s.search),["enter"])),onKeydown:t[7]||(t[7]=O=>i.handleKeyDown(O))},null,42,RC),[[Fe,s.search]])])])]),n("div",FC,[n("div",NC,[M((o(),l("button",VC,[_(p,{tickets:s.ticketsArray,selected:s.selectedTickets},null,8,["tickets","selected"])])),[[P,e.trans("select_all_tickets")]]),s.sourceType==="closed"||s.sourceType==="archived"?(o(),l("span",jC,c(i.ticketActionsMounted()),1)):u("",!0),s.selectedTickets.length?(o(),I(f,{key:1,selectedTickets:s.selectedTickets,loadTickets:i.refreshTickets,page:s.sourceType,tickets:s.ticketsArray,permissions:a.permissions},null,8,["selectedTickets","loadTickets","page","tickets","permissions"])):u("",!0),s.perpage?(o(),I(b,{key:2,perpage:s.perpage,tableHeader:a.selectedColor,onTicketCount:i.handlePageCount},null,8,["perpage","tableHeader","onTicketCount"])):u("",!0),_(y,{onSort:i.sorting,onFilter:i.filtering,sortPreferences:s.sort_preferences,tableHeader:a.selectedColor},null,8,["onSort","onFilter","sortPreferences","tableHeader"])])])])])):u("",!0),s.filterLoad?(o(),l("div",UC,[_(m,{viewBox:"0 0 300 200"})])):u("",!0),s.isShowFilter?(o(),l("div",BC,[_(D,{onFilter:i.setFilter,showFilter:s.isShowFilter,closeFilterView:i.toggleFilterView},null,8,["onFilter","showFilter","closeFilterView"])])):u("",!0),!s.loading&&s.viewMode==="list"?(o(),l(E,{key:4},[n("div",zC,[n("div",HC,[n("div",WC,[s.ticketsArray.length>0?(o(),l("table",qC,[n("tbody",null,[(o(!0),l(E,null,q(s.ticketsArray,(O,j)=>(o(),I(w,{ticket:O,key:O.id,color:a.selectedColor,appendSelect:i.appendSelect,onSelect:i.onTicketSelect,timelineId:s.timelineId},null,8,["ticket","color","appendSelect","onSelect","timelineId"]))),128))])])):u("",!0),!s.hasDataPopulated&&s.ticketsArray.length===0?(o(),l("div",KC,[n("p",YC,c(e.trans("no-ticket-found")),1)])):u("",!0)])])]),n("div",GC,[n("div",QC,[n("div",XC,[s.ticketResponse.total===1?(o(),l(E,{key:0},[k(c(e.trans("one_record")),1)],64)):u("",!0),s.ticketResponse.total>1&&s.ticketResponse.total<=10?(o(),l(E,{key:1},[k(c(s.ticketResponse.total)+" "+c(e.trans("records")),1)],64)):u("",!0),s.ticketResponse.total>10?(o(),l("div",JC,c(e.trans("showing"))+" "+c(s.ticketResponse.from)+" to "+c(s.ticketResponse.to)+" of "+c(s.ticketResponse.total)+" "+c(e.trans("records")),1)):u("",!0)]),n("div",ZC,[s.ticketResponse.total>10?(o(),l("div",$C,[_(S,{prev_page:s.prev_page,next_page:s.next_page,onPagination:i.pageChanged},null,8,["prev_page","next_page","onPagination"])])):u("",!0)])])])],64)):!s.loading&&s.viewMode==="datatable"?(o(),l(E,{key:5},[n("div",eS,[n("div",tS,[s.pageType==="closed"||s.pageType==="archived"?(o(),l("span",sS,c(i.ticketActionsMounted()),1)):u("",!0),s.selectedTickets.length?(o(),I(f,{key:1,selectedTickets:s.selectedTickets,loadTickets:i.refreshTickets,page:s.pageType,tickets:s.ticketsArray,currentTicketCategory:s.currentTicketCategory,permissions:a.permissions},null,8,["selectedTickets","loadTickets","page","tickets","currentTicketCategory","permissions"])):u("",!0)])]),(o(!0),l(E,null,q(s.reportConfigObj.sub_reports,(O,j)=>(o(),l("section",{key:O.id},[O.data_type==="datatable"?(o(),I(L,{key:0,"data-url":s.dataUrl,perpage:s.perpage,"table-columns":O.columns,"sub-report-id":O.id,"export-url":s.reportConfigObj.export_url,"short-code-url":"","delete-custom-column-url":"","add-custom-column-url":"",filterParams:s.filterParams,"report-index":j,"report-id":s.tableId,reportType:"tickets",showAddColumn:!1,staticColumns:["id"],tickets:i.ticketsData,"per-page-values":[10,25,50,100]},null,8,["data-url","perpage","table-columns","sub-report-id","export-url","filterParams","report-index","report-id","tickets"])):u("",!0)]))),128))],64)):u("",!0)])]),n("div",aS,[n("div",nS,[s.timelineId?(o(),I(x,{ticketId:s.timelineId,updateTable:i.reloadData,key:s.counter,ref:"ticketTimeline",fromComp:"index",currentTicketCategory:s.currentTicketCategory},{headerMenu:T(()=>[M((o(),l("button",{class:"btn btn-light btn-xs fs-9",onClick:t[8]||(t[8]=(...O)=>i.refreshDetails&&i.refreshDetails(...O)),href:"javascript:;"},t[16]||(t[16]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[P,e.trans("refresh")]]),M((o(),l("button",{type:"button",class:"btn btn-light btn-xs fs-9",onClick:t[9]||(t[9]=(...O)=>i.backToInbox&&i.backToInbox(...O))},t[17]||(t[17]=[n("i",{class:"fas fa-arrow-up"},null,-1)]))),[[P,e.trans("back_to_inbox")]]),M((o(),l("button",{type:"button",class:"btn btn-light btn-xs fs-9",onClick:t[10]||(t[10]=(...O)=>i.closeTimeline&&i.closeTimeline(...O))},t[18]||(t[18]=[n("i",{class:"fas fa-times"},null,-1)]))),[[P,e.trans("close")]])]),_:1},8,["ticketId","updateTable","currentTicketCategory"])):u("",!0)])])])}const oS=U(fC,[["render",iS],["__scopeId","data-v-e59ee9a6"]]);const rS={name:"inbox-layout",description:"Inbox layout Component",props:{from:{type:String,default:""}},data(){return{ticketPage:"",counter:0,loading:!0,tablePermissions:""}},created(){window.emitter.on("refreshTicketPage",this.reloadPage)},beforeMount(){if(this.from)this.ticketPage="filter";else{let e=JSON.parse('{"'+decodeURIComponent(location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/%2F/g,"/")+'"}');this.ticketPage=e["show[]"]}this.getTablePermissions()},methods:{getTablePermissions(){R.get("/ticket-datatable/permissions").then(e=>{this.tablePermissions=e.data.data,this.loading=!1}).catch(e=>{this.loading=!1})},reloadPage(){this.counter+=1}},components:{"tickets-index":oS}},lS={class:"col-sm-12"};function dS(e,t,a,r,s,i){const d=g("tickets-index");return o(),l("div",lS,[s.loading?u("",!0):(o(),I(d,{selectedColor:e.headerColor,ticketPage:s.ticketPage,key:s.counter,permissions:s.tablePermissions},null,8,["selectedColor","ticketPage","permissions"]))])}const Jt=U(rS,[["render",dS]]);const cS={name:"column-list",data(){return{loading:!1,hasDataPopulated:!1,columns:[],column:{},apiUrl:"",next_page:!0,showLoader:!1,max_count:0,saveColumnsData:[],filterObj:{}}},props:{tableColumns:{type:Array,required:!0},reportId:{type:Number,default:null},columnId:{type:Number,default:null}},beforeMount(){this.hasDataPopulated=!1,this.saveColumnsData=this.tableColumns,this.tableColumns.length>0&&this.getInitialColumns()},created(){window.emitter.on("onFilterSelected",e=>{this.filterObj=e})},methods:{saveColumns(){this.columns.forEach((e,t)=>{e.order=t+1}),this.saveColumnsData.forEach(e=>{let t=this.columns.find(a=>a.id===e.id);t&&(e.order=t.order)}),this.saveColumnsData.sort((e,t)=>e.order-t.order),this.reportId?this.apiUrl="api/agent/report-columns/"+this.reportId:this.apiUrl="/user-export-columns",this.loading=!0,R.post(this.apiUrl,this.saveColumnsData).then(e=>{window.emitter.emit("onColumnUpdate",this.saveColumnsData),X(e,"dataTableModal")}).catch(e=>{B(e,"dataTableModal")}).finally(()=>{this.loading=!1})},onLabelClick(e,t){this.saveColumnsData.length===1&&element.is_visible||(t.is_visible=!t.is_visible,this.handelSaveColumns(t)),this.preventToCloseBox(e)},preventToCloseBox(e){e.stopPropagation()},checkBoxClicked(e){e.is_visible=!e.is_visible,this.handelSaveColumns(e)},getInitialColumns(){this.columns=[],this.page=1,this.getColumns()},getColumns(e,t=!1){this.showLoader=!0;let a={page:this.page};["change_type_ids","asset_type_ids"].forEach(s=>{this.filterObj.hasOwnProperty(s)&&this.filterObj[s]&&this.filterObj[s].forEach((i,d)=>{a[`${s}[${d}]`]=i.id?i.id:i})}),R.get("api/agent/report-columns/paginate/"+this.columnId,{params:a}).then(s=>{this.max_count=s.data.data.max_count,t?this.columns=s.data.data.report_columns.data:this.columns.push(...s.data.data.report_columns.data),this.columns.map(i=>{i.is_visible=!!i.is_visible}),e&&e.loaded(),this.next_page=s.data.data.report_columns.next_page_url!==null,this.next_page?this.page++:e&&e.complete(),this.showLoader=!1}).catch(s=>{this.showLoader=!1,B(s,"dataTableModal")})},handelSaveColumns(e){const t=this.saveColumnsData.findIndex(a=>a.id===e.id);t===-1&&e.is_visible?this.saveColumnsData.push(e):t!==-1&&!e.is_visible&&this.saveColumnsData.splice(t,1)}},components:{"draggable-element":es}},uS={id:"column-list"},hS={class:"btn-group float-end"},mS=["onClick","value","disabled","onUpdate:modelValue"],pS=["onClick","title"],gS={key:1,class:"mb-3"},fS={class:"column-list-btn-element",slot:"footer"},_S=["disabled"];function bS(e,t,a,r,s,i){const d=g("draggable-element"),m=g("infinite-loading"),p=g("reuse-loader"),f=g("custom-loader"),b=Q("tooltip");return o(),l("span",uS,[n("div",hS,[n("button",{type:"button",class:"btn btn-light dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"true",id:"dropdown-menu-columns",onClick:t[0]||(t[0]=(...y)=>i.getInitialColumns&&i.getInitialColumns(...y))},[t[4]||(t[4]=n("i",{class:"fas fa-columns"},null,-1)),k(" "+c(e.lang("columns")),1)]),n("div",{class:"dropdown-menu dropdown-menu-lg dropdown-menu-right","aria-labelledby":"dropdown-menu-columns",id:"scrollable-ul",onScroll:t[3]||(t[3]=(...y)=>e.handleScroll&&e.handleScroll(...y))},[_(d,{list:s.columns,handle:".drag-btn",class:"report-column-element",itemKey:"id"},{item:T(({element:y,index:D})=>[(o(),l("a",{href:"javascript:;",class:"dropdown-item report-column-list",key:y.id},[M(n("input",{type:"checkbox",class:"form-check-input",onClick:w=>i.checkBoxClicked(y),value:y.key,disabled:s.saveColumnsData.length===1&&y.is_visible,"onUpdate:modelValue":w=>y.is_visible=w},null,8,mS),[[_t,y.is_visible],[b,s.saveColumnsData.length===1&&y.is_visible?e.trans("atleast_one_column_needs_to_be_selected"):""]]),n("span",{onClick:w=>i.onLabelClick(w,y),class:"column-label",title:y.hover?y.hover:y.label},"  "+c(e.getSubString(y.label,30)),9,pS),n("span",{class:"float-end margin-horizontal-5 drag-btn",title:"Move this column",onClick:t[1]||(t[1]=(...w)=>i.preventToCloseBox&&i.preventToCloseBox(...w))},t[5]||(t[5]=[n("i",{class:"fas fa-arrows-alt-v","aria-hidden":"true"},null,-1)]))]))]),_:1},8,["list"]),s.next_page?(o(),I(m,{key:0,onInfinite:i.getColumns},{spinner:T(()=>t[6]||(t[6]=[n("span",null,null,-1)])),complete:T(()=>t[7]||(t[7]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])):u("",!0),s.showLoader?(o(),l("div",gS,[_(p,{"animation-duration":4e3,size:20})])):u("",!0),n("div",fS,[M((o(),l("button",{type:"button",id:"save-columns",class:"btn btn-sm btn-primary",onClick:t[2]||(t[2]=(...y)=>i.saveColumns&&i.saveColumns(...y)),disabled:s.saveColumnsData.length>s.max_count},[t[8]||(t[8]=n("i",{class:"fas fa-sync"},null,-1)),k(" "+c(e.lang("apply")),1)],8,_S)),[[b,s.saveColumnsData.length>s.max_count&&!s.showLoader?e.trans("column-tooltip")+s.max_count+" "+e.trans("columns"):""]])])],32)]),s.loading&&s.hasDataPopulated?(o(),I(f,{key:0})):u("",!0)])}const vS=U(cS,[["render",bS],["__scopeId","data-v-7c46b7e4"]]);function yS(e){let{parentUser:t,childUser:a}=e;t==null&&(t="");var r={parentUser:[t,"isRequired"],childUser:[a,"isRequired"]};const s=new ye(pe),{errors:i,isValid:d}=s.validate(r);return ve.dispatch("setValidationError",i),{errors:i,isValid:d}}const kS={name:"merge-user-modal",description:"Merge user Modal component",props:{showModal:{type:Boolean,default:!1},userId:{type:Number|String,default:""},onClose:{type:Function},componentTitle:{type:String,default:"timeline"},reloadUsers:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,size:60,merge_reason:"",title:"",parentUser:"",childUser:"",user:"",id:!1,page:1,pageSize:10,parent_users:[],parentUsersLoaded:!1,childUsersLoaded:!1,initialParentUsers:[],initialChildUsers:[]}},computed:{parentUsers(){return Array.isArray(this.parent_users)?this.initialChildUsers&&this.initialChildUsers.length>0?this.parent_users.filter(e=>!this.initialChildUsers.some(t=>t.id===e.id)):this.parent_users:[]},childUsers(){return this.initialParentUsers?this.parent_users.filter(e=>e.id!==this.initialParentUsers.id):this.userId?this.parent_users.filter(e=>e.id!==this.userId):this.parent_users},dynamicSelectEndpoint(){return`/api/dependency/users?page=${this.page}&per_page=${this.pageSize}&supplements[no_email]=user-only`}},methods:{isValid(){const{errors:e,isValid:t}=yS(this.$data);return t},mergeUser(e,t){const a={page:e,per_page:this.pageSize,"supplements[no_email]":"user-only"};R.get("/api/dependency/users",{params:a}).then(r=>{this.loading=!1;const s=r.data.data.users;for(var i in s)s[i].value=s[i].email,s[i].id=s[i].id,s[i].name=s[i].name;t?(this.initialParentUsers=s,this.parentUsersLoaded=!0):(this.child_users=[...this.child_users,...s.filter(d=>!this.child_users.some(m=>m.id===d.id))],this.childUsersLoaded=!0)}).catch(r=>{this.loading=!1,B(r,this.componentTitle)})},onChange(e,t){this[t]=e,this.isValid(),(t==="parentUser"||t==="childUser")&&(e&&this.isValid(),e==null&&this.isValid())},onSubmit(){if(this.isValid()){this.loading=!0,this.isDisabled=!0;const e={parent_id:this.parentUser?this.parentUser.id:this.userId,reason:this.merge_reason,_method:"PATCH",children_id:this.childUser.map(t=>t.id)};R.post("/merge-users",e).then(t=>{this.loading=!1,X(t,"merge-user-modal"),setTimeout(()=>{this.onClose(),this.reloadUsers()},2e3)}).catch(t=>{this.loading=!1,this.isDisabled=!1,B(t,"merge-user-modal")})}}},watch:{showModal(e){e&&(this.page=1,this.child_users=[],this.mergeUser(this.page,!0))},childUser(e){e&&e.length>0&&this.mergeUser(1,!1)},page(e){e>1&&this.child_users.length<this.pageSize*(e-1)&&this.mergeUser(e,!1)}},components:{textField:Se,staticSelect:Xe,dynamicSelect:_e}},wS={class:"modal-title"},CS={key:0,id:"merge_content"},SS={class:"alert alert-warning"},DS={key:0,class:"row"},TS={key:1,class:"row"},MS={class:"row"},OS={key:1,class:"row",slot:"fields"},IS=["disabled"];function AS(e,t,a,r,s,i){const d=g("alert"),m=g("dynamic-select"),p=g("text-field"),f=g("reuse-loader"),b=g("modal");return a.showModal?(o(),I(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle,id:s.id},{title:T(()=>[n("h4",wS,c(e.lang("merge_users")),1)]),alert:T(()=>[_(d,{componentName:"merge-user-modal"})]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",CS,[n("div",SS,[t[1]||(t[1]=n("i",{class:"fas fa-warning"},null,-1)),k(" "+c(e.trans("caution-merge-users")),1)]),this.userId?(o(),l("div",TS,[_(m,{name:"childUser",label:e.lang("select_users"),value:s.childUser,elements:i.childUsers,onChange:i.onChange,classname:"col-sm-12",apiEndpoint:i.dynamicSelectEndpoint,multiple:!0,required:!0,strlength:"30",loadOnScroll:!0},null,8,["label","value","elements","onChange","apiEndpoint"])])):(o(),l("div",DS,[_(m,{name:"parentUser",label:e.lang("select-parent-user"),value:s.parentUser,elements:i.parentUsers,onChange:i.onChange,classname:"col-sm-6",apiEndpoint:i.dynamicSelectEndpoint,required:!0,strlength:"30",multiple:!1},null,8,["label","value","elements","onChange","apiEndpoint"]),_(m,{name:"childUser",label:e.lang("select_users"),value:s.childUser,elements:i.childUsers,onChange:i.onChange,classname:"col-sm-6",apiEndpoint:i.dynamicSelectEndpoint,multiple:!0,required:!0,strlength:"30",loadOnScroll:!0},null,8,["label","value","elements","onChange","apiEndpoint"])])),n("div",MS,[_(p,{label:e.lang("merge-reason"),value:s.merge_reason,type:"textarea",name:"merge_reason",onChange:i.onChange,classname:"col-sm-12"},null,8,["label","value","onChange"])])])),s.loading?(o(),l("div",OS,[_(f,{"animation-duration":4e3,color:"#1d78ff",size:s.size},null,8,["size"])])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...y)=>i.onSubmit&&i.onSubmit(...y)),class:"btn btn-primary",disabled:s.isDisabled},[t[2]||(t[2]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.lang("proceed")),1)],8,IS)]),_:1},8,["showModal","onClose","containerStyle","id"])):u("",!0)}const Ma=U(kS,[["render",AS]]);const LS={name:"user-directory",description:"User list component",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},data(){return{queryParameter:this.$route.query,params:"",hasDataPopulated:!1,isShowFilter:!1,showMergeUSerModal:!1,visibleColumns:{},apiUrl:"user-export-data",columns:[],options:{},filterParams:{},staticColumns:["info","user_actions"],filterOptions:[{section:[{name:"userType",url:"",elements:[{id:"all",name:"All",queryPerm:"roles[0]=user&roles[1]=agent"},{id:"active_users",name:"Active Users",queryPerm:"roles[0]=user&active=1"},{id:"deactivated_users",name:"Deactivated Users",queryPerm:"roles[0]=user&active=0"},{id:"all_users",name:"All Users",queryPerm:"roles[0]=user"},{id:"active_agents",name:"Active Agents",queryPerm:"roles[0]=agent&active=1"},{id:"deactivated_agents",name:"Deactivated Agents",queryPerm:"roles[0]=agent&active=0"},{id:"all_agents",name:"All Agents",queryPerm:"roles[0]=agent"},{id:"all_active",name:"Active Users and Agents",queryPerm:"roles[0]=user&roles[1]=agent&active=1"},{id:"all_deactive",name:"Deactivated Users and Agents",queryPerm:"roles[0]=user&roles[1]=agent&active=0"}],isMultiple:!1,isPrepopulate:!1,label:"user_type",value:{id:"active",name:"Active Users",queryPerm:"roles[0]=user&roles[1]=agent&active=1"},className:"col-sm-3",strlength:25},{name:"departments",url:"api/dependency/departments",elements:[],isMultiple:!0,isPrepopulate:!1,label:"departments",value:"",className:"col-sm-3",strlength:25},{name:"teams",url:"api/dependency/teams",elements:[],isMultiple:!0,isPrepopulate:!1,label:"teams",value:"",className:"col-sm-3",strlength:25}]},{section:[{name:"organizations",url:"api/dependency/organizations",elements:[],isMultiple:!0,isPrepopulate:!1,label:"organizations",value:"",className:"col-sm-3",strlength:25},{name:"created_at",type:"date",label:["created_between","created_in"],timeOptions:{start:"00:00",step:"00:30",end:"23:30"},range:!0,isCustom:!1}]}],newReportId:"",dataCount:"",showIcon:!1}},beforeMount(){this.queryParameter.hasOwnProperty("label_ids")&&(this.apiUrl=`user-export-data?label_ids=${this.queryParameter.label_ids}`),this.queryParameter.hasOwnProperty("dt")&&this.handleDownload(this.queryParameter.dt),this.getColumns()},created(){window.emitter.on("onColumnUpdate",this.onColumnUpdate),window.emitter.on("dataCount",this.handleDataCount)},methods:{getColumns(){this.hasDataPopulated=!1,R.get("api/agent/report-config/user-report").then(e=>{this.hasDataPopulated=!0,this.newReportId=e.data.data.id,this.columnData=e.data.data.sub_reports,this.columnData.forEach(t=>{this.columns=t.columns}),this.columns.map(t=>{t.is_visible=!!t.is_visible}),this.updateVisibleColumns()}).catch(e=>{this.hasDataPopulated=!0,this.columns=[],B(e)})},onColumnUpdate(e){this.columns=e,this.updateVisibleColumns()},updateVisibleColumns(){this.visibleColumns={},this.columns.map(e=>{Te(e.is_visible)&&(this.visibleColumns[e.key]=e.label)})},selectedFilters(e){return e==="closeEvent"?this.isShowFilter=!1:e==="resetEvent"?this.resetFilter():this.applyFilter(e)},resetFilter(){this.apiUrl="/user-export-data",this.filterOptions=this.filterOptions.map(function(e){return e.value="",e})},applyFilter(e){let t="/user-export-data?",a="";if(e.userType?(this.filterOptions[0].value=e.userType,a=e.userType.queryPerm+"&"):a="roles[0]=user&roles[1]=agent&",e.departments&&(a=this.commonMethod(0,1,"dept-ids",e.departments,a)),e.teams&&(a=this.commonMethod(0,2,"team-ids",e.teams,a)),e.organizations&&(a=this.commonMethod(1,0,"org-ids",e.organizations,a)),e.created_at){e=e.created_at;let r="";if(e.includes("last"))r=e;else{let s=Oe(e[0]).format("YYYY-MM-DD HH:mm:ss"),i=Oe(e[1]).format("YYYY-MM-DD HH:mm:ss");r="date::"+s+"~"+i}a+="created_at="+r+"&"}a[a.length-1]==="&"&&(a=a.slice(0,-1)),this.apiUrl=t+a,this.isShowFilter=!1,this.params=this.reformatExportData(a)},reformatExportData(e){const t=e.split("&").reduce((r,s)=>{const[i,d]=s.split("=");return r[i]=d,r},{}),a={};for(const r in t){const s=r.match(/([a-zA-Z_-]+)\[(\d+)\]/);if(s){const[i,d,m]=s;a[d]=a[d]||[],a[d][m]=t[r]}else r==="created_at"&&(a[r]=t[r])}return a},commonMethod(e,t,a,r,s){var i;return i=s,this.filterOptions[e].section[t].value=r,r.forEach(function(d,m){i+=a+"["+m+"]="+d.id+"&"}),i},toggleFilterView(){this.isShowFilter=!this.isShowFilter},mergeUSerModal(){this.showMergeUSerModal=!0},onClose(){this.showMergeUSerModal=!1,this.$store.dispatch("unsetValidationError"),window.emitter.emit("onColumnUpdate",this.columns),window.emitter.emit("refreshData")},handleDownload(e){R.get("user/export/download/"+e).then(t=>{let a=t.data.data.href,r=document.createElement("a");if(r.href=a,document.body.appendChild(r),r.setAttribute("download",this.generateFileNameFromPath(a)),r.click(),X(t,"dataTableModal"),history.pushState){let s=`${window.location.protocol}//${window.location.host}${window.location.pathname}`;window.history.pushState({path:s},"",s)}}).catch(t=>{B(t,"dataTableModal")})},generateFileNameFromPath(e){let t=e.split("/");return t[t.length-1]},handleDataCount(e){this.showIcon=!!e,this.dataCount=e},triggerExport(){const e={...this.params,total:this.dataCount};R.post("/api/agent/report-export/"+this.newReportId,e).then(t=>{X(t,"dataTableModal")}).catch(t=>{B(t,"dataTableModal")})}},components:{"user-column-list":vS,"advance-filter":$n,"dynamic-datatable":Ta,"merge-user-modal":Ma}},ES={class:"col-sm-12",id:"user_list"},xS={key:0,class:"card card-light"},PS={class:"card-header"},RS={class:"card-title"},FS={class:"card-tools"},NS={class:"card-body",id:"my_user"};function VS(e,t,a,r,s,i){const d=g("alert"),m=g("router-link"),p=g("merge-user-modal"),f=g("advance-filter"),b=g("user-column-list"),y=g("dynamic-datatable"),D=Q("tooltip");return o(),l("div",ES,[_(d,{componentName:"dataTableModal"}),s.hasDataPopulated?(o(),l("div",xS,[n("div",PS,[n("h3",RS,c(e.trans("list_of_contacts")),1),n("div",FS,[M((o(),I(m,{class:"btn btn-tool",to:"/user/create"},{default:T(()=>t[3]||(t[3]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[D,e.trans("create_contact")]]),s.showIcon?M((o(),l("button",{key:0,class:"btn btn-tool",onClick:t[0]||(t[0]=(...w)=>i.triggerExport&&i.triggerExport(...w)),href:"javascript:;"},t[4]||(t[4]=[n("i",{class:"fas fa-paper-plane"},null,-1)]))),[[D,e.trans("export")]]):u("",!0),M((o(),l("button",{class:"btn btn-tool",onClick:t[1]||(t[1]=(...w)=>i.toggleFilterView&&i.toggleFilterView(...w)),href:"javascript:;"},t[5]||(t[5]=[n("i",{class:"glyphicon glyphicon-filter"},null,-1)]))),[[D,e.trans("filter")]]),M((o(),l("button",{type:"button",class:"btn btn-tool",href:"javascript:;",onClick:t[2]||(t[2]=w=>i.mergeUSerModal()),id:"merge_users"},t[6]||(t[6]=[n("i",{class:"fas fa-code-merge"},null,-1)]))),[[D,e.trans("merge_users")]]),_(ae,{name:"modal"},{default:T(()=>[s.showMergeUSerModal?(o(),I(p,{key:0,onClose:i.onClose,showModal:s.showMergeUSerModal},null,8,["onClose","showModal"])):u("",!0)]),_:1})])]),n("div",NS,[M(_(f,{id:"filter-box",metaData:s.filterOptions,onSelectedFilters:i.selectedFilters},null,8,["metaData","onSelectedFilters"]),[[ze,s.isShowFilter]]),(o(!0),l(E,null,q(e.columnData,w=>(o(),l("section",{key:w},[_(b,{"table-columns":w.columns,reportId:w.id,columnId:s.newReportId},null,8,["table-columns","reportId","columnId"]),s.columns.length?(o(),I(y,{key:0,columns:s.visibleColumns,filterParams:s.filterParams,columnsMeta:s.columns,"data-url":s.apiUrl,staticColumns:s.staticColumns},null,8,["columns","filterParams","columnsMeta","data-url","staticColumns"])):u("",!0)]))),128))])])):u("",!0)])}const jS=U(LS,[["render",VS]]);const US={name:"user-export",description:"User export component",data(){return{date_range:"",start:"",end:"",loading:!1}},methods:{getPickers(){const e=this;let t=new Date;return[{text:"Today",onClick(){return e.onChange([t,t],"date_range")}},{text:"Yesterday",onClick(){return e.onChange([new Date(Date.now()-864e5),new Date(Date.now()-864e5)],"date_range")}},{text:"Last 7 days",onClick(){return e.onChange([new Date(Date.now()-864e5*7),t],"date_range")}},{text:"Last 30 days",onClick(){return e.onChange([new Date(Date.now()-864e5*30),t],"date_range")}},{text:"Next 7 days",onClick(){return e.onChange([t,new Date(Date.now()+864e5*7)],"date_range")}},{text:"Next 30 days",onClick(){return e.onChange([t,new Date(Date.now()+864e5*30)],"date_range")}},{text:"This month",onClick(){return e.onChange([new Date(t.getFullYear(),t.getMonth(),1),new Date(t.getFullYear(),t.getMonth()+1,0)],"date_range")}},{text:"Last month",onClick(){return e.onChange([new Date(t.getFullYear(),t.getMonth()-1,1),new Date(t.getFullYear(),t.getMonth()-1+1,0)],"date_range")}}]},onChange(e,t){this[t]=e,this.start=e[0]!==null?Oe(e[0]).format("YYYY-MM-DD"):"",this.end=e[1]!==null?Oe(e[1]).format("YYYY-MM-D"):""},onSubmit(){this.start?(this.loading=!0,R.get("/user-export-download?start_date="+this.start+"&end_date="+this.end).then(e=>{this.$store.dispatch("setAlert",{type:"success",message:e.data.message,component_name:"UserExport"}),this.loading=!1}).catch(e=>{this.loading=!1,B(e,"UserExport")})):this.$store.dispatch("setAlert",{type:"danger",message:"Please select the date range",component_name:"UserExport"})}},components:{"date-time-field":at}},BS={class:"col-sm-12"},zS={class:"card card-light"},HS={class:"card-header"},WS={class:"card-title"},qS={class:"card-body"},KS={key:0,class:"row"},YS={key:1,class:"row"},GS={class:"col-md-12 col-sm-12 col-12"};function QS(e,t,a,r,s,i){const d=g("alert"),m=g("date-time-field"),p=g("reuse-loader");return o(),l("div",BS,[_(d,{componentName:"UserExport"}),n("div",zS,[n("div",HS,[n("h3",WS,c(e.lang("users")),1)]),n("div",qS,[s.loading?u("",!0):(o(),l("div",KS,[_(m,{label:e.lang("select_date_range"),value:s.date_range,type:"date",name:"date_range",required:!1,onChange:i.onChange,range:"",currentYearDate:!1,format:"YYYY-MM-DD",classname:"col-sm-6",clearable:!0,editable:!0,disabled:!1,pickers:i.getPickers()},null,8,["label","value","onChange","pickers"]),n("a",{class:"btn btn-primary",onClick:t[0]||(t[0]=f=>i.onSubmit()),id:"range-submit",href:"javascript:;"},[t[1]||(t[1]=n("i",{class:"fas fa-save"},null,-1)),k(" "+c(e.lang("submit")),1)])])),s.loading?(o(),l("div",YS,[n("div",GS,[_(p,{"animation-duration":4e3,size:60})])])):u("",!0)])])])}const XS=U(US,[["render",QS],["__scopeId","data-v-a66cc7b3"]]);const JS={name:"edit-ticket-modal",description:"Edit Ticket modal Component",props:{showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""}},data(){return{formUniqueKey:"",submitFormInProgress:!1,scenario:"create",panel:"agent",showForm:!1,formSelected:!1,fetchFormFieldApi:"",selectedForm:""}},beforeMount(){this.getDefaultFormValue()},mixins:[as],methods:{getDefaultFormValue(){axios.get("/from/forms/organisation").then(e=>{this.selectedForm=e.data.data.data[0],this.updateFetchApi()}).catch(e=>{B(e,"faveo-form")})},updateFetchApi(){this.$store.dispatch("destroyFormInsatnce",this.formUniqueKey),this.$store.dispatch("unsetValidationError"),this.fetchFormFieldApi="/render/form?id="+this.selectedForm.id+"&mode=render",setTimeout(()=>{this.$store.dispatch("createNewFormInstance",{formUniqueKey:this.formUniqueKey,scenario:this.scenario||"create"}),this.formSelected=!0},1)},popUpSubmit(){document.getElementById("organization-submit-button").click()},formSubmit(e,t){this.$store.dispatch("setRecaptchaKey",t),this.onSubmit({user_id:this.userId})},afterSubmit(e){window.emitter.emit("reset-captcha"),setTimeout(()=>{window.emitter.emit("refreshUserData",!0),this.onClose()},1e3)},showModalMethod(){this.showForm=!0},onClose(){this.showForm=!1}},beforeDestroy(){this.$store.dispatch("unsetAlert")},components:{"form-with-captcha":ns}},ZS={id:"create-org",class:"float-end"},$S={id:"modal_body"},eD=["disabled"];function tD(e,t,a,r,s,i){const d=g("custom-loader"),m=g("loader"),p=g("alert"),f=g("form-renderer"),b=g("ValidationObserver"),y=g("form-with-captcha"),D=g("modal"),w=Q("tooltip");return o(),l("div",ZS,[s.submitFormInProgress?(o(),I(d,{key:0})):u("",!0),M((o(),l("a",{"data-bs-toggle":"modal",onClick:t[0]||(t[0]=(...S)=>i.showModalMethod&&i.showModalMethod(...S)),href:"javascript:;",type:"button","data-bs-target":"#modal_body",class:"btn btn-link ps-0 pe-0"},t[2]||(t[2]=[k("   "),n("i",{class:"fas fa-edit"},null,-1),k(" | ")]))),[[w,e.lang("create")]]),s.showForm?(o(),I(D,{key:1,showModal:s.showForm,onClose:i.onClose},{title:T(()=>[n("h4",null,c(e.lang("create_organization")),1)]),fields:T(()=>[e.showLoader?(o(),I(m,{key:0})):u("",!0),n("div",$S,[_(p,{componentName:"faveo-form"}),s.formUniqueKey&&s.formSelected?(o(),I(y,{key:0,loading:!e.showLoader,btnClass:"btn btn-primary pull-right",btnName:"submit",componentName:"faveo-form",btn_id:"organization-submit-button",formSubmit:i.formSubmit,page:"organisation_create_agent",recaptchaContainerClass:"mt-2",disableSubmit:s.submitFormInProgress},{fields:T(()=>[_(b,{ref:"faveoFormObserver"},{default:T(({values:S,errors:L,validate:x})=>[(o(),I(f,{key:s.formUniqueKey,fetchFormFieldApi:s.fetchFormFieldApi,category:"organisation",scenario:s.scenario,panel:s.panel,isInlineForm:!1,formUniqueKey:s.formUniqueKey},null,8,["fetchFormFieldApi","scenario","panel","formUniqueKey"]))]),_:1},512)]),_:1},8,["loading","formSubmit","disableSubmit"])):u("",!0)])]),controls:T(()=>[e.showLoader?u("",!0):(o(),l("button",{key:0,type:"button",class:"btn btn-primary pull-right",disabled:s.submitFormInProgress,onClick:t[1]||(t[1]=S=>i.popUpSubmit())},[t[3]||(t[3]=n("i",{class:"fas fa-sync"},null,-1)),k(" "+c(e.trans("update")),1)],8,eD))]),_:1},8,["showModal","onClose"])):u("",!0)])}const sD=U(JS,[["render",tD],["__scopeId","data-v-9b414b83"]]);function aD(e){const{email:t,mobile:a,modal:r}=e;let s={};r==="email_verified"&&(s.email=[t,"isRequired","isEmail"]),r==="mobile_verified"&&(s.mobile=[a,"isRequired"]);const i=new ye(pe),{errors:d,isValid:m}=i.validate(s);return ve.dispatch("setValidationError",d),{errors:d,isValid:m}}const nD={name:"user-modal",description:"User Modal component",props:{showModal:{type:Boolean,default:!1},userData:{type:[Object,String],default:""},onClose:{type:Function},title:{type:String,default:""}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},mobile:this.userData.mobile==="Not available"?"":this.userData.mobile,email:this.userData.email,country_code:this.userData.country_code===""||this.userData.country_code===0?91:this.userData.country_code,loading:!1,modal:this.title,data:{},iso:this.userData.iso,isPhoneValid:!0}},methods:{getCountCode(e){this.country_code=e},getCountIso(e){this.iso=e},onChange(e,t){this[t]=e},isValid(){const{errors:e,isValid:t}=aD(this.$data);return!!t},checkValidity(e,t){this.isPhoneValid=t},onSubmit(){this.isValid()&&this.isPhoneValid&&(this.loading=!0,this.isDisabled=!0,this.data.id=this.userData.id,this.modal==="email_verified"&&(this.data.email=this.email),this.modal==="mobile_verified"&&(this.data.country_code=this.country_code,this.data.iso=this.iso,this.data.mobile=this.mobile),R.post("/manual-verify",this.data).then(e=>{window.emitter.emit("refreshMailAndMobile"),X(e,"user-view"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,B(e,"user-view"),this.onClose()}))}},components:{"text-field":Se,phoneWithCountryCode:na}},iD={class:"modal-title"},oD={key:0,class:"row"},rD={key:1,class:"row"},lD=["disabled"];function dD(e,t,a,r,s,i){const d=g("text-field"),m=g("phoneWithCountryCode"),p=g("reuse-loader"),f=g("modal"),b=Q("focus-first-input");return a.showModal?(o(),I(f,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",iD,c(a.title=="email_verified"?e.lang("email_verify"):e.lang("mobile-verify")),1)]),fields:T(()=>[s.loading?u("",!0):M((o(),l("div",oD,[a.title==="email_verified"?(o(),I(d,{key:0,label:e.lang("email"),value:s.email,type:"email",name:"email",onChange:i.onChange,classname:"col-sm-12",required:!0},null,8,["label","value","onChange"])):u("",!0),a.title==="mobile_verified"?(o(),I(m,{key:1,id:"mobile",classname:"col-sm-12",name:"mobile",onChange:i.onChange,value:s.mobile,countryCode:s.country_code,onCountCode:i.getCountCode,required:!0,countryIso:s.iso,onCountIso:i.getCountIso,onValidPhoneNumber:i.checkValidity,fieldType:"FIXED_LINE_OR_MOBILE"},null,8,["onChange","value","countryCode","onCountCode","countryIso","onCountIso","onValidPhoneNumber"])):u("",!0)])),[[b]]),s.loading?(o(),l("div",rD,[_(p,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...y)=>i.onSubmit&&i.onSubmit(...y)),class:"btn btn-primary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.lang("update_and_verify")),1)],8,lD)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const cD=U(nD,[["render",dD]]);const uD={name:"contract-name",description:"Contract name component.",props:{data:{type:Object,required:!0}},data(){return{showDelete:!1,deleteObj:"",loading:!1}},methods:{removeOrgDept(e){this.showDelete=!0,this.deleteObj=e},onRemoveConfirm(){this.loading=!0,R.delete("/api/user/remove_user_department/"+this.data.user_id+"/"+this.data.org_id+"/"+this.deleteObj.id).then(e=>{this.loading=!1,this.deleteObj="",X(e,"dept_remove"),setTimeout(()=>{this.showDelete=!1,window.emitter.emit("orgDeptRemoved"),this.$store.dispatch("unsetAlert")},2e3)}).catch(e=>{B(e,"dept_remove")})}}},hD={class:"org-link-dept"},mD={class:"link_badge"},pD=["onClick"],gD={class:"modal-title"},fD={key:1};function _D(e,t,a,r,s,i){const d=g("alert"),m=g("reuse-loader"),p=g("modal");return o(),l("div",hD,[a.data.departments.length?(o(!0),l(E,{key:0},q(a.data.departments,f=>(o(),l("span",mD,[k(c(f.name)+" ",1),n("a",{href:"javascript:;",class:"text-muted",onClick:b=>i.removeOrgDept(f)},t[1]||(t[1]=[n("i",{class:"fas fa-times"},null,-1)]),8,pD)]))),256)):(o(),l(E,{key:1},[k("--")],64)),s.showDelete?(o(),I(p,{key:2,showModal:s.showDelete,onClose:()=>s.showDelete=!1,containerStyle:{width:"500px"}},{title:T(()=>[n("h4",gD,c(e.lang("detach")),1)]),alert:T(()=>[_(d,{componentName:"dept_remove"})]),fields:T(()=>[s.loading?(o(),I(m,{key:0})):u("",!0),s.loading?u("",!0):(o(),l("span",fD,c(e.lang("are_you_sure")),1))]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=f=>i.onRemoveConfirm()),class:"btn btn-primary"},[t[2]||(t[2]=n("i",{class:"fas fa-unlink"},null,-1)),k(" "+c(e.lang("detach")),1)])]),_:1},8,["showModal","onClose"])):u("",!0)])}const bD=U(uD,[["render",_D],["__scopeId","data-v-628f1481"]]);const vD={name:"product-assets",description:"Product asset Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function,default:()=>{}},userId:{type:[String,Number],default:""},deptCondition:{type:[Boolean,Number],default:!1}},data(){return{columns:this.deptCondition?["organization","organization_Departments","action"]:["organization","action"],options:{},apiUrl:"api/user/get_organization_with_department/"+this.userId,containerStyle:{width:"950px"},loading:!1,counter:0}},created(){window.emitter.on("orgDeptRemoved",this.refreshLink)},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{organization:pe("organisation"),organization_Departments:pe("organisation_departments")},texts:{filter:"",limit:""},columnsClasses:{organization:"org-linked-organization",departments:"org-linked-department"},templates:{organization:function(t,a){return e.h(Ve,{to:"/organizations/"+a.org_id},a.organization)},organization_Departments:(t,a)=>e.h(bD,{data:a}),action:(t,a)=>e.h(je,{data:a})},sortable:[],filterable:!1,pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query,page:t.page,limit:t.limit}},responseAdapter({data:t}){return window.emitter.emit("linkedOrgTotal",t.data.total),{data:t.data.data.map(a=>(a.delete_url=e.basePath()+"/api/remove-user-org/"+e.userId+"/"+a.org_id,a.alertComponentName="org-linked-datatable",a.deleteicon="fas fa-unlink",a.deleteTip="detach",a.deleteTitle="detach",a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}},methods:{refreshLink(){this.counter+=1}}},yD={class:"modal-title"},kD={class:"height-limit",id:"org-linked-table"},wD={key:0,class:"row"};function CD(e,t,a,r,s,i){const d=g("alert"),m=g("data-table"),p=g("custom-loader"),f=g("modal");return a.showModal?(o(),I(f,{showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle,key:s.counter},{title:T(()=>[n("h4",yD,c(a.deptCondition?e.trans("linked_org_dept"):e.trans("linked_org")),1)]),fields:T(()=>[n("div",kD,[_(d,{componentName:"org-linked-datatable"}),_(m,{url:s.apiUrl,dataColumns:s.columns,option:s.options,scroll_to:"org-linked-list"},null,8,["url","dataColumns","option"])]),s.loading?(o(),l("div",wD,[_(p,{duration:4e3})])):u("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const SD=U(vD,[["render",CD]]);function DD(e){const{organizations:t}=e;let a={organizations:[t,"isRequired"]};const r=new ye(pe),{errors:s,isValid:i}=r.validate(a);return ve.dispatch("setValidationError",s),{errors:s,isValid:i}}const TD={name:"org-modal",description:"Organization Modal component",props:{showModal:{type:Boolean,default:!1},title:{type:String,default:""},orgId:{type:[String,Number],default:""},userId:{type:[String,Number],default:""},onClose:{type:Function},deptCondition:{type:[Boolean,Number]}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,organizations:[],org_dept:[],org_dept_api:"",btnName:this.title==="assign"?"assign":"remove",btnClass:this.title==="assign"?"btn btn-primary":"btn btn-secondary",iconClass:this.title==="assign"?"fas fa-hand-point-right":"fas fa-unlink"}},methods:{onSubmit(){if(this.title==="assign"){if(this.isValid()){this.loading=!0,this.isDisabled=!0;const e={};if(e.organisation=this.organizations.map(t=>t.id),this.org_dept.length){e.organisation_department=this.org_dept.map(a=>a.id);let t=[];for(let a in this.org_dept)t.push(JSON.stringify({org_dept:this.org_dept[a].id,org_id:this.org_dept[a].org_id}));e.related=t}else e.organisation_department=[],e.related=[];R.post("/api/user-org-assign/"+this.userId,e).then(t=>{X(t,"org-assign-modal"),this.afterSuccess()}).catch(t=>{B(t,"org-assign-modal"),this.afterResponse()})}}else this.loading=!0,this.isDisabled=!0,R.delete("/api/remove-user-org/"+this.userId+"/"+this.orgId).then(e=>{X(e,"user-view"),this.afterSuccess()}).catch(e=>{B(e,"user-view"),this.afterResponse()})},afterSuccess(){this.afterResponse(),setTimeout(()=>{window.emitter.emit("refreshUserData","org_link"),this.onClose()},3e3)},afterResponse(){this.loading=!1,this.isDisabled=!1},isValid(){const{errors:e,isValid:t}=DD(this.$data);return!!t},onChange(e,t){if(this[t]=e,t==="organizations"){this.org_dept="";var a=[];if(e.length>0){for(var r in e)a.push(e[r].id);this.org_dept_api="/org/department/search?org_id="+a}}}},components:{"dynamic-select":_e}},MD={class:"modal-title"},OD={key:0},ID={key:1,class:"row"},AD={key:2,class:"row"},LD=["disabled"];function ED(e,t,a,r,s,i){const d=g("alert"),m=g("dynamic-select"),p=g("reuse-loader"),f=g("modal");return a.showModal?(o(),I(f,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",MD,c(e.lang(a.title)),1)]),alert:T(()=>[_(d,{componentName:"org-assign-modal"})]),fields:T(()=>[a.title==="remove"&&!s.loading?(o(),l("div",OD,[n("span",null,c(e.lang("are_you_sure_you_want_to_remove")),1)])):u("",!0),a.title==="assign"&&!s.loading?(o(),l("div",ID,[_(m,{label:e.lang("organizations"),multiple:!0,name:"organizations",classname:"col-sm-12",apiEndpoint:"/api/dependency/organizations",value:s.organizations,onChange:i.onChange,required:!0},null,8,["label","value","onChange"]),a.deptCondition?(o(),I(m,{key:0,label:e.lang("organization_department"),multiple:!0,name:"org_dept",classname:"col-sm-12",apiEndpoint:s.org_dept_api,value:s.org_dept,onChange:i.onChange,required:!1},null,8,["label","apiEndpoint","value","onChange"])):u("",!0)])):u("",!0),s.loading?(o(),l("div",AD,[_(p,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...b)=>i.onSubmit&&i.onSubmit(...b)),class:N(s.btnClass),disabled:s.isDisabled},[n("i",{class:N(s.iconClass)},null,2),k(" "+c(e.lang(s.btnName)),1)],10,LD)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const xD=U(TD,[["render",ED]]);const PD={name:"user-label",description:"User label component",props:{userObj:{type:Object,default:()=>{}},reloadDetails:{type:Function}},data(){return{labels:"",loading:!0,checked:!1,selectedLabels:[],show_loader:!1,search:""}},beforeMount(){this.getSelectedLabels()},methods:{getSelectedLabels(){this.userObj.labels&&this.userObj.labels.forEach(e=>{this.selectedLabels.push(e.title)})},subString(e){return ge(e,30)},onCreate(){this.redirect("/labels/create")},onCancel(){var e=document.getElementById("label-dropdown");e.classList.remove("show"),this.loading=!1},onClick(e){if(this.selectedLabels.includes(e)){for(var t in this.selectedLabels)if(this.selectedLabels[t]===e){this.selectedLabels.splice(t,1);break}}else this.selectedLabels.push(e)},getLabels(e){R.get("/api/dependency/labels?limit=all&meta=true&limit-by-status=false&search-query="+e).then(t=>{this.loading=!1,this.labels=t.data.data.labels}).catch(t=>{this.loading=!1})},onSubmit(){this.loading=!0;const e={};e.user_id=this.userObj.id,e.labels=this.selectedLabels,R.post("/labels-user",e).then(t=>{window.emitter.emit("refreshUserData"),this.onCancel(),this.loading=!1,X(t,"user-view")}).catch(t=>{this.onCancel(),this.loading=!1,B(t,"user-view")})},loadLabel(e){return He(e)}}},RD={id:"labels-div",class:"btn-group"},FD={key:0},ND=["placeholder"],VD=["onClick"],jD={id:"label_title"},UD=["innerHTML"],BD={key:0},zD={class:"text-center"},HD={class:"label_button"};function WD(e,t,a,r,s,i){const d=g("loader"),m=Q("tooltip");return o(),l("div",RD,[M((o(),l("button",{class:"btn btn-sm btn-light","data-bs-toggle":"dropdown",id:"labels-button",onClick:t[0]||(t[0]=p=>i.getLabels(s.search))},t[6]||(t[6]=[n("i",{class:"fas fa-edit"},null,-1),n("span",{class:"caret"},null,-1)]))),[[m,e.lang("Labels")]]),n("ul",{id:"label-dropdown",class:"dropdown-menu label_menu",onClick:t[5]||(t[5]=p=>p.stopPropagation())},[s.loading?(o(),l("li",FD,[_(d,{size:30,duration:4e3,color:"#1d78ff"})])):u("",!0),s.loading?u("",!0):(o(),l(E,{key:1},[n("li",null,[M(n("input",{type:"search",class:"form-control mb-1",name:"label",placeholder:e.lang("search"),"onUpdate:modelValue":t[1]||(t[1]=p=>s.search=p),onInput:t[2]||(t[2]=p=>i.getLabels(s.search))},null,40,ND),[[Fe,s.search]])]),(o(!0),l(E,null,q(s.labels,p=>(o(),l(E,null,[p.status||s.selectedLabels.includes(p.name)?(o(),l("li",{key:0,class:N(["labels",{active:s.selectedLabels.includes(p.name)}]),onClick:f=>i.onClick(p.name)},[n("div",{class:"color mr-2",id:"label_color",style:ne({backgroundColor:p.color})},null,4),M((o(),l("label",jD,[n("span",{innerHTML:i.subString(i.loadLabel(p.name))},null,8,UD)])),[[m,{content:i.loadLabel(p.name),html:!0}]]),s.selectedLabels.includes(p.name)?(o(),l("i",{key:0,class:N(["fas fa-times",{cancel_ar:e.isRtlLayout,cancel:!e.isRtlLayout}])},null,2)):u("",!0)],10,VD)):u("",!0)],64))),256)),s.labels.length===0?(o(),l("li",BD,[n("p",zD,c(e.lang("no_results_found")),1)])):u("",!0),n("li",HD,[n("button",{class:N(["btn btn-sm btn-light",{right:e.isRtlLayout,left:!e.isRtlLayout}]),onClick:t[3]||(t[3]=p=>i.onCancel())},[t[7]||(t[7]=n("i",{class:"fas fa-times"},null,-1)),k(" "+c(e.lang("cancel")),1)],2),n("button",{class:N(["btn btn-sm btn-primary left",{left:e.isRtlLayout,right:!e.isRtlLayout}]),onClick:t[4]||(t[4]=p=>i.onSubmit())},[t[8]||(t[8]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.lang("apply")),1)],2)])],64))])])}const qD=U(PD,[["render",WD],["__scopeId","data-v-eada02d5"]]);const KD={name:"user-details",description:"User details  page",props:{data:{type:[Object,String],default:""}},data(){return{loading:!1,showOrgModal:!1,userData:"",labels:"",orgModalTitle:"",orgId:"",modalTitle:"",showModal:!1,ban:this.data.ban,obj:{},usernameContent:"",emailContent:"",isShowUsername:!1,isShowEmail:!1,showLinkedModal:!1,linkedOrg:this.data.organizations,editVisibilty:!1,showAll:!1,showAllteams:!1,showAlltypes:!1,visibleTeams:[],visibleDepartments:[],visibleTypes:[]}},beforeMount(){this.data.label_field&&this.data.label_field.length>0&&(this.editVisibilty=this.data.label_field[0].display_for_agent)},created(){window.emitter.on("linkedOrgTotal",this.updateLength),this.allDepartments=this.data.departments||[],this.visibleDepartments=this.allDepartments.slice(0,2),this.allTeams=this.data.teams||[],this.visibleTeams=this.allTeams.slice(0,2),this.allTypes=this.data.types||[],this.visibleTypes=this.allTypes.slice(0,2)},computed:{showLocation(){return this.data.role!=="user"?!0:!!this.data.location}},mounted(){this.usernameContent=this.data.user_name,this.emailContent=this.data.email},methods:{showAllDepartments(){this.visibleDepartments=this.allDepartments,this.showAll=!0},showLessDepartments(){this.visibleDepartments=this.allDepartments.slice(0,2),this.showAll=!1},showAllTeams(){this.visibleTeams=this.allTeams,this.showAllteams=!0},showLessTeams(){this.visibleTeams=this.allTeams.slice(0,2),this.showAllteams=!1},showAllTypes(){this.visibleTypes=this.allTypes,this.showAlltypes=!0},showLessTypes(){this.visibleTypes=this.allTypes.slice(0,2),this.showAlltypes=!1},updateLength(e){e||(this.linkedOrg=[])},subString(e,t=20){return ge(e,t)},formattedPhone(e){if(e.phone_number&&e.phone_number!=="Not available"){var t=e.ext?"-"+e.ext:" ";return e.phone_country_code||e.phone_number?"+"+e.phone_country_code+" "+this.subString(e.phone_number)+t:this.subString(e.phone_number)}else return"---"},formattedMobile(e){return e.mobile&&e.mobile!=="Not available"?e.mobile.includes(" ")?"+"+this.subString(e.mobile):e.country_code?"+"+e.country_code+" "+this.subString(e.mobile):this.subString(e.mobile):"---"},onClose(){this.showModal=!1,this.showOrgModal=!1,this.showLinkedModal=!1,this.$store.dispatch("unsetValidationError")},userModal(e){this.showModal=!this.data[e],this.modalTitle=e},commonMethod(e,t){e==="/settings/user/status"&&(this.obj.settings_status=t),this.obj.user_id=this.data.id,R.post(e,this.obj).then(a=>{this.loading=!1,window.emitter.emit("refreshUserData"),X(a,"user-view")}).catch(a=>{this.loading=!1,B(a,"user-view")})},orgClick(e,t){this.orgId=t,this.showOrgModal=!0,this.orgModalTitle=e},copyMethod(e,t){let a=document.createElement("input");a.type="text",a.value=t,document.body.appendChild(a),a.select(),document.execCommand("Copy"),e==="username"?this.isShowUsername=!0:this.isShowEmail=!0,document.body.removeChild(a),setTimeout(()=>{this.isShowUsername=!1,this.isShowEmail=!1},1e3)},tooltipText(e,t){return e.length>t?e:""},loadLabel(e){return He(e)}},components:{"org-modal":xD,"org-linked-modal":SD,"user-modal":cD,"user-label":qD,"org-create-modal":sD}},YD={class:"card card-light card-outline"},GD={key:0,id:"load",class:"row"},QD={key:1,class:"card-body box-profile"},XD={class:"text-center"},JD={class:"profile-username text-center"},ZD={class:"text-muted text-center"},$D=["id"],e2={class:"list-group list-group-unbordered mb-3"},t2={class:"list-group-item"},s2={class:"Username"},a2={class:"float-end"},n2={key:0,class:"copyClip"},i2={class:"list-group-item"},o2={class:"float-end"},r2={key:0,class:"copyClip"},l2={key:0,class:"list-group-item"},d2={class:"float-end"},c2=["innerHTML"],u2={class:"list-group-item"},h2={class:"float-end text-capitalize text-green"},m2={key:1,class:"list-group-item"},p2={class:"float-end"},g2={class:"list-group-item"},f2={class:"float-end"},_2={key:2,class:"list-group-item"},b2={class:"float-end"},v2={key:3,class:"list-group-item"},y2={class:"float-end"},k2={key:4,class:"list-group-item"},w2={class:"float-end"},C2={key:5,class:"list-group-item"},S2={id:"refresh-org"},D2={class:"float-end"},T2={key:1,class:"float-end"},M2={key:6,class:"list-group-item"},O2={id:"refresh-org"},I2={key:0,class:"float-end"},A2={key:1,class:"department-list float-end"},L2=["href"],E2={key:0},x2={key:7,class:"list-group-item"},P2={id:"refresh-team"},R2={key:0,class:"float-end"},F2={key:1,class:"department-list float-end"},N2=["href"],V2={key:0},j2={key:8,class:"list-group-item"},U2={id:"refresh-team"},B2={key:0,class:"float-end"},z2={key:1,class:"department-list float-end"},H2={key:0},W2={key:9,class:"list-group-item"},q2={class:"list-group-item"},K2={key:0,class:"float-end cursor-pointer"},Y2={class:"hover-color"},G2={key:0,class:"hover-color"},Q2={key:1},X2={key:1,class:"float-end cursor-pointer"},J2={class:"hover-color"};function Z2(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("faveo-image-element"),p=g("user-label"),f=g("org-create-modal"),b=g("org-modal"),y=g("org-linked-modal"),D=g("user-modal"),w=Q("tooltip");return o(),l("div",YD,[s.loading||!a.data?(o(),l("div",GD,[_(d,{"animation-duration":4e3,size:40})])):u("",!0),a.data&&!s.loading?(o(),l("div",QD,[n("div",XD,[_(m,{id:"userimg","source-url":a.data.profile_pic,classes:["profile-user-img img-fluid img-rounder img-circle"],"alternative-text":"User Image"},null,8,["source-url"])]),M((o(),l("h3",JD,[k(c(i.subString(a.data.full_name)),1)])),[[w,a.data.full_name]]),n("p",ZD,[M(n("span",{class:N([{success:a.data.email_verified==1,danger:a.data.email_verified!=1},"fas fa-envelope"]),onClick:t[0]||(t[0]=S=>i.userModal("email_verified"))},null,2),[[w,a.data.email_verified==1?e.lang("user_email_is_verified"):e.lang("user_has_not_verified_email")]]),M(n("span",{class:N([{success:a.data.mobile_verified==1,danger:a.data.mobile_verified!=1},"fas fa-mobile-alt"]),onClick:t[1]||(t[1]=S=>i.userModal("mobile_verified"))},null,2),[[w,a.data.mobile_verified==1?e.lang("user_mobile_is_verified"):e.lang("user_has_not_verified_mobile")]]),M(n("span",{class:N([{success:a.data.is_2fa_enabled==1,danger:a.data.is_2fa_enabled!=1},"fas fa-shield-alt"]),id:"2fa_status_user__"+a.data.id},null,10,$D),[[w,a.data.is_2fa_enabled==1?e.lang("user_enabled_2fa"):e.lang("user_not_enabled_2fa")]])]),n("ul",e2,[n("li",t2,[n("div",s2,[n("b",null,c(e.trans("user_name")),1),n("div",a2,[M((o(),l("a",null,[k(c(i.subString(a.data.user_name)),1)])),[[w,a.data.user_name]]),s.isShowUsername?(o(),l("span",n2,c(e.lang("copied")),1)):u("",!0),M((o(),l("button",{class:"btn btn-link ps-0 pe-0",onClick:t[2]||(t[2]=Ee(S=>i.copyMethod("username",a.data.user_name),["prevent"]))},t[12]||(t[12]=[k("  "),n("i",{class:"far fa-copy"},null,-1)]))),[[w,e.lang("copy")]])])])]),n("li",i2,[n("b",null,c(e.trans("email")),1),n("div",o2,[M((o(),l("a",null,[k(c(i.subString(a.data.email)),1)])),[[w,a.data.email]]),s.isShowEmail?(o(),l("span",r2,c(e.lang("copied")),1)):u("",!0),M((o(),l("button",{class:"btn btn-link ps-0 pe-0",onClick:t[3]||(t[3]=Ee(S=>i.copyMethod("email",a.data.email),["prevent"]))},t[13]||(t[13]=[k("  "),n("i",{class:"far fa-copy"},null,-1)]))),[[w,e.lang("copy")]])])]),a.data.role==="user"&&s.editVisibilty?(o(),l("li",l2,[n("b",null,c(e.trans("labels")),1),t[14]||(t[14]=k("  ")),n("div",d2,[(o(!0),l(E,null,q(a.data.labels,(S,L)=>M((o(),l("a",{target:"_blank",class:"badge me-1",style:ne({backgroundColor:S.color,color:"#FFF"})},[n("span",{innerHTML:i.subString(i.loadLabel(S.title))},null,8,c2)],4)),[[w,{content:i.loadLabel(S.title),html:!0}]])),256))]),_(p,{userObj:a.data,reloadDetails:e.reloadData},null,8,["userObj","reloadDetails"])])):u("",!0),n("li",u2,[n("b",null,c(e.lang("role")),1),M((o(),l("a",h2,[k(c(i.subString(a.data.role)),1)])),[[w,a.data.role]])]),a.data.role!=="user"?(o(),l("li",m2,[n("b",null,c(e.lang("work_phone")),1),M((o(),l("a",p2,[k(c(i.formattedPhone(a.data)),1)])),[[w,a.data.phone_number?a.data.phone_number:""]])])):u("",!0),n("li",g2,[n("b",null,c(e.lang("mobile")),1),M((o(),l("a",f2,[k(c(i.formattedMobile(a.data)),1)])),[[w,a.data.mobile?a.data.mobile:""]])]),a.data.role==="user"&&a.data.mobile_ext?(o(),l("li",_2,[n("b",null,c(e.lang("ext")),1),M((o(),l("a",b2,[k(c(i.subString(a.data.mobile_ext)),1)])),[[w,a.data.mobile_ext?a.data.mobile_ext:""]])])):u("",!0),a.data.role!=="user"?(o(),l("li",v2,[n("b",null,c(e.lang("agent_time_zone")),1),M((o(),l("a",y2,[k(c(a.data.timezone?i.subString(a.data.timezone.name):"---"),1)])),[[w,a.data.timezone?a.data.timezone.name:""]])])):u("",!0),i.showLocation?(o(),l("li",k2,[n("b",null,c(e.lang("location")),1),M((o(),l("a",w2,[k(c(a.data.location?i.subString(a.data.location.title):"---"),1)])),[[w,a.data.location?a.data.location.title:""]])])):u("",!0),a.data.role==="user"?(o(),l("li",C2,[n("div",S2,[n("b",null,c(e.lang("organisation")),1),s.linkedOrg.length===0&&!a.data.processing_account_disabling?(o(),l(E,{key:0},[n("div",D2,[M((o(),l("button",{class:"btn btn-link ps-0 pe-0",onClick:t[4]||(t[4]=S=>i.orgClick("assign")),href:"javascript:;"},t[15]||(t[15]=[k("  "),n("i",{class:"fas fa-tasks"},null,-1)]))),[[w,e.lang("Assign")]])]),_(f,{showModal:s.showOrgModal,userId:a.data.id},null,8,["showModal","userId"])],64)):(o(),l("div",T2,[M((o(),l("button",{class:"btn btn-link link-eye",onClick:t[5]||(t[5]=S=>s.showLinkedModal=!0),href:"javascript:;"},t[16]||(t[16]=[n("i",{class:"fas fa-eye"},null,-1)]))),[[w,e.lang("view_linked_org")]])]))])])):u("",!0),a.data.role!=="user"?(o(),l("li",M2,[n("div",O2,[n("b",null,c(e.lang("departments")),1),a.data.departments.length===0?(o(),l("a",I2,"---")):(o(),l("ul",A2,[(o(!0),l(E,null,q(s.visibleDepartments,(S,L)=>(o(),l("li",{key:S.id},[M((o(),l("a",{href:e.basePath()+"/admin/department/"+S.id},[k(c(i.subString(S.name,10)),1)],8,L2)),[[w,S.name]])]))),128)),a.data.departments.length>2?(o(),l("div",E2,[s.showAll?(o(),l("a",{key:0,style:{color:"#444444"},class:"cursor-pointer",onClick:t[6]||(t[6]=(...S)=>i.showLessDepartments&&i.showLessDepartments(...S))},c(e.lang("view_less")),1)):M((o(),l("a",{key:1,style:{color:"#444444"},class:"cursor-pointer",onClick:t[7]||(t[7]=(...S)=>i.showAllDepartments&&i.showAllDepartments(...S))},[k(c(e.lang("view_all")),1)])),[[w,e.trans("view_all_departments")]])])):u("",!0)]))])])):u("",!0),a.data.role!=="user"?(o(),l("li",x2,[n("div",P2,[n("b",null,c(e.lang("teams")),1),t[17]||(t[17]=k("      ")),a.data.teams.length===0?(o(),l("a",R2,"---")):(o(),l("ul",F2,[(o(!0),l(E,null,q(s.visibleTeams,(S,L)=>(o(),l("li",null,[M((o(),l("a",{href:e.basePath()+"/admin/team/"+S.id},[k(c(i.subString(S.name,10)),1)],8,N2)),[[w,S.name]])]))),256)),a.data.teams.length>2?(o(),l("div",V2,[s.showAllteams?(o(),l("a",{key:0,style:{color:"#444444"},class:"cursor-pointer",onClick:t[8]||(t[8]=(...S)=>i.showLessTeams&&i.showLessTeams(...S))},c(e.lang("view_less")),1)):M((o(),l("a",{key:1,style:{color:"#444444"},class:"cursor-pointer",onClick:t[9]||(t[9]=(...S)=>i.showAllTeams&&i.showAllTeams(...S))},[k(c(e.lang("view_all")),1)])),[[w,e.trans("view_all_teams")]])])):u("",!0)]))])])):u("",!0),a.data.role!=="user"?(o(),l("li",j2,[n("div",U2,[n("b",null,c(e.lang("type")),1),t[18]||(t[18]=k("      ")),a.data.types.length===0?(o(),l("a",B2,"---")):(o(),l("ul",z2,[(o(!0),l(E,null,q(s.visibleTypes,(S,L)=>(o(),l("li",null,[M((o(),l("a",null,[k(c(i.subString(S.name,10)),1)])),[[w,S.name]])]))),256)),a.data.types.length>2?(o(),l("div",H2,[s.showAlltypes?(o(),l("a",{key:0,style:{color:"#444444"},class:"cursor-pointer",onClick:t[10]||(t[10]=(...S)=>i.showLessTypes&&i.showLessTypes(...S))},c(e.lang("view_less")),1)):M((o(),l("a",{key:1,style:{color:"#444444"},class:"cursor-pointer",onClick:t[11]||(t[11]=(...S)=>i.showAllTypes&&i.showAllTypes(...S))},[k(c(e.lang("view_all")),1)])),[[w,e.trans("view_all_types")]])])):u("",!0)]))])])):u("",!0),a.data.role==="user"?(o(),l("li",W2,[n("b",null,c(e.lang("address")),1),t[19]||(t[19]=k("      ")),M((o(),l("p",null,[k(c(a.data.internal_note),1)])),[[w,a.data.internal_note]])])):u("",!0),(o(!0),l(E,null,q(a.data.custom_field_values,S=>(o(),l("li",q2,[M((o(),l("b",null,[k(c(i.subString(S.label,30)),1)])),[[w,i.tooltipText(S.label,30)]]),t[20]||(t[20]=k("      ")),Array.isArray(S.value)?(o(),l("span",K2,[(o(!0),l(E,null,q(S.value,(L,x)=>(o(),l(E,null,[M((o(),l("a",Y2,[k(c(i.subString(L,30)),1)])),[[w,i.tooltipText(L,30)]]),x!==S.value.length-1?(o(),l("span",G2,", ")):(o(),l("span",Q2," "))],64))),256))])):M((o(),l("a",X2,[n("span",J2,c(i.subString(S.value,15)),1)])),[[w,S.value]])]))),256))])])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showOrgModal?(o(),I(b,{key:0,onClose:i.onClose,showModal:s.showOrgModal,title:s.orgModalTitle,orgId:s.orgId,userId:a.data.id,deptCondition:a.data.OrganizationDepartmentStatus},null,8,["onClose","showModal","title","orgId","userId","deptCondition"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showLinkedModal?(o(),I(y,{key:0,onClose:i.onClose,showModal:s.showLinkedModal,userId:a.data.id,deptCondition:a.data.OrganizationDepartmentStatus},null,8,["onClose","showModal","userId","deptCondition"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(D,{key:0,onClose:i.onClose,showModal:s.showModal,title:s.modalTitle,userData:a.data},null,8,["onClose","showModal","title","userData"])):u("",!0)]),_:1})])}const $2=U(KD,[["render",Z2],["__scopeId","data-v-1ec43cd9"]]);function eT(e){const{departments:t}=e;let a={departments:[t,"isRequired"]};const r=new ye(pe),{errors:s,isValid:i}=r.validate(a);return ve.dispatch("setValidationError",s),{errors:s,isValid:i}}const tT={name:"org-modal",description:"Organization Modal component",props:{role:{type:String,default:""},role_to:{type:String,default:""},showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""},onClose:{type:Function},dept:{type:Array,default:()=>[]},user:{type:Object,default:()=>{}}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,departments:this.dept}},computed:{apiUrl(){return"/role-change-"+this.role_to+"/"}},methods:{onSubmit(){(this.role_to=="user"||this.isValid())&&this.changeRole()},changeRole(){this.loading=!0,this.isDisabled=!0;const e={};if(this.role_to!=="user"){var t=[];for(var a in this.departments)t.push(this.departments[a].id);e.primary_department=t}R.post(this.apiUrl+this.userId,e).then(r=>{X(r,"user-view"),this.afterSuccess()}).catch(r=>{B(r,"user-view"),this.afterResponse()})},afterSuccess(){this.afterResponse(),window.emitter.emit("refreshUserData"),window.emitter.emit("UserTicketsrefreshData"),window.emitter.emit("UserTicketsuncheckCheckbox"),window.emitter.emit("refreshUserReport")},afterResponse(){this.loading=!1,this.isDisabled=!1,this.onClose()},isValid(){const{errors:e,isValid:t}=eT(this.$data);return!!t},onChange(e,t){this[t]=e}},components:{"dynamic-select":_e}},sT={class:"modal-title"},aT={key:0},nT={key:1,class:"row"},iT={key:2,class:"row"},oT=["disabled"];function rT(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("reuse-loader"),p=g("modal");return a.showModal?(o(),I(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",sT,c(e.lang("role_change"))+" "+c(a.role)+" to "+c(a.role_to),1)]),fields:T(()=>[a.role_to==="user"&&!s.loading?(o(),l("div",aT,[n("span",null,[k(c(e.lang("changing_role_to_user"))+" ",1),n("b",null,c(a.user.user_name?a.user.user_name:a.user.email),1),k(". "+c(e.lang("do_you_want_to_proceed_to_change_their_role_to_user")),1)])])):u("",!0),!s.loading&&a.role_to!=="user"?(o(),l("div",nT,[_(d,{label:e.lang("departments"),multiple:!0,name:"departments",classname:"col-sm-12",apiEndpoint:"/api/dependency/departments",value:s.departments,onChange:i.onChange,required:!0},null,8,["label","value","onChange"])])):u("",!0),s.loading?(o(),l("div",iT,[_(m,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...f)=>i.onSubmit&&i.onSubmit(...f)),class:"btn btn-primary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.lang("proceed")),1)],8,oT)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const lT=U(tT,[["render",rT]]);const dT={name:"password-modal",description:"Password Modal component",props:{showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,password:"",class_name:"form-control",text_class:"",statusText:"",styleObj:{},bar_class:""}},methods:{triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()},mouseoverPass(){var e=document.getElementById("changepassword1");e.type==="password"?(e.type="text",document.getElementById("eyeIcons").classList.remove("fa-eye-slash"),document.getElementById("eyeIcons").classList.add("fa-eye")):(e.type="password",document.getElementById("eyeIcons").classList.remove("fa-eye"),document.getElementById("eyeIcons").classList.add("fa-eye-slash"))},keyUp(e){this.statusText=this.checkStrLength(e)},checkStrLength(e){let t=ci(e);return t==="null"?(t="Please enter a password",this.class_name="form-control is-invalid",this.text_class="text-danger",this.bar_class="bg-danger",this.styleObj={width:"0%"}):t==="too_short"||t==="your_password_must_be_8_character"?(this.class_name="form-control is-invalid",this.text_class="text-danger",this.bar_class="bg-danger",this.styleObj={width:e.length<7?e.length/.6+"%":"25%"}):t==="weak"?(t="your_password_must_be_8_character",this.class_name="form-control is-invalid",this.text_class="text-danger",this.bar_class="bg-danger",this.styleObj={width:"50%"}):(this.class_name="form-control is-valid",this.text_class="text-success",this.bar_class="bg-success",this.styleObj={width:"100%"}),t},getRandomPass(){this.class_name="form-control",this.text_class="",this.bar_class="",this.statusText="",this.styleObj={},R.get("/get/random/password").then(e=>{this.password=e.data.data}).catch(e=>{this.password=""})},onSubmit(){if(this.password.length<8)return this.class_name="form-control is-invalid",this.text_class="text-danger",this.bar_class="bg-danger",this.styleObj={width:this.password.length/.6+"%"},this.statusText="your_password_must_be_8_character";if(this.password.match(/^(?=\S*[a-z])(?=\S*[A-Z])(?=\S*\d)(?=\S*[^\w\s])\S{8,}/)){this.loading=!0,this.isDisabled=!0;const e={};e.change_password=this.password,R.post("/changepassword/"+this.userId,e).then(t=>{X(t,"user-view"),this.afterSuccess()}).catch(t=>{B(t,"user-view"),this.afterResponse()})}},afterSuccess(){this.afterResponse(),window.emitter.emit("refreshUserData")},afterResponse(){this.loading=!1,this.isDisabled=!1,this.onClose()}}},cT={class:"modal-title"},uT={key:0,class:"row"},hT={class:"col-sm-12 form-group",id:"register"},mT={class:"input-group mb-3"},pT={class:"pass-status"},gT={key:0,class:"progress progress-sm"},fT={key:1,class:"row"},_T=["disabled"];function bT(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("modal"),p=Q("focus-first-input");return a.showModal?(o(),I(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",cT,c(e.lang("change_password")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",uT,[n("div",hT,[n("label",null,c(e.lang("new_password")),1),t[8]||(t[8]=n("span",{class:"text-danger"}," *",-1)),n("button",{class:"btn btn-sm btn-light float-end",id:"random",onClick:t[0]||(t[0]=f=>i.getRandomPass())},[t[6]||(t[6]=n("i",{class:"fas fa-key"},"  ",-1)),k(c(e.lang("password_generator")),1)]),M((o(),l("div",mT,[M(n("input",{type:"password",class:N(s.class_name),name:"change_password",id:"changepassword1","onUpdate:modelValue":t[1]||(t[1]=f=>s.password=f),onKeyup:[t[2]||(t[2]=f=>i.keyUp(s.password)),t[3]||(t[3]=st((...f)=>i.triggerEvent&&i.triggerEvent(...f),["enter"]))]},null,34),[[Fe,s.password]]),n("a",{id:"basic-addon",class:"input-group-text",onClick:t[4]||(t[4]=f=>i.mouseoverPass())},t[7]||(t[7]=[n("i",{id:"eyeIcons",class:"fas fa-eye-slash"},null,-1)]))])),[[p]]),n("div",pT,[n("span",{class:N(s.text_class),id:"demo"},c(e.lang(s.statusText)),3),s.bar_class?(o(),l("div",gT,[n("div",{class:N(["progress-bar progress-bar-striped",s.bar_class]),role:"progressbar",style:ne(s.styleObj)},null,6)])):u("",!0)])])])),s.loading?(o(),l("div",fT,[_(d,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[5]||(t[5]=(...f)=>i.onSubmit&&i.onSubmit(...f)),class:"btn btn-primary",disabled:s.isDisabled},[t[9]||(t[9]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.lang("proceed")),1)],8,_T)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const vT=U(dT,[["render",bT],["__scopeId","data-v-f45475ee"]]);function yT(e){let t={};e.condition=="change_assignee"&&(t.assign=[e.assign,"isRequired"]),e.req_condition=="change_owner"&&(t.req_assign=[e.req_assign,"isRequired"]);const a=new ye(pe),{errors:r,isValid:s}=a.validate(t);return ve.dispatch("setValidationError",r),{errors:r,isValid:s}}const kT={name:"deactivate-modal",description:"Deactivate Modal component",props:{showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""},onClose:{type:Function},role:{type:String,default:""},user:{type:Object,default:()=>{}}},data(){return{isDisabled:!1,containerStyle:{width:"650px"},radioOptions:[{name:"unassign_all_open_tickets",value:"surrender"},{name:"change_assignee",value:"change_assignee"}],loading:!1,condition:"surrender",assign:"",labelStyle:{display:"none"},data:{},req_condition:"close",req_assign:"",reqOptions:[{name:"close_all_open_tickets",value:"close"},{name:"change_requester",value:"change_owner"}],userAPI:this.role==="user"?"/api/dependency/users?meta=true&supplements=user-only":"/api/dependency/users?deactivate_id="+this.userId+"&meta=true",userEndpoint:this.role==="user"?"/api/dependency/users?meta=true&supplements=user-only":"/api/dependency/users?deactivate_id="+this.userId+"&meta=true&supplements=agent-admin-only"}},methods:{onChange(e,t){this[t]=e,this.req_assign=this.req_condition=="close"?"":this.req_assign,this.assign=this.condition=="surrender"?"":this.assign},isValid(){const{errors:e,isValid:t}=yT(this.$data);return!!t},onSubmit(){this.isValid()&&(this.loading=!0,this.isDisabled=!0,this.data.action_on_owned_tickets=this.req_condition,this.req_assign&&(this.data.set_owner_to=this.req_assign.id),this.data.action_on_assigned_tickets=this.condition,this.assign&&(this.data.set_assignee_to=this.assign.id),R.post("/api/account/deactivate/"+this.userId,this.data).then(e=>{window.emitter.emit("refreshUserData","deactivate"),X(e,"user-view"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,B(e,"user-deactivate")}))}},components:{"radio-button":Pe,"dynamic-select":_e}},wT={class:"modal-title"},CT={key:0},ST={class:"row"},DT={key:1},TT={id:"bold"},MT={class:"row"},OT={key:2,class:"row"},IT=["disabled"];function AT(e,t,a,r,s,i){const d=g("alert"),m=g("radio-button"),p=g("dynamic-select"),f=g("reuse-loader"),b=g("modal");return a.showModal?(o(),I(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{alert:T(()=>[_(d,{componentName:"user-deactivate"})]),title:T(()=>[n("h4",wT,c(e.lang("deactivate")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",CT,[n("b",null,[k(c(e.lang("what_should_happen_to_tickets_requested_by"))+" ",1),n("i",null,c(a.user.meta_name?a.user.meta_name:a.user.email),1),t[1]||(t[1]=k(" ? "))]),t[2]||(t[2]=n("br",null,null,-1)),t[3]||(t[3]=n("br",null,null,-1)),n("div",ST,[_(m,{options:s.reqOptions,label:e.lang("Options"),name:"req_condition",value:s.req_condition,onChange:i.onChange,classname:"form-group col-sm-12",labelStyle:s.labelStyle},null,8,["options","label","value","onChange","labelStyle"]),s.req_condition=="change_owner"?(o(),I(p,{key:0,multiple:!1,name:"req_assign",label:e.lang("select_owner"),classname:"col-sm-12",value:s.req_assign,onChange:i.onChange,apiEndpoint:s.userAPI,required:!0,clearable:!!s.req_assign,strlength:"50",labelStyle:s.labelStyle},null,8,["label","value","onChange","apiEndpoint","clearable","labelStyle"])):u("",!0)])])),a.role!="user"?(o(),l("div",DT,[n("b",TT,[k(c(e.lang("what_should_happen_to_tickets_assigned_to"))+" ",1),n("i",null,c(a.user.meta_name?a.user.meta_name:a.user.email),1),t[4]||(t[4]=k(" ?"))]),t[5]||(t[5]=n("br",null,null,-1)),t[6]||(t[6]=n("br",null,null,-1)),n("div",MT,[_(m,{options:s.radioOptions,label:e.lang("Options"),name:"condition",value:s.condition,onChange:i.onChange,classname:"form-group col-sm-12",labelStyle:s.labelStyle},null,8,["options","label","value","onChange","labelStyle"]),s.condition=="change_assignee"?(o(),I(p,{key:0,label:e.lang("assign"),multiple:!1,labelStyle:s.labelStyle,name:"assign",classname:"col-sm-12",apiEndpoint:s.userEndpoint,strlength:"50",value:s.assign,onChange:i.onChange,required:!0,clearable:!!s.assign},null,8,["label","labelStyle","apiEndpoint","value","onChange","clearable"])):u("",!0)])])):u("",!0),s.loading?(o(),l("div",OT,[_(f,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...y)=>i.onSubmit&&i.onSubmit(...y)),class:"btn btn-secondary",disabled:s.isDisabled},[t[7]||(t[7]=n("i",{class:"fas fa-trash"},null,-1)),k(" "+c(e.lang("deactivate")),1)],8,IT)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const LT=U(kT,[["render",AT],["__scopeId","data-v-c8c1ee84"]]);const ET={name:"agent-tickets",description:"Agent panel tickets page",setup(){const e=ue();return{getUserData:ee(()=>e.getters.getUserData)}},props:{data:{type:Object,default:()=>{}},afterAction:{type:Function,default:()=>{}},dept:{type:Array,default:()=>[]},role:{type:String,default:""},id:{type:[String,Number],default:""},user:{type:Object,default:()=>{}},two_factor:{type:[Boolean,Number],default:!1},disabled_process:{type:[Boolean,Number],default:!1},permissions:{type:Array,default:()=>[]},reloadDetails:{type:Function}},data(){return{currentTabId:1,category:"",status_type:"",tabs:[],loading:!0,hasDataPopulated:!1,ticketId:[],showModal:!1,statusList:"",showMergeModal:!1,showAssignModal:!1,showRoleModal:!1,showPasswordModal:!1,showDeactivateModal:!1,parent_tickets:[],change_status:"",role_to:"",componentTitle:"UserTickets",apiUrl:"",showDisable2FA:!1,ticketTabData:{},statusLoader:!1,statusDiv:0,allEntries:[],showPermissionModal:!1,showDiv:!0,showMergeUSerModal:!1}},beforeMount(){this.category="open",this.getCount()},computed:{updatedPermissions(){return this.permissions},userRole(){return sessionStorage.getItem("user_role")}},created(){window.emitter.on("refreshUserActions",this.updateActionsDiv)},methods:{reloadData(e){this.afterAction(e)},updateActionsDiv(){this.showDiv=!1,setTimeout(()=>{this.showDiv=!0},1e3)},userActionDivMounted(){let e={};e.user_id=this.id,e.permissions=this.updatedPermissions,e.labels=this.labels,window.emitter.emit("user-permission-mounted",e)},getStatusList(){if(this.statusList="",this.ticketId.length>0){this.statusLoader=!0;let e={meta:!0,supplements:It(this.ticketId),limit:"all"};R.get("/api/dependency/statuses",{params:e}).then(t=>{this.statusLoader=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.statusLoader=!1})}else this.statusDiv+=1,this.$store.dispatch("setAlert",{type:"danger",message:this.lang("please_select_tickets"),component_name:"UserTickets"})},getStatus(e){this.ticketId.length>0?(this.showModal=!0,this.change_status=e,this.statusIds=this.tic_statuses):(this.$store.dispatch("setAlert",{type:"danger",message:this.lang("please_select_tickets"),component_name:"UserTickets"}),this.showModal=!1)},mergeTicket(){this.ticketId.length>1?(this.showMergeModal=!0,R.get("/api/agent/tickets/get-merge-tickets",{params:{"ticket-ids":this.ticketId}}).then(e=>{this.parent_tickets=e.data.data;for(var t in this.parent_tickets)this.parent_tickets[t].id=this.parent_tickets[t].ticket_id,this.parent_tickets[t].subject=this.parent_tickets[t].name,this.parent_tickets[t].name=this.parent_tickets[t].title,delete this.parent_tickets[t].ticket_id,delete this.parent_tickets[t].title}),this.parent_tickets=[]):(this.showMergeModal=!1,this.$store.dispatch("setAlert",{type:"danger",message:this.lang("please_select_more_tickets"),component_name:"UserTickets"}))},tickets(e){this.category=e.id,this.apiUrl=e.url},changeRole(e){this.role_to=e,this.showRoleModal=!0},onClose(){this.showModal=!1,this.showMergeModal=!1,this.showAssignModal=!1,this.showRoleModal=!1,this.showPasswordModal=!1,this.showDeactivateModal=!1,this.showDisable2FA=!1,this.showPermissionModal=!1,this.showMergeUSerModal=!1,this.getCount(),this.$store.dispatch("unsetValidationError")},ticketsData(e){this.ticketId=e},allData(e){this.allEntries=e},getCount(){let e,t="api/agent/ticket-count?",a=window.location.pathname.split("/");a[a.length-2]==="user"?(e="owner-ids[]="+this.id,t+=e):(e="assignee-ids[]="+this.id,t+=e),R.get(t).then(r=>{this.hasDataPopulated=!0,this.loading=!1,this.tabs=[];for(var s in r.data.data)if(r.data.data.hasOwnProperty(s)){let i={id:s,title:s,count:r.data.data[s]};switch(i.title){case"open":i.url="api/agent/ticket-list?category=inbox&"+e;break;case"closed":i.url="api/agent/ticket-list?category=closed&"+e;break;case"deleted":i.url="api/agent/ticket-list?category=deleted&"+e;break;case"unapproved":i.url="api/agent/ticket-list?category=unapproved&"+e;break}this.tabs.push(i)}this.tickets(this.tabs[0])}).catch(r=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatus(e){this.showModal=!0,this.change_status=e},mergeUSerModal(){this.showMergeUSerModal=!0}},components:{"agent-tickets-table":Zs,"change-status-modal":Dt,"merge-ticket-modal":ts,"assign-ticket-modal":Tt,"user-role-modal":lT,"password-change-modal":vT,"user-deactivate-modal":LT,"remove-modal":ma,"merge-user-modal":Ma}},xT={id:"agent-tickets-table"},PT={class:"row"},RT={class:"col-md-12"},FT={class:"card card-light card-outline"},NT={class:"card-header border-0"},VT={key:0,class:"float-end user_view"},jT={key:0,id:"users-action-div",class:"inline-block"},UT={class:"card-body"},BT={key:0},zT={class:"nav nav-tabs",role:"tablist"},HT={class:"nav-item"},WT=["onClick"],qT={class:"badge text-bg-primary"},KT={class:"tab-content"},YT={class:"active tab-pane",role:"tabpanel"},GT={class:"mt-3"},QT={key:0,class:"dropdown-menu status-list"},XT={key:0,class:"row"},JT=["onClick"],ZT={key:1,class:"dropdown-item",href:"javascript:;"},$T={id:"my_tic"},eM={key:1,class:"row"};function tM(e,t,a,r,s,i){const d=g("alert"),m=g("router-link"),p=g("reuse-loader"),f=g("agent-tickets-table"),b=g("change-status-modal"),y=g("merge-ticket-modal"),D=g("assign-ticket-modal"),w=g("user-role-modal"),S=g("password-change-modal"),L=g("user-deactivate-modal"),x=g("remove-modal"),P=g("merge-user-modal"),F=Q("tooltip");return o(),l("div",xT,[n("div",PT,[n("div",RT,[_(d,{componentName:"UserTickets"})])]),n("div",FT,[n("div",NT,[a.role&&!a.disabled_process?(o(),l("div",VT,[s.showDiv?(o(),l(E,{key:0},[a.role==="user"?(o(),l("div",jT,c(i.userActionDivMounted()),1)):u("",!0)],64)):u("",!0),r.getUserData&&r.getUserData.user_data.id!=a.id?(o(),l(E,{key:1},[a.role!=="user"?(o(),l("button",{key:0,type:"button",class:"btn btn-xs btn-light",onClick:t[0]||(t[0]=O=>i.changeRole("user")),id:"user_role"},[t[9]||(t[9]=n("i",{class:"fas fa-male"},"  ",-1)),k(c(e.lang("change_role_to_user")),1)])):u("",!0),a.role!=="agent"?(o(),l("button",{key:1,type:"button",class:"btn btn-xs btn-light",onClick:t[1]||(t[1]=O=>i.changeRole("agent")),id:"agent_role"},[t[10]||(t[10]=n("i",{class:"fa-solid fa-user-tie"},"  ",-1)),k(c(e.lang("change_role_to_agent")),1)])):u("",!0),a.role!=="admin"&&i.userRole==="admin"?(o(),l("button",{key:2,type:"button",class:"btn btn-xs btn-light",onClick:t[2]||(t[2]=O=>i.changeRole("admin")),id:"admin_role"},[t[11]||(t[11]=n("i",{class:"fa-solid fa-user-gear"},"  ",-1)),k(c(e.lang("change_role_to_admin")),1)])):u("",!0)],64)):u("",!0),a.role=="user"?(o(),I(m,{key:2,to:"/user/"+a.id+"/edit",class:"btn btn-xs btn-light"},{default:T(()=>[t[12]||(t[12]=n("i",{class:"fas fa-edit"},"  ",-1)),k(c(e.lang("edit")),1)]),_:1},8,["to"])):(o(),I(m,{key:3,to:"/agent/"+a.id+"/edit",class:"btn btn-xs btn-light"},{default:T(()=>[t[13]||(t[13]=n("i",{class:"fas fa-edit"},"  ",-1)),k(c(e.lang("edit")),1)]),_:1},8,["to"])),r.getUserData&&r.getUserData.user_data.id!=a.id?(o(),l("button",{key:4,type:"button",class:"btn btn-xs btn-light",onClick:t[3]||(t[3]=O=>s.showPasswordModal=!0),id:"show_pass"},[t[14]||(t[14]=n("i",{class:"fas fa-lock"},"  ",-1)),k(c(e.lang("change_password")),1)])):u("",!0),r.getUserData&&r.getUserData.user_data.id!=a.id?(o(),l("button",{key:5,type:"button",class:"btn btn-xs btn-light",onClick:t[4]||(t[4]=O=>s.showDeactivateModal=!0),id:"deactive_pop"},[t[15]||(t[15]=n("i",{class:"fas fa-trash"},"  ",-1)),k(c(e.lang("deactivate")),1)])):u("",!0),a.two_factor?(o(),l("button",{key:6,type:"button",class:"btn btn-xs btn-light",onClick:t[5]||(t[5]=O=>s.showDisable2FA=!0)},[t[16]||(t[16]=n("i",{class:"fas fa-ban"},"  ",-1)),k(c(e.lang("disable_2fa")),1)])):u("",!0)])):u("",!0)]),n("div",UT,[s.hasDataPopulated?(o(),l("div",BT,[s.loading?u("",!0):(o(),l(E,{key:0},[n("ul",zT,[(o(!0),l(E,null,q(s.tabs,O=>(o(),l("li",HT,[n("a",{class:N(["nav-link",{active:s.category===O.id}]),"data-bs-toggle":"pill",role:"tab",href:"javascript:;",onClick:j=>i.tickets(O),id:"tickets_tab"},[k(c(e.lang(O.title))+" ",1),n("span",qT,c(O.count),1)],10,WT)]))),256))]),n("div",KT,[n("div",YT,[n("div",GT,[n("button",{type:"button",onClick:t[6]||(t[6]=O=>i.mergeTicket()),class:"btn btn-xs btn-light",id:"merge_ticket"},[t[17]||(t[17]=n("i",{class:"fas fa-code-branch"},null,-1)),k(" "+c(e.lang("merge")),1)]),(o(),l("div",{class:"btn-group",key:s.statusDiv},[M((o(),l("button",{type:"button",class:"btn btn-xs btn-light dropdown-toggle","data-bs-toggle":"dropdown",onClick:t[7]||(t[7]=O=>i.getStatusList()),id:"status"},[t[18]||(t[18]=n("i",{class:"fas fa-exchange-alt"},null,-1)),k(" "+c(e.lang("change_status")),1)])),[[F,e.lang("change_status")]]),s.ticketId.length>0?(o(),l("div",QT,[s.statusLoader?(o(),l("div",XT,[_(p,{"animation-duration":4e3,color:"#1d78ff",size:30})])):u("",!0),s.statusLoader?u("",!0):(o(),l(E,{key:1},[s.statusList&&s.statusList.length>0?(o(!0),l(E,{key:0},q(s.statusList,O=>(o(),l("a",{class:"dropdown-item",onClick:j=>i.getStatus(O),href:"javascript:;",id:"change_status"},[n("i",{class:N(O.icon),style:ne({color:O.icon_color})},null,6),k("  "+c(O.name),1)],8,JT))),256)):u("",!0),s.statusList&&s.statusList.length===0?(o(),l("a",ZT,c(e.lang("no-records")),1)):u("",!0)],64))])):u("",!0)])),s.ticketId.length>0?(o(),l("button",{key:0,type:"button",onClick:t[8]||(t[8]=O=>s.showAssignModal=!0),class:"btn btn-xs btn-light",id:"assign_ticket"},[t[19]||(t[19]=n("i",{class:"far fa-hand-point-right"},null,-1)),k(" "+c(e.lang("assign")),1)])):u("",!0)]),n("div",$T,[(o(),I(f,{category:s.category,id:a.id,tickets:i.ticketsData,key:s.category,apiUrl:s.apiUrl,componentTitle:s.componentTitle,scroll_to:"agent-tickets-table",allTickets:i.allData},null,8,["category","id","tickets","apiUrl","componentTitle","allTickets"]))])])])],64))])):u("",!0),!s.hasDataPopulated&&s.loading?(o(),l("div",eM,[_(p,{"animation-duration":4e3,size:60})])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(b,{key:0,onClose:i.onClose,showModal:s.showModal,statusIds:e.statusIds,ticketIds:s.ticketId,status:s.change_status,componentTitle:s.componentTitle},null,8,["onClose","showModal","statusIds","ticketIds","status","componentTitle"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showMergeModal?(o(),I(y,{key:0,onClose:i.onClose,showModal:s.showMergeModal,parent_tickets:s.parent_tickets,ticketIds:s.ticketId,componentTitle:s.componentTitle},null,8,["onClose","showModal","parent_tickets","ticketIds","componentTitle"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showAssignModal?(o(),I(D,{key:0,onClose:i.onClose,showModal:s.showAssignModal,ticketIds:s.ticketId,componentTitle:s.componentTitle,tickets:s.allEntries},null,8,["onClose","showModal","ticketIds","componentTitle","tickets"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showRoleModal?(o(),I(w,{key:0,onClose:i.onClose,showModal:s.showRoleModal,role_to:s.role_to,role:a.role,userId:a.id,dept:a.dept,user:a.user},null,8,["onClose","showModal","role_to","role","userId","dept","user"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showPasswordModal?(o(),I(S,{key:0,onClose:i.onClose,showModal:s.showPasswordModal,userId:a.id},null,8,["onClose","showModal","userId"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showDeactivateModal?(o(),I(L,{key:0,onClose:i.onClose,showModal:s.showDeactivateModal,userId:a.id,role:a.role,user:a.user},null,8,["onClose","showModal","userId","role","user"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showDisable2FA?(o(),I(x,{key:0,onClose:i.onClose,showModal:s.showDisable2FA,alertName:"user-view",id:a.id,from:"user_view"},null,8,["onClose","showModal","id"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showMergeUSerModal?(o(),I(P,{key:0,onClose:i.onClose,showModal:s.showMergeUSerModal,userId:a.id},null,8,["onClose","showModal","userId"])):u("",!0)]),_:1})])])])}const sM=U(ET,[["render",tM],["__scopeId","data-v-5d46be35"]]);const aM={name:"user-report",description:"User report page",props:{id:{type:[String,Number],default:""},name:{type:String,default:""}},data(){return{chartData:"",updated_at:"",date:"",apiUrl:"/api/ticket-chart-report",loading:!1,cardOpen:!1}},computed:{isMobile(){return window.innerWidth<=800&&window.innerHeight<=600},apiEndPoint(){let e=window.location.pathname.split("/");return e[e.length-2]==="user"?this.apiUrl+"?view_as=user":this.apiUrl}},created(){window.emitter.on("refreshUserReport",this.getChartData)},methods:{toggleCard(){this.cardOpen=!this.cardOpen,this.cardOpen&&this.getChartData()},onChange(e,t){let a=e.filter(s=>s),r="";a.length&&(r="date::"+a.map(s=>Oe(s).format("YYYY-MM-DD HH:mm:ss")).join("~")),this.updated_at=r,e&&this.getChartData()},getChartData(){this.loading=!0,R.get(this.apiEndPoint,{params:{"user_ids[]":this.id,"updated-at":this.updated_at}}).then(e=>{this.chartData=e.data.data,this.showChart(this.chartData)}).catch(e=>{this.loading=!1})},showChart(e){this.loading=!1;var t=e.datasets.map(i=>(i={tension:.5,label:i.label,fill:!1,borderColor:i.border_color,pointBackgroundColor:i.point_background_color,backgroundColor:i.background_color,data:i.data},i));let r=t.map(i=>i.data).map(function(i){return Math.max.apply(Math,i)}),s=Math.max.apply(null,r)<10?1:"";this.$nextTick(()=>{var i=document.getElementById("trafficBar").getContext("2d"),d={type:"line",data:{labels:e.labels,datasets:t},options:{responsive:!0,maintainAspectRatio:!this.isMobile,plugins:{legend:{position:"bottom",display:!0},datalabels:{color:"#000",anchor:"end",clamp:!0,align:"bottom",formatter:function(m,p){return""},display:function(m){return!1}}},scales:{y:{min:0,ticks:{precision:0,stepSize:s}}}}};new mt(i,d)})}},components:{"date-time-field":at}},nM={id:"user_report_div"},iM={class:"card card-light"},oM={class:"card-title"},rM={class:"card-tools"},lM={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},dM={type:"button",class:"btn btn-tool"},cM={key:0,class:"card-body"},uM={class:"row"},hM={class:"row"},mM={key:0,class:"col-md-12 col-sm-12 col-xs-12"};function pM(e,t,a,r,s,i){const d=g("alert"),m=g("date-time-field"),p=Q("tooltip");return o(),l("div",nM,[_(d,{componentName:"UserReport"}),n("div",iM,[n("div",{class:"card-header pointer",onClick:t[0]||(t[0]=(...f)=>i.toggleCard&&i.toggleCard(...f))},[M((o(),l("h3",oM,[k(c(e.lang("report_of"))+" "+c(a.name),1)])),[[p,e.lang("report")]]),n("div",rM,[s.loading?M((o(),l("button",lM,t[1]||(t[1]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[p,e.lang("refresh")]]):u("",!0),n("button",dM,[n("i",{class:N([{"fas fa-angle-up":s.cardOpen,"fas fa-angle-down":!s.cardOpen},"fs-25"])},null,2)])])]),s.cardOpen?(o(),l("div",cM,[n("div",uM,[_(m,{label:e.lang("select_date_range"),place:e.lang("select_date_range"),value:s.date,type:"date",name:"date",required:!1,onChange:i.onChange,range:"",currentYearDate:!1,format:"YYYY-MM-DD",classname:"col-md-6 col-sm-12 col-xs-12",confirm:!0,clearable:!0,editable:!0,disabled:!1,after:new Date},null,8,["label","place","value","onChange","after"])]),n("div",hM,[s.loading?u("",!0):(o(),l("div",mM,t[2]||(t[2]=[n("canvas",{id:"trafficBar"},null,-1)]))),t[3]||(t[3]=n("hr",{class:"visible-xs-block"},null,-1))])])):u("",!0)])])}const gM=U(aM,[["render",pM],["__scopeId","data-v-6b4e4808"]]),fM={name:"restor-modal",description:"Restore Modal component",props:{showModal:{type:Boolean,default:!1},userId:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,R.post("api/account/restore/"+this.userId).then(e=>{window.emitter.emit("refreshUserData"),X(e,"user-view"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,B(e,"user-view"),this.onClose()})}}},_M={class:"modal-title"},bM={key:0},vM={key:1,class:"row"},yM=["disabled"];function kM(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("modal");return a.showModal?(o(),I(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",_M,c(e.lang("restore-account")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",bM,[n("span",null,c(e.lang("are_you_sure")),1)])),s.loading?(o(),l("div",vM,[_(d,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...p)=>i.onSubmit&&i.onSubmit(...p)),class:"btn btn-primary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-sync"},null,-1)),k(" "+c(e.lang("restore")),1)],8,yM)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const wM=U(fM,[["render",kM]]);function CM(e){let t={};e.condition=="change_owner"&&(t.assign=[e.assign,"isRequired"]);const a=new ye(pe),{errors:r,isValid:s}=a.validate(t);return ve.dispatch("setValidationError",r),{errors:r,isValid:s}}const SM={name:"user-delete-modal",description:"User Delete Modal component",props:{showModal:{type:Boolean,default:!1},userData:{type:Object,default:()=>{}},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1,labelStyle:{display:"none"},data:{},condition:"nothing",assign:"",reqOptions:[{name:"do_nothing",value:"nothing"},{name:"delete_permanently",value:"delete"},{name:"change_requester",value:"change_owner"}]}},methods:{onChange(e,t){this[t]=e,this.assign=this.condition=="change_owner"?this.assign:""},isValid(){const{errors:e,isValid:t}=CM(this.$data);return t},onSubmit(){this.isValid()&&(this.loading=!0,this.isDisabled=!0,this.data.action_on_owned_tickets=this.condition,this.assign&&(this.data.set_owner_to=this.assign.id),R.delete("/api/account/delete/"+this.userData.id,{data:this.data}).then(e=>{window.emitter.emit("refreshUserData","delete-modal"),X(e,"user-view"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,B(e,"user-delete")}))}},components:{"radio-button":Pe,"dynamic-select":_e}},DM={key:0,class:"user-del"},TM={id:"bold"},MM={key:1,class:"row"},OM=["disabled"];function IM(e,t,a,r,s,i){const d=g("alert"),m=g("radio-button"),p=g("dynamic-select"),f=g("reuse-loader"),b=g("modal");return a.showModal?(o(),I(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{alert:T(()=>[_(d,{componentName:"user-delete"})]),title:T(()=>[n("h4",null,c(e.lang("delete")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",DM,[n("b",TM,c(e.lang("what_should_happen_to_tickets_owned_by"))+" "+c(a.userData.user_name?a.userData.user_name:a.userData.email)+"?",1),t[1]||(t[1]=n("br",null,null,-1)),_(m,{options:s.reqOptions,label:e.lang("Options"),name:"condition",value:s.condition,onChange:i.onChange,classname:"form-group col-xs-12",labelStyle:s.labelStyle},null,8,["options","label","value","onChange","labelStyle"]),s.condition=="change_owner"?(o(),I(p,{key:0,multiple:!1,name:"assign",label:e.lang("select_owner"),classname:"col-xs-12",value:s.assign,onChange:i.onChange,apiEndpoint:"/api/dependency/users?meta=true",required:!0,clearable:!!s.assign,strlength:"50",labelStyle:s.labelStyle},null,8,["label","value","onChange","clearable","labelStyle"])):u("",!0)])),s.loading?(o(),l("div",MM,[_(f,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=(...y)=>i.onSubmit&&i.onSubmit(...y)),class:"btn btn-secondary",disabled:s.isDisabled},[t[2]||(t[2]=n("i",{class:"fas fa-trash"},null,-1)),k(" "+c(e.lang("delete")),1)],8,OM)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const AM=U(SM,[["render",IM]]);const LM={name:"user-view",description:"User view page",props:{authInfo:{type:Object,default:()=>{}}},data(){return{userId:"",loading:!0,userData:"",location:"",showModal:!1,showDeleteModal:!1,refreshVerifyStatus:!1,integration_status:!1,integrateAppBtn:"show_app",integration_data:[]}},created(){window.emitter.on("refreshUserData",this.refreshUserDetails),window.emitter.on("updateEditData",this.refreshUserDetails),window.emitter.on("refreshMailAndMobile",()=>{this.refreshVerifyStatus=!0})},beforeMount(){const e=window.location.pathname;let t=e.split("/");this.location=t[t.length-2],this.userId=ke(e),this.getInitialValues(this.userId),this.getIntegrationStatus()},methods:{refreshUserDetails(e=""){e?setTimeout(()=>{this.loading=!0,this.getInitialValues(this.userId)},2e3):this.getInitialValues(this.userId)},getInitialValues(e){R.get("/api/get-user/view/"+e).then(t=>{this.userData=t.data.data,this.userData.processing_account_disabling&&this.$store.dispatch("setAlert",{type:"warning",duration:5e5,message:pe("processing_account_disabling"),component_name:"user-view"}),this.loading=!1}).catch(t=>{this.loading=!1,B(t,"layout"),this.redirect("/panel/dashboard")})},userPageVisible(){window.emitter.emit("user-page-mounted",{disableLoader:"true"})},userBoxVisible(){window.emitter.emit("user-box-mounted",{user_id:this.userId,from:"user",user:this.userData,disableLoader:"true"})},onClose(){this.showModal=!1,this.showDeleteModal=!1,this.$store.dispatch("unsetValidationError")},getIntegrationStatus(){R.get("/api/integration-status?route_name=User Profile&user_id="+this.userId).then(e=>{e.data.data.integrations.length>0&&(this.integration_status=!0),this.integration_data=e.data.data.integrations}).catch(e=>{B(e,"layout")})}},watch:{refreshVerifyStatus(e,t){e===!0&&this.getInitialValues(this.userId),this.refreshVerifyStatus=!1}},components:{"user-details":$2,"user-tickets":sM,"user-report":gM,"user-restore-modal":wM,"user-delete-modal":AM,"login-logs":pa,"iframe-injection":Sa}},EM={class:"col-sm-12"},xM={class:"row"},PM={class:"col-md-12"},RM={key:0,class:"row"},FM={class:"col-md-4"},NM={class:"col-md-8"},VM={key:1,id:"user-page-table"},jM={id:"user-view-table"},UM={key:1,class:"col-md-12"},BM={class:"row"},zM={class:"col-md-12",style:{"margin-top":"-15px"}},HM={id:"page",class:"hfeed site"},WM={class:"hentry error404 text-center"},qM={class:"entry-title text-muted"},KM={key:0,class:"entry-content clearfix"},YM={key:1,class:"row"};function GM(e,t,a,r,s,i){const d=g("alert"),m=g("user-details"),p=g("iframe-injection"),f=g("user-tickets"),b=g("login-logs"),y=g("user-report"),D=g("reuse-loader"),w=g("user-restore-modal"),S=g("user-delete-modal");return o(),l("div",EM,[n("div",xM,[n("div",PM,[_(d,{componentName:"user-view"})])]),!s.loading&&s.userData?(o(),l("div",RM,[s.userData.active?(o(),l(E,{key:0},[n("div",FM,[_(m,{data:s.userData},null,8,["data"]),s.integration_status?(o(),I(p,{key:0,integrationData:s.integration_data},null,8,["integrationData"])):u("",!0)]),n("div",NM,[s.userId?(o(),I(f,{key:0,id:s.userId,role:s.userData.role,dept:s.userData.departments,user:s.userData,two_factor:s.userData.is_2fa_enabled,disabled_process:s.userData.processing_account_disabling,permissions:s.userData.permissions},null,8,["id","role","dept","user","two_factor","disabled_process","permissions"])):u("",!0),_(b,{userId:s.userId},null,8,["userId"]),s.location==="user"?(o(),l("div",VM,c(i.userPageVisible()),1)):u("",!0),n("div",jM,c(i.userBoxVisible()),1),s.userId?(o(),I(y,{key:2,id:s.userId,name:s.userData.full_name},null,8,["id","name"])):u("",!0)])],64)):(o(),l("div",UM,[n("div",BM,[n("div",zM,[n("div",HM,[n("article",WM,[t[2]||(t[2]=n("h1",{class:"error-title"},[n("i",{class:"fa fa-user-times text-info",style:{color:"grey"}})],-1)),n("h2",qM,c(s.userData.is_delete?e.lang("user-account-deleted"):e.lang("user-account-deactivated")),1),s.userData.is_delete?u("",!0):(o(),l("div",KM,[n("p",null,[n("button",{type:"button",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=L=>s.showModal=!0)},c(e.lang("restore-account")),1),n("button",{type:"button",class:"btn btn-primary btn-sm",onClick:t[1]||(t[1]=L=>s.showDeleteModal=!0)},c(e.lang("delete_account")),1)])]))])])])])]))])):u("",!0),s.loading?(o(),l("div",YM,[_(D,{"animation-duration":4e3,size:60})])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(w,{key:0,onClose:i.onClose,showModal:s.showModal,userId:s.userId},null,8,["onClose","showModal","userId"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showDeleteModal?(o(),I(S,{key:0,onClose:i.onClose,showModal:s.showDeleteModal,userData:s.userData},null,8,["onClose","showModal","userData"])):u("",!0)]),_:1})])}const Oa=U(LM,[["render",GM],["__scopeId","data-v-7996a683"]]);const QM={name:"organizations-directory",description:"Organization list component",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},data(){return{apiUrl:"/org-list-data",columns:["name","phone","active_users_count","labels","created_at","updated_at","action"],options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),phone:this.trans("phone"),active_users_count:this.trans("members_count"),labels:this.trans("labels"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),action:this.trans("actions")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},columnsClasses:{name:"organization-name",phone:"organization-phone",active_users_count:"organization-members",labels:"Labels",created_at:"organization-created",updated_at:"organization-updated",action:"organization-action"},texts:{filter:"",limit:""},templates:{created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)},phone(t,a){return a.phone===" Not available"?"---":a.phone},name:function(t,a){return e.h(Ve,{to:"/organizations/"+a.id},a.name)},member_count:function(t,a){return a.active_users_count},labels:function(t,a){let r="";return a.labels.map(function(s){r=r+s.title+", "}),r=r.slice(0,-2),e.h("span",{innerHTML:e.loadLabel(r)})},action:(t,a)=>e.h(je,{data:a})},sortable:["name","phone","active_users_count","created_at","updated_at"],filterable:["name","phone","created_at","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-by":t.orderBy,order:t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.from="agent",a.edit_url="/organizations/"+a.id+"/edit",a.view_url="/organizations/"+a.id,a.delete_url=e.basePath()+"/org/delete/"+a.id,a)),count:t.message.total}}}},methods:{loadLabel(e){return He(e)}}},XM={id:"org-list",class:"col-sm-12"},JM={class:"card card-light"},ZM={class:"card-header"},$M={class:"card-title"},eO={class:"card-tools"},tO={class:"card-body",id:"my_orgs"};function sO(e,t,a,r,s,i){const d=g("alert"),m=g("router-link"),p=g("data-table"),f=Q("tooltip");return o(),l("div",XM,[_(d,{componentName:"dataTableModal"}),n("div",JM,[n("div",ZM,[n("h3",$M,c(e.lang("organization_list")),1),n("div",eO,[M((o(),I(m,{class:"btn-tool",to:"/organizations/create"},{default:T(()=>t[0]||(t[0]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[f,e.lang("create_organization")]])])]),n("div",tO,[_(p,{url:s.apiUrl,dataColumns:s.columns,option:s.options,scroll_to:"org-list"},null,8,["url","dataColumns","option"])])])])}const aO=U(QM,[["render",sO]]),nO={name:"org-manager-modal",description:"Assign Manger to Organization Modal component",props:{showModal:{type:Boolean,default:!1},orgId:{type:[String,Number],default:""},onClose:{type:Function},managerList:{type:Array,default:()=>[]}},data(){return{isDisabled:!0,containerStyle:{width:"600px"},loading:!1,managers:this.managerList}},methods:{onChange(e,t){this[t]=e,this.isDisabled=e===""},onSubmit(){this.loading=!0,this.isDisabled=!0;let e=[];for(var t in this.managers)e.push(this.managers[t].id);var a={user:e};R.post("/add/organization/manager?org_id="+this.orgId,a).then(r=>{this.loading=!1,this.isDisabled=!0,X(r,"org-view"),window.emitter.emit("refreshOrgData"),this.onClose()}).catch(r=>{this.loading=!1,this.isDisabled=!1,B(r,"org-view"),this.onClose()})}},components:{"dynamic-select":_e}},iO={class:"modal-title"},oO={key:0,class:"row"},rO={key:1,class:"row"},lO=["disabled"];function dO(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("reuse-loader"),p=g("modal");return a.showModal?(o(),I(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",iO,c(e.lang("assign_manager")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",oO,[_(d,{label:e.lang("select_manager"),multiple:!0,name:"managers",classname:"col-sm-12",apiEndpoint:"/search/organization/manager/"+a.orgId,value:s.managers,onChange:i.onChange},null,8,["label","apiEndpoint","value","onChange"])])),s.loading?(o(),l("div",rO,[_(m,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=f=>i.onSubmit()),class:"btn btn-primary",id:"submit_btn",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fa fa-check"},null,-1)),k(" "+c(e.lang("assign")),1)],8,lO)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const cO=U(nO,[["render",dO]]);const uO={setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},props:{data:{type:[Object,String],default:""},orgData:{type:[Object,String,Number],default:""},managerList:{type:Array,default:()=>[]}},data(){return{showModal:!1,loading:!1,labels:"",orgImage:"",editVisibilty:!1}},beforeMount(){this.orgData.label_field&&this.orgData.label_field.length>0&&(this.editVisibilty=this.orgData.label_field[0].display_for_agent),this.orgImage=this.orgData.logo?this.orgData.logo:this.basePathVersion()+"/themes/default/common/images/org.png"},methods:{subString(e,t=15){return ge(e,t)},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},tooltipText(e,t){return e.length>t?e:""},loadLabel(e){return He(e)}},components:{"org-manager-modal":cO}},hO={class:"card card-light card-outline"},mO={key:0,class:"row"},pO={key:1,class:"card-body box-profile"},gO={class:"text-center"},fO={class:"profile-username text-center"},_O={class:"text-muted text-center"},bO={class:"d-grid"},vO={class:"list-group list-group-unbordered mb-3"},yO={class:"list-group-item"},kO={class:"float-end"},wO={class:"list-group-item"},CO={class:"float-end"},SO={class:"list-group-item"},DO={class:"float-end"},TO={key:0,class:"list-group-item"},MO={class:"float-end"},OO={key:1,class:"list-group-item"},IO={class:"float-end"},AO=["innerHTML"],LO={class:"list-group-item"},EO={class:"float-end"},xO={class:"list-group-item"},PO={key:0,class:"float-end cursor-pointer"},RO={key:0,style:{color:"#3c8dbc"}},FO={key:1,class:"float-end cursor-pointer"},NO={class:"d-grid"};function VO(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("faveo-image-element"),p=g("router-link"),f=g("org-manager-modal"),b=Q("tooltip");return o(),l("div",hO,[s.loading||!a.orgData?(o(),l("div",mO,[_(d,{"animation-duration":4e3,size:40})])):u("",!0),a.orgData&&!s.loading?(o(),l("div",pO,[n("div",gO,[_(m,{id:"org_img","source-url":s.orgImage,classes:["profile-user-img img-fluid img-rounder img-circle"],"alternative-text":"Org Image"},null,8,["source-url"])]),M((o(),l("h3",fO,[k(c(i.subString(a.orgData.name,20)),1)])),[[b,a.orgData.name]]),n("p",_O,c(e.trans("organisation")),1),n("div",bO,[M((o(),I(p,{to:"/organizations/"+a.orgData.id+"/edit",class:"btn btn-primary btn-block"},{default:T(()=>[t[1]||(t[1]=n("i",{class:"fas fa-edit"},null,-1)),k(" "+c(e.trans("edit")),1)]),_:1},8,["to"])),[[b,e.trans("edit")]])]),n("ul",vO,[n("li",yO,[n("label",null,c(e.trans("domain")),1),M((o(),l("a",kO,[k(c(i.subString(a.orgData.domain?a.orgData.domain:"---",20)),1)])),[[b,a.orgData.domain]])]),n("li",wO,[n("label",null,c(e.trans("address")),1),M((o(),l("a",CO,[k(c(i.subString(a.orgData.address?a.orgData.address:"---",30)),1)])),[[b,a.orgData.address]])]),n("li",SO,[n("label",null,c(e.trans("phone")),1),M((o(),l("a",DO,[k(c(i.subString(a.orgData.phone?a.orgData.phone:"---",20)),1)])),[[b,a.orgData.phone]])]),a.orgData.ext?(o(),l("li",TO,[n("label",null,c(e.trans("ext")),1),M((o(),l("a",MO,[k(c(i.subString(a.orgData.ext,20)),1)])),[[b,a.orgData.phone]])])):u("",!0),s.editVisibilty?(o(),l("li",OO,[n("b",null,c(e.trans("labels")),1),n("div",IO,[(o(!0),l(E,null,q(a.orgData.labels,(y,D)=>M((o(),l("a",{target:"_blank",class:"badge me-1",style:ne({backgroundColor:y.color,color:"#FFF"})},[n("span",{innerHTML:i.subString(i.loadLabel(y.title))},null,8,AO)],4)),[[b,{content:i.loadLabel(y.title),html:!0}]])),256))])])):u("",!0),n("li",LO,[n("label",null,c(e.trans("description")),1),M((o(),l("a",EO,[k(c(i.subString(a.orgData.internal_notes?a.orgData.internal_notes:"---",30)),1)])),[[b,a.orgData.internal_notes]])]),(o(!0),l(E,null,q(a.orgData.custom_field_values,y=>(o(),l("li",xO,[n("label",null,c(y.label),1),Array.isArray(y.value)?(o(),l("div",PO,[(o(!0),l(E,null,q(y.value,(D,w)=>(o(),l(E,null,[M((o(),l("a",null,[k(c(i.subString(D,30)),1)])),[[b,i.tooltipText(D,30)]]),w!==y.value.length-1?(o(),l("span",RO,", ")):u("",!0)],64))),256))])):M((o(),l("a",FO,[k(c(i.subString(y.value,30)),1)])),[[b,y.value]])]))),256))]),n("div",NO,[n("a",{href:"javascript:;",class:"btn btn-primary btn-block",onClick:t[0]||(t[0]=y=>s.showModal=!0)},[t[2]||(t[2]=n("i",{class:"glyphicon glyphicon-plus"},null,-1)),k(" "+c(e.trans("add_manager")),1)])])])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(f,{key:0,onClose:i.onClose,showModal:s.showModal,orgId:a.orgData.id,managerList:a.managerList},null,8,["onClose","showModal","orgId","managerList"])):u("",!0)]),_:1})])}const jO=U(uO,[["render",VO],["__scopeId","data-v-51a7abb8"]]);const UO={name:"",description:"",props:{manager:{type:Object,default:()=>{}}},methods:{subString(e,t=15){return ge(e,t)}}},BO={class:"card card-widget widget-user-2"},zO={class:"widget-user-header bg-warning"},HO={class:"widget-user-image"},WO={class:"widget-user-username"},qO={class:"widget-user-desc fs-14"},KO={class:"card-footer p-0"},YO={class:"nav flex-column"},GO={class:"nav-item"},QO={href:"javascript:;",class:"nav-link text-dark"},XO={class:"float-end"},JO={class:"nav-item"},ZO={href:"javascript:;",class:"nav-link text-dark"},$O={class:"float-end"};function eI(e,t,a,r,s,i){const d=g("faveo-image-element"),m=g("router-link"),p=Q("tooltip");return o(),l("div",BO,[n("div",zO,[n("div",HO,[_(d,{id:"org_man","source-url":a.manager.profile_pic,classes:["img-circle elevation-2"],"alternative-text":"User Avatar"},null,8,["source-url"])]),M((o(),I(m,{to:"/user/"+a.manager.id+"/edit",class:"float-end"},{default:T(()=>t[0]||(t[0]=[n("i",{class:"fas fa-edit"},null,-1)])),_:1},8,["to"])),[[p,e.lang("edit")]]),M((o(),l("h3",WO,[k(c(i.subString(a.manager.full_name)),1)])),[[p,a.manager.full_name]]),n("h5",qO,c(e.lang("organization_manager")),1)]),n("div",KO,[n("ul",YO,[n("li",GO,[n("a",QO,[k(c(e.lang("email"))+" ",1),M((o(),l("span",XO,[k(c(a.manager.email?a.manager.email:"---"),1)])),[[p,a.manager.email]])])]),n("li",JO,[n("a",ZO,[k(c(e.lang("mobile"))+" ",1),M((o(),l("span",$O,[k(c(a.manager.mobile?a.manager.mobile:"---"),1)])),[[p,a.manager.mobile]])])])])])])}const tI=U(UO,[["render",eI],["__scopeId","data-v-4789f2cd"]]),sI={name:"org-user-modal",description:"Add User to Organization Modal Component",props:{showModal:{type:Boolean,default:!1},orgId:{type:[String,Number],default:""},onClose:{type:Function},usersList:{type:Array,default:()=>[]}},data(){return{isDisabled:!0,containerStyle:{width:"600px"},loading:!1,users:this.usersList}},methods:{onChange(e,t){this[t]=e,this.isDisabled=e===""},onSubmitUser(){this.loading=!0,this.isDisabled=!0;let e={};e.user=this.users.map(t=>t.id),R.post("api/org-user-assign/"+this.orgId,e).then(t=>{this.loading=!1,this.isDisabled=!0,X(t,"org-view"),window.emitter.emit("OrgMembersrefreshData"),this.onClose()}).catch(t=>{this.loading=!1,this.isDisabled=!1,B(t,"org-view"),this.onClose()})}},components:{"dynamic-select":_e}},aI={class:"modal-title"},nI={key:0,class:"row"},iI={key:1,class:"row"},oI=["disabled"];function rI(e,t,a,r,s,i){const d=g("dynamic-select"),m=g("reuse-loader"),p=g("modal");return a.showModal?(o(),I(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",aI,c(e.trans("attach_contacts")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",nI,[_(d,{label:e.trans("select_contact"),multiple:!0,name:"users",data_key:"users","option-label":"meta_name",classname:"col-sm-12",apiEndpoint:"/api/admin/get-users-list?roles[0]=user&active=1",value:s.users,onChange:i.onChange},null,8,["label","value","onChange"])])),s.loading?(o(),l("div",iI,[_(m,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=Ee(f=>i.onSubmitUser(),["prevent"])),class:"btn btn-primary",id:"submit_btn",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(e.trans("attach")),1)],8,oI)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const lI=U(sI,[["render",rI]]);const dI={name:"org-members",description:"Organization members list",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},props:{data:{type:Object,default:()=>{}},id:{type:[String,Number],default:""},name:{type:String,default:"Organization"},orgData:{type:Object,default:()=>{}},usersList:{type:Array,default:()=>[]},reloadDetails:{type:Function},disableLoader:{type:Boolean,default:!1}},data(){return{showModal:!1,columns:["name","user_name","email","labels","phone_number","info","action"],options:{},apiUrl:"/api/admin/get-users-list?org-ids[0]="+this.id,loading:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.lang("name"),user_name:this.lang("user_name"),email:this.lang("email"),labels:this.lang("labels"),phone_number:this.lang("mobile"),info:this.lang("account_info"),action:this.lang("actions")},columnsClasses:{user_name:"org-name",email:"org-email",phone_number:"org-phone"},texts:{filter:"",limit:""},templates:{name:function(t,a){return e.h(Ve,{to:"/user/"+a.id},a.name)},user_name:function(t,a){return e.h(Ve,{to:"/user/"+a.id},a.user_name)},phone_number(t,a){return a.phone===" Not available"||!a.phone?"---":a.phone},email(t,a){return a.email?a.email:"---"},updated_at:function(t,a){return e.formattedTime(a.updated_at)},labels:function(t,a){let r="";return a.labels.map(function(s){r=r+s.title+", "}),r=r.slice(0,-2),r},info:(t,a)=>e.h(Xs,{data:a}),action:(t,a)=>e.h(je,{data:a})},sortable:["user_name","email","phone_number","active","ban","updated_at"],filterable:["user_name","email","phone_number","active","ban","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-by":t.orderBy?t.orderBy:"updated_at",order:t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.users.map(a=>(a.from="agent",a.edit_url="/user/"+a.id+"/edit",a.view_url="/user/"+a.id,a)),count:t.data.total}},orderBy:{column:"updated_at",ascending:!0}}},watch:{orgData:{handler(e){e&&window.emitter.emit("OrgMembersrefreshData")},immediate:!0}},methods:{reloadData(e){this.afterAction(e)},subString(e,t=15){return ge(e,t)},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},handelLoader(e){this.loading=e}},components:{"org-user-modal":lI}},cI={id:"org_members"},uI={class:"card card-light"},hI={class:"card-header"},mI={class:"card-title"},pI={class:"card-tools"},gI={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},fI={class:"card-body"};function _I(e,t,a,r,s,i){const d=g("alert"),m=g("router-link"),p=g("data-table"),f=g("org-user-modal"),b=Q("tooltip");return o(),l("div",cI,[_(d,{componentName:"OrgMembers"}),n("div",uI,[n("div",hI,[M((o(),l("h3",mI,[k(c(e.trans("contacts_of"))+" "+c(i.subString(a.name,40)),1)])),[[b,e.trans("contacts_of")+" "+a.name]]),n("div",pI,[s.loading?M((o(),l("button",gI,t[1]||(t[1]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[b,e.lang("refresh")]]):u("",!0),M((o(),I(m,{to:"/user/create",class:"btn-tool"},{default:T(()=>t[2]||(t[2]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,e.trans("create_contact")]]),M((o(),l("a",{href:"javascript:;",onClick:t[0]||(t[0]=y=>s.showModal=!0)},t[3]||(t[3]=[n("i",{class:"fas fa-users"},null,-1)]))),[[b,e.trans("attach_contacts")]])])]),n("div",fI,[_(p,{url:s.apiUrl,ref:"membersTable",dataColumns:s.columns,disableLoader:a.disableLoader,onLoaderState:i.handelLoader,option:s.options,scroll_to:"org_members",componentTitle:"OrgMembers"},null,8,["url","dataColumns","disableLoader","onLoaderState","option"])])]),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(f,{key:0,onClose:i.onClose,showModal:s.showModal,orgId:a.orgData.id,usersList:a.usersList},null,8,["onClose","showModal","orgId","usersList"])):u("",!0)]),_:1})])}const bI=U(dI,[["render",_I]]);function vI(e){const{org_deptname:t,business_hours:a}=e;let r={org_deptname:[t,"isRequired","max(20)"],business_hours:[a]};const s=new ye(pe),{errors:i,isValid:d}=s.validate(r);return ve.dispatch("setValidationError",i),{errors:i,isValid:d}}const yI={name:"org-dept-modal",description:"Organization Department Modal component",props:{showModal:{type:Boolean,default:!1},orgId:{type:[String,Number],default:""},onClose:{type:Function},deptId:{type:[String,Number],default:""}},data(){return{isDisabled:!1,containerStyle:{width:"800px"},loading:!1,manager:"",org_deptname:"",business_hours:"",label:this.trans("organization_department_name").length>=31?this.trans("organization_department_name").substring(0,30).concat("..."):this.trans("organization_department_name")}},beforeMount(){this.deptId&&this.getInitialValues(this.deptId)},methods:{getInitialValues(e){this.loading=!0,R.get("/api/org-department-list/"+e).then(t=>{this.loading=!1,this.org_deptname=t.data.data.org_deptname,this.business_hours=t.data.data.business_hour,this.manager=t.data.data.manager}).catch(t=>{this.loading=!1})},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=vI(this.$data);return!!t},onSubmit(){if(this.isValid()){this.loading=!0,this.isDisabled=!0;const e={};e.org_deptname=this.org_deptname,e.business_hours_id=this.business_hours?this.business_hours.id:"",e.org_dept_manager=this.manager?this.manager.id:"",e.org_id=this.orgId,this.deptId&&(e.org_dept_id=this.deptId),R.post("/create-update-org-dept",e).then(t=>{this.loading=!1,this.isDisabled=!0,X(t,"OrgDepartmentsdataTableModal"),window.emitter.emit("OrgDepartmentsrefreshData"),this.onClose()}).catch(t=>{this.loading=!1,this.isDisabled=!1,B(t,"org-dept")})}}},components:{"dynamic-select":_e,"text-field":Se}},kI={class:"modal-title"},wI={key:0},CI={class:"row"},SI={key:1,class:"row"},DI=["disabled"];function TI(e,t,a,r,s,i){const d=g("alert"),m=g("text-field"),p=g("dynamic-select"),f=g("reuse-loader"),b=g("modal"),y=Q("focus-first-input");return a.showModal?(o(),I(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",kI,c(e.lang("organization_department")),1)]),alert:T(()=>[_(d,{componentName:"org-dept"})]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",wI,[M((o(),l("div",CI,[_(m,{label:s.label,value:s.org_deptname,type:"text",name:"org_deptname",onChange:i.onChange,classname:"col-sm-4",required:!0},null,8,["label","value","onChange"]),_(p,{label:e.lang("business_hours"),multiple:!1,name:"business_hours",strlength:"15",classname:"col-sm-4",apiEndpoint:"/api/dependency/business-hours",value:s.business_hours,onChange:i.onChange,clearable:!!s.business_hours},null,8,["label","value","onChange","clearable"]),_(p,{label:e.lang("organization_department_manager"),multiple:!1,name:"manager",classname:"col-sm-4",apiEndpoint:"/search/organization/manager/"+a.orgId,value:s.manager,strlength:"15",onChange:i.onChange,clearable:!!s.manager},null,8,["label","apiEndpoint","value","onChange","clearable"])])),[[y]])])),s.loading?(o(),l("div",SI,[_(f,{"animation-duration":4e3,size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",onClick:t[0]||(t[0]=D=>i.onSubmit()),class:"btn btn-primary",id:"submit_btn",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fa fa-check"},null,-1)),k(" "+c(e.lang("proceed")),1)],8,DI)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const Ia=U(yI,[["render",TI]]);const MI={name:"org-dept-user-modal",description:"Organization department user modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function,default:()=>{}},orgId:{type:[Number,String],default:""},deptId:{type:[Number,String],default:""}},data(){return{isDisabled:!1,containerStyle:{width:"950px"},loading:!1,size:60,apiUrl:"/org-dept-user-list/"+this.orgId+"/"+this.deptId,columns:["first_name","email"],options:{}}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{first_name:this.lang("name"),email:this.lang("email")},templates:{first_name(t,a){return e.h(Ve,{to:"/user/"+a.id},a.full_name?a.full_name:a.user_name)}},sortable:["first_name","email"],filterable:["first_name","email"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-by":t.orderBy?t.orderBy:"id",order:t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.detach=!0,a)),count:t.message.total}},orderBy:{column:"id",ascending:!0}}}},OI={id:"org-dept-user-list"},II={class:"modal-title"},AI={class:"height-limit"};function LI(e,t,a,r,s,i){const d=g("data-table"),m=g("modal");return o(),l("div",OI,[a.showModal?(o(),I(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",II,c(e.lang("list_of_users")),1)]),fields:T(()=>[n("div",AI,[_(d,{url:s.apiUrl,dataColumns:s.columns,option:s.options,scroll_to:"org-dept-user-list",componentTitle:"OrgDeptUserList"},null,8,["url","dataColumns","option"])])]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)])}const EI=U(MI,[["render",LI]]),xI={name:"data-table-actions",description:"Contains edit, delete and view buttons as group which can be used as a component as whole. It is built basically for displaying edit, delete and view button in a datable.",props:{data:{type:Object,required:!0}},data(){return{showModal:!1,showEditModal:!1,showUserList:!1,disabled:""}},created(){this.disabled=Te(this.data.is_default)},methods:{onClose(){this.showModal=!1,this.showEditModal=!1,this.showUserList=!1,this.$store.dispatch("unsetValidationError")}},components:{"delete-modal":At,"edit-org-dept":Ia,"org-dept-user":EI}},PI={class:"block"};function RI(e,t,a,r,s,i){const d=g("delete-modal"),m=g("org-dept-user"),p=g("edit-org-dept"),f=Q("tooltip");return o(),l("div",PI,[M((o(),l("a",{class:"btn btn-primary",onClick:t[0]||(t[0]=b=>s.showEditModal=!0),href:"javascript:;"},t[3]||(t[3]=[n("i",{class:"fas fa-edit"},null,-1)]))),[[f,e.lang("edit")]]),M((o(),l("a",{class:"btn btn-primary",onClick:t[1]||(t[1]=b=>s.showUserList=!0),href:"javascript:;"},t[4]||(t[4]=[n("i",{class:"fas fa-list"},null,-1)]))),[[f,e.lang("user_list_modal")]]),M((o(),l("a",{class:"btn btn-secondary",onClick:t[2]||(t[2]=b=>s.showModal=!0),href:"javascript:;"},t[5]||(t[5]=[n("i",{class:"fas fa-trash"},null,-1)]))),[[f,e.lang("delete")]]),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(d,{key:0,onClose:i.onClose,showModal:s.showModal,deleteUrl:a.data.delete_url,componentTitle:"OrgDepartments",alertComponentName:"OrgDepartmentsdataTableModal"},null,8,["onClose","showModal","deleteUrl"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showUserList?(o(),I(m,{key:0,onClose:i.onClose,showModal:s.showUserList,deptId:a.data.id,orgId:a.data.orgId},null,8,["onClose","showModal","deptId","orgId"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showEditModal?(o(),I(p,{key:0,onClose:i.onClose,showModal:s.showEditModal,deptId:a.data.id,orgId:a.data.orgId},null,8,["onClose","showModal","deptId","orgId"])):u("",!0)]),_:1})])}const FI=U(xI,[["render",RI]]);const NI={name:"org-departments",description:"Organization departments list",props:{id:{type:[String,Number],default:""},disableLoader:{type:Boolean,default:!1}},data(){return{columns:["org_deptname","business_hours_id","org_dept_manager","action"],options:{},apiUrl:"/org-dept-list/"+this.id,showModal:!1,cardOpen:!1,loading:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{org_deptname:e.lang("list_of_org_department"),business_hours_id:e.lang("business_hours"),org_dept_manager:e.lang("organization_department_manager"),action:e.lang("actions")},columnsClasses:{org_deptname:"org-dept",business_hours_id:"org-hours",org_dept_manager:"org-dept-manger"},texts:{filter:"",limit:""},templates:{business_hours_id(t,a){return a.business_hour?a.business_hour.name:"---"},org_dept_manager(t,a){return a.manager?e.h(Ve,{to:"/user/"+a.manager.id},a.manager.full_name):"---"},action:(t,a)=>e.h(FI,{data:a})},sortable:["org_deptname","business_hours_id","org_dept_manager"],filterable:["org_deptname","business_hours_id","org_dept_manager"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-by":t.orderBy?t.orderBy:"updated_at",order:t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.delete_url=e.basePath()+"/delete-org-dept/"+a.id,a.orgId=e.id,a)),count:t.message.total}},orderBy:{column:"updated_at",ascending:!0}}},methods:{toggleCard(){this.cardOpen=!this.cardOpen},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},handelLoader(e){this.loading=e}},components:{"org-dept-modal":Ia}},VI={id:"org_departments"},jI={class:"card card-light"},UI={class:"card-header"},BI={class:"card-title"},zI={class:"card-tools"},HI={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},WI={key:0,class:"card-body"};function qI(e,t,a,r,s,i){const d=g("alert"),m=g("data-table"),p=g("org-dept-modal"),f=Q("tooltip");return o(),l("div",VI,[_(d,{componentName:"OrgDepartmentsdataTableModal"}),n("div",jI,[n("div",UI,[n("h3",BI,c(e.lang("list_of_org_department")),1),n("div",zI,[s.cardOpen&&s.loading?M((o(),l("button",HI,t[2]||(t[2]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[f,e.lang("refresh")]]):u("",!0),s.cardOpen?M((o(),l("a",{key:1,class:"btn-tool",onClick:t[0]||(t[0]=b=>s.showModal=!0),href:"javascript:;"},t[3]||(t[3]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)]))),[[f,e.lang("add_department")]]):u("",!0),n("button",{type:"button",class:"btn btn-tool",onClick:t[1]||(t[1]=(...b)=>i.toggleCard&&i.toggleCard(...b))},[n("i",{class:N([{"fas fa-angle-up":s.cardOpen,"fas fa-angle-down":!s.cardOpen},"fs-25"])},null,2)])])]),s.cardOpen?(o(),l("div",WI,[_(m,{url:s.apiUrl,dataColumns:s.columns,option:s.options,scroll_to:"org_departments",componentTitle:"OrgDepartments",disableLoader:a.disableLoader,onLoaderState:i.handelLoader},null,8,["url","dataColumns","option","disableLoader","onLoaderState"])])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(p,{key:0,onClose:i.onClose,showModal:s.showModal,orgId:a.id},null,8,["onClose","showModal","orgId"])):u("",!0)]),_:1})])])}const KI=U(NI,[["render",qI]]);const YI={name:"org-tickets",description:"Organization tickets page",props:{id:{type:[String,Number],default:""},name:{type:String,default:"Organization"},disableLoader:{type:Boolean,default:!1}},data(){return{category:"",status_type:"",tabs:[],loading:!0,hasDataPopulated:!1,ticketId:[],showModal:!1,statusList:"",showMergeModal:!1,showAssignModal:!1,parent_tickets:[],change_status:"",role_to:"",componentTitle:"OrgTickets",apiUrl:"",statusDiv:0,statusLoader:!1,allEntries:[]}},beforeMount(){this.category="open",this.getCount()},methods:{subString(e,t=15){return ge(e,t)},getStatusList(){if(this.statusList="",this.ticketId.length>0){this.statusLoader=!0;let e={meta:!0,supplements:It(this.ticketId),limit:"all"};R.get("/api/dependency/statuses",{params:e}).then(t=>{this.statusLoader=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.statusLoader=!1})}else this.statusDiv+=1,alert(this.lang("please_select_tickets"))},getStatus(e){this.ticketId.length>0?(this.showModal=!0,this.change_status=e,this.statusIds=this.tic_statuses):(alert(this.lang("please_select_tickets")),this.showModal=!1)},mergeTicket(){this.ticketId.length>1?(this.showMergeModal=!0,R.get("/api/agent/tickets/get-merge-tickets",{params:{"ticket-ids":this.ticketId}}).then(e=>{this.parent_tickets=e.data.data;for(var t in this.parent_tickets)this.parent_tickets[t].id=this.parent_tickets[t].ticket_id,this.parent_tickets[t].subject=this.parent_tickets[t].name,this.parent_tickets[t].name=this.parent_tickets[t].title,delete this.parent_tickets[t].ticket_id,delete this.parent_tickets[t].title}),this.parent_tickets=[]):(this.showMergeModal=!1,alert(this.lang("please_select_more_tickets")))},tickets(e){this.category=e.id,this.apiUrl=e.url},onClose(){this.showModal=!1,this.showMergeModal=!1,this.showAssignModal=!1,this.getCount(),this.$store.dispatch("unsetValidationError")},ticketsData(e){this.ticketId=e},allData(e){this.allEntries=e},getCount(){let e,t="api/agent/ticket-count?";e="organization-ids[]="+this.id,t+=e,R.get(t).then(a=>{this.hasDataPopulated=!0,this.loading=!1,this.tabs=[];for(var r in a.data.data)if(a.data.data.hasOwnProperty(r)){let s={id:r,title:r,count:a.data.data[r]};switch(s.title){case"open":s.url="api/agent/ticket-list?category=inbox&"+e;break;case"closed":s.url="api/agent/ticket-list?category=closed&"+e;break;case"deleted":s.url="api/agent/ticket-list?category=deleted&"+e;break;case"unapproved":s.url="api/agent/ticket-list?category=unapproved&"+e;break}this.tabs.push(s)}this.tickets(this.tabs[0])}).catch(a=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatus(e){this.showModal=!0,this.change_status=e},handelLoader(e){this.loading=e}},components:{"org-tickets-table":Zs,"change-status-modal":Dt,"merge-ticket-modal":ts,"assign-ticket-modal":Tt}},GI={id:"org-tickets-table"},QI={class:"row"},XI={class:"col-md-12"},JI={class:"card card-light"},ZI={class:"card-header"},$I={class:"card-title"},e8={key:0,class:"card-tools"},t8={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},s8={class:"card-body"},a8={key:0,class:"nav-tabs-custom"},n8={class:"nav nav-tabs"},i8={class:"nav-item"},o8=["onClick"],r8={class:"badge text-bg-primary"},l8={class:"tab-content"},d8={class:"active tab-pane",id:"activity"},c8={class:"mt-3"},u8={key:0,class:"dropdown-menu status-list"},h8={key:0,class:"row"},m8=["onClick"],p8={key:1,class:"dropdown-item",href:"javascript:;"},g8={id:"my_tic"};function f8(e,t,a,r,s,i){const d=g("alert"),m=g("reuse-loader"),p=g("org-tickets-table"),f=g("change-status-modal"),b=g("merge-ticket-modal"),y=g("assign-ticket-modal"),D=Q("tooltip");return o(),l("div",GI,[n("div",QI,[n("div",XI,[_(d,{componentName:"OrgTickets"})])]),n("div",JI,[n("div",ZI,[n("h3",$I,c(e.lang("tickets_of"))+" "+c(i.subString(a.name,40)),1),s.loading?(o(),l("div",e8,[M((o(),l("button",t8,t[3]||(t[3]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[D,e.lang("refresh")]])])):u("",!0)]),n("div",s8,[s.hasDataPopulated?(o(),l("div",a8,[n("ul",n8,[(o(!0),l(E,null,q(s.tabs,w=>(o(),l("li",i8,[n("a",{class:N(["nav-link",{active:s.category===w.id}]),href:"javascript:;","data-bs-toggle":"pill",role:"tab",onClick:S=>i.tickets(w),id:"tickets_tab"},[k(c(e.lang(w.title))+" ",1),n("span",r8,c(w.count),1)],10,o8)]))),256))]),n("div",l8,[n("div",d8,[n("div",c8,[n("button",{type:"button",onClick:t[0]||(t[0]=w=>i.mergeTicket()),class:"btn btn-sm btn-light",id:"merge_ticket"},[t[4]||(t[4]=n("i",{class:"fas fa-code-branch"},null,-1)),k(" "+c(e.lang("merge")),1)]),(o(),l("div",{class:"btn-group",key:s.statusDiv},[M((o(),l("button",{type:"button",class:"btn btn-sm btn-light dropdown-toggle","data-bs-toggle":"dropdown",onClick:t[1]||(t[1]=w=>i.getStatusList()),id:"status"},[t[5]||(t[5]=n("i",{class:"fas fa-exchange-alt"},null,-1)),k(" "+c(e.lang("change_status")),1)])),[[D,e.lang("change_status")]]),s.ticketId.length>0?(o(),l("div",u8,[s.statusLoader?(o(),l("div",h8,[_(m,{"animation-duration":4e3,color:"#1d78ff",size:30})])):u("",!0),s.statusLoader?u("",!0):(o(),l(E,{key:1},[s.statusList&&s.statusList.length>0?(o(!0),l(E,{key:0},q(s.statusList,w=>(o(),l("a",{class:"dropdown-item",onClick:S=>i.getStatus(w),href:"javascript:;",id:"change_status"},[n("i",{class:N(w.icon),style:ne({color:w.icon_color})},null,6),k("  "+c(w.name),1)],8,m8))),256)):u("",!0),s.statusList&&s.statusList.length===0?(o(),l("a",p8,c(e.lang("no-records")),1)):u("",!0)],64))])):u("",!0)])),s.ticketId.length>0?(o(),l("button",{key:0,type:"button",onClick:t[2]||(t[2]=w=>s.showAssignModal=!0),class:"btn btn-sm btn-light",id:"assign_ticket"},[t[6]||(t[6]=n("i",{class:"far fa-hand-point-right"},null,-1)),k(" "+c(e.lang("assign")),1)])):u("",!0)]),n("div",g8,[(o(),I(p,{category:s.category,id:a.id,tickets:i.ticketsData,key:s.category,apiUrl:s.apiUrl,componentTitle:s.componentTitle,scroll_to:"org-tickets-table",from:"org",disableLoader:a.disableLoader,onLoaderValue:i.handelLoader,allTickets:i.allData},null,8,["category","id","tickets","apiUrl","componentTitle","disableLoader","onLoaderValue","allTickets"]))])])])])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(f,{key:0,onClose:i.onClose,showModal:s.showModal,statusIds:e.statusIds,ticketIds:s.ticketId,status:s.change_status,componentTitle:s.componentTitle},null,8,["onClose","showModal","statusIds","ticketIds","status","componentTitle"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showMergeModal?(o(),I(b,{key:0,onClose:i.onClose,showModal:s.showMergeModal,parent_tickets:s.parent_tickets,ticketIds:s.ticketId,componentTitle:s.componentTitle},null,8,["onClose","showModal","parent_tickets","ticketIds","componentTitle"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[s.showAssignModal?(o(),I(y,{key:0,onClose:i.onClose,showModal:s.showAssignModal,ticketIds:s.ticketId,componentTitle:s.componentTitle,tickets:s.allEntries},null,8,["onClose","showModal","ticketIds","componentTitle","tickets"])):u("",!0)]),_:1})])])])}const _8=U(YI,[["render",f8],["__scopeId","data-v-fabb797d"]]);const b8={name:"user-report",description:"User report page",props:{id:{type:[String,Number],default:""}},data(){return{chartData:"",updated_at:"",date:"",apiUrl:"/api/ticket-chart-report",loading:!0,cardOpen:!1}},computed:{isMobile(){return window.innerWidth<=800&&window.innerHeight<=600}},created(){window.emitter.on("refreshOrgReport",this.getChartData)},methods:{toggleCard(){this.cardOpen=!this.cardOpen,this.cardOpen&&this.getChartData()},onChange(e,t){let a=e.filter(s=>s),r="";a.length&&(r="date::"+a.map(s=>Oe(s).format("YYYY-MM-DD HH:mm:ss")).join("~")),this.updated_at=r,e&&this.getChartData()},getChartData(){this.loading=!0,R.get(this.apiUrl,{params:{"organization-ids[]":this.id,"updated-at":this.updated_at}}).then(e=>{this.chartData=e.data.data,this.showChart(this.chartData)}).catch(e=>{this.loading=!1})},showChart(e){this.loading=!1;var t=e.datasets.map(i=>(i={label:i.label,tension:.5,fill:!1,borderColor:i.border_color,pointBackgroundColor:i.point_background_color,backgroundColor:i.background_color,data:i.data},i));let r=t.map(i=>i.data).map(function(i){return Math.max.apply(Math,i)}),s=Math.max.apply(null,r)<10?1:"";this.$nextTick(()=>{var i=document.getElementById("trafficBar").getContext("2d"),d={type:"line",data:{labels:e.labels,datasets:t},options:{responsive:!0,maintainAspectRatio:!this.isMobile,plugins:{legend:{position:"bottom",display:!0},datalabels:{color:"#000",anchor:"end",clamp:!0,align:"bottom",formatter:function(m,p){return""},display:function(m){return!1}}},scales:{y:{min:0,ticks:{precision:0,stepSize:s}}}}};new mt(i,d)})}},components:{"date-time-field":at}},v8={class:"org-tic-report"},y8={class:"card card-light"},k8={class:"card-title"},w8={class:"card-tools"},C8={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},S8={type:"button",class:"btn btn-tool"},D8={key:0,class:"card-body"},T8={class:"row"},M8={class:"row"},O8={key:0,class:"col-md-12 col-sm-12 col-12"};function I8(e,t,a,r,s,i){const d=g("alert"),m=g("date-time-field"),p=Q("tooltip");return o(),l("div",v8,[_(d,{componentName:"UserReport"}),n("div",y8,[n("div",{class:"card-header pointer",onClick:t[0]||(t[0]=(...f)=>i.toggleCard&&i.toggleCard(...f))},[M((o(),l("h3",k8,[k(c(e.lang("report")),1)])),[[p,e.lang("report")]]),n("div",w8,[s.loading&&s.cardOpen?M((o(),l("button",C8,t[1]||(t[1]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))),[[p,e.lang("refresh")]]):u("",!0),n("button",S8,[n("i",{class:N([{"fas fa-angle-up":s.cardOpen,"fas fa-angle-down":!s.cardOpen},"fs-25"])},null,2)])])]),s.cardOpen?(o(),l("div",D8,[n("div",T8,[_(m,{label:e.lang("select_date_range"),place:e.lang("select_date_range"),value:s.date,type:"date",name:"date",required:!1,onChange:i.onChange,range:"",currentYearDate:!1,format:"YYYY-MM-DD",classname:"col-md-6 col-sm-12 col-12",confirm:!0,clearable:!0,editable:!0,disabled:!1,after:new Date},null,8,["label","place","value","onChange","after"])]),n("div",M8,[s.loading?u("",!0):(o(),l("div",O8,t[2]||(t[2]=[n("canvas",{id:"trafficBar"},null,-1)]))),t[3]||(t[3]=n("hr",{class:"visible-xs-block"},null,-1))])])):u("",!0)])])}const A8=U(b8,[["render",I8],["__scopeId","data-v-7c2b2a27"]]),L8={name:"DetachModal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},alertComponentName:{type:String,required:!0},detachParams:{type:Object,required:!0},detachUrl:{type:String,required:!0},detachType:{type:String,default:"task_ticket"},eventToFireAfterSuccess:{type:String,default:"updateTaskAssociates"},detachIconClass:{type:String,default:"fa fa-unlink"},detachAction:{type:String,default:"detach"}},data(){return{containerStyle:{width:"500px"},isDisabled:!1,loading:!1,category:""}},created(){this.category=this.$store.getters.getTaskAssociateCategory},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,R.delete(this.detachUrl,{params:this.detachParams}).then(e=>{X(e,this.alertComponentName),window.emitter.emit(this.eventToFireAfterSuccess),this.category==="associated_changes"?window.emitter.emit("TaskAssociatedChangerefreshData"):this.category==="associated_tickets"&&window.emitter.emit("TaskAssociatedTicketrefreshData"),this.onClose(),this.loading=!1,this.isDisabled=!1}).catch(e=>{this.loading=!1,this.isDisabled=!1,this.onClose(),B(e,this.alertComponentName)})}}},E8={class:"modal-title"},x8={key:0},P8={key:1,class:"row"},R8=["disabled"];function F8(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("modal");return a.showModal?(o(),I(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",E8,c(e.trans(`${a.detachAction}_${a.detachType}`)),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",x8,[n("span",null,c(e.trans(`task_${a.detachAction}_confirm`)),1)])),s.loading?(o(),l("div",P8,[_(d,{"animation-duration":4e3,color:"#1d78ff",size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=p=>i.onSubmit()),class:"btn btn-secondary",disabled:s.isDisabled},[n("i",{class:N(a.detachIconClass)},null,2),k("  "+c(e.trans(`${a.detachAction}_${a.detachType}`)),1)],8,R8)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const N8=U(L8,[["render",F8]]),V8={name:"OrgDetachModal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},categoryId:{type:Number,required:!0},orgId:{type:Number,required:!0}},data(){return{containerStyle:{width:"500px"},isDisabled:!1,loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,R.delete("/form-category/detach-org/"+this.categoryId+"/"+this.orgId).then(e=>{X(e,"org-view"),window.emitter.emit("hideOrganizationForms"),this.onClose(),this.loading=!1,this.isDisabled=!1}).catch(e=>{this.loading=!1,this.isDisabled=!1,this.onClose(),B(e,"org-view"),window.emitter.emit("hideOrganizationForms")})}}},j8={class:"modal-title"},U8={key:0},B8={key:1,class:"row"},z8=["disabled"];function H8(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("modal");return a.showModal?(o(),I(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",j8,c(e.trans("detach_organization_form")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("div",U8,[n("span",null,c(e.trans("category_detach_confirmation_message")),1)])),s.loading?(o(),l("div",B8,[_(d,{"animation-duration":4e3,color:"#1d78ff",size:60})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=p=>i.onSubmit()),class:"btn btn-secondary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fa fa-unlink"},null,-1)),k("  "+c(e.trans("detach")),1)],8,z8)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const W8=U(V8,[["render",H8]]);const q8={name:"org-forms",description:"Organization Forms",props:{id:{type:String,required:!0}},computed:{...pt(["formattedTime","formattedDate"])},created(){window.emitter.on("hideOrganizationForms",()=>{this.showCardBody=!1})},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),type:this.trans("type"),updated_at:this.trans("updated_at"),action:this.trans("action")},columnsClasses:{name:"form-name",type:"form-type",updated_at:"form-updated_at"},texts:{filter:"",limit:""},templates:{name(t,a){return a.name},type(t,a){return a.type},updated_at(t,a){return e.formattedTime(a.updated_at)},action(t,a){let r=e.h("i",{class:"fa fa-unlink"});const i={class:"btn btn-primary",title:a.id===1?this.trans("default_field_is_not_detachable"):this.trans("detach"),onClick:()=>{a.id!==1&&e.onDetach(a.id)}};return a.id===1&&(i.style="cursor: not-allowed; background-color:grey"),e.h("a",i,[r])}},sortable:[],pagination:{chunk:5,nav:"scroll"},requestAdapter(){return{paginate:1}},responseAdapter({data:t}){return{data:t.data.data,count:t.data.data.length}}}},data(){return{showCardBody:!1,detachUrl:"",detachParams:{},showDetachModal:!1,categoryId:0,options:{},apiUrl:"/api/dependency/form-categories?organization="+this.id,columns:["name","type","updated_at","action"]}},methods:{onDetach(e){this.categoryId=e,this.showDetachModal=!0},onClose(){this.showDetachModal=!1}},components:{OrgDetachModal:W8,DetachModal:N8}},K8={id:"org-forms",class:"card card-light"},Y8={class:"card-title"},G8={class:"card-tools"},Q8={type:"button",class:"btn btn-tool"},X8={key:0,class:"card-body"},J8={class:"tab-content"},Z8={class:"active tab-pane"};function $8(e,t,a,r,s,i){const d=g("data-table"),m=g("OrgDetachModal");return o(),l("div",K8,[n("div",{class:"card-header pointer",onClick:t[0]||(t[0]=p=>s.showCardBody=!s.showCardBody)},[n("h3",Y8,c(e.lang("list_of_form_categories")),1),n("div",G8,[n("button",Q8,[n("i",{class:N([{"fas fa-angle-up":s.showCardBody,"fas fa-angle-down":!s.showCardBody},"fs-25"])},null,2)])])]),s.showCardBody?(o(),l("div",X8,[n("div",J8,[n("div",Z8,[_(d,{url:s.apiUrl,dataColumns:s.columns,option:s.options},null,8,["url","dataColumns","option"])])])])):u("",!0),n("div",null,[_(ae,{name:"modal"},{default:T(()=>[_(m,{showModal:s.showDetachModal,"org-id":a.id,"category-id":s.categoryId,onClose:i.onClose},null,8,["showModal","org-id","category-id","onClose"])]),_:1})])])}const eA=U(q8,[["render",$8],["__scopeId","data-v-865514a3"]]);const tA={name:"org-view",description:"Organization view page",props:{authInfo:{type:Object,default:()=>{}}},data(){return{orgId:"",org_id:"",orgData:"",orgManagers:[],location:"",loading:!0,counter:0}},created(){window.emitter.on("refreshOrgData",this.refreshOrgDetails)},beforeMount(){const e=window.location.pathname;let t=e.split("/");this.location=t[t.length-2],this.orgId=ke(e),this.getInitialValues(this.orgId)},methods:{refreshOrgDetails(e=""){e?setTimeout(()=>{this.loading=!0,this.getInitialValues(this.orgId)},2e3):this.getInitialValues(this.orgId,!0)},getInitialValues(e,t){R.get("/api/organization/view/"+e+"?date="+Date.now()).then(a=>{this.orgData=a.data.data.organization,this.orgManagers=a.data.data.manager,t&&(this.counter+=1),this.loading=!1}).catch(a=>{this.loading=!1,B(a,"org-view"),this.redirect("/panel/dashboard")})},orgPageVisible(){window.emitter.emit("org-page-mounted",{org_id:this.orgId,from:"org",disableLoader:"true"})},orgPageMounted(){window.emitter.emit("org-page-mounted",{org_id:this.orgId,from:"org",disableLoader:"true"})}},components:{OrgForms:eA,"org-details":jO,"org-managers":tI,"org-members":bI,"org-departments":KI,"org-tickets":_8,"org-report":A8}},sA={class:"col-sm-12"},aA={class:"row"},nA={class:"col-md-12"},iA={key:0,class:"row"},oA={class:"col-md-8"},rA={id:"org-page-div"},lA={id:"org-page-table"},dA={key:1,class:"row"};function cA(e,t,a,r,s,i){const d=g("alert"),m=g("org-details"),p=g("org-managers"),f=g("org-members"),b=g("org-tickets"),y=g("org-departments"),D=g("org-forms"),w=g("org-report"),S=g("reuse-loader");return o(),l("div",sA,[n("div",aA,[n("div",nA,[_(d,{componentName:"org-view"})])]),!s.loading&&s.orgData?(o(),l("div",iA,[(o(),l("div",{class:"col-md-4",key:s.counter},[_(m,{orgData:s.orgData,managerList:s.orgManagers},null,8,["orgData","managerList"]),s.orgManagers.length>0?(o(!0),l(E,{key:0},q(s.orgManagers,L=>(o(),I(p,{key:L.id,manager:L},null,8,["manager"]))),128)):u("",!0)])),n("div",oA,[s.orgId?(o(),I(f,{key:0,id:s.orgId,name:s.orgData.name,disableLoader:"true",orgData:s.orgData},null,8,["id","name","orgData"])):u("",!0),s.orgId?(o(),I(b,{key:1,id:s.orgId,disableLoader:"true",name:s.orgData.name},null,8,["id","name"])):u("",!0),s.orgData.OrganizationDepartmentStatus?(o(),I(y,{key:2,disableLoader:"true",id:s.orgId},null,8,["id"])):u("",!0),s.orgData.loggedInUserRole==="admin"?(o(),I(D,{key:3,id:s.orgId},null,8,["id"])):u("",!0),n("div",rA,c(i.orgPageMounted()),1),n("div",lA,c(i.orgPageVisible()),1),s.orgId?(o(),I(w,{key:4,id:s.orgId,name:s.orgData.name},null,8,["id","name"])):u("",!0)])])):(o(),l("div",dA,[_(S,{"animation-duration":4e3,size:60})]))])}const uA=U(tA,[["render",cA],["__scopeId","data-v-4882d256"]]);const hA={class:"permission-update"},mA={__name:"PermissionDenied",props:{name:String,tooltipContent:String},setup(e){return(t,a)=>{const r=Q("tooltip");return M((o(),l("span",hA,[k(c(e.name),1)])),[[r,{content:e.tooltipContent,html:!0}]])}}},Hs=U(mA,[["__scopeId","data-v-896d0774"]]);const pA={name:"canned-list",description:"Canned response list",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},props:{auth:{type:Object,default:()=>{}}},data(){return{columns:["title","created_by","created_at","updated_by","updated_at","action"],options:{},apiUrl:"api/canned/list",componentName:"canned-response-index"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{title:this.trans("name"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),created_by:this.trans("created_by"),updated_by:this.trans("updated_by"),action:this.trans("action")},columnsClasses:{title:"canned-name",created_by:"canned-author",created_at:"canned-created",updated_by:"canned-update",updated_at:"canned-updated",action:"canned-action"},texts:{filter:"",limit:""},templates:{created_by:function(t,a){const r=e.auth.user_data.role==="admin",s=e.auth.user_data.id===a.user_id;return r||s?a.created_by?e.h(Ve,{to:"/user/"+a.user_id},a.created_by):"--":a.created_by?e.h(Hs,{name:a.created_by,tooltipContent:e.trans("access_denied_now")}):"--"},updated_by:function(t,a){const r=e.auth.user_data.role==="admin",s=e.auth.user_data.id===a.updated_by_id;return r||s?a.updated_by?e.h(Ve,{to:"/user/"+a.updated_by_id},a.updated_by):"--":a.updated_by?e.h(Hs,{name:a.updated_by,tooltipContent:e.trans("access_denied_now")}):"--"},updated_at:function(t,a){return e.formattedTime(a.updated_at)},created_at:function(t,a){return e.formattedTime(a.created_at)},action:(t,a)=>e.auth.user_data.role==="admin"||e.auth.user_data.id===a.user_id?e.h(je,{data:a,componentTitle:this.componentName}):e.h(je,{data:a,isAuthorAdminEditOrDeleteEnabled:!0,componentTitle:this.componentName})},sortable:["title","created_by","updated_by","created_at","updated_at"],filterable:["title","created_by","updated_by","created_at","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"updated_at","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.from="agent",a.canned_edit_url="/canned/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/canned/delete/"+a.id,e.auth.user_data.id!==a.user_id&&(a.is_not_deletable=!0,a.delete_tip="you_cant_delete"),a)),count:t.data.total}},orderBy:{column:"updated_at",ascending:!0}}}},gA={id:"canned_response",class:"col-sm-12"},fA={class:"card card-light"},_A={class:"card-header"},bA={class:"card-title"},vA={class:"card-tools"},yA={class:"card-body",id:"my_canned"};function kA(e,t,a,r,s,i){const d=g("alert"),m=g("router-link"),p=g("data-table"),f=Q("tooltip");return o(),l("div",gA,[_(d,{componentName:"dataTableModal"}),n("div",fA,[n("div",_A,[n("h3",bA,c(e.lang("canned_response")),1),n("div",vA,[M((o(),I(m,{to:"/canned/create",class:"btn-tool"},{default:T(()=>t[0]||(t[0]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[f,e.lang("create_canned_response")]])])]),n("div",yA,[_(p,{url:s.apiUrl,dataColumns:s.columns,option:s.options,componentTitle:s.componentName,scroll_to:"canned_response"},null,8,["url","dataColumns","option","componentTitle"])])])])}const wA=U(pA,[["render",kA]]);function CA(e){const{title:t,departments:a,share:r}=e;let s={title:[t,"isRequired"]};e.share&&(s.departments=[e.departments,"isRequired"]);const i=new ye(pe),{errors:d,isValid:m}=i.validate(s);return ve.dispatch("setValidationError",d),{errors:d,isValid:m}}const SA={name:"canned-page",description:"Canned create and edit page",data:()=>({title:"",loading:!1,loadingSpeed:4e3,hasDataPopulated:!1,message:"",classname:"form-group ps-0",show_err:!1,page_title:"create_canned_response",iconClass:"fas fa-save",btnName:"save",canned_id:"",share:!1,departments:[],attachments:[],inline:[],shortCodesLoader:!1,shortcodes:[],type:"reply"}),beforeMount(){const e=window.location.pathname;this.getValues(e),this.getShortCodes()},methods:{getShortCodes(){this.shortCodesLoader=!0,R.get("/api/getTicketSetting/pdfShortCodes?forCannedResponse=1").then(e=>{this.shortCodesLoader=!1,this.shortcodes=e.data.data}).catch(e=>{this.shortCodesLoader=!1,B(e,"canned-create-edit")})},getAttachments(e){this.attachments=e},getInlineImages(e){this.inline=e},getValues(e){const t=ke(e);e.indexOf("edit")>=0?(this.page_title="edit_canned_response",this.iconClass="fas fa-sync-alt",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,R.get("/api/canned/edit/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.canned_id=e,this.updateStatesWithData(t.data.data)}).catch(t=>{this.loading=!1,this.hasDataPopulated=!1,B(t,"canned-create-edit"),setTimeout(()=>this.$router.push({name:"Canned Response Index"}),2e3)})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=CA(this.$data);return!!t},onSubmit(){if(this.classname=this.message===""?"form-group has-error ps-0":"form-group ps-0",this.show_err=this.message==="",this.isValid()&&this.message!==""){this.loadingSpeed=8e3,this.loading=!0;const a={};this.canned_id!=""&&(a.canned_id=this.canned_id),a.title=this.title,a.message=this.message,a.attachment=this.attachments,a.inline=this.inline;var e=[];for(var t in this.departments)e.push(this.departments[t].id);a["d_id[]"]=e,a.share=this.share,R.post("/api/agent/canned-response",a).then(r=>{this.loading=!1,X(r,"canned-create-edit"),this.canned_id===""?setTimeout(()=>this.$router.push({name:"Canned Response Index"}),3e3):this.getInitialValues(this.canned_id)}).catch(r=>{this.loading=!1,B(r,"canned-create-edit")})}},onChange(e,t){this[t]=e}},components:{"text-field":Se,"dynamic-select":_e,"add-media":it}},DA={class:"col-sm-12"},TA={key:0,class:"row"},MA={key:1,class:"card card-light"},OA={class:"card-header"},IA={class:"card-title"},AA={class:"card-body"},LA={class:"row"},EA={class:"col-md-12"},xA={class:"card card-light"},PA={class:"card-header"},RA={class:"card-title"},FA={class:"card-body col-md-12"},NA={key:0,class:"row"},VA={key:1},jA={class:"alert alert-info alert-dismissable"},UA={key:0,class:"list-inline"},BA={class:"list-inline-item",style:{width:"23%"}},zA={"data-placement":"right"},HA={class:"row"},WA={class:"row addMedia ms-0"},qA={class:"row"},KA={class:"col-sm-12"},YA={class:"label_align",name:"share"},GA={class:"card-footer"},QA=["disabled"];function XA(e,t,a,r,s,i){const d=g("custom-loader"),m=g("alert"),p=g("reuse-loader"),f=g("text-field"),b=g("add-media"),y=g("dynamic-select"),D=Q("tooltip"),w=Q("focus-first-input");return o(),l("div",DA,[e.hasDataPopulated===!1||e.loading===!0?(o(),l("div",TA,[_(d,{duration:e.loadingSpeed},null,8,["duration"])])):u("",!0),_(m,{componentName:"canned-create-edit"}),e.hasDataPopulated===!0?(o(),l("div",MA,[n("div",OA,[n("h3",IA,c(e.lang(e.page_title)),1)]),n("div",AA,[n("div",LA,[n("div",EA,[n("div",xA,[n("div",PA,[n("h3",RA,c(e.trans("list-of-available-shot-codes")),1)]),n("div",FA,[e.shortCodesLoader?(o(),l("div",NA,[_(p,{"animation-duration":4e3,size:60})])):(o(),l("div",VA,[n("div",jA,[t[2]||(t[2]=n("i",{class:"fas fa-info-circle"},null,-1)),t[3]||(t[3]=k("  ")),n("span",null,c(e.trans("template-short-code-tips")),1),t[4]||(t[4]=n("button",{type:"button",class:"btn-close float-end","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))]),e.shortcodes.length?(o(),l("ul",UA,[(o(!0),l(E,null,q(e.shortcodes,S=>(o(),l("li",BA,[M((o(),l("span",zA,[k(c(S.shortcode),1)])),[[D,{content:e.trans(S.desc_lang_key),html:!0},void 0,{right:!0}]])]))),256))])):u("",!0)]))])])])]),M((o(),l("div",HA,[_(f,{label:e.lang("title"),value:e.title,type:"text",name:"title",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])])),[[w]]),n("div",WA,[_(b,{attachments:e.attachments,inlineFile:e.inline,description:e.message,classname:e.classname,name:"message",show_error:e.show_err,onAttach:i.getAttachments,onInline:i.getInlineImages,type:e.type,onInput:i.onChange,page_name:"canned",chunkApi:"/chunk/upload/public",filesApi:"/media/files/public",id:"canned-response-tinymce"},null,8,["attachments","inlineFile","description","classname","show_error","onAttach","onInline","type","onInput"])]),n("div",qA,[n("div",KA,[n("label",YA,[M(n("input",{class:"checkbox_align",type:"checkbox",name:"share",id:"share","onUpdate:modelValue":t[0]||(t[0]=S=>e.share=S)},null,512),[[_t,e.share]]),k("  "+c(e.lang("share-response-with-department")),1)])]),e.share?(o(),I(y,{key:0,label:e.lang("departments"),multiple:!0,name:"departments",required:!0,classname:"col-sm-6",apiEndpoint:"/api/dependency/departments",value:e.departments,onChange:i.onChange},null,8,["label","value","onChange"])):u("",!0)])]),n("div",GA,[n("button",{type:"button",onClick:t[1]||(t[1]=S=>i.onSubmit()),disabled:e.loading,class:"btn btn-primary"},[n("span",{class:N(e.iconClass)},null,2),k(" "+c(e.lang(e.btnName)),1)],8,QA)])])):u("",!0)])}const Ws=U(SA,[["render",XA],["__scopeId","data-v-4ffbd13c"]]),JA={name:"kb-delete-modal",description:"Kb delete modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},apiUrl:{type:String,default:""},alert:{type:String,default:""},redirectUrl:{type:String,default:""},updateKb:{type:Function,default:()=>{}}},data(){return{isDisabled:!1,loading:!1,containerStyle:{width:"500px"}}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,R.delete(this.apiUrl).then(e=>{this.updateKb(),this.loading=!1,this.isDisabled=!0,X(e,this.alert),window.emitter.emit("updateCommentsList"),this.onClose(),this.redirectUrl&&setTimeout(()=>this.$router.push({path:this.redirectUrl}),3e3)}).catch(e=>{this.loading=!1,this.onClose(),B(e,this.alert)})}}},ZA={class:"modal-title"},$A={key:0},e4={key:1,class:"row"},t4=["disabled"];function s4(e,t,a,r,s,i){const d=g("reuse-loader"),m=g("modal");return a.showModal?(o(),I(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:s.containerStyle},{title:T(()=>[n("h4",ZA,c(e.lang("delete")),1)]),fields:T(()=>[s.loading?u("",!0):(o(),l("span",$A,c(e.lang("are_you_sure_you_want_to_delete")),1)),s.loading?(o(),l("div",e4,[_(d,{duration:4e3})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=(...p)=>i.onSubmit&&i.onSubmit(...p)),class:"btn btn-secondary",disabled:s.isDisabled},[t[1]||(t[1]=n("i",{class:"fas fa-trash"},null,-1)),k(" "+c(e.lang("delete")),1)],8,t4)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const bt=U(JA,[["render",s4]]);const a4={setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),timeFormat:ee(()=>e.getters.timeFormat)}},props:{article:{type:Object,default:()=>{}},status:{type:[String,Number,Boolean],default:1},updateKb:{type:Function,default:()=>{}}},data(){return{slug:"",showModal:!1,isRtl:!1}},created(){this.$store.dispatch("commentFilterData",{}),this.isRtl=Te(sessionStorage.getItem("is_rtl"))},methods:{publishDate(e){if(e){let t=new Date(e).toISOString();return Oe(t).format(this.timeFormat)}},subString(e,t=10){return ge(e,t)},viewArticle(e){this.$store.dispatch("setArticleId",e)},deleteMethod(e){this.slug=e,this.showModal=!0},onClose(){this.showModal=!1},convert(e){if(e)return e.length>250?e.replace(/(<\/?(?:a|p|blockquote)[^>]*>)|<[^>]+>/ig,"").substring(0,250)+"....":e.replace(/(<\/?(?:a|p|blockquote)[^>]*>)|<[^>]+>/ig,"")},allComments(e,t){const a={to:"all",id:e,name:t};this.$store.dispatch("commentFilterData",a),this.$router.push({path:"/article/comment",name:"KB Article Comments",params:{from:a}})},pendingComments(e,t){const a={to:"unapprove",id:e,name:t};this.$store.dispatch("commentFilterData",a),this.$router.push({path:"/article/comment",name:"KB Article Comments",params:{from:a}})}},components:{"delete-modal":bt}},n4={class:"article-index-box"},i4={class:"timeline mt-20"},o4={id:"article_div"},r4={class:"timeline-item",id:"article_item"},l4={class:"time"},d4={class:"timeline-header"},c4=["href"],u4={class:"fas fa-question-circle cursor text-primary"},h4={class:"p-3"},m4={class:"text-muted"},p4={class:"text-muted"},g4={class:"text-muted"},f4=["innerHTML"],_4=["innerHTML"],b4={class:"timeline-footer bt-1"},v4=["href"],y4={class:"badge text-bg-danger article-badge"};function k4(e,t,a,r,s,i){const d=g("popover"),m=g("router-link"),p=g("delete-modal"),f=Q("tooltip");return o(),l("div",n4,[n("div",i4,[n("div",o4,[n("div",r4,[n("span",l4,[t[4]||(t[4]=n("i",{class:"far fa-clock"},null,-1)),k(" "+c(i.publishDate(a.article.publish_time)),1)]),n("h3",d4,[M((o(),l("a",{href:e.basePath()+"/show/"+a.article.slug},[k(c(a.article.name),1)],8,c4)),[[f,a.article.name]]),_(d,{arrow:"",placement:"right"},{content:T(()=>[n("div",h4,[a.article.author?(o(),l(E,{key:0},[n("strong",null,[t[5]||(t[5]=n("i",{class:"fas fa-user me-1 mb-2"},null,-1)),k(" "+c(e.lang("author")),1)]),t[6]||(t[6]=k("   ")),M((o(),l("p",m4,[k(c(a.article.author.full_name?a.article.author.full_name:a.article.author.user_name),1)])),[[f,a.article.author.full_name?a.article.author.full_name:a.article.author.user_name]]),t[7]||(t[7]=n("hr",null,null,-1))],64)):u("",!0),a.article.categories.length>0?(o(),l(E,{key:1},[n("strong",null,[t[8]||(t[8]=n("i",{class:"fas fa-newspaper me-1 mb-2"},null,-1)),k(" "+c(e.lang("categories")),1)]),t[10]||(t[10]=k("   ")),(o(!0),l(E,null,q(a.article.categories.slice(0,20),(b,y)=>M((o(),l("p",p4,[t[9]||(t[9]=n("i",{class:"far fa-circle"},null,-1)),k(" "+c(i.subString(b.name,25)),1)])),[[f,b.name]])),256)),t[11]||(t[11]=n("hr",null,null,-1))],64)):u("",!0),a.article.tags.length>0?(o(),l(E,{key:2},[n("strong",null,[t[12]||(t[12]=n("i",{class:"fas fa-tags me-1 mb-2"},null,-1)),k(" "+c(e.lang("tags")),1)]),t[14]||(t[14]=k("   ")),(o(!0),l(E,null,q(a.article.tags.slice(0,20),(b,y)=>M((o(),l("p",g4,[t[13]||(t[13]=n("i",{class:"far fa-circle"},null,-1)),k(" "+c(b.name),1)])),[[f,b.name]])),256)),t[15]||(t[15]=n("hr",null,null,-1))],64)):u("",!0)])]),default:T(()=>[t[16]||(t[16]=k("   ")),M(n("i",u4,null,512),[[f,e.lang("click_to_see_details")]])]),_:1})]),a.article.summary?(o(),l("div",{key:0,class:"timeline-body",innerHTML:a.article.summary},null,8,f4)):(o(),l("div",{key:1,class:"timeline-body",innerHTML:i.convert(a.article.description)},null,8,_4)),n("div",b4,[M((o(),I(m,{to:"/article/"+a.article.id+"/edit",class:"btn btn-xs btn-light text-dark"},{default:T(()=>[t[17]||(t[17]=n("i",{class:"fas fa-edit"},null,-1)),k(" "+c(e.lang("edit")),1)]),_:1},8,["to"])),[[f,e.lang("edit")]]),a.status?M((o(),l("a",{key:0,target:"_blank",href:e.basePath()+"/show/"+a.article.slug,class:"btn btn-xs btn-light text-dark",onClick:t[0]||(t[0]=b=>i.viewArticle(a.article.id))},[t[18]||(t[18]=n("i",{class:"fas fa-eye"},null,-1)),k(" "+c(e.lang("view")),1)],8,v4)),[[f,e.lang("view")]]):u("",!0),M((o(),l("a",{href:"javascript:;",class:"btn btn-xs btn-light text-dark",onClick:t[1]||(t[1]=b=>i.deleteMethod(a.article.slug))},[t[19]||(t[19]=n("i",{class:"fas fa-trash"},null,-1)),k(" "+c(e.lang("delete")),1)])),[[f,e.lang("delete")]]),n("span",{style:ne({float:s.isRtl?"left":"right"})},[M((o(),l("a",{href:"javascript:;",onClick:t[2]||(t[2]=b=>i.pendingComments(a.article.id,a.article.name))},[t[20]||(t[20]=n("i",{class:"far fa-comment-dots"},null,-1)),n("span",y4,c(a.article.pending_comments_count>9?"9+":a.article.pending_comments_count),1)])),[[f,e.lang("pending_comments")]]),t[22]||(t[22]=k("   ")),M((o(),l("a",{href:"javascript:;",class:N({"rtl-padding":s.isRtl,"ltr-padding":!s.isRtl&&a.article.pending_comments_count>9}),onClick:t[3]||(t[3]=b=>i.allComments(a.article.id,a.article.name))},[t[21]||(t[21]=n("i",{class:"far fa-comments ms-1"},null,-1)),k(" ("+c(a.article.all_comments_count)+") "+c(e.lang("comments")),1)],2)),[[f,e.lang("total_comments")]])],4)])])])]),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(p,{key:0,onClose:i.onClose,showModal:s.showModal,alert:"ArticlesIndex",apiUrl:"/article/delete/"+s.slug,updateKb:a.updateKb},null,8,["onClose","showModal","apiUrl","updateKb"])):u("",!0)]),_:1})])}const w4=U(a4,[["render",k4],["__scopeId","data-v-8ce7a1c6"]]);const C4={props:{sortingMenu:{type:Array,required:!0}},methods:{sort(e,t){e.order=="asc"?(this.$emit("sort",e),$(".sortval").html(this.trans(e.name)+" "+this.trans(e.order_name)+'&nbsp<span class="caret"></span>'),this.sortingMenu[t].order="desc",this.sortingMenu[t].class="fas fa-sort-amount-up",this.sortingMenu[t].order_name=this.trans("descending")):(this.$emit("sort",e),$(".sortval").html(this.trans(e.name)+" "+this.trans(e.order_name)+'&nbsp<span class="caret"></span>'),this.sortingMenu[t].order="asc",this.sortingMenu[t].class="fas fa-sort-amount-down",this.sortingMenu[t].order_name=this.trans("ascending"))}}},S4={class:"btn-group"},D4={class:"dropdown-menu dropdown-menu-end kb-sort-dropdown"},T4=["onClick"];function M4(e,t,a,r,s,i){return o(),l("div",S4,[t[0]||(t[0]=n("button",{type:"button",class:"btn btn-md btn-light dropdown-toggle sortval bg-white","data-bs-toggle":"dropdown"},[n("i",{class:"fas fa-sort"}),k("  ")],-1)),n("div",D4,[(o(!0),l(E,null,q(a.sortingMenu,(d,m)=>(o(),l("a",{class:"dropdown-item",onClick:p=>i.sort(d,m),href:"javascript:;",id:"sort"},[n("i",{class:N(d.class)},null,2),k(" "+c(e.trans(d.name))+" "+c(e.trans(d.order_name)),1)],8,T4))),256))])])}const Aa=U(C4,[["render",M4],["__scopeId","data-v-778cba12"]]),O4={props:["ticketper"],data(){return{ticketPer:this.ticketper,limitMenu:[{value:10},{value:25},{value:50},{value:100}]}},methods:{onLimit(e){this.ticketPer=e.value,this.$emit("message",e.value)}}},I4={class:"btn-group"},A4={type:"button",class:"btn btn-md btn-light dropdown-toggle sortval bg-white","data-bs-toggle":"dropdown"},L4={class:"dropdown-menu dropdown-menu-right kb-sort-dropdown"},E4=["onClick"];function x4(e,t,a,r,s,i){return o(),l("div",I4,[n("button",A4,c(s.ticketPer),1),n("div",L4,[(o(!0),l(E,null,q(s.limitMenu,d=>(o(),l("a",{class:"dropdown-item",onClick:m=>i.onLimit(d),href:"javascript:;",id:"limit"},c(d.value),9,E4))),256))])])}const La=U(O4,[["render",x4]]),P4={data(){return{articleList:"",paramsObj:{},length:0,perpage:10,pagination:1,records:0,loading:!0,pageLoader:!1,search:"",status:1,show:!1,filterOptions:[{section:[{name:"categories",url:"/api/dependency/categories",label:"categories"},{name:"tags",url:"/api/dependency/tags",label:"tags"},{name:"visible_to",type:"static-select",label:"visible_to",elements:[{id:"all_users",name:"All Users"},{id:"logged_in_users",name:"LoggedIn Users"},{id:"agents",name:"Agents"},{id:"organization_members",name:"Organization Members"}]}]},{section:[{name:"type",type:"static-select",label:"type",elements:[{name:"Published",id:1},{name:"Draft",id:0}]},{name:"author_ids",url:"/api/dependency/agents",label:"author"},{name:"organization_ids",url:"/api/dependency/organizations",label:"organizations"}]},{section:[{name:"created_at",type:"date",label:["created_at","created_within_last"],timeOptions:{start:"00:00",step:"00:30",end:"23:30"},range:!0},{name:"published_at",type:"date",label:["published_at","published_within_last"],timeOptions:{start:"00:00",step:"00:30",end:"23:30"},range:!0}]}],isShowFilter:!1,appliedFilters:{},filterParams:{},isRtl:!1,sortingMenu:[{name:"article_publish_time",value:"publish_time",order:"asc",class:"fas fa-sort-amount-down",order_name:"ascending"},{name:"article_name",value:"name",order:"asc",class:"fas fa-sort-amount-down",order_name:"ascending"}]}},beforeMount(){this.commonApi(),this.getKbStatus(),this.filterData()},created(){window.emitter.on("updateFilter",this.updateFilter),this.isRtl=Te(sessionStorage.getItem("is_rtl"))},methods:{updateFilter(e){this.filterOptions.map(function(t){t.section.map(function(a){e.name==a.name&&(a.value=e.value)})})},updateFilterMeta(e){this.filterOptions.map(function(t){t.section.map(function(a){a.value=e[a.name]?e[a.name]:""})})},filterData(){this.filterOptions.map(function(e){e.section.map(function(t){t.elements=t.type==="static-select"?t.elements:[],t.isMultiple=t.type!=="static-select",t.isPrepopulate=!1,t.value="",t.className="col-sm-4"})})},selectedFilters(e){return e==="closeEvent"?this.isShowFilter=!1:e==="resetEvent"?this.resetFilter():this.applyFilter(e)},resetFilter(){this.pageLoader=!0,this.commonApi(),this.filterOptions=this.filterOptions.map(function(e){return e.section.map(function(t){t.elements=t.type==="static-select"?t.elements:[],t.isMultiple=t.type!=="static-select",t.isPrepopulate=!1,t.value="",t.className="col-sm-4"}),e})},applyFilter(e){this.updateFilterMeta(e),this.pageLoader=!0,this.appliedFilters=e;let t=ui(this.filterOptions,e);t[t.length-1]==="&"&&(t=t.slice(0,-1)),t=t.split("&").reduce(function(a,r,s){let i=r.split("=");return i[0]&&i[1]&&(a[i[0].replace(/\s+/g,"")]=i[1].trim()),a},{}),this.filterParams=t,this.commonApi(t,"filter"),this.isShowFilter=!1},toggleFilterView(){this.isShowFilter=!this.isShowFilter},updateKbList(){this.loading=!0,this.paramsObj.page=this.pagination,this.commonApi(this.paramsObj)},getKbStatus(){R.get("kb/settings/getvalue").then(({data:e})=>{this.status=e.data.kbsettings.status}).catch(e=>{this.status=0})},commonApi(e,t=""){var a=t==="filter"?{...this.paramsObj,...e}:{...this.filterParams,...e};R.get("/get-articles",{params:a}).then(r=>{this.loading=!1,this.pageLoader=!1,this.articleList=r.data.message.data,r.data.message.total==0&&(this.show=!0),this.records=r.data.message.total,this.perpage=r.data.message.per_page,this.length=r.data.message.total}).catch(r=>{this.loading=!1,this.pageLoader=!1,B(r,"ArticlesIndex")})},handlePageCount(e){this.pageLoader=!0,this.pagination=1,this.paramsObj.pagination=e,setTimeout(()=>{this.commonApi(this.paramsObj)},100)},sorting(e){this.pageLoader=!0,this.paramsObj["sort-by"]=e.value,this.paramsObj.order=e.order,this.commonApi(this.paramsObj)},pageChanged(){this.pageLoader=!0;var e=document.getElementById("kb-articles");e.scrollIntoView({behavior:"smooth"}),this.paramsObj.page=this.pagination,this.commonApi(this.paramsObj)},handleSearch(){this.pageLoader=!0,this.paramsObj["search-query"]=this.search,this.commonApi(this.paramsObj)}},components:{"articles-box":w4,"kb-sorting":Aa,"data-per-page":La,"kb-filter":_i}},R4={class:"col-sm-12"},F4={class:"card card-light"},N4={class:"card-header"},V4={class:"card-title"},j4={class:"card-tools"},U4={class:"card-body",id:"kb-articles"},B4={key:1,class:"row"},z4={class:"col-md-4"},H4={class:"col-md-3 offset-md-5"},W4={class:"d-flex"},q4={class:"mt-6px"},K4=["placeholder"],Y4={key:2,class:"mt-2"},G4={key:0,class:"row",id:"kb-pagination"},Q4={key:1},X4={style:{"text-align":"center"}},J4={key:3,class:"row"},Z4={key:4,class:"row"};function $4(e,t,a,r,s,i){const d=g("alert"),m=g("router-link"),p=g("kb-filter"),f=g("data-per-page"),b=g("kb-sorting"),y=g("articles-box"),D=g("uib-pagination"),w=g("reuse-loader"),S=g("custom-loader"),L=Q("tooltip");return o(),l("div",R4,[_(d,{componentName:"ArticlesIndex"}),n("div",F4,[n("div",N4,[n("h3",V4,c(e.lang("list_of_articles")),1),n("div",j4,[M((o(),l("a",{class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...x)=>i.toggleFilterView&&i.toggleFilterView(...x))},t[5]||(t[5]=[n("span",{class:"glyphicon glyphicon-filter"},null,-1)]))),[[L,e.lang("filter")]]),M((o(),I(m,{to:"/article/create",class:"btn-tool"},{default:T(()=>t[6]||(t[6]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[L,e.lang("create_article")]])])]),n("div",U4,[s.isShowFilter?(o(),I(p,{key:0,id:"kb-filter-box",metaData:s.filterOptions,appliedFilters:s.appliedFilters,onSelectedFilters:i.selectedFilters},null,8,["metaData","appliedFilters","onSelectedFilters"])):u("",!0),s.loading?u("",!0):(o(),l("div",B4,[n("div",z4,[s.records>0?(o(),l(E,{key:0},[_(f,{ticketper:s.perpage,onMessage:i.handlePageCount},null,8,["ticketper","onMessage"]),_(b,{sortingMenu:s.sortingMenu,onSort:i.sorting},null,8,["sortingMenu","onSort"])],64)):u("",!0)]),n("div",H4,[n("div",W4,[n("span",q4,c(e.lang("search"))+": ",1),M(n("input",{type:"text",class:"form-control search-field","onUpdate:modelValue":t[1]||(t[1]=x=>s.search=x),placeholder:e.lang("search_here"),onKeyup:t[2]||(t[2]=st((...x)=>i.handleSearch&&i.handleSearch(...x),["enter"]))},null,40,K4),[[Fe,s.search]])])])])),s.loading?u("",!0):(o(),l("div",Y4,[s.records>0?(o(),l(E,{key:0},[(o(!0),l(E,null,q(s.articleList,x=>(o(),I(y,{key:x.id,article:x,status:s.status,updateKb:i.updateKbList},null,8,["article","status","updateKb"]))),128)),s.records>10?(o(),l("div",G4,[_(D,{records:s.records,modelValue:s.pagination,"onUpdate:modelValue":t[3]||(t[3]=x=>s.pagination=x),class:"pagination","boundary-links":!0,"per-page":s.perpage,onPaginate:t[4]||(t[4]=x=>i.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"])])):u("",!0)],64)):u("",!0),s.show&&s.records==0?(o(),l("div",Q4,[n("p",X4,c(e.lang("no-data-to-show")),1)])):u("",!0)])),s.loading?(o(),l("div",J4,[_(w)])):u("",!0),s.pageLoader?(o(),l("div",Z4,[_(S)])):u("",!0)])])])}const e3=U(P4,[["render",$4]]);function t3(e){const{name:t,category:a,author:r,visible_to:s,publish_time:i,slug:d,summary:m,organization_id:p}=e;let f={name:[t,"isRequired"],category:[a,"isRequired"],author:[r,"isRequired"],visible_to:[s,"isRequired"],publish_time:[i,"isRequired"],slug:[d,"isRequired"],summary:[m,"isRequired"]};e.visible_to==="organization_members"&&(f.organization_id=[e.organization_id,"isRequired"]);const b=new ye(pe),{errors:y,isValid:D}=b.validate(f);return ve.dispatch("setValidationError",y),{errors:y,isValid:D}}var Ea={exports:{}};(function(e){e.exports=function(t){var a={};function r(s){if(a[s])return a[s].exports;var i=a[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=a,r.d=function(s,i,d){r.o(s,i)||Object.defineProperty(s,i,{enumerable:!0,get:d})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,i){if(i&1&&(s=r(s)),i&8||i&4&&typeof s=="object"&&s&&s.__esModule)return s;var d=Object.create(null);if(r.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:s}),i&2&&typeof s!="string")for(var m in s)r.d(d,m,(function(p){return s[p]}).bind(null,m));return d},r.n=function(s){var i=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(i,"a",i),i},r.o=function(s,i){return Object.prototype.hasOwnProperty.call(s,i)},r.p="",r(r.s="fb15")}({"00ee":function(t,a,r){var s=r("b622"),i=s("toStringTag"),d={};d[i]="z",t.exports=String(d)==="[object z]"},"00fd":function(t,a,r){var s=r("9e69"),i=Object.prototype,d=i.hasOwnProperty,m=i.toString,p=s?s.toStringTag:void 0;function f(b){var y=d.call(b,p),D=b[p];try{b[p]=void 0;var w=!0}catch{}var S=m.call(b);return w&&(y?b[p]=D:delete b[p]),S}t.exports=f},"0366":function(t,a,r){var s=r("1c0b");t.exports=function(i,d,m){if(s(i),d===void 0)return i;switch(m){case 0:return function(){return i.call(d)};case 1:return function(p){return i.call(d,p)};case 2:return function(p,f){return i.call(d,p,f)};case 3:return function(p,f,b){return i.call(d,p,f,b)}}return function(){return i.apply(d,arguments)}}},"0481":function(t,a,r){var s=r("23e7"),i=r("a2bf"),d=r("7b0b"),m=r("50c4"),p=r("a691"),f=r("65f0");s({target:"Array",proto:!0},{flat:function(){var y=arguments.length?arguments[0]:void 0,D=d(this),w=m(D.length),S=f(D,0);return S.length=i(S,D,D,w,0,y===void 0?1:p(y)),S}})},"06cf":function(t,a,r){var s=r("83ab"),i=r("d1e7"),d=r("5c6c"),m=r("fc6a"),p=r("c04e"),f=r("5135"),b=r("0cfb"),y=Object.getOwnPropertyDescriptor;a.f=s?y:function(w,S){if(w=m(w),S=p(S,!0),b)try{return y(w,S)}catch{}if(f(w,S))return d(!i.f.call(w,S),w[S])}},"0cb2":function(t,a,r){var s=r("7b0b"),i=Math.floor,d="".replace,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g;t.exports=function(f,b,y,D,w,S){var L=y+f.length,x=D.length,P=p;return w!==void 0&&(w=s(w),P=m),d.call(S,P,function(F,O){var j;switch(O.charAt(0)){case"$":return"$";case"&":return f;case"`":return b.slice(0,y);case"'":return b.slice(L);case"<":j=w[O.slice(1,-1)];break;default:var J=+O;if(J===0)return F;if(J>x){var W=i(J/10);return W===0?F:W<=x?D[W-1]===void 0?O.charAt(1):D[W-1]+O.charAt(1):F}j=D[J-1]}return j===void 0?"":j})}},"0cfb":function(t,a,r){var s=r("83ab"),i=r("d039"),d=r("cc12");t.exports=!s&&!i(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},1276:function(t,a,r){var s=r("d784"),i=r("44e7"),d=r("825a"),m=r("1d80"),p=r("4840"),f=r("8aa5"),b=r("50c4"),y=r("14c3"),D=r("9263"),w=r("d039"),S=[].push,L=Math.min,x=4294967295,P=!w(function(){return!RegExp(x,"y")});s("split",2,function(F,O,j){var J;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?J=function(W,H){var G=String(m(this)),se=H===void 0?x:H>>>0;if(se===0)return[];if(W===void 0)return[G];if(!i(W))return O.call(G,W,se);for(var K=[],te=(W.ignoreCase?"i":"")+(W.multiline?"m":"")+(W.unicode?"u":"")+(W.sticky?"y":""),oe=0,Z=new RegExp(W.source,te+"g"),ie,de,we;(ie=D.call(Z,G))&&(de=Z.lastIndex,!(de>oe&&(K.push(G.slice(oe,ie.index)),ie.length>1&&ie.index<G.length&&S.apply(K,ie.slice(1)),we=ie[0].length,oe=de,K.length>=se)));)Z.lastIndex===ie.index&&Z.lastIndex++;return oe===G.length?(we||!Z.test(""))&&K.push(""):K.push(G.slice(oe)),K.length>se?K.slice(0,se):K}:"0".split(void 0,0).length?J=function(W,H){return W===void 0&&H===0?[]:O.call(this,W,H)}:J=O,[function(H,G){var se=m(this),K=H==null?void 0:H[F];return K!==void 0?K.call(H,se,G):J.call(String(se),H,G)},function(W,H){var G=j(J,W,this,H,J!==O);if(G.done)return G.value;var se=d(W),K=String(this),te=p(se,RegExp),oe=se.unicode,Z=(se.ignoreCase?"i":"")+(se.multiline?"m":"")+(se.unicode?"u":"")+(P?"y":"g"),ie=new te(P?se:"^(?:"+se.source+")",Z),de=H===void 0?x:H>>>0;if(de===0)return[];if(K.length===0)return y(ie,K)===null?[K]:[];for(var we=0,re=0,fe=[];re<K.length;){ie.lastIndex=P?re:0;var be=y(ie,P?K:K.slice(re)),Me;if(be===null||(Me=L(b(ie.lastIndex+(P?0:re)),K.length))===we)re=f(K,re,oe);else{if(fe.push(K.slice(we,re)),fe.length===de)return fe;for(var xe=1;xe<=be.length-1;xe++)if(fe.push(be[xe]),fe.length===de)return fe;re=we=Me}}return fe.push(K.slice(we)),fe}]},!P)},1310:function(t,a){function r(s){return s!=null&&typeof s=="object"}t.exports=r},"13d5":function(t,a,r){var s=r("23e7"),i=r("d58f").left,d=r("a640"),m=r("ae40"),p=r("2d00"),f=r("605d"),b=d("reduce"),y=m("reduce",{1:0}),D=!f&&p>79&&p<83;s({target:"Array",proto:!0,forced:!b||!y||D},{reduce:function(S){return i(this,S,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(t,a,r){var s=r("c6b6"),i=r("9263");t.exports=function(d,m){var p=d.exec;if(typeof p=="function"){var f=p.call(d,m);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(s(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return i.call(d,m)}},"159b":function(t,a,r){var s=r("da84"),i=r("fdbc"),d=r("17c2"),m=r("9112");for(var p in i){var f=s[p],b=f&&f.prototype;if(b&&b.forEach!==d)try{m(b,"forEach",d)}catch{b.forEach=d}}},"17c2":function(t,a,r){var s=r("b727").forEach,i=r("a640"),d=r("ae40"),m=i("forEach"),p=d("forEach");t.exports=!m||!p?function(b){return s(this,b,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1a8c":function(t,a){function r(s){var i=typeof s;return s!=null&&(i=="object"||i=="function")}t.exports=r},"1be4":function(t,a,r){var s=r("d066");t.exports=s("document","documentElement")},"1c0b":function(t,a){t.exports=function(r){if(typeof r!="function")throw TypeError(String(r)+" is not a function");return r}},"1d80":function(t,a){t.exports=function(r){if(r==null)throw TypeError("Can't call method on "+r);return r}},"1d92":function(t,a,r){var s=r("e0ef");function i(d){return s(2,d)}t.exports=i},"1dde":function(t,a,r){var s=r("d039"),i=r("b622"),d=r("2d00"),m=i("species");t.exports=function(p){return d>=51||!s(function(){var f=[],b=f.constructor={};return b[m]=function(){return{foo:1}},f[p](Boolean).foo!==1})}},"23cb":function(t,a,r){var s=r("a691"),i=Math.max,d=Math.min;t.exports=function(m,p){var f=s(m);return f<0?i(f+p,0):d(f,p)}},"23e7":function(t,a,r){var s=r("da84"),i=r("06cf").f,d=r("9112"),m=r("6eeb"),p=r("ce4e"),f=r("e893"),b=r("94ca");t.exports=function(y,D){var w=y.target,S=y.global,L=y.stat,x,P,F,O,j,J;if(S?P=s:L?P=s[w]||p(w,{}):P=(s[w]||{}).prototype,P)for(F in D){if(j=D[F],y.noTargetGet?(J=i(P,F),O=J&&J.value):O=P[F],x=b(S?F:w+(L?".":"#")+F,y.forced),!x&&O!==void 0){if(typeof j==typeof O)continue;f(j,O)}(y.sham||O&&O.sham)&&d(j,"sham",!0),m(P,F,j,y)}}},"241c":function(t,a,r){var s=r("ca84"),i=r("7839"),d=i.concat("length","prototype");a.f=Object.getOwnPropertyNames||function(p){return s(p,d)}},"25f0":function(t,a,r){var s=r("6eeb"),i=r("825a"),d=r("d039"),m=r("ad6d"),p="toString",f=RegExp.prototype,b=f[p],y=d(function(){return b.call({source:"a",flags:"b"})!="/a/b"}),D=b.name!=p;(y||D)&&s(RegExp.prototype,p,function(){var S=i(this),L=String(S.source),x=S.flags,P=String(x===void 0&&S instanceof RegExp&&!("flags"in f)?m.call(S):x);return"/"+L+"/"+P},{unsafe:!0})},2655:function(t,a){t.exports=r,t.exports.default=r;function r(s){return!!s&&(typeof s=="object"||typeof s=="function")&&typeof s.then=="function"}},"29f3":function(t,a){var r=Object.prototype,s=r.toString;function i(d){return s.call(d)}t.exports=i},"2b3e":function(t,a,r){var s=r("585a"),i=typeof self=="object"&&self&&self.Object===Object&&self,d=s||i||Function("return this")();t.exports=d},"2d00":function(t,a,r){var s=r("da84"),i=r("342f"),d=s.process,m=d&&d.versions,p=m&&m.v8,f,b;p?(f=p.split("."),b=f[0]+f[1]):i&&(f=i.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=i.match(/Chrome\/(\d+)/),f&&(b=f[1]))),t.exports=b&&+b},"2e39":function(t,a,r){function s(i,d){var m=d.length,p=i.length;if(p>m)return!1;if(p===m)return i===d;e:for(var f=0,b=0;f<p;f++){for(var y=i.charCodeAt(f);b<m;)if(d.charCodeAt(b++)===y)continue e;return!1}return!0}t.exports=s},3410:function(t,a,r){var s=r("23e7"),i=r("d039"),d=r("7b0b"),m=r("e163"),p=r("e177"),f=i(function(){m(1)});s({target:"Object",stat:!0,forced:f,sham:!p},{getPrototypeOf:function(y){return m(d(y))}})},"342f":function(t,a,r){var s=r("d066");t.exports=s("navigator","userAgent")||""},3729:function(t,a,r){var s=r("9e69"),i=r("00fd"),d=r("29f3"),m="[object Null]",p="[object Undefined]",f=s?s.toStringTag:void 0;function b(y){return y==null?y===void 0?p:m:f&&f in Object(y)?i(y):d(y)}t.exports=b},"37e8":function(t,a,r){var s=r("83ab"),i=r("9bf2"),d=r("825a"),m=r("df75");t.exports=s?Object.defineProperties:function(f,b){d(f);for(var y=m(b),D=y.length,w=0,S;D>w;)i.f(f,S=y[w++],b[S]);return f}},"3bbe":function(t,a,r){var s=r("861d");t.exports=function(i){if(!s(i)&&i!==null)throw TypeError("Can't set "+String(i)+" as a prototype");return i}},4069:function(t,a,r){var s=r("44d2");s("flat")},"408c":function(t,a,r){var s=r("2b3e"),i=function(){return s.Date.now()};t.exports=i},4160:function(t,a,r){var s=r("23e7"),i=r("17c2");s({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(t,a,r){var s=r("da84");t.exports=s},4416:function(t,a){function r(s){var i=s==null?0:s.length;return i?s[i-1]:void 0}t.exports=r},"44ad":function(t,a,r){var s=r("d039"),i=r("c6b6"),d="".split;t.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(m){return i(m)=="String"?d.call(m,""):Object(m)}:Object},"44d2":function(t,a,r){var s=r("b622"),i=r("7c73"),d=r("9bf2"),m=s("unscopables"),p=Array.prototype;p[m]==null&&d.f(p,m,{configurable:!0,value:i(null)}),t.exports=function(f){p[m][f]=!0}},"44e7":function(t,a,r){var s=r("861d"),i=r("c6b6"),d=r("b622"),m=d("match");t.exports=function(p){var f;return s(p)&&((f=p[m])!==void 0?!!f:i(p)=="RegExp")}},"45fc":function(t,a,r){var s=r("23e7"),i=r("b727").some,d=r("a640"),m=r("ae40"),p=d("some"),f=m("some");s({target:"Array",proto:!0,forced:!p||!f},{some:function(y){return i(this,y,arguments.length>1?arguments[1]:void 0)}})},4840:function(t,a,r){var s=r("825a"),i=r("1c0b"),d=r("b622"),m=d("species");t.exports=function(p,f){var b=s(p).constructor,y;return b===void 0||(y=s(b)[m])==null?f:i(y)}},4930:function(t,a,r){var s=r("d039");t.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!String(Symbol())})},"498a":function(t,a,r){var s=r("23e7"),i=r("58a8").trim,d=r("c8d2");s({target:"String",proto:!0,forced:d("trim")},{trim:function(){return i(this)}})},"4b17":function(t,a,r){var s=r("6428");function i(d){var m=s(d),p=m%1;return m===m?p?m-p:m:0}t.exports=i},"4d64":function(t,a,r){var s=r("fc6a"),i=r("50c4"),d=r("23cb"),m=function(p){return function(f,b,y){var D=s(f),w=i(D.length),S=d(y,w),L;if(p&&b!=b){for(;w>S;)if(L=D[S++],L!=L)return!0}else for(;w>S;S++)if((p||S in D)&&D[S]===b)return p||S||0;return!p&&-1}};t.exports={includes:m(!0),indexOf:m(!1)}},"4de4":function(t,a,r){var s=r("23e7"),i=r("b727").filter,d=r("1dde"),m=r("ae40"),p=d("filter"),f=m("filter");s({target:"Array",proto:!0,forced:!p||!f},{filter:function(y){return i(this,y,arguments.length>1?arguments[1]:void 0)}})},"4e82":function(t,a,r){var s=r("23e7"),i=r("1c0b"),d=r("7b0b"),m=r("d039"),p=r("a640"),f=[],b=f.sort,y=m(function(){f.sort(void 0)}),D=m(function(){f.sort(null)}),w=p("sort"),S=y||!D||!w;s({target:"Array",proto:!0,forced:S},{sort:function(x){return x===void 0?b.call(d(this)):b.call(d(this),i(x))}})},"50c4":function(t,a,r){var s=r("a691"),i=Math.min;t.exports=function(d){return d>0?i(s(d),9007199254740991):0}},5135:function(t,a){var r={}.hasOwnProperty;t.exports=function(s,i){return r.call(s,i)}},5319:function(t,a,r){var s=r("d784"),i=r("825a"),d=r("50c4"),m=r("a691"),p=r("1d80"),f=r("8aa5"),b=r("0cb2"),y=r("14c3"),D=Math.max,w=Math.min,S=function(L){return L===void 0?L:String(L)};s("replace",2,function(L,x,P,F){var O=F.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,j=F.REPLACE_KEEPS_$0,J=O?"$":"$0";return[function(H,G){var se=p(this),K=H==null?void 0:H[L];return K!==void 0?K.call(H,se,G):x.call(String(se),H,G)},function(W,H){if(!O&&j||typeof H=="string"&&H.indexOf(J)===-1){var G=P(x,W,this,H);if(G.done)return G.value}var se=i(W),K=String(this),te=typeof H=="function";te||(H=String(H));var oe=se.global;if(oe){var Z=se.unicode;se.lastIndex=0}for(var ie=[];;){var de=y(se,K);if(de===null||(ie.push(de),!oe))break;var we=String(de[0]);we===""&&(se.lastIndex=f(K,d(se.lastIndex),Z))}for(var re="",fe=0,be=0;be<ie.length;be++){de=ie[be];for(var Me=String(de[0]),xe=D(w(m(de.index),K.length),0),Je=[],ot=1;ot<de.length;ot++)Je.push(S(de[ot]));var rt=de.groups;if(te){var vt=[Me].concat(Je,xe,K);rt!==void 0&&vt.push(rt);var lt=String(H.apply(void 0,vt))}else lt=b(Me,K,xe,Je,rt,H);xe>=fe&&(re+=K.slice(fe,xe)+lt,fe=xe+Me.length)}return re+K.slice(fe)}]})},5692:function(t,a,r){var s=r("c430"),i=r("c6cd");(t.exports=function(d,m){return i[d]||(i[d]=m!==void 0?m:{})})("versions",[]).push({version:"3.8.2",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,a,r){var s=r("d066"),i=r("241c"),d=r("7418"),m=r("825a");t.exports=s("Reflect","ownKeys")||function(f){var b=i.f(m(f)),y=d.f;return y?b.concat(y(f)):b}},"585a":function(t,a,r){(function(s){var i=typeof s=="object"&&s&&s.Object===Object&&s;t.exports=i}).call(this,r("c8ba"))},5899:function(t,a){t.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},"58a8":function(t,a,r){var s=r("1d80"),i=r("5899"),d="["+i+"]",m=RegExp("^"+d+d+"*"),p=RegExp(d+d+"*$"),f=function(b){return function(y){var D=String(s(y));return b&1&&(D=D.replace(m,"")),b&2&&(D=D.replace(p,"")),D}};t.exports={start:f(1),end:f(2),trim:f(3)}},"5c6c":function(t,a){t.exports=function(r,s){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:s}}},"605d":function(t,a,r){var s=r("c6b6"),i=r("da84");t.exports=s(i.process)=="process"},6428:function(t,a,r){var s=r("b4b0"),i=1/0,d=17976931348623157e292;function m(p){if(!p)return p===0?p:0;if(p=s(p),p===i||p===-i){var f=p<0?-1:1;return f*d}return p===p?p:0}t.exports=m},6547:function(t,a,r){var s=r("a691"),i=r("1d80"),d=function(m){return function(p,f){var b=String(i(p)),y=s(f),D=b.length,w,S;return y<0||y>=D?m?"":void 0:(w=b.charCodeAt(y),w<55296||w>56319||y+1===D||(S=b.charCodeAt(y+1))<56320||S>57343?m?b.charAt(y):w:m?b.slice(y,y+2):(w-55296<<10)+(S-56320)+65536)}};t.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(t,a,r){var s=r("861d"),i=r("e8b5"),d=r("b622"),m=d("species");t.exports=function(p,f){var b;return i(p)&&(b=p.constructor,typeof b=="function"&&(b===Array||i(b.prototype))?b=void 0:s(b)&&(b=b[m],b===null&&(b=void 0))),new(b===void 0?Array:b)(f===0?0:f)}},"69f3":function(t,a,r){var s=r("7f9a"),i=r("da84"),d=r("861d"),m=r("9112"),p=r("5135"),f=r("c6cd"),b=r("f772"),y=r("d012"),D=i.WeakMap,w,S,L,x=function(H){return L(H)?S(H):w(H,{})},P=function(H){return function(G){var se;if(!d(G)||(se=S(G)).type!==H)throw TypeError("Incompatible receiver, "+H+" required");return se}};if(s){var F=f.state||(f.state=new D),O=F.get,j=F.has,J=F.set;w=function(H,G){return G.facade=H,J.call(F,H,G),G},S=function(H){return O.call(F,H)||{}},L=function(H){return j.call(F,H)}}else{var W=b("state");y[W]=!0,w=function(H,G){return G.facade=H,m(H,W,G),G},S=function(H){return p(H,W)?H[W]:{}},L=function(H){return p(H,W)}}t.exports={set:w,get:S,has:L,enforce:x,getterFor:P}},"6eeb":function(t,a,r){var s=r("da84"),i=r("9112"),d=r("5135"),m=r("ce4e"),p=r("8925"),f=r("69f3"),b=f.get,y=f.enforce,D=String(String).split("String");(t.exports=function(w,S,L,x){var P=x?!!x.unsafe:!1,F=x?!!x.enumerable:!1,O=x?!!x.noTargetGet:!1,j;if(typeof L=="function"&&(typeof S=="string"&&!d(L,"name")&&i(L,"name",S),j=y(L),j.source||(j.source=D.join(typeof S=="string"?S:""))),w===s){F?w[S]=L:m(S,L);return}else P?!O&&w[S]&&(F=!0):delete w[S];F?w[S]=L:i(w,S,L)})(Function.prototype,"toString",function(){return typeof this=="function"&&b(this).source||p(this)})},7156:function(t,a,r){var s=r("861d"),i=r("d2bb");t.exports=function(d,m,p){var f,b;return i&&typeof(f=m.constructor)=="function"&&f!==p&&s(b=f.prototype)&&b!==p.prototype&&i(d,b),d}},"72f0":function(t,a){function r(s){return function(){return s}}t.exports=r},7418:function(t,a){a.f=Object.getOwnPropertySymbols},7839:function(t,a){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(t,a,r){var s=r("1d80");t.exports=function(i){return Object(s(i))}},"7c73":function(t,a,r){var s=r("825a"),i=r("37e8"),d=r("7839"),m=r("d012"),p=r("1be4"),f=r("cc12"),b=r("f772"),y=">",D="<",w="prototype",S="script",L=b("IE_PROTO"),x=function(){},P=function(W){return D+S+y+W+D+"/"+S+y},F=function(W){W.write(P("")),W.close();var H=W.parentWindow.Object;return W=null,H},O=function(){var W=f("iframe"),H="java"+S+":",G;return W.style.display="none",p.appendChild(W),W.src=String(H),G=W.contentWindow.document,G.open(),G.write(P("document.F=Object")),G.close(),G.F},j,J=function(){try{j=document.domain&&new ActiveXObject("htmlfile")}catch{}J=j?F(j):O();for(var W=d.length;W--;)delete J[w][d[W]];return J()};m[L]=!0,t.exports=Object.create||function(H,G){var se;return H!==null?(x[w]=s(H),se=new x,x[w]=null,se[L]=H):se=J(),G===void 0?se:i(se,G)}},"7f9a":function(t,a,r){var s=r("da84"),i=r("8925"),d=s.WeakMap;t.exports=typeof d=="function"&&/native code/.test(i(d))},"825a":function(t,a,r){var s=r("861d");t.exports=function(i){if(!s(i))throw TypeError(String(i)+" is not an object");return i}},"83ab":function(t,a,r){var s=r("d039");t.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(t,a,r){var s=r("c04e"),i=r("9bf2"),d=r("5c6c");t.exports=function(m,p,f){var b=s(p);b in m?i.f(m,b,d(0,f)):m[b]=f}},"861d":function(t,a){t.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},8925:function(t,a,r){var s=r("c6cd"),i=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(d){return i.call(d)}),t.exports=s.inspectSource},"8aa5":function(t,a,r){var s=r("6547").charAt;t.exports=function(i,d,m){return d+(m?s(i,d).length:1)}},"8bbf":function(t,a){t.exports=mi},"90e3":function(t,a){var r=0,s=Math.random();t.exports=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++r+s).toString(36)}},9112:function(t,a,r){var s=r("83ab"),i=r("9bf2"),d=r("5c6c");t.exports=s?function(m,p,f){return i.f(m,p,d(1,f))}:function(m,p,f){return m[p]=f,m}},9263:function(t,a,r){var s=r("ad6d"),i=r("9f7f"),d=RegExp.prototype.exec,m=String.prototype.replace,p=d,f=function(){var w=/a/,S=/b*/g;return d.call(w,"a"),d.call(S,"a"),w.lastIndex!==0||S.lastIndex!==0}(),b=i.UNSUPPORTED_Y||i.BROKEN_CARET,y=/()??/.exec("")[1]!==void 0,D=f||y||b;D&&(p=function(S){var L=this,x,P,F,O,j=b&&L.sticky,J=s.call(L),W=L.source,H=0,G=S;return j&&(J=J.replace("y",""),J.indexOf("g")===-1&&(J+="g"),G=String(S).slice(L.lastIndex),L.lastIndex>0&&(!L.multiline||L.multiline&&S[L.lastIndex-1]!==`
`)&&(W="(?: "+W+")",G=" "+G,H++),P=new RegExp("^(?:"+W+")",J)),y&&(P=new RegExp("^"+W+"$(?!\\s)",J)),f&&(x=L.lastIndex),F=d.call(j?P:L,G),j?F?(F.input=F.input.slice(H),F[0]=F[0].slice(H),F.index=L.lastIndex,L.lastIndex+=F[0].length):L.lastIndex=0:f&&F&&(L.lastIndex=L.global?F.index+F[0].length:x),y&&F&&F.length>1&&m.call(F[0],P,function(){for(O=1;O<arguments.length-2;O++)arguments[O]===void 0&&(F[O]=void 0)}),F}),t.exports=p},"94ca":function(t,a,r){var s=r("d039"),i=/#|\.prototype\./,d=function(y,D){var w=p[m(y)];return w==b?!0:w==f?!1:typeof D=="function"?s(D):!!D},m=d.normalize=function(y){return String(y).replace(i,".").toLowerCase()},p=d.data={},f=d.NATIVE="N",b=d.POLYFILL="P";t.exports=d},"99af":function(t,a,r){var s=r("23e7"),i=r("d039"),d=r("e8b5"),m=r("861d"),p=r("7b0b"),f=r("50c4"),b=r("8418"),y=r("65f0"),D=r("1dde"),w=r("b622"),S=r("2d00"),L=w("isConcatSpreadable"),x=9007199254740991,P="Maximum allowed index exceeded",F=S>=51||!i(function(){var W=[];return W[L]=!1,W.concat()[0]!==W}),O=D("concat"),j=function(W){if(!m(W))return!1;var H=W[L];return H!==void 0?!!H:d(W)},J=!F||!O;s({target:"Array",proto:!0,forced:J},{concat:function(H){var G=p(this),se=y(G,0),K=0,te,oe,Z,ie,de;for(te=-1,Z=arguments.length;te<Z;te++)if(de=te===-1?G:arguments[te],j(de)){if(ie=f(de.length),K+ie>x)throw TypeError(P);for(oe=0;oe<ie;oe++,K++)oe in de&&b(se,K,de[oe])}else{if(K>=x)throw TypeError(P);b(se,K++,de)}return se.length=K,se}})},"9bf2":function(t,a,r){var s=r("83ab"),i=r("0cfb"),d=r("825a"),m=r("c04e"),p=Object.defineProperty;a.f=s?p:function(b,y,D){if(d(b),y=m(y,!0),d(D),i)try{return p(b,y,D)}catch{}if("get"in D||"set"in D)throw TypeError("Accessors not supported");return"value"in D&&(b[y]=D.value),b}},"9e69":function(t,a,r){var s=r("2b3e"),i=s.Symbol;t.exports=i},"9f7f":function(t,a,r){var s=r("d039");function i(d,m){return RegExp(d,m)}a.UNSUPPORTED_Y=s(function(){var d=i("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),a.BROKEN_CARET=s(function(){var d=i("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a15b:function(t,a,r){var s=r("23e7"),i=r("44ad"),d=r("fc6a"),m=r("a640"),p=[].join,f=i!=Object,b=m("join",",");s({target:"Array",proto:!0,forced:f||!b},{join:function(D){return p.call(d(this),D===void 0?",":D)}})},a2bf:function(t,a,r){var s=r("e8b5"),i=r("50c4"),d=r("0366"),m=function(p,f,b,y,D,w,S,L){for(var x=D,P=0,F=S?d(S,L,3):!1,O;P<y;){if(P in b){if(O=F?F(b[P],P,f):b[P],w>0&&s(O))x=m(p,f,O,i(O.length),x,w-1)-1;else{if(x>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[x]=O}x++}P++}return x};t.exports=m},a434:function(t,a,r){var s=r("23e7"),i=r("23cb"),d=r("a691"),m=r("50c4"),p=r("7b0b"),f=r("65f0"),b=r("8418"),y=r("1dde"),D=r("ae40"),w=y("splice"),S=D("splice",{ACCESSORS:!0,0:0,1:2}),L=Math.max,x=Math.min,P=9007199254740991,F="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!w||!S},{splice:function(j,J){var W=p(this),H=m(W.length),G=i(j,H),se=arguments.length,K,te,oe,Z,ie,de;if(se===0?K=te=0:se===1?(K=0,te=H-G):(K=se-2,te=x(L(d(J),0),H-G)),H+K-te>P)throw TypeError(F);for(oe=f(W,te),Z=0;Z<te;Z++)ie=G+Z,ie in W&&b(oe,Z,W[ie]);if(oe.length=te,K<te){for(Z=G;Z<H-te;Z++)ie=Z+te,de=Z+K,ie in W?W[de]=W[ie]:delete W[de];for(Z=H;Z>H-te+K;Z--)delete W[Z-1]}else if(K>te)for(Z=H-te;Z>G;Z--)ie=Z+te-1,de=Z+K-1,ie in W?W[de]=W[ie]:delete W[de];for(Z=0;Z<K;Z++)W[Z+G]=arguments[Z+2];return W.length=H-te+K,oe}})},a623:function(t,a,r){var s=r("23e7"),i=r("b727").every,d=r("a640"),m=r("ae40"),p=d("every"),f=m("every");s({target:"Array",proto:!0,forced:!p||!f},{every:function(y){return i(this,y,arguments.length>1?arguments[1]:void 0)}})},a640:function(t,a,r){var s=r("d039");t.exports=function(i,d){var m=[][i];return!!m&&s(function(){m.call(null,d||function(){throw 1},1)})}},a691:function(t,a){var r=Math.ceil,s=Math.floor;t.exports=function(i){return isNaN(i=+i)?0:(i>0?s:r)(i)}},a9e3:function(t,a,r){var s=r("83ab"),i=r("da84"),d=r("94ca"),m=r("6eeb"),p=r("5135"),f=r("c6b6"),b=r("7156"),y=r("c04e"),D=r("d039"),w=r("7c73"),S=r("241c").f,L=r("06cf").f,x=r("9bf2").f,P=r("58a8").trim,F="Number",O=i[F],j=O.prototype,J=f(w(j))==F,W=function(te){var oe=y(te,!1),Z,ie,de,we,re,fe,be,Me;if(typeof oe=="string"&&oe.length>2){if(oe=P(oe),Z=oe.charCodeAt(0),Z===43||Z===45){if(ie=oe.charCodeAt(2),ie===88||ie===120)return NaN}else if(Z===48){switch(oe.charCodeAt(1)){case 66:case 98:de=2,we=49;break;case 79:case 111:de=8,we=55;break;default:return+oe}for(re=oe.slice(2),fe=re.length,be=0;be<fe;be++)if(Me=re.charCodeAt(be),Me<48||Me>we)return NaN;return parseInt(re,de)}}return+oe};if(d(F,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var H=function(oe){var Z=arguments.length<1?0:oe,ie=this;return ie instanceof H&&(J?D(function(){j.valueOf.call(ie)}):f(ie)!=F)?b(new O(W(Z)),ie,H):W(Z)},G=s?S(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),se=0,K;G.length>se;se++)p(O,K=G[se])&&!p(H,K)&&x(H,K,L(O,K));H.prototype=j,j.constructor=H,m(i,F,H)}},ac1f:function(t,a,r){var s=r("23e7"),i=r("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,a,r){var s=r("825a");t.exports=function(){var i=s(this),d="";return i.global&&(d+="g"),i.ignoreCase&&(d+="i"),i.multiline&&(d+="m"),i.dotAll&&(d+="s"),i.unicode&&(d+="u"),i.sticky&&(d+="y"),d}},ae40:function(t,a,r){var s=r("83ab"),i=r("d039"),d=r("5135"),m=Object.defineProperty,p={},f=function(b){throw b};t.exports=function(b,y){if(d(p,b))return p[b];y||(y={});var D=[][b],w=d(y,"ACCESSORS")?y.ACCESSORS:!1,S=d(y,0)?y[0]:f,L=d(y,1)?y[1]:void 0;return p[b]=!!D&&!i(function(){if(w&&!s)return!0;var x={length:-1};w?m(x,1,{enumerable:!0,get:f}):x[1]=1,D.call(x,S,L)})}},b041:function(t,a,r){var s=r("00ee"),i=r("f5df");t.exports=s?{}.toString:function(){return"[object "+i(this)+"]"}},b047:function(t,a,r){var s=r("1a8c"),i=r("408c"),d=r("b4b0"),m="Expected a function",p=Math.max,f=Math.min;function b(y,D,w){var S,L,x,P,F,O,j=0,J=!1,W=!1,H=!0;if(typeof y!="function")throw new TypeError(m);D=d(D)||0,s(w)&&(J=!!w.leading,W="maxWait"in w,x=W?p(d(w.maxWait)||0,D):x,H="trailing"in w?!!w.trailing:H);function G(re){var fe=S,be=L;return S=L=void 0,j=re,P=y.apply(be,fe),P}function se(re){return j=re,F=setTimeout(oe,D),J?G(re):P}function K(re){var fe=re-O,be=re-j,Me=D-fe;return W?f(Me,x-be):Me}function te(re){var fe=re-O,be=re-j;return O===void 0||fe>=D||fe<0||W&&be>=x}function oe(){var re=i();if(te(re))return Z(re);F=setTimeout(oe,K(re))}function Z(re){return F=void 0,H&&S?G(re):(S=L=void 0,P)}function ie(){F!==void 0&&clearTimeout(F),j=0,S=O=L=F=void 0}function de(){return F===void 0?P:Z(i())}function we(){var re=i(),fe=te(re);if(S=arguments,L=this,O=re,fe){if(F===void 0)return se(O);if(W)return clearTimeout(F),F=setTimeout(oe,D),G(O)}return F===void 0&&(F=setTimeout(oe,D)),P}return we.cancel=ie,we.flush=de,we}t.exports=b},b4b0:function(t,a,r){var s=r("1a8c"),i=r("ffd6"),d=0/0,m=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,b=/^0o[0-7]+$/i,y=parseInt;function D(w){if(typeof w=="number")return w;if(i(w))return d;if(s(w)){var S=typeof w.valueOf=="function"?w.valueOf():w;w=s(S)?S+"":S}if(typeof w!="string")return w===0?w:+w;w=w.replace(m,"");var L=f.test(w);return L||b.test(w)?y(w.slice(2),L?2:8):p.test(w)?d:+w}t.exports=D},b622:function(t,a,r){var s=r("da84"),i=r("5692"),d=r("5135"),m=r("90e3"),p=r("4930"),f=r("fdbf"),b=i("wks"),y=s.Symbol,D=f?y:y&&y.withoutSetter||m;t.exports=function(w){return d(b,w)||(p&&d(y,w)?b[w]=y[w]:b[w]=D("Symbol."+w)),b[w]}},b64b:function(t,a,r){var s=r("23e7"),i=r("7b0b"),d=r("df75"),m=r("d039"),p=m(function(){d(1)});s({target:"Object",stat:!0,forced:p},{keys:function(b){return d(i(b))}})},b727:function(t,a,r){var s=r("0366"),i=r("44ad"),d=r("7b0b"),m=r("50c4"),p=r("65f0"),f=[].push,b=function(y){var D=y==1,w=y==2,S=y==3,L=y==4,x=y==6,P=y==7,F=y==5||x;return function(O,j,J,W){for(var H=d(O),G=i(H),se=s(j,J,3),K=m(G.length),te=0,oe=W||p,Z=D?oe(O,K):w||P?oe(O,0):void 0,ie,de;K>te;te++)if((F||te in G)&&(ie=G[te],de=se(ie,te,H),y))if(D)Z[te]=de;else if(de)switch(y){case 3:return!0;case 5:return ie;case 6:return te;case 2:f.call(Z,ie)}else switch(y){case 4:return!1;case 7:f.call(Z,ie)}return x?-1:S||L?L:Z}};t.exports={forEach:b(0),map:b(1),filter:b(2),some:b(3),every:b(4),find:b(5),findIndex:b(6),filterOut:b(7)}},bcdf:function(t,a){function r(){}t.exports=r},c04e:function(t,a,r){var s=r("861d");t.exports=function(i,d){if(!s(i))return i;var m,p;if(d&&typeof(m=i.toString)=="function"&&!s(p=m.call(i))||typeof(m=i.valueOf)=="function"&&!s(p=m.call(i))||!d&&typeof(m=i.toString)=="function"&&!s(p=m.call(i)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(t,a){t.exports=!1},c6b6:function(t,a){var r={}.toString;t.exports=function(s){return r.call(s).slice(8,-1)}},c6cd:function(t,a,r){var s=r("da84"),i=r("ce4e"),d="__core-js_shared__",m=s[d]||i(d,{});t.exports=m},c8ba:function(t,a){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}t.exports=r},c8d2:function(t,a,r){var s=r("d039"),i=r("5899"),d="​᠎";t.exports=function(m){return s(function(){return!!i[m]()||d[m]()!=d||i[m].name!==m})}},c975:function(t,a,r){var s=r("23e7"),i=r("4d64").indexOf,d=r("a640"),m=r("ae40"),p=[].indexOf,f=!!p&&1/[1].indexOf(1,-0)<0,b=d("indexOf"),y=m("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:f||!b||!y},{indexOf:function(w){return f?p.apply(this,arguments)||0:i(this,w,arguments.length>1?arguments[1]:void 0)}})},ca84:function(t,a,r){var s=r("5135"),i=r("fc6a"),d=r("4d64").indexOf,m=r("d012");t.exports=function(p,f){var b=i(p),y=0,D=[],w;for(w in b)!s(m,w)&&s(b,w)&&D.push(w);for(;f.length>y;)s(b,w=f[y++])&&(~d(D,w)||D.push(w));return D}},cc12:function(t,a,r){var s=r("da84"),i=r("861d"),d=s.document,m=i(d)&&i(d.createElement);t.exports=function(p){return m?d.createElement(p):{}}},cd9d:function(t,a){function r(s){return s}t.exports=r},ce4e:function(t,a,r){var s=r("da84"),i=r("9112");t.exports=function(d,m){try{i(s,d,m)}catch{s[d]=m}return m}},d012:function(t,a){t.exports={}},d039:function(t,a){t.exports=function(r){try{return!!r()}catch{return!0}}},d066:function(t,a,r){var s=r("428f"),i=r("da84"),d=function(m){return typeof m=="function"?m:void 0};t.exports=function(m,p){return arguments.length<2?d(s[m])||d(i[m]):s[m]&&s[m][p]||i[m]&&i[m][p]}},d15f:function(t,a,r){},d1e7:function(t,a,r){var s={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,d=i&&!s.call({1:2},1);a.f=d?function(p){var f=i(this,p);return!!f&&f.enumerable}:s},d2bb:function(t,a,r){var s=r("825a"),i=r("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,m={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(m,[]),d=m instanceof Array}catch{}return function(b,y){return s(b),i(y),d?p.call(b,y):b.__proto__=y,b}}():void 0)},d3b7:function(t,a,r){var s=r("00ee"),i=r("6eeb"),d=r("b041");s||i(Object.prototype,"toString",d,{unsafe:!0})},d58f:function(t,a,r){var s=r("1c0b"),i=r("7b0b"),d=r("44ad"),m=r("50c4"),p=function(f){return function(b,y,D,w){s(y);var S=i(b),L=d(S),x=m(S.length),P=f?x-1:0,F=f?-1:1;if(D<2)for(;;){if(P in L){w=L[P],P+=F;break}if(P+=F,f?P<0:x<=P)throw TypeError("Reduce of empty array with no initial value")}for(;f?P>=0:x>P;P+=F)P in L&&(w=y(w,L[P],P,S));return w}};t.exports={left:p(!1),right:p(!0)}},d784:function(t,a,r){r("ac1f");var s=r("6eeb"),i=r("d039"),d=r("b622"),m=r("9263"),p=r("9112"),f=d("species"),b=!i(function(){var L=/./;return L.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(L,"$<a>")!=="7"}),y=function(){return"a".replace(/./,"$0")==="$0"}(),D=d("replace"),w=function(){return/./[D]?/./[D]("a","$0")==="":!1}(),S=!i(function(){var L=/(?:)/,x=L.exec;L.exec=function(){return x.apply(this,arguments)};var P="ab".split(L);return P.length!==2||P[0]!=="a"||P[1]!=="b"});t.exports=function(L,x,P,F){var O=d(L),j=!i(function(){var K={};return K[O]=function(){return 7},""[L](K)!=7}),J=j&&!i(function(){var K=!1,te=/a/;return L==="split"&&(te={},te.constructor={},te.constructor[f]=function(){return te},te.flags="",te[O]=/./[O]),te.exec=function(){return K=!0,null},te[O](""),!K});if(!j||!J||L==="replace"&&!(b&&y&&!w)||L==="split"&&!S){var W=/./[O],H=P(O,""[L],function(K,te,oe,Z,ie){return te.exec===m?j&&!ie?{done:!0,value:W.call(te,oe,Z)}:{done:!0,value:K.call(oe,te,Z)}:{done:!1}},{REPLACE_KEEPS_$0:y,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:w}),G=H[0],se=H[1];s(String.prototype,L,G),s(RegExp.prototype,O,x==2?function(K,te){return se.call(K,this,te)}:function(K){return se.call(K,this)})}F&&p(RegExp.prototype[O],"sham",!0)}},d81d:function(t,a,r){var s=r("23e7"),i=r("b727").map,d=r("1dde"),m=r("ae40"),p=d("map"),f=m("map");s({target:"Array",proto:!0,forced:!p||!f},{map:function(y){return i(this,y,arguments.length>1?arguments[1]:void 0)}})},da84:function(t,a,r){(function(s){var i=function(d){return d&&d.Math==Math&&d};t.exports=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r("c8ba"))},df75:function(t,a,r){var s=r("ca84"),i=r("7839");t.exports=Object.keys||function(m){return s(m,i)}},e0ef:function(t,a,r){var s=r("4b17"),i="Expected a function";function d(m,p){var f;if(typeof p!="function")throw new TypeError(i);return m=s(m),function(){return--m>0&&(f=p.apply(this,arguments)),m<=1&&(p=void 0),f}}t.exports=d},e163:function(t,a,r){var s=r("5135"),i=r("7b0b"),d=r("f772"),m=r("e177"),p=d("IE_PROTO"),f=Object.prototype;t.exports=m?Object.getPrototypeOf:function(b){return b=i(b),s(b,p)?b[p]:typeof b.constructor=="function"&&b instanceof b.constructor?b.constructor.prototype:b instanceof Object?f:null}},e177:function(t,a,r){var s=r("d039");t.exports=!s(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})},e893:function(t,a,r){var s=r("5135"),i=r("56ef"),d=r("06cf"),m=r("9bf2");t.exports=function(p,f){for(var b=i(f),y=m.f,D=d.f,w=0;w<b.length;w++){var S=b[w];s(p,S)||y(p,S,D(f,S))}}},e8b5:function(t,a,r){var s=r("c6b6");t.exports=Array.isArray||function(d){return s(d)=="Array"}},f5df:function(t,a,r){var s=r("00ee"),i=r("c6b6"),d=r("b622"),m=d("toStringTag"),p=i(function(){return arguments}())=="Arguments",f=function(b,y){try{return b[y]}catch{}};t.exports=s?i:function(b){var y,D,w;return b===void 0?"Undefined":b===null?"Null":typeof(D=f(y=Object(b),m))=="string"?D:p?i(y):(w=i(y))=="Object"&&typeof y.callee=="function"?"Arguments":w}},f772:function(t,a,r){var s=r("5692"),i=r("90e3"),d=s("keys");t.exports=function(m){return d[m]||(d[m]=i(m))}},fb15:function(t,a,r){if(r.r(a),r.d(a,"Treeselect",function(){return Rs}),r.d(a,"treeselectMixin",function(){return ws}),r.d(a,"LOAD_ROOT_OPTIONS",function(){return hs}),r.d(a,"LOAD_CHILDREN_OPTIONS",function(){return ms}),r.d(a,"ASYNC_SEARCH",function(){return ps}),typeof window<"u"){var s=window.document.currentScript,i=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(r.p=i[1])}var d=r("8bbf");function m(C,h,v,A,V,z){var Y=Object(d.resolveComponent)("HiddenFields"),le=Object(d.resolveComponent)("Control"),me=Object(d.resolveComponent)("MenuPortal"),Ce=Object(d.resolveComponent)("Menu");return Object(d.openBlock)(),Object(d.createBlock)("div",{ref:"wrapper",class:C.wrapperClass},[Object(d.createVNode)(Y),Object(d.createVNode)(le,{ref:"control"},null,512),C.appendToBody?(Object(d.openBlock)(),Object(d.createBlock)(me,{key:0,ref:"portal"},null,512)):(Object(d.openBlock)(),Object(d.createBlock)(Ce,{key:1,ref:"menu"},null,512))],2)}r("99af"),r("a623"),r("4de4"),r("0481"),r("4160"),r("c975"),r("d81d"),r("13d5"),r("fb6a"),r("45fc"),r("4e82"),r("4069"),r("a9e3"),r("ac1f"),r("5319"),r("1276"),r("498a"),r("159b");function p(C){if(Array.isArray(C))return C}function f(C,h){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(C)))){var v=[],A=!0,V=!1,z=void 0;try{for(var Y=C[Symbol.iterator](),le;!(A=(le=Y.next()).done)&&(v.push(le.value),!(h&&v.length===h));A=!0);}catch(me){V=!0,z=me}finally{try{!A&&Y.return!=null&&Y.return()}finally{if(V)throw z}}return v}}function b(C,h){(h==null||h>C.length)&&(h=C.length);for(var v=0,A=new Array(h);v<h;v++)A[v]=C[v];return A}function y(C,h){if(C){if(typeof C=="string")return b(C,h);var v=Object.prototype.toString.call(C).slice(8,-1);if(v==="Object"&&C.constructor&&(v=C.constructor.name),v==="Map"||v==="Set")return Array.from(C);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return b(C,h)}}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(C,h){return p(C)||f(C,h)||y(C,h)||D()}function S(C,h,v){return h in C?Object.defineProperty(C,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):C[h]=v,C}function L(C){if(Array.isArray(C))return b(C)}function x(C){if(typeof Symbol<"u"&&Symbol.iterator in Object(C))return Array.from(C)}function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(C){return L(C)||x(C)||y(C)||P()}function O(C,h){var v=Object.keys(C);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(C);h&&(A=A.filter(function(V){return Object.getOwnPropertyDescriptor(C,V).enumerable})),v.push.apply(v,A)}return v}function j(C){for(var h=1;h<arguments.length;h++){var v=arguments[h]!=null?arguments[h]:{};h%2?O(Object(v),!0).forEach(function(A){S(C,A,v[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(v)):O(Object(v)).forEach(function(A){Object.defineProperty(C,A,Object.getOwnPropertyDescriptor(v,A))})}return C}var J=r("2e39"),W=r.n(J);function H(C){return C!==C}function G(C,h){return C.indexOf(h)!==-1}var se=r("72f0"),K=r.n(se),te=r("cd9d"),oe=r.n(te),Z=function(){return Object.create(null)};function ie(C,h){if(C.length!==h.length)return!0;for(var v=0;v<C.length;v++)if(C[v]!==h[v])return!0;return!1}var de=r("bcdf"),we=r.n(de),re=we.a;function fe(C,h,v){for(var A=0,V=C.length;A<V;A++)if(h.call(v,C[A],A,C))return C[A]}function be(C){return function(v){if(v.type==="mousedown"&&v.button===0){for(var A=arguments.length,V=new Array(A>1?A-1:0),z=1;z<A;z++)V[z-1]=arguments[z];C.call.apply(C,[this,v].concat(V))}}}function Me(C,h){var v=C.getBoundingClientRect(),A=h.getBoundingClientRect(),V=h.offsetHeight/3;A.bottom+V>v.bottom?C.scrollTop=Math.min(h.offsetTop+h.clientHeight-C.offsetHeight+V,C.scrollHeight):A.top-V<v.top&&(C.scrollTop=Math.max(h.offsetTop-V,0))}var xe=r("4416"),Je=r.n(xe),ot=r("1d92"),rt=r.n(ot),vt=r("2655"),lt=r.n(vt);r("a434");function ds(C,h){var v=C.indexOf(h);v!==-1&&C.splice(v,1)}var We=null,Rt=0,cs=1,us=2,Ze="ALL_CHILDREN",dt="ALL_DESCENDANTS",ct="LEAF_CHILDREN",ut="LEAF_DESCENDANTS",hs="LOAD_ROOT_OPTIONS",ms="LOAD_CHILDREN_OPTIONS",ps="ASYNC_SEARCH",Ft="ALL",yt="BRANCH_PRIORITY",Nt="LEAF_PRIORITY",Vt="ALL_WITH_INDETERMINATE",gs="ORDER_SELECTED",fs="LEVEL",_s="INDEX",De={BACKSPACE:8,ENTER:13,ESCAPE:27,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46},Pa=200,bs=5,vs=40;function ys(C,h){var v=0;do{if(C.level<v)return-1;if(h.level<v)return 1;if(C.index[v]!==h.index[v])return C.index[v]-h.index[v];v++}while(!0)}function Ra(C,h){return C.level===h.level?ys(C,h):C.level-h.level}function jt(){return{isLoaded:!1,isLoading:!1,loadingError:""}}function Fa(C){return typeof C=="string"?C:typeof C=="number"&&!H(C)?C+"":""}function ks(C,h,v){return C?W()(h,v):G(v,h)}function Ut(C){return C.message||String(C)}var Na=0,ws={provide:function(){return{instance:this}},props:{allowClearingDisabled:{type:Boolean,default:!1},allowSelectingDisabledDescendants:{type:Boolean,default:!1},alwaysOpen:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!1},async:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},autoLoadRootOptions:{type:Boolean,default:!0},autoDeselectAncestors:{type:Boolean,default:!1},autoDeselectDescendants:{type:Boolean,default:!1},autoSelectAncestors:{type:Boolean,default:!1},autoSelectDescendants:{type:Boolean,default:!1},backspaceRemoves:{type:Boolean,default:!0},beforeClearAll:{type:Function,default:K()(!0)},branchNodesFirst:{type:Boolean,default:!1},cacheOptions:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},clearAllText:{type:String,default:"Clear all"},clearOnSelect:{type:Boolean,default:!1},clearValueText:{type:String,default:"Clear value"},closeOnSelect:{type:Boolean,default:!0},defaultExpandLevel:{type:Number,default:0},defaultOptions:{default:!1},deleteRemoves:{type:Boolean,default:!0},delimiter:{type:String,default:","},flattenSearchResults:{type:Boolean,default:!1},disableBranchNodes:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disableFuzzyMatching:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},instanceId:{default:function(){return"".concat(Na++,"$$")},type:[String,Number]},joinValues:{type:Boolean,default:!1},limit:{type:Number,default:1/0},limitText:{type:Function,default:function(h){return"and ".concat(h," more")}},loadingText:{type:String,default:"Loading..."},loadOptions:{type:Function},matchKeys:{type:Array,default:K()(["label"])},maxHeight:{type:Number,default:300},multiple:{type:Boolean,default:!1},name:{type:String},noChildrenText:{type:String,default:"No sub-options."},noOptionsText:{type:String,default:"No options available."},noResultsText:{type:String,default:"No results found..."},normalizer:{type:Function,default:oe.a},openDirection:{type:String,default:"auto",validator:function(h){var v=["auto","top","bottom","above","below"];return G(v,h)}},openOnClick:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!1},options:{type:Array},placeholder:{type:String,default:"Select..."},required:{type:Boolean,default:!1},retryText:{type:String,default:"Retry?"},retryTitle:{type:String,default:"Click to retry"},searchable:{type:Boolean,default:!0},searchNested:{type:Boolean,default:!1},searchPromptText:{type:String,default:"Type to search..."},showCount:{type:Boolean,default:!1},showCountOf:{type:String,default:Ze,validator:function(h){var v=[Ze,dt,ct,ut];return G(v,h)}},showCountOnSearch:null,sortValueBy:{type:String,default:gs,validator:function(h){var v=[gs,fs,_s];return G(v,h)}},tabIndex:{type:Number,default:0},modelValue:null,valueConsistsOf:{type:String,default:yt,validator:function(h){var v=[Ft,yt,Nt,Vt];return G(v,h)}},valueFormat:{type:String,default:"id"},zIndex:{type:[Number,String],default:999}},data:function(){return{trigger:{isFocused:!1,searchQuery:""},menu:{isOpen:!1,current:null,lastScrollPosition:0,placement:"bottom"},forest:{normalizedOptions:[],nodeMap:Z(),checkedStateMap:Z(),selectedNodeIds:this.extractCheckedNodeIdsFromValue(),selectedNodeMap:Z()},rootOptionsStates:jt(),localSearch:{active:!1,noResults:!0,countMap:Z()},remoteSearch:Z()}},computed:{selectedNodes:function(){return this.forest.selectedNodeIds.map(this.getNode)},internalValue:function(){var h=this,v;if(this.single||this.flat||this.disableBranchNodes||this.valueConsistsOf===Ft)v=this.forest.selectedNodeIds.slice();else if(this.valueConsistsOf===yt)v=this.forest.selectedNodeIds.filter(function(z){var Y=h.getNode(z);return Y.isRootNode?!0:!h.isSelected(Y.parentNode)});else if(this.valueConsistsOf===Nt)v=this.forest.selectedNodeIds.filter(function(z){var Y=h.getNode(z);return Y.isLeaf?!0:Y.children.length===0});else if(this.valueConsistsOf===Vt){var A,V=[];v=this.forest.selectedNodeIds.slice(),this.selectedNodes.forEach(function(z){z.ancestors.forEach(function(Y){G(V,Y.id)||G(v,Y.id)||V.push(Y.id)})}),(A=v).push.apply(A,V)}return this.sortValueBy===fs?v.sort(function(z,Y){return Ra(h.getNode(z),h.getNode(Y))}):this.sortValueBy===_s&&v.sort(function(z,Y){return ys(h.getNode(z),h.getNode(Y))}),v},hasValue:function(){return this.internalValue.length>0},single:function(){return!this.multiple},visibleOptionIds:function(){var h=this,v=[];return this.traverseAllNodesByIndex(function(A){if((!h.localSearch.active||h.shouldOptionBeIncludedInSearchResult(A))&&v.push(A.id),A.isBranch&&!h.shouldExpand(A))return!1}),v},hasVisibleOptions:function(){return this.visibleOptionIds.length!==0},showCountOnSearchComputed:function(){return typeof this.showCountOnSearch=="boolean"?this.showCountOnSearch:this.showCount},hasBranchNodes:function(){return this.forest.normalizedOptions.some(function(h){return h.isBranch})},shouldFlattenOptions:function(){return this.localSearch.active&&this.flattenSearchResults}},watch:{alwaysOpen:function(h){h?this.openMenu():this.closeMenu()},branchNodesFirst:function(){this.initialize()},disabled:function(h){h&&this.menu.isOpen?this.closeMenu():!h&&!this.menu.isOpen&&this.alwaysOpen&&this.openMenu()},flat:function(){this.initialize()},internalValue:function(h,v){var A=ie(h,v);A&&this.$emit("update:modelValue",this.getValue(),this.getInstanceId())},matchKeys:function(){this.initialize()},multiple:function(h){h&&this.buildForestState()},options:{handler:function(){this.async||(this.initialize(),this.rootOptionsStates.isLoaded=Array.isArray(this.options))},deep:!0,immediate:!0},"trigger.searchQuery":function(){this.async?this.handleRemoteSearch():this.handleLocalSearch(),this.$emit("search-change",this.trigger.searchQuery,this.getInstanceId())},value:function(){var h=this.extractCheckedNodeIdsFromValue(),v=ie(h,this.internalValue);v&&this.fixSelectedNodeIds(h)}},methods:{verifyProps:function(){var h=this;if(re(function(){return h.async?h.searchable:!0},function(){return'For async search mode, the value of "searchable" prop must be true.'}),this.options==null&&!this.loadOptions&&re(function(){return!1},function(){return'Are you meant to dynamically load options? You need to use "loadOptions" prop.'}),this.flat&&re(function(){return h.multiple},function(){return'You are using flat mode. But you forgot to add "multiple=true"?'}),!this.flat){var v=["autoSelectAncestors","autoSelectDescendants","autoDeselectAncestors","autoDeselectDescendants"];v.forEach(function(A){re(function(){return!h[A]},function(){return'"'.concat(A,'" only applies to flat mode.')})})}},resetFlags:function(){this._blurOnSelect=!1},initialize:function(){var h=this.async?this.getRemoteSearchEntry().options:this.options;if(Array.isArray(h)){var v=this.forest.nodeMap;this.forest.nodeMap=Z(),this.keepDataOfSelectedNodes(v),this.forest.normalizedOptions=this.normalize(We,h,v),this.fixSelectedNodeIds(this.internalValue)}else this.forest.normalizedOptions=[]},getInstanceId:function(){return this.instanceId==null?this.id:this.instanceId},getValue:function(){var h=this;if(this.valueFormat==="id")return this.multiple?this.internalValue.slice():this.internalValue[0];var v=this.internalValue.map(function(A){return h.getNode(A).raw});return this.multiple?v:v[0]},getNode:function(h){return re(function(){return h!=null},function(){return"Invalid node id: ".concat(h)}),h==null?null:h in this.forest.nodeMap?this.forest.nodeMap[h]:this.createFallbackNode(h)},createFallbackNode:function(h){var v=this.extractNodeFromValue(h),A=this.enhancedNormalizer(v).label||"".concat(h," (unknown)"),V={id:h,label:A,ancestors:[],parentNode:We,isFallbackNode:!0,isRootNode:!0,isLeaf:!0,isBranch:!1,isDisabled:!1,isNew:!1,index:[-1],level:0,raw:v};return this.forest.nodeMap[h]=V},extractCheckedNodeIdsFromValue:function(){var h=this;return this.modelValue==null?[]:this.valueFormat==="id"?this.multiple?this.modelValue.slice():[this.modelValue]:(this.multiple?this.modelValue:[this.modelValue]).map(function(v){return h.enhancedNormalizer(v)}).map(function(v){return v.id})},extractNodeFromValue:function(h){var v=this,A={id:h};if(this.valueFormat==="id")return A;var V=this.multiple?Array.isArray(this.modelValue)?this.modelValue:[]:this.modelValue?[this.modelValue]:[],z=fe(V,function(Y){return Y&&v.enhancedNormalizer(Y).id===h});return z||A},fixSelectedNodeIds:function(h){var v=this,A=[];if(this.single||this.flat||this.disableBranchNodes||this.valueConsistsOf===Ft)A=h;else if(this.valueConsistsOf===yt)h.forEach(function(Re){A.push(Re);var qe=v.getNode(Re);qe.isBranch&&v.traverseDescendantsBFS(qe,function($e){A.push($e.id)})});else if(this.valueConsistsOf===Nt)for(var V=Z(),z=h.slice();z.length;){var Y=z.shift(),le=this.getNode(Y);A.push(Y),!le.isRootNode&&(le.parentNode.id in V||(V[le.parentNode.id]=le.parentNode.children.length),--V[le.parentNode.id]===0&&z.push(le.parentNode.id))}else if(this.valueConsistsOf===Vt)for(var me=Z(),Ce=h.filter(function(Re){var qe=v.getNode(Re);return qe.isLeaf||qe.children.length===0});Ce.length;){var Ie=Ce.shift(),he=this.getNode(Ie);A.push(Ie),!he.isRootNode&&(he.parentNode.id in me||(me[he.parentNode.id]=he.parentNode.children.length),--me[he.parentNode.id]===0&&Ce.push(he.parentNode.id))}var Ae=ie(this.forest.selectedNodeIds,A);Ae&&(this.forest.selectedNodeIds=A),this.buildForestState()},keepDataOfSelectedNodes:function(h){var v=this;this.forest.selectedNodeIds.forEach(function(A){if(h[A]){var V=j(j({},h[A]),{},{isFallbackNode:!0});v.forest.nodeMap[A]=V}})},isSelected:function(h){return this.forest.selectedNodeMap[h.id]===!0},traverseDescendantsBFS:function(h,v){if(h.isBranch)for(var A=h.children.slice();A.length;){var V=A[0];V.isBranch&&A.push.apply(A,F(V.children)),v(V),A.shift()}},traverseDescendantsDFS:function(h,v){var A=this;h.isBranch&&h.children.forEach(function(V){A.traverseDescendantsDFS(V,v),v(V)})},traverseAllNodesDFS:function(h){var v=this;this.forest.normalizedOptions.forEach(function(A){v.traverseDescendantsDFS(A,h),h(A)})},traverseAllNodesByIndex:function(h){var v=function A(V){V.children.forEach(function(z){h(z)!==!1&&z.isBranch&&A(z)})};v({children:this.forest.normalizedOptions})},toggleClickOutsideEvent:function(h){h?document.addEventListener("mousedown",this.handleClickOutside,!1):document.removeEventListener("mousedown",this.handleClickOutside,!1)},getValueContainer:function(){return this.$refs.control.$refs["value-container"]},getInput:function(){return this.getValueContainer().$refs.input},focusInput:function(){this.getInput().focus()},blurInput:function(){this.getInput().blur()},handleMouseDown:be(function(h){if(h.preventDefault(),h.stopPropagation(),!this.disabled){var v=this.getValueContainer().$el.contains(h.target);v&&!this.menu.isOpen&&(this.openOnClick||this.trigger.isFocused)&&this.openMenu(),this._blurOnSelect?this.blurInput():this.focusInput(),this.resetFlags()}}),handleClickOutside:function(h){this.$refs.wrapper&&!this.$refs.wrapper.contains(h.target)&&(this.blurInput(),this.closeMenu())},handleLocalSearch:function(){var h=this,v=this.trigger.searchQuery,A=function(){return h.resetHighlightedOptionWhenNecessary(!0)};if(!v)return this.localSearch.active=!1,A();this.localSearch.active=!0,this.localSearch.noResults=!0,this.traverseAllNodesDFS(function(Y){if(Y.isBranch){var le;Y.isExpandedOnSearch=!1,Y.showAllChildrenOnSearch=!1,Y.isMatched=!1,Y.hasMatchedDescendants=!1,h.localSearch.countMap[Y.id]=(le={},S(le,Ze,0),S(le,dt,0),S(le,ct,0),S(le,ut,0),le)}});var V=v.trim().toLocaleLowerCase(),z=V.replace(/\s+/g," ").split(" ");this.traverseAllNodesDFS(function(Y){h.searchNested&&z.length>1?Y.isMatched=z.every(function(le){return ks(!1,le,Y.nestedSearchLabel)}):Y.isMatched=h.matchKeys.some(function(le){return ks(!h.disableFuzzyMatching,V,Y.lowerCased[le])}),Y.isMatched&&(h.localSearch.noResults=!1,Y.ancestors.forEach(function(le){return h.localSearch.countMap[le.id][dt]++}),Y.isLeaf&&Y.ancestors.forEach(function(le){return h.localSearch.countMap[le.id][ut]++}),Y.parentNode!==We&&(h.localSearch.countMap[Y.parentNode.id][Ze]+=1,Y.isLeaf&&(h.localSearch.countMap[Y.parentNode.id][ct]+=1))),(Y.isMatched||Y.isBranch&&Y.isExpandedOnSearch)&&Y.parentNode!==We&&(Y.parentNode.isExpandedOnSearch=!0,Y.parentNode.hasMatchedDescendants=!0)}),A()},handleRemoteSearch:function(){var h=this,v=this.trigger.searchQuery,A=this.getRemoteSearchEntry(),V=function(){h.initialize(),h.resetHighlightedOptionWhenNecessary(!0)};if((v===""||this.cacheOptions)&&A.isLoaded)return V();this.callLoadOptionsProp({action:ps,args:{searchQuery:v},isPending:function(){return A.isLoading},start:function(){A.isLoading=!0,A.isLoaded=!1,A.loadingError=""},succeed:function(Y){A.isLoaded=!0,A.options=Y,h.trigger.searchQuery===v&&V()},fail:function(Y){A.loadingError=Ut(Y)},end:function(){A.isLoading=!1}})},getRemoteSearchEntry:function(){var h=this,v=this.trigger.searchQuery,A=this.remoteSearch[v]||j(j({},jt()),{},{options:[]});if(this.$watch(function(){return A.options},function(){h.trigger.searchQuery===v&&h.initialize()},{deep:!0}),v===""){if(Array.isArray(this.defaultOptions))return A.options=this.defaultOptions,A.isLoaded=!0,A;if(this.defaultOptions!==!0)return A.isLoaded=!0,A}return this.remoteSearch[v]||(this.remoteSearch[v]=A),A},shouldExpand:function(h){return this.localSearch.active?h.isExpandedOnSearch:h.isExpanded},shouldOptionBeIncludedInSearchResult:function(h){return!!(h.isMatched||h.isBranch&&h.hasMatchedDescendants&&!this.flattenSearchResults||!h.isRootNode&&h.parentNode.showAllChildrenOnSearch)},shouldShowOptionInMenu:function(h){return!(this.localSearch.active&&!this.shouldOptionBeIncludedInSearchResult(h))},getControl:function(){return this.$refs.control.$el},getMenu:function(){var h=this.appendToBody?this.$refs.portal.portalTarget:this,v=h.$refs.menu.$refs.menu;return v&&v.nodeName!=="#comment"?v:null},setCurrentHighlightedOption:function(h){var v=this,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,V=this.menu.current;if(V!=null&&V in this.forest.nodeMap&&(this.forest.nodeMap[V].isHighlighted=!1),this.menu.current=h.id,h.isHighlighted=!0,this.menu.isOpen&&A){var z=function(){var le=v.getMenu(),me=le.querySelector('.vue-treeselect__option[data-id="'.concat(h.id,'"]'));me&&Me(le,me)};this.getMenu()?z():this.$nextTick(z)}},resetHighlightedOptionWhenNecessary:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,v=this.menu.current;(h||v==null||!(v in this.forest.nodeMap)||!this.shouldShowOptionInMenu(this.getNode(v)))&&this.highlightFirstOption()},highlightFirstOption:function(){if(this.hasVisibleOptions){var h=this.visibleOptionIds[0];this.setCurrentHighlightedOption(this.getNode(h))}},highlightPrevOption:function(){if(this.hasVisibleOptions){var h=this.visibleOptionIds.indexOf(this.menu.current)-1;if(h===-1)return this.highlightLastOption();this.setCurrentHighlightedOption(this.getNode(this.visibleOptionIds[h]))}},highlightNextOption:function(){if(this.hasVisibleOptions){var h=this.visibleOptionIds.indexOf(this.menu.current)+1;if(h===this.visibleOptionIds.length)return this.highlightFirstOption();this.setCurrentHighlightedOption(this.getNode(this.visibleOptionIds[h]))}},highlightLastOption:function(){if(this.hasVisibleOptions){var h=Je()(this.visibleOptionIds);this.setCurrentHighlightedOption(this.getNode(h))}},resetSearchQuery:function(){this.trigger.searchQuery=""},closeMenu:function(){!this.menu.isOpen||!this.disabled&&this.alwaysOpen||(this.saveMenuScrollPosition(),this.menu.isOpen=!1,this.toggleClickOutsideEvent(!1),this.resetSearchQuery(),this.$emit("close",this.getValue(),this.getInstanceId()))},openMenu:function(){this.disabled||this.menu.isOpen||(this.menu.isOpen=!0,this.$nextTick(this.resetHighlightedOptionWhenNecessary),this.$nextTick(this.restoreMenuScrollPosition),!this.options&&!this.async&&this.loadRootOptions(),this.toggleClickOutsideEvent(!0),this.$emit("open",this.getInstanceId()))},toggleMenu:function(){this.menu.isOpen?this.closeMenu():this.openMenu()},toggleExpanded:function(h){var v;this.localSearch.active?(v=h.isExpandedOnSearch=!h.isExpandedOnSearch,v&&(h.showAllChildrenOnSearch=!0)):v=h.isExpanded=!h.isExpanded,v&&!h.childrenStates.isLoaded&&this.loadChildrenOptions(h)},buildForestState:function(){var h=this,v=Z();this.forest.selectedNodeIds.forEach(function(V){v[V]=!0}),this.forest.selectedNodeMap=v;var A=Z();this.multiple&&(this.traverseAllNodesByIndex(function(V){A[V.id]=Rt}),this.selectedNodes.forEach(function(V){A[V.id]=us,!h.flat&&!h.disableBranchNodes&&V.ancestors.forEach(function(z){h.isSelected(z)||(A[z.id]=cs)})})),this.forest.checkedStateMap=A},enhancedNormalizer:function(h){return j(j({},h),this.normalizer(h,this.getInstanceId()))},normalize:function(h,v,A){var V=this,z=v.map(function(me){return[V.enhancedNormalizer(me),me]}).map(function(me,Ce){var Ie=w(me,2),he=Ie[0],Ae=Ie[1];V.checkDuplication(he),V.verifyNodeShape(he);var Re=he.id,qe=he.label,$e=he.children,Yt=he.isDefaultExpanded,Ke=h===We,Fs=Ke?0:h.level+1,Gt=Array.isArray($e)||$e===null,Qt=!Gt,Ns=!!he.isDisabled||!V.flat&&!Ke&&h.isDisabled,An=!!he.isNew,Xt=V.matchKeys.reduce(function(Ye,Vs){return j(j({},Ye),{},S({},Vs,Fa(he[Vs]).toLocaleLowerCase()))},{}),Ln=Ke?Xt.label:h.nestedSearchLabel+" "+Xt.label;V.forest.nodeMap[Re]=Z();var ce=V.forest.nodeMap[Re];if(ce.id=Re,ce.label=qe,ce.level=Fs,ce.ancestors=Ke?[]:[h].concat(h.ancestors),ce.index=(Ke?[]:h.index).concat(Ce),ce.parentNode=h,ce.lowerCased=Xt,ce.nestedSearchLabel=Ln,ce.isDisabled=Ns,ce.isNew=An,ce.isMatched=!1,ce.isHighlighted=!1,ce.isBranch=Gt,ce.isLeaf=Qt,ce.isRootNode=Ke,ce.raw=Ae,Gt){var et,St=Array.isArray($e);ce.childrenStates=j(j({},jt()),{},{isLoaded:St}),ce.isExpanded=typeof Yt=="boolean"?Yt:Fs<V.defaultExpandLevel,ce.hasMatchedDescendants=!1,ce.hasDisabledDescendants=!1,ce.isExpandedOnSearch=!1,ce.showAllChildrenOnSearch=!1,ce.count=(et={},S(et,Ze,0),S(et,dt,0),S(et,ct,0),S(et,ut,0),et),ce.children=St?V.normalize(ce,$e,A):[],Yt===!0&&ce.ancestors.forEach(function(Ye){Ye.isExpanded=!0}),!St&&typeof V.loadOptions!="function"?re(function(){return!1},function(){return'Unloaded branch node detected. "loadOptions" prop is required to load its children.'}):!St&&ce.isExpanded&&V.loadChildrenOptions(ce)}if(ce.ancestors.forEach(function(Ye){return Ye.count[dt]++}),Qt&&ce.ancestors.forEach(function(Ye){return Ye.count[ut]++}),Ke||(h.count[Ze]+=1,Qt&&(h.count[ct]+=1),Ns&&(h.hasDisabledDescendants=!0)),A&&A[Re]){var Be=A[Re];ce.isMatched=Be.isMatched,ce.showAllChildrenOnSearch=Be.showAllChildrenOnSearch,ce.isHighlighted=Be.isHighlighted,Be.isBranch&&ce.isBranch&&(ce.isExpanded=Be.isExpanded,ce.isExpandedOnSearch=Be.isExpandedOnSearch,Be.childrenStates.isLoaded&&!ce.childrenStates.isLoaded?ce.isExpanded=!1:ce.childrenStates=j({},Be.childrenStates))}return ce});if(this.branchNodesFirst){var Y=z.filter(function(me){return me.isBranch}),le=z.filter(function(me){return me.isLeaf});z=Y.concat(le)}return z},loadRootOptions:function(){var h=this;this.callLoadOptionsProp({action:hs,isPending:function(){return h.rootOptionsStates.isLoading},start:function(){h.rootOptionsStates.isLoading=!0,h.rootOptionsStates.loadingError=""},succeed:function(){h.rootOptionsStates.isLoaded=!0,h.$nextTick(function(){h.resetHighlightedOptionWhenNecessary(!0)})},fail:function(A){h.rootOptionsStates.loadingError=Ut(A)},end:function(){h.rootOptionsStates.isLoading=!1}})},loadChildrenOptions:function(h){var v=this,A=h.id,V=h.raw;this.callLoadOptionsProp({action:ms,args:{parentNode:V},isPending:function(){return v.getNode(A).childrenStates.isLoading},start:function(){v.getNode(A).childrenStates.isLoading=!0,v.getNode(A).childrenStates.loadingError=""},succeed:function(){v.getNode(A).childrenStates.isLoaded=!0},fail:function(Y){v.getNode(A).childrenStates.loadingError=Ut(Y)},end:function(){v.getNode(A).childrenStates.isLoading=!1}})},callLoadOptionsProp:function(h){var v=h.action,A=h.args,V=h.isPending,z=h.start,Y=h.succeed,le=h.fail,me=h.end;if(!(!this.loadOptions||V())){z();var Ce=rt()(function(he,Ae){he?le(he):Y(Ae),me()}),Ie=this.loadOptions(j(j({id:this.getInstanceId(),instanceId:this.getInstanceId(),action:v},A),{},{callback:Ce}));lt()(Ie)&&Ie.then(function(){Ce()},function(he){Ce(he)}).catch(function(he){console.error(he)})}},checkDuplication:function(h){var v=this;re(function(){return!(h.id in v.forest.nodeMap&&!v.forest.nodeMap[h.id].isFallbackNode)},function(){return"Detected duplicate presence of node id ".concat(JSON.stringify(h.id),". ")+'Their labels are "'.concat(v.forest.nodeMap[h.id].label,'" and "').concat(h.label,'" respectively.')})},verifyNodeShape:function(h){re(function(){return!(h.children===void 0&&h.isBranch===!0)},function(){return"Are you meant to declare an unloaded branch node? `isBranch: true` is no longer supported, please use `children: null` instead."})},select:function(h){if(!(this.disabled||h.isDisabled)){this.single&&this.clear();var v=this.multiple&&!this.flat?this.forest.checkedStateMap[h.id]===Rt:!this.isSelected(h);v?this._selectNode(h):this._deselectNode(h),this.buildForestState(),v?this.$emit("select",h.raw,this.getInstanceId()):this.$emit("deselect",h.raw,this.getInstanceId()),this.localSearch.active&&v&&(this.single||this.clearOnSelect)&&this.resetSearchQuery(),this.single&&this.closeOnSelect&&(this.closeMenu(),this.searchable&&(this._blurOnSelect=!0))}},clear:function(){var h=this;this.hasValue&&(this.single||this.allowClearingDisabled?this.forest.selectedNodeIds=[]:this.forest.selectedNodeIds=this.forest.selectedNodeIds.filter(function(v){return h.getNode(v).isDisabled}),this.buildForestState())},_selectNode:function(h){var v=this;if(this.single||this.disableBranchNodes)return this.addValue(h);if(this.flat){this.addValue(h),this.autoSelectAncestors?h.ancestors.forEach(function(z){!v.isSelected(z)&&!z.isDisabled&&v.addValue(z)}):this.autoSelectDescendants&&this.traverseDescendantsBFS(h,function(z){!v.isSelected(z)&&!z.isDisabled&&v.addValue(z)});return}var A=h.isLeaf||!h.hasDisabledDescendants||this.allowSelectingDisabledDescendants;if(A&&this.addValue(h),h.isBranch&&this.traverseDescendantsBFS(h,function(z){(!z.isDisabled||v.allowSelectingDisabledDescendants)&&v.addValue(z)}),A)for(var V=h;(V=V.parentNode)!==We&&V.children.every(this.isSelected);)this.addValue(V)},_deselectNode:function(h){var v=this;if(this.disableBranchNodes)return this.removeValue(h);if(this.flat){this.removeValue(h),this.autoDeselectAncestors?h.ancestors.forEach(function(z){v.isSelected(z)&&!z.isDisabled&&v.removeValue(z)}):this.autoDeselectDescendants&&this.traverseDescendantsBFS(h,function(z){v.isSelected(z)&&!z.isDisabled&&v.removeValue(z)});return}var A=!1;if(h.isBranch&&this.traverseDescendantsDFS(h,function(z){(!z.isDisabled||v.allowSelectingDisabledDescendants)&&(v.removeValue(z),A=!0)}),h.isLeaf||A||h.children.length===0){this.removeValue(h);for(var V=h;(V=V.parentNode)!==We&&this.isSelected(V);)this.removeValue(V)}},addValue:function(h){this.forest.selectedNodeIds.push(h.id),this.forest.selectedNodeMap[h.id]=!0},removeValue:function(h){ds(this.forest.selectedNodeIds,h.id),delete this.forest.selectedNodeMap[h.id]},removeLastValue:function(){if(this.hasValue){if(this.single)return this.clear();var h=Je()(this.internalValue),v=this.getNode(h);this.select(v)}},saveMenuScrollPosition:function(){var h=this.getMenu();h&&(this.menu.lastScrollPosition=h.scrollTop)},restoreMenuScrollPosition:function(){var h=this.getMenu();h&&(h.scrollTop=this.menu.lastScrollPosition)}},created:function(){this.verifyProps(),this.resetFlags()},mounted:function(){this.autoFocus&&this.focusInput(),!this.options&&!this.async&&this.autoLoadRootOptions&&this.loadRootOptions(),this.alwaysOpen&&this.openMenu(),this.async&&this.defaultOptions&&this.handleRemoteSearch()},unmounted:function(){this.toggleClickOutsideEvent(!1)}};r("a15b");function Va(C){return typeof C=="string"?C:C!=null&&!H(C)?JSON.stringify(C):""}var ja=Object(d.defineComponent)({name:"vue-treeselect--hidden-fields",inject:["instance"],functional:!0,render:function(h){var v=h.instance;if(!v.name||v.disabled||!v.hasValue)return null;var A=v.internalValue.map(Va);return v.multiple&&v.joinValues&&(A=[A.join(v.delimiter)]),A.map(function(V,z){return Object(d.createVNode)("input",{type:"hidden",name:v.name,value:V,key:"hidden-field-"+z},null)})}}),Ua=ja;r("d3b7"),r("25f0");var Ba=r("b047"),za=r.n(Ba);r("3410"),r("b64b");function kt(C){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kt=function(v){return typeof v}:kt=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},kt(C)}function Cs(C){return C==null||kt(C)!=="object"?!1:Object.getPrototypeOf(C)===Object.prototype}function Ha(C,h,v){Cs(v)?(C[h]||(C[h]={}),Bt(C[h],v)):C[h]=v}function Bt(C,h){if(Cs(h))for(var v=Object.keys(h),A=0,V=v.length;A<V;A++)Ha(C,v[A],h[v[A]]);return C}function Wa(C){return typeof C=="function"||Object.prototype.toString.call(C)==="[object Object]"&&!Object(d.isVNode)(C)}var qa=[De.ENTER,De.END,De.HOME,De.ARROW_LEFT,De.ARROW_UP,De.ARROW_RIGHT,De.ARROW_DOWN],Ka={name:"vue-treeselect--input",inject:["instance"],data:function(){return{inputWidth:bs,value:""}},computed:{needAutoSize:function(){var h=this.instance;return h.searchable&&!h.disabled&&h.multiple},inputStyle:function(){return{width:this.needAutoSize?"".concat(this.inputWidth,"px"):null}}},watch:{"instance.trigger.searchQuery":function(h){this.value=h},value:function(){this.needAutoSize&&this.$nextTick(this.updateInputWidth)}},created:function(){this.debouncedCallback=za()(this.updateSearchQuery,Pa,{leading:!0,trailing:!0})},methods:{clear:function(){this.onInput({target:{value:""}})},focus:function(){var h=this.instance;h.disabled||this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},onFocus:function(){var h=this.instance;h.trigger.isFocused=!0,h.openOnFocus&&h.openMenu()},onBlur:function(){var h=this.instance,v=h.getMenu();if(v&&document.activeElement===v)return this.focus();h.trigger.isFocused=!1,h.closeMenu()},onInput:function(h){var v=h.target.value;this.value=v,v?this.debouncedCallback():(this.debouncedCallback.cancel(),this.updateSearchQuery())},onKeyDown:function(h){var v=this.instance,A="which"in h?h.which:h.keyCode;if(!(h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)){if(!v.menu.isOpen&&G(qa,A))return h.preventDefault(),v.openMenu();switch(A){case De.BACKSPACE:{v.backspaceRemoves&&!this.value.length&&v.removeLastValue();break}case De.ENTER:{if(h.preventDefault(),v.menu.current===null)return;var V=v.getNode(v.menu.current);if(V.isBranch&&v.disableBranchNodes)return;v.select(V);break}case De.ESCAPE:{this.value.length?this.clear():v.menu.isOpen&&v.closeMenu();break}case De.END:{h.preventDefault(),v.highlightLastOption();break}case De.HOME:{h.preventDefault(),v.highlightFirstOption();break}case De.ARROW_LEFT:{var z=v.getNode(v.menu.current);z.isBranch&&v.shouldExpand(z)?(h.preventDefault(),v.toggleExpanded(z)):!z.isRootNode&&(z.isLeaf||z.isBranch&&!v.shouldExpand(z))&&(h.preventDefault(),v.setCurrentHighlightedOption(z.parentNode));break}case De.ARROW_UP:{h.preventDefault(),v.highlightPrevOption();break}case De.ARROW_RIGHT:{var Y=v.getNode(v.menu.current);Y.isBranch&&!v.shouldExpand(Y)&&(h.preventDefault(),v.toggleExpanded(Y));break}case De.ARROW_DOWN:{h.preventDefault(),v.highlightNextOption();break}case De.DELETE:{v.deleteRemoves&&!this.value.length&&v.removeLastValue();break}default:v.openMenu()}}},onMouseDown:function(h){this.value.length&&h.stopPropagation()},renderInputContainer:function(){this.$createElement;var h=this.instance,v={},A=[];return h.searchable&&!h.disabled&&(A.push(this.renderInput()),this.needAutoSize&&A.push(this.renderSizer())),h.searchable||Bt(v,{on:{focus:this.onFocus,blur:this.onBlur,keydown:this.onKeyDown},ref:"input"}),!h.searchable&&!h.disabled&&Bt(v,{attrs:{tabIndex:h.tabIndex}}),Object(d.createVNode)("div",Object(d.mergeProps)({class:"vue-treeselect__input-container"},v),Wa(A)?A:{default:function(){return[A]}})},renderInput:function(){this.$createElement;var h=this.instance;return Object(d.createVNode)("input",{ref:"input",class:"vue-treeselect__input",type:"text",autocomplete:"off",tabIndex:h.tabIndex,required:h.required&&!h.hasValue,value:this.value,style:this.inputStyle,onFocus:this.onFocus,onInput:this.onInput,onBlur:this.onBlur,onKeydown:this.onKeyDown,onMousedown:this.onMouseDown},null)},renderSizer:function(){return this.$createElement,Object(d.createVNode)("div",{ref:"sizer",class:"vue-treeselect__sizer"},[this.value])},updateInputWidth:function(){this.inputWidth=Math.max(bs,this.$refs.sizer.scrollWidth+15)},updateSearchQuery:function(){var h=this.instance;h.trigger.searchQuery=this.value}},render:function(){return this.renderInputContainer()}},Ss=Ka,Ya={name:"vue-treeselect--placeholder",inject:["instance"],render:function(){var h=this.instance,v={"vue-treeselect__placeholder":!0,"vue-treeselect-helper-zoom-effect-off":!0,"vue-treeselect-helper-hide":h.hasValue||h.trigger.searchQuery};return Object(d.createVNode)("div",{class:v},[h.placeholder])}},Ds=Ya,Ga={name:"vue-treeselect--single-value",inject:["instance"],methods:{renderSingleValueLabel:function(){var h=this.instance,v=h.selectedNodes[0],A=h.$slots["value-label"];return A?A({node:v}):v.label}},render:function(){var h=this.instance,v=this.$parent.renderValueContainer,A=h.hasValue&&!h.trigger.searchQuery;return v([A&&Object(d.createVNode)("div",{class:"vue-treeselect__single-value"},[this.renderSingleValueLabel()]),Object(d.createVNode)(Ds,null,null),Object(d.createVNode)(Ss,{ref:"input"},null)])}},Qa=Ga,Xa={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 348.333 348.333"},Ja=Object(d.createVNode)("path",{d:"M336.559 68.611L231.016 174.165l105.543 105.549c15.699 15.705 15.699 41.145 0 56.85-7.844 7.844-18.128 11.769-28.407 11.769-10.296 0-20.581-3.919-28.419-11.769L174.167 231.003 68.609 336.563c-7.843 7.844-18.128 11.769-28.416 11.769-10.285 0-20.563-3.919-28.413-11.769-15.699-15.698-15.699-41.139 0-56.85l105.54-105.549L11.774 68.611c-15.699-15.699-15.699-41.145 0-56.844 15.696-15.687 41.127-15.687 56.829 0l105.563 105.554L279.721 11.767c15.705-15.687 41.139-15.687 56.832 0 15.705 15.699 15.705 41.145.006 56.844z"},null,-1);function Za(C,h,v,A,V,z){return Object(d.openBlock)(),Object(d.createBlock)("svg",Xa,[Ja])}var Ts={name:"vue-treeselect--x"};Ts.render=Za;var Ms=Ts;function $a(C){return typeof C=="function"||Object.prototype.toString.call(C)==="[object Object]"&&!Object(d.isVNode)(C)}var en={name:"vue-treeselect--multi-value-item",inject:["instance"],props:{node:{type:Object,required:!0}},methods:{handleMouseDown:be(function(){var h=this.instance,v=this.node;h.select(v)})},render:function(){var h=this.instance,v=this.node,A={"vue-treeselect__multi-value-item":!0,"vue-treeselect__multi-value-item-disabled":v.isDisabled,"vue-treeselect__multi-value-item-new":v.isNew},V=h.$slots["value-label"],z=V?V({node:v}):v.label;return Object(d.createVNode)("div",{class:"vue-treeselect__multi-value-item-container"},[Object(d.createVNode)("div",{class:A,onMousedown:this.handleMouseDown},[Object(d.createVNode)("span",{class:"vue-treeselect__multi-value-label"},$a(z)?z:{default:function(){return[z]}}),Object(d.createVNode)("span",{class:"vue-treeselect__icon vue-treeselect__value-remove"},[Object(d.createVNode)(Ms,null,null)])])])}},tn=en,sn={name:"vue-treeselect--multi-value",inject:["instance"],methods:{renderMultiValueItems:function(){this.$createElement;var h=this.instance;return h.internalValue.slice(0,h.limit).map(h.getNode).map(function(v){return Object(d.createVNode)(tn,{key:"multi-value-item-".concat(v.id),node:v},null)})},renderExceedLimitTip:function(){this.$createElement;var h=this.instance,v=h.internalValue.length-h.limit;return v<=0?null:Object(d.createVNode)("div",{class:"vue-treeselect__limit-tip vue-treeselect-helper-zoom-effect-off",key:"exceed-limit-tip"},[Object(d.createVNode)("span",{class:"vue-treeselect__limit-tip-text"},[h.limitText(v)])])}},render:function(){var h=this,v=this.$parent.renderValueContainer;return v(Object(d.createVNode)(Object(d.resolveComponent)("transition-group"),{class:"vue-treeselect__multi-value",tag:"div",name:"vue-treeselect__multi-value-item--transition",appear:!0},{default:function(){return[h.renderMultiValueItems(),h.renderExceedLimitTip(),Object(d.createVNode)(Ds,{key:"placeholder"},null),Object(d.createVNode)(Ss,{ref:"input",key:"input"},null)]}}))}},an=sn,nn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 292.362 292.362"},on=Object(d.createVNode)("path",{d:"M286.935 69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952 0-9.233 1.807-12.85 5.424C1.807 72.998 0 77.279 0 82.228c0 4.948 1.807 9.229 5.424 12.847l127.907 127.907c3.621 3.617 7.902 5.428 12.85 5.428s9.233-1.811 12.847-5.428L286.935 95.074c3.613-3.617 5.427-7.898 5.427-12.847 0-4.948-1.814-9.229-5.427-12.85z"},null,-1);function rn(C,h,v,A,V,z){return Object(d.openBlock)(),Object(d.createBlock)("svg",nn,[on])}var Os={name:"vue-treeselect--arrow"};Os.render=rn;var Is=Os;function ln(C){return typeof C=="function"||Object.prototype.toString.call(C)==="[object Object]"&&!Object(d.isVNode)(C)}var dn={name:"vue-treeselect--control",inject:["instance"],computed:{shouldShowX:function(){var h=this.instance;return h.clearable&&!h.disabled&&h.hasValue&&(this.hasUndisabledValue||h.allowClearingDisabled)},shouldShowArrow:function(){var h=this.instance;return h.alwaysOpen?!h.menu.isOpen:!0},hasUndisabledValue:function(){var h=this.instance;return h.hasValue&&h.internalValue.some(function(v){return!h.getNode(v).isDisabled})}},methods:{renderX:function(){this.$createElement;var h=this.instance,v=h.multiple?h.clearAllText:h.clearValueText;return this.shouldShowX?Object(d.createVNode)("div",{class:"vue-treeselect__x-container",title:v,onMousedown:this.handleMouseDownOnX},[Object(d.createVNode)(Ms,{class:"vue-treeselect__x"},null)]):null},renderArrow:function(){this.$createElement;var h=this.instance,v={"vue-treeselect__control-arrow":!0,"vue-treeselect__control-arrow--rotated":h.menu.isOpen};return this.shouldShowArrow?Object(d.createVNode)("div",{class:"vue-treeselect__control-arrow-container",onMousedown:this.handleMouseDownOnArrow},[Object(d.createVNode)(Is,{class:v},null)]):null},handleMouseDownOnX:be(function(h){h.stopPropagation(),h.preventDefault();var v=this.instance,A=v.beforeClearAll(),V=function(Y){Y&&v.clear()};lt()(A)?A.then(V):setTimeout(function(){return V(A)},0)}),handleMouseDownOnArrow:be(function(h){h.preventDefault(),h.stopPropagation();var v=this.instance;v.focusInput(),v.toggleMenu()}),renderValueContainer:function(h){return this.$createElement,Object(d.createVNode)("div",{class:"vue-treeselect__value-container"},ln(h)?h:{default:function(){return[h]}})}},render:function(){var h=this.instance,v=h.single?Qa:an;return Object(d.createVNode)("div",{class:"vue-treeselect__control",onMousedown:h.handleMouseDown},[Object(d.createVNode)(v,{ref:"value-container"},null),this.renderX(),this.renderArrow()])}},cn=dn,un=function(C,h){var v=document.createElement("_"),A=v.appendChild(document.createElement("_")),V=v.appendChild(document.createElement("_")),z=A.appendChild(document.createElement("_")),Y=void 0,le=void 0;return A.style.cssText=v.style.cssText="height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",z.style.cssText=V.style.cssText="display:block;height:100%;transition:0s;width:100%",z.style.width=z.style.height="200%",C.appendChild(v),me(),Ie;function me(){Ce();var he=C.offsetWidth,Ae=C.offsetHeight;(he!==Y||Ae!==le)&&(Y=he,le=Ae,V.style.width=he*2+"px",V.style.height=Ae*2+"px",v.scrollLeft=v.scrollWidth,v.scrollTop=v.scrollHeight,A.scrollLeft=A.scrollWidth,A.scrollTop=A.scrollHeight,h({width:he,height:Ae})),A.addEventListener("scroll",me),v.addEventListener("scroll",me)}function Ce(){A.removeEventListener("scroll",me),v.removeEventListener("scroll",me)}function Ie(){Ce(),C.removeChild(v)}},hn=un,zt,wt=[],mn=100;function pn(){zt=setInterval(function(){wt.forEach(As)},mn)}function gn(){clearInterval(zt),zt=null}function As(C){var h=C.$el,v=C.listener,A=C.lastWidth,V=C.lastHeight,z=h.offsetWidth,Y=h.offsetHeight;(A!==z||V!==Y)&&(C.lastWidth=z,C.lastHeight=Y,v({width:z,height:Y}))}function fn(C,h){var v={$el:C,listener:h,lastWidth:null,lastHeight:null},A=function(){ds(wt,v),wt.length||gn()};return wt.push(v),As(v),pn(),A}function Ls(C,h){var v=document.documentMode===9,A=!0,V=function(){return A||h.apply(void 0,arguments)},z=v?fn:hn,Y=z(C,V);return A=!1,Y}function _n(C){for(var h=[],v=C.parentNode;v&&v.nodeName!=="BODY"&&v.nodeType===document.ELEMENT_NODE;)bn(v)&&h.push(v),v=v.parentNode;return h.push(window),h}function bn(C){var h=getComputedStyle(C),v=h.overflow,A=h.overflowX,V=h.overflowY;return/(auto|scroll|overlay)/.test(v+V+A)}function Es(C,h){var v=_n(C);return window.addEventListener("resize",h,{passive:!0}),v.forEach(function(A){A.addEventListener("scroll",h,{passive:!0})}),function(){window.removeEventListener("resize",h,{passive:!0}),v.forEach(function(V){V.removeEventListener("scroll",h,{passive:!0})})}}var vn=Object(d.defineComponent)({name:"vue-treeselect--tip",functional:!0,props:{type:{type:String,required:!0},icon:{type:String,required:!0}},render:function(h){var v=this.type,A=this.icon;return Object(d.createVNode)("div",{class:"vue-treeselect__tip vue-treeselect__".concat(v,"-tip")},[Object(d.createVNode)("div",{class:"vue-treeselect__icon-container"},[Object(d.createVNode)("span",{class:"vue-treeselect__icon-".concat(A)},null)]),Object(d.createVNode)("span",{class:"vue-treeselect__tip-text vue-treeselect__".concat(v,"-tip-text")},[this.$slots.default()])])}}),Ne=vn;function Ct(C){return typeof C=="function"||Object.prototype.toString.call(C)==="[object Object]"&&!Object(d.isVNode)(C)}var Ht,Wt,qt,yn={name:"vue-treeselect--option",inject:["instance"],props:{node:{type:Object,required:!0}},computed:{shouldExpand:function(){var h=this.instance,v=this.node;return v.isBranch&&h.shouldExpand(v)},shouldShow:function(){var h=this.instance,v=this.node;return h.shouldShowOptionInMenu(v)}},methods:{renderOption:function(){this.$createElement;var h=this.instance,v=this.node,A={"vue-treeselect__option":!0,"vue-treeselect__option--disabled":v.isDisabled,"vue-treeselect__option--selected":h.isSelected(v),"vue-treeselect__option--highlight":v.isHighlighted,"vue-treeselect__option--matched":h.localSearch.active&&v.isMatched,"vue-treeselect__option--hide":!this.shouldShow};return Object(d.createVNode)("div",{class:A,onMouseenter:this.handleMouseEnterOption,"data-id":v.id},[this.renderArrow(),this.renderLabelContainer([this.renderCheckboxContainer([this.renderCheckbox()]),this.renderLabel()])])},renderSubOptionsList:function(){return this.$createElement,this.shouldExpand?Object(d.createVNode)("div",{class:"vue-treeselect__list"},[this.renderSubOptions(),this.renderNoChildrenTip(),this.renderLoadingChildrenTip(),this.renderLoadingChildrenErrorTip()]):null},renderArrow:function(){this.$createElement;var h=this.instance,v=this.node;if(h.shouldFlattenOptions&&this.shouldShow)return null;if(v.isBranch){var A,V={"vue-treeselect__option-arrow":!0,"vue-treeselect__option-arrow--rotated":this.shouldExpand};return Object(d.createVNode)("div",{class:"vue-treeselect__option-arrow-container",onMousedown:this.handleMouseDownOnArrow},[Object(d.createVNode)(Object(d.resolveComponent)("transition"),{name:"vue-treeselect__option-arrow--prepare",appear:!0},Ct(A=Object(d.createVNode)(Is,{class:V},null))?A:{default:function(){return[A]}})])}return h.hasBranchNodes?(Ht||(Ht=Object(d.createVNode)("div",{class:"vue-treeselect__option-arrow-placeholder"},[Object(d.createTextVNode)(" ")])),Ht):null},renderLabelContainer:function(h){return this.$createElement,Object(d.createVNode)("div",{class:"vue-treeselect__label-container",onMousedown:this.handleMouseDownOnLabelContainer},Ct(h)?h:{default:function(){return[h]}})},renderCheckboxContainer:function(h){this.$createElement;var v=this.instance,A=this.node;return v.single||v.disableBranchNodes&&A.isBranch?null:Object(d.createVNode)("div",{class:"vue-treeselect__checkbox-container"},Ct(h)?h:{default:function(){return[h]}})},renderCheckbox:function(){this.$createElement;var h=this.instance,v=this.node,A=h.forest.checkedStateMap[v.id],V={"vue-treeselect__checkbox":!0,"vue-treeselect__checkbox--checked":A===us,"vue-treeselect__checkbox--indeterminate":A===cs,"vue-treeselect__checkbox--unchecked":A===Rt,"vue-treeselect__checkbox--disabled":v.isDisabled};return Wt||(Wt=Object(d.createVNode)("span",{class:"vue-treeselect__check-mark"},null)),qt||(qt=Object(d.createVNode)("span",{class:"vue-treeselect__minus-mark"},null)),Object(d.createVNode)("span",{class:V},[Wt,qt])},renderLabel:function(){this.$createElement;var h=this.instance,v=this.node,A=v.isBranch&&(h.localSearch.active?h.showCountOnSearchComputed:h.showCount),V=A?h.localSearch.active?h.localSearch.countMap[v.id][h.showCountOf]:v.count[h.showCountOf]:NaN,z="vue-treeselect__label",Y="vue-treeselect__count",le=h.$slots["option-label"];return le?le({node:v,shouldShowCount:A,count:V,labelClassName:z,countClassName:Y}):Object(d.createVNode)("label",{class:z},[v.label,A&&Object(d.createVNode)("span",{class:Y},[Object(d.createTextVNode)("("),V,Object(d.createTextVNode)(")")])])},renderSubOptions:function(){this.$createElement;var h=this.node;return h.childrenStates.isLoaded?h.children.map(function(v){return Object(d.createVNode)(Object(d.resolveComponent)("vue-treeselect--option"),{node:v,key:v.id},null)}):null},renderNoChildrenTip:function(){this.$createElement;var h=this.instance,v=this.node;return!v.childrenStates.isLoaded||v.children.length?null:Object(d.createVNode)(Ne,{type:"no-children",icon:"warning"},{default:function(){return[h.noChildrenText]}})},renderLoadingChildrenTip:function(){this.$createElement;var h=this.instance,v=this.node;return v.childrenStates.isLoading?Object(d.createVNode)(Ne,{type:"loading",icon:"loader"},{default:function(){return[h.loadingText]}}):null},renderLoadingChildrenErrorTip:function(){var h=this;this.$createElement;var v=this.instance,A=this.node;return A.childrenStates.loadingError?Object(d.createVNode)(Ne,{type:"error",icon:"error"},{default:function(){return[A.childrenStates.loadingError,Object(d.createVNode)("a",{class:"vue-treeselect__retry",title:v.retryTitle,onMousedown:h.handleMouseDownOnRetry},[v.retryText])]}}):null},handleMouseEnterOption:function(h){var v=this.instance,A=this.node;h.target===h.currentTarget&&v.setCurrentHighlightedOption(A,!1)},handleMouseDownOnArrow:be(function(){var h=this.instance,v=this.node;h.toggleExpanded(v)}),handleMouseDownOnLabelContainer:be(function(){var h=this.instance,v=this.node;v.isBranch&&h.disableBranchNodes?h.toggleExpanded(v):h.select(v)}),handleMouseDownOnRetry:be(function(){var h=this.instance,v=this.node;h.loadChildrenOptions(v)})},render:function(){var h,v=this.node,A=this.instance.shouldFlattenOptions?0:v.level,V=S({"vue-treeselect__list-item":!0},"vue-treeselect__indent-level-".concat(A),!0);return Object(d.createVNode)("div",{class:V},[this.renderOption(),v.isBranch?Object(d.createVNode)(Object(d.resolveComponent)("transition"),{name:"vue-treeselect__list--transition"},Ct(h=this.renderSubOptionsList())?h:{default:function(){return[h]}}):""])}},kn=yn,wn=kn;function Cn(C){return typeof C=="function"||Object.prototype.toString.call(C)==="[object Object]"&&!Object(d.isVNode)(C)}var Sn={top:"top",bottom:"bottom",above:"top",below:"bottom"},Dn={name:"vue-treeselect--menu",inject:["instance"],computed:{menuStyle:function(){var h=this.instance;return{maxHeight:h.maxHeight+"px"}},menuContainerStyle:function(){var h=this.instance;return{zIndex:h.appendToBody?null:h.zIndex}}},watch:{"instance.menu.isOpen":function(h){h?this.$nextTick(this.onMenuOpen):this.onMenuClose()}},created:function(){this.menuSizeWatcher=null,this.menuResizeAndScrollEventListeners=null},mounted:function(){var h=this.instance;h.menu.isOpen&&this.$nextTick(this.onMenuOpen)},unmounted:function(){this.onMenuClose()},methods:{renderMenu:function(){this.$createElement;var h=this.instance;return h.menu.isOpen?Object(d.createVNode)("div",{ref:"menu",class:"vue-treeselect__menu",onMousedown:h.handleMouseDown,style:this.menuStyle},[this.renderBeforeList(),h.async?this.renderAsyncSearchMenuInner():h.localSearch.active?this.renderLocalSearchMenuInner():this.renderNormalMenuInner(),this.renderAfterList()]):null},renderBeforeList:function(){var h=this.instance,v=h.$slots["before-list"];return v?v():null},renderAfterList:function(){var h=this.instance,v=h.$slots["after-list"];return v?v():null},renderNormalMenuInner:function(){var h=this.instance;return h.rootOptionsStates.isLoading?this.renderLoadingOptionsTip():h.rootOptionsStates.loadingError?this.renderLoadingRootOptionsErrorTip():h.rootOptionsStates.isLoaded&&h.forest.normalizedOptions.length===0?this.renderNoAvailableOptionsTip():this.renderOptionList()},renderLocalSearchMenuInner:function(){var h=this.instance;return h.rootOptionsStates.isLoading?this.renderLoadingOptionsTip():h.rootOptionsStates.loadingError?this.renderLoadingRootOptionsErrorTip():h.rootOptionsStates.isLoaded&&h.forest.normalizedOptions.length===0?this.renderNoAvailableOptionsTip():h.localSearch.noResults?this.renderNoResultsTip():this.renderOptionList()},renderAsyncSearchMenuInner:function(){var h=this.instance,v=h.getRemoteSearchEntry(),A=h.trigger.searchQuery===""&&!h.defaultOptions,V=A?!1:v.isLoaded&&v.options.length===0;return A?this.renderSearchPromptTip():v.isLoading?this.renderLoadingOptionsTip():v.loadingError?this.renderAsyncSearchLoadingErrorTip():V?this.renderNoResultsTip():this.renderOptionList()},renderOptionList:function(){this.$createElement;var h=this.instance;return Object(d.createVNode)("div",{class:"vue-treeselect__list"},[h.forest.normalizedOptions.map(function(v){return Object(d.createVNode)(wn,{node:v,key:v.id},null)})])},renderSearchPromptTip:function(){this.$createElement;var h=this.instance;return Object(d.createVNode)(Ne,{type:"search-prompt",icon:"warning"},{default:function(){return[h.searchPromptText]}})},renderLoadingOptionsTip:function(){this.$createElement;var h=this.instance;return Object(d.createVNode)(Ne,{type:"loading",icon:"loader"},{default:function(){return[h.loadingText]}})},renderLoadingRootOptionsErrorTip:function(){this.$createElement;var h=this.instance;return Object(d.createVNode)(Ne,{type:"error",icon:"error"},{default:function(){return[h.rootOptionsStates.loadingError,Object(d.createVNode)("a",{class:"vue-treeselect__retry",onClick:h.loadRootOptions,title:h.retryTitle},[h.retryText])]}})},renderAsyncSearchLoadingErrorTip:function(){this.$createElement;var h=this.instance,v=h.getRemoteSearchEntry();return Object(d.createVNode)(Ne,{type:"error",icon:"error"},{default:function(){return[v.loadingError,Object(d.createVNode)("a",{class:"vue-treeselect__retry",onClick:h.handleRemoteSearch,title:h.retryTitle},[h.retryText])]}})},renderNoAvailableOptionsTip:function(){this.$createElement;var h=this.instance;return Object(d.createVNode)(Ne,{type:"no-options",icon:"warning"},{default:function(){return[h.noOptionsText]}})},renderNoResultsTip:function(){this.$createElement;var h=this.instance;return Object(d.createVNode)(Ne,{type:"no-results",icon:"warning"},{default:function(){return[h.noResultsText]}})},onMenuOpen:function(){this.adjustMenuOpenDirection(),this.setupMenuSizeWatcher(),this.setupMenuResizeAndScrollEventListeners()},onMenuClose:function(){this.removeMenuSizeWatcher(),this.removeMenuResizeAndScrollEventListeners()},adjustMenuOpenDirection:function(){var h=this.instance;if(h.menu.isOpen){var v=h.getMenu(),A=h.getControl(),V=v.getBoundingClientRect(),z=A.getBoundingClientRect(),Y=V.height,le=window.innerHeight,me=z.top,Ce=window.innerHeight-z.bottom,Ie=z.top>=0&&z.top<=le||z.top<0&&z.bottom>0,he=Ce>Y+vs,Ae=me>Y+vs;Ie?h.openDirection!=="auto"?h.menu.placement=Sn[h.openDirection]:he||!Ae?h.menu.placement="bottom":h.menu.placement="top":h.closeMenu()}},setupMenuSizeWatcher:function(){var h=this.instance,v=h.getMenu();this.menuSizeWatcher||(this.menuSizeWatcher={remove:Ls(v,this.adjustMenuOpenDirection)})},setupMenuResizeAndScrollEventListeners:function(){var h=this.instance,v=h.getControl();this.menuResizeAndScrollEventListeners||(this.menuResizeAndScrollEventListeners={remove:Es(v,this.adjustMenuOpenDirection)})},removeMenuSizeWatcher:function(){this.menuSizeWatcher&&(this.menuSizeWatcher.remove(),this.menuSizeWatcher=null)},removeMenuResizeAndScrollEventListeners:function(){this.menuResizeAndScrollEventListeners&&(this.menuResizeAndScrollEventListeners.remove(),this.menuResizeAndScrollEventListeners=null)}},render:function(){var h;return Object(d.createVNode)("div",{ref:"menu-container",class:"vue-treeselect__menu-container",style:this.menuContainerStyle},[Object(d.createVNode)(Object(d.resolveComponent)("transition"),{name:"vue-treeselect__menu--transition"},Cn(h=this.renderMenu())?h:{default:function(){return[h]}})])}},xs=Dn,Tn={name:"vue-treeselect--portal-target",inject:["instance"],watch:{"instance.menu.isOpen":function(h){h?this.setupHandlers():this.removeHandlers()},"instance.menu.placement":function(){this.updateMenuContainerOffset()}},created:function(){this.controlResizeAndScrollEventListeners=null,this.controlSizeWatcher=null},mounted:function(){var h=this.instance;h.menu.isOpen&&this.setupHandlers()},methods:{setupHandlers:function(){this.updateWidth(),this.updateMenuContainerOffset(),this.setupControlResizeAndScrollEventListeners(),this.setupControlSizeWatcher()},removeHandlers:function(){this.removeControlResizeAndScrollEventListeners(),this.removeControlSizeWatcher()},setupControlResizeAndScrollEventListeners:function(){var h=this.instance,v=h.getControl();this.controlResizeAndScrollEventListeners||(this.controlResizeAndScrollEventListeners={remove:Es(v,this.updateMenuContainerOffset)})},setupControlSizeWatcher:function(){var h=this,v=this.instance,A=v.getControl();this.controlSizeWatcher||(this.controlSizeWatcher={remove:Ls(A,function(){h.updateWidth(),h.updateMenuContainerOffset()})})},removeControlResizeAndScrollEventListeners:function(){this.controlResizeAndScrollEventListeners&&(this.controlResizeAndScrollEventListeners.remove(),this.controlResizeAndScrollEventListeners=null)},removeControlSizeWatcher:function(){this.controlSizeWatcher&&(this.controlSizeWatcher.remove(),this.controlSizeWatcher=null)},updateWidth:function(){var h=this.instance,v=this.$el,A=h.getControl(),V=A.getBoundingClientRect();v.style.width=V.width+"px"},updateMenuContainerOffset:function(){var h=this.instance,v=h.getControl(),A=this.$el,V=v.getBoundingClientRect(),z=A.getBoundingClientRect(),Y=h.menu.placement==="bottom"?V.height:0,le=Math.round(V.left-z.left)+"px",me=Math.round(V.top-z.top+Y)+"px",Ce=this.$refs.menu.$refs["menu-container"].style,Ie=["transform","webkitTransform","MozTransform","msTransform"],he=fe(Ie,function(Ae){return Ae in document.body.style});Ce[he]="translate(".concat(le,", ").concat(me,")")}},render:function(){var h=this.instance,v=["vue-treeselect__portal-target",h.wrapperClass],A={zIndex:h.zIndex};return Object(d.createVNode)("div",{class:v,style:A,"data-instance-id":h.getInstanceId()},[Object(d.createVNode)(xs,{ref:"menu"},null)])},unmounted:function(){this.removeHandlers()}},Kt,Mn={name:"vue-treeselect--menu-portal",created:function(){this.portalTarget=null},mounted:function(){this.setup()},unmounted:function(){this.teardown()},methods:{setup:function(){var h=document.createElement("div");document.body.appendChild(h),this.portalTarget=Object(d.createApp)(j({parent:this},Tn)),this.portalTarget.mount(h)},teardown:function(){document.body.removeChild(this.portalTarget.$el),this.portalTarget.$el.innerHTML="",this.portalTarget.$destroy(),this.portalTarget=null}},render:function(){return Kt||(Kt=Object(d.createVNode)("div",{class:"vue-treeselect__menu-placeholder"},null)),Kt}},On=Mn,Ps=Object(d.defineComponent)({name:"vue-treeselect",mixins:[ws],components:{HiddenFields:Ua,Control:cn,Menu:xs,MenuPortal:On},computed:{wrapperClass:function(){return{"vue-treeselect":!0,"vue-treeselect--single":this.single,"vue-treeselect--multi":this.multiple,"vue-treeselect--searchable":this.searchable,"vue-treeselect--disabled":this.disabled,"vue-treeselect--focused":this.trigger.isFocused,"vue-treeselect--has-value":this.hasValue,"vue-treeselect--open":this.menu.isOpen,"vue-treeselect--open-above":this.menu.placement==="top","vue-treeselect--open-below":this.menu.placement==="bottom","vue-treeselect--branch-nodes-disabled":this.disableBranchNodes,"vue-treeselect--append-to-body":this.appendToBody}}}});Ps.render=m;var Rs=Ps;r("d15f");var In=Rs;a.default=In},fb6a:function(t,a,r){var s=r("23e7"),i=r("861d"),d=r("e8b5"),m=r("23cb"),p=r("50c4"),f=r("fc6a"),b=r("8418"),y=r("b622"),D=r("1dde"),w=r("ae40"),S=D("slice"),L=w("slice",{ACCESSORS:!0,0:0,1:2}),x=y("species"),P=[].slice,F=Math.max;s({target:"Array",proto:!0,forced:!S||!L},{slice:function(j,J){var W=f(this),H=p(W.length),G=m(j,H),se=m(J===void 0?H:J,H),K,te,oe;if(d(W)&&(K=W.constructor,typeof K=="function"&&(K===Array||d(K.prototype))?K=void 0:i(K)&&(K=K[x],K===null&&(K=void 0)),K===Array||K===void 0))return P.call(W,G,se);for(te=new(K===void 0?Array:K)(F(se-G,0)),oe=0;G<se;G++,oe++)G in W&&b(te,oe,W[G]);return te.length=oe,te}})},fc6a:function(t,a,r){var s=r("44ad"),i=r("1d80");t.exports=function(d){return s(i(d))}},fdbc:function(t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,a,r){var s=r("4930");t.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},ffd6:function(t,a,r){var s=r("3729"),i=r("1310"),d="[object Symbol]";function m(p){return typeof p=="symbol"||i(p)&&s(p)==d}t.exports=m}})})(Ea);var s3=Ea.exports;const a3=hi(s3);const n3={components:{Treeselect:a3,"form-field-template":da},props:{label:{type:String,required:!0},name:{type:[String,Number],required:!0},value:{type:[String,Number,Array],default:()=>globalThis.multiple?[]:""},classname:{type:String,default:""},onChange:{type:Function,Required:!0},hint:{type:String,default:""},required:{type:Boolean,default:!1},id:{type:[String,Number],default:"static-select"},labelStyle:{type:Object,default:function(){return{}}},strlength:{type:[String,Number],default:3},disabled:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,default:!1},apiEndpoint:{type:String,default:null},apiParameters:{type:[Object,Map],default:()=>{}},placeholder:{type:String,default:"Search or Select"},valueFormat:{type:String,default:"object"},placeHolder:{type:String,default:"Search or Select"},elements:{type:Array,default(){return[]}}},data(){return{selectedValue:this.value,treeselectOptions:[],isFetchingOptions:!1,observer:null,nextPageUrl:"",searchQuery:void 0,isLoading:!1,listElements:[],page:0,searching:!1}},computed:{hasNextPage(){return!!(this.nextPageUrl!==null&&this.apiEndpoint)}},watch:{apiEndpoint(e,t){Te(e)&&this.flushAndRestart()},apiParameters(e,t){Te(e)&&this.flushAndRestart()},value(e){this.selectedValue=e||null},multiple(e){e&&!Array.isArray(this.value)?this.$emit("input",[]):!e&&Array.isArray(this.value)&&this.$emit("input","")}},beforeMount(){this.listElements=this.elements?this.elements:[]},mounted(){this.apiEndpoint&&this.flushAndRestart(),this.selectedValue=this.value?this.value:null},methods:{subString(e){return ge(e,parseInt(this.strlength))},async connectObserver(){this.hasNextPage&&(await this.$nextTick(),this.observer.observe(this.$refs.treeSelectLoader))},disconnectObserver(){this.observer&&this.observer.disconnect()},flushAndRestart(e=""){this.disconnectObserver(),this.resetProperties(e),this.observer=new IntersectionObserver(this.infiniteScroll)},onSearch(e){this.searchQuery=e,this.page=1,this.searching=!0,this.search()},search:pi.debounce(function(){this.apiEndpoint?this.getListFromServer(!0):this.searching=!1},350),getListFromServer(e,t){Te(this.apiEndpoint)&&(this.isLoading=!0,R.get(this.apiEndpoint,{params:this.getApiParams()}).then(a=>{this.postApiResponseOperations(a.data.data,e,t)}).catch(a=>{this.nextPageUrl=null,B(a)}).finally(()=>{this.isLoading=!1,this.searching=!1}))},async postApiResponseOperations(e,t,a){try{if(this.nextPageUrl=e.next_page_url,t)this.listElements=e.data;else{if(a){var r=a.offsetParent;if(r)var s=a.offsetParent.scrollTop}this.listElements.push(...e.data),await this.$nextTick(),a&&r&&(r.scrollTop=s)}}catch(i){console.error(i)}},getApiParams(){let e=Te(this.apiParameters)?this.apiParameters:{};e instanceof Map&&(e=gi(e));let t=JSON.parse(JSON.stringify(e));return t["search-query"]=this.searchQuery,t.page=this.page||void 0,t.paginate=1,t},infiniteScroll([{isIntersecting:e,target:t}]){e&&(this.page+=1,this.getListFromServer(!1,t))},resetProperties(e=""){this.listElements=[],this.page=0,this.observer=null,this.nextPageUrl="",this.searchQuery=void 0,this.isLoading=!1,e!="update"&&(this.selectedValue=null)},normalizer(e){return{id:e.id,label:e.name,children:e.children&&e.children.length?e.children:0}}}},i3={key:0,class:"vue-treeselect__tip vue-treeselect__no-options-tip"},o3={class:"vue-treeselect__tip-text vue-treeselect__no-options-tip-text"},r3={key:1,ref:"treeSelectLoader",class:"loader-area"};function l3(e,t,a,r,s,i){const d=g("loader"),m=g("treeselect"),p=g("form-field-template"),f=Q("tooltip");return o(),I(p,{label:a.label,name:a.name,classname:a.classname,hint:a.hint,required:a.required,labelStyle:a.labelStyle},{default:T(()=>[_(m,{modelValue:s.selectedValue,"onUpdate:modelValue":[t[0]||(t[0]=b=>s.selectedValue=b),t[1]||(t[1]=b=>a.onChange(s.selectedValue,a.name))],value:s.selectedValue,name:a.name,options:s.listElements,"show-count":!0,multiple:a.multiple,onSearchChange:i.onSearch,normalizer:i.normalizer,"value-format":a.valueFormat,onOpen:i.connectObserver,onClose:i.disconnectObserver,"always-open":!1,"max-height":200,noOptionsText:"",noResultsText:"",placeholder:a.placeHolder,"search-nested":!0,flat:!0},{"option-label":T(({node:b})=>[M((o(),l("span",null,[k(c(i.subString(b.label)),1)])),[[f,b.label]])]),"after-list":T(b=>[!s.isLoading&&!s.listElements.length&&!s.searching?(o(),l("div",i3,[t[2]||(t[2]=n("div",{class:"vue-treeselect__icon-container"},[n("span",{class:"vue-treeselect__icon-warning"})],-1)),n("span",o3,c(e.lang("no_options_available")),1)])):u("",!0),i.hasNextPage||s.searching?(o(),l("div",r3,[_(d,{duration:4e3,size:25})],512)):u("",!0)]),_:1},8,["modelValue","value","name","options","multiple","onSearchChange","normalizer","value-format","onOpen","onClose","placeholder"])]),_:1},8,["label","name","classname","hint","required","labelStyle"])}const Pt=U(n3,[["render",l3],["__scopeId","data-v-ca2d01fe"]]);function d3(e){const{description:t,name:a,display_order:r,slug:s}=e;let i={description:[t,"isRequired"],name:[a,"isRequired"],display_order:[r,"isRequired"],slug:[s,"isRequired"]};const d=new ye(pe),{errors:m,isValid:p}=d.validate(i);return ve.dispatch("setValidationError",m),{errors:m,isValid:p}}function c3(e){const{name:t}=e;let a={name:[t,"isRequired",{"max(250)":pe("tag_name_should_be_less_than_250_characters")}]};const r=new ye(pe),{errors:s,isValid:i}=r.validate(a);return ve.dispatch("setValidationError",s),{errors:s,isValid:i}}const u3={name:"article-modal",description:"Article modal Component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},newCategory:{type:Function},newTag:{type:Function},title:{type:String},id:{type:[String,Number],default:""}},data:()=>({btnName:"save",iconClass:"fas fa-save",btnClass:"btn btn-primary",isDisabled:!1,description:"",loading:!1,size:60,color:"#1d78ff",apiUrl:"",lang_locale:"",radioOptions:[{name:"active",value:1}],status:1,name:"",display_order:"",modalStyle:{width:"850px"},parent_category:null,slug:"",link:"",buttonVisible:!1}),beforeMount(){this.iconClass=this.title==="delete"?"fas fa-trash":"fas fa-save",this.btnClass=this.title==="delete"?"btn btn-secondary":"btn btn-primary",this.btnName=this.title==="delete"?"delete":"save",this.modalStyle.width=this.title==="delete"?"500px":"850px"},methods:{isValid(){const{errors:e,isValid:t}=d3(this.$data);return!!t},isTagValid(){const{errors:e,isValid:t}=c3(this.$data);return!!t},onChange(e,t){if(this[t]=e,!this.buttonVisible&&(t==="name"||t==="slug")){var a=e.replace(/[^\w\s]/gi,"").toLowerCase(),r=a.replace(/_+/g,"");this.link=r.replace(/\s+/g,"-"),this.slug=e}},initialState(){this.loading=!1,this.isDisabled=!1,this.name="",this.description="",this.display_order=""},onSubmit(){switch(this.title){case"delete":this.deleteMethod();break;case"new_tag":this.createNewTag();break;case"new_category":this.createNewCategory();break}},deleteMethod(){this.loading=!0,this.isDisabled=!0,R.delete("/article/delete/"+this.id).then(e=>{this.afterSuccess(e),setTimeout(()=>this.$router.push({name:"KB Article"}),3e3)}).catch(e=>{this.afterFailure(e)})},createNewTag(){if(this.isTagValid()){this.loading=!0,this.isDisabled=!0;const e={};e.name=this.name,e.kb=1,R.post("/api/tag",e).then(t=>{this.getNewTag(this.name),this.afterSuccess(t)}).catch(t=>{this.afterFailure(t)})}},refreshSlug(e){this.link=e},createNewCategory(){this.isValid()&&(this.loading=!0,this.isDisabled=!0,R.post("/api/category/create",{name:this.name,description:this.description,status:this.status,display_order:this.display_order,parent:this.parent_category?this.parent_category.id:"",slug:this.link}).then(e=>{this.getNewCategory(this.name),this.afterSuccess(e)}).catch(e=>{this.afterFailure(e)}))},afterSuccess(e){this.loading=!1,this.isDisabled=!0,X(e,"article-create"),this.initialState(),this.onClose()},afterFailure(e){this.loading=!1,this.isDisabled=!1,B(e)},getNewTag(e){R.get("/api/dependency/tags?search-query="+e).then(t=>{let a=Bs(t.data.data.tags,"name",e);this.newTag(a)})},getNewCategory(e){R.get("/api/dependency/categories?search-query="+e).then(t=>{let a=Bs(t.data.data.kb_category,"name",e);this.newCategory(a)})}},components:{"text-field":Se,"number-field":ft,"radio-button":Pe,"tree-select":Pt,"perma-link":Et}},h3={class:"modal-title"},m3={class:"row"},p3={class:"row"},g3={class:"row"},f3={key:1,class:"row"},_3={key:2},b3={key:3,class:"row"},v3=["disabled"];function y3(e,t,a,r,s,i){const d=g("alert"),m=g("text-field"),p=g("perma-link"),f=g("tree-select"),b=g("number-field"),y=g("radio-button"),D=g("custom-loader"),w=g("modal"),S=Q("focus-first-input");return a.showModal?(o(),I(w,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.modalStyle},{title:T(()=>[n("h4",h3,c(e.lang(a.title)),1)]),alert:T(()=>[_(d)]),fields:T(()=>[a.title==="new_category"?(o(),l(E,{key:0},[M((o(),l("div",m3,[_(m,{label:e.lang("name"),value:e.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),_(p,{label:e.trans("perma_link"),value:e.slug,updateSlug:i.refreshSlug,name:"slug",onChange:i.onChange,from:"category",classname:"col-sm-6",required:!0,link:e.link,disabled:e.buttonVisible},null,8,["label","value","updateSlug","onChange","link","disabled"])])),[[S]]),n("div",p3,[_(f,{label:e.trans("parent"),multiple:!1,name:"parent_category",classname:"col-sm-6",apiEndpoint:"/api/dependency/categories",value:e.parent_category,onChange:i.onChange,placeHolder:e.trans("search_or_select"),required:!1,strlength:"45"},null,8,["label","value","onChange","placeHolder"]),_(b,{label:e.lang("display_order"),value:e.display_order,name:"display_order",classname:"col-sm-3",onChange:i.onChange,placeholder:"n",type:"number",required:!0},null,8,["label","value","onChange"]),_(y,{options:e.radioOptions,label:e.lang("status"),name:"status",value:e.status,onChange:i.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])]),n("div",g3,[_(m,{label:e.lang("description"),value:e.description,type:"textarea",name:"description",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold"])])],64)):u("",!0),a.title==="new_tag"?M((o(),l("div",f3,[_(m,{label:e.lang("name"),value:e.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold"])])),[[S]]):u("",!0),a.title==="delete"?(o(),l("div",_3,[n("span",null,c(e.lang("are_you_sure_you_want_to_delete")),1)])):u("",!0),e.loading===!0?(o(),l("div",b3,[_(D,{duration:4e3})])):u("",!0)]),controls:T(()=>[n("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=L=>i.onSubmit()),class:N(e.btnClass),disabled:e.isDisabled},[n("i",{class:N(e.iconClass)},null,2),k(" "+c(e.lang(e.btnName)),1)],10,v3)]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const k3=U(u3,[["render",y3]]);const w3={name:"template-modal",props:{showModal:{type:Boolean,required:!0},onClose:{type:Function,required:!0},modalTitle:{type:String,required:!0}},data:()=>({modalStyle:{width:"70vw"},previewBody:"<p>Select one template to see the preview!</p>",template:"",isLoading:!1}),methods:{onChange(e,t){this[t]=e,t==="template"&&(e?this.getAndUpdateTemplateBody(e.id):this.previewBody="<p>Select one template to see the preview!</p>")},getAndUpdateTemplateBody(e){this.isLoading=!0,R.get("/article/template/"+e).then(t=>{this.previewBody=t.data.data.description}).catch(t=>{this.previewBody=`<div class="alert alert-danger" role="alert">${t}</div>`}).finally(()=>{this.isLoading=!1})},templateOperation(e){this.template!==""&&window.emitter.emit("applyTemplate",{operation:e,data:this.previewBody})}},components:{"dynamic-select":_e}},C3={class:"modal-title"},S3={class:"row"},D3={class:"col-sm-9"},T3={for:"preview-panel"},M3={class:"panel",id:"preview-panel"},O3={class:"panel-body body-max-height"},I3=["innerHTML"],A3=["disabled"],L3=["disabled"];function E3(e,t,a,r,s,i){const d=g("alert"),m=g("dynamic-select"),p=g("custom-loader"),f=g("modal");return a.showModal?(o(),I(f,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.modalStyle},{alert:T(()=>[_(d,{componentName:"templateModal"})]),title:T(()=>[n("h4",C3,c(e.lang(a.modalTitle)),1)]),fields:T(()=>[n("div",S3,[_(m,{label:e.lang("template"),multiple:!1,name:"template",classname:"col-sm-3",apiEndpoint:"/api/dependency/article-templates",value:e.template,onChange:i.onChange,placeholder:e.lang("search_or_select"),clearable:!!e.template,strlength:"30"},null,8,["label","value","onChange","placeholder","clearable"]),n("div",D3,[e.isLoading?(o(),I(p,{key:0,duration:4e3})):u("",!0),n("label",T3,c(e.lang("preview")),1),n("div",M3,[n("div",O3,[n("blockquote",{innerHTML:e.previewBody},null,8,I3)])])])])]),controls:T(()=>[n("div",null,[n("button",{class:"btn btn-primary",disabled:!e.template,onClick:t[0]||(t[0]=b=>i.templateOperation("append"))},[t[2]||(t[2]=n("i",{class:"glyphicon glyphicon-plus"},null,-1)),k(" "+c(e.lang("append")),1)],8,A3),n("button",{class:"btn btn-primary",disabled:!e.template,onClick:t[1]||(t[1]=b=>i.templateOperation("overwrite"))},[t[3]||(t[3]=n("i",{class:"fas fa-exchange-alt"},null,-1)),k(" "+c(e.lang("overwrite")),1)],8,L3)])]),_:1},8,["showModal","onClose","containerStyle"])):u("",!0)}const x3=U(w3,[["render",E3],["__scopeId","data-v-0e99329a"]]);const P3={name:"article-revisions",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate),customFormattedTime:ee(()=>e.getters.customFormattedTime)}},props:{articleId:{type:[String,Number],default:""},from:{type:String,default:""},versionId:{type:[String,Number],default:""}},data(){return{revisionData:[],page:1,showLoader:!1,articleNum:this.articleId}},beforeMount(){this.getRevisions()},created(){window.emitter.on("updateRevisionsData",this.updateRevisions)},watch:{showLoader(e,t){return this.showLoader=e,e}},methods:{subString(e,t=30){return ge(e,t)},goToRevision(e){this.$router.push({path:"/article/revision/"+this.articleId+"/"+e})},formatTime(e){const t=this.customFormattedTime(e,"YYYY-MM-DD HH:mm:ss"),a=Oe(new Date).format("YYYY-MM-DD HH:mm:ss"),r=Oe(a,"YYYY-MM-DD HH:mm:ss").diff(Oe(t,"YYYY-MM-DD HH:mm:ss")),s=Math.floor(r/(24*60*60*1e3)),i=r%(24*60*60*1e3),d=Math.floor(i/(60*60*1e3)),m=r%(60*60*1e3),p=Math.floor(m/(60*1e3)),f=r%(60*1e3),b=Math.floor(f/1e3);return s?s+" days ago":!s&&d?d+" hours ago":!s&&!d&&p?p+" minutes ago":b+" seconds ago"},updateRevisions(){this.showLoader=!0,this.revisionData=[],this.page=1,setTimeout(()=>{this.getRevisions(void 0,!0)},1e3)},getRevisions(e,t=!1){this.showLoader=!0,this.articleNum=this.articleId?this.articleId:ke(window.location.pathname),R.get("/api/article/get-version-data/"+this.articleNum,{params:{page:this.page}}).then(a=>{t?this.revisionData=a.data.message.data:this.revisionData.push(...a.data.message.data),e&&e.loaded(),a.data.message.data.length<10&&e&&e.complete(),this.page++}).catch(a=>{B(a,"article-create"),this.revisionData=[]}).finally(()=>{this.showLoader=!1})}}},R3={class:"card card-light"},F3={class:"card-header"},N3={class:"card-title"},V3={class:"card-tools"},j3={key:0,type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},U3={key:0},B3={class:"todo-list"},z3=["onClick"],H3={class:"badge text-bg-secondary"},W3={key:0,class:"text ms-1"},q3={class:"float-end"},K3=["onClick"],Y3={class:"badge text-bg-secondary"},G3={key:0,class:"text ms-1"},Q3={class:"float-end"},X3={key:1},J3={class:"text-center"};function Z3(e,t,a,r,s,i){const d=g("infinite-loading"),m=Q("tooltip");return o(),l("div",R3,[n("div",F3,[n("h3",N3,c(e.trans("versions")),1),n("div",V3,[s.showLoader?(o(),l("button",j3,t[1]||(t[1]=[n("i",{class:"fas fa-sync-alt"},null,-1)]))):u("",!0)])]),n("div",{class:N(["card-body",a.from=="revision"?"scrollable-rev":"scrollable-revisions"]),id:"revision_scroll",onScroll:t[0]||(t[0]=(...p)=>e.handleScroll&&e.handleScroll(...p))},[s.revisionData.length>0?(o(),l("div",U3,[n("ul",B3,[(o(!0),l(E,null,q(s.revisionData,(p,f)=>(o(),l(E,null,[a.from=="revision"?(o(),l("li",{key:0,class:N(["pointer",a.versionId==p.id?"bg-primary":""]),onClick:b=>i.goToRevision(p.id)},[n("span",H3,c(p.version_number),1),p.user?M((o(),l("span",W3,[k(c(i.subString(p.user.full_name,10)),1)])),[[m,p.user.full_name]]):u("",!0),t[3]||(t[3]=k("  ")),M((o(),l("small",q3,[t[2]||(t[2]=n("i",{class:"far fa-clock"},null,-1)),k(" "+c(i.formatTime(p.created_at)),1)])),[[m,r.formattedTime(p.created_at)]])],10,z3)):(o(),l("li",{key:1,class:"pointer",onClick:b=>i.goToRevision(p.id)},[n("span",Y3,c(p.version_number),1),p.user?M((o(),l("span",G3,[k(c(i.subString(p.user.full_name)),1)])),[[m,p.user.full_name]]):u("",!0),t[5]||(t[5]=k("  ")),n("small",null,[t[4]||(t[4]=n("i",{class:"far fa-clock"},null,-1)),k(" "+c(i.formatTime(p.created_at)),1)]),n("small",Q3,c(r.formattedTime(p.created_at)),1)],8,K3))],64))),256))]),_(d,{onInfinite:i.getRevisions,ref:"infiniteLoading"},{spinner:T(()=>t[6]||(t[6]=[n("span",null,null,-1)])),complete:T(()=>t[7]||(t[7]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])])):u("",!0),!s.showLoader&&!s.revisionData.length?(o(),l("div",X3,[n("h6",J3,c(e.trans("no-records")),1)])):u("",!0)],34)])}const xa=U(P3,[["render",Z3],["__scopeId","data-v-05730ffd"]]);const $3={name:"article-page",description:"article create and edit page",props:{auth:{type:Object,default:()=>{}}},data:()=>({showModal:!1,name:"",link:"",category:[],author:"",template:"",loading:!1,loadingSpeed:4e3,hasDataPopulated:!1,slug:"",radioOptions:[{name:"published",value:1},{name:"draft",value:0}],type:1,visibility_options:[{id:"all_users",name:"All Users"},{id:"logged_in_users",name:"Logged in Users"},{id:"agents",name:"Agents"},{id:"organization_members",name:"Organization Members"}],visible_to:"",buttonVisible:!1,publish_time:new Date,timeOptions:{start:"00:00",step:"00:30",end:"23:30"},seo_title:"",meta_description:"",description:"",seoDesStyle:{width:"0%"},seoDesClass:"",seoStyle:{width:"0%"},seoClass:"",classname:"form-group",progStart:"progress-bar progress-bar-primary progress-bar-striped",progWarn:"progress-bar progress-bar-warning progress-bar-striped",progSuc:"progress-bar progress-bar-success progress-bar-striped",progDan:"progress-bar progress-bar-danger progress-bar-striped",show_err:!1,title:"create_new_article",iconClass:"fas fa-save",btnName:"save",article_id:"",modal_title:"",tag_id:[],showTemplateModal:!1,is_comment_enabled:!0,showComments:!1,summary:"",organization_id:"",showRevisions:!0,showConfirmationModal:!1,message:"article-alert-message",beforeConfirmation:"",buttonName:"Confirm",header:"Overwrite"}),beforeMount(){const e=window.location.pathname;this.getValues(e),this.getCommentStatus();const t=e.split("/");t[t.length-1]!=="edit"&&(this.author={id:this.auth.user_data.id,name:this.auth.user_data.first_name+" "+this.auth.user_data.last_name,email:this.auth.user_data.email,profile_pic:this.auth.user_data.profile_pic})},created(){window.emitter.on("applyTemplate",this.applyTemplate),window.emitter.on("updateConfirmation",this.updatingConfirmation),window.emitter.on("updateDescription",e=>{this.description=e})},methods:{getValues(e){const t=ke(e);e.indexOf("edit")>=0?(this.title="edit_article",this.iconClass="fas fa-sync",this.btnName="update",this.buttonVisible=!0,this.hasDataPopulated=!1,this.article_id=t,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getCommentStatus(){R.get("/kb/settings/getvalue").then(e=>{this.showComments=e.data.data.kbsettings.is_comment_enabled}).catch(e=>{this.showComments=!1})},getInitialValues(e){this.loading=!0,R.get("/api/edit/article/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.article_id=e,this.updateStatesWithData(t.data.message),this.tag_id=t.data.message.article.tags}).catch(t=>{this.loading=!1,B(t,"article-create"),setTimeout(()=>{this.$router.push("/article/list")},4e3)})},updateStatesWithData(e){var t=e.article;this.link=t.slug,this.seoTitleProgress(t.seo_title),this.metaProgress(t.meta_description);const a=this,r=this.$data;Object.keys(e.article).map(s=>{r.hasOwnProperty(s)&&(a[s]=e.article[s])}),this.publish_time=new Date(this.publish_time).toString(),this.seo_title=t.seo_title===""?t.name:t.seo_title,this.meta_description=t.meta_description===""?t.description:t.meta_description,this.summary=this.summary?this.summary.replace(/<br>/g,`
`):"",this.organization_id=t.organization},isValid(){const{errors:e,isValid:t}=t3(this.$data);return!!t},modalMethod(e){this.showModal=!0,this.modal_title=e,this.$store.dispatch("unsetValidationError")},onSubmit(){if(this.classname=this.description===""?"form-group has-error":"form-group",this.show_err=this.description==="",this.isValid()&&this.description!==""){this.loadingSpeed=8e3,this.loading=!0;var e=new FormData;this.article_id!=""&&e.append("articleid",this.article_id),e.append("name",this.name),e.append("slug",this.link),e.append("description",this.description),e.append("category_id",this.category.map(a=>a.id)),this.visible_to==="organization_members"?e.append("organization_id",this.organization_id?this.organization_id.id:""):e.append("organization_id",""),this.showComments&&e.append("is_comment_enabled",this.is_comment_enabled?1:0),this.tag_id.length>0&&e.append("tag_id",this.tag_id.map(a=>a.id)),e.append("author",this.author.id),this.template!=""&&this.template!=null?e.append("template",this.template.id):e.append("template",""),e.append("publish_time",new Date(this.publish_time).toUTCString()),e.append("visible_to",this.visible_to),e.append("type",this.type),e.append("seo_title",this.seo_title),e.append("meta_description",this.meta_description),e.append("summary",this.summary.replace(/\r?\n/g,"<br>"));const t={headers:{"Content-Type":"multipart/form-data"}};R.post("/article",e,t).then(a=>{this.loading=!1,this.showRevisions=!1,X(a,"article-create"),this.article_id===""?setTimeout(()=>this.$router.push({name:"KB Article"}),3e3):(this.getInitialValues(this.article_id),setTimeout(()=>{this.showRevisions=!0},1500))}).catch(a=>{this.loading=!1,B(a,"article-create")})}},newCategory(e){this.category.push(e)},newTag(e){this.tag_id.push(e)},refreshSlug(e){this.link=e},onChange(e,t){if(this[t]=e,!this.buttonVisible&&(t==="name"||t==="slug")){var a=e.replace(/[^\w\s]/gi,"").toLowerCase(),r=a.replace(/_+/g,"");this.link=r.replace(/\s+/g,"-"),this.slug=e}t==="publish_time"&&(this.publish_time=Oe(e).format("YYYY-MM-DD HH:mm:ss")),t==="seo_title"&&this.seoTitleProgress(e),t==="meta_description"&&this.metaProgress(e),t==="author"&&(this[t]=e===null?"":e),t==="visible_to"&&e!="organization_members"&&(this.organization_id="")},templateData(e){this.description=e},seoTitleProgress(e){this.seoStyle.width=e.length/.6+"%";var t=e.length;this.seoClass=t>60?this.progDan:t>25&&t<=50?this.progSuc:t>50&&t<=60?this.progWarn:this.progStart},metaProgress(e){this.seoDesStyle.width=e.length/1.6+"%";var t=e.length;this.seoDesClass=t>160?this.progDan:t>80&&t<=120?this.progSuc:t>120&&t<=160?this.progWarn:this.progStart},onClose(){this.$store.dispatch("unsetValidationError"),this.showModal=!1,this.showConfirmationModal=!1},applyTemplate(e){e.operation==="append"?this.description+=e.data:e.operation==="overwrite"&&(this.showConfirmationModal=!0,this.beforeConfirmation=e.data),this.onTemplateModalClose()},updatingConfirmation(){this.description=this.beforeConfirmation},onTemplateModalClose(){this.showTemplateModal=!1}},components:{"delete-modal":At,"text-field":Se,"perma-link":Et,"dynamic-select":_e,"tree-select":Pt,"add-media":it,"radio-button":Pe,"static-select":Xe,"date-time-field":at,"article-modal":k3,"template-modal":x3,"status-switch":Mt,"article-revisions":xa}},eL={class:"col-sm-12"},tL={key:0,class:"row"},sL={key:1,class:"card card-light"},aL={class:"card-header"},nL={class:"card-title"},iL={class:"card-tools"},oL=["href"],rL={href:"javascript:;",class:"btn-tool dropdown-toggle","data-bs-toggle":"dropdown"},lL={class:"dropdown-menu dropdown-menu-right",role:"menu"},dL={class:"card-body"},cL={class:"row"},uL={class:"row"},hL={class:"row"},mL={key:0,class:"col-sm-3"},pL={for:"status"},gL={class:"ml_7 ps-2"},fL={class:"row"},_L={class:"row"},bL={class:"card card-light"},vL={class:"card-header"},yL={class:"card-title"},kL={class:"card-body"},wL={class:"progress sm col-md-12 p-0",id:"prog"},CL={class:"progress sm col-md-12 p-0",id:"prog"},SL={key:0,class:"col-sm-6"},DL={class:"card-footer"},TL=["disabled"];function ML(e,t,a,r,s,i){const d=g("custom-loader"),m=g("alert"),p=g("text-field"),f=g("perma-link"),b=g("tree-select"),y=g("dynamic-select"),D=g("status-switch"),w=g("add-media"),S=g("static-select"),L=g("date-time-field"),x=g("radio-button"),P=g("article-revisions"),F=g("article-modal"),O=g("template-modal"),j=g("delete-modal"),J=Q("tooltip"),W=Q("focus-first-input");return o(),l("div",eL,[e.hasDataPopulated===!1||e.loading===!0?(o(),l("div",tL,[_(d,{duration:e.loadingSpeed},null,8,["duration"])])):u("",!0),_(m,{componentName:"article-create"}),e.hasDataPopulated===!0?(o(),l("div",sL,[n("div",aL,[n("h3",nL,c(e.trans(e.title)),1),n("div",iL,[e.buttonVisible?M((o(),l("a",{key:0,id:"view_article",class:"btn btn-tool",type:"button",href:e.basePath()+"/show/"+e.link,target:"_blank"},t[5]||(t[5]=[n("i",{class:"fas fa-eye"},null,-1)]),8,oL)),[[J,e.trans("view")]]):u("",!0),e.buttonVisible?M((o(),l("button",{key:1,id:"delete_article",class:"btn btn-tool",type:"button",onClick:t[0]||(t[0]=H=>i.modalMethod("delete"))},t[6]||(t[6]=[n("i",{class:"fas fa-trash"},null,-1)]))),[[J,e.trans("delete")]]):u("",!0),e.buttonVisible?u("",!0):(o(),l(E,{key:2},[M((o(),l("a",rL,t[7]||(t[7]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)]))),[[J,e.trans("add_fields")]]),n("div",lL,[n("a",{class:"dropdown-item text-dark",onClick:t[1]||(t[1]=H=>i.modalMethod("new_category")),href:"javascript:;",id:"add_category"},c(e.trans("add_category")),1),n("a",{class:"dropdown-item text-dark",onClick:t[2]||(t[2]=H=>i.modalMethod("new_tag")),href:"javascript:;"},c(e.trans("add_tag")),1)])],64))])]),n("div",dL,[M((o(),l("div",cL,[_(p,{label:e.lang("name"),value:e.name,type:"text",name:e.showModal?"article_name":"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","name","onChange","placehold"]),_(f,{label:e.trans("perma_link"),value:e.slug,updateSlug:i.refreshSlug,name:"slug",onChange:i.onChange,classname:"col-sm-6",required:!0,link:e.link,disabled:e.buttonVisible},null,8,["label","value","updateSlug","onChange","link","disabled"])])),[[W]]),n("div",uL,[_(b,{label:e.trans("category"),multiple:!0,name:"category",classname:"col-sm-4",apiEndpoint:"/api/dependency/categories",value:e.category,onChange:i.onChange,placeHolder:e.lang("search_or_select"),required:!0,strlength:"25",valueFormat:"array"},null,8,["label","value","onChange","placeHolder"]),_(y,{label:e.trans("author"),multiple:!1,name:"author",classname:"col-sm-4",apiEndpoint:"/api/dependency/agents?meta=true",value:e.author,onChange:i.onChange,required:!0,clearable:!!e.author,strlength:"25"},null,8,["label","value","onChange","clearable"]),_(y,{label:e.trans("tags"),multiple:!0,name:"tag_id",classname:"col-sm-4",apiEndpoint:"/api/dependency/tags",value:e.tag_id,onChange:i.onChange,required:!1,strlength:"25",hint:e.trans("relevant_tags_search")},null,8,["label","value","onChange","hint"])]),n("div",hL,[_(p,{label:e.trans("summary"),value:e.summary,type:"textarea",name:"summary",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-9",required:!0},null,8,["label","value","onChange","placehold"]),e.showComments?(o(),l("div",mL,[n("label",pL,c(e.trans("allow_comments")),1),t[8]||(t[8]=n("br",null,null,-1)),_(D,{name:"is_comment_enabled",value:e.is_comment_enabled,onChange:i.onChange,classname:"float-start",bold:!0},null,8,["value","onChange"])])):u("",!0)]),n("div",gL,[_(w,{description:e.description,from:"article",classname:e.classname,show_error:e.show_err,id:"article_editor",page_name:"kb",name:"description",chunkApi:"/chunk/upload/public",filesApi:"/media/files/public",onInput:i.onChange},{template:T(()=>[n("button",{id:"article__template__button",class:"btn btn-light",onClick:t[3]||(t[3]=()=>e.showTemplateModal=!0)},[t[9]||(t[9]=n("i",{class:"fas fa-align-left","aria-hidden":"true"},null,-1)),k(" "+c(e.trans("select_template")),1)])]),_:1},8,["description","classname","show_error","onInput"])]),n("div",fL,[_(S,{label:e.trans("visibility"),elements:e.visibility_options,name:"visible_to",value:e.visible_to,classname:"col-sm-3",onChange:i.onChange,required:!0},null,8,["label","elements","value","onChange"]),e.visible_to==="organization_members"?(o(),I(y,{key:0,label:e.trans("organization"),multiple:!1,name:"organization_id",classname:"col-sm-3",apiEndpoint:"/api/dependency/organizations",value:e.organization_id,onChange:i.onChange,required:!0,strlength:"20"},null,8,["label","value","onChange"])):u("",!0),_(L,{label:e.trans("publish_immediately"),value:e.publish_time,type:"datetime",name:"publish_time",onChange:i.onChange,"time-picker-options":e.timeOptions,required:!0,format:"MMMM DD YYYY HH:mm",classname:"col-sm-3",clearable:!1,disabled:!1},null,8,["label","value","onChange","time-picker-options"]),_(x,{options:e.radioOptions,label:e.trans("status"),name:"type",value:e.type,onChange:i.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])]),n("div",_L,[n("div",{class:N(e.buttonVisible?"col-sm-6":"col-sm-12")},[n("div",bL,[n("div",vL,[n("h3",yL,c(e.trans("seo")),1)]),n("div",kL,[n("div",null,[_(p,{label:e.trans("seo_title"),value:e.seo_title,type:"text",name:"seo_title",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold"]),n("div",wL,[n("div",{class:N(e.seoClass),style:ne(e.seoStyle)},null,6)])]),n("div",null,[_(p,{label:e.trans("description"),value:e.meta_description,type:"textarea",name:"meta_description",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold"]),n("div",CL,[n("div",{class:N(e.seoDesClass),style:ne(e.seoDesStyle)},null,6)])])])])],2),e.buttonVisible&&e.showRevisions?(o(),l("div",SL,[_(P,{articleId:e.article_id},null,8,["articleId"])])):u("",!0)])]),n("div",DL,[n("button",{type:"button",onClick:t[4]||(t[4]=H=>i.onSubmit()),disabled:e.loading,class:"btn btn-primary"},[n("span",{class:N(e.iconClass)},null,2),k(" "+c(e.trans(e.btnName)),1)],8,TL)]),_(ae,{name:"modal"},{default:T(()=>[e.showModal?(o(),I(F,{key:0,category:e.category,newCategory:i.newCategory,onClose:i.onClose,newTag:i.newTag,showModal:e.showModal,title:e.modal_title,id:e.link},null,8,["category","newCategory","onClose","newTag","showModal","title","id"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[e.showTemplateModal?(o(),I(O,{key:0,onClose:i.onTemplateModalClose,showModal:e.showTemplateModal,"modal-title":e.trans("select_template")},null,8,["onClose","showModal","modal-title"])):u("",!0)]),_:1}),_(ae,{name:"modal"},{default:T(()=>[e.showConfirmationModal?(o(),I(j,{key:0,onClose:i.onClose,showModal:e.showConfirmationModal,from:"template",modalMessage:e.message,buttonText:e.buttonName,header:e.header},null,8,["onClose","showModal","modalMessage","buttonText","header"])):u("",!0)]),_:1})])):u("",!0)])}const qs=U($3,[["render",ML],["__scopeId","data-v-04c6ff1f"]]);const OL={name:"article-version-details",data(){return{articleId:"",versionId:"",loading:!1,versionDetails:"",pageLoad:!1}},beforeMount(){let a=window.location.pathname.split("/").filter(function(r){return parseInt(r)==r});this.articleId=a[0],this.versionId=a[1],this.getVersionDetails()},methods:{restoreVersion(){this.pageLoad=!0,R.get("/api/article/restore-version/"+this.articleId+"/"+this.versionId).then(e=>{X(e,"article-version"),this.pageLoad=!1,setTimeout(()=>{this.$router.push({path:"/article/"+this.articleId+"/edit"})},2e3)}).catch(e=>{B(e,"article-version"),this.pageLoad=!1})},getVersionDetails(){this.loading=!0,R.get("/api/article/version/"+this.articleId+"/"+this.versionId).then(e=>{this.versionDetails=e.data.message,this.loading=!1}).catch(e=>{this.loading=!1,this.versionDetails=""})}},components:{"article-revisions":xa}},IL={class:"col-sm-12"},AL={key:0,class:"row"},LL={class:"row"},EL={class:"card card-light"},xL={class:"card-header"},PL={class:"card-title"},RL={key:0,class:"card-tools"},FL={class:"card-body scrollable-article"},NL={key:0,class:"row"},VL={key:1,class:"row"},jL={class:"col-sm-2"},UL={class:"col-sm-10"},BL=["innerHTML"],zL={class:"col-sm-2"},HL={class:"col-sm-10"},WL=["innerHTML"],qL={class:"col-sm-2"},KL={class:"col-sm-10"},YL=["innerHTML"],GL={key:0,class:"col-sm-4"};function QL(e,t,a,r,s,i){const d=g("custom-loader"),m=g("alert"),p=g("reuse-loader"),f=g("article-revisions");return o(),l("div",IL,[s.pageLoad?(o(),l("div",AL,[_(d)])):u("",!0),_(m,{componentName:"article-version"}),n("div",LL,[n("div",{class:N(s.loading?"col-sm-12":"col-sm-8")},[n("div",EL,[n("div",xL,[n("h3",PL,c(e.trans("article")),1),!s.loading&&s.versionDetails.is_restore?(o(),l("div",RL,[n("button",{type:"button",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=b=>i.restoreVersion())},[t[1]||(t[1]=n("i",{class:"fas fa-reply"},null,-1)),k("  "+c(e.trans("restore")),1)])])):u("",!0)]),n("div",FL,[s.loading?(o(),l("dl",NL,[_(p,{"animation-duration":4e3,size:60})])):u("",!0),s.loading?u("",!0):(o(),l("dl",VL,[s.versionDetails&&s.versionDetails.mod_contents.name?(o(),l(E,{key:0},[n("dt",jL,c(e.trans("name")),1),n("dd",UL,[n("h5",null,[n("span",{innerHTML:s.versionDetails.mod_contents.name},null,8,BL)])])],64)):u("",!0),s.versionDetails&&s.versionDetails.mod_contents.summary?(o(),l(E,{key:1},[n("dt",zL,c(e.trans("summary")),1),n("dd",HL,[n("span",{innerHTML:s.versionDetails.mod_contents.summary},null,8,WL)])],64)):u("",!0),s.versionDetails&&s.versionDetails.mod_contents.description?(o(),l(E,{key:2},[n("dt",qL,c(e.trans("description")),1),n("dd",KL,[n("span",{innerHTML:s.versionDetails.mod_contents.description},null,8,YL)])],64)):u("",!0)]))])])],2),s.loading?u("",!0):(o(),l("div",GL,[_(f,{articleId:s.articleId,from:"revision",versionId:s.versionId},null,8,["articleId","versionId"])]))])])}const XL=U(OL,[["render",QL],["__scopeId","data-v-3fc3140f"]]);const JL={setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},props:{comment:{type:Object,default:()=>{}},updateList:{type:Function,default:()=>{}}},data(){return{isDisabled:!1,showModal:!1,commentId:"",loading:!1}},methods:{subString(e,t=10){return ge(e,t)},viewArticle(e){this.$store.dispatch("setArticleId",e)},updateStatus(e){let t=this.comment.status?"/unapprove/"+e:"/published/"+e;this.loading=!0,this.isDisabled=!0,axios.get(t).then(a=>{this.isDisabled=!1,this.loading=!1,this.updateList(),X(a,"CommentsIndex")}).catch(a=>{this.isDisabled=!1,this.loading=!1,B(res,"CommentsIndex")})},deleteMethod(e){this.commentId=e,this.showModal=!0},onClose(){this.showModal=!1}},components:{"delete-modal":bt}},ZL={class:"article-comment-box"},$L={class:"timeline"},eE={id:"comment_div"},tE={class:"timeline-item",id:"comment_item"},sE={class:"time mt-6px"},aE={class:"timeline-header"},nE={href:"javascript:;"},iE={class:"fas fa-question-circle cursor text-primary"},oE={class:"p-3"},rE={href:"javascript:;"},lE={href:"javascript:;"},dE={key:0},cE=["href"],uE=["href"],hE=["innerHTML"],mE={class:"timeline-footer bt-1"},pE=["disabled"],gE=["href"],fE={key:0,class:"row"};function _E(e,t,a,r,s,i){const d=g("faveo-image-element"),m=g("popover"),p=g("custom-loader"),f=g("delete-modal"),b=Q("tooltip");return o(),l("div",ZL,[n("div",$L,[n("div",eE,[n("div",tE,[n("span",sE,[t[3]||(t[3]=n("i",{class:"far fa-clock"},null,-1)),k(" "+c(r.formattedTime(a.comment.created_at)),1)]),n("h3",aE,[_(d,{id:"proimg","source-url":a.comment.profile_pic,classes:["img-circle img-bordered-sm img-rounder img-30"],"alternative-text":"User Image"},null,8,["source-url"]),M((o(),l("a",nE,[k(" "+c(a.comment.name)+" ",1)])),[[b,a.comment.name]]),_(m,{click:"",arrow:"",placement:"right"},{content:T(()=>[n("div",oE,[n("p",null,[t[4]||(t[4]=n("i",{class:"fas fa-user"},null,-1)),t[5]||(t[5]=k("  ")),M((o(),l("span",rE,[k(c(i.subString(a.comment.name,25)),1)])),[[b,a.comment.name]])]),n("p",null,[t[6]||(t[6]=n("i",{class:"fas fa-envelope"},null,-1)),t[7]||(t[7]=k("  ")),M((o(),l("span",lE,[k(c(i.subString(a.comment.email,25)),1)])),[[b,a.comment.email]])]),a.comment.website!=""?(o(),l("p",dE,[t[8]||(t[8]=n("i",{class:"fas fa-globe"},null,-1)),t[9]||(t[9]=k("  ")),M((o(),l("a",{href:a.comment.website,target:"_blank"},[k(c(i.subString(a.comment.website,25)),1)],8,cE)),[[b,a.comment.website]])])):u("",!0)])]),default:T(()=>[M(n("i",iE,null,512),[[b,e.lang("click_to_see_details")]])]),_:1})]),n("div",{class:N(["timeline-body",{"bg-comment":!a.comment.status}])},[n("h6",null,[t[10]||(t[10]=n("i",{class:"fas fa-newspaper"},null,-1)),t[11]||(t[11]=k("  ")),n("a",{href:e.basePath()+"/show/"+a.comment.article[0].slug,target:"_blank"},c(a.comment.article[0].name),9,uE)]),n("p",{innerHTML:a.comment.comment},null,8,hE)],2),n("div",mE,[M((o(),l("a",{disabled:s.isDisabled,onClick:t[0]||(t[0]=y=>i.updateStatus(a.comment.id)),class:"btn btn-light btn-xs text-dark",href:"javascript:;"},[t[12]||(t[12]=n("i",{class:"fas fa-check"},null,-1)),k(" "+c(a.comment.status?e.lang("unapprove"):e.lang("approve")),1)],8,pE)),[[b,a.comment.status?e.lang("unapprove"):e.lang("approve")]]),M((o(),l("a",{onClick:t[1]||(t[1]=y=>i.viewArticle(a.comment.article[0].id)),target:"_blank",class:"btn btn-xs btn-light text-dark",href:e.basePath()+"/show/"+a.comment.article[0].slug},[t[13]||(t[13]=n("i",{class:"fas fa-eye"},null,-1)),k(" "+c(e.lang("view")),1)],8,gE)),[[b,e.lang("view")]]),M((o(),l("a",{href:"javascript:;",class:"btn btn-xs btn-light text-dark",onClick:t[2]||(t[2]=y=>i.deleteMethod(a.comment.id))},[t[14]||(t[14]=n("i",{class:"fas fa-trash"},null,-1)),k(" "+c(e.lang("delete")),1)])),[[b,e.lang("delete")]])])])])]),s.loading?(o(),l("div",fE,[_(p)])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(f,{key:0,onClose:i.onClose,showModal:s.showModal,alert:"CommentsIndex",apiUrl:"/comment/delete/"+s.commentId},null,8,["onClose","showModal","apiUrl"])):u("",!0)]),_:1})])}const bE=U(JL,[["render",_E],["__scopeId","data-v-bce609ae"]]);const vE={setup(){const e=ue();return{getCommentFilterData:ee(()=>e.getters.getCommentFilterData)}},data(){return{comments_List:[],paramsObj:{},length:0,from:this.getCommentFilterData,perpage:10,pagination:1,records:0,loading:!0,search:"",show:!1,tab:"",calloutText:"",callOutStyle:{display:"none"},filter:2,tabs:[{id:2,title:"all",count:0},{id:1,title:"approved",count:0},{id:0,title:"unapproved",count:0}],commentFilterData:{},pageLoader:!1,isRtl:!1,sortingMenu:[{name:"created_time",order:"asc",value:"created_at",class:"fas fa-sort-amount-down",order_name:"ascending"}]}},created(){this.isRtl=Te(sessionStorage.getItem("is_rtl")),window.emitter.on("updateCommentsList",this.updateData),this.from&&this.from.id!==void 0&&(this.commentFilterData=this.from,this.commentFilterData.to==="all"?(this.filter=2,this.callOutStyle.display="block"):this.commentFilterData.to==="unapprove"?(this.filter=0,this.callOutStyle.display="block"):this.filter=1)},beforeMount(){if(this.from)if(this.from.id){this.calloutText="Comments of ";const e={condition:this.from.to,article_id:this.from.id,filter_by:this.filter};this.commonApi(e)}else this.commonApi();else this.commonApi()},methods:{updateData(){this.pagination=1,this.search="",this.loading=!0,this.paramsObj={},this.commonApi(this.paramsObj)},commonApi(e){var t=e;R.get("/get-comment",{params:t}).then(a=>{this.loading=!1,this.pageLoader=!1,this.comments_List=a.data.message.data,a.data.message.total==0&&(this.show=!0),this.records=a.data.message.total,this.perpage=a.data.message.per_page,this.tabs[0].count=a.data.data.all,this.tabs[1].count=a.data.data.approved,this.tabs[2].count=a.data.data.pending,this.length=a.data.message.total}).catch(a=>{this.pageLoader=!1,this.loading=!1})},handlePageCount(e){this.pageLoader=!0,this.pagination=1,this.paramsObj.pagination=e,setTimeout(()=>{this.from?this.from.id!==void 0?this.commonFunction("pagination",e):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)},100)},sorting(e){this.pageLoader=!0,this.show=!1,this.paramsObj["sort-by"]=e.value,this.paramsObj.order=e.order,this.from?this.from.id!==void 0?this.commonFunction("sort-by",e.value,"order",e.order):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)},comments(e){this.pageLoader=!0,this.tab=e,this.paramsObj.filter_by=e,this.pagination=1,this.paramsObj.page=1,this.from?this.from.id!==void 0?this.commonFunction("filter-by",e):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)},pageChanged(){this.pageLoader=!0;var e=document.getElementById("kb-comments");e.scrollIntoView({behavior:"smooth"}),this.paramsObj.page=this.pagination,this.from?this.from.id!==void 0?this.commonFunction("page",this.pagination):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)},commonFunction(e,t){e==="filter-by"&&(this.filter=t);const a={condition:this.from.to,article_id:this.from.id,filter_by:this.filter};e==="filter-by"?a.page=1:a[e]=t,this.commonApi(a)},seeAll(){this.pageLoader=!0,this.$store.dispatch("commentFilterData",{}),this.paramsObj={},this.paramsObj.filter_by=this.filter,this.pagination=1,this.paramsObj.page=1,this.commonApi(this.paramsObj),this.callOutStyle.display="none"},updateSearchFilter(){this.pageLoader=!0,this.paramsObj["search-option"]=this.search,this.from?this.from.id!==void 0?this.commonFunction("search-option",this.search):this.commonApi(this.paramsObj):this.commonApi(this.paramsObj)}},components:{"comments-box":bE,"kb-sorting":Aa,"data-per-page":La}},yE={class:"col-sm-12"},kE={class:"card card-light"},wE={class:"card-header"},CE={class:"card-title"},SE={class:"card-body",id:"kb-comments"},DE={key:0,class:"row"},TE={class:"col-md-4"},ME={class:"col-md-3 offset-md-5"},OE={class:"d-flex"},IE={class:"mt-6px"},AE=["placeholder"],LE={key:1,class:"mt-2"},EE={key:0,id:"call"},xE={class:"mb-0"},PE={class:"nav nav-tabs",role:"tablist"},RE={class:"nav-item"},FE=["onClick"],NE={class:"badge text-bg-warning"},VE={class:"tab-content"},jE={class:"active tab-pane mt-4"},UE={key:0,class:"comment-page",id:"comments-pagination"},BE={key:1},zE={class:"p-3",style:{"text-align":"center"}},HE={key:2,class:"row"},WE={key:2,class:"row"};function qE(e,t,a,r,s,i){const d=g("alert"),m=g("data-per-page"),p=g("kb-sorting"),f=g("comments-box"),b=g("uib-pagination"),y=g("custom-loader"),D=g("reuse-loader");return o(),l("div",yE,[_(d,{componentName:"CommentsIndex"}),n("div",kE,[n("div",wE,[n("h3",CE,c(e.lang("list_of_comments")),1)]),n("div",SE,[s.loading?u("",!0):(o(),l("div",DE,[n("div",TE,[s.records>0?(o(),l(E,{key:0},[_(m,{ticketper:s.perpage,onMessage:i.handlePageCount},null,8,["ticketper","onMessage"]),_(p,{"sorting-menu":s.sortingMenu,onSort:i.sorting},null,8,["sorting-menu","onSort"])],64)):u("",!0)]),n("div",ME,[n("div",OE,[n("span",IE,c(e.lang("search"))+": ",1),M(n("input",{type:"text",class:"form-control search-field","onUpdate:modelValue":t[0]||(t[0]=w=>s.search=w),placeholder:e.lang("search_here"),onKeyup:t[1]||(t[1]=st((...w)=>i.updateSearchFilter&&i.updateSearchFilter(...w),["enter"]))},null,40,AE),[[Fe,s.search]])])])])),s.loading?u("",!0):(o(),l("div",LE,[n("div",{class:"callout callout-info bg-light border-tbe mb-2 rounded",style:ne(s.callOutStyle)},[s.from&&s.from.name?(o(),l("span",EE,[n("p",xE,[k(c(s.calloutText)+" ",1),n("b",null,c(s.from.name),1),t[5]||(t[5]=k(".   "))]),n("a",{id:"all",href:"javascript:;",onClick:t[2]||(t[2]=(...w)=>i.seeAll&&i.seeAll(...w))},c(e.lang("click_to_see_all")),1)])):u("",!0)],4),n("ul",PE,[(o(!0),l(E,null,q(s.tabs,w=>(o(),l("li",RE,[n("a",{class:N(["nav-link",{active:s.filter===w.id}]),"data-bs-toggle":"pill",role:"tab",href:"javascript:;",onClick:S=>i.comments(w.id),id:"comment_tab"},[k(c(e.lang(w.title))+" ",1),n("span",NE,c(w.count),1)],10,FE)]))),256))]),n("div",VE,[n("div",jE,[s.records>0?(o(),l(E,{key:0},[(o(!0),l(E,null,q(s.comments_List,w=>(o(),I(f,{key:w.id,comment:w,updateList:i.updateData},null,8,["comment","updateList"]))),128)),s.records>10?(o(),l("div",UE,[_(b,{records:s.records,modelValue:s.pagination,"onUpdate:modelValue":t[3]||(t[3]=w=>s.pagination=w),class:"pagination","boundary-links":!0,"per-page":s.perpage,onPaginate:t[4]||(t[4]=w=>i.pageChanged()),options:{chunk:3,chunksNavigation:"scroll"}},null,8,["records","modelValue","per-page"])])):u("",!0)],64)):u("",!0),s.show&&s.records==0?(o(),l("div",BE,[n("p",zE,c(e.lang("no-data-to-show")),1)])):u("",!0),s.pageLoader?(o(),l("div",HE,[_(y)])):u("",!0)])])])),s.loading?(o(),l("div",WE,[_(D)])):u("",!0)])])])}const KE=U(vE,[["render",qE],["__scopeId","data-v-5ad1526d"]]);function YE(e){const{name:t,description:a}=e;let r={name:[t,"isRequired"],description:[a,"isRequired"]};const s=new ye(pe),{errors:i,isValid:d}=s.validate(r);return ve.dispatch("setValidationError",i),{errors:i,isValid:d}}const GE={name:"article-template",description:"Article Template component",data(){return{name:"",status:1,description:"",radioOptions:[{name:"active",value:1},{name:"inactive",value:0}],classname:"form-group",show_err:!1,title:"create_new_article_template",iconClass:"fas fa-save",btnName:"save",loading:!1,loadingSpeed:4e3,hasDataPopulated:!0,template_id:"",buttonVisible:!1,showModal:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=ke(e);e.indexOf("edit")>=0?(this.title="edit_article_template",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.buttonVisible=!0,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,R.get("/api/articletemplate/edit/"+e).then(t=>{this.template_id=e,this.hasDataPopulated=!0,this.loading=!1,this.updateStatesWithData(t.data.message.template)}).catch(t=>{B(t),this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=YE(this.$data);return!!t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loadingSpeed=8e3,this.loading=!0;const e={};this.template_id!=""&&(e.id=this.template_id),e.name=this.name,e.status=this.status,e.description=this.description,R.post("/article/post/template",e).then(t=>{this.loading=!1,X(t,"template-create"),this.template_id===""?setTimeout(()=>this.$router.push({name:"KB Article Template List"}),3e3):this.getInitialValues(this.template_id)}).catch(t=>{this.loading=!1,B(t,"template-create")})}},onClose(){this.$store.dispatch("unsetValidationError"),this.showModal=!1}},components:{"text-field":Se,"radio-button":Pe,"template-modal":bt}},QE={class:"col-sm-12"},XE={key:0,class:"row"},JE={key:1,class:"card card-light"},ZE={class:"card-header"},$E={class:"card-title"},e6={class:"card-tools"},t6={class:"card-body"},s6={class:"row"},a6={class:"row"},n6={class:"card-footer"},i6=["disabled"];function o6(e,t,a,r,s,i){const d=g("custom-loader"),m=g("alert"),p=g("text-field"),f=g("radio-button"),b=g("tiny-editor"),y=g("template-modal"),D=Q("tooltip"),w=Q("focus-first-input");return o(),l("div",QE,[!s.hasDataPopulated||s.loading?(o(),l("div",XE,[_(d,{duration:s.loadingSpeed},null,8,["duration"])])):u("",!0),_(m,{componentName:"template-create"}),s.hasDataPopulated?(o(),l("div",JE,[n("div",ZE,[n("h3",$E,c(e.lang(s.title)),1),n("div",e6,[s.buttonVisible?M((o(),l("a",{key:0,class:"btn-tool",onClick:t[0]||(t[0]=S=>s.showModal=!0),href:"javascript:;"},t[2]||(t[2]=[n("i",{class:"fas fa-trash"},null,-1)]))),[[D,e.lang("delete")]]):u("",!0)])]),n("div",t6,[M((o(),l("div",s6,[_(p,{label:e.lang("name"),value:s.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),_(f,{options:s.radioOptions,label:e.lang("status"),name:"status",value:s.status,onChange:i.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])])),[[w]]),n("div",a6,[_(b,{value:s.description,type:"text",from:"article",onChange:i.onChange,name:"description",id:"template_editor",label:e.lang("description"),classname:"col-sm-12",required:!0,lang:"en"},null,8,["value","onChange","label"])])]),n("div",n6,[n("button",{type:"button",id:"submit_btn",onClick:t[1]||(t[1]=S=>i.onSubmit()),disabled:s.loading,class:"btn btn-primary"},[n("i",{class:N(s.iconClass)},null,2),k(" "+c(e.lang(s.btnName)),1)],8,i6)])])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(y,{key:0,onClose:i.onClose,showModal:s.showModal,apiUrl:"/article/deletetemplate/"+s.template_id,alert:"template-create",redirectUrl:"/article/alltemplate/list"},null,8,["onClose","showModal","apiUrl"])):u("",!0)]),_:1})])}const Ks=U(GE,[["render",o6]]);const r6={name:"article-template-index",description:"Article template table component",data:()=>({columns:["name","status","action"],options:{},apiUrl:"/articletemplate/index"}),beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},texts:{filter:"",limit:""},headings:{name:this.trans("name"),action:this.trans("actions"),status:this.trans("status")},templates:{status:(t,a)=>e.h(ss,{data:a}),action:(t,a)=>e.h(je,{data:a})},columnsClasses:{name:"template-name",status:"template-status",action:"template-action"},sortable:["name","status"],filterable:["name","status"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{sort:t.orderBy?t.orderBy:"id",order:t.ascending?"desc":"asc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.from="agent",a.edit_url="/article/template/"+a.id+"/edit",a.delete_url=e.basePath()+"/article/deletetemplate/"+a.id,a.active=a.active=="1"?"active":"inactive",a)),count:t.message.total}},orderBy:{column:"id",ascending:!0}}}},l6={id:"template-index",class:"col-sm-12"},d6={class:"card card-light"},c6={class:"card-header"},u6={class:"card-title"},h6={class:"card-tools"},m6={class:"card-body",id:"my_art_templates"};function p6(e,t,a,r,s,i){const d=g("alert"),m=g("router-link"),p=g("data-table"),f=Q("tooltip");return o(),l("div",l6,[_(d,{componentName:"dataTableModal"}),n("div",d6,[n("div",c6,[n("h3",u6,c(e.lang("list_of_article_template")),1),n("div",h6,[M((o(),I(m,{class:"btn-tool",to:"/article/create/template"},{default:T(()=>t[0]||(t[0]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[f,e.lang("create_template")]])])]),n("div",m6,[_(p,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"template-index"},null,8,["url","dataColumns","option"])])])])}const g6=U(r6,[["render",p6]]);function f6(e){const{pagination:t}=e;let a={pagination:[t,"isRequired","minValue(10)","maxValue(15)"]};const r=new ye(pe),{errors:s,isValid:i}=r.validate(a);return ve.dispatch("setValidationError",s),{errors:s,isValid:i}}const _6={data(){return{kbsettings:{},status:null,pagination:null,loading:!1,is_comment_enabled:!1}},beforeMount(){this.commonApi()},methods:{onChange(e,t){this[t]=e},commonApi(){this.loading=!0,R.get("kb/settings/getvalue").then(e=>{this.loading=!1,this.kbsettings=e.data.data.kbsettings,this.status=this.kbsettings.status,this.pagination=this.kbsettings.pagination,this.is_comment_enabled=this.kbsettings.is_comment_enabled}).catch(e=>{this.loading=!1})},isValid(){const{errors:e,isValid:t}=f6(this.$data);return t},postData(){if(this.isValid()){this.loading=!0;const e={};e.pagination=this.pagination,e.status=this.status?1:0,e.is_comment_enabled=this.is_comment_enabled?1:0,R.post("postsettings",e).then(t=>{this.$store.dispatch("setAlert",{type:"success",message:"Settings saved successfully",component_name:"KbSettings"}),this.commonApi(),this.loading=!1}).catch(t=>{this.loading=!1})}}},components:{"status-switch":Mt,"number-field":ft}},b6={class:"col-sm-12"},v6={class:"card card-light"},y6={class:"card-header"},k6={class:"card-title"},w6={class:"card-body"},C6={class:"row"},S6={class:"form-group col-sm-2"},D6={for:"status"},T6={class:"form-group col-sm-3"},M6={for:"status"},O6={key:0,class:"row"},I6={class:"card-footer"};function A6(e,t,a,r,s,i){const d=g("alert"),m=g("number-field"),p=g("status-switch"),f=g("custom-loader"),b=Q("focus-first-input");return o(),l("div",b6,[_(d,{componentName:"KbSettings"}),n("div",v6,[n("div",y6,[n("h3",k6,c(e.lang("kb-settings")),1)]),n("div",w6,[M((o(),l("div",C6,[_(m,{label:e.lang("number_of_elements_to_display"),value:s.pagination,name:"pagination",classname:"col-sm-6",required:!0,onChange:i.onChange,placeholder:"n",type:"number",hint:e.lang("number_of_elements_to_display_in_kb")},null,8,["label","value","onChange","hint"]),n("div",S6,[n("label",D6,c(e.lang("status")),1),t[1]||(t[1]=n("span",{style:{color:"red"}}," *",-1)),t[2]||(t[2]=n("br",null,null,-1)),_(p,{name:"status",value:s.status,onChange:i.onChange,classname:"float-start",bold:!0},null,8,["value","onChange"])]),n("div",T6,[n("label",M6,c(e.lang("kb_comments")),1),t[3]||(t[3]=n("br",null,null,-1)),_(p,{name:"is_comment_enabled",value:s.is_comment_enabled,onChange:i.onChange,classname:"float-start",bold:!0},null,8,["value","onChange"])])])),[[b]]),s.loading?(o(),l("div",O6,[_(f,{"animation-duration":4e3,size:60})])):u("",!0)]),n("div",I6,[n("button",{id:"post",onClick:t[0]||(t[0]=(...y)=>i.postData&&i.postData(...y)),class:"btn btn-primary"},[t[4]||(t[4]=n("i",{class:"fas fa-save"},null,-1)),k(" "+c(e.lang("save")),1)])])])])}const L6=U(_6,[["render",A6]]);const E6={name:"category-index",description:"Category table component",data:()=>({columns:["name","description","status","display_order","action"],options:{},apiUrl:"/api/get-category-data"}),beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),description:this.trans("description"),action:this.trans("actions"),display_order:this.trans("display_order"),status:this.trans("status")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},templates:{description:function(t,a){return e.h("div",{title:a.description.replace(/(<([^>]+)>)/g,""),innerHTML:a.description.length>100?a.description.substring(0,100)+"...":a.description})},status:(t,a)=>e.h(ss,{data:a}),action:(t,a)=>e.h(je,{data:a})},columnsClasses:{name:"category-name",description:"category-desc",action:"category-action",display_order:"category-order",status:"category-status"},sortable:["name","description","status","display_order"],filterable:["name","description","status","display_order"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{sort:t.orderBy?t.orderBy:"id",order:t.ascending?"desc":"asc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.from="agent",a.client_view_url=a.status?e.basePath()+"/category-list/"+a.slug:"javascript:;",a.edit_url="/category/"+a.id+"/edit",a.delete_url="/category/delete/"+a.id,a)),count:t.message.total}},orderBy:{column:"id",ascending:!0}}}},x6={id:"category-index",class:"col-sm-12"},P6={class:"card card-light"},R6={class:"card-header"},F6={class:"card-title"},N6={class:"card-tools"},V6={class:"card-body",id:"my_category"};function j6(e,t,a,r,s,i){const d=g("alert"),m=g("router-link"),p=g("data-table"),f=Q("tooltip");return o(),l("div",x6,[_(d,{componentName:"dataTableModal"}),n("div",P6,[n("div",R6,[n("h3",F6,c(e.lang("all_category")),1),n("div",N6,[M((o(),I(m,{class:"btn-tool",to:"/category/create"},{default:T(()=>t[0]||(t[0]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[f,e.lang("create_category")]])])]),n("div",V6,[_(p,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"category-index"},null,8,["url","dataColumns","option"])])])])}const U6=U(E6,[["render",j6]]);function B6(e){const{name:t,display_order:a,description:r,slug:s}=e;let i={name:[t,"isRequired"],display_order:[a,"isRequired"],description:[r,"isRequired"],slug:[s,"isRequired"]};const d=new ye(pe),{errors:m,isValid:p}=d.validate(i);return ve.dispatch("setValidationError",m),{errors:m,isValid:p}}const z6={name:"article-template",description:"Article Template component",data(){return{name:"",status:1,description:"",display_order:"",radioOptions:[{name:"active",value:1},{name:"inactive",value:0}],classname:"form-group",show_err:!1,title:"create_new_category",iconClass:"fas fa-save",btnName:"save",loading:!1,loadingSpeed:4e3,hasDataPopulated:!0,category_id:"",buttonVisible:!1,showModal:!1,slug:"",link:"",parent_category:null,endPoint:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=ke(e);e.indexOf("edit")>=0?(this.title="edit_category",this.iconClass="fas fa-sync-alt",this.btnName="update",this.hasDataPopulated=!1,this.buttonVisible=!0,this.endPoint="/api/dependency/categories?category_id="+t,this.getInitialValues(t)):(this.endPoint="/api/dependency/categories",this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,R.get("/api/edit/category/"+e).then(t=>{this.category_id=e,this.hasDataPopulated=!0,this.loading=!1,this.updateStatesWithData(t.data.message.category)}).catch(t=>{B(t),this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){this.link=e.slug;const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=B6(this.$data);return!!t},onChange(e,t){if(this[t]=e,!this.buttonVisible&&(t==="name"||t==="slug")){var a=e.replace(/[^\w\s]/gi,"").toLowerCase(),r=a.replace(/_+/g,"");this.link=r.replace(/\s+/g,"-"),this.slug=e}},onSubmit(){if(this.isValid()){this.loadingSpeed=8e3,this.loading=!0;const e={};this.category_id!=""&&(e.id=this.category_id),e.name=this.name,e.status=this.status,e.description=this.description,e.display_order=this.display_order,e.slug=this.link,e.parent=this.parent_category?this.parent_category.id:"",R.post("/api/category/create",e).then(t=>{this.loading=!1,X(t,"category-create"),this.category_id===""?setTimeout(()=>this.$router.push({name:"KB Category Index"}),3e3):this.getInitialValues(this.category_id)}).catch(t=>{this.loading=!1,B(t,"category-create")})}},refreshSlug(e){this.link=e},onClose(){this.$store.dispatch("unsetValidationError"),this.showModal=!1}},components:{"text-field":Se,"number-field":ft,"radio-button":Pe,"category-modal":bt,"perma-link":Et,"tree-select":Pt}},H6={class:"col-sm-12"},W6={key:0,class:"row"},q6={key:1,class:"card card-light"},K6={class:"card-header"},Y6={class:"card-title"},G6={class:"card-tools"},Q6=["disabled","href","target"],X6={class:"card-body"},J6={class:"row"},Z6={class:"row"},$6={class:"row"},e5={class:"card-footer"},t5=["disabled"];function s5(e,t,a,r,s,i){const d=g("custom-loader"),m=g("alert"),p=g("text-field"),f=g("perma-link"),b=g("tree-select"),y=g("number-field"),D=g("radio-button"),w=g("category-modal"),S=Q("tooltip"),L=Q("focus-first-input");return o(),l("div",H6,[s.hasDataPopulated===!1||s.loading===!0?(o(),l("div",W6,[_(d,{duration:s.loadingSpeed},null,8,["duration"])])):u("",!0),_(m,{componentName:"category-create"}),s.hasDataPopulated===!0?(o(),l("div",q6,[n("div",K6,[n("h3",Y6,c(e.lang(s.title)),1),n("div",G6,[s.buttonVisible?M((o(),l("a",{key:0,id:"view_category",class:"btn-tool",disabled:!s.status,href:s.status?e.basePath()+"/category-list/"+s.link:"javascript:;",target:s.status?"_blank":""},t[2]||(t[2]=[n("i",{class:"fa fa-eye"},null,-1)]),8,Q6)),[[S,e.lang("view")]]):u("",!0),s.buttonVisible?M((o(),l("a",{key:1,id:"delete_category",class:"btn-tool",onClick:t[0]||(t[0]=x=>s.showModal=!0),href:"javascript:;"},t[3]||(t[3]=[n("i",{class:"fas fa-trash"},null,-1)]))),[[S,e.lang("delete")]]):u("",!0)])]),n("div",X6,[M((o(),l("div",J6,[_(p,{label:e.trans("name"),value:s.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),_(f,{label:e.trans("perma_link"),value:s.slug,updateSlug:i.refreshSlug,name:"slug",onChange:i.onChange,from:"category",classname:"col-sm-6",required:!0,link:s.link,disabled:s.buttonVisible},null,8,["label","value","updateSlug","onChange","link","disabled"])])),[[L]]),n("div",Z6,[_(b,{label:e.trans("parent"),multiple:!1,name:"parent_category",classname:"col-sm-6",apiEndpoint:s.endPoint,value:s.parent_category,onChange:i.onChange,placeHolder:e.trans("search_or_select"),required:!1,strlength:"45"},null,8,["label","apiEndpoint","value","onChange","placeHolder"]),_(y,{label:e.lang("display_order"),value:s.display_order,name:"display_order",classname:"col-sm-3",onChange:i.onChange,placeholder:"n",type:"number",required:!0},null,8,["label","value","onChange"]),_(D,{options:s.radioOptions,label:e.lang("status"),name:"status",value:s.status,onChange:i.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])]),n("div",$6,[_(p,{label:e.lang("description"),value:s.description,type:"textarea",name:"description",rows:"8",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold"])])]),n("div",e5,[n("button",{type:"button",id:"submit_btn",onClick:t[1]||(t[1]=x=>i.onSubmit()),disabled:s.loading,class:"btn btn-primary"},[n("i",{class:N(s.iconClass)},null,2),k(" "+c(e.lang(s.btnName)),1)],8,t5)])])):u("",!0),_(ae,{name:"modal"},{default:T(()=>[s.showModal?(o(),I(w,{key:0,onClose:i.onClose,showModal:s.showModal,apiUrl:"/category/delete/"+s.category_id,alert:"category-create",redirectUrl:"/category"},null,8,["onClose","showModal","apiUrl"])):u("",!0)]),_:1})])}const Ys=U(z6,[["render",s5]]);const a5={name:"pages-index",description:"Pages table component",setup(){const e=ue();return{formattedTime:ee(()=>e.getters.formattedTime),formattedDate:ee(()=>e.getters.formattedDate)}},data:()=>({columns:["name","status","created_at","action"],options:{},apiUrl:"api/get-pages-data"}),beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),action:this.trans("actions"),status:this.trans("status"),created_at:this.trans("created_at")},columnsClasses:{name:"page-name",action:"page-action",created_at:"page-created",status:"page-status"},templates:{status:function(t,a){let r=e.h("span",{class:a.status===1?"btn btn-success btn-sm":"btn btn-danger btn-sm"},a.status===1?"published":"draft");return e.h("a",{},[r])},action:(t,a)=>e.h(je,{data:a}),created_at(t,a){return e.formattedTime(a.created_at)}},sortable:["name","status","created_at"],filterable:["name","status","created_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{sort:t.orderBy?t.orderBy:"id",order:t.ascending?"desc":"asc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.from="agent",a.client_view_url=a.status?e.basePath()+"/pages/"+a.slug:"javascript:;",a.edit_url="/page/"+a.id+"/edit",a.delete_url="/page/delete/"+a.id,a)),count:t.message.total}},orderBy:{column:"id",ascending:!0}}}},n5={id:"pages-index",class:"col-sm-12"},i5={class:"card card-light"},o5={class:"card-header"},r5={class:"card-title"},l5={class:"card-tools"},d5={class:"card-body",id:"my_pages"};function c5(e,t,a,r,s,i){const d=g("alert"),m=g("router-link"),p=g("data-table"),f=Q("tooltip");return o(),l("div",n5,[_(d,{componentName:"dataTableModal"}),n("div",i5,[n("div",o5,[n("h3",r5,c(e.lang("list_of_pages")),1),n("div",l5,[M((o(),I(m,{class:"btn-tool",to:"/page/create"},{default:T(()=>t[0]||(t[0]=[n("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[f,e.lang("create_pages")]])])]),n("div",d5,[_(p,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"pages-index"},null,8,["url","dataColumns","option"])])])])}const u5=U(a5,[["render",c5]]);function h5(e){const{name:t,visible_to:a,slug:r}=e;let s={name:[t,"isRequired"],visible_to:[a,"isRequired"],slug:[r,"isRequired"]};const i=new ye(pe),{errors:d,isValid:m}=i.validate(s);return ve.dispatch("setValidationError",d),{errors:d,isValid:m}}const m5={name:"kb-page-component",description:"page create and edit page",data:()=>({showModal:!1,name:"",link:"",loading:!1,loadingSpeed:4e3,hasDataPopulated:!0,slug:"",radioOptions:[{name:"published",value:1},{name:"draft",value:0}],status:1,visibility_options:[{name:"public",value:1},{name:"private",value:0}],visibility:1,buttonVisible:!1,seo_title:"",meta_description:"",description:"",seoDesStyle:{width:"0%"},seoDesClass:"",seoStyle:{width:"0%"},seoClass:"",classname:"form-group",progStart:"progress-bar progress-bar-primary progress-bar-striped",progWarn:"progress-bar progress-bar-warning progress-bar-striped",progSuc:"progress-bar progress-bar-success progress-bar-striped",progDan:"progress-bar progress-bar-danger progress-bar-striped",show_err:!1,title:"create_new_page",iconClass:"fas fa-save",btnName:"save",page_id:"",modal_title:""}),beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=ke(e);e.indexOf("edit")>=0?(this.title="edit_page",this.iconClass="fas fa-sync",this.btnName="update",this.buttonVisible=!0,this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,R.get("/api/edit/page/"+e).then(t=>{this.page_id=e,this.hasDataPopulated=!0,this.loading=!1,this.updateStatesWithData(t.data.message.page)}).catch(t=>{B(t),this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){this.link=e.slug,this.seoTitleProgress(e.seo_title),this.metaProgress(e.meta_description);const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),this.seo_title=e.seo_title===""?e.name:e.seo_title,this.meta_description=e.meta_description===""?e.description:e.meta_description},isValid(){const{errors:e,isValid:t}=h5(this.$data);return!!t},modalMethod(e){this.showModal=!0,this.$store.dispatch("unsetValidationError")},onSubmit(){if(this.classname=this.description===""?"form-group has-error":"form-group",this.show_err=this.description==="",this.isValid()&&this.description!=""){this.loadingSpeed=8e3,this.loading=!0;var e=new FormData;this.page_id!=""&&e.append("pageid",this.page_id),e.append("name",this.name),e.append("slug",this.link),e.append("description",this.description),e.append("visibility",this.visibility),e.append("status",this.status),e.append("seo_title",this.seo_title),e.append("meta_description",this.meta_description);const t={headers:{"Content-Type":"multipart/form-data"}};R.post("/api/page/create",e,t).then(a=>{this.loading=!1,X(a,"page-create"),this.page_id===""?setTimeout(()=>this.$router.push({name:"KB Pages Index"}),3e3):this.getInitialValues(this.page_id)}).catch(a=>{this.loading=!1,B(a,"page-create")})}},onChange(e,t){if(this[t]=e,t==="name"||t==="slug"){var a=e.replace(/[^\w\s]/gi,"").toLowerCase(),r=a.replace(/_+/g,"");this.link=r.replace(/\s+/g,"-"),this.slug=e}t==="seo_title"&&this.seoTitleProgress(e),t==="meta_description"&&this.metaProgress(e)},seoTitleProgress(e){this.seoStyle.width=e.length/.6+"%";var t=e.length;this.seoClass=t>60?this.progDan:t>25&&t<=50?this.progSuc:t>50&&t<=60?this.progWarn:this.progStart},metaProgress(e){this.seoDesStyle.width=e.length/1.6+"%";var t=e.length;this.seoDesClass=t>160?this.progDan:t>80&&t<=120?this.progSuc:t>120&&t<=160?this.progWarn:this.progStart},onClose(){this.$store.dispatch("unsetValidationError"),this.showModal=!1}},components:{"text-field":Se,"perma-link":Et,"add-media":it,"radio-button":Pe,"static-select":Xe,"page-modal":bt}},p5={class:"col-sm-12"},g5={key:0,class:"row"},f5={key:1,class:"card card-light"},_5={class:"card-header"},b5={class:"card-title"},v5={class:"card-tools"},y5=["href","target","disabled"],k5={class:"card-body"},w5={class:"row"},C5={class:"ml_7 ms-1"},S5={class:"row mb-4"},D5={class:"card card-light"},T5={class:"card-header"},M5={class:"card-title"},O5={class:"card-body"},I5={class:"progress sm col-md-12 p-0",id:"prog"},A5={class:"progress sm col-md-12 p-0",id:"prog"},L5={class:"card-footer"},E5=["disabled"];function x5(e,t,a,r,s,i){const d=g("custom-loader"),m=g("alert"),p=g("text-field"),f=g("perma-link"),b=g("add-media"),y=g("radio-button"),D=g("page-modal"),w=Q("tooltip"),S=Q("focus-first-input");return o(),l("div",p5,[!e.hasDataPopulated||e.loading?(o(),l("div",g5,[_(d,{duration:e.loadingSpeed},null,8,["duration"])])):u("",!0),_(m,{componentName:"page-create"}),e.hasDataPopulated===!0?(o(),l("div",f5,[n("div",_5,[n("h3",b5,c(e.lang(e.title)),1),n("div",v5,[e.buttonVisible?M((o(),l("a",{key:0,id:"view_page",class:"btn btn-tool",type:"button",href:e.status?e.basePath()+"/pages/"+e.link:"javascript:;",target:e.status?"_blank":"",disabled:!e.status},t[2]||(t[2]=[n("i",{class:"fas fa-eye"},null,-1)]),8,y5)),[[w,e.lang("view")]]):u("",!0),e.buttonVisible?M((o(),l("button",{key:1,id:"delete_page",class:"btn btn-tool",type:"button",onClick:t[0]||(t[0]=L=>i.modalMethod("delete_page"))},t[3]||(t[3]=[n("i",{class:"fas fa-trash"},null,-1)]))),[[w,e.lang("delete")]]):u("",!0)])]),n("div",k5,[M((o(),l("div",w5,[_(p,{label:e.lang("name"),value:e.name,type:"text",name:"name",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),_(f,{label:e.lang("perma_link"),value:e.slug,name:"slug",onChange:i.onChange,classname:"col-sm-6",required:!0,link:e.link},null,8,["label","value","onChange","link"])])),[[S]]),n("div",C5,[_(b,{description:e.description,classname:e.classname,show_error:e.show_err,from:"article",id:"pages-editor",page_name:"page",name:"description",onInput:i.onChange,chunkApi:"/chunk/upload/public",filesApi:"/media/files/public"},null,8,["description","classname","show_error","onInput"])]),n("div",S5,[_(y,{options:e.visibility_options,label:e.lang("visibility"),name:"visibility",value:e.visibility,onChange:i.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"]),_(y,{options:e.radioOptions,label:e.lang("status"),name:"status",value:e.status,onChange:i.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),n("div",D5,[n("div",T5,[n("h3",M5,c(e.lang("seo")),1)]),n("div",O5,[n("div",null,[_(p,{label:e.lang("seo_title"),value:e.seo_title,type:"text",name:"seo_title",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold"]),n("div",I5,[n("div",{class:N(e.seoClass),style:ne(e.seoStyle)},null,6)])]),n("div",null,[_(p,{label:e.lang("description"),value:e.meta_description,type:"textarea",name:"meta_description",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold"]),n("div",A5,[n("div",{class:N(e.seoDesClass),style:ne(e.seoDesStyle)},null,6)])])])])]),n("div",L5,[n("button",{type:"button",onClick:t[1]||(t[1]=(...L)=>i.onSubmit&&i.onSubmit(...L)),disabled:e.loading,class:"btn btn-primary"},[n("span",{class:N(e.iconClass)},null,2),k(" "+c(e.lang(e.btnName)),1)],8,E5)]),_(ae,{name:"modal"},{default:T(()=>[e.showModal?(o(),I(D,{key:0,onClose:i.onClose,showModal:e.showModal,apiUrl:"/page/delete/"+e.page_id,alert:"page-create",redirectUrl:"/page"},null,8,["onClose","showModal","apiUrl"])):u("",!0)]),_:1})])):u("",!0)])}const Gs=U(m5,[["render",x5]]);const P5={name:"search-result",components:{"status-switch":Mt},data(){return{searchResults:"",tabs:[],tab:this.$route&&this.$route.query&&this.$route.query.type,loading:!0,next_cursor:"",selectAllText:"",tickets:[],contacts:[],articles:[],filterParams:[],searchedText:"",showLoader:!1,searchBy:[],apiUrl:"",ticketCount:"",contactCount:"",articleCount:""}},beforeMount(){this.$route&&this.$route.query&&this.$route.query.type&&this.getCountsAndData()},mounted(){this.updateSelectAllText(),this.$nextTick(()=>{this.$refs.searchInput&&setTimeout(()=>{this.$refs.searchInput.focus()},100)})},computed:{...pt(["formattedDate"])},methods:{preventToCloseBox(e){e.stopPropagation()},subString(e,t=30){return ge(e,t)},callFilterData(){this.getFilterParams(),this.updateSelectAllText()},onChange(e,t){this[t]=e;const a=this.searchBy.find(r=>r.id===t);if(a)if(e)this.filterParams.includes(a.id)||this.filterParams.push(a.id);else{const r=this.filterParams.indexOf(a.id);r>-1&&this.filterParams.splice(r,1)}this.updateSelectAllText()},toggleSelectAll(){this.selectAllText==="Select All"?(this.selectAllText="Deselect All",this.searchBy.forEach(e=>{e.is_selected=!0,this.filterParams.includes(e.id)||this.filterParams.push(e.id)})):(this.selectAllText="Select All",this.searchBy.forEach(e=>{e.is_selected=!1;const t=this.filterParams.indexOf(e.id);t>-1&&this.filterParams.splice(t,1)}))},updateSelectAllText(){this.filterParams.length===0?this.selectAllText="Select All":this.filterParams.length===this.searchBy.length?this.selectAllText="Deselect All":this.selectAllText="Deselect All"},getFilterParams(){this.showLoader=!0,R.get("/agent/search-preferences").then(e=>{this.searchBy=e.data.data,this.showLoader=!1,this.filterParams=[];for(const t of this.searchBy)t.is_selected&&this.filterParams.push(t.id);this.updateSelectAllText()}).catch(e=>{this.showLoader=!1,B(e)})},saveFilters(){this.searchedText===""&&this.$route.query.endpoint===""&&(this.tabs=[{id:"tickets",title:"Tickets",count:0},{id:"contacts",title:"Contacts",count:0},{id:"articles",title:"Articles",count:0}],this.ticketCount=0,this.contactCount=0,this.articleCount=0);const e={"filter-ids":[...this.filterParams]};this.loading=!0,R.post("/agent/search-preferences",e).then(t=>{this.loading=!1,this.searchedText.length===0&&this.$route&&this.$route.query&&this.$route.query.type?(this[this.tab]=[],this.getCountsAndData()):this.searchData(),X(t,"search-result")}).catch(t=>{this.loading=!1,B(t,"search-result")})},async getCountsAndData(){try{await this.getCounts(),await this.getDataFromServer()}catch(e){this.handleError(e)}},async getCounts(){try{if(this.loading=!0,this.searchedText){let t=encodeURIComponent(this.searchedText);this.apiUrl=`/search-all?search-query=${t}`}else this.$route.query.endpoint=this.$route.query.endpoint.replace(`category[]=${this.$route.query.type}`,""),this.apiUrl=this.$route.query.endpoint;const e=await R.get(this.apiUrl);this.searchResults=e.data.data,this.ticketCount=this.searchResults.tickets?this.searchResults.tickets.total:0,this.contactCount=this.searchResults.contacts?this.searchResults.contacts.total:0,this.articleCount=this.searchResults.articles?this.searchResults.articles.total:0,this.tabs=[{id:"tickets",title:"Tickets",count:this.searchResults.tickets?this.searchResults.tickets.total:0},{id:"contacts",title:"Contacts",count:this.searchResults.contacts?this.searchResults.contacts.total:0},{id:"articles",title:"Articles",count:this.searchResults.articles?this.searchResults.articles.total:0}],this.loading=!1}catch(e){this.loading=!1,B(e)}},searchData(){this.searchedText.length>0&&(this.$route.query.endpoint="",this[this.tab]=[],this.next_cursor="",this.getCountsAndData())},loadData(e){e!==this.tab&&(this.tab=e,this.next_cursor="",this.tickets=[],this.contacts=[],this.articles=[],this.searchedText===""&&this.$route.query.endpoint===""&&(this.tabs=[{id:"tickets",title:"Tickets",count:0},{id:"contacts",title:"Contacts",count:0},{id:"articles",title:"Articles",count:0}],this.ticketCount=0,this.contactCount=0,this.articleCount=0),(this.searchedText||this.$route.query.endpoint)&&this.getCountsAndData())},async getDataFromServer(e){try{this.loading=!0;let t={cursor:this.next_cursor};if(this.searchedText){let s=encodeURIComponent(this.searchedText);this.apiUrl=`/search-all?search-query=${s}&category[]=${this.tab}`}else this.$route.query.endpoint=this.$route.query.endpoint.replace(`category[]=${this.$route.query.type}`,""),this.apiUrl=this.$route.query.endpoint,t["category[]"]=this.tab;const a=await R.get(this.apiUrl,{params:t}),r=a.data.data[this.tab].data.data;this[this.tab].push(...r),e&&e.loaded(),r.length<10&&e&&e.complete(),this.next_cursor=a.data.data[this.tab].data.next_cursor,this.loading=!1}catch{this[this.tab]=[],this.loading=!1}}}},R5={class:"col-sm-12 mb-2"},F5={class:"input-group input-group-lg"},N5=["placeholder"],V5={class:"col-sm-12"},j5={key:0,class:"row"},U5={class:"card card-light"},B5={class:"card-body"},z5={class:"nav nav-tabs",id:"search-result-tabs",role:"tablist"},H5={class:"nav-item text-md"},W5=["onClick"],q5={class:"badge text-bg-warning"},K5={id:"filter-list",class:"search-filter"},Y5={class:"btn-group float-end"},G5={class:"dropdown-menu dropdown-menu-xl dropdown-menu-right dropdown-position"},Q5={key:0,class:"mb-1 mt-1"},X5={key:1,class:"card search-by"},J5={class:"card-body pt-2 pb-2 pe-1"},Z5={class:"scrollable-ul",id:"activity_scroll"},$5={class:"card-footer p-2"},ex={class:"btn btn-light pt-1 pb-1"},tx={class:"tab-content"},sx={class:"active tab-pane mt-4 scrollable-area"},ax={class:"row ticket-box"},nx={class:"col-md-12 col-sm-12 col-12"},ix={id:"tickets-expanded"},ox={class:"unanswered"},rx={id:"ticket_user",style:{width:"1%"}},lx={class:"user-image"},dx={class:"name td-ticket-details"},cx={class:"text-gray"},ux={key:0,class:"text-primary"},hx={class:"text-primary"},mx={class:"td-ticket-status hideForList"},px={class:"source-icon hideForList text-muted text-sm"},gx={key:1,class:"text-center"},fx={class:"mailbox-messages mailinbox"},_x={class:"row ticket-box"},bx={class:"col-md-12 col-sm-12 col-12"},vx={id:"tickets-expanded"},yx={class:"unanswered"},kx={id:"ticket_user",style:{width:"1%"}},wx={class:"user-image"},Cx={class:"name td-ticket-emails"},Sx={class:"text-gray"},Dx={class:"td-username"},Tx={class:"text-primary"},Mx={class:"source-icon hideForList text-muted text-sm"},Ox={key:1,class:"text-center"},Ix={class:"row ticket-box"},Ax={class:"col-md-12 col-sm-12 col-12"},Lx={id:"tickets-expanded"},Ex={class:"unanswered"},xx={class:"name td-ticket-details articles"},Px=["href"],Rx={class:"text-primary"},Fx={class:"source-icon hideForList text-muted text-sm"},Nx={key:1,class:"text-center"};function Vx(e,t,a,r,s,i){const d=g("alert"),m=g("custom-loader"),p=g("reuse-loader"),f=g("status-switch"),b=g("faveo-image-element"),y=g("router-link"),D=g("infinite-loading"),w=Q("tooltip");return o(),l(E,null,[n("div",R5,[_(d,{componentName:"search-result"}),n("div",F5,[M(n("input",{"onUpdate:modelValue":t[0]||(t[0]=S=>s.searchedText=S),type:"search",ref:"searchInput",class:"form-control form-control-lg",placeholder:e.trans("search"),onKeyup:t[1]||(t[1]=st(S=>i.searchData(),["enter"])),autofocus:""},null,40,N5),[[Fe,s.searchedText,void 0,{trim:!0}]]),n("button",{type:"submit",class:"btn btn-lg btn-light",onClick:t[2]||(t[2]=S=>i.searchData())},t[8]||(t[8]=[n("i",{class:"fa fa-search"},null,-1)]))])]),n("div",V5,[s.loading?(o(),l("div",j5,[_(m,{duration:4e3})])):u("",!0),n("div",U5,[n("div",B5,[n("ul",z5,[(o(!0),l(E,null,q(s.tabs,S=>(o(),l("li",H5,[n("a",{class:N(["nav-link",{active:e.$route.query.type===S.id}]),"data-bs-toggle":"pill",role:"tab",href:"javascript:;",onClick:L=>i.loadData(S.id)},[k(c(S.title)+" ",1),n("span",q5,c(S.count),1)],10,W5)]))),256)),n("div",K5,[n("div",Y5,[n("span",{type:"button",class:"dropdown-toggle pe-4","data-bs-toggle":"dropdown","aria-expanded":"true",id:"dropdown-menu",onClick:t[3]||(t[3]=S=>i.callFilterData())},t[9]||(t[9]=[n("i",{class:"fas fa-cog filter-icon pt-2"},null,-1)])),n("div",G5,[s.showLoader?(o(),l("div",Q5,[_(p,{"animation-duration":6e3,size:30})])):u("",!0),s.showLoader?u("",!0):(o(),l("div",X5,[n("div",{class:"card-header",onClick:t[5]||(t[5]=(...S)=>i.preventToCloseBox&&i.preventToCloseBox(...S))},[n("div",null,[n("b",null,c(e.trans("search_by")),1),t[10]||(t[10]=k()),n("a",{class:"select-btn float-end",onClick:t[4]||(t[4]=(...S)=>i.toggleSelectAll&&i.toggleSelectAll(...S))},c(s.selectAllText),1)])]),n("div",J5,[n("div",Z5,[(o(!0),l(E,null,q(s.searchBy,S=>(o(),l("div",{key:S,onClick:t[6]||(t[6]=(...L)=>i.preventToCloseBox&&i.preventToCloseBox(...L))},[k(c(S.label)+" ",1),_(f,{name:S.id,onChange:i.onChange,value:S.is_selected,classname:"toggle_button float-end"},null,8,["name","onChange","value"]),t[11]||(t[11]=k()),t[12]||(t[12]=n("hr",null,null,-1))]))),128))])]),n("div",$5,[n("div",{class:"btn btn-primary float-end pt-1 pb-1",onClick:t[7]||(t[7]=S=>i.saveFilters())},[t[13]||(t[13]=n("i",{class:"fas fa-save"},null,-1)),k(" "+c(e.trans("save")),1)]),n("div",ex,[t[14]||(t[14]=n("i",{class:"fas fa-times"},null,-1)),k(" "+c(e.trans("cancel")),1)])])]))])])])]),n("div",tx,[n("div",sx,[s.tab==="tickets"?(o(),l(E,{key:0},[s.tickets&&s.tickets.length?(o(),l(E,{key:0},[(o(!0),l(E,null,q(s.tickets,S=>(o(),l("div",{key:S,class:"mailbox-messages mailinbox"},[n("div",ax,[n("div",nx,[n("table",ix,[n("tbody",null,[n("tr",ox,[n("td",rx,[n("div",lx,[_(b,{id:"size-30","source-url":S.user.profile_pic,"img-width":35,"img-height":35,"alternative-text":"User Image"},null,8,["source-url"])])]),n("td",dx,[M((o(),I(y,{to:S.view_url,id:"first_thread_title"},{default:T(()=>[n("span",cx," [#"+c(S.ticket_number)+"]",1),t[15]||(t[15]=k("   ")),S.first_thread&&S.first_thread.title?(o(),l("span",ux,c(S.first_thread.title.length>30?S.first_thread.title.substring(0,30)+"...":S.first_thread&&S.first_thread.title?S.first_thread.title:"---"),1)):u("",!0),n("span",hx," ("+c(S.thread_count)+") ",1)]),_:2},1032,["to"])),[[w,S.first_thread&&S.first_thread.title?S.first_thread.title:"---"]])]),n("td",mx,[n("span",{class:"badge text-white font-weight-lighter",style:ne({background:S.priority.priority_color+"!important"})},c(S.priority.name),5)]),n("td",null,[M(n("i",{class:N(S.statuses.icon),id:"ticket-source-icon",style:ne({color:S.statuses.icon_color})},null,6),[[w,e.lang("ticket_is")+S.statuses.name]]),M(n("i",{class:N([S.sources.css_class,"ps-3"]),id:"ticket-source-icon"},null,2),[[w,e.lang("ticket_is_generated_via")+S.sources.name]])]),n("td",px,[t[16]||(t[16]=n("i",{class:"far fa-clock me-1"},null,-1)),k(c(e.formattedDate(S.created_at)),1)])])])])])])]))),128)),s.next_cursor?(o(),I(D,{key:0,onInfinite:i.getDataFromServer},{spinner:T(()=>t[17]||(t[17]=[n("span",null,null,-1)])),complete:T(()=>t[18]||(t[18]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])):u("",!0)],64)):u("",!0),!s.loading&&s.ticketCount===0?(o(),l("div",gx,c(e.trans("no-records")),1)):u("",!0)],64)):u("",!0),s.tab==="contacts"?(o(),l(E,{key:1},[s.contacts&&s.contacts.length?(o(),l(E,{key:0},[(o(!0),l(E,null,q(s.contacts,S=>(o(),l("div",fx,[n("div",_x,[n("div",bx,[n("table",vx,[n("tbody",null,[n("tr",yx,[n("td",kx,[n("div",wx,[_(b,{id:"size-30","source-url":S.profile_pic,"img-width":35,"img-height":35,"alternative-text":"User Image"},null,8,["source-url"])])]),n("td",Cx,[_(y,{to:S.view_url,id:"contact_name"},{default:T(()=>[n("span",Sx,"["+c(S.email?S.email:S.user_name?S.user_name.slice(0,12)+"...":S.user_name)+"]",1),t[19]||(t[19]=k("   "))]),_:2},1032,["to"])]),n("td",Dx,[_(y,{to:S.view_url,id:"contact_name"},{default:T(()=>[M((o(),l("span",Tx,[k(c(S.full_name),1)])),[[w,S.full_name]])]),_:2},1032,["to"])]),n("td",null,[M(n("i",{class:N([{success:S.email_verified===!0,danger:S.email_verified===!1},"fas fa-envelope"]),id:"ticket-source-icon"},null,2),[[w,S.email_verified===!0?e.lang("user email is verified"):e.lang("user has not verified email")]]),M(n("i",{class:N([{success:S.mobile_verified===!0,danger:S.mobile_verified===!1},"fas fa-mobile-alt ps-3"]),id:"ticket-source-icon"},null,2),[[w,S.mobile_verified===!0?e.lang("user mobile is verified"):e.lang("user has not verified mobile")]])]),n("td",Mx,[t[20]||(t[20]=n("i",{class:"far fa-clock me-1"},null,-1)),k(c(e.formattedDate(S.created_at)),1)])])])])])])]))),256)),s.next_cursor?(o(),I(D,{key:0,onInfinite:i.getDataFromServer},{spinner:T(()=>t[21]||(t[21]=[n("span",null,null,-1)])),complete:T(()=>t[22]||(t[22]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])):u("",!0)],64)):u("",!0),!s.loading&&s.contactCount===0?(o(),l("div",Ox,c(e.trans("no-records")),1)):u("",!0)],64)):u("",!0),s.tab==="articles"?(o(),l(E,{key:2},[s.articles&&s.articles.length?(o(),l(E,{key:0},[(o(!0),l(E,null,q(s.articles,S=>(o(),l("div",{key:S,class:"mailbox-messages mailinbox"},[n("div",Ix,[n("div",Ax,[n("table",Lx,[n("tbody",null,[n("tr",Ex,[t[24]||(t[24]=n("td",{id:"ticket_user",style:{width:"1%"}},[n("a",{href:"javascript:;"},[n("span",{class:"fa-stack fa-2x"},[n("i",{class:"fas fa-newspaper fa-stack-1x"})])])],-1)),n("td",xx,[n("a",{href:e.basePath()+S.view_url,target:"_blank"},[M((o(),l("span",Rx,[k(c(S.name),1)])),[[w,S.name]])],8,Px)]),n("td",Fx,[t[23]||(t[23]=n("i",{class:"far fa-clock me-1"},null,-1)),k(c(e.formattedDate(S.publish_time)),1)])])])])])])]))),128)),s.next_cursor?(o(),I(D,{key:0,onInfinite:i.getDataFromServer},{spinner:T(()=>t[25]||(t[25]=[n("span",null,null,-1)])),complete:T(()=>t[26]||(t[26]=[n("span",null,null,-1)])),_:1},8,["onInfinite"])):u("",!0)],64)):u("",!0),!s.loading&&s.articleCount===0?(o(),l("div",Nx,c(e.trans("no-records")),1)):u("",!0)],64)):u("",!0)])])])])])],64)}const jx=U(P5,[["render",Vx],["__scopeId","data-v-e3de52e6"]]);function Ux(e){let t={schedule:[e.schedule,"isRequired"],delivery_time:[e.delivery_time,"isRequired"],notify_persons:[e.notify_persons,"isRequired"],subject:[e.subject,"isRequired"]};e.schedule!=="daily"&&(t.day=[e.day,"isRequired"]);const a=new ye(pe),{errors:r,isValid:s}=a.validate(t);return ve.dispatch("setValidationError",r),{errors:r,isValid:s}}const Bx={name:"CreateEditSchedule",components:{TreeSelect:Pt,"dynamic-select":_e,"date-time-field":at,"static-select":Xe,"text-field":Se,"radio-button":Pe,"status-switch":Mt},props:{auth:{type:Object,default:()=>{}}},data(){return{moment:Oe,hasDataPopulated:!1,loading:!1,schedule_List:[{id:"daily",name:"Daily"},{id:"weekly",name:"Weekly"},{id:"monthly",name:"Monthly"}],schedule:"daily",timeOptions:{start:"00:00:00",step:"00:30:00",end:"23:30:00"},delivery_time:"",day_List:[{id:"Monday",name:"Monday"},{id:"Tuesday",name:"Tuesday"},{id:"Wednesday",name:"Wednesday"},{id:"Thursday",name:"Thursday"},{id:"Friday",name:"Friday"},{id:"Saturday",name:"Saturday"},{id:"Sunday",name:"Sunday"}],day:[],Monthly:[...Array.from({length:31},(e,t)=>({id:(t+1).toString(),name:(t+1).toString()}))],subject:"",description:"",notify_persons:[],exportOptions:[{name:"CSV",value:"csv"},{name:"Excel",value:"xlsx"}],ext:"csv",labelStyle:{display:"none"},url:"",btnName:"save",title:"create_schedule",iconClass:"fas fa-save",scheduledData:[],scheduleId:"",reportId:"",notifyPerson:!1,edit:!1,clearable:!0,status:!0,hideExt:!1}},beforeMount(){const t=window.location.href.split("/");this.notify_persons=[{id:this.auth.user_data.id,name:this.auth.user_data.first_name+" "+this.auth.user_data.last_name,email:this.auth.user_data.email,profile_pic:this.auth.user_data.profile_pic}],this.scheduleId=ke(this.currentPath());let a;t.includes("edit")?(this.edit=!0,a=t[t.length-4],this.reportId=t[t.length-3],this.url="api/schedule-report/"+this.reportId,this.btnName="update",this.title="edit_schedule",this.iconClass="fas fa-sync",this.hasDataPopulated=!1,this.getInitialValues()):(this.url="api/schedule-report/"+this.scheduleId,this.hasDataPopulated=!0,this.loading=!1,a=t[t.length-2]),this.reportType=a;var r=this.reportType.split("-");this.subject=r.map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "),this.description=`Here is your ${this.schedule.replace(/^\w/,s=>s.toUpperCase())} ${this.subject}`,this.scheduledData=this.$route.query.params,this.hideExt=!!this.$route.query.type},methods:{onChange(e,t){this[t]=e,t==="schedule"&&(e==="weekly"||e==="monthly")&&(this.day=[])},onChangeDeliveryTime(e){const t=Oe(e,"HH:mm");this.delivery_time=t},isValid(){const{errors:e,isValid:t}=Ux(this.$data);return t},getInitialValues(){this.loading=!0,axios.get("get/individual_schedule_report/"+this.scheduleId).then(e=>{this.loading=!1,this.hasDataPopulated=!0;let t=e.data.data;this.subject=t.subject,this.description=t.description,this.schedule=t.type,this.execution_time=t.execution_time,this.hideExt=t.extension==="pdf",this.ext=t.extension,this.day=t.periods,this.status=t.status,this.notify_persons=t.notify_persons,this.delivery_time=Oe(t.execution_time,"YYYY-MM-DDTHH:mm:ss.SSSSSS[Z]")}).catch(e=>{B(e,"CreateEditSchedule"),this.loading=!1})},onSubmit(){if(this.isValid()){this.loading=!0;const e=new Date(this.delivery_time),t={hour:"2-digit",minute:"2-digit",hour12:!1},a=e.toLocaleTimeString("en-US",t),r=new FormData,s={type:this.schedule,execution_time:a,subject:this.subject,description:this.description,extension:this.hideExt?"pdf":this.ext,status:this.status?1:0};for(const d in s)r.append(d,s[d]);this.scheduledData&&r.append("payload",this.scheduledData),this.schedule==="daily"&&r.append("periods[0]",this.schedule);let i=!1;if(this.notify_persons&&Object.keys(this.notify_persons).length>0)for(const d in this.notify_persons)this.notify_persons[d].id&&typeof this.notify_persons[d].id=="number"&&(i=!0,r.append(`notify_persons[${d}]`,this.notify_persons[d].id));if(i||r.append("notify_persons[0]",this.notify_persons.id),this.schedule!=="daily"&&this.day!=="")for(const d in this.day)this.day[d].id&&(typeof this.day[d].id=="string"||typeof this.day[d].id=="number")&&r.append(`periods[${d}]`,this.day[d].id);this.edit&&r.append("id",this.scheduleId),axios.post(this.url,r).then(d=>{X(d,"CreateEditSchedule"),this.loading=!1,setTimeout(()=>{this.$router.push({name:"AllScheduleList"})},3e3)}).catch(d=>{B(d,"CreateEditSchedule"),this.loading=!1})}}}},zx={class:"col-sm-12"},Hx={key:0,class:"row"},Wx={key:1,class:"card card-light"},qx={class:"card-header"},Kx={class:"card-title"},Yx={class:"card-body"},Gx={class:"row"},Qx={class:"row"},Xx={key:0,class:"col-sm-6"},Jx={for:"status"},Zx={class:"card-footer"};function $x(e,t,a,r,s,i){const d=g("custom-loader"),m=g("alert"),p=g("static-select"),f=g("tree-select"),b=g("date-time-field"),y=g("dynamic-select"),D=g("text-field"),w=g("tiny-editor"),S=g("radio-button"),L=g("status-switch"),x=Q("focus-first-input");return o(),l("div",zx,[!s.hasDataPopulated||s.loading?(o(),l("div",Hx,[_(d,{duration:4e3})])):u("",!0),_(m,{componentName:"CreateEditSchedule"}),s.hasDataPopulated?(o(),l("div",Wx,[n("div",qx,[n("div",Kx,c(e.trans(s.title)),1)]),n("div",Yx,[M((o(),l("div",Gx,[_(p,{label:e.trans("schedule_by"),elements:s.schedule_List,"hide-empty-select":!0,name:"schedule",value:s.schedule,classname:"col-sm-6",onChange:i.onChange},null,8,["label","elements","value","onChange"]),s.schedule==="weekly"?(o(),I(f,{key:0,name:"day",label:e.trans("weekly"),elements:s.day_List,multiple:!0,classname:"col-sm-6",required:!0,onChange:i.onChange,value:s.day,valueFormat:"array",strlength:"50"},null,8,["label","elements","onChange","value"])):u("",!0),s.schedule==="monthly"?(o(),I(f,{key:1,name:"day",label:e.trans("monthly"),elements:s.Monthly,multiple:!0,classname:"col-sm-6",required:!0,onChange:i.onChange,value:s.day,valueFormat:"array"},null,8,["label","elements","onChange","value"])):u("",!0),_(b,{label:e.trans("execute_at"),value:s.moment(s.delivery_time,"HH:mm"),required:!0,name:"delivery_time",type:"time",onChange:i.onChangeDeliveryTime,"time-picker-options":s.timeOptions,format:"HH:mm",place:"select_time_to_generate_report",checkManual:!0,classname:"col-sm-6"},null,8,["label","value","onChange","time-picker-options"]),_(y,{label:e.trans("notify_assign"),multiple:!0,required:!0,name:"notify_persons",classname:"col-sm-6",apiEndpoint:"/api/dependency/agents?meta=true",value:s.notify_persons,onChange:i.onChange,strlength:"25",auth:a.auth},null,8,["label","value","onChange","auth"])])),[[x]]),_(D,{label:e.trans("subject"),value:s.subject,type:"text",name:"subject",onChange:i.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold"]),_(w,{value:s.description,type:"text",onChange:i.onChange,name:"description",label:e.lang("description"),classname:"col-sm-12",required:!0,lang:"en",id:"schedule_editor"},null,8,["value","onChange","label"]),n("div",Qx,[s.hideExt?u("",!0):(o(),l("div",Xx,[_(S,{label:e.trans("export_as:"),onChange:i.onChange,options:s.exportOptions,required:!0,value:s.ext,name:"ext"},null,8,["label","onChange","options","value"])])),n("div",{class:N(["col-sm-6",s.hideExt?"ps-3":""])},[n("label",Jx,c(e.trans("status")),1),_(L,{name:"status",value:s.status,onChange:i.onChange,bold:!0},null,8,["value","onChange"])],2)])]),n("div",Zx,[n("button",{type:"button",onClick:t[0]||(t[0]=P=>i.onSubmit()),class:"btn btn-primary"},[n("i",{class:N(s.iconClass)},null,2),k(" "+c(e.trans(s.btnName)),1)])])])):u("",!0)])}const Qs=U(Bx,[["render",$x],["__scopeId","data-v-fce78763"]]);let eP={path:"/canned",component:Ue,name:"CannedResponse",redirect:"/canned/list",children:[{path:"list",name:"Canned Response Index",component:wA,meta:{title:"canned_response",crumb:{link:{name:"dashboard",to:"/"},active:"canned_response"}}},{path:"create",name:"Canned Response Create",component:Ws,meta:{title:"canned_response",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"canned_response",to:"/canned"},active:"create"}}},{path:":id/edit",name:"Canned Response Edit",component:Ws,meta:{title:"canned_response",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"canned_response",to:"/canned"},active:"edit"}}}]},tP={path:"/category",component:Ue,name:"Category",redirect:"/category/list",children:[{path:"list",name:"KB Category Index",component:U6,meta:{title:"category",crumb:{link:{name:"dashboard",to:"/"},active:"category"}}},{path:"create",name:"KB Category Create",component:Ys,meta:{title:"category",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"category",to:"/category"},active:"create"}}},{path:":id/edit",name:"KB Category Edit",component:Ys,meta:{title:"category",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"category",to:"/category"},active:"edit"}}}]},sP={path:"/article",component:Ue,name:"Knowledgebase",redirect:"/article/list",children:[{path:"list",name:"KB Article",component:e3,meta:{title:"article",crumb:{link:{name:"dashboard",to:"/"},active:"article"}}},{path:"create",name:"KB Article Create",component:qs,meta:{title:"article",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article",to:"/article"},active:"create"}}},{path:":id/edit",name:"KB Article Edit",component:qs,meta:{title:"article",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article",to:"/article"},active:"edit"}}},{path:"revision/:articleId/:versionId",name:"KB Article Revision",component:XL,meta:{title:"article",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article",to:"/article"},active:"revisions"}}},{path:"comment",name:"KB Article Comments",component:KE,props:!0,meta:{title:"comments",crumb:{link:{name:"dashboard",to:"/"},active:"comments"}}},{path:"create/template",name:"KB Article Template Create",component:Ks,meta:{title:"article_template",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article_template",to:"/article/alltemplate/list"},active:"create"}}},{path:"template/:id/edit",name:"KB Article Template Edit",component:Ks,meta:{title:"article_template",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"article_template",to:"/article/alltemplate/list"},active:"edit"}}},{path:"alltemplate/list",name:"KB Article Template List",component:g6,meta:{title:"article_template",crumb:{link:{name:"dashboard",to:"/"},active:"article_template"}}}]},aP={path:"/page",component:Ue,name:"KB Page",redirect:"/page/list",children:[{path:"list",name:"KB Pages Index",component:u5,meta:{title:"pages",crumb:{link:{name:"dashboard",to:"/"},active:"pages"}}},{path:"create",name:"KB Page Create",component:Gs,meta:{title:"pages",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"pages",to:"/page"},active:"create"}}},{path:":id/edit",name:"KB Page Edit",component:Gs,meta:{title:"pages",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"pages",to:"/page"},active:"edit"}}}]},nP={path:"/kb",component:Ue,name:"Knowledgebase Settings",redirect:"/kb/settings",children:[{path:"settings",name:"KB Settings",component:L6,meta:{title:"kb-settings",crumb:{link:{name:"dashboard",to:"/"},active:"settings"}}}]},iP={path:"/user",component:Ue,name:"Users",redirect:"/user/list",children:[{path:"list",name:"User Directory",component:jS,meta:{title:"user_directory",crumb:{link:{name:"dashboard",to:"/"},active:"user_directory"}}},{path:"create",name:"User Create",component:Ge,props:{category:"requester",panel:"agent"},meta:{title:"user",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"create"}}},{path:"export",name:"User Export",component:XS,meta:{title:"export_user",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"export_user"}}},{path:":id",name:"User View",component:Oa,meta:{title:"profile",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"viewing_as_user_profile"}}},{path:":id/edit",name:"User Edit",component:Ge,props:{category:"requester",panel:"agent",showViewButton:!0},meta:{title:"user",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"edit"}}}]},oP={path:"/organizations",component:Ue,name:"Organizations",redirect:"/organizations/list",children:[{path:"list",name:"Organization Directory",component:aO,meta:{title:"organization_directory",crumb:{link:{name:"dashboard",to:"/"},active:"organization_directory"}}},{path:"create",name:"Organization Create",component:Ge,props:{category:"organisation",panel:"agent"},meta:{title:"organisation",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"organization_directory",to:"/organizations"},active:"create"}}},{path:":id",name:"Organization View",component:uA,meta:{title:"organization_profile",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"organization_directory",to:"/organizations"},active:"organization_profile"}}},{path:":id/edit",name:"Organizations Edit",component:Ge,props:{category:"organisation",panel:"agent",showViewButton:!0},meta:{title:"organisation",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"organization_directory",to:"/organizations"},active:"edit"}}}]},rP={path:"/reports/schedule/",component:Ue,name:"Schedule",redirect:"add/:type/:id",children:[{path:"add/:type/:id",name:"Schedule Add",component:Qs,meta:{title:"Schedule",crumb:{link:{name:"dashboard",to:"/"},active:"create"}}},{path:":type/:id/edit/:id",name:"Schedule Edit",component:Qs,meta:{title:"Schedule",crumb:{link:{name:"dashboard",to:"/"},active:"edit"}}}]},lP=[{path:"/",component:Ue,redirect:"/dashboard",name:"Dashboard Layout",children:[{path:"dashboard",name:"Dashboard",component:tu,meta:{title:"dashboard",crumb:{active:"dashboard"}}},{path:"agent/recur/list",name:"Recurring Tickets",component:ei,meta:{title:"recurring",crumb:{link:{name:"dashboard",to:"/"},active:"ticket_recurring"}}},{path:"agent/ticket/recur",name:"Recurring Tickets Create",component:Ge,props:{category:"ticket",panel:"agent",scenario:"recur",recur_mode:"create"},meta:{title:"ticket_recurring",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"ticket_recurring",to:"/agent/recur/list"},active:"create"}}},{path:"agent/recur/:id/edit",name:"Recurring Tickets Edit",component:Ge,props:{category:"ticket",panel:"agent",scenario:"recur",recur_mode:"edit"},meta:{title:"ticket_recurring",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"ticket_recurring",to:"/agent/recur/list"},active:"edit"}}},{path:"profile",name:"Profile",component:Pu,meta:{title:"view-profile",crumb:{link:{name:"dashboard",to:"/"},active:"my_profile"}}},{path:"newticket",name:"NewTicket",component:Ge,props:{category:"ticket",panel:"agent"},meta:{title:"tickets",crumb:{link:{name:"dashboard",to:"/"},root:"tickets",active:"create_ticket"}}},{path:"tickets",name:"Tickets Index",component:Jt,meta:{title:"",crumb:{link:{name:"dashboard",to:"/"},root:"tickets"}}},{path:"tickets/:type/:id",name:"Tickets widget Index",component:Jt,props:{from:"filter"},meta:{title:"from_report",crumb:{link:{name:"dashboard",to:"/"},active:"from_report"}}},{path:"thread/:id",name:"Tickets Timeline",component:Da,props:{from:"timeline"},meta:{title:"ticket-details",crumb:{link:{name:"dashboard",to:"/"},root:"tickets"}}},{path:"tickets/filter/:id",name:"Filter Tickets Index",component:Jt,props:{from:"filter"},meta:{title:"filter",crumb:{link:{name:"dashboard",to:"/"},root:"tickets"}}},{path:"agent/:id",name:"Agent View",component:Oa,meta:{title:"profile",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"viewing_as_agent_profile"}}},{path:"agent/:id/edit",name:"Agent Edit",component:ti,props:{isCalledFromUserDirectoryPage:!0},meta:{title:"user",crumb:{link:{name:"dashboard",to:"/"},root_link:{name:"user_directory",to:"/user"},active:"edit"}}},{path:"search-results",name:"Search Results",component:jx,meta:{title:"search",crumb:{active:"search"}}}]},iP,oP,eP,sP,nP,tP,aP,rP,{path:"/:pathMatch(.*)*",name:"404",component:si}];const CP=En({history:xn(),inkActiveClass:"",linkExactActiveClass:"exact-active",routes:lP,scrollBehavior(e,t,a){return{top:0}}});export{Ue as A,Tl as B,N8 as C,Ml as D,kP as L,wP as P,T0 as S,gC as T,vS as U,no as a,Ta as b,v0 as c,it as d,Ca as e,r0 as f,ls as g,CP as r,Oy as v};

import{a as ft,R as Hs,u as wt,c as ju,b as Bu}from"./vue-router.js";import{s as Yu,w as Hu,x as Wu,u as zu,o as yt,S as lt,I as gi,T as Gu,K as Ku,O as Ju,D as ma,Q as Zu,U as Qu,N as an,V as vi,H as bi,M as yi,J as ki,h as wi,R as Xu,C as em,Y as tm,X as io,a as am,W as as}from"./FormGenerator.js";import{H as sm}from"./HelpSection.js";import{a2 as N,aG as Ci,M as Jt,aH as nm,f as Te,Z as Me,c as me,an as Di,_ as x,l as d,J as B,K as re,v as s,F as u,X as bt,I as L,x as h,G as T,q as f,k as v,o as i,t as G,a1 as Ae,m as A,aQ as sn,B as V,E as U,W as H,L as P,ad as Le,s as Ee,T as we,D as Be,ah as Ue,C as K,aI as dt,A as nt,P as Ve,a8 as Bt,ag as it,ae as St,R as Qe,N as ze,ai as om,af as Ie,V as ls,S as Ea,U as _a,H as ha,bp as im,bd as lm,ay as ut,e as O,$ as Je,u as ae,w as qt,b0 as rm,h as tt,aj as fa,a$ as ss,a5 as _t,ap as Yt,j as Dt,bq as rs,br as ds,bs as dm,bt as Si,bu as cs,bv as cm,bw as nn,bx as um,by as mm,bz as hm,bA as pm,bB as _m,bC as fm,bD as gm,bE as vm,bF as bm,aZ as ym,a_ as km,y as wm,aX as Cm,aq as kt,bc as Mi,g as Dm,bG as Sm,aJ as Mm,aD as lo,bH as Fi,a4 as ct,b2 as Fm,a6 as ga,ak as Ws,a7 as Zt,r as zs,aO as $i,n as $m,ar as Tm,au as Em}from"./bootstrap.js";import{b as Lm,S as Am}from"./AdminNavigationBar.js";import{C as Qt}from"./Checkbox.js";import{C as us,c as xt,a as Ye,e as Im,g as Pm,D as La,b as Om}from"./DataTableActions.js";const ht=[{id:"equal",name:N("equal_to")},{id:"not_equal",name:N("not_equal_to")},{id:"contains",name:N("contains")},{id:"dn_contains",name:N("does_not_contain")},{id:"starts",name:N("starts_with")},{id:"ends",name:N("ends_with")},{id:"greater_than",name:N("greater_than")},{id:"lesser_than",name:N("lesser_than")},{id:"less_than_and_greater_than",name:N("less_than_and_greater_than")}];class Ti{constructor(t="automator__"+Math.random().toString(),a=[],r=[],n=[],o="any",m="agent"){this.id=t,this.rules=a,this.actions=r,this.events=n,this.matcher=o,this.actionsPerformer=m}}class ns{constructor(t="rule__"+Math.random().toString(),a=new URLSearchParams(window.location.search).get("page_type")?new URLSearchParams(window.location.search).get("page_type"):"ticket",r=null,n=null,o=ht[0],m=[]){this._id=t,this.category=a,this.field=r,this.value=n,this.relation=o,this.rules=m}}class on{constructor(t="action__"+Math.random().toString(),a=null,r=null,n=[],o={id:null,subject:"",body:"",users:[]}){this._id=t,this.field=a,this.value=r,this.actions=n,this.action_email=o}}class os{constructor(t="event__"+Date.now(),a=null,r=null,n=null,o=null,m=null){this._id=t,this.field=a,this.to=r,this.from=n,this.data_type=o,this.api_info=m}}const Gs=(e=[],t)=>{let a=[];return e.forEach(r=>a.push(Ks(t,r))),a},Ks=(e,t)=>{let a=[],r=null;return t.data_type==="mobile"&&t.enable_extension&&t.value?r={value:t.value,nodes:t.union}:r=Ci(t.value,t.options,t.default),Array.isArray(r)?r.forEach(n=>{n.nodes&&n.nodes.forEach(o=>{a.push(Ks(e,o))})}):r&&r.nodes&&r.nodes.forEach(n=>{a.push(Ks(e,n))}),Ei(e,t,a)},Ei=(e,t,a=[])=>{if(e==="rule"){const r=ht.find(n=>n.id===t.relation);return new ns(t.rule_id,t.category,t,t.value,r,a)}else if(e==="action")return new on(t.action_id,t,t.value,a,t.action_email)},qm=(e=[])=>{let t=[];return e.forEach(a=>t.push(new os(a.event_id,{id:a.id,name:a.name},a.to,a.from,a.data_type,a.api_info))),t},xm=(e=[])=>{let t=JSON.parse(JSON.stringify(e));return e.forEach((a,r)=>{["from","to","field"].forEach(n=>{t[r][n]=a[n]?a[n].id:null})}),t},Js=(e=[],t)=>{let a=JSON.parse(JSON.stringify(e));a=r(a,t);function r(n,o){return n=n.filter(m=>m.field),n.forEach(m=>{const p=Jt.convertStringOfPropertiesToObject(m.field.api_info).key||"label";m.value=nm(m.value,m.field.default,p,"","",m.field.data_type),m.field=m.field.key,o==="rules"&&(m.relation=m.relation.id),o==="actions"&&(m.action_email=Vm(m.action_email)),Te(m[o])&&(m[o]=r(m[o],o))}),n}return a},Vm=e=>{if(Te(e.body))return{id:e.id,body:e.body,subject:e.subject,user_ids:e.users.map(t=>t.id)}},ln=e=>typeof e=="string"&&e.includes("__"),ro=(e="")=>["text","number","date","email","file","textarea","htmltextarea","checkbox","time"].indexOf(e)>-1?e==="checkbox"?[ht[0],ht[1],ht[2],ht[3]]:e==="time"?[ht[0],ht[6],ht[7],ht[8]]:ht.filter(a=>a.id!=="greater_than"&&a.id!=="lesser_than"&&a.id!=="less_than_and_greater_than"):[ht[0],ht[1]];const Nm={name:"admin-panel-layout",setup(){const e=Me();return{getPushMenu:me(()=>e.getters.getPushMenu)}},props:{auth:{type:Object,default:()=>{}},company:{type:Object,default:()=>{}},portal:{type:Object,default:()=>{}},whiteLabel:{type:Boolean,default:!1},tag:{type:String,default:""},version:{type:String,default:""},isMailConfigured:{type:Boolean,default:!0},dummyInstall:{type:Boolean,default:!1},isUpdatedVersion:{type:[Boolean,String,Number],default:!1}},data(){return{mail_config:this.isMailConfigured,selectedOption:"1 Day",alertWrapper:0,alertData:"",alertContent:"",searchCron:!1,isAnyMigration:!1}},beforeMount(){this.checkForUpdate(),this.checkSearchCronCommand()},updated(){this.logAlertWrapperHeight()},mounted(){this.logAlertWrapperHeight(),window.addEventListener("resize",this.onWindowResize)},beforeDestroy(){window.removeEventListener("resize",this.onWindowResize)},created(){window.emitter.on("checkMailConfig",this.checkConfig)},methods:{getAlertBackgroundColor(e){const t="#ffc107",r=parseInt(t.slice(1,3),16)+e*10,n=parseInt(t.slice(3,5),16)+e*10,o=parseInt(t.slice(5,7),16)+e*10,m=p=>Math.min(255,Math.max(0,p));return`rgb(${m(r)}, ${m(n)}, ${m(o)})`},async checkForUpdate(){try{const e=await axios.post("/display-pop-ups");this.alertData=e.data.map(n=>({...n,selectedOption:"1 Day",topPosition:0}));const t=[];for(const n of this.alertData)try{const o={value:n.description},m=await axios.post("/give-me-read",o);t.push(m.data)}catch(o){console.log(o),t.push("")}this.alertData.forEach((n,o)=>{n.description=t[o].replace("18px","14px")});const r=(await axios.get("/get-days")).data.data;for(const n of this.alertData){const o=n.id.toString();if(r.hasOwnProperty(o)){const m=r[o];n.selectedOption=m===1?"1 Day":`${m} Days`}}this.alertContent=this.alertData,await this.logAlertWrapperHeight()}catch(e){console.log(e)}},onCloseAlert(e){Array.isArray(this.alertContent)||(this.alertContent=[]);const t=this.alertContent.findIndex(n=>n.id===e.id);t>-1&&this.alertContent.splice(t,1);const a={};a.pop_id=e.id;let r=parseInt(e.selectedOption.match(/\d+/)[0],10);a.days=r=r,a.user_id=this.auth.user_data.id,axios.post("/post-days",a).then(n=>{this.checkForUpdate()}).catch(n=>{console.log(n)})},checkConfig(e){e&&(this.mail_config=!0)},layoutLoaded(){window.emitter.emit("layout-loaded",{whiteLabel:this.whiteLabel})},logAlertWrapperHeight(){this.$nextTick(()=>{const e=this.$refs.alertWrapperElements;if(e){let t=0;e.forEach((a,r)=>{if(a){const n=a.clientHeight;t+=n;const o=t-n;this.alertData[r].topPosition=o}}),this.alertWrapper=t}})},onWindowResize(){this.logAlertWrapperHeight()},updateSelectedOption(e,t){e.selectedOption=t},checkSearchCronCommand(){axios.get("check/search-cron").then(e=>{this.searchCron=e.data.data.cron_status,this.isAnyMigration=e.data.data.is_any_migration}).catch(e=>{this.searchCron=!1,this.isAnyMigration=!1})},eleaWidgetLoaded(){window.emitter.emit("elea-widget-loaded",{user_data:this.auth.user_data,whiteLabel:this.whiteLabel})},closeSideBar(){let e=document.getElementById("layout_body");this.getPushMenu||(this.$store.dispatch("setPushMenu",!this.getPushMenu),e.classList.add("sidebar-collapse"),e.classList.remove("sidebar-open"))}},computed:{...Di(["isSettingActive"]),hasIsSettingActiveGetter(){return this.$store.getters.hasOwnProperty("isSettingActive")}},components:{AdminNavBar:Yu,AdminBreadCrumbs:Hu,HelpWidget:sm,AdminFooter:Wu,AdminSideBar:zu}},Rm={class:"row"},Um={class:"col-sm-12 alert-description"},jm={class:"col-sm-10"},Bm=["innerHTML"],Ym=["href"],Hm=["href"],Wm=["innerHTML"],zm={class:"remind-select float-end"},Gm={class:"btn-group"},Km={class:"dropdown-menu option-container"},Jm=["onClick"],Zm=["onClick"],Qm=["onClick"],Xm=["onClick"],eh={class:"app-main"},th={class:"app-content"},ah={class:"container-fluid"},sh={key:0,class:"alert alert-info alert-dismissible"},nh={key:1,class:"alert alert-warning"},oh={key:2,class:"alert alert-warning"},ih={class:"row"},lh={id:"monitoring-system-status"},rh={key:0,id:"ai-assistant-widget"};function dh(e,t,a,r,n,o){const m=v("admin-nav-bar"),p=v("admin-side-bar"),g=v("admin-bread-crumbs"),b=v("alert"),w=v("router-link"),S=v("router-view"),C=v("vue-progress-bar"),M=v("admin-footer");return i(),d(B,null,[(i(!0),d(B,null,re(n.alertContent,(D,F)=>(i(),d("div",{key:F},[D.use===1?(i(),d("div",{key:0,ref_for:!0,ref:"alertWrapperElements",class:"alert-warning alert-wrapper mb-0 pt-2 ps-3 pb-1",style:bt({top:D.topPosition+"px",backgroundColor:o.getAlertBackgroundColor(F),zIndex:F===n.alertContent.length-1?9999:99999999})},[s("div",Rm,[s("div",Um,[s("div",jm,[a.auth.user_data.role=="admin"?(i(),d(B,{key:0},[t[1]||(t[1]=s("span",{style:{"vertical-align":"1px"}},[s("i",{class:"fas fa-warning"})],-1)),s("span",{innerHTML:D.description},null,8,Bm),t[2]||(t[2]=L("  ")),D.pop_name==="update"&&D.link?(i(),d("a",{key:0,href:D.link+"admin/check-updates"},h(e.trans("click-here-to-update")),9,Ym)):f("",!0),D.pop_name==="renew"&&D.link?(i(),d("a",{key:1,href:D.link,target:"_blank"},h(e.trans("click-here-to-renew")),9,Hm)):f("",!0)],64)):(i(),d("span",{key:1,innerHTML:D.description},null,8,Wm))]),s("div",zm,[t[3]||(t[3]=s("label",{class:"remind-option"},h("Remind me after : "),-1)),t[4]||(t[4]=L("  ")),s("div",Gm,[s("button",{type:"button",class:"dropdown-toggle select-button alert-warning btn btn-outline",style:bt([{backgroundColor:o.getAlertBackgroundColor(F)},{"margin-right":"0px !important"}]),"data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},h(D.selectedOption),5),s("div",Km,[s("div",{class:G(["dropdown-item option-select",{alertDay:D.selectedOption==="1 Day"}]),onClick:I=>o.updateSelectedOption(D,"1 Day")},"1 Day",10,Jm),s("div",{class:G(["dropdown-item option-select",{alertDay:D.selectedOption==="3 Days"}]),onClick:I=>o.updateSelectedOption(D,"3 Days")},"3 Days",10,Zm),s("div",{class:G(["dropdown-item option-select",{alertDay:D.selectedOption==="7 Days"}]),onClick:I=>o.updateSelectedOption(D,"7 Days")},"7 Days",10,Qm)])])]),s("button",{type:"button",onClick:I=>o.onCloseAlert(D),class:"btn-close pt-2 pe-4",id:"alert_close"},null,8,Xm)])])],4)):f("",!0)]))),128)),s("div",{class:"app-wrapper",style:bt({top:n.alertContent?this.alertWrapper+"px !important":""})},[u(m,{style:bt({top:n.alertContent?this.alertWrapper+"px !important":""}),auth:a.auth,portal:a.portal,callingFrom:"admin"},null,8,["style","auth","portal"]),u(p,{style:bt({top:n.alertContent?this.alertWrapper+"px !important":""}),auth:a.auth,alertWrapper:n.alertWrapper,alertData:n.alertContent,company:a.company,portal:a.portal,callingFrom:"admin"},null,8,["style","auth","alertWrapper","alertData","company","portal"]),s("div",eh,[u(g),s("div",th,[s("div",ah,[u(b,{componentName:"layout"}),a.dummyInstall?(i(),d("div",sh,[t[5]||(t[5]=s("button",{type:"button",class:"close","data-dismiss":"alert","aria-hidden":"true"},"×",-1)),t[6]||(t[6]=s("i",{class:"fas fa-warning"},null,-1)),t[7]||(t[7]=L("  ")),a.auth.user_data.role=="admin"?(i(),d(B,{key:0},[L(h(e.trans("dummy_data_installation_message"))+" ",1),u(w,{to:"/clean-dummy-data"},{default:T(()=>[L(h(e.trans("click"))+" ",1)]),_:1}),L(h(e.trans("clear-dummy-data")),1)],64)):(i(),d(B,{key:1},[L(h(e.trans("clear-dummy-data-agent-message")),1)],64))])):f("",!0),!a.dummyInstall&&!n.mail_config?(i(),d("div",nh,[t[8]||(t[8]=s("i",{class:"fas fa-warning"},null,-1)),t[9]||(t[9]=L("  ")),a.auth.user_data.role=="admin"?(i(),d(B,{key:0},[L(h(e.trans("system-outgoing-incoming-mail-not-configured"))+" ",1),u(w,{to:"/email/create"},{default:T(()=>[L(h(e.trans("confihure-the-mail-now")),1)]),_:1})],64)):(i(),d(B,{key:1},[L(h(e.trans("system-mail-not-configured-agent-message")),1)],64))])):f("",!0),!a.dummyInstall&&(n.searchCron||n.isAnyMigration)?(i(),d("div",oh,[t[10]||(t[10]=L("  ")),t[11]||(t[11]=s("i",{class:"fas fa-spinner"},null,-1)),L("  "+h(n.isAnyMigration?e.trans("module-migration"):e.trans("search-cron-running")),1)])):f("",!0),s("div",ih,[u(S,null,{default:T(({Component:D})=>[u(Ae,{name:"fade",mode:"out-in"},{default:T(()=>[(i(),A(sn(D),{key:e.$route.fullPath,auth:a.auth,dummyInstall:a.dummyInstall,whiteLabel:a.whiteLabel},null,8,["auth","dummyInstall","whiteLabel"]))]),_:2},1024)]),_:1}),u(C,{class:"color-shift-progress-bar"})])])])]),u(M,{company:a.company,whiteLabel:a.whiteLabel,tag:a.tag,version:a.version,lang:a.auth.user_data.user_language},null,8,["company","whiteLabel","tag","version","lang"]),s("div",{class:"sidebar-overlay",onClick:t[0]||(t[0]=D=>o.closeSideBar())}),s("div",lh,h(o.layoutLoaded()),1),o.hasIsSettingActiveGetter&&e.isSettingActive("conversation-widget")?(i(),d("div",rh,h(o.eleaWidgetLoaded()),1)):f("",!0)],4)],64)}const Oe=x(Nm,[["render",dh],["__scopeId","data-v-837c6e4f"]]);const ch={name:"admin-settings",components:{"agent-license-modal":Lm,"svg-icon-handler":Am},data(){return{loading:!1,navigationArray:[],showLicenseModal:!1}},beforeMount(){this.getNavigations()},methods:{getNavigations(){this.loading=!0,V.get("/api/admin/navigation?meta=true").then(e=>{this.loading=!1;let t=e.data.data.filter(({main_navigation:r})=>r),a={name:N("additional_confiurations"),main_navigation:!1,navigations:e.data.data.filter(({main_navigation:r})=>!r)};a.navigations.length&&t.push(a),this.navigationArray=t}).catch(e=>{this.loading=!1,U(e,"admin-settings")})},async isValidLicense(){try{(await V.get("service-desk/license-status")).status===200&&(this.$router.push("/service-desk/agent-software"),this.showLicenseModal=!1)}catch{this.showLicenseModal=!0}}}},uh={class:"col-sm-12"},mh={key:0,class:"card card-light"},hh={class:"card-header"},ph={class:"card-title"},_h={class:"card-body"},fh={class:"row"},gh={class:"col-md-2 col-sm-6"},vh={class:"settingiconblue"},bh={class:"settingdivblue"},yh=["href"],kh={class:"fa-stack fa-2x"},wh=["href"],Ch={class:"fa-stack fa-2x"},Dh=["href"],Sh={class:"fa-stack fa-2x"},Mh={class:"fa-stack fa-2x"},Fh={class:"text-center fs-7 fw_400"},$h={key:1,class:"card card-light"},Th={class:"card-header"},Eh={class:"card-title"},Lh={class:"card-body"},Ah={class:"row"},Ih={class:"col-md-2 col-sm-6"},Ph={class:"settingiconblue"},Oh={class:"fa-stack fa-2x"},qh={class:"fa-stack fa-2x"},xh={class:"text-center text-sm fw_400"},Vh={key:2,class:"card card-light"},Nh={class:"card-header"},Rh={class:"card-title"},Uh={class:"card-body"},jh={class:"row"},Bh={class:"col-md-2 col-sm-6"},Yh={class:"settingiconblue"},Hh={class:"settingdivblue"},Wh={href:"javascript:;"},zh={class:"fa-stack fa-2x"},Gh={class:"row"},Kh={class:"col-sm-12 col-md-2"},Jh={class:"settingiconblue"},Zh={class:"settingdivblue_mini"},Qh=["href"],Xh={class:"fa-stack fa-1x"},ep={class:"text-center text-sm fw_400"},tp={key:0,class:"row"};function ap(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("svg-icon-handler"),b=v("popover"),w=v("agent-license-modal"),S=v("reuse-loader"),C=H("tooltip");return i(),d("div",uh,[u(m,{componentName:"admin-settings"}),(i(!0),d(B,null,re(n.navigationArray,(M,D)=>(i(),d(B,null,[M.main_navigation&&M.name==e.trans("helpdesk")?(i(!0),d(B,{key:0},re(M.navigations,(F,I)=>(i(),d(B,null,[F.hasChildren?(i(),d("div",mh,[s("div",hh,[s("h3",ph,h(F.name),1)]),s("div",_h,[s("div",fh,[(i(!0),d(B,null,re(F.children,(R,Y)=>(i(),d("div",gh,[s("div",vh,[s("div",bh,[R.routeString=="horizon"?(i(),d("a",{key:0,href:R.redirectUrl},[s("span",kh,[s("i",{class:G([R.iconClass,"fa-stack-1x"])},null,2)])],8,yh)):R.routeString=="__clockwork/app"?(i(),d("a",{key:1,href:R.redirectUrl},[s("span",Ch,[s("i",{class:G([R.iconClass,"fa-stack-1x"])},null,2)])],8,wh)):R.routeString=="pulse"?(i(),d("a",{key:2,href:R.redirectUrl},[s("span",Sh,[s("i",{class:G([R.iconClass,"fa-stack-1x"])},null,2)])],8,Dh)):(i(),A(p,{key:3,to:"/"+R.routeString},{default:T(()=>[s("span",Mh,[s("i",{class:G([R.iconClass,"fa-stack-1x"])},null,2)])]),_:2},1032,["to"]))]),s("div",Fh,h(R.name),1)])]))),256))])])])):f("",!0)],64))),256)):M.main_navigation&&M.name!="Helpdesk"?(i(),d("div",$h,[s("div",Th,[s("h3",Eh,h(M.name),1)]),s("div",Lh,[s("div",Ah,[(i(!0),d(B,null,re(M.navigations,(F,I)=>(i(),d("div",Ih,[s("div",Ph,[s("div",{class:G(["settingdivblue",F.routeString=="elea/settings"?"pt-2":""])},[F.routeString=="elea/settings"?(i(),A(p,{key:0,to:"/"+F.routeString},{default:T(()=>[u(g,{"hover-color":"#3C8DBC","icon-from":"elea_icon",color:"#3C8DBC",height:"45",width:"35"})]),_:2},1032,["to"])):F.routeString==="service-desk/agent-software/settings"?(i(),d("a",{key:1,onClick:t[0]||(t[0]=(...R)=>o.isValidLicense&&o.isValidLicense(...R)),href:"javascript:;"},[s("span",Oh,[s("i",{class:G([F.iconClass,"fa-stack-1x"])},null,2)])])):(i(),A(p,{key:2,to:"/"+F.routeString},{default:T(()=>[s("span",qh,[s("i",{class:G([F.iconClass,"fa-stack-1x"])},null,2)])]),_:2},1032,["to"]))],2),s("div",xh,h(F.name),1)])]))),256))])])])):(i(),d("div",Vh,[s("div",Nh,[s("h3",Rh,h(M.name),1)]),s("div",Uh,[s("div",jh,[(i(!0),d(B,null,re(M.navigations,(F,I)=>(i(),d("div",Bh,[s("div",Yh,[s("div",Hh,[u(b,{hover:"",arrow:"",placement:"right"},{content:T(()=>[(i(!0),d(B,null,re(F.navigations,(R,Y)=>(i(),d("div",Gh,[s("div",Kh,[P((i(),d("div",Jh,[s("div",Zh,[s("a",{href:e.basePath()+"/admin/"+R.routeString},[s("span",Xh,[s("i",{class:G([R.iconClass,"fa-stack-1x"])},null,2)])],8,Qh)])])),[[C,R.name]])])]))),256))]),default:T(()=>[s("a",Wh,[s("span",zh,[s("i",{class:G([F.iconClass,"fa-stack-1x"])},null,2)])])]),_:2},1024)]),s("div",ep,h(F.name),1)])]))),256))])])]))],64))),256)),u(Ae,{name:"modal"},{default:T(()=>[u(w,{showModal:n.showLicenseModal,onClose:()=>{this.showLicenseModal=!1}},null,8,["showModal","onClose"])]),_:1}),n.loading?(i(),d("div",tp,[u(S,{"animation-duration":4e3,size:60})])):f("",!0)])}const Bs=x(ch,[["render",ap],["__scopeId","data-v-566ef5b5"]]);function Li(e){const{formNameObj:t}=e;let a={name:[t.value,"isRequired","max(50)","min(3)"]};const r=new Le(N),{errors:n,isValid:o}=r.validate(a);return Ee.dispatch("setValidationError",n),{errors:n,isValid:o}}const sp={components:{"draggable-element":yt},props:{formGroupList:{type:Array,required:!0},type:{type:String,default:"fields"},isFormGroup:{type:Boolean,default:!1}},data(){return{isSticky:!1,headerWidth:"100%",stickyNavTop:0,stickyOffsetCounter:0,topBarWidth:0,type:"fields"}},computed:{getFormSection(){return this.getFormMenus.filter(e=>e.type==="section")},getFormFilteredMenu(){return this.getFormMenus.filter(e=>e.type!="section")},...Di(["getFormMenus","getFormCategoryType"])},created(){window.addEventListener("scroll",this.stickyNav)},methods:{toggleFields(e){this.type=e},cloneElement(e){let t=JSON.parse(JSON.stringify(e));const a=this.getCurrentTimestamp();return t.type==="group"?t.groupid=a:t.id=a,t.form_identifier=a,t},getCurrentTimestamp(){return new Date().getTime()},stickyNav(){this.getWindowScrollTop()>this.stickyNavTop?(this.isSticky=!0,this.stickyOffsetCounter++,this.stickyOffsetCounter==1&&(this.topBarWidth=this.getStickyBoxOffset()),this.headerWidth=this.topBarWidth):(this.stickyOffsetCounter=0,this.isSticky=!1,this.headerWidth="100%")},getWindowScrollTop(){return $(window).scrollTop()},getStickyBoxOffset(){return this.$refs.stickyBox.offsetWidth+"px"}},beforeDestroy(){window.removeEventListener("scroll",this.stickyNav)}},np={class:"menu mt-3"},op={id:"drag__body"},ip={class:"btn-group mb-2 w-100"},lp={class:"col-sm-6"},rp={key:0,class:"info-box-icon menu-icon"},dp={class:"info-box-content"},cp={class:"info-box-text"},up={class:"col-sm-12 text-center"},mp={key:0,class:"info-box-icon menu-icon"},hp={class:"info-box-content"},pp={class:"info-box-text"},_p={class:"col-sm-12"},fp={class:"info-box-content"},gp={class:"info-box-text"};function vp(e,t,a,r,n,o){const m=v("draggable-element"),p=H("tooltip");return i(),d("div",np,[s("div",op,[s("div",ip,[s("a",{class:G(["btn btn-light field-btn",n.type=="fields"?"active-blue":""]),href:"javascript:;",onClick:t[0]||(t[0]=g=>o.toggleFields("fields"))},h(e.trans("form_fields")),3),a.formGroupList&&a.formGroupList.length>0&&e.getFormCategoryType!=="user"&&e.getFormCategoryType!=="organisation"&&e.getFormCategoryType!=="license"?(i(),d("a",{key:0,class:G(["btn btn-light field-btn",n.type=="groups"?"active-blue":""]),href:"javascript:;",onClick:t[1]||(t[1]=g=>o.toggleFields("groups"))},h(e.trans("form_groups")),3)):f("",!0)]),n.type=="fields"?(i(),A(m,{key:0,class:"form__menulsit row",list:o.getFormFilteredMenu,group:{name:"faveo-form-builder",pull:"clone",put:!1},clone:o.cloneElement},{item:T(({element:g,index:b})=>[s("div",lp,[P((i(),d("div",{class:"info-box menu-info-box bg-light",key:g.id},[g.icon_class?(i(),d("span",rp,[s("i",{class:G(["fas",g.icon_class])},null,2)])):f("",!0),s("div",dp,[s("span",cp,h(g.title),1)])])),[[p,g.title]])])]),_:1},8,["list","clone"])):f("",!0),n.type=="fields"&&!a.isFormGroup?(i(),A(m,{key:1,class:"form__menulsit row",list:o.getFormSection,group:{name:"faveo-form-section",pull:"clone",put:!1},clone:o.cloneElement},{item:T(({element:g,index:b})=>[s("div",up,[P((i(),d("div",{class:"info-box menu-info-box bg-light",key:g.id},[g.icon_class?(i(),d("span",mp,[s("i",{class:G(["fas",g.icon_class])},null,2)])):f("",!0),s("div",hp,[s("span",pp,h(g.title),1)])])),[[p,g.title]])])]),_:1},8,["list","clone"])):f("",!0),n.type=="groups"?(i(),d(B,{key:2},[a.formGroupList&&a.formGroupList.length>0&&e.getFormCategoryType!=="user"&&e.getFormCategoryType!=="organisation"&&e.getFormCategoryType!=="license"?(i(),A(m,{key:0,class:"form__menulsit row",list:a.formGroupList,group:{name:"faveo-form-builder",pull:"clone",put:!1},clone:o.cloneElement},{item:T(({element:g,index:b})=>[s("div",_p,[P((i(),d("div",{class:"info-box menu-info-box bg-light mb-2",key:g.id},[t[2]||(t[2]=s("span",{class:"info-box-icon menu-icon"},[s("i",{class:"fas fa-layer-group"})],-1)),s("div",fp,[s("span",gp,h(g.name),1)])])),[[p,g.name]])])]),_:1},8,["list","clone"])):f("",!0)],64)):f("",!0)])])}const Ai=x(sp,[["render",vp],["__scopeId","data-v-3cb19dd4"]]);const bp={name:"form-builder-main",components:{"faveo-form-builder-menu":Ai,"text-field":we,"dynamic-select":Be},props:{groupMode:{type:String,default:""},formNameObj:{type:Object,default:()=>{}},formLinker:{type:Array,default:()=>[]},editFormGroupApi:{type:String,default:()=>""},postFromGroupApi:{type:String,default:()=>""},formCategoryType:{type:String,default:""}},data:()=>({pageHeading:"create-form",hasMenuLoaded:!1,hasFormFieldsLoaded:!1,showLoader:!0,formGroupList:[],isCreateFormGroup:!1,isEditFormGroup:!1,formGroupId:null,activeFormCategoryType:"",formCategoryTypes:[],localFormNameObj:"",localFormLinker:"",showDeleteModal:!1,deleteType:"",deleteData:"",deleteId:""}),beforeMount(){this.localFormNameObj=this.formNameObj,this.localFormLinker=this.formLinker,this.activeFormCategoryType=this.formCategoryType,this.setInitialValue(),this.groupMode=="create"&&(this.localFormNameObj.value="",this.localFormLinker=this.localFormLinker.map(e=>({...e,value:[]})))},computed:{formFieldsStoreValue:{get(){return this.$store.getters.getFormFields},set(e){this.$store.dispatch("updateFormFields",e)}}},created(){window.emitter.on("formFieldSettingsApplied",this.applySettingsChanges),window.emitter.on("onRemoveElement",this.onRemoveElement),window.emitter.on("getFormDataFromServer",this.getFormDataFromServer)},methods:{setInitialValue(){const e=this.getCurrentWindowLocation();e.indexOf("create")!==-1&&e.indexOf("forms/create")===-1?(this.isCreateFormGroup=!0,this.hasFormFieldsLoaded=!0,this.pageHeading="create-form",this.showLoader=!1,this.localFormNameObj.value="",this.localFormLinker.forEach((t,a)=>{t.value=[]})):e.indexOf("edit")>-1&&(this.formGroupId=Ue(e),this.isEditFormGroup=!0,this.pageHeading="edit-form",this.showLoader=!1),!this.isCreateFormGroup&&!this.isEditFormGroup?this.getFormCategories():(this.getMenuJson(),this.assignFormFields())},getFormCategories(){V.get("api/dependency/form-categories").then(e=>{this.formCategoryTypes=e.data.data.form_categories,this.activeFormCategoryType=this.formCategoryTypes[0].category,this.getFormDataBasisOnCategory()}).catch(e=>{U(e,"form-builder-main")})},getFormDataBasisOnCategory(){this.getFormGroupList(),this.getMenuJson(),this.assignFormFields()},getCurrentWindowLocation(){return window.location.pathname},getMenuJson(){V.get("api/get-form-menu/"+this.activeFormCategoryType).then(e=>{this.$store.commit("updateFormMenu",e.data.data),this.hasMenuLoaded=!0})},assignFormFields(){this.isCreateFormGroup?this.$store.commit("updateFormFields",[]):this.getFormDataFromServer().then(e=>{this.isEditFormGroup&&(this.localFormNameObj.value=e.data.data[this.localFormNameObj.id]?e.data.data[this.localFormNameObj.id]:"",this.localFormLinker.forEach(t=>{t.value=e.data.data[t.id]?e.data.data[t.id]:[]})),this.hasFormFieldsLoaded=!0})},onTabClick(e){this.activeFormCategoryType!==e&&(this.activeFormCategoryType=e,this.getMenuJson(),this.getFormGroupList(),this.getFormDataFromServer())},getFormDataFromServer(){this.showLoader=!0,this.$store.commit("updateFormCategoryType",this.activeFormCategoryType);let e="api/get-form-data",t={category:this.activeFormCategoryType,config:!0};return this.isEditFormGroup&&(e=this.editFormGroupApi+"/"+this.formGroupId,t.config=!1),V.get(e,{params:t}).then(a=>(this.$store.commit("updateFormFields",a.data.data.form_fields),this.showLoader=!1,a)).catch(a=>{this.showLoader=!1,U(a,"form-builder-main")})},isValidFormName(){if(this.isCreateFormGroup||this.isEditFormGroup){const{errors:e,isValid:t}=Li(this.$props);return t}else return!0},getFormGroupList(){if(this.activeFormCategoryType==="user"||this.activeFormCategoryType==="organisation")return;this.showLoader=!0;const e={limit:2e3,supplements:this.activeFormCategoryType};V.get("api/dependency/form-groups",{params:e}).then(t=>{this.formGroupList=t.data.data.form_groups.map(a=>({id:a.id,title:a.name,name:a.name,type:"group",edit_url:a.edit_url,is_deletable:1}))}).catch(t=>{console.error("Error in getting form group list ",t)}).finally(()=>{this.showLoader=!1})},async onSaveForm(){if(this.isValidFormName()){const e=this.$store.getters.getFormFields;this.assignSortOrder(e),this.saveForm(e)}},assignSortOrder(e){for(let t=0;t<e.length;t++)e[t].sort_order=t,Te(e[t].options)&&this.assignSortOrder(e[t].options),Te(e[t].labels)&&this.assignSortOrder(e[t].labels),Te(e[t].nodes)&&this.assignSortOrder(e[t].nodes),Te(e[t].labels_for_form_field)&&this.assignSortOrder(e[t].labels_for_form_field)},saveForm(e){this.showLoader=!0;let t=this.isCreateFormGroup||this.isEditFormGroup?this.postFromGroupApi:"api/post-form-data";V.post(t,this.getSaveFormParams(e)).then(a=>{K(a,"form-builder-main"),this.isCreateFormGroup||this.isEditFormGroup?(this.showLoader=!1,setTimeout(()=>{this.$router.push({name:"FormGroups Index"})},3e3)):this.getFormDataFromServer().then(()=>{this.showLoader=!1})}).catch(a=>{this.showLoader=!1,U(a,"form-builder-main")})},getSaveFormParams(e){let t={};return t.category=this.activeFormCategoryType,t["form-fields"]=e,(this.isCreateFormGroup||this.isEditFormGroup)&&(t[this.localFormNameObj.submitFormParamKey]=this.localFormNameObj.value,this.localFormLinker.forEach(a=>{t[a.submitFormParamKey]=a.value.map(r=>r.id)})),this.isEditFormGroup&&(t.id=this.formGroupId),t},onRemoveElement(e){this.showDeleteModal=!0,this.deleteType=e.reference_type,this.deleteData=e.fieldData,this.deleteId=e.reference_id},doDelete(){this.showDeleteModal=!1,this.isDeleteFromDB(this.deleteData)?this.deleteElementFormDB(this.deleteData.id,this.deleteId,this.deleteType):this.deleteElementLocally(this.deleteData.form_identifier)},deleteElementLocally(e){const t=this.$store.getters.getFormFields;this.removeAt(t,e)&&this.$store.dispatch("updateFormFields",t)},deleteElementFormDB(e,t,a){this.showLoader=!0;let r="api/delete-form-data/form-field/"+e;t&&(r="api/unlink-form-group/"+a+"/"+t),V.delete(r).then(n=>{K(n,"form-builder-main"),this.getFormDataFromServer(),this.showLoader=!1}).catch(n=>{this.showLoader=!1,U(n,"form-builder-main")})},isDeleteFromDB(e){return e.type==="group"?typeof e.groupid>"u":e.id.toString().length<13},removeAt(e,t){let a=dt.findIndex(e,r=>r.form_identifier===t);if(a!==-1)e.splice(a,1);else for(let r=0;r<e.length;r++)Te(e[r].options)&&this.removeAt(e[r].options,t),Te(e[r].nodes)&&this.removeAt(e[r].nodes,t);return new Promise(r=>{r(!0)})},async applySettingsChanges(e){const t=this.$store.getters.getFormFields;await this.assignNewValue(t,e.form_identifier,e)&&this.$store.dispatch("updateFormFields",t)},assignNewValue(e,t,a){let r=dt.findIndex(e,n=>n.form_identifier===t);if(r!==-1)e[r]=a;else for(let n=0;n<e.length;n++)Te(e[n].options)&&this.assignNewValue(e[n].options,t,a),Te(e[n].nodes)&&this.assignNewValue(e[n].nodes,t,a);return new Promise(n=>{n(!0)})}}},yp={class:"col-sm-12"},kp={class:"card card-light"},wp={class:"card-header"},Cp={class:"card-title",id:"box-title-1"},Dp={class:"card-tools"},Sp={class:"row"},Mp={class:"col-lg-3"},Fp={class:"card mt-4 ms-2"},$p={class:"form-builder-menu m-2"},Tp={class:"col-lg-9"},Ep={class:"card mt-4 me-2"},Lp={class:"card-body form-builder-body"},Ap={key:0},Ip={key:0,class:"row"},Pp={class:"nav nav-tabs",role:"tablist"},Op=["id"],qp=["onClick"],xp={class:"mt-2"},Vp={class:"modal-title"};function Np(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("faveo-form-builder-menu"),b=v("text-field"),w=v("dynamic-select"),S=v("draggable-form-field-item"),C=v("modal"),M=H("focus-first-input");return i(),d("div",yp,[u(m,{componentName:"form-builder-main"}),s("div",kp,[s("div",wp,[e.showLoader?(i(),A(p,{key:0})):f("",!0),s("h3",Cp,h(e.lang(e.pageHeading)),1),s("div",Dp,[s("button",{class:"btn btn-tool btn-light form-save-btn",onClick:t[0]||(t[0]=D=>o.onSaveForm())},[t[2]||(t[2]=s("span",{class:"fas fa-save"},null,-1)),L(" "+h(e.lang("save")),1)])])]),s("div",Sp,[s("div",Mp,[s("div",Fp,[s("div",$p,[e.hasMenuLoaded?(i(),A(g,{key:0,"form-group-list":e.formGroupList},null,8,["form-group-list"])):f("",!0)])])]),s("div",Tp,[s("div",Ep,[s("div",Lp,[e.hasFormFieldsLoaded&&e.hasMenuLoaded?(i(),d("div",Ap,[e.isCreateFormGroup||e.isEditFormGroup?P((i(),d("div",Ip,[u(b,{id:e.localFormNameObj.id,classname:e.localFormNameObj.className,label:e.lang(e.localFormNameObj.label),value:e.localFormNameObj.value,type:"text",name:e.localFormNameObj.id,onChange:D=>e.localFormNameObj.value=D,placehold:e.lang(e.localFormNameObj.placeholder),required:!0},null,8,["id","classname","label","value","name","onChange","placehold"]),(i(!0),d(B,null,re(e.localFormLinker,D=>(i(),A(w,{key:D.id,id:D.id,name:D.id,classname:D.className,apiEndpoint:D.apiEndpoint,label:e.lang(D.label),value:D.value,required:!1,multiple:!0,onChange:F=>D.value=F},null,8,["id","name","classname","apiEndpoint","label","value","onChange"]))),128))])),[[M]]):f("",!0),s("ul",Pp,[(i(!0),d(B,null,re(e.formCategoryTypes,D=>(i(),d("li",{class:"nav-item",key:D.category,id:D.category},[s("a",{class:G(["nav-link",e.activeFormCategoryType===D.category?"active":""]),"data-bs-toggle":"pill",href:"javascript:;",role:"tab",onClick:F=>o.onTabClick(D.category)},h(D.name),11,qp)],8,Op))),128))]),s("div",xp,[u(S,{value:o.formFieldsStoreValue},null,8,["value"])])])):f("",!0)])])])])]),u(Ae,{name:"modal"},{default:T(()=>[e.showDeleteModal?(i(),A(C,{key:0,showModal:!0,onClose:()=>e.showDeleteModal=!1,containerStyle:{width:"400px"}},{title:T(()=>[s("h4",Vp,h(e.lang("delete")),1)]),fields:T(()=>[s("span",null,h(e.lang("are_you_sure_you_want_to_delete")),1)]),controls:T(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:t[1]||(t[1]=D=>o.doDelete()),class:"btn btn-secondary"},[t[3]||(t[3]=s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})])}const co=x(bp,[["render",Np],["__scopeId","data-v-b2356f30"]]);const Rp={name:"Widget-Modal",description:"Widget Modal component",props:{data:{type:Object,required:!0},showModal:{type:Boolean,default:!1},onClose:{type:Function},modalMode:{type:String,required:!0}},data:()=>({containerStyle:{width:"700px"},title:"",value:"",loading:!1}),beforeMount(){this.title=this.data.title,this.value=this.data.value},methods:{onChange(e,t){this[t]=e},onSubmit(){this.loading=!0;let e=this.getSubmitParams();V.post("api/update-widget/"+this.data.id,e).then(t=>{this.loading=!1,this.onClose(),K(t,"dataTableModal"),window.emitter.emit("refreshData")}).catch(t=>{this.loading=!1,U(t,"Widget-Modal")})},getSubmitParams(){return{title:this.title,value:this.value}}},components:{"text-field":we}},Up={class:"modal-title"},jp={key:0},Bp={key:1,class:"widget-view"},Yp={key:0},Hp={for:"value",class:"widget-value ps-2"},Wp={class:"widget-value ps-2"},zp=["innerHTML"],Gp={key:1,class:"text-center"};function Kp(e,t,a,r,n,o){const m=v("alert"),p=v("text-field"),g=v("tiny-editor"),b=v("modal"),w=H("focus-first-input");return a.showModal?(i(),A(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle,modalBodyClass:"widget-card-div"},{title:T(()=>[s("h4",Up,h(e.lang(a.modalMode)),1)]),alert:T(()=>[u(m,{componentName:"Widget-Modal"})]),fields:T(()=>[a.modalMode==="edit"?P((i(),d("div",jp,[u(p,{label:e.lang("title"),onChange:o.onChange,placehold:e.lang("enter_a_value"),value:e.title,type:"text",name:"title",classname:"col-sm-12"},null,8,["label","onChange","placehold","value"]),u(g,{value:e.value,type:"text",id:"widget-modal-editor",onChange:o.onChange,name:"value",label:"Value",classname:"col-sm-12",width:"100%",height:300},null,8,["value","onChange"])])),[[w]]):f("",!0),a.modalMode==="view"?(i(),d("div",Bp,[e.value?P((i(),d("div",Yp,[u(p,{label:e.lang("title"),onChange:o.onChange,placehold:e.lang("enter_a_value"),value:e.title,type:"text",name:"title",classname:"col-sm-12",disabled:!0},null,8,["label","onChange","placehold","value"]),s("label",Hp,h(e.trans("value")),1),s("div",Wp,[s("span",{innerHTML:e.value},null,8,zp)])])),[[w]]):f("",!0),e.value?f("",!0):(i(),d("div",Gp,[s("span",null,h(e.trans("no_data_found")),1)]))])):f("",!0)]),controls:T(()=>[a.modalMode==="edit"?(i(),d("button",{key:0,type:"button",id:"submit_btn",onClick:t[0]||(t[0]=S=>o.onSubmit()),class:"btn btn-primary"},[t[1]||(t[1]=s("i",{class:"fas fa-sync","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("update")),1)])):f("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const Jp=x(Rp,[["render",Kp],["__scopeId","data-v-cb9040c6"]]);const Zp={name:"widget-table-actions",description:"Widget table edit componnet",data:()=>({showModal:!1}),props:{data:{type:Object,required:!0}},methods:{onClickEvent(e){this.showModal=!0,this.modalMode=e},onClose(){this.showModal=!1}},components:{"Widget-Modal":Jp}},Qp={class:"btn-group block"};function Xp(e,t,a,r,n,o){const m=v("Widget-Modal"),p=H("tooltip");return i(),d("div",Qp,[P((i(),d("a",{id:"edit-button",onClick:t[0]||(t[0]=g=>o.onClickEvent("edit")),href:"javascript:;"},t[2]||(t[2]=[s("span",{title:"Edit",class:"btn btn-light table_btn",id:"edit_btn"},[s("i",{class:"fa fa-edit"})],-1)]))),[[p,e.lang("edit")]]),P((i(),d("a",{id:"edit-button",onClick:t[1]||(t[1]=g=>o.onClickEvent("view")),href:"javascript:;"},t[3]||(t[3]=[s("span",{title:"Edit",class:"btn btn-light table_btn",id:"edit_btn"},[s("i",{class:"fa fa-eye"})],-1)]))),[[p,e.lang("view")]]),u(Ae,{name:"modal"},{default:T(()=>[e.showModal?(i(),A(m,{key:0,onClose:o.onClose,"modal-mode":e.modalMode,showModal:e.showModal,assetId:a.data.id,data:a.data},null,8,["onClose","modal-mode","showModal","assetId","data"])):f("",!0)]),_:1})])}const e_=x(Zp,[["render",Xp],["__scopeId","data-v-6266bb4b"]]);const t_={name:"widget-list",description:"Widget list table component",data:()=>({apiUrl:"api/list-widgets/footer",columns:["name","title","action"],options:{}}),beforeMount(){this.options={headings:{name:this.trans("name"),title:this.trans("title"),action:this.trans("action")},columnsClasses:{name:"widget-name",title:"widget-title",action:"widget-action"},texts:{filter:"",limit:""},templates:{action:function(e,t){return this.h(e_,{data:t})}},sortable:["name","title"],filterable:["name","title"],requestAdapter(e){return{"sort-field":e.orderBy?e.orderBy:"name","sort-order":e.ascending?"asc":"desc","search-query":e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data.widgets,count:e.data.total}},orderBy:{column:"name",ascending:!0}}}},a_={class:"col-sm-12"},s_={class:"card card-light"},n_={class:"card-header"},o_={class:"card-title"},i_={class:"card-body"};function l_(e,t,a,r,n,o){const m=v("alert"),p=v("data-table");return i(),d("div",a_,[u(m,{componentName:"dataTableModal"}),s("div",s_,[s("div",n_,[s("h3",o_,h(e.lang("widget-settings")),1)]),s("div",i_,[u(p,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"widget-list"},null,8,["url","dataColumns","option"])])])])}const r_=x(t_,[["render",l_]]);function d_(e){const{ticket_number_prefix:t}=e;let a={ticket_number_prefix:[t,"isRequired"]};const r=new Le(N),{errors:n,isValid:o}=r.validate(a);return Ee.dispatch("setValidationError",n),{errors:n,isValid:o}}const c_={name:"checkbox",description:"Checkbox with default css class and other required props to be used throughout the project",props:{options:{type:Array,default:()=>{}},value:{type:Array,default:()=>[]},name:{type:String,default:"check"},label:{type:String,default:"label"},classname:{type:String,default:"col-sm-4"},class_name:{type:String,default:"col-sm-4"},spanClass:{type:String,default:"check_inline"},keyupListener:{type:Function,default:()=>{}},keydownListener:{type:Function,default:()=>{}},keypressEvt:{type:Function,default:()=>{}},onChange:{type:Function,Required:!0},hint:{type:String,default:""},labelStyle:{type:Object}},data(){return{checked:this.value}},watch:{value(e,t){this.checked=e},checked(e){this.onChange(e,this.name)}},components:{"tool-tip":nt}},u_={class:"row"},m_=["name","value"],h_={class:"ms-1"};function p_(e,t,a,r,n,o){const m=v("tool-tip"),p=H("tooltip");return i(),d("div",{class:G(a.classname)},[s("label",{style:bt(a.labelStyle)},h(a.label),5),a.hint!=""?(i(),A(m,{key:0,message:a.hint,size:"small"},null,8,["message"])):f("",!0),s("div",u_,[(i(!0),d(B,null,re(a.options,(g,b)=>(i(),d("span",{class:G(a.class_name)},[P(s("input",{class:"check_align mt-1",name:a.name,"onUpdate:modelValue":t[0]||(t[0]=w=>n.checked=w),type:"checkbox",value:g.value?g.value:g.id,onKeyup:t[1]||(t[1]=w=>a.keyupListener(w,a.name)),onKeydown:t[2]||(t[2]=w=>a.keydownListener(w,a.name)),onKeypress:t[3]||(t[3]=w=>a.keypressEvt(w,a.name))},null,40,m_),[[Ve,n.checked]]),P((i(),d("span",h_,[L(h(e.lang(g.name?g.name:g.label))+"  ",1)])),[[p,g.hover?g.hover:""]])],2))),256))])],2)}const Aa=x(c_,[["render",p_]]),__={props:["size","onColor","offColor","onText","offText"],data(){return{modelValue:""}}},f_=["data-size","data-on-color","data-off-color","data-on-text","data-off-text"];function g_(e,t,a,r,n,o){return P((i(),d("input",{type:"checkbox",name:"my-checkbox","onUpdate:modelValue":t[0]||(t[0]=m=>n.modelValue=m),checked:"","data-size":a.size,"data-on-color":a.onColor,"data-off-color":a.offColor,"data-on-text":a.onText,"data-off-text":a.offText},null,8,f_)),[[Ve,n.modelValue]])}const v_=x(__,[["render",g_]]);const b_={name:"ticket-settings",data(){return{showCheckbox:!1,loading:!0,hasDataPopulated:!1,pageLoad:!1,settingsData:"",customData:[],status:"",collision_avoid:"",lock_ticket_frequency:"",lockOptions:[{id:0,name:"No"},{id:1,name:"Only once"},{id:2,name:"Frequently"}],ticket_number_prefix:"",record_per_page:"",pageOptions:[{id:10,name:"10 tickets per page"},{id:25,name:"25 tickets per page"},{id:50,name:"50 tickets per page"},{id:100,name:"100 tickets per page"}],waiting_time:"",count_internal:"",show_status_date:"",show_org_details:"",show_user_location:"",inboxOptions:[{name:"Yes",value:1},{name:"No",value:0}],custom_field_name:[],automatic_redaction:"",credit_card_number:"",customOptions:[],append_reply_by_fetching_email:"",auto_assign_ticket_to_agent_on_first_reply:"",show_org_ticket_form:"",fieldsLoader:!1,page:1,hasMoreData:!0,searchTerm:"",pluginStatus:!1}},beforeMount(){this.getValues(),this.getCustomFields(),this.getPLuginStatus()},methods:{async getPLuginStatus(){try{const e=await V.get("api/agent/checkplugin");this.pluginStatus=e.data.data.plugin_status}catch(e){U(e,"TicketSettings")}},onSwitchChange(e){this.automatic_redaction=e,this.showCheckbox=!!this.automatic_redaction,this.showCheckbox||(this.credit_card_number=!1)},onSearch(){this.page=1,this.search()},search:dt.debounce(function(){this.getCustomFields("search")},350),handleCardScroll(){const e=document.getElementById("fields-container"),t=e.scrollHeight,a=e.scrollTop,r=e.clientHeight;a+r>=t-100&&!this.fieldsLoader&&this.hasMoreData&&this.getCustomFields(),this.handleScroll()},async getCustomFields(e=""){try{e==="search"&&(this.customOptions=[]),this.fieldsLoader=!0;const t=await V.get(`/custom-field-flattened?category=ticket&page=${this.page}&search-query=${this.searchTerm}&module=settings`);t.data.data.data.length>0?(t.data.data.data.forEach(a=>{a.value=""}),this.customOptions=[...this.customOptions,...t.data.data.data],this.page++,this.hasMoreData=!0):this.hasMoreData=!1}catch(t){console.error("Error fetching data:",t)}finally{this.fieldsLoader=!1}},setSelectedField(e){e.forEach(t=>{t.value="",this.customOptions.push(t)})},getValues(){V.get("/api/getTicketSetting").then(e=>{this.settingsData=e.data.data.ticket,this.updateStatesWithData(this.settingsData),this.hasDataPopulated=!0,this.loading=!1}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=d_(this.$data);return t},onSubmit(){if(this.isValid()){this.pageLoad=!0;let e={};if(e.ticket_number_prefix=this.ticket_number_prefix,e.status=this.status.id,e.collision_avoid=this.collision_avoid,e.record_per_page=this.record_per_page,e.lock_ticket_frequency=this.lock_ticket_frequency,e.waiting_time=this.waiting_time,e.count_internal=this.count_internal,e.show_status_date=this.show_status_date,e.show_user_location=this.show_user_location,e.show_org_details=this.show_org_details,e.append_reply_by_fetching_email=this.append_reply_by_fetching_email,e.auto_assign_ticket_to_agent_on_first_reply=this.auto_assign_ticket_to_agent_on_first_reply,e.automatic_redaction=this.automatic_redaction,e.credit_card_number=this.credit_card_number,e.show_org_ticket_form=this.show_org_ticket_form,e._method="PATCH",this.custom_field_name.length){let t=this.customOptions.map(r=>r.id),a=[];this.custom_field_name.map(r=>{t.includes(parseInt(r))&&a.push(parseInt(r))}),a.length&&(e.custom_field_value=a)}V.post("/api/postticket",e).then(t=>{this.pageLoad=!1,K(t,"TicketSettings"),this.getValues()}).catch(t=>{this.pageLoad=!1,U(t,"TicketSettings")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{FaveoBox:Bt,Checkbox:Qt,ToggleButton:v_,StatusSwitch:lt,"text-field":we,"dynamic-select":Be,"static-select":it,"number-field":St,"radio-button":Qe,"check-box":Aa}},y_={class:"col-sm-12"},k_={key:0,class:"row"},w_={class:"row"},C_={class:"row"},D_={class:"row"},S_={class:"alter-row"},M_={class:"redact mb-3",for:"status"},F_={class:"px-1"},$_={key:0,class:"row mb-3"},T_={class:"row"},E_={class:"row"},L_={class:"row"},A_={class:"col-sm-4"},I_={class:"search-container mb-2"},P_={key:0,class:"row"},O_={class:"card-footer",slot:"actions"},q_={key:0,class:"row"};function x_(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("dynamic-select"),b=v("number-field"),w=v("static-select"),S=v("text-field"),C=v("radio-button"),M=v("faveo-box"),D=v("status-switch"),F=v("Checkbox"),I=v("check-box"),R=v("custom-loader"),Y=H("tooltip");return i(),d("div",y_,[u(m,{componentName:"TicketSettings"}),u(M,{title:e.trans("ticket-setting")},{default:T(()=>[!n.hasDataPopulated||n.loading?(i(),d("div",k_,[u(p,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated?(i(),d(B,{key:1},[u(M,{title:e.trans("general_settings")},{default:T(()=>[s("div",w_,[u(g,{label:e.trans("default_status"),multiple:!1,name:"status",classname:"col-sm-4",apiEndpoint:"/api/dependency/statuses?supplements[purpose_of_status][]=1",value:n.status,onChange:o.onChange,strlength:30,required:!1,clearable:!1},null,8,["label","value","onChange"]),u(b,{label:e.trans("agent_collision_avoidance_duration_minutes"),value:n.collision_avoid,name:"collision_avoid",keyupListener:o.triggerEvent,onChange:o.onChange,type:"number",required:!1,placeholder:"n",classname:"col-sm-4"},null,8,["label","value","keyupListener","onChange"]),u(w,{label:e.trans("lock_ticket_frequency"),elements:n.lockOptions,name:"lock_ticket_frequency",onChange:o.onChange,value:n.lock_ticket_frequency,hideEmptySelect:!0,classname:"col-sm-4"},null,8,["label","elements","onChange","value"])]),s("div",C_,[u(S,{label:e.trans("ticket_number_prefix"),value:n.ticket_number_prefix,type:"text",name:"ticket_number_prefix",keyupListener:o.triggerEvent,onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-4",required:!0,hint:e.trans("ticket_number_prefix_description")},null,8,["label","value","keyupListener","onChange","placehold","hint"]),u(w,{label:e.trans("show_ticket_per_page"),elements:n.pageOptions,name:"record_per_page",onChange:o.onChange,value:n.record_per_page,hideEmptySelect:!0,classname:"col-sm-4",hint:e.trans("ticket-perpage-tooltip")},null,8,["label","elements","onChange","value","hint"]),u(b,{label:e.trans("waiting_time_hours"),value:n.waiting_time,name:"waiting_time",onChange:o.onChange,type:"number",keyupListener:o.triggerEvent,required:!1,placeholder:"n",classname:"col-sm-4",hint:e.trans("waiting_time_for_client_reply")},null,8,["label","value","onChange","keyupListener","hint"])]),s("div",D_,[u(C,{name:"append_reply_by_fetching_email",classname:"form-group col-sm-4",options:n.inboxOptions,label:e.trans("append_reply_by_fetching_email"),value:n.append_reply_by_fetching_email,onChange:o.onChange,hint:e.trans("append_reply_by_fetching_email_hint")},null,8,["options","label","value","onChange","hint"]),u(C,{name:"auto_assign_ticket_to_agent_on_first_reply",classname:"form-group col-sm-4",options:n.inboxOptions,label:e.trans("auto_assign_ticket_to_agent_on_first_reply"),value:n.auto_assign_ticket_to_agent_on_first_reply,onChange:o.onChange,hint:e.trans("auto_assign_ticket_to_agent_on_first_reply_hint")},null,8,["options","label","value","onChange","hint"]),u(C,{name:"show_org_ticket_form",classname:"form-group col-sm-4",options:n.inboxOptions,label:e.trans("show_org_ticket_form"),value:n.show_org_ticket_form,onChange:o.onChange},null,8,["options","label","value","onChange"])])]),_:1},8,["title"]),n.pluginStatus?(i(),A(M,{key:0,title:e.trans("automatic_redaction")},{default:T(()=>[s("div",S_,[s("label",M_,h(e.trans("automatic_redaction")),1),P((i(),d("span",F_,t[4]||(t[4]=[s("i",{class:"fas fa-question-circle ms-1",style:{"font-size":"small",color:"rgb(51, 122, 183)",cursor:"help"}},null,-1)]))),[[Y,e.trans("automatic_redaction_info")]]),t[5]||(t[5]=s("br",null,null,-1)),u(D,{name:"automatic_redaction",onChange:o.onSwitchChange,value:n.automatic_redaction,classname:"form-group col-sm-4 ms-1",bold:!0,label:e.trans("status"),hint:e.trans("text")},null,8,["onChange","value","label","hint"])]),n.showCheckbox||n.automatic_redaction===1?(i(),d("div",$_,[u(F,{name:"credit_card_number",value:n.credit_card_number,label:e.trans("credit_card_numbers"),onChange:o.onChange,hint:e.trans("credit_card_numbers_info")},null,8,["value","label","onChange","hint"])])):f("",!0)]),_:1},8,["title"])):f("",!0),u(M,{title:e.trans("inbox_settings")},{default:T(()=>[s("div",T_,[u(C,{name:"count_internal",classname:"form-group col-sm-4 mmb-3",options:n.inboxOptions,label:e.trans("include_internal_note_in_thread_count"),value:n.count_internal,onChange:o.onChange},null,8,["options","label","value","onChange"]),u(C,{name:"show_status_date",classname:"form-group col-sm-4 mb-3",options:n.inboxOptions,label:e.trans("show_status_update_date"),value:n.show_status_date,onChange:o.onChange},null,8,["options","label","value","onChange"]),u(C,{name:"show_org_details",classname:"form-group col-sm-4 mb-3",options:n.inboxOptions,label:e.trans("show_org_details"),value:n.show_org_details,onChange:o.onChange},null,8,["options","label","value","onChange"])]),s("div",E_,[u(C,{name:"show_user_location",classname:"form-group col-sm-4 mb-3",options:n.inboxOptions,label:e.trans("ticket_settings_inbox_settings_display_location"),value:n.show_user_location,onChange:o.onChange},null,8,["options","label","value","onChange"])]),s("div",L_,[s("div",A_,[s("label",null,h(e.trans("add_custom_fields")),1),s("div",I_,[P(s("input",{type:"text",placeholder:"Search...",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=X=>n.searchTerm=X),onInput:t[1]||(t[1]=(...X)=>o.onSearch&&o.onSearch(...X))},null,544),[[ze,n.searchTerm]]),t[6]||(t[6]=s("i",{class:"fas fa-search text-muted"},null,-1))]),n.customOptions.length?(i(),d("div",{key:0,id:"fields-container",onScroll:t[2]||(t[2]=(...X)=>o.handleCardScroll&&o.handleCardScroll(...X))},[u(I,{options:n.customOptions,name:"custom_field_name",value:n.custom_field_name,label:e.trans("add_custom_fields"),"label-style":{display:"none"},onChange:o.onChange,keyupListener:o.triggerEvent,classname:"col-sm-12 ps-0",class_name:"col-sm-12",spanClass:"check_grid"},null,8,["options","value","label","onChange","keyupListener"]),n.fieldsLoader?(i(),d("div",P_,[u(p,{"animation-duration":4e3,size:30})])):f("",!0)],32)):f("",!0)])])]),_:1},8,["title"]),s("div",O_,[s("button",{class:"btn btn-primary",type:"button",onClick:t[3]||(t[3]=(...X)=>o.onSubmit&&o.onSubmit(...X))},[t[7]||(t[7]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)])])],64)):f("",!0)]),_:1},8,["title"]),n.pageLoad?(i(),d("div",q_,[u(R,{duration:4e3})])):f("",!0)])}const V_=x(b_,[["render",x_],["__scopeId","data-v-bb311a54"]]);function N_(e){const{days:t,ticket_status:a,status:r}=e;let n={days:[t,"isRequired"],ticket_status:[a,"isRequired"],status:[r,"isRequired"]};const o=new Le(N),{errors:m,isValid:p}=o.validate(n);return Ee.dispatch("setValidationError",m),{errors:m,isValid:p}}const R_={name:"close-ticket-workflow",data(){return{days:"",ticket_status:"",status:"",loading:!0,hasDataPopulated:!1,pageLoad:!1,helplink:""}},beforeMount(){this.getValues()},methods:{getValues(e){V.get("/api/close-workflow").then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.workflowClose;this.days=a.days,this.send_email=a.send_email,this.status=a.status,this.ticket_status=a.ticket_status,this.helplink=a.helpLink}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},isValid(){const{errors:e,isValid:t}=N_(this.$data);return t},onChange(e,t){this[t]=e,e===null&&(this[t]="")},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={};e.days=this.days,e.ticket_status=this.ticket_status.map(t=>t.id),e.status=this.status.id,e._method="PATCH",V.post("/api/close-workflow-update",e).then(t=>{this.pageLoad=!1,K(t,"close-ticket-workflow"),this.getValues()}).catch(t=>{this.pageLoad=!1,U(t,"close-ticket-workflow")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"dynamic-select":Be,"number-field":St}},U_={class:"col-sm-12"},j_={class:"card card-light"},B_={class:"card-header"},Y_={class:"card-title"},H_={key:0,class:"card-tools"},W_=["href"],z_={class:"card-body"},G_={key:0,class:"row"},K_={class:"row"},J_={class:"row"},Z_={class:"row"},Q_={class:"card-footer"},X_={key:0,class:"row"};function ef(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("number-field"),b=v("dynamic-select"),w=v("custom-loader"),S=H("tooltip"),C=H("focus-first-input");return i(),d("div",U_,[u(m,{componentName:"close-ticket-workflow"}),s("div",j_,[s("div",B_,[s("h3",Y_,h(e.trans("close_ticket_workflow")),1),n.helplink?(i(),d("div",H_,[P((i(),d("a",{class:"btn btn-tool",href:n.helplink,target:"__blank"},t[1]||(t[1]=[s("i",{class:"fas fa-question-circle"},null,-1)]),8,W_)),[[S,e.trans("read_more")]])])):f("",!0)]),s("div",z_,[!n.hasDataPopulated||n.loading?(i(),d("div",G_,[u(p,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated?(i(),d(B,{key:1},[P((i(),d("div",K_,[u(g,{label:e.trans("no_of_days"),value:n.days,name:"days",onChange:o.onChange,keyupListener:o.triggerEvent,classname:"col-sm-6",type:"number",required:!0,placeholder:"n",hint:e.trans("close-msg1")},null,8,["label","value","onChange","keyupListener","hint"])])),[[C]]),s("div",J_,[u(b,{label:e.trans("ticket_status"),multiple:!0,name:"ticket_status",classname:"col-sm-6",apiEndpoint:"/api/dependency/statuses?config=true",value:n.ticket_status,onChange:o.onChange,strlength:30,required:!0,hint:e.trans("close_ticket_statu_msg")},null,8,["label","value","onChange","hint"])]),s("div",Z_,[u(b,{label:e.trans("target_status"),multiple:!1,name:"status",classname:"col-sm-6",apiEndpoint:"/api/dependency/statuses?supplements[purpose_of_status][]=2",value:n.status,onChange:o.onChange,strlength:30,required:!0,clearable:!!n.status,hint:e.trans("close-msg3")},null,8,["label","value","onChange","clearable","hint"])])],64)):f("",!0)]),s("div",Q_,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=M=>o.onSubmit())},[t[2]||(t[2]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)])])]),n.pageLoad?(i(),d("div",X_,[u(w,{duration:4e3})])):f("",!0)])}const tf=x(R_,[["render",ef]]);function af(e){const{company_name:t,phone:a,website:r,admin_header_color:n,agent_header_color:o,agent_sidebar_color:m,admin_sidebar_color:p,address:g}=e;let b={company_name:[t,"isRequired",{"max(50)":N("name_should_be_less_than_50_characters")}],phone:[a,{"max(15)":N("phone_number_should_be_less_than_15_digits")}],address:[g,{"max(250)":N("address_should_be_less_than_250_characters")}],admin_header_color:[n,"isRequired"],agent_header_color:[o,"isRequired"],admin_sidebar_color:[p,"isRequired"],agent_sidebar_color:[m,"isRequired"]};const w=new Le(N),{errors:S,isValid:C}=w.validate(b);return Ee.dispatch("setValidationError",S),{errors:S,isValid:C}}const sf={name:"company-settings",description:"Company Settings page",props:{},data:()=>({loading:!0,hasDataPopulated:!1,company_name:"",uselogo:!1,website:"",phone:"",address:"",admin_header_color:"",agent_header_color:"",admin_sidebar_color:"",agent_sidebar_color:"",header_colors:[{id:"navbar-light",name:"White"},{id:"navbar-dark navbar-blue",name:"Blue"},{id:"navbar-dark navbar-black",name:"Black"},{id:"navbar-dark navbar-green",name:"Green"},{id:"navbar-dark navbar-purple",name:"Purple"},{id:"navbar-dark navbar-red",name:"Red"},{id:"navbar-light navbar-yellow",name:"Yellow"},{id:"navbar-light navbar-orange",name:"Orange"}],sidebar_colors:[{id:"sidebar-dark-light",name:"White"},{id:"sidebar-dark-blue",name:"Blue"},{id:"sidebar-dark-black",name:"Black"},{id:"sidebar-dark-green",name:"Green"},{id:"sidebar-dark-purple",name:"Purple"},{id:"sidebar-dark-red",name:"Red"},{id:"sidebar-dark-yellow",name:"Yellow"},{id:"sidebar-dark-orange",name:"Orange"}],client_header_color:"",client_button_color:"",client_button_border_color:"",client_button_font_color:"",client_input_field_color:"",icon:"",logo_admin_agent:"",logo:"",selectedIcon:"",selectedLogoAdminAgent:"",selectedLogo:"",logoStyle:{visibility:"hidden"},radioOptions:[{name:"yes",value:1},{name:"no",value:0}],defaulticon:0,defaultlogo:0,header_default:!0,input_default:!0,button_default:!0,border_default:!0,font_color_default:!0,is_enabled_breadcrumb:!1,phone_country_code:null,phone_iso:"",isPhoneValid:!0}),watch:{defaultlogo(e,t){return this.defaultlogo=Te(e),e},defaulticon(e,t){return this.defaulticon=Te(e),e}},beforeMount(){this.getInitialValues()},created(){this.defaulticon=Te(this.defaulticon),this.defaultlogo=Te(this.defaulticon)},methods:{getInitialValues(){this.loading=!0,V.get("/getCompanyDetails").then(e=>{this.loading=!1,this.hasDataPopulated=!0,this.updatesStateWithData(e.data.message),this.phone_country_code=e.data.message.phone_country_code?e.data.message.phone_country_code:null,this.phone_iso=e.data.message.phone_iso?e.data.message.phone_iso:null}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0})},updatesStateWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),this.logo=e.clientlogo?e.clientlogo:"",this.logo_admin_agent=e.logo,this.admin_header_color.includes("skin")&&(this.admin_header_color=this.admin_header_color.replace("skin","navbar-dark navbar"),this.admin_sidebar_color=this.admin_header_color.replace("navbar-dark navbar","sidebar-dark")),this.agent_header_color.includes("skin")&&(this.agent_header_color=this.agent_header_color.replace("skin","navbar-dark navbar"),this.agent_sidebar_color=this.agent_header_color.replace("navbar-dark navbar","sidebar-dark")),this.border_default=this.colorMethod("client_button_border_color",this.client_button_border_color,"#00c0ef"),this.font_color_default=this.colorMethod("client_button_font_color",this.client_button_font_color,"#ffffff"),this.button_default=this.colorMethod("client_button_color",this.client_button_color,"#009aba"),this.header_default=this.colorMethod("client_header_color",this.client_header_color,"#009aba"),this.input_default=this.colorMethod("client_input_field_color",this.client_input_field_color,"#d2d6de")},colorMethod(e,t,a){return this[e]=t,t===a},checkValidity(e,t){this.isPhoneValid=t},isValid(){const{errors:e,isValid:t}=af(this.$data);return!!t},validUrl(){if(this.website){let e=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;if(this.website.match(e))return!0;this.$store.dispatch("setValidationError",{website:"Invalid URL"})}else return!0},onChange(e,t){switch(t){case"icon":this.icon=e.image;let a=e;this.selectedIcon=a.file,a.name;break;case"logo_admin_agent":this.logo_admin_agent=e.image;let r=e;this.selectedLogoAdminAgent=r.file,r.name;break;case"logo":this.logo=e.image;let n=e;this.selectedLogo=n.file,n.name;break;default:this[t]=e}},onSubmit(){if(this.isValid()&&this.validUrl()&&this.isPhoneValid){this.loading=!0;var e=new FormData;e.append("company_name",this.company_name),e.append("address",this.address),e.append("phone",this.phone),e.append("website",this.website),e.append("admin_header_color",this.admin_header_color),e.append("agent_header_color",this.agent_header_color),e.append("admin_sidebar_color",this.admin_sidebar_color),e.append("agent_sidebar_color",this.agent_sidebar_color),e.append("is_enabled_breadcrumb",this.is_enabled_breadcrumb?1:0),this.defaulticon||e.append("icon",this.selectedIcon?this.selectedIcon:this.icon),this.defaultlogo||e.append("logo_admin_agent",this.selectedLogoAdminAgent?this.selectedLogoAdminAgent:this.logo_admin_agent),e.append("logo",this.logo===""?null:this.selectedLogo?this.selectedLogo:this.logo),e.append("uselogo",this.uselogo===!0?1:0),e.append("client_header_color",this.header_default?"#009aba":this.client_header_color),e.append("client_button_color",this.button_default?"#009aba":this.client_button_color),e.append("client_button_border_color",this.border_default?"#00c0ef":this.client_button_border_color),e.append("client_button_font_color",this.font_color_default?"#ffffff":this.client_button_font_color),e.append("client_input_field_color",this.input_default?"#d2d6de":this.client_input_field_color),e.append("phone_country_code",this.phone_country_code),e.append("phone_iso",this.phone_iso);const t={headers:{"Content-Type":"multipart/form-data"}};V.post("/postcompany",e,t).then(a=>{this.loading=!1,this.hasDataPopulated=!0,K(a,"company-settings"),window.emitter.emit("companySettingsUpdated")}).catch(a=>{this.loading=!1,this.hasDataPopulated=!0,U(a,"company-settings")})}},onPhoneFieldUpdate(e,t){this[t]=e}},components:{"text-field":we,"number-field":St,"static-select":it,"check-box":Aa,"tool-tip":nt,"color-picker":us,"image-upload":gi,"radio-button":Qe,"status-switch":lt,phoneWithCountryCode:om}},nf={class:"col-sm-12"},of={key:0},lf={key:1,class:"card card-light"},rf={class:"card-header"},df={class:"card-title"},cf={class:"card-body"},uf={class:"row"},mf={class:"row"},hf={class:"row"},pf={for:"Logo and Favicon",class:"col-sm-12"},_f={class:"card card-light"},ff={class:"card-header"},gf={class:"card-title"},vf={class:"card-body"},bf={class:"row"},yf={class:"card card-light"},kf={class:"card-header"},wf={class:"card-title"},Cf={class:"card-body"},Df={class:"row"},Sf={class:"col-sm-2"},Mf={for:"Address"},Ff={class:"label_align"},$f={class:"col-sm-2"},Tf={for:"Address"},Ef={class:"label_align"},Lf={class:"col-sm-2"},Af={for:"Address"},If={class:"label_align"},Pf={class:"col-sm-2"},Of={for:"Address"},qf={class:"label_align"},xf={class:"col-sm-2"},Vf={for:"Address"},Nf={class:"label_align"},Rf={class:"col-sm-2"},Uf={for:"status"},jf={class:"row"},Bf={for:"Logo and Favicon",class:"col-sm-12"},Yf={class:"card card-light"},Hf={class:"card-header"},Wf={class:"card-title"},zf={class:"card-body"},Gf={class:"row"},Kf={class:"label_align col-md-4 text-center"},Jf={class:"label_align col-md-4 text-center"},Zf={class:"label_align col-md-4 text-center"},Qf={class:"row"},Xf={class:"card-footer"},eg=["disabled"];function tg(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("text-field"),b=v("phoneWithCountryCode"),w=v("static-select"),S=v("tool-tip"),C=v("color-picker"),M=v("status-switch"),D=v("image-upload"),F=H("focus-first-input");return i(),d("div",nf,[s("div",null,[u(m,{componentName:"company-settings"})]),e.loading?(i(),d("div",of,[u(p,{loadingSpeed:4e3})])):f("",!0),e.hasDataPopulated?(i(),d("div",lf,[s("div",rf,[s("h3",df,h(e.lang("company_settings")),1)]),s("div",cf,[P((i(),d("div",uf,[u(g,{label:e.lang("name"),type:"text",value:e.company_name,name:"company_name",class:"col-sm-4",required:!0,onChange:o.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"]),u(b,{id:"phone",classname:"col-sm-4",name:"phone",onChange:o.onChange,value:e.phone,countryCode:e.phone_country_code,countryIso:e.phone_iso,onCountCode:t[0]||(t[0]=I=>o.onPhoneFieldUpdate(I,"phone_country_code")),onCountIso:t[1]||(t[1]=I=>o.onPhoneFieldUpdate(I,"phone_iso")),label:e.lang("phone"),apiUrl:"/api/dependency/country-codes?time="+Date.now(),onValidPhoneNumber:o.checkValidity,fieldType:"FIXED_LINE_OR_MOBILE"},null,8,["onChange","value","countryCode","countryIso","label","apiUrl","onValidPhoneNumber"]),u(g,{label:e.lang("website"),type:"text",name:"website",value:e.website,classname:"col-sm-4",onChange:o.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"])])),[[F]]),s("div",mf,[u(g,{label:e.lang("address"),type:"textarea",name:"address",value:e.address,rows:5,classname:"col-sm-12",onChange:o.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"])]),s("div",hf,[s("div",pf,[s("div",_f,[s("div",ff,[s("h3",gf,h(e.lang("agent_panel_color_configuartion")),1)]),s("div",vf,[s("div",bf,[u(w,{label:e.lang("admin_header_color"),elements:e.header_colors,name:"admin_header_color",value:e.admin_header_color,classname:"col-sm-3",onChange:o.onChange,required:!0},null,8,["label","elements","value","onChange"]),u(w,{label:e.lang("admin_sidebar_color"),elements:e.sidebar_colors,name:"admin_sidebar_color",value:e.admin_sidebar_color,classname:"col-sm-3",onChange:o.onChange,required:!0},null,8,["label","elements","value","onChange"]),u(w,{label:e.lang("agent_header_color"),elements:e.header_colors,name:"agent_header_color",value:e.agent_header_color,classname:"col-sm-3",onChange:o.onChange,required:!0},null,8,["label","elements","value","onChange"]),u(w,{label:e.lang("agent_sidebar_color"),elements:e.sidebar_colors,name:"agent_sidebar_color",value:e.agent_sidebar_color,classname:"col-sm-3",onChange:o.onChange,required:!0},null,8,["label","elements","value","onChange"])])])]),s("div",yf,[s("div",kf,[s("h3",wf,[L(h(e.lang("client_panel_configuartion"))+" ",1),u(S,{message:e.lang("color_configuartion_tooltip"),size:"medium"},null,8,["message"])])]),s("div",Cf,[s("div",Df,[s("div",Sf,[s("label",Mf,h(e.lang("client_header_color")),1),s("label",Ff,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultheader","onUpdate:modelValue":t[2]||(t[2]=I=>e.header_default=I)},null,512),[[Ve,e.header_default]]),L(" "+h(e.lang("use_default")),1)]),e.header_default?f("",!0):(i(),A(C,{key:0,color:e.client_header_color,name:"client_header_color",onColor:o.onChange},null,8,["color","onColor"]))]),s("div",$f,[s("label",Tf,h(e.lang("client_button_color")),1),s("label",Ef,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultbutton","onUpdate:modelValue":t[3]||(t[3]=I=>e.button_default=I)},null,512),[[Ve,e.button_default]]),L(" "+h(e.lang("use_default")),1)]),e.button_default?f("",!0):(i(),A(C,{key:0,color:e.client_button_color,name:"client_button_color",onColor:o.onChange},null,8,["color","onColor"]))]),s("div",Lf,[s("label",Af,h(e.lang("client_button_border_color")),1),s("label",If,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultborder","onUpdate:modelValue":t[4]||(t[4]=I=>e.border_default=I)},null,512),[[Ve,e.border_default]]),L(" "+h(e.lang("use_default")),1)]),e.border_default?f("",!0):(i(),A(C,{key:0,color:e.client_button_border_color,name:"client_button_border_color",onColor:o.onChange},null,8,["color","onColor"]))]),s("div",Pf,[s("label",Of,h(e.lang("button_font_color")),1),s("label",qf,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultfontcolor","onUpdate:modelValue":t[5]||(t[5]=I=>e.font_color_default=I)},null,512),[[Ve,e.font_color_default]]),L(" "+h(e.lang("use_default")),1)]),e.font_color_default?f("",!0):(i(),A(C,{key:0,color:e.client_button_font_color,name:"client_button_font_color",onColor:o.onChange},null,8,["color","onColor"]))]),s("div",xf,[s("label",Vf,h(e.lang("client_input_field_color")),1),s("label",Nf,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultinput","onUpdate:modelValue":t[6]||(t[6]=I=>e.input_default=I)},null,512),[[Ve,e.input_default]]),L(" "+h(e.lang("use_default")),1)]),e.input_default?f("",!0):(i(),A(C,{key:0,color:e.client_input_field_color,name:"client_input_field_color",onColor:o.onChange},null,8,["color","onColor"]))]),s("div",Rf,[s("label",Uf,h(e.lang("show_breadcrumbs")),1),t[11]||(t[11]=s("br",null,null,-1)),u(M,{name:"is_enabled_breadcrumb",value:e.is_enabled_breadcrumb,onChange:o.onChange,classname:"float-start",bold:!0},null,8,["value","onChange"])])])])])])]),s("div",jf,[s("div",Bf,[s("div",Yf,[s("div",Hf,[s("h3",Wf,[L(h(e.lang("logo_and_favicon"))+" ",1),u(S,{message:e.lang("logo_icon_config"),size:"medium"},null,8,["message"])])]),s("div",zf,[s("div",Gf,[s("label",Kf,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"defaulticon","onUpdate:modelValue":t[7]||(t[7]=I=>e.defaulticon=I)},null,512),[[Ve,e.defaulticon]]),L(" "+h(e.lang("use_default")),1)]),s("label",Jf,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"defaultlogo","onUpdate:modelValue":t[8]||(t[8]=I=>e.defaultlogo=I)},null,512),[[Ve,e.defaultlogo]]),L(" "+h(e.lang("use_default")),1)]),s("label",Zf,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"uselogo","onUpdate:modelValue":t[9]||(t[9]=I=>e.uselogo=I)},null,512),[[Ve,e.uselogo]]),L(" "+h(e.lang("use_logo")),1)])]),s("div",Qf,[u(D,{label:e.lang("favicon"),labelStyle:e.logoStyle,value:e.icon,name:"icon",onChange:o.onChange,btnName:"change_icon",classname:"col-sm-4 text-center",is_default:e.defaulticon},null,8,["label","labelStyle","value","onChange","is_default"]),u(D,{label:e.lang("admin_logo"),labelStyle:e.logoStyle,value:e.logo_admin_agent,name:"logo_admin_agent",onChange:o.onChange,classname:"col-sm-4 text-center",is_default:e.defaultlogo},null,8,["label","labelStyle","value","onChange","is_default"]),u(D,{label:e.lang("client_logo"),labelStyle:e.logoStyle,value:e.logo,name:"logo",onChange:o.onChange,classname:"col-sm-4 text-center"},null,8,["label","labelStyle","value","onChange"])])])])])])]),s("div",Xf,[s("button",{id:"submit_btn",type:"button",onClick:t[10]||(t[10]=I=>o.onSubmit()),disabled:e.loading,class:"btn btn-primary"},[t[12]||(t[12]=s("span",{class:"fas fa-save"},null,-1)),L(" "+h(e.lang("save")),1)],8,eg)])])):f("",!0)])}const ag=x(sf,[["render",tg],["__scopeId","data-v-ab42c361"]]);function sg(e){const{name:t,system_time_zone:a,time_format:r,date_format:n,max_column:o,releases:m}=e;let p={name:[t,"isRequired"],system_time_zone:[a,"isRequired"],time_format:[r,"isRequired"],date_format:[n,"isRequired"],max_column:[o,"isRequired",{"minValue(1)":N("column_min_count")},{"maxValue(25)":N("column_count_validation")}],releases:[m,"isRequired"]};const g=new Le(N),{errors:b,isValid:w}=g.validate(p);return Ee.dispatch("setValidationError",b),{errors:b,isValid:w}}const ng={name:"system-settings",data(){return{hasDataPopulated:!1,loading:!0,pageLoad:!1,name:"",status:"",cdn:"",system_time_zone:"",time_format:"",date_format:"",radioOptions:[{name:"yes",value:1},{name:"no",value:0}],statusOptions:[{name:"status_online",value:1},{name:"offline",value:0}],cdnOptions:[{name:"on",value:1},{name:"off",value:0,hint:"cdn_off_tooltip"}],release_type:[{id:"official",name:"Official"},{id:"pre_release",name:"Pre-release"},{id:"beta",name:"Beta"}],releases:"",max_column:0,sidebar_count:!1}},beforeMount(){this.getValues()},methods:{previewMethod(e){return e?Ie(new Date).format(e.js_format):""},timeFormat(e){return Ie(new Date).format(e.js_format)},getValues(e){V.get("/api/admin/get-system-setting").then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.updatesStateWithData(t.data.data)}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},updatesStateWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=sg(this.$data);return t},onChange(e,t){this[t]=e,e===null&&(this[t]="")},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={};e.name=this.name,e.time_zone_id=this.system_time_zone.id,e.time_format=this.time_format.format,e.date_format=this.date_format.name,e.cdn=this.cdn,e.status=this.status,e.releases=this.releases,e.max_column=this.max_column,e.sidebar_count=this.sidebar_count,V.post("/api/admin/update-system-setting",e).then(t=>{this.pageLoad=!1,K(t,"system-settings"),this.getValues()}).catch(t=>{this.pageLoad=!1,U(t,"system-settings")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{checkbox:Qt,"text-field":we,"dynamic-select":Be,"radio-button":Qe,"static-select":it,"number-field":St}},og={class:"col-sm-12"},ig={class:"card card-light"},lg={class:"card-header"},rg={class:"card-title"},dg={class:"card-body"},cg={key:0,class:"row"},ug={class:"row"},mg={class:"row"},hg={class:"row"},pg={class:"card-footer"},_g={key:0,class:"row"};function fg(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("text-field"),b=v("dynamic-select"),w=v("static-select"),S=v("number-field"),C=v("radio-button"),M=v("checkbox"),D=v("custom-loader"),F=H("focus-first-input");return i(),d("div",og,[u(m,{componentName:"system-settings"}),s("div",ig,[s("div",lg,[s("h3",rg,h(e.trans("system-settings")),1)]),s("div",dg,[!n.hasDataPopulated||n.loading?(i(),d("div",cg,[u(p,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated?(i(),d(B,{key:1},[P((i(),d("div",ug,[u(g,{label:e.trans("name"),type:"text",value:n.name,name:"name",class:"col-sm-4",keyupListener:o.triggerEvent,required:!0,onChange:o.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","keyupListener","onChange","placehold"]),u(b,{label:e.trans("timezone"),multiple:!1,name:"system_time_zone",classname:"col-sm-4",apiEndpoint:"/api/dependency/time-zones",value:n.system_time_zone,onChange:o.onChange,strlength:25,required:!0},null,8,["label","value","onChange"]),u(b,{label:e.trans("timeformat"),multiple:!1,name:"time_format",classname:"col-sm-4",apiEndpoint:"/api/dependency/time-formats",value:n.time_format,onChange:o.onChange,strlength:25,required:!0,showPreview:o.timeFormat(n.time_format)},null,8,["label","value","onChange","showPreview"])])),[[F]]),s("div",mg,[u(b,{label:e.trans("dateformat"),multiple:!1,name:"date_format",classname:"col-sm-4",apiEndpoint:"/api/dependency/date-formats",value:n.date_format,onChange:o.onChange,strlength:25,required:!0,showPreview:o.previewMethod(n.date_format)},null,8,["label","value","onChange","showPreview"]),u(w,{value:n.releases,name:"releases",elements:n.release_type,label:e.trans("release-channel"),required:!0,onChange:o.onChange,classname:"col-sm-4","hide-empty-select":!0,hint:e.lang("releases-info")},null,8,["value","elements","label","onChange","hint"]),u(S,{label:e.trans("column_selection_limit"),type:"number",hint:e.trans("column_selection_limit_tooltip"),value:n.max_column,name:"max_column",class:"col-sm-4",required:!0,onChange:o.onChange,placehold:e.lang("enter_a_value")},null,8,["label","hint","value","onChange","placehold"])]),s("div",hg,[u(C,{options:n.statusOptions,label:e.trans("status"),name:"status",value:n.status,keyupListener:o.triggerEvent,onChange:o.onChange,classname:"form-group col-sm-4"},null,8,["options","label","value","keyupListener","onChange"]),u(C,{options:n.cdnOptions,label:e.trans("cdn"),name:"cdn",value:n.cdn,keyupListener:o.triggerEvent,onChange:o.onChange,classname:"form-group col-sm-4",hint:e.trans("cdn_tooltip")},null,8,["options","label","value","keyupListener","onChange","hint"]),u(M,{id:"sidebar_count",name:"sidebar_count",value:n.sidebar_count,defaultClass:"form-group col-sm-4",label:e.trans("display_count_in_sidebar"),onChange:o.onChange,classname:"col-sm-12",hint:e.trans("sidebar_count_tooltip")},null,8,["value","label","onChange","hint"])])],64)):f("",!0)]),s("div",pg,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=I=>o.onSubmit())},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)])])]),n.pageLoad?(i(),d("div",_g,[u(D,{duration:4e3})])):f("",!0)])}const gg=x(ng,[["render",fg]]),vg={name:"close-ticket-workflow",data(){return{radioOptions:[{name:"yes",value:1},{name:"no",value:0}],user_set_ticket_status:"",user_registration:"",user_show_org_ticket:"",user_reply_org_ticket:"",allow_users_to_create_ticket:"",user_show_cc_ticket:"",login_restrictions:[],checkboxOptions:[],loading:!0,hasDataPopulated:!1,pageLoad:!1,show_unauthenticated_tickets_message:!1}},beforeMount(){this.getValues()},methods:{getValues(e){V.get("/api/admin/get-user-options").then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data;this.user_set_ticket_status=a.user_set_ticket_status,this.user_registration=a.user_registration,this.user_show_org_ticket=a.user_show_org_ticket,this.user_reply_org_ticket=a.user_reply_org_ticket,this.user_show_cc_ticket=a.user_show_cc_ticket,this.allow_users_to_create_ticket=a.allow_users_to_create_ticket,this.checkboxOptions=a.login_restrictions,a.login_restrictions.forEach(r=>{r.status&&this.login_restrictions.push(r.value)})}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},onChange(e,t){this[t]=e,t==="allow_users_to_create_ticket"&&(e===1?this.show_unauthenticated_tickets_message=!0:this.closeAlert())},closeAlert(){this.show_unauthenticated_tickets_message=!1},onSubmit(){this.pageLoad=!0;const e={};e.user_set_ticket_status=this.user_set_ticket_status,e.user_registration=this.user_registration,e.user_show_org_ticket=this.user_show_org_ticket,e.user_reply_org_ticket=this.user_reply_org_ticket,e.allow_users_to_create_ticket=this.allow_users_to_create_ticket,e.user_show_cc_ticket=this.user_show_cc_ticket,e.login_restrictions=this.login_restrictions,V.post("/api/admin/user-options",e).then(t=>{this.pageLoad=!1,K(t,"user-options"),this.closeAlert(),this.getValues()}).catch(t=>{this.pageLoad=!1,U(t,"user-options")})}},components:{"radio-button":Qe,"check-box":Aa}},bg={class:"col-sm-12"},yg={class:"card card-light"},kg={class:"card-header"},wg={class:"card-title"},Cg={class:"card-body"},Dg={key:0,class:"row"},Sg={class:"card card-light"},Mg={class:"card-header"},Fg={class:"card-title"},$g={class:"card-body"},Tg={key:0,class:"alert alert-warning alert-dismissable show fade",role:"alert"},Eg={class:"row mb-3"},Lg={class:"row mb-3"},Ag={class:"row mb-3"},Ig={class:"card card-light"},Pg={class:"card-header"},Og={class:"card-title"},qg={class:"card-body"},xg={class:"row mb-3"},Vg={class:"card-footer"},Ng={key:0,class:"row"};function Rg(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("radio-button"),b=v("check-box"),w=v("custom-loader");return i(),d("div",bg,[u(m,{componentName:"user-options"}),s("div",yg,[s("div",kg,[s("h3",wg,h(e.trans("contact_and_organization_settings")),1)]),s("div",Cg,[!n.hasDataPopulated||n.loading?(i(),d("div",Dg,[u(p,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated?(i(),d(B,{key:1},[s("div",Sg,[s("div",Mg,[s("h3",Fg,h(e.trans("user-options")),1)]),s("div",$g,[n.show_unauthenticated_tickets_message?(i(),d("div",Tg,[L(h(e.trans("unauthenticated_tickets_message"))+" ",1),s("button",{type:"button",onClick:t[0]||(t[0]=(...S)=>o.closeAlert&&o.closeAlert(...S)),"aria-hidden":"true",class:G(["btn-close mb-3",{"float-end":e.appLanguage!=="ar","float-start":e.appLanguage==="ar"}])},null,2)])):f("",!0),s("div",Eg,[u(g,{options:n.radioOptions,label:e.trans("allow_unverified_contacts_to_create_ticket"),name:"allow_users_to_create_ticket",value:n.allow_users_to_create_ticket,onChange:o.onChange,classname:"form-group col-sm-6",hint:e.trans("unauth_user_ticket_create_info")},null,8,["options","label","value","onChange","hint"]),u(g,{options:n.radioOptions,label:e.trans("contact_set_ticket_status"),name:"user_set_ticket_status",value:n.user_set_ticket_status,onChange:o.onChange,classname:"form-group col-sm-6",hint:e.trans("user_set_ticket_status_info")},null,8,["options","label","value","onChange","hint"])]),s("div",Lg,[u(g,{options:n.radioOptions,label:e.trans("contact_show_cc_ticket"),name:"user_show_cc_ticket",value:n.user_show_cc_ticket,onChange:o.onChange,classname:"form-group col-sm-6",hint:e.trans("user_show_cc_ticket_info")},null,8,["options","label","value","onChange","hint"]),u(g,{options:n.radioOptions,label:e.trans("allow_contacts_registration"),name:"user_registration",value:n.user_registration,onChange:o.onChange,classname:"form-group col-sm-6",hint:e.trans("allow_users_registration_info")},null,8,["options","label","value","onChange","hint"])]),s("div",Ag,[u(b,{options:n.checkboxOptions,name:"login_restrictions",value:n.login_restrictions,label:e.trans("contact-account-activation-and-verifcation"),onChange:o.onChange,classname:"col-md-4 col-sm-6",hint:e.trans("contact-account-activation-and-verifcation_info")},null,8,["options","value","label","onChange","hint"])])])]),s("div",Ig,[s("div",Pg,[s("h3",Og,h(e.trans("organization-options")),1)]),s("div",qg,[s("div",xg,[u(g,{options:n.radioOptions,label:e.trans("allow_users_to_show_organization_tickets"),name:"user_show_org_ticket",value:n.user_show_org_ticket,onChange:o.onChange,classname:"form-group col-sm-6",hint:e.trans("allow_users_to_show_organization_tickets_info")},null,8,["options","label","value","onChange","hint"]),u(g,{options:n.radioOptions,label:e.trans("allow_users_to_reply_organization_tickets"),name:"user_reply_org_ticket",value:n.user_reply_org_ticket,onChange:o.onChange,classname:"form-group col-sm-6",hint:e.trans("allow_users_to_reply_organization_tickets_info")},null,8,["options","label","value","onChange","hint"])])])])],64)):f("",!0)]),s("div",Vg,[s("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=S=>o.onSubmit())},[t[2]||(t[2]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)])])]),n.pageLoad?(i(),d("div",Ng,[u(w,{duration:4e3})])):f("",!0)])}const Ug=x(vg,[["render",Rg]]),jg={props:{data:{type:Object,required:!0}},computed:{isDefault(){return this.data.system_default_language}},methods:{async makeDefault(e){this.loading=!0,await V.patch("api/admin/update-system-language/"+e).then(t=>{this.loading=!1,this.updateTable+=1,K(t,"language"),window.emitter.emit("refreshData")}).catch(t=>{this.loading=!1,U(t,"language")})}}},Bg={class:"actions-row"},Yg=["disabled"],Hg=["href"];function Wg(e,t,a,r,n,o){const m=H("tooltip");return i(),d("div",Bg,[P((i(),d("button",{class:"btn btn-light table_btn",disabled:a.data.system_default_language,onClick:t[0]||(t[0]=p=>o.makeDefault(a.data.iso_code))},[s("i",{class:G([o.isDefault?"fas fa-check success":"fa-solid fa-right-to-bracket"])},null,2)],8,Yg)),[[m,o.isDefault?e.trans("already_default"):e.trans("make_default")]]),P((i(),d("a",{class:"btn btn-light table_btn",href:e.basePath()+"/api/admin/download-language-template/"+a.data.id},t[1]||(t[1]=[s("i",{class:"fas fa-download"},null,-1)]),8,Hg)),[[m,e.trans("download_lang_files")]])])}const zg=x(jg,[["render",Wg]]);const Gg={name:"languages-index",description:"Languages table component",data(){return{columns:["language","native_name","iso_code","system_default_language","action"],options:{},apiUrl:"api/admin/language-list",loading:!1,updateTable:0}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{language:this.trans("language"),native_name:this.trans("native_name"),iso_code:this.trans("iso-code"),system_default_language:this.trans("system_default"),action:this.trans("action")},columnsClasses:{language:"lang-name",native_name:"lang-native",iso_code:"lang-iso",system_default_language:"lang-default"},templates:{system_default_language(t,a){return e.h("span",{class:a.system_default_language?"btn btn-light text-success btn-sm pointer_normal":"btn btn-light text-danger btn-sm pointer_normal"},a.system_default_language?this.lang("Yes"):this.lang("No"))},language(t,a){return e.h("span",{innerHTML:a.language})},action:(t,a)=>e.h(zg,{data:a})},sortable:["language","native_name","iso_code"],filterable:["language","native_name","iso_code"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"language_name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.data.total,{data:t.data.data,count:t.data.total}},orderBy:{column:"language_name",ascending:!0}}},methods:{makeDefault(e){this.loading=!0,V.patch("api/admin/update-system-language/"+e).then(t=>{this.loading=!1,this.updateTable+=1,K(t,"language"),location.reload()}).catch(t=>{this.loading=!1,U(t,"language")})}}},Kg={class:"col-sm-12"},Jg={class:"card card-light"},Zg={class:"card-header"},Qg={class:"card-title"},Xg={class:"card-body",id:"lang-table"};function ev(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("data-table");return i(),d("div",Kg,[u(m,{componentName:"language"}),n.loading?(i(),A(p,{key:0,duration:4e3})):f("",!0),s("div",Jg,[s("div",Zg,[s("h3",Qg,h(e.trans("language-settings")),1)]),s("div",Xg,[n.apiUrl?(i(),A(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"lang-table",key:n.updateTable},null,8,["url","dataColumns","option"])):f("",!0)])])])}const tv=x(Gg,[["render",ev]]);const av={name:"cron-settings",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,job_list:"",exec_enabled:!1,cron_path:"",phpPaths:"",php_path:"",labelStyle:{display:"none"},custom_php_path:"",copying:!1,timeOptions:[]}},beforeMount(){this.getCronData(),this.getTimeOptions()},methods:{isVisible(e,t){let a=["ticket:archive","archive:delete"],r=["everyFiveMinutes","everyMinute","everyThirtyMinutes","everyTenMinutes"];return!(a.includes(t)&&r.includes(e))},getTimeOptions(){V.get("/api/dependency/cron-time-commands").then(e=>{this.timeOptions=e.data.data.cron_time_commands}).catch(e=>{this.timeOptions=[]})},getCronData(){this.loading=!0,V.get("/api/admin/get-cron-setting").then(e=>{this.cron_path=e.data.data.cron_path,this.exec_enabled=e.data.data.exec_enabled,this.exec_enabled||this.$store.dispatch("setAlert",{type:"warning",duration:5e5,message:N("please_enable_php_exec_for_cronjob_check"),component_name:"cron"}),this.job_list=e.data.data.job_list,this.job_list.map(t=>{t.active=!!t.active,t.value.includes("dailyAt")&&(t.daily_time=t.value.split(",")[t.value.split(",").length-1],t.value="dailyAt")}),this.phpPaths=e.data.data.php_bin_paths,this.hasDataPopulated=!0,this.loading=!1}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1})},clearPhpPath(){this.php_path="",this.custom_php_path=""},copyCommand(){this.copying=!0;let e={};e.path=this.custom_php_path?this.custom_php_path:this.php_path,V.post("/verify-php-path",e).then(t=>{xt("* * * * * "+(this.custom_php_path?this.custom_php_path:this.php_path)+" "+this.cron_path),this.copying=!1,K(t,"cron")}).catch(t=>{this.copying=!1,U(t,"cron")})},onSubmit(){const e={};let t={};this.job_list.forEach(a=>{t[a.job]={active:a.active?1:0,value:a.active?a.value:""},a.value.includes("dailyAt")&&a.daily_time&&a.active&&(t[a.job].time=a.daily_time)}),e.job_list=t,e._method="PATCH",this.pageLoad=!0,V.post("/api/admin/update-cron-setting",e).then(a=>{this.pageLoad=!1,K(a,"cron"),this.getCronData(),this.$store.dispatch("unsetValidationError")}).catch(a=>{this.pageLoad=!1,U(a,"cron")})}},components:{"tool-tip":nt,"form-field-template":ls}},sv={class:"col-sm-12"},nv={class:"card card-light"},ov={class:"card-header"},iv={class:"card-title"},lv={class:"card-body"},rv={key:0,class:"row"},dv={key:1},cv={class:"card p-4 bg-light"},uv={class:"row"},mv={class:"col-sm-4"},hv={disabled:"",value:""},pv=["value"],_v={value:"other"},fv={key:1,class:"input-group"},gv=["placeholder"],vv={class:"input-group-append"},bv={class:"col-sm-5"},yv={class:"text-md"},kv={class:"col-sm-1"},wv={key:1,class:"pointer"},Cv={class:"row"},Dv={class:"col-md-6"},Sv={class:"info-box"},Mv={class:"info-box-icon bg-info"},Fv={class:"info-box-content"},$v={class:"row"},Tv={class:"col-md-7"},Ev={class:"form-group mt-4"},Lv={name:"share"},Av=["onUpdate:modelValue"],Iv={key:0,class:"col-md-5 mt-13",id:"fetching-command-block"},Pv={class:"row"},Ov=["onUpdate:modelValue"],qv={value:""},xv=["value"],Vv={key:0,class:"col-sm-6",id:"fetching-daily-at"},Nv=["name","onUpdate:modelValue"],Rv={key:0,class:"card-footer"},Uv=["disabled"];function jv(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("tool-tip"),w=v("form-field-template"),S=H("tooltip");return i(),d("div",sv,[u(m,{componentName:"cron"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",nv,[s("div",ov,[s("h3",iv,h(e.trans("cron_settings")),1)]),s("div",lv,[!n.hasDataPopulated||n.loading?(i(),d("div",rv,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated?(i(),d("div",dv,[s("p",null,h(e.trans("copy-cron-command-description")),1),s("div",cv,[s("div",uv,[t[8]||(t[8]=s("div",{class:"col-sm-2"},[s("span",{class:"fs-3"},"*  *  *  *  *")],-1)),s("div",mv,[n.php_path!="other"?P((i(),d("select",{key:0,class:"form-control","onUpdate:modelValue":t[0]||(t[0]=C=>n.php_path=C)},[s("option",hv,h(e.trans("specify-php-executable")),1),(i(!0),d(B,null,re(n.phpPaths,(C,M)=>(i(),d("option",{value:C},h(C),9,pv))),256)),s("option",_v,h(e.trans("other")),1)],512)),[[Ea,n.php_path]]):f("",!0),n.php_path=="other"?(i(),d("div",fv,[P(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=C=>n.custom_php_path=C),placeholder:e.trans("specify-php-executable")},null,8,gv),[[ze,n.custom_php_path]]),s("div",vv,[s("a",{href:"javascript:;",class:"input-group-text",onClick:t[2]||(t[2]=(...C)=>o.clearPhpPath&&o.clearPhpPath(...C))},t[5]||(t[5]=[s("i",{class:"fas fa-times"},null,-1)]))])])):f("",!0)]),s("div",bv,[s("span",yv,h(n.cron_path),1)]),s("div",kv,[n.copying?f("",!0):P((i(),d("span",{key:0,onClick:t[3]||(t[3]=C=>o.copyCommand()),class:"pointer"},t[6]||(t[6]=[s("i",{class:"far fa-clipboard fa-2x"},null,-1)]))),[[S,e.trans("verify-and-copy-command")]]),n.copying?(i(),d("span",wv,t[7]||(t[7]=[s("i",{class:"fas fa-circle-notch fa-spin fa-2x"},null,-1)]))):f("",!0)])])]),s("div",Cv,[(i(!0),d(B,null,re(n.job_list,C=>(i(),d("div",Dv,[s("div",Sv,[s("span",Mv,[s("i",{class:G(C.icon)},null,2)]),s("div",Fv,[s("div",$v,[s("div",Tv,[s("div",Ev,[s("label",Lv,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"active",id:"active_job","onUpdate:modelValue":M=>C.active=M},null,8,Av),[[Ve,C.active]]),L("  "+h(e.trans(C.job)),1)]),u(b,{message:e.trans(C.job_info),size:"small"},null,8,["message"])])]),C.active?(i(),d("div",Iv,[s("div",Pv,[u(w,{label:"select",labelStyle:n.labelStyle,name:"job_list."+C.job+".value",classname:C.value=="dailyAt"?"col-sm-6":"col-sm-12"},{default:T(()=>[P(s("select",{class:"form-control col-sm-12","onUpdate:modelValue":M=>C.value=M},[s("option",qv,h(e.trans("select")),1),(i(!0),d(B,null,re(n.timeOptions,M=>(i(),d(B,null,[o.isVisible(M.id,C.command)?(i(),d("option",{key:0,value:M.id},h(M.name),9,xv)):f("",!0)],64))),256))],8,Ov),[[Ea,C.value]])]),_:2},1032,["labelStyle","name","classname"]),C.value=="dailyAt"?(i(),d("div",Vv,[u(w,{label:"time",labelStyle:n.labelStyle,name:"job_list."+C.job+".time",classname:"col-sm-12"},{default:T(()=>[P(s("input",{class:"form-control",placeholder:"H:m",name:"job_list."+C.job+".time",type:"text","onUpdate:modelValue":M=>C.daily_time=M},null,8,Nv),[[ze,C.daily_time]])]),_:2},1032,["labelStyle","name"])])):f("",!0)])])):f("",!0)])])])]))),256))])])):f("",!0)]),n.hasDataPopulated?(i(),d("div",Rv,[s("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...C)=>o.onSubmit&&o.onSubmit(...C)),disabled:n.pageLoad},[t[9]||(t[9]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,Uv)])):f("",!0)])])}const Bv=x(av,[["render",jv],["__scopeId","data-v-2dbc3107"]]);function Yv(e){const{backlist_threshold:t,lockout_period:a,lockout_message:r,max_attempts:n,expiry_time:o,password_reset_attempts_awaiting_time:m}=e;let p={lockout_period:[a,"isRequired"],backlist_threshold:[t,"isRequired"],max_attempts:[n,"isRequired",{"maxValue(3)":N("password_reset_max_attempts")},{"minValue(1)":N("password_reset_min_attempts")}],expiry_time:[o,"isRequired",{"maxValue(30)":N("password_reset_min_expiry")},{"minValue(5)":N("password_reset_max_expiry")}],password_reset_attempts_awaiting_time:[m,"isRequired",{"maxValue(43200)":N("password_reset_attempts_awaiting_time_max")},{"minValue(30)":N("password_reset_attempts_awaiting_time_min")}]};const g=new Le(N),{errors:b,isValid:w}=g.validate(p);return Ee.dispatch("setValidationError",b),{errors:b,isValid:w}}const Hv={name:"security-settings",data(){return{backlist_threshold:"",lockout_period:"",loading:!1,hasDataPopulated:!1,pageLoad:!1,securityId:"",is_2fa_enforced:!1,max_attempts:3,expiry_time:"",password_reset_attempts_awaiting_time:60,options:[{id:1,name:1},{id:2,name:2},{id:3,name:3}]}},beforeMount(){this.getInitialValues()},methods:{getInitialValues(){this.loading=!0,V.get("/api/security").then(e=>{this.backlist_threshold=e.data.data.backlist_threshold,this.lockout_period=e.data.data.lockout_period,this.is_2fa_enforced=e.data.data.is_2fa_enforced,this.securityId=e.data.data.id,this.loading=!1,this.hasDataPopulated=!0,this.max_attempts=e.data.data.password_reset_max_attempts,this.expiry_time=e.data.data.password_reset_link_expiry,this.password_reset_attempts_awaiting_time=e.data.data.password_reset_attempts_awaiting_time}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0})},isValid(){const{errors:e,isValid:t}=Yv(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={};e.backlist_threshold=this.backlist_threshold,e.lockout_period=this.lockout_period,e.is_2fa_enforced=this.is_2fa_enforced?1:0,e.password_reset_max_attempts=this.max_attempts,e.password_reset_link_expiry=this.expiry_time,e.password_reset_attempts_awaiting_time=this.password_reset_attempts_awaiting_time,e._method="PATCH",V.post("/api/security/"+this.securityId,e).then(t=>{this.pageLoad=!1,K(t,"security"),this.getInitialValues(),setTimeout(()=>{window.emitter.emit("securitySettingsUpdated",!!this.is_2fa_enforced)},1e3)}).catch(t=>{this.pageLoad=!1,U(t,"security")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"static-select":it,"text-field":we,"number-field":St,"status-switch":lt,"tool-tip":nt}},Wv={class:"col-sm-12"},zv={key:0,class:"row"},Gv={key:1,class:"row"},Kv={class:"row"},Jv={class:"row"},Zv={class:"col-sm-6"},Qv={for:"is_2fa_enforced"},Xv={key:0,class:"card-footer"},eb={key:0,class:"row"};function tb(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("number-field"),b=v("static-select"),w=v("tool-tip"),S=v("status-switch"),C=v("faveo-box"),M=v("custom-loader"),D=H("focus-first-input");return i(),d("div",Wv,[u(m,{componentName:"security"}),u(C,{title:e.trans("security_settings")},{actions:T(()=>[n.hasDataPopulated?(i(),d("div",Xv,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=F=>o.onSubmit())},[t[2]||(t[2]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)])])):f("",!0)]),default:T(()=>[!n.hasDataPopulated||n.loading?(i(),d("div",zv,[u(p,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated?P((i(),d("div",Gv,[u(g,{label:e.trans("max_attempt"),value:n.backlist_threshold,name:"backlist_threshold",classname:"col-sm-6",onChange:o.onChange,placeholder:"n",type:"number",keyupListener:o.triggerEvent,required:!0,hint:e.trans("security_msg2")},null,8,["label","value","onChange","keyupListener","hint"]),u(g,{label:e.trans("lockout_period"),value:n.lockout_period,name:"lockout_period",classname:"col-sm-6",onChange:o.onChange,placeholder:"n","show-minutes":!0,type:"number",keyupListener:o.triggerEvent,required:!0,hint:e.trans("security_msg3")},null,8,["label","value","onChange","keyupListener","hint"])])),[[D]]):f("",!0),s("div",Kv,[u(b,{label:e.lang("pwd_reset_max_attempts"),hint:e.lang("pwd_reset_max_attempts_tooltip"),elements:n.options,name:"max_attempts",value:n.max_attempts,classname:"col-md-6",onChange:o.onChange,required:!0},null,8,["label","hint","elements","value","onChange"]),u(g,{name:"password_reset_attempts_awaiting_time",value:n.password_reset_attempts_awaiting_time,label:e.lang("password_reset_attempts_awaiting_time"),onChange:o.onChange,hint:e.lang("password_reset_attempts_awaiting_time_tooltip"),"show-minutes":!0,classname:"col-md-6",required:!0},null,8,["value","label","onChange","hint"])]),s("div",Jv,[u(g,{name:"expiry_time",value:n.expiry_time,label:e.lang("password_reset_link_expiry_time"),onChange:o.onChange,hint:e.lang("password_reset_link_expiry_time_tooltip"),"show-minutes":!0,classname:"col-md-6",required:!0},null,8,["value","label","onChange","hint"]),s("div",Zv,[s("label",Qv,h(e.trans("enforce_2fa")),1),u(w,{message:e.trans("2fa_enforce_tip"),size:"small"},null,8,["message"]),t[1]||(t[1]=s("br",null,null,-1)),u(S,{name:"is_2fa_enforced",value:n.is_2fa_enforced,onChange:o.onChange,classname:"float-start",bold:!0},null,8,["value","onChange"])])])]),_:1},8,["title"]),n.pageLoad?(i(),d("div",eb,[u(M,{duration:4e3})])):f("",!0)])}const ab=x(Hv,[["render",tb]]);const sb={name:"FileSystemSettings",components:{"text-field":we,"static-select":it,"status-switch":lt},props:{disks:{type:String,required:!0}},data(){return{isLoading:!1,allowedFiles:null,showPublicDiskWithDefaultDisk:0,s3_status:"status",defaultPath:"",is_installed:!1}},computed:{selectOptions(){return JSON.parse(this.disks)}},watch:{s3_status(e,t){if(t!="status"){let a=e?"/enable-s3-private-bucket":"disable-s3-private-bucket";this.updateBucket(a)}}},beforeMount(){this.getDefaultSettingsValues(),this.getS3Data(),this.getWkhtmltopdfInstallation()},methods:{getS3Data(){this.isLoading=!0,V.get("/check-private-bucket").then(e=>{this.s3_status=!!e.data.data.isPrivateBucketEnabled,this.isLoading=!1}).catch(e=>{U(e,"file-system-settings"),this.isLoading=!1})},onChange(e,t){this[t]=e},updateBucket(e){this.isLoading=!0,V.post(e).then(t=>{K(t,"file-system-settings"),this.isLoading=!1}).catch(t=>{U(t,"file-system-settings"),this.isLoading=!1})},async onSubmit(){this.isLoading=!0;try{let e=await V.put("file-system-settings",{disk:this.disk,allowedFiles:this.allowedFiles,defaultPath:this.defaultPath,showPublicDiskWithDefaultDisk:this.showPublicDiskWithDefaultDisk?1:0});K(e,"file-system-settings"),this.$store.dispatch("unsetValidationError")}catch(e){U(e,"file-system-settings")}finally{this.isLoading=!1}},async getDefaultSettingsValues(){try{let t=(await V.get("file-system-settings-values")).data.data;this.allowedFiles=t.allowed_files,this.defaultPath=t.defaultPath,this.showPublicDiskWithDefaultDisk=!!t.show_public_folder_with_default_disk}catch{Object.assign(this.$data,this.$options.data.apply(this))}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()},getWkhtmltopdfInstallation(){this.isLoading=!0,V.get("/wkhtmltopdf/installation").then(e=>{this.is_installed=!!e.data.data.is_installed,this.isLoading=!1}).catch(e=>{U(e,"file-system-settings"),this.isLoading=!1})}}},nb={class:"col-sm-12"},ob={class:"card-tools switch-pos"},ib={class:"flex"},lb={class:"switch_mb"},rb={class:"row"},db={class:"row"},cb={class:"col-sm-6"},ub={class:"label_align"},mb=["keyupListener"],hb={class:"card-footer"},pb=["disabled"];function _b(e,t,a,r,n,o){const m=v("alert"),p=v("status-switch"),g=v("custom-loader"),b=v("text-field"),w=v("faveo-box"),S=H("focus-first-input");return i(),d("div",nb,[u(m,{componentName:"file-system-settings"}),u(w,{title:e.lang("settings_file_system_page_header")},{headerMenu:T(()=>[s("div",ob,[s("div",ib,[s("label",lb,h(e.lang("s3_private_bucket")),1),u(p,{slot:"headerMenu",name:"s3_status",value:n.s3_status,onChange:o.onChange,classname:"btn-tool",bold:!0},null,8,["value","onChange"])])])]),actions:T(()=>[s("div",hb,[s("button",{id:"agent-submit",class:"btn btn-primary",type:"button",disabled:n.isLoading,onClick:t[1]||(t[1]=(...C)=>o.onSubmit&&o.onSubmit(...C))},[t[2]||(t[2]=s("span",{class:"fas fa-save",id:"submit-btn"},null,-1)),L("  "+h(e.lang("submit")),1)],8,pb)])]),default:T(()=>[n.isLoading?(i(),A(g,{key:0})):f("",!0),P((i(),d("div",rb,[u(b,{classname:"col-sm-6",onChange:o.onChange,rows:"1",label:e.lang("settings_file_system_allowed_files"),value:n.allowedFiles,type:"textarea",name:"allowedFiles",keyupListener:o.triggerEvent,hint:e.lang("settings_file_system_allowed_files_hint"),placehold:e.lang("settings_file_system_allowed_files_placeholder"),required:!0},null,8,["onChange","label","value","keyupListener","hint","placehold"]),n.is_installed?(i(),A(b,{key:0,classname:"col-sm-6",onChange:o.onChange,rows:"1",label:e.lang("wkhtmltopdf_path"),value:n.defaultPath,type:"textarea",name:"defaultPath",keyupListener:o.triggerEvent,hint:e.lang("settings_file_system_wkhtmltopdf_path"),placehold:e.lang("enter_a_value"),required:!1},null,8,["onChange","label","value","keyupListener","hint","placehold"])):f("",!0)])),[[S]]),s("div",db,[s("div",cb,[s("label",ub,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"showPublicDiskWithDefaultDisk","onUpdate:modelValue":t[0]||(t[0]=C=>n.showPublicDiskWithDefaultDisk=C),keyupListener:o.triggerEvent},null,8,mb),[[Ve,n.showPublicDiskWithDefaultDisk]]),L(" "+h(e.lang("file-manager-show-public-folder")),1)])])])]),_:1},8,["title"])])}const fb=x(sb,[["render",_b],["__scopeId","data-v-c6bb30e3"]]);const gb={name:"downloadable-row",props:{data:{type:Object,required:!0},index:{type:Number,required:!0},column:{type:String,required:!0}},data:()=>({baseUrl:window.axios.defaults.baseURL}),methods:{downloadLink(){const e=this.column==="filename"?"filesystem":"database";return this.baseUrl+"/api/download-backup/"+this.data.id+"/"+e}}},vb={id:"custom_row__dr"},bb=["href"];function yb(e,t,a,r,n,o){return i(),d("div",vb,[s("span",null,h(a.data[a.column]),1),s("a",{href:o.downloadLink(),target:"_blank"},t[0]||(t[0]=[s("i",{id:"icon__dr",class:"fa fa-download pull-right","aria-hidden":"true",title:"Download"},null,-1)]),8,bb)])}const uo=x(gb,[["render",yb],["__scopeId","data-v-06cf6467"]]);const kb={name:"system-backup-list",description:"System backup table component",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},data:()=>({loadingSpeed:4e3,refreshingDatatable:!1,isLoading:!0,perrformBackupClicked:!1,backupTriggeredSuccessfully:!1,storagePath:"",apiUrl:"api/backup/list",columns:["filename","db_name","created_at","version","action"],options:{}}),beforeMount(){this.configureOptions(),V.get("api/get-backup-path").then(e=>{this.storagePath=e.data.data.path}).catch(e=>{U(e,"system-backup-list")}).finally(()=>{this.isLoading=!1})},methods:{configureOptions(){const e=this;this.options={headings:{filename:this.trans("file_name"),db_name:this.trans("db_name"),created_at:this.trans("created-at"),version:this.trans("version"),action:this.trans("action")},texts:{filter:"",limit:""},templates:{filename:function(t,a,r,n){return e.h(uo,{data:a,index:r,column:n})},db_name:function(t,a,r,n){return e.h(uo,{data:a,index:r,column:n})},action:function(t,a){return e.h(Ye,{data:a})},created_at(t,a){return e.formattedTime(a.created_at)}},sortable:["created_at","version"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"created_at","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.delete_url=window.axios.defaults.baseURL+"/api/delete-backup/"+a.id,a)),count:t.message.total}},orderBy:{column:"created_at",ascending:!0}}},perrformBackup(){this.perrformBackupClicked=!0,V.post("api/backup/take-system-backup",{path:this.storagePath}).then(e=>{K(e,"system-backup-list"),this.backupTriggeredSuccessfully=!0}).catch(e=>{U(e,"system-backup-list")}).finally(()=>{this.perrformBackupClicked=!1})},refreshDatatable(){this.refreshingDatatable=!0,window.emitter.emit("refreshData"),setTimeout(()=>{this.refreshingDatatable=!1},500)}}},wb={id:"backup-details-container",class:"col-sm-12"},Cb={class:"card card-light"},Db={class:"card-header"},Sb={class:"card-title d-flex"},Mb={class:"mt-1"},Fb={class:"input-box__sbl"},$b={class:"card-tools"},Tb=["disabled"],Eb={class:"card-body",id:"backup-list"};function Lb(e,t,a,r,n,o){const m=v("alert"),p=v("data-table"),g=H("tooltip");return i(),d("div",wb,[u(m,{componentName:"dataTableModal"}),u(m,{componentName:"system-backup-list"}),s("div",Cb,[s("div",Db,[s("h3",Sb,[s("span",Mb,h(e.lang("backup_storage_path"))+":",1),t[3]||(t[3]=L("    ")),s("div",Fb,[P(s("input",{type:"text",class:"form-control border","onUpdate:modelValue":t[0]||(t[0]=b=>e.storagePath=b),id:"backup_storage_path",placeholder:"path/to/store/system-backup"},null,512),[[ze,e.storagePath]])])]),s("div",$b,[P((i(),d("button",{id:"create-backup__sb",class:"btn btn-tool",onClick:t[1]||(t[1]=b=>o.perrformBackup()),disabled:e.perrformBackupClicked},[s("span",{class:G(e.perrformBackupClicked?"fas fa-spinner fa-spin":"fas fa-download"),"aria-hidden":"true"},null,2)],8,Tb)),[[g,e.lang("take_system_backup")]]),e.backupTriggeredSuccessfully?P((i(),d("button",{key:0,class:"btn btn-tool",onClick:t[2]||(t[2]=b=>o.refreshDatatable())},[s("i",{class:G(e.refreshingDatatable?"fas fa-sync-alt fa-spin":"fas fa-sync-alt"),id:"refresh-data-table__sbl"},null,2)])),[[g,e.lang("refresh")]]):f("",!0)])]),s("div",Eb,[u(p,{url:e.apiUrl,dataColumns:e.columns,option:e.options},null,8,["url","dataColumns","option"])])])])}const Ab=x(kb,[["render",Lb],["__scopeId","data-v-dac75b16"]]);function Ib(e){const{value:t}=e;let a={value:[t,"isUrl"]};const r=new Le(N),{errors:n,isValid:o}=r.validate(a);return Ee.dispatch("setValidationError",n),{errors:n,isValid:o}}const Pb={name:"Social-Modal",description:"Social Modal component",props:{data:{type:Object,required:!0},showModal:{type:Boolean,default:!1},onClose:{type:Function},modalMode:{type:String,required:!0}},data:()=>({containerStyle:{width:"500px"},value:"",loading:!1}),beforeUnmount(){this.$store.dispatch("unsetValidationError")},beforeMount(){this.value=this.data.value===null?"":this.data.value},created(){this.lang_locale=localStorage.getItem("LANGUAGE"),this.ticketId=this.getStoredTicketId},methods:{onChange(e,t){this[t]=e},onSubmit(){if(this.isValidInputs()){this.loading=!0;let e=this.getSubmitParams();V.post("api/update-widget/"+this.data.id,e).then(t=>{this.loading=!1,this.onClose(),K(t,"dataTableModal"),window.emitter.emit("refreshData")}).catch(t=>{this.loading=!1,U(t,"widget-Modal")})}},getSubmitParams(){return{value:this.value}},isValidInputs(){const{errors:e,isValid:t}=Ib(this.$data);return t},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},watch:{value(e,t){this.isValidInputs()}},computed:{isValueEmpty(){return this.value?!this.value.trim():!0}},components:{"text-field":we}},Ob={class:"modal-title"},qb={class:"row"},xb={key:0,slot:"fields"},Vb=["disabled"];function Nb(e,t,a,r,n,o){const m=v("alert"),p=v("text-field"),g=v("custom-loader"),b=v("modal"),w=H("focus-first-input");return i(),d("div",null,[a.showModal?(i(),A(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:T(()=>[s("h4",Ob,h(e.lang(a.modalMode)),1)]),alert:T(()=>[u(m,{componentName:"widget-Modal"})]),fields:T(()=>[P((i(),d("div",qb,[u(p,{label:e.lang("Link"),onChange:o.onChange,required:!0,placehold:e.lang("enter_a_value"),value:e.value,type:"URL",name:"value",keyupListener:o.triggerEvent,classname:"col-sm-12"},null,8,["label","onChange","placehold","value","keyupListener"])])),[[w]]),e.loading?(i(),d("div",xb,[u(g,{duration:4e3})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=S=>o.onSubmit()),class:"btn btn-primary",disabled:o.isValueEmpty},[t[1]||(t[1]=s("i",{class:"fas fa-sync","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("update")),1)],8,Vb)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const Rb=x(Pb,[["render",Nb]]),Ub={name:"social-widget-table-actions",description:"Widget table edit componnet",data:()=>({showModal:!1}),props:{data:{type:Object,required:!0}},methods:{onClickEvent(e){this.showModal=!0,this.modalMode=e},onClose(){this.showModal=!1}},components:{"social-modal":Rb}},jb={class:"btn-group block"};function Bb(e,t,a,r,n,o){const m=v("social-modal"),p=H("tooltip");return i(),d("div",jb,[P((i(),d("a",{id:"edit-button",onClick:t[0]||(t[0]=g=>o.onClickEvent("edit")),href:"javascript:;",class:"btn btn-light table_btn"},t[1]||(t[1]=[s("i",{class:"fas fa-edit"},null,-1)]))),[[p,e.lang("edit")]]),u(Ae,{name:"modal"},{default:T(()=>[e.showModal?(i(),A(m,{key:0,onClose:o.onClose,"modal-mode":e.modalMode,showModal:e.showModal,assetId:a.data.id,data:a.data},null,8,["onClose","modal-mode","showModal","assetId","data"])):f("",!0)]),_:1})])}const Yb=x(Ub,[["render",Bb]]);const Hb={name:"social-widget-list",description:"Widget list table component",data:()=>({apiUrl:"api/list-widgets/social-icon",columns:["name","value","action"],options:{}}),beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),value:this.trans("link"),action:this.trans("action")},columnsClasses:{name:"widget-name",title:"widget-title",action:"widget-action"},texts:{filter:"",limit:""},sortable:["name","Link"],filterable:["name","Link"],templates:{action:function(t,a){return e.h(Yb,{data:a})}},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.widgets,count:t.data.total}},orderBy:{column:"name",ascending:!0}}}},Wb={class:"col-sm-12"},zb={class:"card card-light"},Gb={class:"card-header",id:"social-widget-list"},Kb={class:"card-title"},Jb={class:"card-body"};function Zb(e,t,a,r,n,o){const m=v("alert"),p=v("data-table");return i(),d("div",Wb,[u(m,{componentName:"dataTableModal"}),s("div",zb,[s("div",Gb,[s("h3",Kb,h(e.lang("social-widget-settings")),1)]),s("div",Jb,[u(p,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"social-widget-list"},null,8,["url","dataColumns","option"])])])])}const Qb=x(Hb,[["render",Zb],["__scopeId","data-v-ea658304"]]);const Xb={name:"api-settings",data(){return{api_enable:1,api_key_mandatory:1,api_key:"",radioOptions:[{name:"enable",value:1},{name:"disable",value:0}],loading:!0,hasDataPopulated:!1,pageLoad:!1,copied:!1,statusText:"",showError:!1}},beforeMount(){this.getValues()},methods:{getRandomKey(){V.get("/generate-api-key").then(e=>{this.api_key=e.data}).catch(e=>{this.api_key=""})},onCopy(){xt(this.api_key),this.copied=!0,setTimeout(()=>{this.copied=!1},5e3)},getValues(e){V.get("/api/admin/get-api-setting").then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data;this.api_enable=a.api_enable,this.api_key_mandatory=a.api_key_mandatory,this.api_key=a.api_key}).catch(t=>{U(t,"api-settings"),this.loading=!1,this.hasDataPopulated=!0})},onChange(e,t){this[t]=e},onSubmit(){if(this.showError=!1,this.statusText="",this.api_key_mandatory&&!this.api_key){this.showError=!0;return}this.pageLoad=!0;const e={};e.api_enable=this.api_enable,e.api_key_mandatory=this.api_key_mandatory,e.api_key=this.api_key,V.post("/api/admin/update-api-setting",e).then(t=>{this.statusText="",this.pageLoad=!1,K(t,"api-settings"),this.getValues()}).catch(t=>{this.statusText=t.response.data.message.api_key,this.pageLoad=!1,U(t,"api-settings")})},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"radio-button":Qe}},ey={class:"col-sm-12"},ty={key:0,class:"row"},ay={key:1,class:"row"},sy={class:"col-sm-4 form-group"},ny={key:0,class:"text-danger"},oy=["placeholder"],iy={key:1,class:"error-block is-danger"},ly={class:"card-footer"},ry=["disabled"],dy={key:0,class:"row"};function cy(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("radio-button"),b=v("faveo-box"),w=v("custom-loader"),S=H("tooltip");return i(),d("div",ey,[u(m,{componentName:"api-settings"}),u(b,{title:e.trans("api_settings")},{actions:T(()=>[s("div",ly,[s("button",{class:"btn btn-primary",onClick:t[4]||(t[4]=C=>o.onSubmit()),disabled:n.pageLoad},[t[7]||(t[7]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,ry)])]),default:T(()=>[!n.hasDataPopulated||n.loading?(i(),d("div",ty,[u(p,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated?(i(),d("div",ay,[u(g,{options:n.radioOptions,label:e.trans("api"),name:"api_enable",value:n.api_enable,onChange:o.onChange,classname:"form-group col-sm-4"},null,8,["options","label","value","onChange"]),u(g,{options:n.radioOptions,label:e.trans("api_key_mandatory"),name:"api_key_mandatory",value:n.api_key_mandatory,onChange:o.onChange,classname:"form-group col-sm-4"},null,8,["options","label","value","onChange"]),s("div",sy,[s("label",null,h(e.trans("api_key")),1),t[6]||(t[6]=L(" ")),n.api_key_mandatory?(i(),d("label",ny,"*")):f("",!0),s("button",{class:"btn btn-light float-end mb-1",id:"random",onClick:t[0]||(t[0]=C=>o.getRandomKey())},[t[5]||(t[5]=s("i",{class:"fas fa-key"},"  ",-1)),L(h(e.trans("generate_key")),1)]),s("div",{class:G(n.showError&&n.api_key_mandatory||n.statusText?"has-error":"")},[P(s("input",{type:"text",class:"form-control",name:"api_key","onUpdate:modelValue":t[1]||(t[1]=C=>n.api_key=C),onKeyup:t[2]||(t[2]=_a((...C)=>o.triggerEvent&&o.triggerEvent(...C),["enter"])),placeholder:e.trans("enter_a_value")},null,40,oy),[[ze,n.api_key]]),n.api_key?(i(),d("a",{key:0,id:"basic-addon",onClick:t[3]||(t[3]=ha(C=>o.onCopy(),["prevent"]))},[P(s("span",{class:G(n.copied?"fas fa-check text-success":"fa fa-clipboard"),id:"eye"},null,2),[[S,n.copied?e.trans("clipboard-copy-message"):e.trans("click-to-copy")]])])):f("",!0)],2),n.statusText||n.showError&&n.api_key_mandatory?(i(),d("div",iy,h(n.statusText||e.trans("this_field_is_required")),1)):f("",!0)])])):f("",!0)]),_:1},8,["title"]),n.pageLoad?(i(),d("div",dy,[u(w,{duration:4e3})])):f("",!0)])}const uy=x(Xb,[["render",cy],["__scopeId","data-v-b44c40f7"]]),my={name:"SocketDriversName",props:{data:{type:Object,required:!0}}},hy=["href"];function py(e,t,a,r,n,o){const m=H("tooltip");return i(),d("span",null,[s("span",null,h(a.data.name),1),t[1]||(t[1]=L("   ")),a.data.tooltip?P((i(),d("a",{key:0,href:a.data.document_link,target:"_blank"},t[0]||(t[0]=[s("i",{class:"fas fa-question-circle"},null,-1)]),8,hy)),[[m,a.data.tooltip]]):f("",!0)])}const _y=x(my,[["render",py]]),fy={name:"SocketDriverActivateModal",props:{showModal:{type:Boolean,default:!1},driver:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,V.post("api/post/socket-driver",{default:this.driver}).then(e=>{window.emitter.emit("DriverIndexrefreshData"),K(e,"dataTableModal"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,U(e,"dataTableModal"),this.onClose()})}}},gy={class:"modal-title"},vy={key:0},by={key:1,class:"row"},yy=["disabled"];function ky(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("modal");return a.showModal?(i(),A(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:n.containerStyle},{title:T(()=>[s("h4",gy,h(e.trans("activate")),1)]),fields:T(()=>[n.loading?f("",!0):(i(),d("div",vy,[s("span",null,h(e.trans("are_you_sure")),1)])),n.loading?(i(),d("div",by,[u(m,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...g)=>o.onSubmit&&o.onSubmit(...g)),class:"btn btn-primary",disabled:n.isDisabled},[t[1]||(t[1]=s("i",{class:"fas fa-check"},null,-1)),L(" "+h(e.trans("activate")),1)],8,yy)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const wy=x(fy,[["render",ky]]),Cy={name:"SocketDriversActions",description:"Socket table action component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1},redirectToCacheDriver(){this.$router.push(`/websockets/${this.data.driver}`)}},components:{"driver-activate-modal":wy}},Dy={key:0},Sy={key:0},My=["disabled"],Fy={key:1};function $y(e,t,a,r,n,o){const m=v("driver-activate-modal"),p=H("tooltip");return a.data?(i(),d("div",Dy,[a.data.config===0?P((i(),d("span",Sy,[s("button",{class:"btn btn-light table_btn",onClick:t[0]||(t[0]=g=>n.showModal=!0),disabled:a.data.status},t[2]||(t[2]=[s("i",{class:"fas fa-check-circle"},null,-1)]),8,My)])),[[p,a.data.status?e.trans("activated"):e.trans("activate")]]):f("",!0),a.data.config===1?P((i(),d("span",Fy,[s("button",{class:"btn btn-light table_btn",onClick:t[1]||(t[1]=(...g)=>o.redirectToCacheDriver&&o.redirectToCacheDriver(...g))},t[3]||(t[3]=[s("i",{class:"fas fa-cog"},null,-1)]))])),[[p,a.data.status?e.trans("configured"):e.trans("configure")]]):f("",!0),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(m,{key:0,onClose:o.onClose,showModal:n.showModal,driver:a.data.driver},null,8,["onClose","showModal","driver"])):f("",!0)]),_:1})])):f("",!0)}const Ty=x(Cy,[["render",$y]]);const Ey={name:"WebSocketIndex",description:"Websocket table component",data(){return{columns:["name","status","action"],options:{},activated:"",apiUrl:"api/sockets-lists"}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},columnsClasses:{name:"drivers-name",status:"drivers-status",action:"drivers-action"},texts:{filter:"",limit:""},templates:{name:(t,a)=>e.h(_y,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.status?e.trans("active"):e.trans("inactive"));return e.h("a",{class:"pointer_normal"},[r])},action:(t,a)=>e.h(Ty,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim()}},responseAdapter({data:t}){return e.activated=t.data.find(({status:a})=>a),{data:t.data,count:5}},orderBy:{column:"name",ascending:!0}}},methods:{makeAPICall(){V.post("api/post/socket-driver-deactivate",{}).then(e=>{K(e,"dataTableModal"),location.reload()}).catch(e=>{U(e,"dataTableModal")})}}},Ly={class:"col-sm-12"},Ay={class:"card card-light"},Iy={class:"card-header"},Py={class:"card-title"},Oy={style:{"padding-left":"3px"}},qy={class:"badge text-bg-info"},xy={class:"card-tools"},Vy={class:"card-body",id:"driver_index"},Ny={class:"alert alert-info"};function Ry(e,t,a,r,n,o){const m=v("alert"),p=v("data-table"),g=H("tooltip");return i(),d("div",Ly,[u(m,{componentName:"dataTableModal"}),s("div",Ay,[s("div",Iy,[s("h3",Py,h(e.trans("websocket-drivers")),1),s("sup",Oy,[s("span",qy,h(e.trans("beta")),1)]),s("div",xy,[P((i(),d("button",{class:"btn btn-tool",onClick:t[0]||(t[0]=b=>o.makeAPICall())},t[1]||(t[1]=[s("i",{class:"fa-solid fa-power-off"},null,-1)]))),[[g,e.lang("deactivate_sockets")]])])]),s("div",Vy,[s("div",Ny,h(e.trans("websockets_description")),1),u(p,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"driver_index",componentTitle:"DriverIndex"},null,8,["url","dataColumns","option"])])])])}const Uy=x(Ey,[["render",Ry]]);const jy={name:"user-import-mapper",props:{apiEndpoint:{type:String,required:!0},updateParent:{required:!0,type:Function},tableHeadings:{required:!0,type:Object},buttonText:{required:!1,type:String,default:"save"},importId:{required:!1,type:String},expandByDefault:{required:!1,type:Boolean,default:!1}},data(){return{faveoAttributeList:[],thirdPartyAttributes:[],loading:!1,hasDataPopulated:!1,minimized:!0}},created(){window.emitter.on("refreshData",this.getDataFromBackend)},beforeMount(){this.expandByDefault&&this.toggleList()},methods:{toggleList(){this.minimized=!this.minimized,this.minimized?this.hasDataPopulated=!1:(this.loading=!0,this.hasDataPopulated=!1,this.getDataFromBackend())},getDataFromBackend(){V.get(this.apiEndpoint).then(e=>{this.faveoAttributeList=e.data.data.faveo_attributes,this.thirdPartyAttributes=e.data.data.third_party_attributes,this.loading=!1,this.minimized||(this.hasDataPopulated=!0)}).catch(e=>{U(e),this.loading=!1})},onChange(e,t){let a=t.includes("overwrite")?"overwrite":"mapped_to",r=t.split("-"),n=r[r.length-1];this.faveoAttributeList[n][a]=e},onSubmit(){this.loading=!0;let e={faveo_attributes:this.faveoAttributeList};this.importId&&(e.import_id=this.importId),V.post(this.apiEndpoint,e).then(t=>{K(t,this.$options.name),this.loading=!1,this.updateParent()}).catch(t=>{U(t,this.$options.name),this.loading=!1})},disableOverwrite(e){return!Te(e)},displayAttribute(e,t){return!(e=="user_name"&&!Te(t))}},components:{checkbox:Qt,"tool-tip":nt}},By={class:"card card-light"},Yy={class:"card-header"},Hy={class:"card-title"},Wy={class:"card-tools"},zy={key:0,class:"glyphicon glyphicon-menu-down"},Gy={key:1,class:"glyphicon glyphicon-menu-up"},Ky={class:"card-body"},Jy={key:0,id:"faveo-attribute-list",class:"faveo-table table"},Zy={class:"thead-default"},Qy={class:"faveo-attribute-elements"},Xy={class:"padding-top-12"},e1=["id"],t1=["onUpdate:modelValue","id","disabled","onChange"],a1=["id","value"],s1={class:"card-footer"},n1=["disabled"];function o1(e,t,a,r,n,o){const m=v("alert"),p=v("tool-tip"),g=v("custom-loader"),b=v("checkbox"),w=H("tooltip");return i(),d("div",null,[u(m,{componentName:this.$options.name},null,8,["componentName"]),s("div",By,[s("div",Yy,[s("h3",Hy,h(e.lang("user-import-mapper")),1),u(p,{message:e.lang("user-import-mapper_instructions"),size:"large"},null,8,["message"]),s("div",Wy,[s("a",{id:"toggle-list-button",onClick:t[0]||(t[0]=(...S)=>o.toggleList&&o.toggleList(...S)),class:"btn-tool"},[n.hasDataPopulated?P((i(),d("span",Gy,null,512)),[[w,e.lang("collapse")]]):P((i(),d("span",zy,null,512)),[[w,e.lang("expand")]])])])]),s("div",Ky,[n.loading?(i(),A(g,{key:0})):f("",!0),s("div",{class:G(["toggle1",{"toggle-expand":n.hasDataPopulated}])},[n.hasDataPopulated?(i(),d("table",Jy,[s("thead",Zy,[s("tr",null,[s("th",null,[L(h(e.lang(a.tableHeadings.faveo.header))+" ",1),u(p,{message:e.lang(a.tableHeadings.faveo.description)},null,8,["message"])]),s("th",null,[L(h(e.lang(a.tableHeadings.thirdParty.header))+" ",1),u(p,{message:e.lang(a.tableHeadings.thirdParty.description)},null,8,["message"])]),s("th",null,[L(h(e.lang(a.tableHeadings.overwrite.header))+" ",1),u(p,{message:e.lang(a.tableHeadings.overwrite.description)},null,8,["message"])])])]),(i(!0),d(B,null,re(n.faveoAttributeList,(S,C)=>(i(),d("tbody",Qy,[s("tr",null,[s("td",Xy,[s("span",{id:"faveo-attribute-label-"+C},h(e.lang(S.label)),9,e1),S.description?(i(),A(p,{key:0,message:S.description,size:"small"},null,8,["message"])):f("",!0)]),s("td",null,[P(s("select",{"onUpdate:modelValue":M=>S.mapped_to=M,id:"attribute-list-"+C,disabled:S.editable==0,class:"attribute-list form-control",onChange:M=>o.onChange(S.mapped_to,"attribute-list-"+C)},[(i(!0),d(B,null,re(n.thirdPartyAttributes,M=>(i(),d(B,null,[o.displayAttribute(S.name,M.is_loginable)?(i(),d("option",{id:"attribute-element-"+C,key:M.id,value:M.id},h(M.name),9,a1)):f("",!0)],64))),256))],40,t1),[[Ea,S.mapped_to]])]),s("td",null,[u(b,{value:S.overwrite,name:"overwrite-"+C,label:"",onChange:o.onChange,disabled:o.disableOverwrite(S.overwriteable)},null,8,["value","name","onChange","disabled"])])])]))),256))])):f("",!0)],2)]),s("div",s1,[n.hasDataPopulated?(i(),d("button",{key:0,id:"user-import-mapper-submit",type:"button",onClick:t[1]||(t[1]=(...S)=>o.onSubmit&&o.onSubmit(...S)),disabled:n.loading,class:"btn btn-primary update-btn"},[t[2]||(t[2]=s("span",{class:"fas fa-save"},null,-1)),L(" "+h(e.lang(a.buttonText)),1)],8,n1)):f("",!0)])])])}const i1=x(jy,[["render",o1]]),l1={name:"Upload",components:{UserImportMapper:i1},data(){return{apiUrl:"importer/api/processing/",importId:null,importFile:null,componentRenderKey:Math.random(),loading:!1,loadingSpeed:4e3,uploaded:!1,tableHeadings:{faveo:{header:"importer_system_atrributes",description:"importer_system_atrribute_description"},thirdParty:{header:"importer_xl_attributes",description:"importer_xl_attribute_description"},overwrite:{header:"importer_overwrite",description:"importer_overwrite_description"}},buttonText:"importer_import"}},methods:{onChange(e,t){this[t]=e,e===null&&(this[t]="")},fileSelected(e){e.target.files[0].size<25e6?this.importFile=e.target.files[0]:alert(lang("importer_max_upload_size"))},updateParent(){setTimeout(()=>{this.uploaded=!1,this.$router.push({path:"/importer"})},3e3)},customErrors(e){e.response.status===412?this.setAlert(e.response.data.message.import_file):U(e,"importerUpload")},setAlert(e){U({response:{status:400,data:{message:e}}},"importerUpload")},submitCallback(){this.loading=!0;let e=new FormData;e.append("import_file",this.importFile),V.post("/importer/api/upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{this.importId=t.data.data.import_id,this.apiUrl="importer/api/processing?import_id="+this.importId,K(t,"importerUpload"),this.uploaded=!0}).catch(t=>{this.customErrors(t),this.uploaded=!1}).finally(()=>{this.loading=!1})}}},r1={class:"col-sm-12"},d1={class:"row"},c1={class:"form-group col-sm-12"},u1={class:"card-footer"};function m1(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("faveo-box"),b=v("user-import-mapper");return i(),d("div",r1,[n.loading?(i(),A(m,{key:0,duration:n.loadingSpeed},null,8,["duration"])):f("",!0),u(p,{componentName:"importerUpload"}),n.uploaded?f("",!0):(i(),A(g,{key:1,title:e.lang("importer_upload")},{actions:T(()=>[s("div",u1,[s("button",{type:"button",onClick:t[1]||(t[1]=(...w)=>o.submitCallback&&o.submitCallback(...w)),class:"btn btn-primary"},[t[3]||(t[3]=s("i",{class:"fas fa-upload"},null,-1)),L(" "+h(e.lang("importer_upload_btn")),1)])])]),default:T(()=>[s("div",d1,[s("div",c1,[s("label",null,[L(h(e.lang("importer_import_file_label"))+" ",1),t[2]||(t[2]=s("span",{class:"text-danger"},"*  ",-1))]),s("input",{type:"file",name:"import_file",onChange:t[0]||(t[0]=(...w)=>o.fileSelected&&o.fileSelected(...w))},null,32)])])]),_:1},8,["title"])),n.uploaded?(i(),A(b,{key:2,apiEndpoint:n.apiUrl,updateParent:o.updateParent,"table-headings":n.tableHeadings,"button-text":n.buttonText,"import-id":n.importId,"expand-by-default":!0},null,8,["apiEndpoint","updateParent","table-headings","button-text","import-id"])):f("",!0)])}const h1=x(l1,[["render",m1]]);function p1(e){const{googleServiceKey:t,googleSecretKey:a}=e;let r={googleServiceKey:[t,"isRequired"],googleSecretKey:[a,"isRequired"]};const n=new Le(N),{errors:o,isValid:m}=n.validate(r);return Ee.dispatch("setValidationError",o),{errors:o,isValid:m}}const _1={name:"recaptcha-settings",description:"ReCaptcha Settings Page",data(){return{status:!1,type:"v2",typeOptions:"",statusOptions:[{name:"active",value:!0},{name:"inactive",value:!1}],googleServiceKey:"",googleSecretKey:"",applyfor:[],loading:!0,isDisabled:!1,checkboxOptions:[],verified:!0,recaptchaVerified:""}},beforeMount(){this.typeOptions=[{name:N("recaptcha")+" v2",value:"v2",hint:"v2_tooltip"},{name:N("recaptcha")+" v3",value:"v3",hint:"v3_tooltip"}],this.getValues()},methods:{verifyCaptcha(e){this.recaptchaVerified=e},getValues(){this.isDisabled=!0,V.get("/api/admin/recaptcha").then(e=>{let t=e.data.data;this.status=!!t.status,this.type=t.type?t.type:"v2",this.googleServiceKey=t.googleServiceKey,this.googleSecretKey=t.googleSecretKey,this.applyfor=t.applyfor,this.checkboxOptions=t.recaptchaOptions,this.loading=!1,this.isDisabled=!1}).catch(e=>{this.loading=!1,this.isDisabled=!1})},onChange(e,t){this[t]=e,(t==="googleServiceKey"||t==="type")&&(this.recaptchaVerified="",this.verified=!1,setTimeout(()=>{this.verified=!0},2e3))},isValid(){const{errors:e,isValid:t}=p1(this.$data);return t},verify(){this.showCaptcha=!0},onSubmit(){if(this.isValid()){this.loading=!0,this.isDisabled=!0;let e={};e.status=this.status,e.type=this.type,e.google_service_key=this.googleServiceKey,e.google_secret_key=this.googleSecretKey,e.validate_secret_key=this.recaptchaVerified,e.apply_for=this.applyfor?this.applyfor:[],V.post("/store/recaptcha",e).then(t=>{this.getValues(),K(t,"recaptcha-settings")}).catch(t=>{U(t,"recaptcha-settings"),t.response.data.message&&t.response.data.message.google_secret_key&&this.$store.dispatch("setValidationError",{googleSecretKey:"Secret Key is not valid"})}).finally(t=>{this.recaptchaVerified="",this.loading=!1,this.isDisabled=!1})}}},components:{"radio-button":Qe,"text-field":we,"check-box":Aa,"recaptcha-field":im}},f1={class:"col-sm-12"},g1={key:0,class:"row",id:"loader_margin"},v1={class:"row mb-3"},b1={class:"row"},y1={class:"row"},k1={key:0,class:"row"},w1={class:"col-sm-6"},C1={class:"card-footer"},D1=["disabled"];function S1(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("radio-button"),b=v("text-field"),w=v("check-box"),S=v("recaptcha-field"),C=v("faveo-box");return i(),d("div",f1,[u(m,{componentName:"recaptcha-settings"}),u(C,{title:e.trans("recaptcha-settings")},{actions:T(()=>[s("div",C1,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=M=>o.onSubmit()),disabled:!n.recaptchaVerified},[t[2]||(t[2]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,D1)])]),default:T(()=>[s("div",null,[n.loading?(i(),d("div",g1,[u(p,{"animation-duration":4e3,size:60})])):f("",!0),n.loading?f("",!0):(i(),d(B,{key:1},[s("div",v1,[u(g,{options:n.typeOptions,label:e.trans("recaptcha_type"),name:"type",value:n.type,onChange:o.onChange,classname:"form-group col-sm-6",hint:"recaptcha_type_tooltip"},null,8,["options","label","value","onChange"]),u(g,{options:n.statusOptions,label:e.trans("status"),name:"status",value:n.status,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),s("div",b1,[u(b,{label:e.trans("googleServiceKey"),value:n.googleServiceKey,type:"text",name:"googleServiceKey",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(b,{label:e.trans("googleSecretKey"),value:n.googleSecretKey,type:"text",name:"googleSecretKey",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])]),s("div",y1,[u(w,{options:n.checkboxOptions,name:"applyfor",value:n.applyfor,label:e.trans("apply_for"),onChange:o.onChange,classname:"col-sm-12"},null,8,["options","value","label","onChange"])]),s("div",null,[t[1]||(t[1]=s("br",null,null,-1)),n.verified?f("",!0):(i(),d("div",k1,[s("div",w1,[u(p,{"animation-duration":4e3,size:30})])])),n.verified&&n.googleServiceKey?(i(),A(S,{key:1,node:{},name:"recaptcha",siteKeyValue:n.googleServiceKey,captchaVersion:n.type,verifyCaptcha:o.verifyCaptcha},null,8,["siteKeyValue","captchaVersion","verifyCaptcha"])):f("",!0)])],64))])]),_:1},8,["title"])])}const M1=x(_1,[["render",S1],["__scopeId","data-v-656f9fe7"]]),F1={name:"login-log-settings",props:{days:{type:[String,Number],default:""}},data(){return{pageLoad:!1,day:this.days,daysOptions:[{name:"1 Day",id:1},{name:"7 Days",id:7},{name:"1 Month (30 Days)",id:30},{name:"2 Months (60 Days)",id:60},{name:"6 Months (180 Days)",id:180},{name:"1 Year (365 Days)",id:365}],labelStyle:{display:"none"}}},methods:{onChange(e,t){this[t]=e,e===null&&(this[t]="")},onSubmit(){this.pageLoad=!0;let e=sessionStorage.getItem("user_id");const t={};t.days=this.day,V.post("/api/delete-login-logs/days/"+e,t).then(a=>{this.pageLoad=!1,K(a,"login-log-settings")}).catch(a=>{this.pageLoad=!1,U(a,"login-log-settings")})}},computed:{isDaysEmpty(){return this.day.length===0}},components:{"static-select":it}},$1={class:"col-sm-12"},T1={class:"card card-light"},E1={class:"card-header"},L1={class:"card-title"},A1={class:"card-body"},I1={class:"row"},P1={class:"col-sm-3"},O1={class:"card-footer"},q1=["disabled"],x1={key:0,class:"row"};function V1(e,t,a,r,n,o){const m=v("alert"),p=v("static-select"),g=v("custom-loader");return i(),d("div",$1,[u(m,{componentName:"login-log-settings"}),s("div",T1,[s("div",E1,[s("h3",L1,h(e.trans("login-log-setting")),1)]),s("div",A1,[s("div",I1,[s("div",P1,[s("label",null,[L(h(e.trans("days_to_delete_login_logs"))+" ",1),t[1]||(t[1]=s("span",{class:"text-danger"}," *",-1))])]),u(p,{label:e.trans("days_to_delete_login_logs"),strlength:"60",elements:n.daysOptions,hideEmptySelect:!0,name:"day",value:n.day,classname:"col-sm-4",onChange:o.onChange,required:!0,labelStyle:n.labelStyle},null,8,["label","elements","value","onChange","labelStyle"])])]),s("div",O1,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=b=>o.onSubmit()),disabled:o.isDaysEmpty},[t[2]||(t[2]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,q1)])]),n.pageLoad?(i(),d("div",x1,[u(g,{duration:4e3})])):f("",!0)])}const N1=x(F1,[["render",V1]]);const R1={name:"client-filter-list",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},data:()=>({columns:["name","created_at","updated_at","action"],options:{},apiUrl:"/api/client/ticket-filter",isShowFilter:!1,isEditMode:!1,selectedId:0,totalFilters:0}),created(){window.emitter.on("filterToggleClicked",this.editFilter),window.emitter.on("ticketFilterSaved",this.updateTable)},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),action:this.trans("actions")},columnsClasses:{name:"filter-name",created_at:"filter-time",updated_at:"filter-time",action:"filter-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)},action:function(t,a){return e.h(Ye,{data:a})}},sortable:["name","created_at","updated_at"],filterable:["name"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.totalFilters=t.data.filters.total,{data:t.data.filters.data.map(a=>(a.filter_toggle_url=!0,a.delete_url=e.basePath()+"/api/agent/ticket-filter/"+a.id,a)),count:t.data.filters.total}},orderBy:{column:"id",ascending:!0}}},methods:{toggleFilterView(){this.isShowFilter=!this.isShowFilter,this.isEditMode=!1,this.selectedId=0},closeFilterView(){this.isShowFilter=!1,this.isEditMode=!1,this.selectedId=0},editFilter(e){this.scrollToTarget("filter-settings"),this.isShowFilter?(this.isShowFilter=!1,setTimeout(()=>{this.isShowFilter=!0},1e3)):this.isShowFilter=!0,this.isEditMode=!0,this.selectedId=e.id},scrollToTarget(e){return lm(e)},updateTable(){this.isShowFilter=!1,this.isEditMode=!1,this.selectedId=0,window.emitter.emit("refreshData")}},components:{"ticket-filter":Gu}},U1={class:"col-sm-12",id:"filter-settings"},j1={class:"card card-light"},B1={class:"card-header"},Y1={id:"client-filter-list",class:"card-title"},H1={key:0,class:"card-tools"},W1={class:"card-body",id:"my_client_filter_list"};function z1(e,t,a,r,n,o){const m=v("alert"),p=v("ticket-filter"),g=v("data-table"),b=H("tooltip");return i(),d("div",U1,[u(m,{componentName:"dataTableModal"}),s("div",j1,[s("div",B1,[s("h3",Y1,h(e.trans("client-filter-list")),1),!e.isEditMode&&e.totalFilters!==5?(i(),d("div",H1,[P((i(),d("a",{class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...w)=>o.toggleFilterView&&o.toggleFilterView(...w))},t[1]||(t[1]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)]))),[[b,e.trans("client-filter-create")]])])):f("",!0)]),s("div",W1,[e.isShowFilter?(i(),A(p,{key:0,showFilter:e.isShowFilter,closeFilterView:o.closeFilterView,from:"clientFilter",isEditMode:e.isEditMode,selectedId:e.selectedId,divId:"my_client_filter_body",totalFilters:e.totalFilters},null,8,["showFilter","closeFilterView","isEditMode","selectedId","totalFilters"])):f("",!0),u(g,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"client-filter-list"},null,8,["url","dataColumns","option"])])])])}const G1=x(R1,[["render",z1]]);function K1(e){const{set1:t,set2:a,set3:r,set4:n}=e;let o={set1:[t,{isRequired:""}],set2:[a,{isRequired:""}],set3:[r,{isRequired:""}],set4:[n,{isRequired:""}]};const m=new Le(N),{errors:p,isValid:g}=m.validate(o);return Ee.dispatch("setValidationError",p),{errors:p,isValid:g}}const J1={props:{data:{type:Object,required:!0},from:{type:String,default:""}},name:"plugin-actions",data(){return{showLicenseModal:!1,inputArr:[{current:"first",next:"second",previous:null,value:""},{current:"second",next:"third",previous:"first",value:""},{current:"third",next:"forth",previous:"second",value:""},{current:"forth",next:null,previous:"third",value:""}],loading:!1,hasDataPopulated:!1,isLoading:!1,showLoader:!1}},created(){window.emitter.on("enterLicense",e=>{this.licenseModal(e)})},methods:{licenseModal(){this.showLicenseModal=!0},closeLicenseModal(){this.showLicenseModal=!1,this.inputArr.map(e=>(e.value="",e))},handleBackspace(e){if(event.keyCode===8&&!e.value.length&&e.previous){const t=this.$refs[e.previous][0];t&&(t.setSelectionRange(this.$refs[e.previous][0].value.length,this.$refs[e.previous][0].value.length),t.focus())}},onInput(e){if(e.value.length===4&&e.next&&!this.$refs[e.next][0].value){let t=this.$refs[e.next][0];t.setSelectionRange(t.value.length,t.value.length),t.focus()}},onPaste(e){event.preventDefault();const t=event.clipboardData.getData("text/plain");if(!t)return;const a=this.sanitizeText(t),r=this.inputArr[e],o=4-r.value.length;r.value+=a.substring(0,o);let m=o;for(let p=e+1;p<this.inputArr.length&&m<a.length;p++){const g=this.inputArr[p],b=Math.min(4,a.length-m);g.value=a.substring(m,m+b),m+=b}this.focusNextField(e)},focusNextField(e){for(let t=e;t<this.inputArr.length;t++){const a=this.inputArr[t];if(!a.value||a.value.length!==4||!a.next){this.$nextTick(()=>this.focusField(t));break}}},focusField(e){const t=this.$refs[this.inputArr[e].current][0];t.focus(),t.selectionStart=t.value.length,t.selectionEnd=t.value.length},sanitizeText(e){return e.trim().replace(/[^A-Za-z0-9]/g,"")},isValid(){const{errors:e,isValid:t}=K1(this.$data);return!!t},onSubmit(){if(this.$refs.licenseErrorPage.validate()){this.loading=!0;let e=this.inputArr.map(a=>a.value).join("").toUpperCase(),t={plugin:this.data.path,licenseCode:e};V.post("plugin/license",t).then(a=>{K(a,"dataTableModal"),window.location.reload(),this.closeLicenseModal(),this.inputArr.map(r=>(r.value="",r))}).catch(a=>{U(a,"plugin-license"),this.inputArr.map(r=>(r.value="",r))}).finally(()=>{this.loading=!1,setTimeout(()=>{this.$store.dispatch("unsetAlert")},3e3)})}},autoUpdate(e){this.isLoading=!0,V.post("plugin/auto-update-background",{key:e.path,enabled:!e.background_update}).then(t=>{this.isLoading=!1,K(t,"dataTableModal"),setTimeout(()=>{window.emitter.emit("refreshData")},10)}).catch(t=>{this.isLoading=!1,U(t,"dataTableModal")})},installPlugin(e){this.isLoading=!0,V.post("plugin/install",{product_id:e.id}).then(t=>{this.isLoading=!1,K(t,"dataTableModal"),setTimeout(()=>{window.location.reload()},10)}).catch(t=>{this.isLoading=!1,U(t,"dataTableModal")})}},computed:{allFieldsFilled(){return this.inputArr.every(e=>e.value.trim().length===4)}}},Z1={key:0},Q1={key:1},X1={key:2},ek={class:"modal-title"},tk={class:"entry-content clearfix"},ak={class:"text-center"},sk={class:"container text-center"},nk=["name","id","onUpdate:modelValue","onInput","onPaste","onKeydown"],ok={key:0,id:"dash"},ik={class:"text-center d-none"},lk=["disabled"],rk={key:0,slot:"fields"},dk=["disabled"];function ck(e,t,a,r,n,o){const m=v("custom-loader"),p=v("router-link"),g=v("alert"),b=v("ValidationProvider"),w=v("ValidationObserver"),S=v("loader"),C=v("modal"),M=H("tooltip"),D=H("focus-first-input");return i(),d(B,null,[n.isLoading?(i(),d("div",Z1,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0),a.from==="available_plugins"?(i(),d("span",Q1,[P((i(),d("button",{type:"button",class:"btn btn-light table_btn",onClick:t[0]||(t[0]=F=>o.installPlugin(a.data))},t[4]||(t[4]=[s("i",{class:"fa-solid fa-download"},null,-1)]))),[[M,e.lang("install_plugin")]])])):(i(),d("span",X1,[P((i(),d("button",{type:"button",class:"btn btn-light table_btn",onClick:t[1]||(t[1]=F=>o.autoUpdate(a.data))},[s("i",{class:G(["update-icon",a.data.background_update?"fas fa-toggle-on":"fas fa-toggle-on fa-rotate-180"])},null,2)])),[[M,e.lang("auto_update")+e.lang(a.data.background_update?"on":"off")]]),a.data.status&&a.data.settings?P((i(),A(p,{key:0,type:"button",class:"btn btn-light table_btn",to:a.data.settings},{default:T(()=>t[5]||(t[5]=[s("i",{class:"fas fa-cog"},null,-1)])),_:1},8,["to"])),[[M,e.lang("settings")]]):f("",!0),a.data.license_status!==1?P((i(),d("button",{key:1,type:"button",class:"btn btn-light table_btn",onClick:t[2]||(t[2]=F=>o.licenseModal())},t[6]||(t[6]=[s("i",{class:"fas fa-drivers-license"},null,-1)]))),[[M,e.lang("plugin_license")]]):f("",!0)])),n.showLicenseModal?(i(),A(C,{key:3,showModal:!0,showIconCloseBtn:!1,onClose:o.closeLicenseModal,containerStyle:{width:"500px"}},{title:T(()=>[s("h3",ek,h(e.lang("licenseCode")),1)]),alert:T(()=>[u(g,{componentName:"plugin-license"})]),fields:T(()=>[s("div",tk,[s("p",ak,[s("b",null,h(e.lang("please_enter_your_license_code_for"))+" "+h(a.data.display_name),1)]),u(w,{ref:"licenseErrorPage",onSubmit:o.onSubmit},{default:T(({values:F,errors:I,validate:R})=>[P((i(),d("p",sk,[(i(!0),d(B,null,re(n.inputArr,(Y,X)=>(i(),d("span",{key:Y.current},[u(b,{name:Y.current,rules:"required",modelValue:Y.value,"onUpdate:modelValue":le=>Y.value=le},{default:T(({field:le,errorMessage:ne,meta:ce,classes:Q})=>[P(s("input",{class:G(["form-control inline_block text-uppercase",ne?"field-danger":""]),type:"text",name:Y.current,id:Y.current,ref_for:!0,ref:Y.current,"onUpdate:modelValue":j=>Y.value=j,onInput:j=>o.onInput(Y),maxlength:"4",size:"4",onPaste:j=>o.onPaste(X),onKeydown:j=>o.handleBackspace(Y)},null,42,nk),[[ze,Y.value]]),Y.next?(i(),d("span",ok,"-")):f("",!0),t[7]||(t[7]=L("  "))]),_:2},1032,["name","modelValue","onUpdate:modelValue"])]))),128))])),[[D]]),s("p",ik,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.invalid,id:"validate_license"},[t[8]||(t[8]=s("i",{class:"fa fa-save"},null,-1)),L(" "+h(e.lang("submit")),1)],8,lk)])]),_:1},8,["onSubmit"])]),n.loading?(i(),d("div",rk,[u(S,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[3]||(t[3]=F=>o.onSubmit()),disabled:!o.allFieldsFilled,class:"btn btn-primary"},[t[9]||(t[9]=s("i",{class:"fa fa-save","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("save")),1)],8,dk)]),_:1},8,["onClose"])):f("",!0)],64)}const Zs=x(J1,[["render",ck],["__scopeId","data-v-db313196"]]);const uk={class:"modal-wrapper"},mk={class:"modal-container"},hk={class:"d-flex close-button"},pk={key:0,class:"modal-body pt-0"},_k={class:"row image-container"},fk={class:"col-sm-12 bg-image px-1"},gk=["src"],vk={key:0,class:"plugin-title"},bk={class:"row px-3 pt-3"},yk={class:"col-md-12 p-0"},kk={class:"card-outline row"},wk={class:"nav nav-tabs updateDetails",role:"tablist"},Ck=["onClick"],Dk={class:"tab-content"},Sk=["innerHTML"],Mk={key:0,class:"col-md-4 p-3 version-details"},Fk={key:0},$k={key:1},Tk={key:2},Ek={key:0},Lk={key:1},Ak={key:3},Ik={key:0},Pk={key:1},Ok={key:4},qk={key:5},xk={key:6},Vk={class:"mb-1"},Nk={key:0,class:"mb-1"},Rk={key:1},Uk={key:0,class:"mb-1"},jk={key:1},Bk={class:"mb-1"},Yk={href:"https://www.faveohelpdesk.com/",target:"_blank"},Hk={key:1,class:"row"},Wk={__name:"pluginDetailModal",props:{data:{type:Object,required:!0},showModal:{type:Boolean,required:!0},onClose:{type:Function},alertComponentName:{type:String,required:!0},whiteLabel:{type:Boolean,default:!1},from:{type:String,default:""}},setup(e){const{basePathVersion:t}=ut.methods,a=e,r=Me(),n=O({}),o=O(!1),m=O({}),p=O(""),g=O({}),b=O({}),w=O(0),S=O([]),C=O("/themes/default/common/images/plugin_banner/Plugin_1.png"),M=O(t()),D=O(F());function F(){return a.from==="plugin_list"?`${M.value}/themes/default/common/images/plugin_banner/${a.data.path}.png`:a.whiteLabel?`${M.value}/themes/default/common/images/helpdesk_product.png`:`${M.value}/themes/default/common/images/faveo_product.png`}function I(Q){Q.target.src=M.value+C.value}const R=me(()=>r.getters.timeDiffForPast);Je(()=>{m.value=a.data,p.value=a.alertComponentName,Y()});const Y=()=>{o.value=!0;let Q=m.value.is_update===1?m.value.latest_version:m.value.version,j=`plugin/release?product_id=${m.value.id}&version=${Q.startsWith("v")?Q:"v"+Q}`,ye=`plugin/release?version=${m.value.version.startsWith("v")?m.value.version:"v"+m.value.version}`,Pe=a.from==="plugin_list"?j:ye;V.get(Pe).then(ge=>{n.value=ge.data.data,g.value=n.value.product,b.value=n.value.release,S.value=[{id:"description",label:"description",content:g.value!==null&&g.value.product_description!==""?g.value.product_description:N("no_plugin_description")},{id:"change_logs",label:a.from==="plugin_list"?"change_log":"release_notes",content:b.value!==null&&b.value.description!==""?b.value.description:N("no_release_details")}],o.value=!1}).catch(ge=>{o.value=!1,a.onClose(),U(ge,p.value)})},X=Q=>{w.value=Q},le=me(()=>b.value.dependencies.plugin_dependencies.plugin_required.some(j=>j.name||j.min_version||j.max_version)),ne=me(()=>b.value.dependencies.plugin_dependencies.required_product.some(j=>j.name||j.min_version||j.max_version)),ce=me(()=>b.value.dependencies.plugin_dependencies.plugin_optional.some(j=>j.name||j.min_version||j.max_version));return(Q,j)=>{const ye=v("custom-loader");return e.showModal?(i(),A(Ae,{key:0,name:"modal"},{default:T(()=>{var Pe,ge,ke;return[s("div",{class:G(["modal-mask",{rtl:Q.isRtlLayout}])},[s("div",uk,[s("div",mk,[s("div",hk,[s("button",{type:"button",onClick:j[0]||(j[0]=ue=>e.onClose()),"aria-label":"Close","data-bs-dismiss":"modal",class:G(["btn-close mb-0 p-2",{"ms-auto":Q.appLanguage!=="ar","me-auto":Q.appLanguage==="ar"}])},null,2)]),o.value?f("",!0):(i(),d("div",pk,[s("div",_k,[s("div",fk,[s("img",{src:D.value,onError:I,height:"100",class:"w-100",alt:"pluginLogo"},null,40,gk),g.value&&g.value.name?(i(),d("h4",vk,h(g.value.display_name?g.value.display_name:g.value.name),1)):f("",!0)])]),s("div",bk,[s("div",yk,[s("div",kk,[s("div",{class:G(b.value?"col-md-8":"col-md-12")},[s("ul",wk,[(i(!0),d(B,null,re(S.value,(ue,he)=>(i(),d("li",{class:"nav-item",key:he},[s("a",{class:G(["nav-link",{active:w.value===he}]),onClick:ve=>X(he),href:"javascript:;",role:"tab"},[s("b",null,h(ae(N)(ue.label)),1)],10,Ck)]))),128))]),s("div",Dk,[(i(!0),d(B,null,re(S.value,(ue,he)=>(i(),d("div",{key:he,class:G(["tab-pane fade",{"show active":w.value===he}]),role:"tabpanel"},[j[1]||(j[1]=s("br",null,null,-1)),s("div",{innerHTML:ue.content},null,8,Sk)],2))),128))])],2),b.value?(i(),d("div",Mk,[b.value.version?(i(),d("p",Fk,[s("strong",null,h(ae(N)("version"))+":",1),L(" "+h(b.value.version),1)])):f("",!0),b.value.updated_at?(i(),d("p",$k,[s("strong",null,h(ae(N)("last_updated"))+":",1),L(" "+h(R.value(b.value.updated_at)),1)])):f("",!0),b.value.dependencies&&b.value.dependencies.extensions&&b.value.dependencies.extensions.required?(i(),d("p",Tk,[s("strong",null,h(ae(N)("extension_required"))+":",1),(i(!0),d(B,null,re(b.value.dependencies.extensions.required,(ue,he)=>(i(),d("span",{key:he},[L(h(" "+ue),1),he<b.value.dependencies.extensions.required.length-1?(i(),d("span",Ek,",")):(i(),d("span",Lk,"."))]))),128))])):f("",!0),b.value.dependencies&&b.value.dependencies.extensions&&b.value.dependencies.extensions.optional?(i(),d("p",Ak,[s("strong",null,h(ae(N)("extension_optional"))+":",1),(i(!0),d(B,null,re(b.value.dependencies.extensions.optional,(ue,he)=>(i(),d("span",{key:he},[L(h(" "+ue),1),he<b.value.dependencies.extensions.optional.length-1?(i(),d("span",Ik,",")):(i(),d("span",Pk,"."))]))),128))])):f("",!0),b.value.dependencies&&b.value.dependencies.min_php_version?(i(),d("p",Ok,[s("strong",null,h(ae(N)("minimum_php_version"))+":",1),L(" "+h(b.value.dependencies.min_php_version),1)])):f("",!0),b.value.dependencies?(i(),d("p",qk,[s("strong",null,h(ae(N)("mySql_version"))+":",1),j[2]||(j[2]=L()),j[3]||(j[3]=s("br",null,null,-1)),L(h(ae(N)("min_size")+b.value.dependencies.min_mysql_version[1])+" - "+h(ae(N)("max_size")+b.value.dependencies.max_mysql_version[1]),1)])):f("",!0),b.value.dependencies&&b.value.dependencies.min_mariadb_version?(i(),d("p",xk,[s("strong",null,h(ae(N)("mariaDb_version"))+":",1),j[4]||(j[4]=L()),j[5]||(j[5]=s("br",null,null,-1)),L(" "+h(ae(N)("min_size")+b.value.dependencies.min_mariadb_version[1])+" - "+h(ae(N)("max_size")+b.value.dependencies.max_mariadb_version[1]),1)])):f("",!0),b.value.dependencies&&b.value.dependencies.plugin_dependencies?(i(),d(B,{key:7},[s("p",Vk,[s("strong",null,h(ae(N)("plugin_dependencies"))+":",1)]),b.value.dependencies.plugin_dependencies&&b.value.dependencies.plugin_dependencies.required_product&&b.value.dependencies.plugin_dependencies.required_product.length>0?(i(),d(B,{key:0},[ne.value?(i(),d("p",Nk,[s("strong",null,h(ae(N)("required_product"))+":",1)])):f("",!0),ne.value?(i(),d("ul",Rk,[(i(!0),d(B,null,re(b.value.dependencies.plugin_dependencies.required_product,ue=>(i(),d("li",{key:ue.name},[ue.name?(i(),d(B,{key:0},[s("strong",null,h(ae(N)("name"))+":",1),L(" "+h(ue.name),1),j[6]||(j[6]=s("br",null,null,-1))],64)):f("",!0),ue.min_version?(i(),d(B,{key:1},[s("strong",null,h(ae(N)("min_version"))+":",1),L(" "+h(ue.min_version),1),j[7]||(j[7]=s("br",null,null,-1))],64)):f("",!0),ue.max_version?(i(),d(B,{key:2},[s("strong",null,h(ae(N)("max_version"))+":",1),L(" "+h(ue.max_version),1),j[8]||(j[8]=s("br",null,null,-1))],64)):f("",!0)]))),128))])):f("",!0)],64)):f("",!0),b.value.dependencies.plugin_dependencies&&b.value.dependencies.plugin_dependencies.plugin_required&&b.value.dependencies.plugin_dependencies.plugin_required.length>0?(i(),d(B,{key:1},[le.value?(i(),d("p",Uk,[s("strong",null,h(ae(N)("required_plugins"))+":",1)])):f("",!0),le.value?(i(),d("ul",jk,[(i(!0),d(B,null,re(b.value.dependencies.plugin_dependencies.plugin_required,ue=>(i(),d("li",{key:ue.name},[ue.name?(i(),d(B,{key:0},[s("strong",null,h(ae(N)("name"))+":",1),L(" "+h(ue.name),1),j[9]||(j[9]=s("br",null,null,-1))],64)):f("",!0),ue.min_version?(i(),d(B,{key:1},[s("strong",null,h(ae(N)("min_version"))+":",1),L(" "+h(ue.min_version),1),j[10]||(j[10]=s("br",null,null,-1))],64)):f("",!0),ue.max_version?(i(),d(B,{key:2},[s("strong",null,h(ae(N)("max_version"))+":",1),L(" "+h(ue.max_version),1),j[11]||(j[11]=s("br",null,null,-1))],64)):f("",!0)]))),128))])):f("",!0)],64)):f("",!0),((ke=(ge=(Pe=b.value.dependencies)==null?void 0:Pe.plugin_dependencies)==null?void 0:ge.plugin_optional)==null?void 0:ke.length)>0&&ce.value?(i(),d(B,{key:2},[s("p",Bk,[s("strong",null,h(ae(N)("plugin_optional"))+":",1)]),s("ul",null,[(i(!0),d(B,null,re(b.value.dependencies.plugin_dependencies.plugin_optional,ue=>(i(),d("li",{key:ue.name},[ue.name?(i(),d(B,{key:0},[s("strong",null,h(ae(N)("name"))+":",1),L(" "+h(ue.name),1),j[12]||(j[12]=s("br",null,null,-1))],64)):f("",!0),ue.min_version?(i(),d(B,{key:1},[s("strong",null,h(ae(N)("min_version"))+":",1),L(" "+h(ue.min_version),1),j[13]||(j[13]=s("br",null,null,-1))],64)):f("",!0),ue.max_version?(i(),d(B,{key:2},[s("strong",null,h(ae(N)("max_version"))+":",1),L(" "+h(ue.max_version),1),j[14]||(j[14]=s("br",null,null,-1))],64)):f("",!0)]))),128))])],64)):f("",!0)],64)):f("",!0),s("p",null,[s("a",Yk,[L(h(ae(N)(e.whiteLabel?"about_helpdesk":"about_faveo_helpdesk")),1),j[15]||(j[15]=s("i",{class:"fa fa-angle-right px-1"},null,-1))])])])):f("",!0)])])])])),o.value?(i(),d("div",Hk,[u(ye,{duration:4e3})])):f("",!0)])])],2)]}),_:1})):f("",!0)}}},Ii=x(Wk,[["__scopeId","data-v-40897179"]]),zk={class:"modal-title"},Gk=["innerHTML"],Kk=["innerHTML"],Jk={key:2,slot:"fields"},Zk={__name:"PluginActivationModal",props:{details:{type:Object,required:!0},showModal:{type:Boolean,required:!0},onClose:{type:Function},containerStyle:{type:Object,default:{width:"500px"}}},setup(e){const t=e,a=O(!1),r=n=>{a.value=!0,V.post("plugin/status/"+n).then(o=>{K(o,"dataTableModal"),a.value=!1,setTimeout(()=>{window.emitter.emit("refreshData"),window.emitter.emit("updateSideNav")},10),t.details.status||location.reload()}).catch(o=>{a.value=!1,t.onClose(),U(o,"dataTableModal")})};return(n,o)=>{const m=v("loader"),p=v("modal");return e.showModal?(i(),A(p,{key:0,showModal:!0,onClose:e.onClose,containerStyle:e.containerStyle},{title:T(()=>[s("h4",zk,h(n.lang(e.details.status?"deactivate":"active")),1)]),fields:T(()=>[e.details.status?(i(),d("p",{key:1,innerHTML:n.lang("Click_to_deactivate_plugin")+[e.details.display_name]},null,8,Kk)):(i(),d("p",{key:0,innerHTML:n.lang("Click_to_activate_plugin")+[e.details.display_name]},null,8,Gk)),a.value?(i(),d("div",Jk,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:o[0]||(o[0]=g=>r(e.details.path)),class:G(e.details.status?"btn btn-danger":"btn btn-primary")},[o[1]||(o[1]=s("i",{class:"fa fa-gear","aria-hidden":"true"},null,-1)),L(" "+h(n.lang(e.details.status?"deactivate":"activate")),1)],2)]),_:1},8,["onClose","containerStyle"])):f("",!0)}}};const Qk={class:"modal-title"},Xk={key:0,class:"pb-4"},e0={key:0,class:"loader-container"},t0={key:1},a0={__name:"PluginUpdateModal",props:{data:{type:Object,required:!0},showModal:{type:Boolean,required:!0},onClose:{type:Function},containerStyle:{type:Object,default:{width:"800px"}},from:{type:String,default:""}},setup(e){const t=e,a=Me(),r=O(!1),n=O(!1);qt(()=>r.value,p=>{p&&o(t.data)});const o=async p=>{n.value=!0;try{const g=await V.post("plugin/update",{plugin:p.path});K(g,"plugin-update"),t.from==="plugin_list"?window.emitter.emit("refreshData"):window.emitter.emit("refreshUpdateList"),await m(3e3)}catch(g){await a.dispatch("setAlert",{type:"danger",duration:1e4,message:g.response.data.message,component_name:"plugin-update"}),await m(1e4)}},m=p=>new Promise(g=>{setTimeout(()=>{t.onClose(),n.value=!1,r.value=!1,g()},p)});return(p,g)=>{const b=v("alert"),w=v("modal");return e.showModal?(i(),A(w,{key:0,showCloseBtn:!r.value,showIconCloseBtn:!1,showModal:!0,showControls:!r.value,onClose:e.onClose,containerStyle:e.containerStyle},rm({title:T(()=>[s("h3",Qk,h(p.lang("plugin_update")),1)]),alert:T(()=>[u(b,{componentName:"plugin-update"})]),fields:T(()=>[r.value?(i(),d("div",Xk,[s("div",null,[s("h6",null,h(p.lang("plugin_update_in_process")),1)]),n.value?(i(),d("div",e0,g[1]||(g[1]=[s("i",{class:"fas fa-spinner fa-pulse loader-icon"},null,-1)]))):f("",!0)])):(i(),d("div",t0,[s("h6",null,h(p.lang("are_you_sure_want_to_update_plugin")+e.data.display_name+p.lang(" plugin?")),1)]))]),_:2},[r.value?void 0:{name:"controls",fn:T(()=>[s("button",{onClick:g[0]||(g[0]=S=>r.value=!0),class:"btn btn-primary"},[g[2]||(g[2]=s("i",{class:"fas fa-circle-up pe-1"},null,-1)),L(h(p.lang("update")),1)])]),key:"0"}]),1032,["showCloseBtn","showControls","onClose","containerStyle"])):f("",!0)}}},Pi=x(a0,[["__scopeId","data-v-6a995daa"]]);const s0={key:0},n0={class:"mb-0"},o0={key:0,class:"text-xs"},i0={class:"mb-0"},l0={class:"text-muted"},r0={key:0},d0=["href"],c0={key:1},u0={key:0,class:"update-warning p-2 mt-2"},m0={class:"text-sm"},h0={__name:"PluginsName",props:{data:{type:Object,default:{}},from:{type:String,default:""},whiteLabel:{type:Boolean,default:!1}},setup(e){const t=e,a=O({}),r=O(!1),n=O(!1),o=O(!1),m=O(!1),p=O({});Je(()=>{a.value=t.data}),qt(()=>t.data,R=>{a.value=R});const g=()=>{r.value=!0},b=()=>{n.value=!0},w=()=>{r.value=!1},S=()=>{n.value=!1},C=()=>{o.value=!1},M=R=>{p.value=R,o.value=!0},D=me(()=>{switch(a.value.license_status){case 0:return N("license_has_expired_for");case 1:return a.value.is_update===1?N("there_is_a_new_version")+" "+a.value.latest_version+" "+N("of"):a.value.is_update===2?N("update_has_expired_new_version_available")+" "+a.value.latest_version+" "+N("of"):"";case 2:return N("license_not_activated_for");default:return""}}),F=me(()=>a.value.license_status===1&&a.value.is_update===1?"fas fa-refresh px-2":"fas fa-warning px-2"),I=me(()=>(a.value.license_status===0||a.value.is_update===2)&&!t.whiteLabel?{action:()=>window.open("https://billing.faveohelpdesk.com/my-orders","_blank"),text:N("renew")}:a.value.license_status===1&&a.value.is_update===1?{action:()=>M(a.value),text:N("update_now")}:null);return(R,Y)=>{const X=v("custom-loader"),le=H("tooltip");return i(),d(B,null,[m.value?(i(),d("div",s0,[u(X,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0),e.from==="name"?(i(),d(B,{key:1},[s("p",n0,h(a.value.display_name),1),a.value.license_status===1?(i(),d("div",o0,[P((i(),d("span",{class:G(["badge",a.value.status?"text-bg-success":"text-bg-danger"])},[s("a",{href:"javascript:;",class:"plugin_tags",onClick:Y[0]||(Y[0]=ne=>b())},h(ae(N)(a.value.status?"activated":"deactivated")),1)],2)),[[le,ae(N)(a.value.status?"click_to_deactivate":"click_to_activate")]])])):f("",!0),n.value?(i(),A(Zk,{key:1,details:a.value,"show-modal":b,containerStyle:{width:"500px"},onClose:S},null,8,["details"])):f("",!0)],64)):f("",!0),e.from==="description"?(i(),d(B,{key:2},[s("p",i0,h(a.value.description),1),s("span",l0,[s("a",null,h(ae(N)("version")+" "+a.value.version),1),Y[3]||(Y[3]=L()),!e.whiteLabel&&a.value.website?(i(),d("span",r0,[L(h("|"+ae(N)("by"))+" ",1),s("a",{href:"http://"+a.value.website,target:"_blank"},h("Faveo"),8,d0)])):f("",!0),e.whiteLabel?f("",!0):(i(),d("span",c0,h(" | "))),e.whiteLabel?f("",!0):(i(),d("a",{key:2,href:"javascript:;",onClick:Y[1]||(Y[1]=ne=>g(a.value.path))},h(ae(N)("Plugin_details")),1))]),D.value?(i(),d("div",u0,[s("span",m0,[s("i",{class:G(F.value)},null,2),L(h(D.value)+" ",1),s("b",null,h(a.value.display_name),1),I.value?(i(),d("a",{key:0,class:"text-primary ps-1 pe-2",onClick:Y[2]||(Y[2]=(...ne)=>I.value.action&&I.value.action(...ne)),href:"javascript:;"},[s("u",null,h(I.value.text),1)])):f("",!0)])])):f("",!0),o.value?(i(),A(Pi,{key:1,data:p.value,"show-modal":o.value,from:"plugin_list",containerStyle:{width:"800px"},onClose:C},null,8,["data","show-modal"])):f("",!0),r.value?(i(),A(Ii,{key:2,data:a.value,"show-modal":r.value,from:"plugin_list",onClose:w,whiteLable:e.whiteLabel,alertComponentName:"dataTableModal"},null,8,["data","show-modal","whiteLable"])):f("",!0)],64)):f("",!0)],64)}}},ts=x(h0,[["__scopeId","data-v-81d3de79"]]);const p0={props:{whiteLabel:{type:Boolean,default:!1}},components:{PluginActions:Zs,PluginsName:ts},data(){return{apiUrl:"/getplugin",columns:["id","name","description","activate"],options:{headings:{id:this.trans("id"),name:this.trans("plugin"),description:this.trans("description"),activate:this.trans("action")},columnsClasses:{id:"id",name:"name",description:"description",activate:"activate"},perPage:25,sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},sortable:["display_name","version"],filterable:["display_name"],pagination:{chunk:5,nav:"fixed",edge:!0},templates:{activate:function(e,t){return this.h(Zs,{data:t})},name:(e,t)=>this.h(ts,{data:t,from:"name"}),description:(e,t)=>this.h(ts,{data:t,whiteLabel:this.whiteLabel,from:"description"})},requestAdapter(e){return{sort_field:e.orderBy?e.orderBy:"status",sort_order:e.ascending?"desc":"asc",search_query:e.query.trim(),limit:e.limit}},responseAdapter({data:e}){return{data:e.data.plugin,count:e.data.total}},orderBy:{column:"status",ascending:!0}},plugin_action:["update"],selectedAction:"update",selectedPlugin:[],action:!1,loading:!1,pluginsDetails:[],show_pagination:!0}},methods:{selectPlugin(e){this.selectedPlugin=e},bulkUpdate(){this.loading=!0,V.post("plugin/all/update",{plugin:this.selectedPlugin}).then(e=>{this.loading=!1,K(e,"dataTableModal"),setTimeout(()=>{window.location.reload()},10)}).catch(e=>{this.loading=!1,U(e,"dataTableModal")})},toggleSelectAll(){this.selectAll=!this.selectAll,this.selectAll?this.selectedPlugin=this.pluginsDetails.map(e=>e.path):this.selectedPlugin=[]},checkAllUpdate(){this.loading=!0,V.post("/plugin/all/check/update").then(e=>{this.loading=!1,K(e,"dataTableModal"),window.emitter.emit("refreshData")}).catch(e=>{U(e,"dataTableModal"),this.loading=!1})}},watch:{selectedPlugin(e,t){this.action=this.selectedPlugin.length!==0,this.$nextTick(()=>{let a=document.querySelector("#plugins-list .VueTables .VueTables__limit"),r=this.$refs.buttonToMove;a&&r&&a.nextSibling!==r&&a.parentNode.insertBefore(r,a.nextSibling)})}}},_0={key:0},f0={class:"col-sm-12"},g0={class:"card card-light",id:"plugins-list"},v0={class:"card-header"},b0={class:"card-title"},y0={class:"card-tools"},k0={class:"card-body",id:"plugins_list"};function w0(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("data-table"),b=H("tooltip");return i(),d(B,null,[n.loading?(i(),d("div",_0,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0),s("div",f0,[u(p,{componentName:"dataTableModal"}),s("div",g0,[s("div",v0,[s("h3",b0,h(e.lang("plugins-list")),1),s("div",y0,[P((i(),d("button",{class:"btn btn-tool",onClick:t[0]||(t[0]=w=>o.checkAllUpdate())},t[2]||(t[2]=[s("i",{class:"fas fa-refresh pe-1"},null,-1)]))),[[b,e.lang("check_available_plugin_update")]])])]),s("div",k0,[s("section",null,[n.action?P((i(),d("button",{key:0,ref:"buttonToMove",type:"button",class:"btn btn-default ms-2",onClick:t[1]||(t[1]=w=>o.bulkUpdate())},t[3]||(t[3]=[s("i",{class:"fas fa-circle-up text-muted"},null,-1)]))),[[b,e.lang("update_all_plugins")]]):f("",!0),u(g,{url:n.apiUrl,dataColumns:n.columns,tickets:o.selectPlugin,show_pagination:n.show_pagination,option:n.options,scroll_to:"plugins-list"},null,8,["url","dataColumns","tickets","show_pagination","option"])])])])])],64)}const C0=x(p0,[["render",w0]]);const D0={key:0},S0={class:"col-sm-12"},M0={class:"card card-light",id:"available-plugins-list"},F0={class:"card-header"},$0={class:"card-title"},T0={class:"card-tools"},E0={class:"card-body",id:"available-plugins-list"},L0={__name:"AvailablePlugins",props:{whiteLabel:{type:Boolean,default:!1}},setup(e){const t=O("/getplugin?installed=0"),a=O(["name","description","action"]),r=e,n=O({headings:{name:N("plugin"),description:N("description"),action:N("action")},columnsClasses:{name:"name",description:"description",action:"action"},perPage:25,sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},sortable:["name","version"],filterable:["name"],pagination:{chunk:5,nav:"fixed",edge:!0},templates:{action:(g,b)=>tt(Zs,{data:b,from:"available_plugins"}),description:(g,b)=>tt(ts,{data:b,whiteLabel:r.whiteLabel,from:"description"})},requestAdapter:function(g){return{sort_field:g.orderBy?g.orderBy:"name",sort_order:g.ascending?"desc":"asc",search_query:g.query.trim(),limit:g.limit}},responseAdapter:function({data:g}){return{data:g.data.plugin,count:g.data.total}}}),o=O(!0),m=O(!1),p=()=>{m.value=!0,axios.get("plugin/install/check").then(g=>{m.value=!1,K(g,"dataTableModal"),window.emitter.emit("refreshData")}).catch(g=>{m.value=!1,U(g,"dataTableModal")})};return(g,b)=>{const w=v("custom-loader"),S=v("alert"),C=v("data-table"),M=H("tooltip");return i(),d(B,null,[m.value?(i(),d("div",D0,[u(w,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0),s("div",S0,[u(S,{componentName:"dataTableModal"}),s("div",M0,[s("div",F0,[s("h3",$0,h(ae(N)("list_of_available_plugin")),1),s("div",T0,[P((i(),d("button",{class:"btn btn-tool",onClick:b[0]||(b[0]=D=>p())},b[1]||(b[1]=[s("i",{class:"fas fa-refresh pe-1"},null,-1)]))),[[M,ae(N)("check_available_plugin_install")]])])]),s("div",E0,[u(C,{url:t.value,dataColumns:a.value,show_pagination:o.value,option:n.value,scroll_to:"available-plugins-list"},null,8,["url","dataColumns","show_pagination","option"])])])])],64)}}},A0=x(L0,[["__scopeId","data-v-3b3430dc"]]);const I0={class:"col-sm-12"},P0={class:"card card-light card-tabs"},O0={class:"card-header p-0 pt-1"},q0={class:"nav nav-tabs",id:"custom-tabs-one-tab",role:"tablist"},x0=["onClick"],V0={class:"card-body"},N0={class:"tab-content"},R0={class:"tab-pane active",role:"tabpanel"},U0={__name:"AllPlugins",props:{whiteLabel:{type:Boolean,default:!1}},setup(e){const t=ft(),a=O("installed_plugins");fa(()=>{t.query.type&&o(t.query.type)});const r=O([{id:"installed_plugins",title:"installed_plugins"},{id:"available_plugins",title:"available_plugins"}]),n=me(()=>{switch(a.value){case"installed_plugins":return C0;case"available_plugins":return A0;default:return null}}),o=m=>{a.value=m};return(m,p)=>(i(),d("div",I0,[s("div",P0,[s("div",O0,[s("ul",q0,[(i(!0),d(B,null,re(r.value,g=>(i(),d("li",{key:g.id,class:"nav-item"},[s("a",{id:"settings_tab",onClick:b=>o(g.id),class:G(["nav-link cursor-pointer",{active:a.value===g.id}]),"data-bs-toggle":"pill",role:"tab"},h(m.lang(g.title)),11,x0)]))),128))])]),s("div",V0,[s("div",N0,[s("div",R0,[(i(),A(sn(n.value),{whiteLabel:e.whiteLabel,category:a.value},null,8,["whiteLabel","category"]))])])])])]))}},j0=x(U0,[["__scopeId","data-v-b4288225"]]),B0={name:"module-actions",props:{data:{type:Object,required:!0}},data(){return{loading:!1}},methods:{onChange(e,t){this.statusChange(e,t)},statusChange(e,t){this.loading=!0;let a={};a.current_module_name=t,a.current_module_status=e,axios.post("/api/change/modules/status",a).then(r=>{this.loading=!1,K(r,"dataTableModal"),window.emitter.emit("refreshData")}).catch(r=>{this.loading=!1,U(r,"dataTableModal")})}},components:{"status-switch":lt}},Y0={class:"btn-group"};function H0(e,t,a,r,n,o){const m=v("custom-loader"),p=v("status-switch");return i(),d("div",Y0,[n.loading?(i(),A(m,{key:0})):f("",!0),(i(),A(p,{name:a.data.option_name,value:a.data.status,key:Math.random(),onChange:o.onChange},null,8,["name","value","onChange"]))])}const W0=x(B0,[["render",H0]]),z0={name:"module-name",props:{data:{type:Object,required:!0}},components:{"tool-tip":nt}};function G0(e,t,a,r,n,o){const m=v("tool-tip");return i(),d("p",null,[L(h(a.data.name)+" ",1),u(m,{message:a.data.tooltip,size:"small"},null,8,["message"])])}const K0=x(z0,[["render",G0]]);const J0={name:"modules-index",data(){return{apiUrl:"/api/getmodules",columns:["name","version","action"],options:{headings:{name:this.trans("name"),version:this.trans("version"),action:this.trans("action")},columnsClasses:{name:"mod-name",version:"mod-version",action:"mod-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},filterable:!1,sortable:[],pagination:{chunk:5,nav:"fixed",edge:!0},templates:{name:function(e,t){return this.h(K0,{data:t})},action:function(e,t){return this.h(W0,{data:t})}},requestAdapter(e){return{"sort-field":e.orderBy?e.orderBy:"status","sort-order":e.ascending?"desc":"asc","search-query":e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data,count:e.data.length}},orderBy:{column:"status",ascending:!0}}}}},Z0={class:"col-sm-12"},Q0={class:"card card-light",id:"modules-list"},X0={class:"card-header"},ew={class:"card-title"},tw={class:"card-body modules_list"};function aw(e,t,a,r,n,o){const m=v("alert"),p=v("data-table");return i(),d("div",Z0,[u(m,{componentName:"dataTableModal"}),s("div",Q0,[s("div",X0,[s("h3",ew,h(e.lang("list_of_modules")),1)]),s("div",tw,[u(p,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"modules-list"},null,8,["url","dataColumns","option"])])])])}const sw=x(J0,[["render",aw]]),nw={name:"error-debug",data(){return{crashOptions:[{name:"yes",value:1},{name:"no",value:0}],modeOptions:[{name:"enable",value:1},{name:"disable",value:0}],debug:"",bugsnag_reporting:"",loading:!0,hasDataPopulated:!1,pageLoad:!1,valueChanged:!1}},beforeMount(){this.getValues()},methods:{getValues(e){V.get("/api/error-and-debugging-options").then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.valueChanged=!1;let a=t.data.data.options;this.debug=a.debug?1:0,this.bugsnag_reporting=a.bugsnag_reporting?1:0}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},onChange(e,t){this[t]=e,t=="debug"&&(this.valueChanged=!0)},onSubmit(){this.$store.dispatch("unsetAlert"),this.pageLoad=!0;const e={};e.debug=this.debug?1:0,e.bugsnag=this.bugsnag_reporting?1:0,V.post("/api/error-and-debugging-options",e).then(t=>{this.pageLoad=!1,K(t,"error-debug"),this.getValues(),this.valueChanged&&this.redirect("/admin/error-and-debugging-options")}).catch(t=>{this.pageLoad=!1,U(t,"error-debug")})}},components:{"radio-button":Qe}},ow={class:"col-sm-12"},iw={class:"card card-light"},lw={class:"card-header"},rw={class:"card-title"},dw={class:"card-body"},cw={key:0,class:"row"},uw={key:1,class:"row"},mw={class:"card-footer"},hw={key:0,class:"row"};function pw(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("radio-button"),b=v("custom-loader");return i(),d("div",ow,[u(m,{componentName:"error-debug"}),s("div",iw,[s("div",lw,[s("h3",rw,h(e.trans("debug-options")),1)]),s("div",dw,[!n.hasDataPopulated||n.loading?(i(),d("div",cw,[u(p,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated?(i(),d("div",uw,[u(g,{options:n.modeOptions,label:e.trans("debugging"),name:"debug",value:n.debug,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"]),u(g,{options:n.crashOptions,label:e.trans("bugsnag-debugging"),name:"bugsnag_reporting",value:n.bugsnag_reporting,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])])):f("",!0)]),s("div",mw,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=w=>o.onSubmit())},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)])])]),n.pageLoad?(i(),d("div",hw,[u(b,{duration:4e3})])):f("",!0)])}const _w=x(nw,[["render",pw]]),fw={name:"detailed-logs",description:"Logs component",props:{data:{type:String,required:!0},scenario:{type:String,required:!0},info:{type:Array,default:()=>[]},logName:{type:String,default:""}},beforeMount(){app.component("parsed-data",{props:["dataValue","logName"],template:'<div v-html="loadData()"></div>',methods:{loadLabel(e){return ss(e)},loadData(){const a=new DOMParser().parseFromString(this.dataValue,"text/html").querySelector("body");Array.from(a.querySelectorAll("a")).forEach(o=>{const m=o.getAttribute("href");if(m&&m.includes(this.basePath())){const p=m.replace(this.basePath(),"").split("/").filter(Boolean);p[0]==="check-ticket"?o.setAttribute("target","_blank"):["department","team","service-desk/products","service-desk/vendor"].includes(p[0])&&(o.setAttribute("target","_blank"),o.setAttribute("href",`${this.basePath()}/admin`),o.title==="mention_link"&&(o.setAttribute("data-id","mention_link"),o.removeAttribute("title")))}o.setAttribute("target","_blank")});const n=a.innerHTML;return this.logName==="Labels"||this.logName==="Tags"?this.loadLabel(n):n}}})},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1},loadLabel(e){return ss(e)}},components:{Modal:_t}},gw={id:"log"},vw={class:"label label-default"},bw={class:"modal-title"},yw={id:"log_desc"},kw={class:"table table-bordered table-striped"},ww=["innerHTML"];function Cw(e,t,a,r,n,o){const m=v("parsed-data"),p=v("modal");return i(),d("div",null,[s("p",gw,[u(m,{dataValue:a.data,logName:a.logName},null,8,["dataValue","logName"]),a.info.length>0?(i(),d("a",{key:0,id:"logs_read_more",href:"javascript:;",onClick:t[0]||(t[0]=g=>n.showModal=!0)},[s("span",vw,h(e.lang("read-more")),1)])):f("",!0)]),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(p,{key:0,showModal:n.showModal,onClose:o.onClose,containerStyle:{width:"500px"}},{title:T(()=>[s("h4",bw,h(e.lang("detailed_log_info")),1)]),fields:T(()=>[s("div",yw,[s("table",kw,[s("tbody",null,[a.logName==="Labels"||a.logName==="Tags"?(i(!0),d(B,{key:0},re(a.info,g=>(i(),d("tr",{innerHTML:o.loadLabel(g)},null,8,ww))),256)):(i(!0),d(B,{key:1},re(a.info,g=>(i(),d("tr",null,h(g),1))),256))])])])]),_:1},8,["showModal","onClose"])):f("",!0)]),_:1})])}const mo=x(fw,[["render",Cw]]);const Dw={name:"mail-hover",description:"Mail hover component",setup(){const e=Me();return{getUserData:me(()=>e.getters.getUserData)}},props:{data:{type:Object,required:!0},objectKey:{type:String,required:!0}},data(){return{popId:"",user_data:{},base:"",loading:!0,hasDataPopulated:!1,showAlert:!1,err_message:""}},computed:{formattedData(){if(!Array.isArray(this.data[this.objectKey])){let e=Object.assign({},this.data);return e[this.objectKey]=[this.data[this.objectKey]],e}return this.data}},watch:{popId(e,t){return e},getUserData(e,t){return this.base=e.system_url,e}},beforeMount(){this.getUserData.system_url&&(this.base=this.getUserData.system_url)},methods:{popOver(e){this.popId=e},getData(e,t){this.user_data="",this.showAlert=!1,this.loading=!0,this.popId=t,V.get("/api/get-user-by-email?email="+e).then(a=>{this.showAlert=!1,this.user_data=a.data.data.user,this.loading=!1,this.hasDataPopulated=!0}).catch(a=>{this.loading=!1,this.showAlert=!0,this.err_message=a.response.data.message})},subString(e){return Yt(e,30)}}},Sw=["onClick"],Mw={key:0},Fw={class:"text-muted"},$w={key:1},Tw={key:2,class:"box-widget widget-user-2 cus-container"},Ew={class:"widget-user-header bg-info custom-head"},Lw={class:"widget-user-image"},Aw={class:"fas fa-eye float-end cus-icon"},Iw=["href"],Pw={class:"fas fa-eye float-end cus-icon"},Ow={class:"widget-user-username custom-name"},qw={class:"card-footer p-0"},xw={class:"nav flex-column"},Vw={class:"nav-item"},Nw={href:"javascript:;",class:"nav-link text-dark"},Rw={class:"float-end"},Uw={class:"nav-item"},jw={href:"javascript:;",class:"nav-link text-dark"},Bw={class:"float-end"};function Yw(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("faveo-image-element"),g=v("router-link"),b=v("popover"),w=H("tooltip");return i(),d("div",{id:"main",onMouseenter:t[0]||(t[0]=S=>o.popOver(a.data.id)),onMouseleave:t[1]||(t[1]=S=>o.popOver(null))},[(i(!0),d(B,null,re(o.formattedData[a.objectKey],(S,C)=>(i(),A(b,{key:C,arrow:"",placement:"bottom"},{content:T(()=>[n.showAlert===!0&&n.loading===!1?(i(),d("div",Mw,[s("p",Fw,h(n.err_message),1)])):f("",!0),n.loading===!0?(i(),d("div",$w,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:30})])):f("",!0),n.hasDataPopulated===!0&&n.loading===!1&&n.showAlert===!1?(i(),d("div",Tw,[s("div",Ew,[s("div",Lw,[u(p,{id:"user_img","source-url":n.user_data.profile_pic,classes:["img-circle w-40","img-responsive"],"alternative-text":"User Image","img-width":40,"img-height":40},null,8,["source-url"]),n.user_data.role=="System Configured Mail"?(i(),A(g,{key:0,to:n.user_data.profile_link.replace(e.basePath(),""),target:"_blank"},{default:T(()=>[P(s("i",Aw,null,512),[[w,e.lang("view")]])]),_:1},8,["to"])):(i(),d("a",{key:1,href:n.user_data.profile_link,target:"_blank"},[P(s("i",Pw,null,512),[[w,e.lang("view")]])],8,Iw))]),s("h3",Ow,[P((i(),d("span",null,[L(h(o.subString(n.user_data.name)),1)])),[[w,n.user_data.name]])])]),s("div",qw,[s("ul",xw,[s("li",Vw,[s("a",Nw,[L(h(e.lang("email"))+" ",1),P((i(),d("span",Rw,[L(h(o.subString(n.user_data.email)),1)])),[[w,n.user_data.email]])])]),s("li",Uw,[s("a",jw,[L(h(e.lang("Role"))+" ",1),P((i(),d("span",Bw,[L(h(o.subString(n.user_data.role)),1)])),[[w,n.user_data.role]])])])])])])):f("",!0)]),default:T(()=>[s("a",{id:"action_mail",href:"javascript:;",onClick:M=>o.getData(S,o.formattedData.id)},h(S)+"   ",9,Sw)]),_:2},1024))),128))],32)}const Ys=x(Dw,[["render",Yw]]);const Hw={name:"referee-id",description:"Referee id component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{refereeParser(e){return e.replace(this.basePath(),this.basePath()+"/panel")}}},Ww=["innerHTML"];function zw(e,t,a,r,n,o){return i(),d("div",{class:"log-mail-referee-id",id:"referee_id",innerHTML:o.refereeParser(a.data.referee_id)},null,8,Ww)}const Gw=x(Hw,[["render",zw]]);const Kw={name:"logs-modal",description:"Logs Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},data:{type:Object,default:()=>{}},title:{type:String,default:""},hideCheckBox:{type:Boolean}},data:()=>({containerStyle:{width:"950px"},shouldHideCheckBox:!0,loading:!0,size:60,lang_locale:"",content:"",mail_message:"",isDisabled:!0,delete_after_date:"",delete_before_date:"",timeOptions:{start:"00:00",step:"00:30",end:"23:30"},checkOptions:[{name:"cron",value:"cron"},{name:"mail",value:"mail"},{name:"exception",value:"exception"}],logs:[]}),beforeMount(){this.checkTitle()},created(){this.lang_locale=localStorage.getItem("LANGUAGE")},methods:{contentParser(e){var t=new DOMParser,a=t.parseFromString(e,"text/html");const r=a.getElementsByTagName("body")[0];return r.querySelectorAll("a").forEach(o=>{let p=o.href.replace(this.basePath(),"").split("/").filter(g=>g);if(p[0]=="change-approval"||p[0]=="service-desk"&&p[1]=="contract-approval")o=o;else{const g=a.createElement("a");!o.href.includes("/panel/")&&!o.href.includes("/ticket-conversation/")&&!o.href.includes("/agent/export/download/")&&!o.href.includes("/check-ticket/")&&!o.href.includes("/client-secret/")?g.setAttribute("href",o.href.replace(this.basePath(),this.basePath()+"/panel")):g.setAttribute("href",o.href),g.innerText=o.innerText,o.parentNode.replaceChild(g,o)}}),r.innerHTML},checkTitle(){this.title!=="delete_logs"?this.title==="logs_content"?this.getLogsContent(this.data.id):(this.content=this.data.trace,this.containerStyle.width="1000px",this.loading=!1):this.loading=!1},getLogsContent(e){V.get("/api/get-log-mail-body/"+e).then(t=>{this.loading=!1,this.content=this.contentParser(t.data.data.mail_body.replaceAll(`<br />\r
`,"")),this.mail_message=t.data.message}).catch(t=>{this.loading=!1})},onChange(e,t){this[t]=e,t==="logs"&&(this.isDisabled=e.length===0)},onSubmit(){this.loading=!0,this.isDisabled=!0;const e={};e.categories=this.logs,e.delete_before=this.delete_before_date!==""&&this.delete_before_date!==null?Ie(this.delete_before_date).format("YYYY-MM-DD HH:mm:ss"):"",e.delete_after=this.delete_after_date!==""&&this.delete_after_date!==null?Ie(this.delete_after_date).format("YYYY-MM-DD HH:mm:ss"):"",V.delete("/api/delete-logs",{data:e}).then(t=>{K(t,"dataTableModal"),window.emitter.emit("cronLogsrefreshData"),window.emitter.emit("mailLogsrefreshData"),window.emitter.emit("exceptionLogsrefreshData"),this.onClose(),this.loading=!1,this.isDisabled=!0}).catch(t=>{U(t,"dataTableModal")})}},components:{"date-time-field":Dt,"check-box":Aa}},Jw={class:"modal-title"},Zw={key:0,class:"row"},Qw={key:1,class:"mod_width"},Xw=["innerHTML"],eC={key:2,class:"span"},tC=["innerHTML"],aC={key:3,class:"row"},sC={key:0},nC=["disabled"];function oC(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("date-time-field"),g=v("check-box"),b=v("modal");return i(),d("div",null,[a.showModal?(i(),A(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:T(()=>[s("h4",Jw,h(e.lang(a.title)),1)]),fields:T(()=>[e.loading?(i(),d("div",Zw,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:e.size},null,8,["size"])])):f("",!0),!e.loading&&a.title!=="delete_logs"?(i(),d("div",Qw,[s("p",{innerHTML:e.content,class:G([{trace:a.title==="trace"}])},null,10,Xw)])):f("",!0),e.mail_message!=""?(i(),d("div",eC,[t[1]||(t[1]=s("br",null,null,-1)),s("span",{innerHTML:e.mail_message},null,8,tC)])):f("",!0),!e.loading&&a.title==="delete_logs"?(i(),d("div",aC,[u(p,{id:"log_delete_date1",label:e.lang("delete_after"),value:e.delete_after_date,type:"datetime","time-picker-options":e.timeOptions,name:"delete_after_date",required:!1,onChange:o.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-sm-6",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"]),u(p,{id:"log_delete_date2",label:e.lang("delete_before"),value:e.delete_before_date,type:"datetime","time-picker-options":e.timeOptions,name:"delete_before_date",required:!1,onChange:o.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-sm-6",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"]),a.hideCheckBox?f("",!0):(i(),A(g,{key:0,id:"log_delete_checkbox",options:e.checkOptions,label:e.lang("logs"),name:"logs",value:e.logs,onChange:o.onChange,classname:"col-sm-6",class_name:"col-sm-4"},null,8,["options","label","value","onChange"]))])):f("",!0)]),controls:T(()=>[a.title==="delete_logs"?(i(),d("div",sC,[s("button",{id:"log_delete_btn",type:"button",onClick:t[0]||(t[0]=w=>o.onSubmit()),class:"btn btn-secondary",disabled:e.isDisabled},[t[2]||(t[2]=s("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("delete")),1)],8,nC)])):f("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const rn=x(Kw,[["render",oC]]),iC={name:"mail-subject",description:"shows mail subject as a clickable link which gives mail body on click",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")},getMailBody(){this.showModal=!0}},components:{"logs-modal":rn}};function lC(e,t,a,r,n,o){const m=v("logs-modal");return i(),d("div",null,[s("a",{href:"javascript:;",id:"log-mail-subject",onClick:t[0]||(t[0]=(...p)=>o.getMailBody&&o.getMailBody(...p))},h(a.data.subject),1),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(m,{key:0,onClose:o.onClose,showModal:n.showModal,data:a.data,title:"logs_content"},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})])}const rC=x(iC,[["render",lC]]);const dC={name:"exception-detail-modal",description:"Logs exception detail component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function,required:!0},data:{type:Object,required:!0}},data:()=>({containerStyle:{width:"800px"}})},cC={class:"modal-title"},uC={style:{"font-size":"small"}},mC=["innerHTML"];function hC(e,t,a,r,n,o){const m=v("modal");return i(),d("div",null,[a.showModal?(i(),A(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:T(()=>[s("h4",cC,h(e.lang("exception_details")),1)]),fields:T(()=>[s("samp",uC,[s("strong",null,h(e.lang("message"))+":",1),t[0]||(t[0]=L()),s("span",null,h(a.data.message),1),t[1]||(t[1]=s("br",null,null,-1)),t[2]||(t[2]=s("br",null,null,-1)),s("strong",null,h(e.lang("file"))+":",1),t[3]||(t[3]=L()),s("span",null,h(a.data.file)+"("+h(a.data.line)+")",1),t[4]||(t[4]=s("br",null,null,-1)),t[5]||(t[5]=s("br",null,null,-1)),s("strong",null,h(e.lang("trace"))+":",1),s("p",{innerHTML:a.data.trace,class:"trace"},null,8,mC)])]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const pC=x(dC,[["render",hC],["__scopeId","data-v-9165c816"]]);function _C(e,t){for(var a=-1,r=e==null?0:e.length,n=Array(r);++a<r;)n[a]=t(e[a],a,e);return n}var Oi=_C,fC=rs,gC=ds,vC="[object Symbol]";function bC(e){return typeof e=="symbol"||gC(e)&&fC(e)==vC}var qi=bC,ho=dm,yC=Oi,kC=Si,wC=qi,CC=1/0,po=ho?ho.prototype:void 0,_o=po?po.toString:void 0;function xi(e){if(typeof e=="string")return e;if(kC(e))return yC(e,xi)+"";if(wC(e))return _o?_o.call(e):"";var t=e+"";return t=="0"&&1/e==-CC?"-0":t}var Vt=xi,DC=Vt;function SC(e){return e==null?"":DC(e)}var et=SC;function MC(e,t,a){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),a=a>n?n:a,a<0&&(a+=n),n=t>a?0:a-t>>>0,t>>>=0;for(var o=Array(n);++r<n;)o[r]=e[r+t];return o}var FC=MC,$C=FC;function TC(e,t,a){var r=e.length;return a=a===void 0?r:a,!t&&a>=r?e:$C(e,t,a)}var Xt=TC,EC="\\ud800-\\udfff",LC="\\u0300-\\u036f",AC="\\ufe20-\\ufe2f",IC="\\u20d0-\\u20ff",PC=LC+AC+IC,OC="\\ufe0e\\ufe0f",qC="\\u200d",xC=RegExp("["+qC+EC+PC+OC+"]");function VC(e){return xC.test(e)}var va=VC;function NC(e){return e.split("")}var RC=NC,Vi="\\ud800-\\udfff",UC="\\u0300-\\u036f",jC="\\ufe20-\\ufe2f",BC="\\u20d0-\\u20ff",YC=UC+jC+BC,HC="\\ufe0e\\ufe0f",WC="["+Vi+"]",Qs="["+YC+"]",Xs="\\ud83c[\\udffb-\\udfff]",zC="(?:"+Qs+"|"+Xs+")",Ni="[^"+Vi+"]",Ri="(?:\\ud83c[\\udde6-\\uddff]){2}",Ui="[\\ud800-\\udbff][\\udc00-\\udfff]",GC="\\u200d",ji=zC+"?",Bi="["+HC+"]?",KC="(?:"+GC+"(?:"+[Ni,Ri,Ui].join("|")+")"+Bi+ji+")*",JC=Bi+ji+KC,ZC="(?:"+[Ni+Qs+"?",Qs,Ri,Ui,WC].join("|")+")",QC=RegExp(Xs+"(?="+Xs+")|"+ZC+JC,"g");function XC(e){return e.match(QC)||[]}var e2=XC,t2=RC,a2=va,s2=e2;function n2(e){return a2(e)?s2(e):t2(e)}var ea=n2,o2=Xt,i2=va,l2=ea,r2=et;function d2(e){return function(t){t=r2(t);var a=i2(t)?l2(t):void 0,r=a?a[0]:t.charAt(0),n=a?o2(a,1).join(""):t.slice(1);return r[e]()+n}}var Yi=d2,c2=Yi,u2=c2("toUpperCase"),dn=u2,m2=et,h2=dn;function p2(e){return h2(m2(e).toLowerCase())}var Hi=p2;function _2(e,t,a,r){var n=-1,o=e==null?0:e.length;for(r&&o&&(a=e[++n]);++n<o;)a=t(a,e[n],n,e);return a}var f2=_2;function g2(e){return function(t){return e==null?void 0:e[t]}}var cn=g2,v2=cn,b2={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},y2=v2(b2),k2=y2,w2=k2,C2=et,D2=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,S2="\\u0300-\\u036f",M2="\\ufe20-\\ufe2f",F2="\\u20d0-\\u20ff",$2=S2+M2+F2,T2="["+$2+"]",E2=RegExp(T2,"g");function L2(e){return e=C2(e),e&&e.replace(D2,w2).replace(E2,"")}var Wi=L2,A2=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function I2(e){return e.match(A2)||[]}var P2=I2,O2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function q2(e){return O2.test(e)}var x2=q2,zi="\\ud800-\\udfff",V2="\\u0300-\\u036f",N2="\\ufe20-\\ufe2f",R2="\\u20d0-\\u20ff",U2=V2+N2+R2,Gi="\\u2700-\\u27bf",Ki="a-z\\xdf-\\xf6\\xf8-\\xff",j2="\\xac\\xb1\\xd7\\xf7",B2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Y2="\\u2000-\\u206f",H2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ji="A-Z\\xc0-\\xd6\\xd8-\\xde",W2="\\ufe0e\\ufe0f",Zi=j2+B2+Y2+H2,Qi="['’]",fo="["+Zi+"]",z2="["+U2+"]",Xi="\\d+",G2="["+Gi+"]",el="["+Ki+"]",tl="[^"+zi+Zi+Xi+Gi+Ki+Ji+"]",K2="\\ud83c[\\udffb-\\udfff]",J2="(?:"+z2+"|"+K2+")",Z2="[^"+zi+"]",al="(?:\\ud83c[\\udde6-\\uddff]){2}",sl="[\\ud800-\\udbff][\\udc00-\\udfff]",ua="["+Ji+"]",Q2="\\u200d",go="(?:"+el+"|"+tl+")",X2="(?:"+ua+"|"+tl+")",vo="(?:"+Qi+"(?:d|ll|m|re|s|t|ve))?",bo="(?:"+Qi+"(?:D|LL|M|RE|S|T|VE))?",nl=J2+"?",ol="["+W2+"]?",eD="(?:"+Q2+"(?:"+[Z2,al,sl].join("|")+")"+ol+nl+")*",tD="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",aD="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sD=ol+nl+eD,nD="(?:"+[G2,al,sl].join("|")+")"+sD,oD=RegExp([ua+"?"+el+"+"+vo+"(?="+[fo,ua,"$"].join("|")+")",X2+"+"+bo+"(?="+[fo,ua+go,"$"].join("|")+")",ua+"?"+go+"+"+vo,ua+"+"+bo,aD,tD,Xi,nD].join("|"),"g");function iD(e){return e.match(oD)||[]}var lD=iD,rD=P2,dD=x2,cD=et,uD=lD;function mD(e,t,a){return e=cD(e),t=a?void 0:t,t===void 0?dD(e)?uD(e):rD(e):e.match(t)||[]}var il=mD,hD=f2,pD=Wi,_D=il,fD="['’]",gD=RegExp(fD,"g");function vD(e){return function(t){return hD(_D(pD(t).replace(gD,"")),e,"")}}var ba=vD,bD=Hi,yD=ba,kD=yD(function(e,t,a){return t=t.toLowerCase(),e+(a?bD(t):t)}),wD=kD;function CD(e,t,a){return e===e&&(a!==void 0&&(e=e<=a?e:a),t!==void 0&&(e=e>=t?e:t)),e}var ll=CD,DD=/\s/;function SD(e){for(var t=e.length;t--&&DD.test(e.charAt(t)););return t}var rl=SD,MD=rl,FD=/^\s+/;function $D(e){return e&&e.slice(0,MD(e)+1).replace(FD,"")}var dl=$D,TD=dl,yo=cs,ED=qi,ko=0/0,LD=/^[-+]0x[0-9a-f]+$/i,AD=/^0b[01]+$/i,ID=/^0o[0-7]+$/i,PD=parseInt;function OD(e){if(typeof e=="number")return e;if(ED(e))return ko;if(yo(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=yo(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=TD(e);var a=AD.test(e);return a||ID.test(e)?PD(e.slice(2),a?2:8):LD.test(e)?ko:+e}var qD=OD,xD=qD,wo=1/0,VD=17976931348623157e292;function ND(e){if(!e)return e===0?e:0;if(e=xD(e),e===wo||e===-wo){var t=e<0?-1:1;return t*VD}return e===e?e:0}var RD=ND,UD=RD;function jD(e){var t=UD(e),a=t%1;return t===t?a?t-a:t:0}var ta=jD,BD=ll,YD=Vt,HD=ta,WD=et;function zD(e,t,a){e=WD(e),t=YD(t);var r=e.length;a=a===void 0?r:BD(HD(a),0,r);var n=a;return a-=t.length,a>=0&&e.slice(a,n)==t}var GD=zD,KD=cn,JD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ZD=KD(JD),QD=ZD,XD=QD,eS=et,cl=/[&<>"']/g,tS=RegExp(cl.source);function aS(e){return e=eS(e),e&&tS.test(e)?e.replace(cl,XD):e}var ul=aS,sS=et,ml=/[\\^$.*+?()[\]{}|]/g,nS=RegExp(ml.source);function oS(e){return e=sS(e),e&&nS.test(e)?e.replace(ml,"\\$&"):e}var iS=oS,lS=ba,rS=lS(function(e,t,a){return e+(a?"-":"")+t.toLowerCase()}),dS=rS,cS=ba,uS=cS(function(e,t,a){return e+(a?" ":"")+t.toLowerCase()}),mS=uS,hS=Yi,pS=hS("toLowerCase"),_S=pS,fS=9007199254740991,gS=Math.floor;function vS(e,t){var a="";if(!e||t<1||t>fS)return a;do t%2&&(a+=e),t=gS(t/2),t&&(e+=e);while(t);return a}var hl=vS;function bS(e){return function(t){return t==null?void 0:t[e]}}var yS=bS,kS=yS,wS=kS("length"),CS=wS,pl="\\ud800-\\udfff",DS="\\u0300-\\u036f",SS="\\ufe20-\\ufe2f",MS="\\u20d0-\\u20ff",FS=DS+SS+MS,$S="\\ufe0e\\ufe0f",TS="["+pl+"]",en="["+FS+"]",tn="\\ud83c[\\udffb-\\udfff]",ES="(?:"+en+"|"+tn+")",_l="[^"+pl+"]",fl="(?:\\ud83c[\\udde6-\\uddff]){2}",gl="[\\ud800-\\udbff][\\udc00-\\udfff]",LS="\\u200d",vl=ES+"?",bl="["+$S+"]?",AS="(?:"+LS+"(?:"+[_l,fl,gl].join("|")+")"+bl+vl+")*",IS=bl+vl+AS,PS="(?:"+[_l+en+"?",en,fl,gl,TS].join("|")+")",Co=RegExp(tn+"(?="+tn+")|"+PS+IS,"g");function OS(e){for(var t=Co.lastIndex=0;Co.test(e);)++t;return t}var qS=OS,xS=CS,VS=va,NS=qS;function RS(e){return VS(e)?NS(e):xS(e)}var Ia=RS,Do=hl,US=Vt,jS=Xt,BS=va,YS=Ia,HS=ea,WS=Math.ceil;function zS(e,t){t=t===void 0?" ":US(t);var a=t.length;if(a<2)return a?Do(t,e):t;var r=Do(t,WS(e/YS(t)));return BS(t)?jS(HS(r),0,e).join(""):r.slice(0,e)}var un=zS,So=un,GS=Ia,KS=ta,JS=et,ZS=Math.ceil,QS=Math.floor;function XS(e,t,a){e=JS(e),t=KS(t);var r=t?GS(e):0;if(!t||r>=t)return e;var n=(t-r)/2;return So(QS(n),a)+e+So(ZS(n),a)}var eM=XS,tM=un,aM=Ia,sM=ta,nM=et;function oM(e,t,a){e=nM(e),t=sM(t);var r=t?aM(e):0;return t&&r<t?e+tM(t-r,a):e}var iM=oM,lM=un,rM=Ia,dM=ta,cM=et;function uM(e,t,a){e=cM(e),t=dM(t);var r=t?rM(e):0;return t&&r<t?lM(t-r,a)+e:e}var mM=uM,hM=cm,pM=et,_M=/^\s+/,fM=hM.parseInt;function gM(e,t,a){return a||t==null?t=0:t&&(t=+t),fM(pM(e).replace(_M,""),t||0)}var vM=gM;function bM(e,t){return e===t||e!==e&&t!==t}var mn=bM,yM=9007199254740991,kM=/^(?:0|[1-9]\d*)$/;function wM(e,t){var a=typeof e;return t=t??yM,!!t&&(a=="number"||a!="symbol"&&kM.test(e))&&e>-1&&e%1==0&&e<t}var yl=wM,CM=mn,DM=nn,SM=yl,MM=cs;function FM(e,t,a){if(!MM(a))return!1;var r=typeof t;return(r=="number"?DM(a)&&SM(t,a.length):r=="string"&&t in a)?CM(a[t],e):!1}var ms=FM,$M=hl,TM=ms,EM=ta,LM=et;function AM(e,t,a){return(a?TM(e,t,a):t===void 0)?t=1:t=EM(t),$M(LM(e),t)}var IM=AM,PM=et;function OM(){var e=arguments,t=PM(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var qM=OM,xM=ba,VM=xM(function(e,t,a){return e+(a?"_":"")+t.toLowerCase()}),NM=VM,RM=rs,UM=ds,jM="[object RegExp]";function BM(e){return UM(e)&&RM(e)==jM}var YM=BM,HM=YM,WM=mm,Mo=um,Fo=Mo&&Mo.isRegExp,zM=Fo?WM(Fo):HM,kl=zM,GM=Vt,KM=Xt,JM=va,ZM=ms,QM=kl,XM=ea,eF=et,tF=4294967295;function aF(e,t,a){return a&&typeof a!="number"&&ZM(e,t,a)&&(t=a=void 0),a=a===void 0?tF:a>>>0,a?(e=eF(e),e&&(typeof t=="string"||t!=null&&!QM(t))&&(t=GM(t),!t&&JM(e))?KM(XM(e),0,a):e.split(t,a)):[]}var sF=aF,nF=ba,oF=dn,iF=nF(function(e,t,a){return e+(a?" ":"")+oF(t)}),lF=iF,rF=ll,dF=Vt,cF=ta,uF=et;function mF(e,t,a){return e=uF(e),a=a==null?0:rF(cF(a),0,e.length),t=dF(t),e.slice(a,a+t.length)==t}var hF=mF,pF=hm,_F=function(){try{var e=pF(Object,"defineProperty");return e({},"",{}),e}catch{}}(),wl=_F,$o=wl;function fF(e,t,a){t=="__proto__"&&$o?$o(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}var Cl=fF,gF=Cl,vF=mn,bF=Object.prototype,yF=bF.hasOwnProperty;function kF(e,t,a){var r=e[t];(!(yF.call(e,t)&&vF(r,a))||a===void 0&&!(t in e))&&gF(e,t,a)}var wF=kF,CF=wF,DF=Cl;function SF(e,t,a,r){var n=!a;a||(a={});for(var o=-1,m=t.length;++o<m;){var p=t[o],g=r?r(a[p],e[p],p,a,e):void 0;g===void 0&&(g=e[p]),n?DF(a,p,g):CF(a,p,g)}return a}var MF=SF;function FF(e){return e}var Dl=FF;function $F(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}var Sl=$F,TF=Sl,To=Math.max;function EF(e,t,a){return t=To(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,o=To(r.length-t,0),m=Array(o);++n<o;)m[n]=r[t+n];n=-1;for(var p=Array(t+1);++n<t;)p[n]=r[n];return p[t]=a(m),TF(e,this,p)}}var LF=EF;function AF(e){return function(){return e}}var IF=AF,PF=IF,Eo=wl,OF=Dl,qF=Eo?function(e,t){return Eo(e,"toString",{configurable:!0,enumerable:!1,value:PF(t),writable:!0})}:OF,xF=qF,VF=800,NF=16,RF=Date.now;function UF(e){var t=0,a=0;return function(){var r=RF(),n=NF-(r-a);if(a=r,n>0){if(++t>=VF)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var jF=UF,BF=xF,YF=jF,HF=YF(BF),WF=HF,zF=Dl,GF=LF,KF=WF;function JF(e,t){return KF(GF(e,t,zF),e+"")}var Ml=JF,ZF=Ml,QF=ms;function XF(e){return ZF(function(t,a){var r=-1,n=a.length,o=n>1?a[n-1]:void 0,m=n>2?a[2]:void 0;for(o=e.length>3&&typeof o=="function"?(n--,o):void 0,m&&QF(a[0],a[1],m)&&(o=n<3?void 0:o,n=1),t=Object(t);++r<n;){var p=a[r];p&&e(t,p,r,o)}return t})}var e$=XF;function t$(e,t){for(var a=-1,r=Array(e);++a<e;)r[a]=t(a);return r}var a$=t$,s$=a$,n$=pm,o$=Si,i$=_m,l$=yl,r$=fm,d$=Object.prototype,c$=d$.hasOwnProperty;function u$(e,t){var a=o$(e),r=!a&&n$(e),n=!a&&!r&&i$(e),o=!a&&!r&&!n&&r$(e),m=a||r||n||o,p=m?s$(e.length,String):[],g=p.length;for(var b in e)(t||c$.call(e,b))&&!(m&&(b=="length"||n&&(b=="offset"||b=="parent")||o&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||l$(b,g)))&&p.push(b);return p}var Fl=u$;function m$(e){var t=[];if(e!=null)for(var a in Object(e))t.push(a);return t}var h$=m$,p$=cs,_$=gm,f$=h$,g$=Object.prototype,v$=g$.hasOwnProperty;function b$(e){if(!p$(e))return f$(e);var t=_$(e),a=[];for(var r in e)r=="constructor"&&(t||!v$.call(e,r))||a.push(r);return a}var y$=b$,k$=Fl,w$=y$,C$=nn;function D$(e){return C$(e)?k$(e,!0):w$(e)}var S$=D$,M$=MF,F$=e$,$$=S$,T$=F$(function(e,t,a,r){M$(t,$$(t),e,r)}),E$=T$,L$=vm,A$=L$(Object.getPrototypeOf,Object),I$=A$,P$=rs,O$=I$,q$=ds,x$="[object Object]",V$=Function.prototype,N$=Object.prototype,$l=V$.toString,R$=N$.hasOwnProperty,U$=$l.call(Object);function j$(e){if(!q$(e)||P$(e)!=x$)return!1;var t=O$(e);if(t===null)return!0;var a=R$.call(t,"constructor")&&t.constructor;return typeof a=="function"&&a instanceof a&&$l.call(a)==U$}var B$=j$,Y$=rs,H$=ds,W$=B$,z$="[object DOMException]",G$="[object Error]";function K$(e){if(!H$(e))return!1;var t=Y$(e);return t==G$||t==z$||typeof e.message=="string"&&typeof e.name=="string"&&!W$(e)}var Tl=K$,J$=Sl,Z$=Ml,Q$=Tl,X$=Z$(function(e,t){try{return J$(e,void 0,t)}catch(a){return Q$(a)?a:new Error(a)}}),eT=X$,tT=Oi;function aT(e,t){return tT(t,function(a){return e[a]})}var sT=aT,nT=mn,El=Object.prototype,oT=El.hasOwnProperty;function iT(e,t,a,r){return e===void 0||nT(e,El[a])&&!oT.call(r,a)?t:e}var lT=iT,rT={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function dT(e){return"\\"+rT[e]}var cT=dT,uT=Fl,mT=bm,hT=nn;function pT(e){return hT(e)?uT(e):mT(e)}var _T=pT,fT=/<%=([\s\S]+?)%>/g,Ll=fT,gT=/<%-([\s\S]+?)%>/g,vT=gT,bT=/<%([\s\S]+?)%>/g,yT=bT,kT=ul,wT=vT,CT=yT,DT=Ll,ST={escape:wT,evaluate:CT,interpolate:DT,variable:"",imports:{_:{escape:kT}}},Al=ST,Lo=E$,MT=eT,FT=sT,Ao=lT,$T=cT,TT=Tl,ET=ms,LT=_T,AT=Ll,Io=Al,IT=et,PT="Invalid `variable` option passed into `_.template`",OT=/\b__p \+= '';/g,qT=/\b(__p \+=) '' \+/g,xT=/(__e\(.*?\)|\b__t\)) \+\n'';/g,VT=/[()=,{}\[\]\/\s]/,NT=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xa=/($^)/,RT=/['\n\r\u2028\u2029\\]/g,UT=Object.prototype,Po=UT.hasOwnProperty;function jT(e,t,a){var r=Io.imports._.templateSettings||Io;a&&ET(e,t,a)&&(t=void 0),e=IT(e),t=Lo({},t,r,Ao);var n=Lo({},t.imports,r.imports,Ao),o=LT(n),m=FT(n,o),p,g,b=0,w=t.interpolate||Xa,S="__p += '",C=RegExp((t.escape||Xa).source+"|"+w.source+"|"+(w===AT?NT:Xa).source+"|"+(t.evaluate||Xa).source+"|$","g"),M=Po.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(C,function(I,R,Y,X,le,ne){return Y||(Y=X),S+=e.slice(b,ne).replace(RT,$T),R&&(p=!0,S+=`' +
__e(`+R+`) +
'`),le&&(g=!0,S+=`';
`+le+`;
__p += '`),Y&&(S+=`' +
((__t = (`+Y+`)) == null ? '' : __t) +
'`),b=ne+I.length,I}),S+=`';
`;var D=Po.call(t,"variable")&&t.variable;if(!D)S=`with (obj) {
`+S+`
}
`;else if(VT.test(D))throw new Error(PT);S=(g?S.replace(OT,""):S).replace(qT,"$1").replace(xT,"$1;"),S="function("+(D||"obj")+`) {
`+(D?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(p?", __e = _.escape":"")+(g?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+S+`return __p
}`;var F=MT(function(){return Function(o,M+"return "+S).apply(void 0,m)});if(F.source=S,TT(F))throw F;return F}var BT=jT,YT=et;function HT(e){return YT(e).toLowerCase()}var WT=HT,zT=et;function GT(e){return zT(e).toUpperCase()}var KT=GT;function JT(e,t,a,r){for(var n=e.length,o=a+(r?1:-1);r?o--:++o<n;)if(t(e[o],o,e))return o;return-1}var ZT=JT;function QT(e){return e!==e}var XT=QT;function e8(e,t,a){for(var r=a-1,n=e.length;++r<n;)if(e[r]===t)return r;return-1}var t8=e8,a8=ZT,s8=XT,n8=t8;function o8(e,t,a){return t===t?n8(e,t,a):a8(e,s8,a)}var Il=o8,i8=Il;function l8(e,t){for(var a=e.length;a--&&i8(t,e[a],0)>-1;);return a}var Pl=l8,r8=Il;function d8(e,t){for(var a=-1,r=e.length;++a<r&&r8(t,e[a],0)>-1;);return a}var Ol=d8,c8=Vt,u8=dl,m8=Xt,h8=Pl,p8=Ol,Oo=ea,_8=et;function f8(e,t,a){if(e=_8(e),e&&(a||t===void 0))return u8(e);if(!e||!(t=c8(t)))return e;var r=Oo(e),n=Oo(t),o=p8(r,n),m=h8(r,n)+1;return m8(r,o,m).join("")}var g8=f8,v8=Vt,b8=Xt,y8=Pl,qo=ea,k8=et,w8=rl;function C8(e,t,a){if(e=k8(e),e&&(a||t===void 0))return e.slice(0,w8(e)+1);if(!e||!(t=v8(t)))return e;var r=qo(e),n=y8(r,qo(t))+1;return b8(r,0,n).join("")}var D8=C8,S8=Vt,M8=Xt,F8=Ol,xo=ea,$8=et,T8=/^\s+/;function E8(e,t,a){if(e=$8(e),e&&(a||t===void 0))return e.replace(T8,"");if(!e||!(t=S8(t)))return e;var r=xo(e),n=F8(r,xo(t));return M8(r,n).join("")}var L8=E8,Vo=Vt,A8=Xt,I8=va,P8=cs,O8=kl,q8=Ia,x8=ea,V8=ta,No=et,N8=30,R8="...",U8=/\w*$/;function j8(e,t){var a=N8,r=R8;if(P8(t)){var n="separator"in t?t.separator:n;a="length"in t?V8(t.length):a,r="omission"in t?Vo(t.omission):r}e=No(e);var o=e.length;if(I8(e)){var m=x8(e);o=m.length}if(a>=o)return e;var p=a-q8(r);if(p<1)return r;var g=m?A8(m,0,p).join(""):e.slice(0,p);if(n===void 0)return g+r;if(m&&(p+=g.length-p),O8(n)){if(e.slice(p).search(n)){var b,w=g;for(n.global||(n=RegExp(n.source,No(U8.exec(n))+"g")),n.lastIndex=0;b=n.exec(w);)var S=b.index;g=g.slice(0,S===void 0?p:S)}}else if(e.indexOf(Vo(n),p)!=p){var C=g.lastIndexOf(n);C>-1&&(g=g.slice(0,C))}return g+r}var B8=j8,Y8=cn,H8={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},W8=Y8(H8),z8=W8,G8=et,K8=z8,ql=/&(?:amp|lt|gt|quot|#39);/g,J8=RegExp(ql.source);function Z8(e){return e=G8(e),e&&J8.test(e)?e.replace(ql,K8):e}var Q8=Z8,X8=ba,e3=X8(function(e,t,a){return e+(a?" ":"")+t.toUpperCase()}),t3=e3,a3={camelCase:wD,capitalize:Hi,deburr:Wi,endsWith:GD,escape:ul,escapeRegExp:iS,kebabCase:dS,lowerCase:mS,lowerFirst:_S,pad:eM,padEnd:iM,padStart:mM,parseInt:vM,repeat:IM,replace:qM,snakeCase:NM,split:sF,startCase:lF,startsWith:hF,template:BT,templateSettings:Al,toLower:WT,toUpper:KT,trim:g8,trimEnd:D8,trimStart:L8,truncate:B8,unescape:Q8,upperCase:t3,upperFirst:dn,words:il};const s3={name:"log-status",description:"status of the log",components:{"exception-detail-modal":pC},props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},computed:{badgeClass(){switch(this.data.status){case"sent":case"accepted":case"completed":return"text-bg-success";case"queued":case"running":case"pending":return"text-bg-warning";case"rejected":case"failed":case"blocked":return"text-bg-danger";case"attachment-removed":return"text-bg-danger";default:return"text-bg-light"}},getStatusTitle:function(){let e=a3.toLower(this.trans(this.data.status));return this.data.exception?e+this.trans("click_to_view_exception"):this.trans(this.data.status)}},methods:{onClose(){this.showModal=!1}}},n3=["id"];function o3(e,t,a,r,n,o){const m=v("exception-detail-modal"),p=H("tooltip");return i(),d("div",null,[P((i(),d("span",{id:"log-status-"+a.data.id,class:G(["badge",o.badgeClass,"log-status","text-uppercase"]),onClick:t[0]||(t[0]=g=>n.showModal=!!a.data.exception),style:bt(a.data.exception?{cursor:"pointer"}:{})},[L(h(e.lang(a.data.status)),1)],14,n3)),[[p,o.getStatusTitle]]),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(m,{key:0,onClose:o.onClose,showModal:n.showModal,data:a.data.exception},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})])}const xl=x(s3,[["render",o3]]);const i3={props:{columns:{type:Array,default:()=>[]},options:{type:Object,default:()=>{}},apiUrl:{type:String,default:""},id:{type:String,default:""},componentTitle:{type:String,default:""},sender_mails:{type:Array,default:()=>[]},reciever_mails:{type:Array,default:()=>[]}},data(){return{apiEndpoint:this.apiUrl+"&sender_mails="+this.sender_mails+"&reciever_mails="+this.reciever_mails}},watch:{sender_mails(e,t){let a=this.reciever_mails.map(n=>n.email),r=e.map(n=>n.email);return this.apiEndpoint=this.apiUrl+"&sender_mails="+r+"&reciever_mails="+a,e},reciever_mails(e,t){let a=this.sender_mails.map(n=>n.email),r=e.map(n=>n.email);return this.apiEndpoint=this.apiUrl+"&sender_mails="+a+"&reciever_mails="+r,e},apiEndpoint(e,t){return e}}},l3={class:"col-md-12"};function r3(e,t,a,r,n,o){const m=v("data-table");return i(),d("div",l3,[n.apiEndpoint?(i(),A(m,{key:0,id:"logs_table",url:n.apiEndpoint,dataColumns:a.columns,option:a.options,scroll_to:a.id,componentTitle:a.componentTitle},null,8,["url","dataColumns","option","scroll_to","componentTitle"])):f("",!0)])}const hn=x(i3,[["render",r3],["__scopeId","data-v-47e4b59a"]]),d3={name:"retry-modal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},data:{type:Object}},data:()=>({isDisabled:!1,containerStyle:{width:"500px"},loading:!1}),methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,V.get("/retry/mail-log/"+this.data.id).then(e=>{this.loading=!1,this.isDisabled=!1,K(e,"dataTableModal"),window.emitter.emit("mailLogsrefreshData"),window.emitter.emit("retryLogActionPerformed"),this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,U(e,"dataTableModal")})}}},c3={class:"modal-title"},u3={key:0},m3={key:1,class:"row"},h3=["disabled"];function p3(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("modal");return a.showModal?(i(),A(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:T(()=>[s("h4",c3,h(e.lang("retry")),1)]),fields:T(()=>[e.loading?f("",!0):(i(),d("div",u3,[s("span",null,h(e.lang("are_you_sure")),1)])),e.loading?(i(),d("div",m3,[u(m,{"animation-duration":4e3,color:"#1d78ff"})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=g=>o.onSubmit()),class:"btn btn-primary",disabled:e.isDisabled},[t[1]||(t[1]=s("i",{class:"fas fa-redo","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("retry")),1)],8,h3)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const _3=x(d3,[["render",p3]]);const f3={setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},props:{category:{type:Object,default:()=>{}},status:{type:String,default:""},created_at:{type:[String,Date],default:""}},data(){return{apiUrl:"/api/logs/mail",columns:["category","sender_mail","reciever_mail","collaborators","subject","referee_id","referee_type","created_at","updated_at","status","action"],options:{},reciever_mails:[],sender_mails:[],moment:Ie,showModal:!1,data:{}}},beforeMount(){let e=this.created_at?Ie(this.created_at).format("YYYY-MM-DD"):"";this.apiUrl="/api/logs/mail?category_id="+this.category.id+"&status="+this.status+"&created_at="+e;const t=this;this.options={headings:{category:this.trans("category"),subject:this.trans("subject"),sender_mail:this.trans("sender_mail"),reciever_mail:this.trans("reciever_mail"),collaborators:this.trans("collaborators"),referee_id:this.trans("referee_id"),referee_type:this.trans("referee_type"),created_at:this.trans("created-at"),updated_at:this.trans("updated-at"),status:this.trans("status")},perPageValues:[10,25,50,100,200,500,1e3,2e3],sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headingTooltips:{category:"Category"},columnsClasses:{category:"mail-category",subject:"mail-subject",sender_mail:"mail-sender",reciever_mail:"mail-receiver",referee_id:"mail-refree",referee_type:"mail-refree-type",created_at:"mail-created",updated_at:"mail-updated",status:"log-status"},texts:{filter:"",limit:""},templates:{category(a,r){return r.category.name},created_at(a,r){return t.formattedTime(r.created_at)},updated_at(a,r){return t.formattedTime(r.updated_at)},sender_mail:(a,r)=>t.h(Ys,{data:r,objectKey:"sender_mail"}),reciever_mail:(a,r)=>t.h(Ys,{data:r,objectKey:"reciever_mail"}),referee_id:(a,r)=>t.h(Gw,{data:r}),status:(a,r)=>t.h(xl,{data:r}),subject:(a,r)=>t.h(rC,{data:r}),collaborators:(a,r)=>t.h(Ys,{data:r,objectKey:"collaborators"}),action:function(a,r){let n=t.h("i",{class:"fas fa-redo"});return t.h("button",{class:"btn btn-light btn-sm",disabled:!r.is_retry,title:this.trans("retry_log"),onClick(o){t.onClick(r)}},[n])}},sortable:["category","referee_id","referee_type","sender_mail","reciever_mail","subject","source","created_at","updated_at","status"],filterable:["category","referee_id","referee_type","sender_mail","reciever_mail","subject","source","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(a){return{sort_field:a.orderBy,sort_order:a.ascending?"desc":"asc","search-query":a.query.trim(),page:a.page,limit:a.limit}},responseAdapter({data:a}){return{data:a.data.data,count:a.data.total}},orderBy:{ascending:!0}}},methods:{onChange(e,t){this[t]=e},refreshTable(){window.emitter.emit("mailLogsrefreshData")},onClick(e){this.data=e,this.showModal=!0},onClose(){this.showModal=!1,this.$store.dispatch("unsetValidationError")}},components:{"logs-table":hn,"dynamic-select":Be,"mail-retry-modal":_3}},g3={class:"card-tools",style:{cursor:"pointer"},id:"mail_logs_table"},v3={class:"row"},b3={class:"row mail-log-table"};function y3(e,t,a,r,n,o){const m=v("dynamic-select"),p=v("logs-table"),g=v("mail-retry-modal"),b=v("faveo-box"),w=H("tooltip");return i(),A(b,{title:e.lang("mail_logs")},{headerMenu:T(()=>[s("div",g3,[s("span",null,[P(s("i",{class:"fas fa-sync-alt","aria-hidden":"true",onClick:t[0]||(t[0]=S=>o.refreshTable())},null,512),[[w,e.lang("refresh")]])])])]),default:T(()=>[s("div",v3,[u(m,{label:e.lang("sender"),id:"sender-select-box",multiple:!0,name:"sender_mails",required:!1,prePopulate:!1,classname:"col-sm-6",apiEndpoint:"/api/dependency/users?meta=true&supplements=true",value:n.sender_mails,onChange:o.onChange},null,8,["label","value","onChange"]),u(m,{label:e.lang("receiver"),id:"reciever-select-box",multiple:!0,name:"reciever_mails",required:!1,prePopulate:!1,classname:"col-sm-6",apiEndpoint:"/api/dependency/users?meta=true&supplements=true",value:n.reciever_mails,onChange:o.onChange},null,8,["label","value","onChange"])]),s("div",b3,[n.options.length?f("",!0):(i(),A(p,{key:0,id:"mail_logs_table",sender_mails:n.sender_mails,reciever_mails:n.reciever_mails,columns:n.columns,options:n.options,apiUrl:n.apiUrl,componentTitle:"mailLogs"},null,8,["sender_mails","reciever_mails","columns","options","apiUrl"]))]),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(g,{key:0,onClose:o.onClose,showModal:n.showModal,data:n.data},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})]),_:1},8,["title"])}const k3=x(f3,[["render",y3]]);const w3={name:"logs-trace",description:"Logs trace component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1},subStr(e,t){return Yt(e,t)}},components:{"logs-modal":rn}},C3={id:"logs_trace"},D3={class:"label label-default"};function S3(e,t,a,r,n,o){const m=v("logs-modal");return i(),d("div",null,[s("p",C3,[L(h(o.subStr(a.data.trace,40))+" ",1),s("a",{id:"logs_read_more",href:"javascript:;",onClick:t[0]||(t[0]=p=>n.showModal=!0)},[s("span",D3,h(e.lang("read-more")),1)])]),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(m,{key:0,onClose:o.onClose,showModal:n.showModal,data:a.data,title:"trace"},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})])}const M3=x(w3,[["render",S3]]);const F3={setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},props:{category:{type:Object,default:()=>{}},created_at:{type:[String,Date],default:""}},data(){return{apiUrl:"/api/logs/exception",columns:["category","file","line","message","trace","created_at"],options:{},moment:Ie}},beforeMount(){let e=this.created_at?Ie(this.created_at).format("YYYY-MM-DD"):"";this.apiUrl="/api/logs/exception?category_id="+this.category.id+"&created_at="+e;const t=this;this.options={headings:{category:this.lang("category"),file:this.lang("file"),line:this.lang("line"),message:this.lang("message"),trace:this.lang("trace"),created_at:this.lang("created-at")},columnsClasses:{category:"log-category",file:"log-file",line:"log-line",trace:"log-trace",message:"log-message",created_at:"log-created"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{category(a,r){return r.category.name},created_at(a,r){return t.formattedTime(r.created_at)},trace:(a,r)=>t.h(M3,{data:r})},sortable:["category","file","line","trace","message","created_at"],filterable:["category","file","line","trace","message","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(a){return{sort_field:a.orderBy,sort_order:a.ascending?"desc":"asc","search-query":a.query.trim(),page:a.page,limit:a.limit}},responseAdapter({data:a}){return{data:a.data.data,count:a.data.total}}}},methods:{refreshTable(){window.emitter.emit("exceptionLogsrefreshData")}},components:{"logs-table":hn}},$3={class:"card-tools",style:{cursor:"pointer"}},T3={class:"row exception-log-table"};function E3(e,t,a,r,n,o){const m=v("logs-table"),p=v("faveo-box"),g=H("tooltip");return i(),A(p,{title:e.lang("exception_logs")},{headerMenu:T(()=>[s("div",$3,[s("span",null,[P(s("i",{class:"fas fa-sync-alt","aria-hidden":"true",onClick:t[0]||(t[0]=b=>o.refreshTable())},null,512),[[g,e.lang("refresh")]])])])]),default:T(()=>[s("div",T3,[n.options.length?f("",!0):(i(),A(m,{key:0,id:"exception_logs_title",columns:n.columns,options:n.options,apiUrl:n.apiUrl,componentTitle:"exceptionLogs"},null,8,["columns","options","apiUrl"]))])]),_:1},8,["title"])}const L3=x(F3,[["render",E3]]);const A3={setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},props:{category:{type:Object,default:()=>{}},status:{type:String,default:""},created_at:{type:[String,Date],default:""}},data(){return{apiUrl:"/api/logs/cron",columns:["command","description","duration","created_at","status"],options:{},moment:Ie}},beforeMount(){let e=this.created_at?Ie(this.created_at).format("YYYY-MM-DD"):"";this.apiUrl="/api/logs/cron?command="+this.category.command+"&status="+this.status+"&created_at="+e;const t=this;this.options={headings:{duration:this.trans("duration_in_seconds"),command:this.trans("command"),description:this.trans("description"),created_at:this.trans("created_at"),status:this.trans("status")},columnsClasses:{command:"cron-command",description:"cron-desc",duration:"cron-duration",created_at:"cron-created",status:"cron-status"},texts:{filter:"",limit:""},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},templates:{created_at(a,r){return t.formattedTime(r.created_at)},status:(a,r)=>t.h(xl,{data:r})},sortable:["command","description","duration","created_at","status"],filterable:["category","start_time","end_time","message","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(a){return{sort_field:a.orderBy,sort_order:a.ascending?"desc":"asc","search-query":a.query.trim(),page:a.page,limit:a.limit}},responseAdapter({data:a}){return{data:a.data.data,count:a.data.total}}}},methods:{refreshTable(){window.emitter.emit("cronLogsrefreshData")}},components:{"logs-table":hn}},I3={class:"card-tools",style:{cursor:"pointer"}},P3={class:"row"};function O3(e,t,a,r,n,o){const m=v("logs-table"),p=v("faveo-box"),g=H("tooltip");return i(),A(p,{title:e.lang("cron_logs")},{headerMenu:T(()=>[s("div",I3,[s("span",null,[P(s("i",{class:"fas fa-sync-alt","aria-hidden":"true",onClick:t[0]||(t[0]=b=>o.refreshTable())},null,512),[[g,e.lang("refresh")]])])])]),default:T(()=>[s("div",P3,[n.options.length?f("",!0):(i(),A(m,{key:0,id:"cron_logs_title",columns:n.columns,options:n.options,apiUrl:n.apiUrl,componentTitle:"cronLogs"},null,8,["columns","options","apiUrl"]))])]),_:1},8,["title"])}const q3=x(A3,[["render",O3]]),x3={name:"healthcheck-table",props:{category:{type:Object,default:()=>{}},logType:{type:String,default:""},status:{type:String,default:""},created_at:{type:[String,Date],default:""}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1}},components:{"mail-logs":k3,"exception-logs":L3,"cron-logs":q3,"logs-modal":rn}},V3={class:"col-sm-12"},N3={class:"card-tools"};function R3(e,t,a,r,n,o){const m=v("alert"),p=v("cron-logs"),g=v("mail-logs"),b=v("exception-logs"),w=v("faveo-box"),S=v("logs-modal"),C=H("tooltip");return i(),d("div",V3,[u(m,{componentName:"dataTableModal"}),u(w,{title:e.lang("logs")},{headerMenu:T(()=>[s("div",N3,[P((i(),d("button",{type:"button",class:"btn btn-tool",onClick:t[0]||(t[0]=M=>n.showModal=!0)},t[1]||(t[1]=[s("i",{class:"fas fa-trash"},null,-1)]))),[[C,e.lang("delete_logs")]])])]),default:T(()=>[a.logType=="cron"?(i(),A(p,{key:0,category:a.category,status:a.status,created_at:a.created_at},null,8,["category","status","created_at"])):f("",!0),a.logType=="mail"?(i(),A(g,{key:1,category:a.category,status:a.status,created_at:a.created_at},null,8,["category","status","created_at"])):f("",!0),a.logType=="exception"?(i(),A(b,{key:2,category:a.category,created_at:a.created_at},null,8,["category","created_at"])):f("",!0)]),_:1},8,["title"]),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(S,{key:0,title:"delete_logs",onClose:o.onClose,showModal:n.showModal},null,8,["onClose","showModal"])):f("",!0)]),_:1})])}const U3=x(x3,[["render",R3]]);var Vl={exports:{}};(function(e,t){(function(a,r){e.exports=r()})(ym,function(){var a;function r(){return a.apply(null,arguments)}function n(l){a=l}function o(l){return l instanceof Array||Object.prototype.toString.call(l)==="[object Array]"}function m(l){return l!=null&&Object.prototype.toString.call(l)==="[object Object]"}function p(l,c){return Object.prototype.hasOwnProperty.call(l,c)}function g(l){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(l).length===0;var c;for(c in l)if(p(l,c))return!1;return!0}function b(l){return l===void 0}function w(l){return typeof l=="number"||Object.prototype.toString.call(l)==="[object Number]"}function S(l){return l instanceof Date||Object.prototype.toString.call(l)==="[object Date]"}function C(l,c){var y=[],k,E=l.length;for(k=0;k<E;++k)y.push(c(l[k],k));return y}function M(l,c){for(var y in c)p(c,y)&&(l[y]=c[y]);return p(c,"toString")&&(l.toString=c.toString),p(c,"valueOf")&&(l.valueOf=c.valueOf),l}function D(l,c,y,k){return xn(l,c,y,k,!0).utc()}function F(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function I(l){return l._pf==null&&(l._pf=F()),l._pf}var R;Array.prototype.some?R=Array.prototype.some:R=function(l){var c=Object(this),y=c.length>>>0,k;for(k=0;k<y;k++)if(k in c&&l.call(this,c[k],k,c))return!0;return!1};function Y(l){var c=null,y=!1,k=l._d&&!isNaN(l._d.getTime());if(k&&(c=I(l),y=R.call(c.parsedDateParts,function(E){return E!=null}),k=c.overflow<0&&!c.empty&&!c.invalidEra&&!c.invalidMonth&&!c.invalidWeekday&&!c.weekdayMismatch&&!c.nullInput&&!c.invalidFormat&&!c.userInvalidated&&(!c.meridiem||c.meridiem&&y),l._strict&&(k=k&&c.charsLeftOver===0&&c.unusedTokens.length===0&&c.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(l))l._isValid=k;else return k;return l._isValid}function X(l){var c=D(NaN);return l!=null?M(I(c),l):I(c).userInvalidated=!0,c}var le=r.momentProperties=[],ne=!1;function ce(l,c){var y,k,E,q=le.length;if(b(c._isAMomentObject)||(l._isAMomentObject=c._isAMomentObject),b(c._i)||(l._i=c._i),b(c._f)||(l._f=c._f),b(c._l)||(l._l=c._l),b(c._strict)||(l._strict=c._strict),b(c._tzm)||(l._tzm=c._tzm),b(c._isUTC)||(l._isUTC=c._isUTC),b(c._offset)||(l._offset=c._offset),b(c._pf)||(l._pf=I(c)),b(c._locale)||(l._locale=c._locale),q>0)for(y=0;y<q;y++)k=le[y],E=c[k],b(E)||(l[k]=E);return l}function Q(l){ce(this,l),this._d=new Date(l._d!=null?l._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ne===!1&&(ne=!0,r.updateOffset(this),ne=!1)}function j(l){return l instanceof Q||l!=null&&l._isAMomentObject!=null}function ye(l){r.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+l)}function Pe(l,c){var y=!0;return M(function(){if(r.deprecationHandler!=null&&r.deprecationHandler(null,l),y){var k=[],E,q,W,_e=arguments.length;for(q=0;q<_e;q++){if(E="",typeof arguments[q]=="object"){E+=`
[`+q+"] ";for(W in arguments[0])p(arguments[0],W)&&(E+=W+": "+arguments[0][W]+", ");E=E.slice(0,-2)}else E=arguments[q];k.push(E)}ye(l+`
Arguments: `+Array.prototype.slice.call(k).join("")+`
`+new Error().stack),y=!1}return c.apply(this,arguments)},c)}var ge={};function ke(l,c){r.deprecationHandler!=null&&r.deprecationHandler(l,c),ge[l]||(ye(c),ge[l]=!0)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;function ue(l){return typeof Function<"u"&&l instanceof Function||Object.prototype.toString.call(l)==="[object Function]"}function he(l){var c,y;for(y in l)p(l,y)&&(c=l[y],ue(c)?this[y]=c:this["_"+y]=c);this._config=l,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ve(l,c){var y=M({},l),k;for(k in c)p(c,k)&&(m(l[k])&&m(c[k])?(y[k]={},M(y[k],l[k]),M(y[k],c[k])):c[k]!=null?y[k]=c[k]:delete y[k]);for(k in l)p(l,k)&&!p(c,k)&&m(l[k])&&(y[k]=M({},y[k]));return y}function ee(l){l!=null&&this.set(l)}var te;Object.keys?te=Object.keys:te=function(l){var c,y=[];for(c in l)p(l,c)&&y.push(c);return y};var Ce={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function be(l,c,y){var k=this._calendar[l]||this._calendar.sameElse;return ue(k)?k.call(c,y):k}function Ne(l,c,y){var k=""+Math.abs(l),E=c-k.length,q=l>=0;return(q?y?"+":"":"-")+Math.pow(10,Math.max(0,E)).toString().substr(1)+k}var J=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,pe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,z={},ie={};function Z(l,c,y,k){var E=k;typeof k=="string"&&(E=function(){return this[k]()}),l&&(ie[l]=E),c&&(ie[c[0]]=function(){return Ne(E.apply(this,arguments),c[1],c[2])}),y&&(ie[y]=function(){return this.localeData().ordinal(E.apply(this,arguments),l)})}function De(l){return l.match(/\[[\s\S]/)?l.replace(/^\[|\]$/g,""):l.replace(/\\/g,"")}function Mt(l){var c=l.match(J),y,k;for(y=0,k=c.length;y<k;y++)ie[c[y]]?c[y]=ie[c[y]]:c[y]=De(c[y]);return function(E){var q="",W;for(W=0;W<k;W++)q+=ue(c[W])?c[W].call(E,l):c[W];return q}}function Nt(l,c){return l.isValid()?(c=Pa(c,l.localeData()),z[c]=z[c]||Mt(c),z[c](l)):l.localeData().invalidDate()}function Pa(l,c){var y=5;function k(E){return c.longDateFormat(E)||E}for(pe.lastIndex=0;y>=0&&pe.test(l);)l=l.replace(pe,k),pe.lastIndex=0,y-=1;return l}var _s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function fs(l){var c=this._longDateFormat[l],y=this._longDateFormat[l.toUpperCase()];return c||!y?c:(this._longDateFormat[l]=y.match(J).map(function(k){return k==="MMMM"||k==="MM"||k==="DD"||k==="dddd"?k.slice(1):k}).join(""),this._longDateFormat[l])}var gs="Invalid date";function ya(){return this._invalidDate}var vs="%d",bs=/\d{1,2}/;function ys(l){return this._ordinal.replace("%d",l)}var se={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function de(l,c,y,k){var E=this._relativeTime[y];return ue(E)?E(l,c,y,k):E.replace(/%d/i,l)}function Se(l,c){var y=this._relativeTime[l>0?"future":"past"];return ue(y)?y(c):y.replace(/%s/i,c)}var qe={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Fe(l){return typeof l=="string"?qe[l]||qe[l.toLowerCase()]:void 0}function Xe(l){var c={},y,k;for(k in l)p(l,k)&&(y=Fe(k),y&&(c[y]=l[k]));return c}var or={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function ir(l){var c=[],y;for(y in l)p(l,y)&&c.push({unit:y,priority:or[y]});return c.sort(function(k,E){return k.priority-E.priority}),c}var gn=/\d/,mt=/\d\d/,vn=/\d{3}/,ks=/\d{4}/,Oa=/[+-]?\d{6}/,Ge=/\d\d?/,bn=/\d\d\d\d?/,yn=/\d\d\d\d\d\d?/,qa=/\d{1,3}/,ws=/\d{1,4}/,xa=/[+-]?\d{1,6}/,sa=/\d+/,Va=/[+-]?\d+/,lr=/Z|[+-]\d\d:?\d\d/gi,Na=/Z|[+-]\d\d(?::?\d\d)?/gi,rr=/[+-]?\d+(\.\d{1,3})?/,ka=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,na=/^[1-9]\d?/,Cs=/^([1-9]\d|\d)/,Ra;Ra={};function fe(l,c,y){Ra[l]=ue(c)?c:function(k,E){return k&&y?y:c}}function dr(l,c){return p(Ra,l)?Ra[l](c._strict,c._locale):new RegExp(cr(l))}function cr(l){return Ft(l.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(c,y,k,E,q){return y||k||E||q}))}function Ft(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function pt(l){return l<0?Math.ceil(l)||0:Math.floor(l)}function xe(l){var c=+l,y=0;return c!==0&&isFinite(c)&&(y=pt(c)),y}var Ds={};function We(l,c){var y,k=c,E;for(typeof l=="string"&&(l=[l]),w(c)&&(k=function(q,W){W[c]=xe(q)}),E=l.length,y=0;y<E;y++)Ds[l[y]]=k}function wa(l,c){We(l,function(y,k,E,q){E._w=E._w||{},c(y,E._w,E,q)})}function ur(l,c,y){c!=null&&p(Ds,l)&&Ds[l](c,y._a,y,l)}function Ua(l){return l%4===0&&l%100!==0||l%400===0}var ot=0,$t=1,Ct=2,st=3,gt=4,Tt=5,Wt=6,mr=7,hr=8;Z("Y",0,0,function(){var l=this.year();return l<=9999?Ne(l,4):"+"+l}),Z(0,["YY",2],0,function(){return this.year()%100}),Z(0,["YYYY",4],0,"year"),Z(0,["YYYYY",5],0,"year"),Z(0,["YYYYYY",6,!0],0,"year"),fe("Y",Va),fe("YY",Ge,mt),fe("YYYY",ws,ks),fe("YYYYY",xa,Oa),fe("YYYYYY",xa,Oa),We(["YYYYY","YYYYYY"],ot),We("YYYY",function(l,c){c[ot]=l.length===2?r.parseTwoDigitYear(l):xe(l)}),We("YY",function(l,c){c[ot]=r.parseTwoDigitYear(l)}),We("Y",function(l,c){c[ot]=parseInt(l,10)});function Ca(l){return Ua(l)?366:365}r.parseTwoDigitYear=function(l){return xe(l)+(xe(l)>68?1900:2e3)};var kn=oa("FullYear",!0);function pr(){return Ua(this.year())}function oa(l,c){return function(y){return y!=null?(wn(this,l,y),r.updateOffset(this,c),this):Da(this,l)}}function Da(l,c){if(!l.isValid())return NaN;var y=l._d,k=l._isUTC;switch(c){case"Milliseconds":return k?y.getUTCMilliseconds():y.getMilliseconds();case"Seconds":return k?y.getUTCSeconds():y.getSeconds();case"Minutes":return k?y.getUTCMinutes():y.getMinutes();case"Hours":return k?y.getUTCHours():y.getHours();case"Date":return k?y.getUTCDate():y.getDate();case"Day":return k?y.getUTCDay():y.getDay();case"Month":return k?y.getUTCMonth():y.getMonth();case"FullYear":return k?y.getUTCFullYear():y.getFullYear();default:return NaN}}function wn(l,c,y){var k,E,q,W,_e;if(!(!l.isValid()||isNaN(y))){switch(k=l._d,E=l._isUTC,c){case"Milliseconds":return void(E?k.setUTCMilliseconds(y):k.setMilliseconds(y));case"Seconds":return void(E?k.setUTCSeconds(y):k.setSeconds(y));case"Minutes":return void(E?k.setUTCMinutes(y):k.setMinutes(y));case"Hours":return void(E?k.setUTCHours(y):k.setHours(y));case"Date":return void(E?k.setUTCDate(y):k.setDate(y));case"FullYear":break;default:return}q=y,W=l.month(),_e=l.date(),_e=_e===29&&W===1&&!Ua(q)?28:_e,E?k.setUTCFullYear(q,W,_e):k.setFullYear(q,W,_e)}}function _r(l){return l=Fe(l),ue(this[l])?this[l]():this}function fr(l,c){if(typeof l=="object"){l=Xe(l);var y=ir(l),k,E=y.length;for(k=0;k<E;k++)this[y[k].unit](l[y[k].unit])}else if(l=Fe(l),ue(this[l]))return this[l](c);return this}function gr(l,c){return(l%c+c)%c}var at;Array.prototype.indexOf?at=Array.prototype.indexOf:at=function(l){var c;for(c=0;c<this.length;++c)if(this[c]===l)return c;return-1};function Ss(l,c){if(isNaN(l)||isNaN(c))return NaN;var y=gr(c,12);return l+=(c-y)/12,y===1?Ua(l)?29:28:31-y%7%2}Z("M",["MM",2],"Mo",function(){return this.month()+1}),Z("MMM",0,0,function(l){return this.localeData().monthsShort(this,l)}),Z("MMMM",0,0,function(l){return this.localeData().months(this,l)}),fe("M",Ge,na),fe("MM",Ge,mt),fe("MMM",function(l,c){return c.monthsShortRegex(l)}),fe("MMMM",function(l,c){return c.monthsRegex(l)}),We(["M","MM"],function(l,c){c[$t]=xe(l)-1}),We(["MMM","MMMM"],function(l,c,y,k){var E=y._locale.monthsParse(l,k,y._strict);E!=null?c[$t]=E:I(y).invalidMonth=l});var vr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Cn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Dn=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,br=ka,yr=ka;function kr(l,c){return l?o(this._months)?this._months[l.month()]:this._months[(this._months.isFormat||Dn).test(c)?"format":"standalone"][l.month()]:o(this._months)?this._months:this._months.standalone}function wr(l,c){return l?o(this._monthsShort)?this._monthsShort[l.month()]:this._monthsShort[Dn.test(c)?"format":"standalone"][l.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Cr(l,c,y){var k,E,q,W=l.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],k=0;k<12;++k)q=D([2e3,k]),this._shortMonthsParse[k]=this.monthsShort(q,"").toLocaleLowerCase(),this._longMonthsParse[k]=this.months(q,"").toLocaleLowerCase();return y?c==="MMM"?(E=at.call(this._shortMonthsParse,W),E!==-1?E:null):(E=at.call(this._longMonthsParse,W),E!==-1?E:null):c==="MMM"?(E=at.call(this._shortMonthsParse,W),E!==-1?E:(E=at.call(this._longMonthsParse,W),E!==-1?E:null)):(E=at.call(this._longMonthsParse,W),E!==-1?E:(E=at.call(this._shortMonthsParse,W),E!==-1?E:null))}function Dr(l,c,y){var k,E,q;if(this._monthsParseExact)return Cr.call(this,l,c,y);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),k=0;k<12;k++){if(E=D([2e3,k]),y&&!this._longMonthsParse[k]&&(this._longMonthsParse[k]=new RegExp("^"+this.months(E,"").replace(".","")+"$","i"),this._shortMonthsParse[k]=new RegExp("^"+this.monthsShort(E,"").replace(".","")+"$","i")),!y&&!this._monthsParse[k]&&(q="^"+this.months(E,"")+"|^"+this.monthsShort(E,""),this._monthsParse[k]=new RegExp(q.replace(".",""),"i")),y&&c==="MMMM"&&this._longMonthsParse[k].test(l))return k;if(y&&c==="MMM"&&this._shortMonthsParse[k].test(l))return k;if(!y&&this._monthsParse[k].test(l))return k}}function Sn(l,c){if(!l.isValid())return l;if(typeof c=="string"){if(/^\d+$/.test(c))c=xe(c);else if(c=l.localeData().monthsParse(c),!w(c))return l}var y=c,k=l.date();return k=k<29?k:Math.min(k,Ss(l.year(),y)),l._isUTC?l._d.setUTCMonth(y,k):l._d.setMonth(y,k),l}function Mn(l){return l!=null?(Sn(this,l),r.updateOffset(this,!0),this):Da(this,"Month")}function Sr(){return Ss(this.year(),this.month())}function Mr(l){return this._monthsParseExact?(p(this,"_monthsRegex")||Fn.call(this),l?this._monthsShortStrictRegex:this._monthsShortRegex):(p(this,"_monthsShortRegex")||(this._monthsShortRegex=br),this._monthsShortStrictRegex&&l?this._monthsShortStrictRegex:this._monthsShortRegex)}function Fr(l){return this._monthsParseExact?(p(this,"_monthsRegex")||Fn.call(this),l?this._monthsStrictRegex:this._monthsRegex):(p(this,"_monthsRegex")||(this._monthsRegex=yr),this._monthsStrictRegex&&l?this._monthsStrictRegex:this._monthsRegex)}function Fn(){function l($e,Re){return Re.length-$e.length}var c=[],y=[],k=[],E,q,W,_e;for(E=0;E<12;E++)q=D([2e3,E]),W=Ft(this.monthsShort(q,"")),_e=Ft(this.months(q,"")),c.push(W),y.push(_e),k.push(_e),k.push(W);c.sort(l),y.sort(l),k.sort(l),this._monthsRegex=new RegExp("^("+k.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+c.join("|")+")","i")}function $r(l,c,y,k,E,q,W){var _e;return l<100&&l>=0?(_e=new Date(l+400,c,y,k,E,q,W),isFinite(_e.getFullYear())&&_e.setFullYear(l)):_e=new Date(l,c,y,k,E,q,W),_e}function Sa(l){var c,y;return l<100&&l>=0?(y=Array.prototype.slice.call(arguments),y[0]=l+400,c=new Date(Date.UTC.apply(null,y)),isFinite(c.getUTCFullYear())&&c.setUTCFullYear(l)):c=new Date(Date.UTC.apply(null,arguments)),c}function ja(l,c,y){var k=7+c-y,E=(7+Sa(l,0,k).getUTCDay()-c)%7;return-E+k-1}function $n(l,c,y,k,E){var q=(7+y-k)%7,W=ja(l,k,E),_e=1+7*(c-1)+q+W,$e,Re;return _e<=0?($e=l-1,Re=Ca($e)+_e):_e>Ca(l)?($e=l+1,Re=_e-Ca(l)):($e=l,Re=_e),{year:$e,dayOfYear:Re}}function Ma(l,c,y){var k=ja(l.year(),c,y),E=Math.floor((l.dayOfYear()-k-1)/7)+1,q,W;return E<1?(W=l.year()-1,q=E+Et(W,c,y)):E>Et(l.year(),c,y)?(q=E-Et(l.year(),c,y),W=l.year()+1):(W=l.year(),q=E),{week:q,year:W}}function Et(l,c,y){var k=ja(l,c,y),E=ja(l+1,c,y);return(Ca(l)-k+E)/7}Z("w",["ww",2],"wo","week"),Z("W",["WW",2],"Wo","isoWeek"),fe("w",Ge,na),fe("ww",Ge,mt),fe("W",Ge,na),fe("WW",Ge,mt),wa(["w","ww","W","WW"],function(l,c,y,k){c[k.substr(0,1)]=xe(l)});function Tr(l){return Ma(l,this._week.dow,this._week.doy).week}var Er={dow:0,doy:6};function Lr(){return this._week.dow}function Ar(){return this._week.doy}function Ir(l){var c=this.localeData().week(this);return l==null?c:this.add((l-c)*7,"d")}function Pr(l){var c=Ma(this,1,4).week;return l==null?c:this.add((l-c)*7,"d")}Z("d",0,"do","day"),Z("dd",0,0,function(l){return this.localeData().weekdaysMin(this,l)}),Z("ddd",0,0,function(l){return this.localeData().weekdaysShort(this,l)}),Z("dddd",0,0,function(l){return this.localeData().weekdays(this,l)}),Z("e",0,0,"weekday"),Z("E",0,0,"isoWeekday"),fe("d",Ge),fe("e",Ge),fe("E",Ge),fe("dd",function(l,c){return c.weekdaysMinRegex(l)}),fe("ddd",function(l,c){return c.weekdaysShortRegex(l)}),fe("dddd",function(l,c){return c.weekdaysRegex(l)}),wa(["dd","ddd","dddd"],function(l,c,y,k){var E=y._locale.weekdaysParse(l,k,y._strict);E!=null?c.d=E:I(y).invalidWeekday=l}),wa(["d","e","E"],function(l,c,y,k){c[k]=xe(l)});function Or(l,c){return typeof l!="string"?l:isNaN(l)?(l=c.weekdaysParse(l),typeof l=="number"?l:null):parseInt(l,10)}function qr(l,c){return typeof l=="string"?c.weekdaysParse(l)%7||7:isNaN(l)?null:l}function Ms(l,c){return l.slice(c,7).concat(l.slice(0,c))}var xr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Tn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Vr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Nr=ka,Rr=ka,Ur=ka;function jr(l,c){var y=o(this._weekdays)?this._weekdays:this._weekdays[l&&l!==!0&&this._weekdays.isFormat.test(c)?"format":"standalone"];return l===!0?Ms(y,this._week.dow):l?y[l.day()]:y}function Br(l){return l===!0?Ms(this._weekdaysShort,this._week.dow):l?this._weekdaysShort[l.day()]:this._weekdaysShort}function Yr(l){return l===!0?Ms(this._weekdaysMin,this._week.dow):l?this._weekdaysMin[l.day()]:this._weekdaysMin}function Hr(l,c,y){var k,E,q,W=l.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],k=0;k<7;++k)q=D([2e3,1]).day(k),this._minWeekdaysParse[k]=this.weekdaysMin(q,"").toLocaleLowerCase(),this._shortWeekdaysParse[k]=this.weekdaysShort(q,"").toLocaleLowerCase(),this._weekdaysParse[k]=this.weekdays(q,"").toLocaleLowerCase();return y?c==="dddd"?(E=at.call(this._weekdaysParse,W),E!==-1?E:null):c==="ddd"?(E=at.call(this._shortWeekdaysParse,W),E!==-1?E:null):(E=at.call(this._minWeekdaysParse,W),E!==-1?E:null):c==="dddd"?(E=at.call(this._weekdaysParse,W),E!==-1||(E=at.call(this._shortWeekdaysParse,W),E!==-1)?E:(E=at.call(this._minWeekdaysParse,W),E!==-1?E:null)):c==="ddd"?(E=at.call(this._shortWeekdaysParse,W),E!==-1||(E=at.call(this._weekdaysParse,W),E!==-1)?E:(E=at.call(this._minWeekdaysParse,W),E!==-1?E:null)):(E=at.call(this._minWeekdaysParse,W),E!==-1||(E=at.call(this._weekdaysParse,W),E!==-1)?E:(E=at.call(this._shortWeekdaysParse,W),E!==-1?E:null))}function Wr(l,c,y){var k,E,q;if(this._weekdaysParseExact)return Hr.call(this,l,c,y);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),k=0;k<7;k++){if(E=D([2e3,1]).day(k),y&&!this._fullWeekdaysParse[k]&&(this._fullWeekdaysParse[k]=new RegExp("^"+this.weekdays(E,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[k]=new RegExp("^"+this.weekdaysShort(E,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[k]=new RegExp("^"+this.weekdaysMin(E,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[k]||(q="^"+this.weekdays(E,"")+"|^"+this.weekdaysShort(E,"")+"|^"+this.weekdaysMin(E,""),this._weekdaysParse[k]=new RegExp(q.replace(".",""),"i")),y&&c==="dddd"&&this._fullWeekdaysParse[k].test(l))return k;if(y&&c==="ddd"&&this._shortWeekdaysParse[k].test(l))return k;if(y&&c==="dd"&&this._minWeekdaysParse[k].test(l))return k;if(!y&&this._weekdaysParse[k].test(l))return k}}function zr(l){if(!this.isValid())return l!=null?this:NaN;var c=Da(this,"Day");return l!=null?(l=Or(l,this.localeData()),this.add(l-c,"d")):c}function Gr(l){if(!this.isValid())return l!=null?this:NaN;var c=(this.day()+7-this.localeData()._week.dow)%7;return l==null?c:this.add(l-c,"d")}function Kr(l){if(!this.isValid())return l!=null?this:NaN;if(l!=null){var c=qr(l,this.localeData());return this.day(this.day()%7?c:c-7)}else return this.day()||7}function Jr(l){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Fs.call(this),l?this._weekdaysStrictRegex:this._weekdaysRegex):(p(this,"_weekdaysRegex")||(this._weekdaysRegex=Nr),this._weekdaysStrictRegex&&l?this._weekdaysStrictRegex:this._weekdaysRegex)}function Zr(l){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Fs.call(this),l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(p(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Rr),this._weekdaysShortStrictRegex&&l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qr(l){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Fs.call(this),l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(p(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ur),this._weekdaysMinStrictRegex&&l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Fs(){function l(rt,Ot){return Ot.length-rt.length}var c=[],y=[],k=[],E=[],q,W,_e,$e,Re;for(q=0;q<7;q++)W=D([2e3,1]).day(q),_e=Ft(this.weekdaysMin(W,"")),$e=Ft(this.weekdaysShort(W,"")),Re=Ft(this.weekdays(W,"")),c.push(_e),y.push($e),k.push(Re),E.push(_e),E.push($e),E.push(Re);c.sort(l),y.sort(l),k.sort(l),E.sort(l),this._weekdaysRegex=new RegExp("^("+E.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+k.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+c.join("|")+")","i")}function $s(){return this.hours()%12||12}function Xr(){return this.hours()||24}Z("H",["HH",2],0,"hour"),Z("h",["hh",2],0,$s),Z("k",["kk",2],0,Xr),Z("hmm",0,0,function(){return""+$s.apply(this)+Ne(this.minutes(),2)}),Z("hmmss",0,0,function(){return""+$s.apply(this)+Ne(this.minutes(),2)+Ne(this.seconds(),2)}),Z("Hmm",0,0,function(){return""+this.hours()+Ne(this.minutes(),2)}),Z("Hmmss",0,0,function(){return""+this.hours()+Ne(this.minutes(),2)+Ne(this.seconds(),2)});function En(l,c){Z(l,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),c)})}En("a",!0),En("A",!1);function Ln(l,c){return c._meridiemParse}fe("a",Ln),fe("A",Ln),fe("H",Ge,Cs),fe("h",Ge,na),fe("k",Ge,na),fe("HH",Ge,mt),fe("hh",Ge,mt),fe("kk",Ge,mt),fe("hmm",bn),fe("hmmss",yn),fe("Hmm",bn),fe("Hmmss",yn),We(["H","HH"],st),We(["k","kk"],function(l,c,y){var k=xe(l);c[st]=k===24?0:k}),We(["a","A"],function(l,c,y){y._isPm=y._locale.isPM(l),y._meridiem=l}),We(["h","hh"],function(l,c,y){c[st]=xe(l),I(y).bigHour=!0}),We("hmm",function(l,c,y){var k=l.length-2;c[st]=xe(l.substr(0,k)),c[gt]=xe(l.substr(k)),I(y).bigHour=!0}),We("hmmss",function(l,c,y){var k=l.length-4,E=l.length-2;c[st]=xe(l.substr(0,k)),c[gt]=xe(l.substr(k,2)),c[Tt]=xe(l.substr(E)),I(y).bigHour=!0}),We("Hmm",function(l,c,y){var k=l.length-2;c[st]=xe(l.substr(0,k)),c[gt]=xe(l.substr(k))}),We("Hmmss",function(l,c,y){var k=l.length-4,E=l.length-2;c[st]=xe(l.substr(0,k)),c[gt]=xe(l.substr(k,2)),c[Tt]=xe(l.substr(E))});function ed(l){return(l+"").toLowerCase().charAt(0)==="p"}var td=/[ap]\.?m?\.?/i,ad=oa("Hours",!0);function sd(l,c,y){return l>11?y?"pm":"PM":y?"am":"AM"}var An={calendar:Ce,longDateFormat:_s,invalidDate:gs,ordinal:vs,dayOfMonthOrdinalParse:bs,relativeTime:se,months:vr,monthsShort:Cn,week:Er,weekdays:xr,weekdaysMin:Vr,weekdaysShort:Tn,meridiemParse:td},Ze={},Fa={},$a;function nd(l,c){var y,k=Math.min(l.length,c.length);for(y=0;y<k;y+=1)if(l[y]!==c[y])return y;return k}function In(l){return l&&l.toLowerCase().replace("_","-")}function od(l){for(var c=0,y,k,E,q;c<l.length;){for(q=In(l[c]).split("-"),y=q.length,k=In(l[c+1]),k=k?k.split("-"):null;y>0;){if(E=Ba(q.slice(0,y).join("-")),E)return E;if(k&&k.length>=y&&nd(q,k)>=y-1)break;y--}c++}return $a}function id(l){return!!(l&&l.match("^[^/\\\\]*$"))}function Ba(l){var c=null,y;if(Ze[l]===void 0&&e&&e.exports&&id(l))try{c=$a._abbr,y=km,y("./locale/"+l),Rt(c)}catch{Ze[l]=null}return Ze[l]}function Rt(l,c){var y;return l&&(b(c)?y=Lt(l):y=Ts(l,c),y?$a=y:typeof console<"u"&&console.warn&&console.warn("Locale "+l+" not found. Did you forget to load it?")),$a._abbr}function Ts(l,c){if(c!==null){var y,k=An;if(c.abbr=l,Ze[l]!=null)ke("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),k=Ze[l]._config;else if(c.parentLocale!=null)if(Ze[c.parentLocale]!=null)k=Ze[c.parentLocale]._config;else if(y=Ba(c.parentLocale),y!=null)k=y._config;else return Fa[c.parentLocale]||(Fa[c.parentLocale]=[]),Fa[c.parentLocale].push({name:l,config:c}),null;return Ze[l]=new ee(ve(k,c)),Fa[l]&&Fa[l].forEach(function(E){Ts(E.name,E.config)}),Rt(l),Ze[l]}else return delete Ze[l],null}function ld(l,c){if(c!=null){var y,k,E=An;Ze[l]!=null&&Ze[l].parentLocale!=null?Ze[l].set(ve(Ze[l]._config,c)):(k=Ba(l),k!=null&&(E=k._config),c=ve(E,c),k==null&&(c.abbr=l),y=new ee(c),y.parentLocale=Ze[l],Ze[l]=y),Rt(l)}else Ze[l]!=null&&(Ze[l].parentLocale!=null?(Ze[l]=Ze[l].parentLocale,l===Rt()&&Rt(l)):Ze[l]!=null&&delete Ze[l]);return Ze[l]}function Lt(l){var c;if(l&&l._locale&&l._locale._abbr&&(l=l._locale._abbr),!l)return $a;if(!o(l)){if(c=Ba(l),c)return c;l=[l]}return od(l)}function rd(){return te(Ze)}function Es(l){var c,y=l._a;return y&&I(l).overflow===-2&&(c=y[$t]<0||y[$t]>11?$t:y[Ct]<1||y[Ct]>Ss(y[ot],y[$t])?Ct:y[st]<0||y[st]>24||y[st]===24&&(y[gt]!==0||y[Tt]!==0||y[Wt]!==0)?st:y[gt]<0||y[gt]>59?gt:y[Tt]<0||y[Tt]>59?Tt:y[Wt]<0||y[Wt]>999?Wt:-1,I(l)._overflowDayOfYear&&(c<ot||c>Ct)&&(c=Ct),I(l)._overflowWeeks&&c===-1&&(c=mr),I(l)._overflowWeekday&&c===-1&&(c=hr),I(l).overflow=c),l}var dd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,cd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ud=/Z|[+-]\d\d(?::?\d\d)?/,Ya=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ls=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],md=/^\/?Date\((-?\d+)/i,hd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,pd={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Pn(l){var c,y,k=l._i,E=dd.exec(k)||cd.exec(k),q,W,_e,$e,Re=Ya.length,rt=Ls.length;if(E){for(I(l).iso=!0,c=0,y=Re;c<y;c++)if(Ya[c][1].exec(E[1])){W=Ya[c][0],q=Ya[c][2]!==!1;break}if(W==null){l._isValid=!1;return}if(E[3]){for(c=0,y=rt;c<y;c++)if(Ls[c][1].exec(E[3])){_e=(E[2]||" ")+Ls[c][0];break}if(_e==null){l._isValid=!1;return}}if(!q&&_e!=null){l._isValid=!1;return}if(E[4])if(ud.exec(E[4]))$e="Z";else{l._isValid=!1;return}l._f=W+(_e||"")+($e||""),Is(l)}else l._isValid=!1}function _d(l,c,y,k,E,q){var W=[fd(l),Cn.indexOf(c),parseInt(y,10),parseInt(k,10),parseInt(E,10)];return q&&W.push(parseInt(q,10)),W}function fd(l){var c=parseInt(l,10);return c<=49?2e3+c:c<=999?1900+c:c}function gd(l){return l.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function vd(l,c,y){if(l){var k=Tn.indexOf(l),E=new Date(c[0],c[1],c[2]).getDay();if(k!==E)return I(y).weekdayMismatch=!0,y._isValid=!1,!1}return!0}function bd(l,c,y){if(l)return pd[l];if(c)return 0;var k=parseInt(y,10),E=k%100,q=(k-E)/100;return q*60+E}function On(l){var c=hd.exec(gd(l._i)),y;if(c){if(y=_d(c[4],c[3],c[2],c[5],c[6],c[7]),!vd(c[1],y,l))return;l._a=y,l._tzm=bd(c[8],c[9],c[10]),l._d=Sa.apply(null,l._a),l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),I(l).rfc2822=!0}else l._isValid=!1}function yd(l){var c=md.exec(l._i);if(c!==null){l._d=new Date(+c[1]);return}if(Pn(l),l._isValid===!1)delete l._isValid;else return;if(On(l),l._isValid===!1)delete l._isValid;else return;l._strict?l._isValid=!1:r.createFromInputFallback(l)}r.createFromInputFallback=Pe("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(l){l._d=new Date(l._i+(l._useUTC?" UTC":""))});function ia(l,c,y){return l??c??y}function kd(l){var c=new Date(r.now());return l._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function As(l){var c,y,k=[],E,q,W;if(!l._d){for(E=kd(l),l._w&&l._a[Ct]==null&&l._a[$t]==null&&wd(l),l._dayOfYear!=null&&(W=ia(l._a[ot],E[ot]),(l._dayOfYear>Ca(W)||l._dayOfYear===0)&&(I(l)._overflowDayOfYear=!0),y=Sa(W,0,l._dayOfYear),l._a[$t]=y.getUTCMonth(),l._a[Ct]=y.getUTCDate()),c=0;c<3&&l._a[c]==null;++c)l._a[c]=k[c]=E[c];for(;c<7;c++)l._a[c]=k[c]=l._a[c]==null?c===2?1:0:l._a[c];l._a[st]===24&&l._a[gt]===0&&l._a[Tt]===0&&l._a[Wt]===0&&(l._nextDay=!0,l._a[st]=0),l._d=(l._useUTC?Sa:$r).apply(null,k),q=l._useUTC?l._d.getUTCDay():l._d.getDay(),l._tzm!=null&&l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),l._nextDay&&(l._a[st]=24),l._w&&typeof l._w.d<"u"&&l._w.d!==q&&(I(l).weekdayMismatch=!0)}}function wd(l){var c,y,k,E,q,W,_e,$e,Re;c=l._w,c.GG!=null||c.W!=null||c.E!=null?(q=1,W=4,y=ia(c.GG,l._a[ot],Ma(Ke(),1,4).year),k=ia(c.W,1),E=ia(c.E,1),(E<1||E>7)&&($e=!0)):(q=l._locale._week.dow,W=l._locale._week.doy,Re=Ma(Ke(),q,W),y=ia(c.gg,l._a[ot],Re.year),k=ia(c.w,Re.week),c.d!=null?(E=c.d,(E<0||E>6)&&($e=!0)):c.e!=null?(E=c.e+q,(c.e<0||c.e>6)&&($e=!0)):E=q),k<1||k>Et(y,q,W)?I(l)._overflowWeeks=!0:$e!=null?I(l)._overflowWeekday=!0:(_e=$n(y,k,E,q,W),l._a[ot]=_e.year,l._dayOfYear=_e.dayOfYear)}r.ISO_8601=function(){},r.RFC_2822=function(){};function Is(l){if(l._f===r.ISO_8601){Pn(l);return}if(l._f===r.RFC_2822){On(l);return}l._a=[],I(l).empty=!0;var c=""+l._i,y,k,E,q,W,_e=c.length,$e=0,Re,rt;for(E=Pa(l._f,l._locale).match(J)||[],rt=E.length,y=0;y<rt;y++)q=E[y],k=(c.match(dr(q,l))||[])[0],k&&(W=c.substr(0,c.indexOf(k)),W.length>0&&I(l).unusedInput.push(W),c=c.slice(c.indexOf(k)+k.length),$e+=k.length),ie[q]?(k?I(l).empty=!1:I(l).unusedTokens.push(q),ur(q,k,l)):l._strict&&!k&&I(l).unusedTokens.push(q);I(l).charsLeftOver=_e-$e,c.length>0&&I(l).unusedInput.push(c),l._a[st]<=12&&I(l).bigHour===!0&&l._a[st]>0&&(I(l).bigHour=void 0),I(l).parsedDateParts=l._a.slice(0),I(l).meridiem=l._meridiem,l._a[st]=Cd(l._locale,l._a[st],l._meridiem),Re=I(l).era,Re!==null&&(l._a[ot]=l._locale.erasConvertYear(Re,l._a[ot])),As(l),Es(l)}function Cd(l,c,y){var k;return y==null?c:l.meridiemHour!=null?l.meridiemHour(c,y):(l.isPM!=null&&(k=l.isPM(y),k&&c<12&&(c+=12),!k&&c===12&&(c=0)),c)}function Dd(l){var c,y,k,E,q,W,_e=!1,$e=l._f.length;if($e===0){I(l).invalidFormat=!0,l._d=new Date(NaN);return}for(E=0;E<$e;E++)q=0,W=!1,c=ce({},l),l._useUTC!=null&&(c._useUTC=l._useUTC),c._f=l._f[E],Is(c),Y(c)&&(W=!0),q+=I(c).charsLeftOver,q+=I(c).unusedTokens.length*10,I(c).score=q,_e?q<k&&(k=q,y=c):(k==null||q<k||W)&&(k=q,y=c,W&&(_e=!0));M(l,y||c)}function Sd(l){if(!l._d){var c=Xe(l._i),y=c.day===void 0?c.date:c.day;l._a=C([c.year,c.month,y,c.hour,c.minute,c.second,c.millisecond],function(k){return k&&parseInt(k,10)}),As(l)}}function Md(l){var c=new Q(Es(qn(l)));return c._nextDay&&(c.add(1,"d"),c._nextDay=void 0),c}function qn(l){var c=l._i,y=l._f;return l._locale=l._locale||Lt(l._l),c===null||y===void 0&&c===""?X({nullInput:!0}):(typeof c=="string"&&(l._i=c=l._locale.preparse(c)),j(c)?new Q(Es(c)):(S(c)?l._d=c:o(y)?Dd(l):y?Is(l):Fd(l),Y(l)||(l._d=null),l))}function Fd(l){var c=l._i;b(c)?l._d=new Date(r.now()):S(c)?l._d=new Date(c.valueOf()):typeof c=="string"?yd(l):o(c)?(l._a=C(c.slice(0),function(y){return parseInt(y,10)}),As(l)):m(c)?Sd(l):w(c)?l._d=new Date(c):r.createFromInputFallback(l)}function xn(l,c,y,k,E){var q={};return(c===!0||c===!1)&&(k=c,c=void 0),(y===!0||y===!1)&&(k=y,y=void 0),(m(l)&&g(l)||o(l)&&l.length===0)&&(l=void 0),q._isAMomentObject=!0,q._useUTC=q._isUTC=E,q._l=y,q._i=l,q._f=c,q._strict=k,Md(q)}function Ke(l,c,y,k){return xn(l,c,y,k,!1)}var $d=Pe("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ke.apply(null,arguments);return this.isValid()&&l.isValid()?l<this?this:l:X()}),Td=Pe("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ke.apply(null,arguments);return this.isValid()&&l.isValid()?l>this?this:l:X()});function Vn(l,c){var y,k;if(c.length===1&&o(c[0])&&(c=c[0]),!c.length)return Ke();for(y=c[0],k=1;k<c.length;++k)(!c[k].isValid()||c[k][l](y))&&(y=c[k]);return y}function Ed(){var l=[].slice.call(arguments,0);return Vn("isBefore",l)}function Ld(){var l=[].slice.call(arguments,0);return Vn("isAfter",l)}var Ad=function(){return Date.now?Date.now():+new Date},Ta=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Id(l){var c,y=!1,k,E=Ta.length;for(c in l)if(p(l,c)&&!(at.call(Ta,c)!==-1&&(l[c]==null||!isNaN(l[c]))))return!1;for(k=0;k<E;++k)if(l[Ta[k]]){if(y)return!1;parseFloat(l[Ta[k]])!==xe(l[Ta[k]])&&(y=!0)}return!0}function Pd(){return this._isValid}function Od(){return vt(NaN)}function Ha(l){var c=Xe(l),y=c.year||0,k=c.quarter||0,E=c.month||0,q=c.week||c.isoWeek||0,W=c.day||0,_e=c.hour||0,$e=c.minute||0,Re=c.second||0,rt=c.millisecond||0;this._isValid=Id(c),this._milliseconds=+rt+Re*1e3+$e*6e4+_e*1e3*60*60,this._days=+W+q*7,this._months=+E+k*3+y*12,this._data={},this._locale=Lt(),this._bubble()}function Wa(l){return l instanceof Ha}function Ps(l){return l<0?Math.round(-1*l)*-1:Math.round(l)}function qd(l,c,y){var k=Math.min(l.length,c.length),E=Math.abs(l.length-c.length),q=0,W;for(W=0;W<k;W++)(y&&l[W]!==c[W]||!y&&xe(l[W])!==xe(c[W]))&&q++;return q+E}function Nn(l,c){Z(l,0,0,function(){var y=this.utcOffset(),k="+";return y<0&&(y=-y,k="-"),k+Ne(~~(y/60),2)+c+Ne(~~y%60,2)})}Nn("Z",":"),Nn("ZZ",""),fe("Z",Na),fe("ZZ",Na),We(["Z","ZZ"],function(l,c,y){y._useUTC=!0,y._tzm=Os(Na,l)});var xd=/([\+\-]|\d\d)/gi;function Os(l,c){var y=(c||"").match(l),k,E,q;return y===null?null:(k=y[y.length-1]||[],E=(k+"").match(xd)||["-",0,0],q=+(E[1]*60)+xe(E[2]),q===0?0:E[0]==="+"?q:-q)}function qs(l,c){var y,k;return c._isUTC?(y=c.clone(),k=(j(l)||S(l)?l.valueOf():Ke(l).valueOf())-y.valueOf(),y._d.setTime(y._d.valueOf()+k),r.updateOffset(y,!1),y):Ke(l).local()}function xs(l){return-Math.round(l._d.getTimezoneOffset())}r.updateOffset=function(){};function Vd(l,c,y){var k=this._offset||0,E;if(!this.isValid())return l!=null?this:NaN;if(l!=null){if(typeof l=="string"){if(l=Os(Na,l),l===null)return this}else Math.abs(l)<16&&!y&&(l=l*60);return!this._isUTC&&c&&(E=xs(this)),this._offset=l,this._isUTC=!0,E!=null&&this.add(E,"m"),k!==l&&(!c||this._changeInProgress?Bn(this,vt(l-k,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?k:xs(this)}function Nd(l,c){return l!=null?(typeof l!="string"&&(l=-l),this.utcOffset(l,c),this):-this.utcOffset()}function Rd(l){return this.utcOffset(0,l)}function Ud(l){return this._isUTC&&(this.utcOffset(0,l),this._isUTC=!1,l&&this.subtract(xs(this),"m")),this}function jd(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var l=Os(lr,this._i);l!=null?this.utcOffset(l):this.utcOffset(0,!0)}return this}function Bd(l){return this.isValid()?(l=l?Ke(l).utcOffset():0,(this.utcOffset()-l)%60===0):!1}function Yd(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Hd(){if(!b(this._isDSTShifted))return this._isDSTShifted;var l={},c;return ce(l,this),l=qn(l),l._a?(c=l._isUTC?D(l._a):Ke(l._a),this._isDSTShifted=this.isValid()&&qd(l._a,c.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Wd(){return this.isValid()?!this._isUTC:!1}function zd(){return this.isValid()?this._isUTC:!1}function Rn(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Gd=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Kd=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function vt(l,c){var y=l,k=null,E,q,W;return Wa(l)?y={ms:l._milliseconds,d:l._days,M:l._months}:w(l)||!isNaN(+l)?(y={},c?y[c]=+l:y.milliseconds=+l):(k=Gd.exec(l))?(E=k[1]==="-"?-1:1,y={y:0,d:xe(k[Ct])*E,h:xe(k[st])*E,m:xe(k[gt])*E,s:xe(k[Tt])*E,ms:xe(Ps(k[Wt]*1e3))*E}):(k=Kd.exec(l))?(E=k[1]==="-"?-1:1,y={y:zt(k[2],E),M:zt(k[3],E),w:zt(k[4],E),d:zt(k[5],E),h:zt(k[6],E),m:zt(k[7],E),s:zt(k[8],E)}):y==null?y={}:typeof y=="object"&&("from"in y||"to"in y)&&(W=Jd(Ke(y.from),Ke(y.to)),y={},y.ms=W.milliseconds,y.M=W.months),q=new Ha(y),Wa(l)&&p(l,"_locale")&&(q._locale=l._locale),Wa(l)&&p(l,"_isValid")&&(q._isValid=l._isValid),q}vt.fn=Ha.prototype,vt.invalid=Od;function zt(l,c){var y=l&&parseFloat(l.replace(",","."));return(isNaN(y)?0:y)*c}function Un(l,c){var y={};return y.months=c.month()-l.month()+(c.year()-l.year())*12,l.clone().add(y.months,"M").isAfter(c)&&--y.months,y.milliseconds=+c-+l.clone().add(y.months,"M"),y}function Jd(l,c){var y;return l.isValid()&&c.isValid()?(c=qs(c,l),l.isBefore(c)?y=Un(l,c):(y=Un(c,l),y.milliseconds=-y.milliseconds,y.months=-y.months),y):{milliseconds:0,months:0}}function jn(l,c){return function(y,k){var E,q;return k!==null&&!isNaN(+k)&&(ke(c,"moment()."+c+"(period, number) is deprecated. Please use moment()."+c+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),q=y,y=k,k=q),E=vt(y,k),Bn(this,E,l),this}}function Bn(l,c,y,k){var E=c._milliseconds,q=Ps(c._days),W=Ps(c._months);l.isValid()&&(k=k??!0,W&&Sn(l,Da(l,"Month")+W*y),q&&wn(l,"Date",Da(l,"Date")+q*y),E&&l._d.setTime(l._d.valueOf()+E*y),k&&r.updateOffset(l,q||W))}var Zd=jn(1,"add"),Qd=jn(-1,"subtract");function Yn(l){return typeof l=="string"||l instanceof String}function Xd(l){return j(l)||S(l)||Yn(l)||w(l)||tc(l)||ec(l)||l===null||l===void 0}function ec(l){var c=m(l)&&!g(l),y=!1,k=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],E,q,W=k.length;for(E=0;E<W;E+=1)q=k[E],y=y||p(l,q);return c&&y}function tc(l){var c=o(l),y=!1;return c&&(y=l.filter(function(k){return!w(k)&&Yn(l)}).length===0),c&&y}function ac(l){var c=m(l)&&!g(l),y=!1,k=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],E,q;for(E=0;E<k.length;E+=1)q=k[E],y=y||p(l,q);return c&&y}function sc(l,c){var y=l.diff(c,"days",!0);return y<-6?"sameElse":y<-1?"lastWeek":y<0?"lastDay":y<1?"sameDay":y<2?"nextDay":y<7?"nextWeek":"sameElse"}function nc(l,c){arguments.length===1&&(arguments[0]?Xd(arguments[0])?(l=arguments[0],c=void 0):ac(arguments[0])&&(c=arguments[0],l=void 0):(l=void 0,c=void 0));var y=l||Ke(),k=qs(y,this).startOf("day"),E=r.calendarFormat(this,k)||"sameElse",q=c&&(ue(c[E])?c[E].call(this,y):c[E]);return this.format(q||this.localeData().calendar(E,this,Ke(y)))}function oc(){return new Q(this)}function ic(l,c){var y=j(l)?l:Ke(l);return this.isValid()&&y.isValid()?(c=Fe(c)||"millisecond",c==="millisecond"?this.valueOf()>y.valueOf():y.valueOf()<this.clone().startOf(c).valueOf()):!1}function lc(l,c){var y=j(l)?l:Ke(l);return this.isValid()&&y.isValid()?(c=Fe(c)||"millisecond",c==="millisecond"?this.valueOf()<y.valueOf():this.clone().endOf(c).valueOf()<y.valueOf()):!1}function rc(l,c,y,k){var E=j(l)?l:Ke(l),q=j(c)?c:Ke(c);return this.isValid()&&E.isValid()&&q.isValid()?(k=k||"()",(k[0]==="("?this.isAfter(E,y):!this.isBefore(E,y))&&(k[1]===")"?this.isBefore(q,y):!this.isAfter(q,y))):!1}function dc(l,c){var y=j(l)?l:Ke(l),k;return this.isValid()&&y.isValid()?(c=Fe(c)||"millisecond",c==="millisecond"?this.valueOf()===y.valueOf():(k=y.valueOf(),this.clone().startOf(c).valueOf()<=k&&k<=this.clone().endOf(c).valueOf())):!1}function cc(l,c){return this.isSame(l,c)||this.isAfter(l,c)}function uc(l,c){return this.isSame(l,c)||this.isBefore(l,c)}function mc(l,c,y){var k,E,q;if(!this.isValid())return NaN;if(k=qs(l,this),!k.isValid())return NaN;switch(E=(k.utcOffset()-this.utcOffset())*6e4,c=Fe(c),c){case"year":q=za(this,k)/12;break;case"month":q=za(this,k);break;case"quarter":q=za(this,k)/3;break;case"second":q=(this-k)/1e3;break;case"minute":q=(this-k)/6e4;break;case"hour":q=(this-k)/36e5;break;case"day":q=(this-k-E)/864e5;break;case"week":q=(this-k-E)/6048e5;break;default:q=this-k}return y?q:pt(q)}function za(l,c){if(l.date()<c.date())return-za(c,l);var y=(c.year()-l.year())*12+(c.month()-l.month()),k=l.clone().add(y,"months"),E,q;return c-k<0?(E=l.clone().add(y-1,"months"),q=(c-k)/(k-E)):(E=l.clone().add(y+1,"months"),q=(c-k)/(E-k)),-(y+q)||0}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function hc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function pc(l){if(!this.isValid())return null;var c=l!==!0,y=c?this.clone().utc():this;return y.year()<0||y.year()>9999?Nt(y,c?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ue(Date.prototype.toISOString)?c?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Nt(y,"Z")):Nt(y,c?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function _c(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var l="moment",c="",y,k,E,q;return this.isLocal()||(l=this.utcOffset()===0?"moment.utc":"moment.parseZone",c="Z"),y="["+l+'("]',k=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",E="-MM-DD[T]HH:mm:ss.SSS",q=c+'[")]',this.format(y+k+E+q)}function fc(l){l||(l=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var c=Nt(this,l);return this.localeData().postformat(c)}function gc(l,c){return this.isValid()&&(j(l)&&l.isValid()||Ke(l).isValid())?vt({to:this,from:l}).locale(this.locale()).humanize(!c):this.localeData().invalidDate()}function vc(l){return this.from(Ke(),l)}function bc(l,c){return this.isValid()&&(j(l)&&l.isValid()||Ke(l).isValid())?vt({from:this,to:l}).locale(this.locale()).humanize(!c):this.localeData().invalidDate()}function yc(l){return this.to(Ke(),l)}function Hn(l){var c;return l===void 0?this._locale._abbr:(c=Lt(l),c!=null&&(this._locale=c),this)}var Wn=Pe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(l){return l===void 0?this.localeData():this.locale(l)});function zn(){return this._locale}var Ga=1e3,la=60*Ga,Ka=60*la,Gn=(365*400+97)*24*Ka;function ra(l,c){return(l%c+c)%c}function Kn(l,c,y){return l<100&&l>=0?new Date(l+400,c,y)-Gn:new Date(l,c,y).valueOf()}function Jn(l,c,y){return l<100&&l>=0?Date.UTC(l+400,c,y)-Gn:Date.UTC(l,c,y)}function kc(l){var c,y;if(l=Fe(l),l===void 0||l==="millisecond"||!this.isValid())return this;switch(y=this._isUTC?Jn:Kn,l){case"year":c=y(this.year(),0,1);break;case"quarter":c=y(this.year(),this.month()-this.month()%3,1);break;case"month":c=y(this.year(),this.month(),1);break;case"week":c=y(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":c=y(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":c=y(this.year(),this.month(),this.date());break;case"hour":c=this._d.valueOf(),c-=ra(c+(this._isUTC?0:this.utcOffset()*la),Ka);break;case"minute":c=this._d.valueOf(),c-=ra(c,la);break;case"second":c=this._d.valueOf(),c-=ra(c,Ga);break}return this._d.setTime(c),r.updateOffset(this,!0),this}function wc(l){var c,y;if(l=Fe(l),l===void 0||l==="millisecond"||!this.isValid())return this;switch(y=this._isUTC?Jn:Kn,l){case"year":c=y(this.year()+1,0,1)-1;break;case"quarter":c=y(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":c=y(this.year(),this.month()+1,1)-1;break;case"week":c=y(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":c=y(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":c=y(this.year(),this.month(),this.date()+1)-1;break;case"hour":c=this._d.valueOf(),c+=Ka-ra(c+(this._isUTC?0:this.utcOffset()*la),Ka)-1;break;case"minute":c=this._d.valueOf(),c+=la-ra(c,la)-1;break;case"second":c=this._d.valueOf(),c+=Ga-ra(c,Ga)-1;break}return this._d.setTime(c),r.updateOffset(this,!0),this}function Cc(){return this._d.valueOf()-(this._offset||0)*6e4}function Dc(){return Math.floor(this.valueOf()/1e3)}function Sc(){return new Date(this.valueOf())}function Mc(){var l=this;return[l.year(),l.month(),l.date(),l.hour(),l.minute(),l.second(),l.millisecond()]}function Fc(){var l=this;return{years:l.year(),months:l.month(),date:l.date(),hours:l.hours(),minutes:l.minutes(),seconds:l.seconds(),milliseconds:l.milliseconds()}}function $c(){return this.isValid()?this.toISOString():null}function Tc(){return Y(this)}function Ec(){return M({},I(this))}function Lc(){return I(this).overflow}function Ac(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Z("N",0,0,"eraAbbr"),Z("NN",0,0,"eraAbbr"),Z("NNN",0,0,"eraAbbr"),Z("NNNN",0,0,"eraName"),Z("NNNNN",0,0,"eraNarrow"),Z("y",["y",1],"yo","eraYear"),Z("y",["yy",2],0,"eraYear"),Z("y",["yyy",3],0,"eraYear"),Z("y",["yyyy",4],0,"eraYear"),fe("N",Vs),fe("NN",Vs),fe("NNN",Vs),fe("NNNN",Bc),fe("NNNNN",Yc),We(["N","NN","NNN","NNNN","NNNNN"],function(l,c,y,k){var E=y._locale.erasParse(l,k,y._strict);E?I(y).era=E:I(y).invalidEra=l}),fe("y",sa),fe("yy",sa),fe("yyy",sa),fe("yyyy",sa),fe("yo",Hc),We(["y","yy","yyy","yyyy"],ot),We(["yo"],function(l,c,y,k){var E;y._locale._eraYearOrdinalRegex&&(E=l.match(y._locale._eraYearOrdinalRegex)),y._locale.eraYearOrdinalParse?c[ot]=y._locale.eraYearOrdinalParse(l,E):c[ot]=parseInt(l,10)});function Ic(l,c){var y,k,E,q=this._eras||Lt("en")._eras;for(y=0,k=q.length;y<k;++y){switch(typeof q[y].since){case"string":E=r(q[y].since).startOf("day"),q[y].since=E.valueOf();break}switch(typeof q[y].until){case"undefined":q[y].until=1/0;break;case"string":E=r(q[y].until).startOf("day").valueOf(),q[y].until=E.valueOf();break}}return q}function Pc(l,c,y){var k,E,q=this.eras(),W,_e,$e;for(l=l.toUpperCase(),k=0,E=q.length;k<E;++k)if(W=q[k].name.toUpperCase(),_e=q[k].abbr.toUpperCase(),$e=q[k].narrow.toUpperCase(),y)switch(c){case"N":case"NN":case"NNN":if(_e===l)return q[k];break;case"NNNN":if(W===l)return q[k];break;case"NNNNN":if($e===l)return q[k];break}else if([W,_e,$e].indexOf(l)>=0)return q[k]}function Oc(l,c){var y=l.since<=l.until?1:-1;return c===void 0?r(l.since).year():r(l.since).year()+(c-l.offset)*y}function qc(){var l,c,y,k=this.localeData().eras();for(l=0,c=k.length;l<c;++l)if(y=this.clone().startOf("day").valueOf(),k[l].since<=y&&y<=k[l].until||k[l].until<=y&&y<=k[l].since)return k[l].name;return""}function xc(){var l,c,y,k=this.localeData().eras();for(l=0,c=k.length;l<c;++l)if(y=this.clone().startOf("day").valueOf(),k[l].since<=y&&y<=k[l].until||k[l].until<=y&&y<=k[l].since)return k[l].narrow;return""}function Vc(){var l,c,y,k=this.localeData().eras();for(l=0,c=k.length;l<c;++l)if(y=this.clone().startOf("day").valueOf(),k[l].since<=y&&y<=k[l].until||k[l].until<=y&&y<=k[l].since)return k[l].abbr;return""}function Nc(){var l,c,y,k,E=this.localeData().eras();for(l=0,c=E.length;l<c;++l)if(y=E[l].since<=E[l].until?1:-1,k=this.clone().startOf("day").valueOf(),E[l].since<=k&&k<=E[l].until||E[l].until<=k&&k<=E[l].since)return(this.year()-r(E[l].since).year())*y+E[l].offset;return this.year()}function Rc(l){return p(this,"_erasNameRegex")||Ns.call(this),l?this._erasNameRegex:this._erasRegex}function Uc(l){return p(this,"_erasAbbrRegex")||Ns.call(this),l?this._erasAbbrRegex:this._erasRegex}function jc(l){return p(this,"_erasNarrowRegex")||Ns.call(this),l?this._erasNarrowRegex:this._erasRegex}function Vs(l,c){return c.erasAbbrRegex(l)}function Bc(l,c){return c.erasNameRegex(l)}function Yc(l,c){return c.erasNarrowRegex(l)}function Hc(l,c){return c._eraYearOrdinalRegex||sa}function Ns(){var l=[],c=[],y=[],k=[],E,q,W,_e,$e,Re=this.eras();for(E=0,q=Re.length;E<q;++E)W=Ft(Re[E].name),_e=Ft(Re[E].abbr),$e=Ft(Re[E].narrow),c.push(W),l.push(_e),y.push($e),k.push(W),k.push(_e),k.push($e);this._erasRegex=new RegExp("^("+k.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+c.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+y.join("|")+")","i")}Z(0,["gg",2],0,function(){return this.weekYear()%100}),Z(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ja(l,c){Z(0,[l,l.length],0,c)}Ja("gggg","weekYear"),Ja("ggggg","weekYear"),Ja("GGGG","isoWeekYear"),Ja("GGGGG","isoWeekYear"),fe("G",Va),fe("g",Va),fe("GG",Ge,mt),fe("gg",Ge,mt),fe("GGGG",ws,ks),fe("gggg",ws,ks),fe("GGGGG",xa,Oa),fe("ggggg",xa,Oa),wa(["gggg","ggggg","GGGG","GGGGG"],function(l,c,y,k){c[k.substr(0,2)]=xe(l)}),wa(["gg","GG"],function(l,c,y,k){c[k]=r.parseTwoDigitYear(l)});function Wc(l){return Zn.call(this,l,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function zc(l){return Zn.call(this,l,this.isoWeek(),this.isoWeekday(),1,4)}function Gc(){return Et(this.year(),1,4)}function Kc(){return Et(this.isoWeekYear(),1,4)}function Jc(){var l=this.localeData()._week;return Et(this.year(),l.dow,l.doy)}function Zc(){var l=this.localeData()._week;return Et(this.weekYear(),l.dow,l.doy)}function Zn(l,c,y,k,E){var q;return l==null?Ma(this,k,E).year:(q=Et(l,k,E),c>q&&(c=q),Qc.call(this,l,c,y,k,E))}function Qc(l,c,y,k,E){var q=$n(l,c,y,k,E),W=Sa(q.year,0,q.dayOfYear);return this.year(W.getUTCFullYear()),this.month(W.getUTCMonth()),this.date(W.getUTCDate()),this}Z("Q",0,"Qo","quarter"),fe("Q",gn),We("Q",function(l,c){c[$t]=(xe(l)-1)*3});function Xc(l){return l==null?Math.ceil((this.month()+1)/3):this.month((l-1)*3+this.month()%3)}Z("D",["DD",2],"Do","date"),fe("D",Ge,na),fe("DD",Ge,mt),fe("Do",function(l,c){return l?c._dayOfMonthOrdinalParse||c._ordinalParse:c._dayOfMonthOrdinalParseLenient}),We(["D","DD"],Ct),We("Do",function(l,c){c[Ct]=xe(l.match(Ge)[0])});var Qn=oa("Date",!0);Z("DDD",["DDDD",3],"DDDo","dayOfYear"),fe("DDD",qa),fe("DDDD",vn),We(["DDD","DDDD"],function(l,c,y){y._dayOfYear=xe(l)});function eu(l){var c=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return l==null?c:this.add(l-c,"d")}Z("m",["mm",2],0,"minute"),fe("m",Ge,Cs),fe("mm",Ge,mt),We(["m","mm"],gt);var tu=oa("Minutes",!1);Z("s",["ss",2],0,"second"),fe("s",Ge,Cs),fe("ss",Ge,mt),We(["s","ss"],Tt);var au=oa("Seconds",!1);Z("S",0,0,function(){return~~(this.millisecond()/100)}),Z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Z(0,["SSS",3],0,"millisecond"),Z(0,["SSSS",4],0,function(){return this.millisecond()*10}),Z(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Z(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Z(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Z(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Z(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),fe("S",qa,gn),fe("SS",qa,mt),fe("SSS",qa,vn);var Ut,Xn;for(Ut="SSSS";Ut.length<=9;Ut+="S")fe(Ut,sa);function su(l,c){c[Wt]=xe(("0."+l)*1e3)}for(Ut="S";Ut.length<=9;Ut+="S")We(Ut,su);Xn=oa("Milliseconds",!1),Z("z",0,0,"zoneAbbr"),Z("zz",0,0,"zoneName");function nu(){return this._isUTC?"UTC":""}function ou(){return this._isUTC?"Coordinated Universal Time":""}var oe=Q.prototype;oe.add=Zd,oe.calendar=nc,oe.clone=oc,oe.diff=mc,oe.endOf=wc,oe.format=fc,oe.from=gc,oe.fromNow=vc,oe.to=bc,oe.toNow=yc,oe.get=_r,oe.invalidAt=Lc,oe.isAfter=ic,oe.isBefore=lc,oe.isBetween=rc,oe.isSame=dc,oe.isSameOrAfter=cc,oe.isSameOrBefore=uc,oe.isValid=Tc,oe.lang=Wn,oe.locale=Hn,oe.localeData=zn,oe.max=Td,oe.min=$d,oe.parsingFlags=Ec,oe.set=fr,oe.startOf=kc,oe.subtract=Qd,oe.toArray=Mc,oe.toObject=Fc,oe.toDate=Sc,oe.toISOString=pc,oe.inspect=_c,typeof Symbol<"u"&&Symbol.for!=null&&(oe[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),oe.toJSON=$c,oe.toString=hc,oe.unix=Dc,oe.valueOf=Cc,oe.creationData=Ac,oe.eraName=qc,oe.eraNarrow=xc,oe.eraAbbr=Vc,oe.eraYear=Nc,oe.year=kn,oe.isLeapYear=pr,oe.weekYear=Wc,oe.isoWeekYear=zc,oe.quarter=oe.quarters=Xc,oe.month=Mn,oe.daysInMonth=Sr,oe.week=oe.weeks=Ir,oe.isoWeek=oe.isoWeeks=Pr,oe.weeksInYear=Jc,oe.weeksInWeekYear=Zc,oe.isoWeeksInYear=Gc,oe.isoWeeksInISOWeekYear=Kc,oe.date=Qn,oe.day=oe.days=zr,oe.weekday=Gr,oe.isoWeekday=Kr,oe.dayOfYear=eu,oe.hour=oe.hours=ad,oe.minute=oe.minutes=tu,oe.second=oe.seconds=au,oe.millisecond=oe.milliseconds=Xn,oe.utcOffset=Vd,oe.utc=Rd,oe.local=Ud,oe.parseZone=jd,oe.hasAlignedHourOffset=Bd,oe.isDST=Yd,oe.isLocal=Wd,oe.isUtcOffset=zd,oe.isUtc=Rn,oe.isUTC=Rn,oe.zoneAbbr=nu,oe.zoneName=ou,oe.dates=Pe("dates accessor is deprecated. Use date instead.",Qn),oe.months=Pe("months accessor is deprecated. Use month instead",Mn),oe.years=Pe("years accessor is deprecated. Use year instead",kn),oe.zone=Pe("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Nd),oe.isDSTShifted=Pe("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Hd);function iu(l){return Ke(l*1e3)}function lu(){return Ke.apply(null,arguments).parseZone()}function eo(l){return l}var He=ee.prototype;He.calendar=be,He.longDateFormat=fs,He.invalidDate=ya,He.ordinal=ys,He.preparse=eo,He.postformat=eo,He.relativeTime=de,He.pastFuture=Se,He.set=he,He.eras=Ic,He.erasParse=Pc,He.erasConvertYear=Oc,He.erasAbbrRegex=Uc,He.erasNameRegex=Rc,He.erasNarrowRegex=jc,He.months=kr,He.monthsShort=wr,He.monthsParse=Dr,He.monthsRegex=Fr,He.monthsShortRegex=Mr,He.week=Tr,He.firstDayOfYear=Ar,He.firstDayOfWeek=Lr,He.weekdays=jr,He.weekdaysMin=Yr,He.weekdaysShort=Br,He.weekdaysParse=Wr,He.weekdaysRegex=Jr,He.weekdaysShortRegex=Zr,He.weekdaysMinRegex=Qr,He.isPM=ed,He.meridiem=sd;function Za(l,c,y,k){var E=Lt(),q=D().set(k,c);return E[y](q,l)}function to(l,c,y){if(w(l)&&(c=l,l=void 0),l=l||"",c!=null)return Za(l,c,y,"month");var k,E=[];for(k=0;k<12;k++)E[k]=Za(l,k,y,"month");return E}function Rs(l,c,y,k){typeof l=="boolean"?(w(c)&&(y=c,c=void 0),c=c||""):(c=l,y=c,l=!1,w(c)&&(y=c,c=void 0),c=c||"");var E=Lt(),q=l?E._week.dow:0,W,_e=[];if(y!=null)return Za(c,(y+q)%7,k,"day");for(W=0;W<7;W++)_e[W]=Za(c,(W+q)%7,k,"day");return _e}function ru(l,c){return to(l,c,"months")}function du(l,c){return to(l,c,"monthsShort")}function cu(l,c,y){return Rs(l,c,y,"weekdays")}function uu(l,c,y){return Rs(l,c,y,"weekdaysShort")}function mu(l,c,y){return Rs(l,c,y,"weekdaysMin")}Rt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(l){var c=l%10,y=xe(l%100/10)===1?"th":c===1?"st":c===2?"nd":c===3?"rd":"th";return l+y}}),r.lang=Pe("moment.lang is deprecated. Use moment.locale instead.",Rt),r.langData=Pe("moment.langData is deprecated. Use moment.localeData instead.",Lt);var At=Math.abs;function hu(){var l=this._data;return this._milliseconds=At(this._milliseconds),this._days=At(this._days),this._months=At(this._months),l.milliseconds=At(l.milliseconds),l.seconds=At(l.seconds),l.minutes=At(l.minutes),l.hours=At(l.hours),l.months=At(l.months),l.years=At(l.years),this}function ao(l,c,y,k){var E=vt(c,y);return l._milliseconds+=k*E._milliseconds,l._days+=k*E._days,l._months+=k*E._months,l._bubble()}function pu(l,c){return ao(this,l,c,1)}function _u(l,c){return ao(this,l,c,-1)}function so(l){return l<0?Math.floor(l):Math.ceil(l)}function fu(){var l=this._milliseconds,c=this._days,y=this._months,k=this._data,E,q,W,_e,$e;return l>=0&&c>=0&&y>=0||l<=0&&c<=0&&y<=0||(l+=so(Us(y)+c)*864e5,c=0,y=0),k.milliseconds=l%1e3,E=pt(l/1e3),k.seconds=E%60,q=pt(E/60),k.minutes=q%60,W=pt(q/60),k.hours=W%24,c+=pt(W/24),$e=pt(no(c)),y+=$e,c-=so(Us($e)),_e=pt(y/12),y%=12,k.days=c,k.months=y,k.years=_e,this}function no(l){return l*4800/146097}function Us(l){return l*146097/4800}function gu(l){if(!this.isValid())return NaN;var c,y,k=this._milliseconds;if(l=Fe(l),l==="month"||l==="quarter"||l==="year")switch(c=this._days+k/864e5,y=this._months+no(c),l){case"month":return y;case"quarter":return y/3;case"year":return y/12}else switch(c=this._days+Math.round(Us(this._months)),l){case"week":return c/7+k/6048e5;case"day":return c+k/864e5;case"hour":return c*24+k/36e5;case"minute":return c*1440+k/6e4;case"second":return c*86400+k/1e3;case"millisecond":return Math.floor(c*864e5)+k;default:throw new Error("Unknown unit "+l)}}function It(l){return function(){return this.as(l)}}var oo=It("ms"),vu=It("s"),bu=It("m"),yu=It("h"),ku=It("d"),wu=It("w"),Cu=It("M"),Du=It("Q"),Su=It("y"),Mu=oo;function Fu(){return vt(this)}function $u(l){return l=Fe(l),this.isValid()?this[l+"s"]():NaN}function Gt(l){return function(){return this.isValid()?this._data[l]:NaN}}var Tu=Gt("milliseconds"),Eu=Gt("seconds"),Lu=Gt("minutes"),Au=Gt("hours"),Iu=Gt("days"),Pu=Gt("months"),Ou=Gt("years");function qu(){return pt(this.days()/7)}var Pt=Math.round,da={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function xu(l,c,y,k,E){return E.relativeTime(c||1,!!y,l,k)}function Vu(l,c,y,k){var E=vt(l).abs(),q=Pt(E.as("s")),W=Pt(E.as("m")),_e=Pt(E.as("h")),$e=Pt(E.as("d")),Re=Pt(E.as("M")),rt=Pt(E.as("w")),Ot=Pt(E.as("y")),jt=q<=y.ss&&["s",q]||q<y.s&&["ss",q]||W<=1&&["m"]||W<y.m&&["mm",W]||_e<=1&&["h"]||_e<y.h&&["hh",_e]||$e<=1&&["d"]||$e<y.d&&["dd",$e];return y.w!=null&&(jt=jt||rt<=1&&["w"]||rt<y.w&&["ww",rt]),jt=jt||Re<=1&&["M"]||Re<y.M&&["MM",Re]||Ot<=1&&["y"]||["yy",Ot],jt[2]=c,jt[3]=+l>0,jt[4]=k,xu.apply(null,jt)}function Nu(l){return l===void 0?Pt:typeof l=="function"?(Pt=l,!0):!1}function Ru(l,c){return da[l]===void 0?!1:c===void 0?da[l]:(da[l]=c,l==="s"&&(da.ss=c-1),!0)}function Uu(l,c){if(!this.isValid())return this.localeData().invalidDate();var y=!1,k=da,E,q;return typeof l=="object"&&(c=l,l=!1),typeof l=="boolean"&&(y=l),typeof c=="object"&&(k=Object.assign({},da,c),c.s!=null&&c.ss==null&&(k.ss=c.s-1)),E=this.localeData(),q=Vu(this,!y,k,E),y&&(q=E.pastFuture(+this,q)),E.postformat(q)}var js=Math.abs;function ca(l){return(l>0)-(l<0)||+l}function Qa(){if(!this.isValid())return this.localeData().invalidDate();var l=js(this._milliseconds)/1e3,c=js(this._days),y=js(this._months),k,E,q,W,_e=this.asSeconds(),$e,Re,rt,Ot;return _e?(k=pt(l/60),E=pt(k/60),l%=60,k%=60,q=pt(y/12),y%=12,W=l?l.toFixed(3).replace(/\.?0+$/,""):"",$e=_e<0?"-":"",Re=ca(this._months)!==ca(_e)?"-":"",rt=ca(this._days)!==ca(_e)?"-":"",Ot=ca(this._milliseconds)!==ca(_e)?"-":"",$e+"P"+(q?Re+q+"Y":"")+(y?Re+y+"M":"")+(c?rt+c+"D":"")+(E||k||l?"T":"")+(E?Ot+E+"H":"")+(k?Ot+k+"M":"")+(l?Ot+W+"S":"")):"P0D"}var je=Ha.prototype;je.isValid=Pd,je.abs=hu,je.add=pu,je.subtract=_u,je.as=gu,je.asMilliseconds=oo,je.asSeconds=vu,je.asMinutes=bu,je.asHours=yu,je.asDays=ku,je.asWeeks=wu,je.asMonths=Cu,je.asQuarters=Du,je.asYears=Su,je.valueOf=Mu,je._bubble=fu,je.clone=Fu,je.get=$u,je.milliseconds=Tu,je.seconds=Eu,je.minutes=Lu,je.hours=Au,je.days=Iu,je.weeks=qu,je.months=Pu,je.years=Ou,je.humanize=Uu,je.toISOString=Qa,je.toString=Qa,je.toJSON=Qa,je.locale=Hn,je.localeData=zn,je.toIsoString=Pe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qa),je.lang=Wn,Z("X",0,0,"unix"),Z("x",0,0,"valueOf"),fe("x",Va),fe("X",rr),We("X",function(l,c,y){y._d=new Date(parseFloat(l)*1e3)}),We("x",function(l,c,y){y._d=new Date(xe(l))});//! moment.js
return r.version="2.30.1",n(Ke),r.fn=oe,r.min=Ed,r.max=Ld,r.now=Ad,r.utc=D,r.unix=iu,r.months=ru,r.isDate=S,r.locale=Rt,r.invalid=X,r.duration=vt,r.isMoment=j,r.weekdays=cu,r.parseZone=lu,r.localeData=Lt,r.isDuration=Wa,r.monthsShort=du,r.weekdaysMin=mu,r.defineLocale=Ts,r.updateLocale=ld,r.locales=rd,r.weekdaysShort=uu,r.normalizeUnits=Fe,r.relativeTimeRounding=Nu,r.relativeTimeThreshold=Ru,r.calendarFormat=sc,r.prototype=oe,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})})(Vl);var j3=Vl.exports;const is=wm(j3),B3={name:"log-modal",description:"Logs Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},data:{type:Object,default:()=>{}},title:{type:String,default:""},categories:{type:Array,default:["systemLogs"]}},data:()=>({containerStyle:{width:"950px"},loading:!1,size:60,delete_after_date:"",delete_before_date:"",timeOptions:{start:"00:00",step:"00:30",end:"23:30"},isDisabled:!0,systemLogs:["systemLogs"],deleteBeforeSelected:!1,deleteAfterSelected:!1}),created(){this.lang_locale=localStorage.getItem("LANGUAGE")},computed:{isDeleteButtonDisabled(){return!(this.delete_after_date&&this.delete_before_date)}},methods:{onChange(e,t){this[t]=e,t==="delete_before_date"&&(this.deleteBeforeSelected=e!==null),t==="delete_after_date"&&(this.deleteAfterSelected=e!==null),this.isDisabled=!this.deleteBeforeSelected||!this.deleteAfterSelected},onSubmit(){this.loading=!0;const e={};e.categories=this.categories,e.delete_before=this.delete_before_date!==""&&this.delete_before_date!==null?Ie(this.delete_before_date).format("YYYY-MM-DD HH:mm:ss"):"",e.delete_after=this.delete_after_date!==""&&this.delete_after_date!==null?Ie(this.delete_after_date).format("YYYY-MM-DD HH:mm:ss"):"",V.delete("/api/delete/logs",{data:e}).then(t=>{window.emitter.emit("refreshSmartBondingDeleteLogs"),K(t,"dataTableModal"),window.location.reload(),this.onClose(),this.loading=!1}).catch(t=>{U(t,"dataTableModal")})}},components:{"date-time-field":Dt}},Y3={class:"modal-title"},H3={key:0,class:"row"},W3={class:"row"},z3={key:0},G3=["disabled"];function K3(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("date-time-field"),g=v("modal");return i(),d("div",null,[a.showModal?(i(),A(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:T(()=>[s("h4",Y3,h(e.lang(a.title)),1)]),fields:T(()=>[e.loading?(i(),d("div",H3,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:e.size},null,8,["size"])])):f("",!0),s("div",W3,[u(p,{id:"log_delete_date1",label:e.lang("delete_from"),value:e.delete_after_date,type:"datetime","time-picker-options":e.timeOptions,name:"delete_after_date",required:!1,onChange:o.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-sm-6",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"]),u(p,{id:"log_delete_date2",label:e.lang("delete_to"),value:e.delete_before_date,type:"datetime","time-picker-options":e.timeOptions,name:"delete_before_date",required:!1,onChange:o.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-sm-6",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"])])]),controls:T(()=>[a.title==="delete_logs"?(i(),d("div",z3,[s("button",{id:"log_delete_btn",type:"button",onClick:t[0]||(t[0]=b=>o.onSubmit()),class:"btn btn-secondary",disabled:o.isDeleteButtonDisabled},[t[1]||(t[1]=s("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("delete")),1)],8,G3)])):f("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const Ro=x(B3,[["render",K3]]),J3={name:"system-activity-logs",description:"System Activity Logs",setup(){const e=Me();return{params:"",formattedTime:me(()=>e.getters.formattedTime)}},data:()=>({hasData:!1,showModal:!1,isShowFilter:!1,columns:["module","event","role","performed_by","created_at","description"],options:{},apiUrl:"api/activitylogs",tableKey:0,appliedFilters:{},filterOptions:[{section:[{name:"log_name",url:"api/module/list",label:"module",className:"col-sm-4"},{name:"event",url:"api/event/list",label:"event",className:"col-sm-4"},{name:"performed_by",url:"api/performedby/list",label:"performed_by",className:"col-sm-4"}]},{section:[{name:"created_at",type:"date",label:["created_at","created_within_last"],timeOptions:{start:"00:00",step:"00:30",end:"23:30"},range:!0}]}]}),created(){window.emitter.on("updateFilter",this.updateFilter)},computed:{apiEndPoint(){return this.apiUrl}},beforeMount(){this.filterData(),this.fetchLogs();const e=this;this.options={headings:{module:this.trans("module"),event:this.trans("event"),role:this.trans("role"),created_at:this.trans("created_at"),performed_by:this.trans("performed_by"),description:this.trans("description")},columnClasses:{module:"module",event:"event",role:"role",created_at:"created-at",performed_by:"performed-by",description:"description"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{module(t,a){return a.log_name},event:function(t,a){let r=e.h("span",{class:a.event!=="Created"?a.event==="Updated"?"btn btn-warning btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal":"btn btn-success btn-sm pointer_normal"},a.event);return e.h("a",{class:"pointer_normal"},[r])},role(t,a){return a.causer?a.causer.role:"---"},performed_by(t,a){return a.performed_by?this.h(Cm,{data:a.performed_by}):"---"},created_at(t,a){return e.formattedTime(a.created_at)},description(t,a){return a.description?this.h(mo,{data:a.description,info:a.detailed_properties,scenario:a.event,logName:a.log_name}):"---"}},sortable:["module","event","created_at"],filterable:["module","event","role"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>a),count:t.data.total}},orderBy:{column:"id",ascending:!0}}},methods:{async fetchLogs(){try{const e=await axios.get(this.apiUrl+"?sort-field=id");this.hasData=e.data.data.total}catch(e){U(e,"dataTableModal")}},async refreshData(){await this.fetchLogs(),this.tableKey++},onClose(){this.showModal=!1},showDeleteModal(){this.showModal=!0},updateFilter(e){this.filterOptions.map(function(t){t.section.map(function(a){e.name===a.name&&(a.value=e.value)})})},filterData(){this.filterOptions.map(function(e){e.section.map(function(t){t.elements=[],t.isMultiple=!0,t.isPrepopulate=!1,t.value="",t.className="col-sm-4"})})},selectedFilters(e){return e==="closeEvent"?this.isShowFilter=!1:e==="resetEvent"?this.resetFilter():this.applyFilter(e)},resetFilter(){this.apiUrl="api/activitylogs",this.filterOptions=this.filterOptions.map(function(e){return{section:e.section.map(function(t){return t.elements=[],t.isMultiple=!0,t.isPrepopulate=!1,t.value="",t.className="col-sm-4",t})}}),this.isShowFilter=!0},applyFilter(e){this.appliedFilters=e;let t="api/activitylogs?",a="";if(e.log_name&&(a=this.commonMethod(0,0,"module",e.log_name,a)),e.event&&(a=this.commonMethod(0,1,"event",e.event,a)),e.performed_by&&(a=this.commonMethod(0,2,"performed_by",e.performed_by,a)),e.created_at){e=e.created_at;let r="";if(e.includes("last"))r=e;else{let n=is(e[0]).format("YYYY-MM-DD HH:mm:ss"),o=is(e[1]).format("YYYY-MM-DD HH:mm:ss");r="date::"+n+"~"+o}a+="created_at="+r+"&"}a[a.length-1]==="&"&&(a=a.slice(0,-1)),this.apiUrl=t+a,this.isShowFilter=!1,this.params=a},commonMethod(e,t,a,r,n){var o;return o=n,this.filterOptions[e].section[t].value=r,r.forEach(function(m,p){o+=a+"["+p+"]="+(a==="performed_by"?m.id:m.name)+"&"}),o},toggleFilterView(){this.isShowFilter=!this.isShowFilter},triggerExport(){axios.get("/api/export/logs?"+this.params).then(e=>{K(e,"dataTableModal")}).catch(e=>{U(e,"dataTableModal")})}},components:{LogModal:Ro,DataTableFilter:Im,DeleteLog:Ro,DataTableActions:Ye,DetailedLog:mo,HyperLinkInstance:Ku,TableView:U3}},Z3={class:"col-sm-12"},Q3={class:"card card-light"},X3={class:"card-header"},eE={id:"system-log-list",class:"card-title"},tE={class:"card-tools"},aE={class:"card-body",id:"system-log-list"};function sE(e,t,a,r,n,o){const m=v("alert"),p=v("data-table-filter"),g=v("data-table"),b=v("log-modal"),w=H("tooltip");return i(),d("div",Z3,[u(m,{componentName:"dataTableModal"}),s("div",Q3,[s("div",X3,[s("h3",eE,h(e.lang("list_of_system_logs")),1),s("div",tE,[P((i(),d("button",{type:"button",class:"btn btn-tool",onClick:t[0]||(t[0]=(...S)=>o.refreshData&&o.refreshData(...S))},t[4]||(t[4]=[s("i",{class:"fas fa-sync-alt"},null,-1)]))),[[w,e.lang("refresh")]]),P((i(),d("button",{type:"button",class:"btn btn-tool",onClick:t[1]||(t[1]=(...S)=>o.showDeleteModal&&o.showDeleteModal(...S))},t[5]||(t[5]=[s("i",{class:"fas fa-trash"},null,-1)]))),[[w,e.lang("delete_logs")]]),P((i(),d("button",{class:"btn btn-tool",onClick:t[2]||(t[2]=(...S)=>o.toggleFilterView&&o.toggleFilterView(...S)),href:"javascript:;"},t[6]||(t[6]=[s("i",{class:"glyphicon glyphicon-filter"},null,-1)]))),[[w,e.trans("filter")]]),e.hasData?P((i(),d("button",{key:0,class:"btn btn-tool",onClick:t[3]||(t[3]=(...S)=>o.triggerExport&&o.triggerExport(...S)),href:"javascript:;"},t[7]||(t[7]=[s("i",{class:"fas fa-paper-plane"},null,-1)]))),[[w,e.trans("export")]]):f("",!0)])]),s("div",aE,[P(u(p,{id:"filter-box",metaData:e.filterOptions,updateFields:e.updateFilterFields,appliedFilters:e.appliedFilters,onSelectedFilters:o.selectedFilters},null,8,["metaData","updateFields","appliedFilters","onSelectedFilters"]),[[kt,e.isShowFilter]]),(i(),A(g,{key:e.tableKey,url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"system-level-activity"},null,8,["url","dataColumns","option"])),u(Ae,{name:"modal"},{default:T(()=>[e.showModal?(i(),A(b,{key:0,title:"delete_logs",hideCheckBox:!0,onClose:o.onClose,showModal:e.showModal},null,8,["onClose","showModal"])):f("",!0)]),_:1})])])])}const nE=x(J3,[["render",sE]]);const oE={name:"system-update-modal",description:"System Update Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},space:{type:String,default:""},path:{type:String,default:""}},data(){return{loading:!1,backup:!0,closeBtn:!0,showContent:!0}},methods:{onSubmit(){this.loading=!0;let e=this.backup?"/api/backup/take-system-backup":"/auto-update-application",t=this.backup?{}:"";this.backup?(t.path=this.path,t.autoUpdate=!0):(this.closeBtn=!1,this.modalMessage="Maintenance Mode Enabled... File system Updating.. Do not close the window."),axios.post(e,t).then(a=>{this.backup?(this.showContent=!1,K(a,"UpdatesModal"),setTimeout(()=>{this.redirect("/admin/check-updates")},3e3)):this.updateDb()}).catch(a=>{this.loading=!1,this.modalMessage="",this.closeBtn=!0,U(a,"UpdatesModal")})},updateDb(){this.modalMessage="Maintenance Mode Enabled... Database Updating.. Do not close the window.",axios.post("/auto-update-database").then(e=>{this.closeBtn=!0,this.loading=!1,this.modalMessage="",this.showContent=!1,K(e,"UpdatesModal"),setTimeout(()=>{this.redirect("/admin/check-updates")},3e3)}).catch(e=>{this.closeBtn=!0,this.loading=!1,this.modalMessage="",U(e,"UpdatesModal")})}}},iE={class:"modal-title"},lE={key:0},rE={class:"label_align",name:"share"},dE={key:1},cE={key:0,class:"mt-3 mb-2 text-center close_text"},uE=["disabled"];function mE(e,t,a,r,n,o){const m=v("alert"),p=v("loader"),g=v("modal"),b=H("tooltip");return a.showModal?(i(),A(g,{key:0,showModal:a.showModal,onClose:a.onClose,showCloseBtn:n.closeBtn},{title:T(()=>[s("div",null,[s("h4",iE,h(e.trans("update_application")),1)])]),alert:T(()=>[s("div",null,[u(m,{componentName:"UpdatesModal"})])]),fields:T(()=>[!n.loading&&n.showContent?(i(),d("div",lE,[s("b",null,h(e.trans("update_perform_msg")),1),s("span",null,[t[2]||(t[2]=s("b",null,"Note - ",-1)),L(" Once started, the update cannot be stopped. The backup and update may take several minutes to complete. Make sure you have atleast "+h(a.space)+" of disk space available or it may lead to Backup/Updation failure. ",1)]),t[4]||(t[4]=s("br",null,null,-1)),t[5]||(t[5]=s("br",null,null,-1)),s("div",null,[s("label",rE,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"backup",id:"backup","onUpdate:modelValue":t[0]||(t[0]=w=>n.backup=w)},null,512),[[Ve,n.backup]]),t[3]||(t[3]=L("  ")),P((i(),d("span",null,[L(h(e.trans("system_backup_recommend_msg")),1)])),[[b,a.path]])])])])):f("",!0),n.loading?(i(),d("div",dE,[u(p,{"animation-duration":4e3,color:"#1d78ff",size:60}),n.closeBtn?f("",!0):(i(),d("div",cE,h(e.modalMessage),1))])):f("",!0)]),controls:T(()=>[s("div",null,[s("button",{type:"button",onClick:t[1]||(t[1]=(...w)=>o.onSubmit&&o.onSubmit(...w)),class:"btn btn-primary",disabled:n.loading},[t[6]||(t[6]=s("i",{class:"fas fa-arrow-right","aria-hidden":"true"},null,-1)),L(" "+h(e.trans("continue")),1)],8,uE)])]),_:1},8,["showModal","onClose","showCloseBtn"])):f("",!0)}const hE=x(oE,[["render",mE],["__scopeId","data-v-e2ba35ef"]]);const pE={name:"updates-list",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},props:{whiteLabel:{type:Boolean,default:!1}},data(){return{loading:!0,hasDataPopulated:!1,updatesData:[],pageLoad:!1,current:"",latest:"",space:"",backup_path:"",showModal:!1,updateStatus:"success",updateMsg:"an_update_is_available",whiteLabel:!1,UpdateAvailable:!0,pluginsDetails:[],selectedPlugin:[],showVersion:!1,showDetails:!1,pluginInfo:[],selectAll:!1,isLoading:!1,releaseDetails:{},showUpdateModal:!1,showLoader:!1,updateLoading:!1,updateDetails:{},next_page:"",prev_page:"",perpage:50,paramsObj:{},pluginAdditionalData:{},updateError:!1,noPluginData:!1,page_type:"",latest_version:{}}},beforeMount(){this.getUpdates();let e={page:1,limit:50};this.checkPluginUpdate(e)},created(){window.emitter.on("refreshUpdateList",this.checkPluginUpdate)},methods:{redirectToDashboard(){setTimeout(()=>{this.redirect("/panel/dashboard")},2e3)},getUpdates(){V.get("/api/check-updates").then(e=>{this.latest=e.data.message.latest,this.current=e.data.message.current,this.space=e.data.message.filesystem_space,this.backup_path=e.data.message.backup_path,this.updatesData=e.data.message.version.reverse(),this.loading=!1,this.hasDataPopulated=!0,this.updateStatus=e.data.data.status,this.updateMsg=e.data.data.message,this.whiteLabel=e.data.message.white_label,this.updateError=!1,this.latest_version={version:this.latest}}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0;let t=e.response.data.message;t==this.lang("already_on_latest_version")?this.$store.dispatch("setAlert",{type:"success",message:t,component_name:"SystemUpdates"}):U(e,"SystemUpdates"),this.updateError=!0,this.updateError&&this.noPluginData&&this.redirectToDashboard()})},onClose(){this.showModal=!1},checkPluginUpdate(e){this.updateLoading=!0,V.get("/getplugin?",{params:e}).then(t=>{this.updateLoading=!1,this.pluginsDetails=t.data.data.plugin.filter(a=>a.is_update===1),this.pluginAdditionalData=t.data.data,this.perpage=t.data.data.per_page,this.next_page=t.data.data.next_page_url,this.prev_page=t.data.data.prev_page_url,this.noPluginData=this.pluginsDetails.length===0,this.updateError&&this.noPluginData&&this.redirectToDashboard()}).catch(t=>{U(t,"SystemUpdates"),this.updateLoading=!1})},recentVersions(){this.showVersion=!this.showVersion},showDetailsModal(e,t){this.releaseDetails=e,this.page_type=t,this.showDetails=!0},onDetailsClose(){this.showDetails=!1},closeUpdateModal(){this.showUpdateModal=!1},updateAllPlugin(){this.updateLoading=!0,V.post("plugin/all/update",{plugin:this.selectedPlugin}).then(e=>{this.updateLoading=!1,K(e,"SystemUpdates"),this.checkPluginUpdate(),this.selectedPlugin=[]}).catch(e=>{this.updateLoading=!1,U(e,"SystemUpdates"),this.selectedPlugin=[]})},updatePlugin(e){this.updateDetails=e,this.showUpdateModal=!0},toggleSelectAll(){this.selectAll=!this.selectAll,this.selectAll?this.selectedPlugin=this.pluginsDetails.filter(e=>e.is_update===1).map(e=>e.path):this.selectedPlugin=[]},pageChanged(e){let t="";e==="next"&&this.next_page&&(t=this.getPageNumberFromUrl(this.next_page)),e==="previous"&&this.prev_page&&(t=this.getPageNumberFromUrl(this.prev_page)),this.paramsObj.page=t,this.checkPluginUpdate(this.paramsObj)},getPageNumberFromUrl(e){const t=/[?&]page=(\d+)/,a=e.match(t);return a?parseInt(a[1]):null},handlePageCount(e){this.paramsObj.page=1,this.paramsObj.limit=e,this.checkPluginUpdate(this.paramsObj)}},watch:{selectedPlugin(){this.selectAll=this.selectedPlugin.length===this.pluginsDetails.length}},components:{"per-page":Ju,"simple-pagination":Pm,PluginUpdateModal:Pi,PluginDetailModal:Ii,"system-update-modal":hE}},_E={class:"col-sm-12"},fE={key:0},gE={key:1,class:"card card-light"},vE={class:"card-header"},bE={class:"card-title"},yE={class:"card-tools"},kE={class:"card-body"},wE={key:0},CE={key:0,class:"alert alert-warning"},DE={key:0,href:"https://billing.faveohelpdesk.com"},SE={key:1,class:"error-page"},ME={class:"error-content"},FE={class:"text-success custom-text-bg-success fw_500"},$E={class:"row center_align"},TE={class:"card bg-secondary text-white col-sm-3 prl-0 current_card"},EE={class:"card-header border_bottom_w"},LE={class:"text-center"},AE={class:"card-body text-center"},IE={class:"fs-30"},PE={class:"card bg-info custom-bg-info col-sm-3 prl-0 latest_card"},OE={class:"card-header border_bottom_w"},qE={class:"text-center"},xE={class:"card-body text-center"},VE={class:"fs-30"},NE={class:"row center_align me-1"},RE={class:"row center_align text-center pt-3"},UE={key:0,class:"row"},jE={class:"col-12 col-md-12 col-lg-12"},BE={class:"row"},YE={class:"col-12"},HE={key:0,class:"post clearfix"},WE={class:"user-block mb-1"},zE={class:"username"},GE={href:"javascript:;"},KE={key:0},JE={key:1,class:"badge text-bg-warning restricted"},ZE={class:"description"},QE=["innerHTML"],XE={key:1},eL={key:2,class:"card card-light"},tL={class:"card-header"},aL={class:"card-title"},sL={class:"card-tools"},nL={class:"card-body"},oL={key:0},iL={class:"row pb-3 ps-2"},lL={class:"col-md-12"},rL={class:"col-md-12 col-sm-12 col-12"},dL={id:"example1",class:"table table-bordered dataTable no-footer"},cL={class:"sorting_disabled"},uL={class:"d-flex"},mL={class:"form-check"},hL={class:"pb-0"},pL={class:"row ps-2"},_L={class:"px-1 col-lg-1 col-sm-2 d-flex"},fL={class:"form-check"},gL=["value","disabled"],vL={class:"ps-3 plugin-icon-container"},bL={class:"fa-stack fa-1x resize-icon"},yL={class:"col-lg-9 col-sm-8"},kL={class:"plugin-name text-secondary"},wL={class:"text-sm text-secondary mb-0"},CL={key:0},DL=["href"],SL={key:1},ML=["onClick"],FL={key:0,class:"text-secondary text-sm m-0"},$L=["onClick"],TL={key:1},EL={key:2},LL={class:"mailbox-controls"},AL={key:0,class:"row"},IL={class:"col-sm-6 pad-top-18"},PL={class:"col-sm-6"},OL={class:"float-end mr-2"};function qL(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("per-page"),b=v("simple-pagination"),w=v("system-update-modal"),S=v("PluginDetailModal"),C=v("PluginUpdateModal"),M=H("tooltip");return i(),d("div",_E,[n.updateLoading?(i(),d("div",fE,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0),u(p,{componentName:"SystemUpdates"}),n.updatesData.length&&n.latest!=n.current?(i(),d("div",gE,[s("div",vE,[s("h3",bE,h(e.trans("application_updates")),1),s("div",yE,[!n.hasDataPopulated||n.loading?P((i(),d("a",{key:0,class:G(["btn btn-tool cursor-none",!n.hasDataPopulated||n.loading?"rotating":""]),"data-card-widget":"refresh"},t[9]||(t[9]=[s("i",{class:"fas fa-sync-alt"},null,-1)]),2)),[[M,e.lang("refresh")]]):f("",!0)])]),s("div",kE,[n.hasDataPopulated?(i(),d("div",wE,[n.latest!=n.current?(i(),d(B,{key:0},[n.updatesData.length?(i(),d(B,{key:0},[n.updateStatus=="fails"?(i(),d("div",CE,[t[10]||(t[10]=s("i",{class:"icon fas fa-exclamation-triangle"},null,-1)),L(" "+h(e.trans(n.updateMsg))+"  ",1),n.whiteLabel?f("",!0):(i(),d("a",DE,h(e.trans("click-here-to-renew")),1))])):(i(),d("div",SE,[s("div",ME,[s("h3",FE,[t[11]||(t[11]=s("i",{class:"fas fa-info-circle"},null,-1)),L(" "+h(e.trans(n.updateMsg)),1)])])])),t[18]||(t[18]=s("br",null,null,-1)),n.updateStatus!="fails"?(i(),d(B,{key:2},[s("div",$E,[s("div",TE,[s("div",EE,[s("h4",LE,h(e.trans("current_version")),1)]),s("div",AE,[s("b",IE,h(n.current),1)])]),s("div",PE,[s("div",OE,[s("h4",qE,h(e.trans("latest_version")),1)]),s("div",xE,[s("b",VE,h(n.latest),1)])])]),s("div",NE,[s("button",{type:"button",class:"btn btn-light upd_btn",onClick:t[0]||(t[0]=D=>n.showModal=!0)},[t[12]||(t[12]=s("i",{class:"fas fa-sync"},null,-1)),L(" "+h(e.trans("update")),1)]),n.whiteLabel?f("",!0):(i(),d("button",{key:0,type:"button",class:"btn btn-light upd_btn",onClick:t[1]||(t[1]=D=>o.showDetailsModal(n.latest_version,"product_list"))},[t[13]||(t[13]=s("i",{class:"fas fa-circle-info text-muted"},null,-1)),L(" "+h(e.trans("info")),1)]))]),s("div",RE,[s("p",{class:"bg-transparent text-info text-primary text-sm cursor-pointer",onClick:t[2]||(t[2]=D=>o.recentVersions())},[L(h(e.trans("recent_versions"))+" ",1),t[14]||(t[14]=s("i",{class:"fa fa-caret-down"},null,-1))])]),t[15]||(t[15]=s("br",null,null,-1))],64)):f("",!0),u(Ae,{name:"fade"},{default:T(()=>[n.showVersion?(i(),d("div",UE,[s("div",jE,[s("div",BE,[s("div",YE,[(i(!0),d(B,null,re(n.updatesData,D=>(i(),d(B,null,[D.is_private?f("",!0):(i(),d("div",HE,[s("div",WE,[t[17]||(t[17]=s("i",{class:"img-circle img-bordered img-tag-bordered fas fa-tag tag_align"},null,-1)),s("span",zE,[s("a",GE,h(e.trans("version"))+" "+h(D.version),1),n.whiteLabel?f("",!0):(i(),d("span",KE,[P((i(),d("a",{href:"javascript:;",onClick:t[3]||(t[3]=F=>o.showDetailsModal(n.latest_version,"product_list"))},t[16]||(t[16]=[s("i",{class:"fas fa-info-circle fa-sm text-muted ms-1"},null,-1)]))),[[M,e.trans("Plugin_details")]])])),D.is_restricted?P((i(),d("span",JE,[L(h(e.trans("restricted")),1)])),[[M,e.trans("update_restricted")]]):f("",!0)]),s("span",ZE,h(e.trans("released_on"))+" - "+h(r.formattedTime(D.created_at)),1)]),n.whiteLabel?f("",!0):(i(),d("p",{key:0,innerHTML:D.description,class:"ml-3-1"},null,8,QE))]))],64))),256))])])])])):f("",!0)]),_:1})],64)):f("",!0)],64)):(i(),d("span",XE,h(e.trans("no_update_available")),1))])):f("",!0)])])):f("",!0),n.pluginsDetails.length?(i(),d("div",eL,[s("div",tL,[s("h3",aL,h(e.trans("plugin_updates")),1),s("div",sL,[!n.hasDataPopulated||n.loading?P((i(),d("a",{key:0,class:G(["btn btn-tool cursor-none",!n.hasDataPopulated||n.loading?"rotating":""]),"data-card-widget":"refresh"},t[19]||(t[19]=[s("i",{class:"fas fa-sync-alt"},null,-1)]),2)),[[M,e.trans("refresh")]]):f("",!0)])]),s("div",nL,[n.hasDataPopulated?(i(),d("div",oL,[n.pluginsDetails.length?(i(),d(B,{key:0},[s("div",iL,[s("div",lL,[n.perpage?(i(),A(g,{key:0,perpage:n.perpage,onTicketCount:o.handlePageCount},null,8,["perpage","onTicketCount"])):f("",!0),n.selectedPlugin.length?(i(),d("button",{key:1,onClick:t[4]||(t[4]=D=>o.updateAllPlugin()),class:"btn btn-light ms-2"},[t[20]||(t[20]=s("i",{class:"fas fa-sync-alt"},null,-1)),L(" "+h(e.trans("update_plugin")),1)])):f("",!0)])]),s("div",rL,[s("table",dL,[s("thead",null,[s("tr",null,[s("th",cL,[s("div",uL,[s("div",mL,[P(s("input",{type:"checkbox",class:"form-check-input focus-remove",id:"customSwitch1","onUpdate:modelValue":t[5]||(t[5]=D=>n.selectAll=D),onClick:t[6]||(t[6]=D=>o.toggleSelectAll())},null,512),[[Ve,n.selectAll]]),t[21]||(t[21]=s("label",{class:"form-check-label",for:"customSwitch1"},null,-1))]),s("p",{onClick:t[7]||(t[7]=D=>o.toggleSelectAll()),class:"px-3 cursor-pointer"},h(e.trans(n.selectedPlugin.length===n.pluginsDetails.length?"deselect_all":"select_all")),1)])])])]),s("tbody",null,[(i(!0),d(B,null,re(n.pluginsDetails,D=>(i(),d("tr",null,[s("td",hL,[s("div",pL,[s("div",_L,[s("div",fL,[P(s("input",{type:"checkbox",class:"form-check-input focus-remove",id:"customSwitch3","onUpdate:modelValue":t[8]||(t[8]=F=>n.selectedPlugin=F),value:D.path,disabled:D.is_update!==1},null,8,gL),[[Ve,n.selectedPlugin]]),t[22]||(t[22]=s("label",{class:"form-check-label",for:"customSwitch3"},null,-1))]),s("div",vL,[s("div",bL,[s("i",{class:G(["fa-2x text-secondary",D.icon?D.icon:"fas fa-plug"])},null,2)])])]),s("div",yL,[s("span",kL,[s("b",null,h(D.display_name),1)]),s("p",wL,h(D.description),1),s("p",{class:G(["text-secondary text-sm",{"mb-3":D.is_update===1,"mb-0":D.is_update===0}])},[L(h(e.trans("current_version"))+" ",1),s("b",null,h("v"+D.version+" "),1),n.whiteLabel?f("",!0):(i(),d("span",CL,[L(" | "+h(e.trans("by"))+" ",1),s("a",{href:"https://"+D.website,target:"_blank"},h("Faveo"),8,DL)])),n.whiteLabel?f("",!0):(i(),d("span",SL,h(" | "))),n.whiteLabel?f("",!0):(i(),d("a",{key:2,href:"javascript:;",onClick:F=>o.showDetailsModal(D,"plugin_list")},h(e.trans("Plugin_details")),9,ML))],2),D.is_update===1?(i(),d("p",FL,[L(h(e.trans("new_version"))+" ",1),s("b",null,h(D.latest_version),1),L(" "+h(e.trans("available")),1)])):f("",!0),D.is_update===1?(i(),d("button",{key:1,type:"button",class:"btn btn-light p-1 mt-1 mb-1",onClick:F=>o.updatePlugin(D)},[t[23]||(t[23]=s("i",{class:"fas fa-sync-alt"},null,-1)),L(" "+h(e.trans("update_now")),1)],8,$L)):f("",!0)])])])]))),256))])])])],64)):(i(),d("span",TL,h(e.trans("no_plugin_update_available")),1)),n.loading?f("",!0):(i(),d("div",EL,[s("div",LL,[n.pluginsDetails.length?(i(),d("div",AL,[s("div",IL,[n.pluginAdditionalData.total==1?(i(),d(B,{key:0},[L(h(e.trans("one_record")),1)],64)):f("",!0),n.pluginAdditionalData.total>1&&n.pluginAdditionalData.total<=10?(i(),d(B,{key:1},[L(h(n.pluginAdditionalData.total)+" "+h(e.trans("records")),1)],64)):f("",!0),n.pluginAdditionalData.total>10?(i(),d(B,{key:2},[L(h(e.trans("showing"))+" "+h(n.pluginAdditionalData.from)+" to "+h(n.pluginAdditionalData.to)+" of "+h(n.pluginAdditionalData.total)+" "+h(e.trans("records")),1)],64)):f("",!0)]),s("div",PL,[s("div",OL,[u(b,{prev_page:n.prev_page,next_page:n.next_page,onPagination:o.pageChanged},null,8,["prev_page","next_page","onPagination"])])])])):f("",!0)])]))])):f("",!0)])])):f("",!0),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(w,{key:0,onClose:o.onClose,showModal:n.showModal,space:n.space,path:n.backup_path},null,8,["onClose","showModal","space","path"])):f("",!0)]),_:1}),n.showDetails?(i(),A(S,{key:3,data:n.releaseDetails,"show-modal":n.showDetails,from:n.page_type,onClose:o.onDetailsClose,whiteLabel:n.whiteLabel,alertComponentName:"SystemUpdates"},null,8,["data","show-modal","from","onClose","whiteLabel"])):f("",!0),n.showUpdateModal?(i(),A(C,{key:4,data:n.updateDetails,from:"update_list","show-modal":n.showUpdateModal,containerStyle:{width:"800px"},onClose:o.closeUpdateModal},null,8,["data","show-modal","onClose"])):f("",!0)])}const xL=x(pE,[["render",qL],["__scopeId","data-v-93fca474"]]),VL={name:"clean-data",props:{dummyInstall:{type:Boolean,default:!1}},data(){return{loading:!1,showModal:!1}},beforeMount(){this.dummyInstall||this.$router.push({path:"/admin"})},methods:{onSubmit(){this.loading=!0,V.post("/post-clean-dummy-data").then(e=>{this.showModal=!1,this.loading=!1,Ee.dispatch("setAlert",{type:"success",message:"Dummy data removed successfully",component_name:"dummy-data"}),setTimeout(()=>{this.redirect("/admin/")},2e3)}).catch(e=>{this.loading=!1,this.showModal=!1})}}},NL={class:"col-sm-12"},RL={class:"card card-light"},UL={class:"card-header"},jL={class:"card-title"},BL={class:"card-body"},YL={class:"card-footer"},HL={class:"modal-title"},WL={key:0,class:"text-center"},zL={key:1};function GL(e,t,a,r,n,o){const m=v("alert"),p=v("center"),g=v("modal");return i(),d("div",NL,[u(m,{componentName:"dummy-data"}),s("div",RL,[s("div",UL,[s("h3",jL,h(e.trans("clean-data-box-title")),1)]),s("div",BL,[s("ul",null,[s("li",null,h(e.trans("clean-dummy-ticket-conversation")),1),s("li",null,h(e.trans("clean-dummy-notification")),1),s("li",null,h(e.trans("clean-dummy-users")),1),s("li",null,h(e.trans("clean-other-data")),1),s("li",null,h(e.trans("clean-user-created-data")),1)])]),s("div",YL,[s("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=b=>n.showModal=!0)},[t[2]||(t[2]=s("i",{class:"fas fa-trash"},null,-1)),L(" "+h(e.trans("clean-data-btn")),1)])])]),n.showModal?(i(),A(g,{key:0,showModal:!0,onClose:()=>n.showModal=!1,containerStyle:{width:"500px"}},{title:T(()=>[s("h4",HL,h(e.trans("cleaning-database")),1)]),fields:T(()=>[n.loading?(i(),d("div",WL,[u(p,null,{default:T(()=>[s("h6",null,h(e.trans("cleaning-in-progress")),1)]),_:1}),u(p,null,{default:T(()=>[s("h6",null,h(e.trans("do-not-refresh")),1)]),_:1}),t[3]||(t[3]=s("div",{class:"spinner-border"},null,-1))])):f("",!0),n.loading?f("",!0):(i(),d("span",zL,h(e.trans("are_you_sure_you_want_to_delete")),1))]),controls:T(()=>[s("button",{type:"button",onClick:t[1]||(t[1]=(...b)=>o.onSubmit&&o.onSubmit(...b)),class:"btn btn-secondary"},[t[4]||(t[4]=s("i",{class:"glyphicon glyphicon-ok","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)])}const KL=x(VL,[["render",GL]]);const JL={props:["item","indexValue"],data(){return{}},components:{},methods:{},mounted(){}},ZL={class:"tree-node",ref:"closemenu"},QL={class:"nodrag"},XL={class:"contnt"},e4={class:"colp"},t4={class:"col-open"};function a4(e,t,a,r,n,o){return i(),d("div",ZL,[s("span",QL,[t[0]||(t[0]=s("span",{"handle-left":20,"handle-top":20,class:"handle"},[s("i",{class:"fa fa-list glypic-li","aria-hidden":"true"})],-1)),s("div",XL,[s("div",e4,[s("label",t4,h(a.item.name),1)])])])],512)}const s4=x(JL,[["render",a4],["__scopeId","data-v-eb69f969"]]);const n4={data(){return{list:[],base:window.axios.defaults.baseURL,lang_locale:"",loading:!0}},props:{url:{type:String,default:""},onClose:{type:Function,default:()=>[]},reorder_type:{type:String,default:"workflow"}},components:{"workflow-menu":s4,draggable:yt},beforeMount(){this.lang_locale=localStorage.getItem("LANGUAGE"),axios.get(this.url).then(e=>{this.list=e.data.data,this.loading=!1}).catch(e=>{this.loading=!1})},methods:{reOrder(e){this.loading=!0;var t=new FormData;for(var a in this.list)t.append("enforcers["+a+"][id]",this.list[a].id),t.append("enforcers["+a+"][name]",this.list[a].name);t.append("type",this.reorder_type);const r={headers:{"Content-Type":"multipart/form-data"}};axios.post("/api/reorder-enforcer-list",t,r).then(n=>{this.loading=!1,this.onClose(),K(n,"dataTableModal")}).catch(n=>{this.loading=!1,this.onClose(),U(n,"dataTableModal")})},showTable(){this.onClose()}}},o4={class:"ml_10"},i4={key:0},l4={class:"col-sm-12 mt-4 ms-3"},r4={key:1,class:"row",style:{"margin-bottom":"30px"}};function d4(e,t,a,r,n,o){const m=v("workflow-menu"),p=v("draggable"),g=v("reuse-loader");return i(),d("div",o4,[n.list.length>0&&!n.loading?(i(),d("div",i4,[u(p,{list:n.list,class:"list-group","ghost-class":"ghost"},{item:T(({element:b,index:w})=>[u(m,{item:b,indexValue:w,formList:n.list},null,8,["item","indexValue","formList"])]),_:1},8,["list"]),s("div",l4,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=b=>o.reOrder()),href:"javascript:;"},[t[2]||(t[2]=s("span",{class:"fas fa-save"},null,-1)),L(" "+h(e.lang("save")),1)]),t[4]||(t[4]=L("  ")),s("button",{onClick:t[1]||(t[1]=b=>o.showTable()),class:"btn btn-secondary",href:"javascript:void(0);"},[t[3]||(t[3]=s("span",{class:"fas fa-times"},null,-1)),L(" "+h(e.lang("cancel")),1)])])])):f("",!0),n.loading?(i(),d("div",r4,[u(g,{"animation-duration":4e3,color:"#1d78ff",size:60,class:G({spin:n.lang_locale=="ar"})},null,8,["class"])])):f("",!0)])}const hs=x(n4,[["render",d4],["__scopeId","data-v-f2a29c58"]]);const c4={class:"col-sm-12"},u4={class:"card card-light"},m4={class:"card-header"},h4={class:"card-title"},p4={class:"card-tools"},_4={class:"card-body",id:"trigger-index-table"},Uo="api/get-enforcer-list/",f4={__name:"TriggerIndex",setup(e){const t=Me(),a=me(()=>t.getters.formattedTime),r=O(["name","status","order","category_type","created_at","updated_at","action"]);window.axios.defaults.baseURL;const n=O({}),o=O("list_of_triggers"),m=O(!0),p=O(0),g=C=>tt(Ye,{data:C}),b=C=>tt(ma,{data:C});Je(C=>{n.value={texts:{filter:"",limit:""},headings:{name:N("name"),status:N("status"),order:N("order"),category_type:N("category_type"),created_at:N("created"),updated_at:N("updated"),action:N("action")},columnsClasses:{name:"trigger-index-name",status:"trigger-index-status",order:"trigger-index-order",category_type:"trigger-category-type",created_at:"trigger-index-created",updated_at:"trigger-index-updated",action:"trigger-index-action"},templates:{action(M,D){return g(D)},status(M,D){return b(D)},category_type(M,D){return D.category_type.charAt(0).toUpperCase()+D.category_type.slice(1)},created_at(M,D){return a.value(D.created_at)},updated_at(M,D){return a.value(D.updated_at)}},sortable:["name","status","order","created_at","updated_at","category_type"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(M){return{type:"trigger",sort:M.orderBy?M.orderBy:"order",sort_order:M.ascending?"asc":"desc",search:M.query,page:M.page,limit:M.limit}},responseAdapter({data:M}){return p.value=M.data.total,{data:M.data.data.map(D=>{let F="/trigger/";return D.edit_url=F+D.id+"/edit?page_type="+D.category_type,D.delete_url=window.axios.defaults.baseURL+"/api/delete-enforcer/trigger/"+D.id,D}),count:M.data.total}},orderBy:{column:"order",ascending:!0}}});const w=()=>{m.value=!1,o.value="reorder"},S=()=>{m.value=!0,o.value="list_of_triggers"};return(C,M)=>{const D=v("alert"),F=v("router-link"),I=v("data-table"),R=H("tooltip");return i(),d("div",c4,[u(D,{componentName:"dataTableModal"}),s("div",u4,[s("div",m4,[s("h3",h4,h(ae(N)(o.value)),1),s("div",p4,[P((i(),A(F,{class:"btn btn-tool",to:"/trigger/create?page_type=ticket"},{default:T(()=>M[0]||(M[0]=[s("span",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[R,ae(N)("create_trigger")]]),m.value&&p.value>1?P((i(),d("a",{key:0,class:"btn btn-tool",href:"javascript:;",onClick:w},M[1]||(M[1]=[s("span",{class:"fas fa-bars"},null,-1)]))),[[R,ae(N)("reorder")]]):f("",!0)])]),s("div",_4,[m.value?(i(),A(I,{key:0,url:Uo,dataColumns:r.value,option:n.value},null,8,["dataColumns","option"])):f("",!0),m.value?f("",!0):(i(),A(hs,{key:1,onClose:S,url:Uo+"?type=trigger&meta=true&sort=order&sort_order=asc",reorder_type:"trigger"},null,8,["url"]))])])])}}};const g4={name:"workflow-index",description:"Workflow table component",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},data:()=>({base:window.axios.defaults.baseURL,columns:[],options:{},apiUrl:"api/get-enforcer-list/",title:"list_of_workflows",showTable:!0,total_records:0,showDrop:!1}),beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3);const e=this;this.columns=["name","status","order","category_type","created_at","updated_at","action"],this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),status:this.trans("status"),order:this.trans("order"),category_type:this.trans("category_type"),created_at:this.trans("created"),updated_at:this.trans("updated"),action:this.trans("action")},columnsClasses:{name:"workflow-index-name",status:"workflow-index-status",order:"workflow-index-order",category_type:"workflow-category-type",created_at:"workflow-index-created",updated_at:"workflow-index-updated",action:"workflow-index-action"},templates:{action:function(t,a){return e.h(Ye,{data:a})},status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.status?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])},category_type(t,a){return a.category_type.charAt(0).toUpperCase()+a.category_type.slice(1)},created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)}},sortable:["name","status","order","created_at","updated_at","category_type"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{type:"workflow",sort:t.orderBy?t.orderBy:"order",sort_order:t.ascending?"asc":"desc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.data.total,{data:t.data.data.map(a=>{let r=a.category_type!="ticket"?"/service-desk/workflow/":"/workflow/";return a.edit_url=r+a.id+"/edit?page_type="+a.category_type,a.delete_url=window.axios.defaults.baseURL+"/api/delete-enforcer/workflow/"+a.id,a}),count:t.data.total}},orderBy:{column:"order",ascending:!0}}},methods:{workflowListMounted(){window.emitter.emit("create-workflow-button-mounted")},reorderMethod(){this.showTable=!1,this.title="reorder"},onClose(){this.showTable=!0,this.title="list_of_workflows"}},components:{"workflow-reorder":hs}},v4={class:"col-sm-12"},b4={class:"card card-light"},y4={class:"card-header"},k4={class:"card-title"},w4={class:"card-tools"},C4={href:"javascript:;",class:"btn-tool dropdown-toggle","data-bs-toggle":"dropdown"},D4={class:"dropdown-menu dropdown-menu-right",role:"menu"},S4={id:"workflow-create-button"},M4={class:"card-body",id:"workflow-index-table"};function F4(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("workflow-reorder"),w=H("tooltip");return i(),d("div",v4,[u(m,{componentName:"dataTableModal"}),s("div",b4,[s("div",y4,[s("h3",k4,h(e.lang(e.title)),1),s("div",w4,[P((i(),d("a",C4,t[1]||(t[1]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)]))),[[w,e.lang("create_workflow")]]),P(s("div",D4,[s("span",S4,h(o.workflowListMounted()),1),u(p,{id:"add-fg-link",class:"dropdown-item",to:"/workflow/create?page_type=ticket"},{default:T(()=>[L(h(e.lang("new_ticket_workflow")),1)]),_:1})],512),[[kt,e.showDrop]]),e.showTable&&e.total_records>1?P((i(),d("a",{key:0,class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...S)=>o.reorderMethod&&o.reorderMethod(...S))},t[2]||(t[2]=[s("span",{class:"fas fa-bars"},null,-1)]))),[[w,e.lang("reorder")]]):f("",!0)])]),s("div",M4,[e.apiUrl!==""&&e.showTable?(i(),A(g,{key:0,url:e.apiUrl,dataColumns:e.columns,option:e.options},null,8,["url","dataColumns","option"])):f("",!0),e.showTable?f("",!0):(i(),A(b,{key:1,onClose:o.onClose,url:e.apiUrl+"?meta=true&sort=order&sort_order=asc",reorder_type:"workflow"},null,8,["onClose","url"]))])])])}const $4=x(g4,[["render",F4]]);const T4={name:"listener-index",description:"Listener table component",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},data:()=>({base:window.axios.defaults.baseURL,columns:[],options:{},apiUrl:"api/get-enforcer-list/",total_records:0,showTable:!0,showDrop:!1,title:"list_of_listeners"}),beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3);const e=this;this.columns=["name","status","order","category_type","created_at","updated_at","action"],this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),status:this.trans("status"),order:this.trans("order"),created_at:this.trans("created"),category_type:this.trans("category_type"),updated_at:this.trans("updated"),action:this.trans("action")},columnsClasses:{name:"listener-index-name",status:"listener-index-status",order:"listener-index-order",category_type:"listener-category-type",created_at:"listener-index-created",updated_at:"listener-index-updated",action:"listener-index-action"},templates:{action:(t,a)=>e.h(Ye,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.status?this.trans("active"):this.trans("inactive"));return e.h("a",{class:"pointer_normal"},[r])},category_type(t,a){return a.category_type.charAt(0).toUpperCase()+a.category_type.slice(1)},created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)}},sortable:["name","status","order","rules","target","created_at","updated_at","category_type"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{type:"listener",sort:t.orderBy?t.orderBy:"order",sort_order:t.ascending?"asc":"desc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.data.total,{data:t.data.data.map(a=>{let r=a.category_type!="ticket"?"/service-desk/listener/":"/listener/";return a.edit_url=r+a.id+"/edit?page_type="+a.category_type,a.delete_url=window.axios.defaults.baseURL+"/api/delete-enforcer/listener/"+a.id,a}),count:t.data.total}},orderBy:{column:"order",ascending:!0}}},methods:{reorderMethod(){this.showTable=!1,this.title="reorder"},onClose(){this.showTable=!0,this.title="list_of_listeners"},listenerListMounted(){window.emitter.emit("create-listener-button-mounted")}},components:{"listener-reorder":hs}},E4={class:"col-sm-12"},L4={class:"card card-light"},A4={class:"card-header"},I4={class:"card-title"},P4={class:"card-tools"},O4={href:"javascript:;",class:"btn-tool dropdown-toggle","data-bs-toggle":"dropdown"},q4={class:"dropdown-menu dropdown-menu-right",role:"menu"},x4={id:"listener-create-button"},V4={class:"card-body",id:"listener-index-table"};function N4(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("listener-reorder"),w=H("tooltip");return i(),d("div",E4,[u(m,{componentName:"dataTableModal"}),s("div",L4,[s("div",A4,[s("h3",I4,h(e.lang(e.title)),1),s("div",P4,[P((i(),d("a",O4,t[1]||(t[1]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)]))),[[w,e.lang("create_listener")]]),P(s("div",q4,[s("span",x4,h(o.listenerListMounted()),1),u(p,{id:"create",class:"dropdown-item",to:"/listener/create?page_type=ticket"},{default:T(()=>[L(h(e.lang("new_ticket_listener")),1)]),_:1})],512),[[kt,e.showDrop]]),e.showTable&&e.total_records>1?P((i(),d("a",{key:0,class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...S)=>o.reorderMethod&&o.reorderMethod(...S))},t[2]||(t[2]=[s("span",{class:"fas fa-bars"},null,-1)]))),[[w,e.lang("reorder")]]):f("",!0)])]),s("div",V4,[e.apiUrl!==""&&e.showTable?(i(),A(g,{key:0,url:e.apiUrl,dataColumns:e.columns,option:e.options},null,8,["url","dataColumns","option"])):f("",!0),e.showTable?f("",!0):(i(),A(b,{key:1,onClose:o.onClose,url:e.apiUrl+"?type=listener&meta=true&sort=order&sort_order=asc",reorder_type:"listener"},null,8,["onClose","url"]))])])])}const R4=x(T4,[["render",N4]]);const U4={class:"col-sm-12"},j4={class:"card card-light card-tabs"},B4={class:"card-header p-0 pt-1"},Y4={class:"nav nav-tabs",id:"custom-tabs-one-tab",role:"tablist"},H4=["onClick"],W4={class:"card-body"},z4={class:"tab-content"},G4={class:"tab-pane active",role:"tabpanel"},K4={__name:"AutomatorsList",setup(e){const t=ft(),a=O("workflow");fa(()=>{t.query.type&&o(t.query.type)});const r=O([{id:"workflow",title:"workflow"},{id:"listener",title:"listener"},{id:"trigger",title:"trigger"}]),n=me(()=>{switch(a.value){case"workflow":return $4;case"listener":return R4;case"trigger":return f4;default:return null}}),o=m=>{a.value=m};return(m,p)=>(i(),d("div",U4,[s("div",j4,[s("div",B4,[s("ul",Y4,[(i(!0),d(B,null,re(r.value,g=>(i(),d("li",{key:g.id,class:"nav-item"},[s("a",{id:"settings_tab",onClick:b=>o(g.id),class:G(["nav-link cursor-pointer",{active:a.value===g.id}]),"data-bs-toggle":"pill",role:"tab"},h(m.lang(g.title)),11,H4)]))),128))])]),s("div",W4,[s("div",z4,[s("div",G4,[(i(),A(sn(n.value),{category:a.value},null,8,["category"]))])])])])]))}},J4=x(K4,[["__scopeId","data-v-cd988e70"]]);const Z4={name:"agent-list",description:"Agent list table component",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},components:{AdvanceFilter:Zu},data:()=>({isShowFilter:!1,apiUrl:"api/admin/get-users-list?roles[0]=admin&roles[1]=agent&active=1",columns:["name","user_name","email","phone","info","action"],filterOptions:[{section:[{name:"userType",url:"",elements:[{id:"all",name:"All",queryPerm:"roles[0]=admin&roles[1]=agent"},{id:"active_admin_agent",name:"Active Admins and Agents",queryPerm:"roles[0]=admin&roles[1]=agent&active=1"},{id:"deactive_admin_agent",name:"Deactivated Admins and Agents",queryPerm:"roles[0]=admin&roles[1]=agent&active=0"},{id:"active_admin",name:"Active Admins",queryPerm:"roles[0]=admin&active=1"},{id:"deactive_admin",name:"Deactivated Admins",queryPerm:"roles[0]=admin&active=0"},{id:"all_admin",name:"All Admins",queryPerm:"roles[0]=admin"},{id:"active_agent",name:"Active Agents",queryPerm:"roles[0]=agent&active=1"},{id:"deactive_agent",name:"Deactivated Agents",queryPerm:"roles[0]=agent&active=0"},{id:"all_agent",name:"All Agents",queryPerm:"roles[0]=agent"}],isMultiple:!1,isPrepopulate:!1,label:"user_type",value:{id:"active_admin_agent",name:"Active Admins and Agents",queryPerm:"roles[0]=admin&roles[1]=agent&active=1"},className:"col-sm-4"},{name:"departments",url:"api/dependency/departments",elements:[],isMultiple:!0,isPrepopulate:!1,label:"departments",value:"",className:"col-sm-4"},{name:"teams",url:"api/dependency/teams",elements:[],isMultiple:!0,isPrepopulate:!1,label:"teams",value:"",className:"col-sm-4"}]}],options:{}}),beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),user_name:this.trans("user_name"),email:this.trans("email"),phone:this.trans("phone"),info:this.trans("account_info"),action:this.trans("actions")},columnsClasses:{name:"name__agentList",user_name:"username__agentList",email:"email__agentList",phone:"phone__agentList",info:"active__agentList",action:"action__agentList"},texts:{filter:"",limit:""},templates:{name:function(t,a){return e.h("a",{href:e.basePath()+"/panel/user/"+a.id,target:"_blank"},a.name)},phone(t,a){return a.phone===" Not available"||a.phone===" "||!a.phone?"--":a.phone},action:function(t,a){return e.h(Qu,{data:a})},info:function(t,a){return e.h(an,{data:a})},type(t,a){return a.type.name}},sortable:["name","user_name","email"],filterable:["name","user_name","email"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){if(t)return{data:t.data.users.map(a=>(a.edit_url="/agent/"+a.id+"/edit",a.view_url=e.basePath()+"/panel/user/"+a.id,a.agent_view_url=e.basePath()+"/panel/agent/"+a.id,a.from="admin",a)),count:t.data.total}},orderBy:{column:"name",ascending:!0}}},methods:{selectedFilters(e){if(e==="closeEvent"){this.isShowFilter=!1;return}else if(e==="resetEvent"){this.resetFilter();return}let t="api/admin/get-users-list?",a="";e.userType?(this.filterOptions[0].value=e.userType,a=e.userType.queryPerm+"&"):a="roles[0]=admin&roles[1]=agent&",e.departments&&(this.filterOptions[0].section[1].value=e.departments,e.departments.forEach(function(r,n){a+="dept-ids["+n+"]="+r.id+"&"})),e.teams&&(this.filterOptions[0].section[2].value=e.teams,e.teams.forEach(function(r,n){a+="team-ids["+n+"]="+r.id+"&"})),a[a.length-1]==="&"&&(a=a.slice(0,-1)),this.apiUrl=t+a,this.isShowFilter=!1},resetFilter(){this.filterOptions.forEach(function(e){e.value=""}),this.apiUrl="api/admin/get-users-list?roles[0]=admin&roles[1]=agent"},toggleFilterView(){this.isShowFilter=!this.isShowFilter}}},Q4={class:"col-sm-12"},X4={class:"card-tools"},eA={id:"my_agents"};function tA(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("advance-filter"),b=v("data-table"),w=v("faveo-box"),S=H("tooltip");return i(),d("div",Q4,[u(m,{componentName:"agentList"}),u(w,{title:e.trans("list_of_agents"),boxClass:"card-light"},{headerMenu:T(()=>[s("div",X4,[P((i(),d("a",{class:"btn btn-tool",onClick:t[0]||(t[0]=(...C)=>o.toggleFilterView&&o.toggleFilterView(...C))},t[1]||(t[1]=[s("i",{class:"glyphicon glyphicon-filter"},null,-1)]))),[[S,e.trans("filter")]]),P((i(),A(p,{class:"btn btn-tool",to:"/agent/create",id:"add-agent-link"},{default:T(()=>t[2]||(t[2]=[s("i",{class:"glyphicon glyphicon-plus","aria-hidden":"true"},null,-1)])),_:1})),[[S,{content:e.trans("create_agent"),placement:"left"}]])])]),default:T(()=>[s("div",eA,[P(u(g,{id:"filter-box",metaData:e.filterOptions,onSelectedFilters:o.selectedFilters},null,8,["metaData","onSelectedFilters"]),[[kt,e.isShowFilter]]),u(b,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"agents-list"},null,8,["url","dataColumns","option"])])]),_:1},8,["title"])])}const aA=x(Z4,[["render",tA]]);const sA={name:"data-table-managers",description:"Contains managers list",props:{data:{type:Object,required:!0}}},nA={class:"btn-group"},oA={key:0},iA=["href"],lA={key:0},rA={key:1};function dA(e,t,a,r,n,o){return i(),d("div",nA,[a.data.managers.length>0?(i(),d("span",oA,[(i(!0),d(B,null,re(a.data.managers,(m,p)=>(i(),d("a",{id:"managers",href:e.basePath()+"/panel/user/"+m.id,target:"_blank"},[L(h(m.full_name)+" ",1),p!=Object.keys(a.data.managers).length-1?(i(),d("span",lA,", ")):f("",!0)],8,iA))),256))])):(i(),d("span",rA,"--"))])}const cA=x(sA,[["render",dA]]);const uA={name:"departments-index",description:"Departments table component",data(){return{columns:["name","type","managers","actions"],options:{},apiUrl:"/api/admin/departments-list"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},headings:{name:this.trans("name"),managers:this.trans("managers"),type:this.trans("type"),actions:this.trans("actions")},columnsClasses:{name:"dept-name",managers:"dept-manager",type:"dept-type",actions:"dept-actions"},templates:{actions:function(t,a){return e.h(Ye,{data:a})},managers:function(t,a){return e.h(cA,{data:a})},type(t,a){return a.type.name}},sortable:["name","type"],filterable:["name","type","managers"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query,page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/department/"+a.id+"/edit",a.view_url="/department/"+a.id,a.delete_url=e.basePath()+"/api/admin/delete-department/"+a.id,a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}}},mA={class:"col-sm-12",id:"departments-table"},hA={class:"card card-light"},pA={class:"card-header"},_A={class:"card-title"},fA={class:"card-tools"},gA={class:"card-body",id:"my_depts"};function vA(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",mA,[u(m,{componentName:"dataTableModal"}),s("div",hA,[s("div",pA,[s("h3",_A,h(e.trans("list_of_departments")),1),s("div",fA,[P((i(),A(p,{class:"btn btn-tool",to:"/department/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,e.trans("create_department")]])])]),s("div",gA,[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"departments-table"},null,8,["url","dataColumns","option"])])])])}const bA=x(uA,[["render",vA]]);function yA(e){const{name:t}=e;let a={name:[t,"isRequired",{"max(100)":N("name_should_be_less_than_100_characters")}]};const r=new Le(N),{errors:n,isValid:o}=r.validate(a);return Ee.dispatch("setValidationError",n),{errors:n,isValid:o}}const kA={name:"departments",description:"departments create and edit page",data(){return{name:"",managers:[],business_hour:null,outgoing_email:null,department_sign:"",teams:[],is_default:0,type_id:1,loading:!1,hasDataPopulated:!0,radioOptions:[{name:"public",value:1},{name:"private",value:0}],title:"create_department",iconClass:"fas fa-save",btnName:"save",dept_id:"",isDisabled:!1,deptData:{},agents_api:"/api/dependency/department-qualifiable-managers",apiCalled:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{departmentBoxMounted(){window.emitter.emit("dept-box-mounted",this.deptData)},getValues(e){const t=Ue(e);e.indexOf("edit")>=0?(this.title="edit_department",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t),this.agents_api="/api/dependency/department-qualifiable-managers?supplements="+t):(setTimeout(()=>{this.apiCalled=!0},1e3),this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,V.get("/api/admin/edit-department/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.dept_id=e,this.deptData=t.data.data.department,this.apiCalled=!0,this.isDisabled=!!this.deptData.is_default,this.updateStatesWithData(t.data.data.department)}).catch(t=>{this.loading=!1,U(t)})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=yA(this.$data);return t},onSubmit(){if(this.isValid()){this.loading=!0;const e={};this.dept_id!=""&&(e.id=this.dept_id),e.name=this.name,e.department_sign=this.department_sign,this.managers.length>0&&(e.manager_ids=this.managers.map(t=>t.id)),this.teams.length?e.team_ids=this.teams.map(t=>t.id):e.team_ids=[],e.business_hour_id=this.business_hour?this.business_hour.id:"",e.outgoing_email_id=this.outgoing_email?this.outgoing_email.id:"",e.type_id=this.type_id,this.is_default&&(e.is_default=this.is_default),window.emitter.emit("dept-data-submitting",e),V.post("/api/admin/create-update-department",e).then(t=>{this.loading=!1,K(t,"departments"),this.dept_id?this.getInitialValues(this.dept_id):setTimeout(()=>{let a=t.data.data.id;return this.$router.push("/department/"+a)},3e3)}).catch(t=>{this.loading=!1,U(t,"departments")})}},onChange(e,t){this[t]=e}},components:{"text-field":we,"dynamic-select":Be,"radio-button":Qe,"tool-tip":nt}},wA={class:"col-sm-12"},CA={key:0,class:"row"},DA={key:1,class:"card card-light"},SA={class:"card-header"},MA={class:"card-title"},FA={key:0,class:"card-tools"},$A={class:"card-body"},TA={class:"row"},EA={class:"row"},LA={class:"row"},AA={key:0,class:"row"},IA={id:"dept-container",class:"col-sm-6"},PA={class:"row"},OA={class:"form-group col-md-12",id:"text"},qA={class:"label_align1"},xA=["disabled"],VA={class:"card-footer"},NA=["disabled"];function RA(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("router-link"),b=v("text-field"),w=v("radio-button"),S=v("dynamic-select"),C=v("tiny-editor"),M=v("tool-tip"),D=H("tooltip"),F=H("focus-first-input");return i(),d("div",wA,[!n.hasDataPopulated||n.loading?(i(),d("div",CA,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"departments"}),n.hasDataPopulated?(i(),d("div",DA,[s("div",SA,[s("h3",MA,h(e.trans(n.title)),1),n.dept_id?(i(),d("div",FA,[P((i(),A(g,{class:"btn-tool",to:"/department/"+n.dept_id},{default:T(()=>t[2]||(t[2]=[s("i",{class:"fas fa-eye"},null,-1)])),_:1},8,["to"])),[[D,e.trans("view")]])])):f("",!0)]),s("div",$A,[P((i(),d("div",TA,[u(b,{label:e.trans("name"),value:n.name,type:"text",name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(w,{options:n.radioOptions,label:e.trans("type"),name:"type_id",value:n.type_id,onChange:o.onChange,classname:"form-group col-sm-6",hint:e.trans("department-type")},null,8,["options","label","value","onChange","hint"])])),[[F]]),s("div",EA,[u(S,{label:e.trans("managers"),multiple:!0,name:"managers",prePopulate:!0,classname:"col-sm-6",apiEndpoint:n.agents_api,value:n.managers,onChange:o.onChange,required:!1,hint:e.trans("department-manager")},null,8,["label","apiEndpoint","value","onChange","hint"]),u(S,{label:e.trans("business_hour"),multiple:!1,name:"business_hour",prePopulate:!0,classname:"col-sm-6",apiEndpoint:"/api/dependency/business-hours",value:n.business_hour,onChange:o.onChange,required:!1,hint:e.trans("business-hour-desc")},null,8,["label","value","onChange","hint"])]),s("div",LA,[u(S,{label:e.trans("outgoing_email"),multiple:!1,name:"outgoing_email",prePopulate:!0,classname:"col-sm-6",apiEndpoint:"/api/dependency/system-emails",value:n.outgoing_email,onChange:o.onChange,required:!1,hint:e.trans("department-outgoin-mail")},null,8,["label","value","onChange","hint"]),u(S,{label:e.trans("teams"),multiple:!0,name:"teams",classname:"col-sm-6",value:n.teams,apiEndpoint:"/api/dependency/teams",onChange:o.onChange,required:!1},null,8,["label","value","onChange"])]),n.apiCalled?(i(),d("div",AA,[s("div",IA,h(o.departmentBoxMounted()),1)])):f("",!0),s("div",PA,[u(C,{value:n.department_sign,type:"text",onChange:o.onChange,name:"department_sign",label:e.trans("department_signature"),classname:"col-sm-12",required:!1,lang:"en",id:"department-edit-editor"},null,8,["value","onChange","label"])]),s("div",OA,[s("label",qA,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"default","onUpdate:modelValue":t[0]||(t[0]=I=>n.is_default=I),disabled:n.isDisabled},null,8,xA),[[Ve,n.is_default]]),L(" "+h(e.trans("make-default-department")),1)]),u(M,{message:e.trans("default-department"),size:"medium"},null,8,["message"])])]),s("div",VA,[s("button",{type:"button",onClick:t[1]||(t[1]=(...I)=>o.onSubmit&&o.onSubmit(...I)),disabled:n.loading,class:"btn btn-primary"},[s("span",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)],8,NA)])])):f("",!0)])}const jo=x(kA,[["render",RA],["__scopeId","data-v-9baf3ab1"]]),UA={name:"dept-details",description:"Department details  page",props:{deptData:{type:Object,default:()=>{}}},methods:{subString(e){return Yt(e,20)}}},jA={class:"card card-light card-outline"},BA={class:"card-body box-profile"},YA={class:"text-center"},HA={class:"profile-username text-center"},WA={class:"text-muted text-center"},zA={class:"list-group list-group-unbordered mb-3"},GA={class:"list-group-item"},KA={class:"float-end badge text-bg-info text-white"},JA={class:"list-group-item"},ZA={class:"float-end"},QA={class:"list-group-item"},XA={key:0,class:"float-end"},eI={key:0},tI={class:"d-grid"};function aI(e,t,a,r,n,o){const m=v("faveo-image-element"),p=v("router-link"),g=H("tooltip");return i(),d("div",jA,[s("div",BA,[s("div",YA,[u(m,{id:"deptimg","source-url":e.basePathVersion()+"/themes/default/admin/images/department.jpg",classes:["profile-user-img img-fluid img-rounder img-circle"],"alternative-text":"Department Image"},null,8,["source-url"])]),P((i(),d("h3",HA,[L(h(o.subString(a.deptData.name)),1)])),[[g,a.deptData.name]]),s("p",WA,h(e.trans("department")),1),s("ul",zA,[s("li",GA,[s("b",null,h(e.trans("department_size")),1),t[0]||(t[0]=L()),s("a",KA,h(a.deptData.size),1)]),s("li",JA,[s("b",null,h(e.trans("business_hour")),1),P((i(),d("a",ZA,[L(h(a.deptData.business_hour?o.subString(a.deptData.business_hour.name):"--"),1)])),[[g,a.deptData.business_hour?a.deptData.business_hour.name:""]])]),s("li",QA,[s("div",null,[s("b",null,h(e.trans("teams")),1),t[1]||(t[1]=L("      ")),a.deptData.teams.length?(i(!0),d(B,{key:1},re(a.deptData.teams,(b,w)=>P((i(),A(p,{to:"/team/"+b.id,class:"float-end"},{default:T(()=>[L(h(o.subString(b.name)),1),w!=Object.keys(a.deptData.teams).length-1?(i(),d("span",eI,", ")):f("",!0)]),_:2},1032,["to"])),[[g,b.name]])),256)):(i(),d("a",XA,"--"))])])]),s("div",tI,[u(p,{to:"/department/"+a.deptData.id+"/edit",class:"btn btn-primary btn-block"},{default:T(()=>[s("b",null,[t[2]||(t[2]=s("i",{class:"fas fa-edit"},null,-1)),L(" "+h(e.trans("edit")),1)])]),_:1},8,["to"])])])])}const sI=x(UA,[["render",aI]]);const nI={name:"",description:"",props:{manager:{type:Object,default:()=>{}}},methods:{subString(e,t=15){return Yt(e,t)}}},oI={class:"card card-widget widget-user-2"},iI={class:"widget-user-header bg-warning"},lI={class:"widget-user-image"},rI={class:"widget-user-username"},dI={class:"widget-user-desc fs-14"},cI={class:"card-footer p-0"},uI={class:"nav flex-column"},mI={class:"nav-item"},hI={class:"nav-link text-dark"},pI={class:"float-end"},_I={class:"nav-item"},fI={class:"nav-link text-dark"},gI={class:"float-end"};function vI(e,t,a,r,n,o){const m=v("faveo-image-element"),p=v("router-link"),g=H("tooltip");return i(),d("div",oI,[s("div",iI,[s("div",lI,[u(m,{id:"org_man","source-url":a.manager.profile_pic,classes:["img-circle elevation-2"],"alternative-text":"User Avatar"},null,8,["source-url"])]),P((i(),A(p,{to:"/agent/"+a.manager.id+"/edit",class:"float-end"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"fas fa-edit"},null,-1)])),_:1},8,["to"])),[[g,e.trans("edit")]]),P((i(),d("h3",rI,[L(h(o.subString(a.manager.full_name)),1)])),[[g,a.manager.full_name]]),s("h5",dI,h(e.trans("department_manager")),1)]),s("div",cI,[s("ul",uI,[s("li",mI,[s("a",hI,[L(h(e.trans("email"))+" ",1),P((i(),d("span",pI,[L(h(a.manager.email?o.subString(a.manager.email):"--"),1)])),[[g,a.manager.email]])])]),s("li",_I,[s("a",fI,[L(h(e.trans("phone"))+" ",1),P((i(),d("span",gI,[L(h(a.manager.phone_number?o.subString(a.manager.phone_number):"--"),1)])),[[g,a.manager.phone_number]])])])])])])}const bI=x(nI,[["render",vI],["__scopeId","data-v-6320b63a"]]);const yI={name:"dept-members",description:"Department members list",props:{id:{type:[String,Number],default:""},disableLoader:{type:Boolean,default:!1}},data(){return{columns:["name","email","info","action"],options:{},apiUrl:"/api/admin/get-users-list?dept-ids[]="+this.id,loading:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),email:this.trans("email"),info:this.trans("account_info"),action:this.trans("actions")},columnsClasses:{name:"dept-member-name",email:"dept-member-email",info:"dept-member-status",action:"dept-member-action"},texts:{filter:"",limit:""},templates:{name:function(t,a){return e.h("a",{href:e.basePath()+"/panel/agent/"+a.id,target:"_blank"},a.name)},email(t,a){return a.email?a.email:"--"},info:function(t,a){return e.h(an,{data:a})},action:function(t,a){let r=e.h("i",{class:"fas fa-eye"});return e.h("a",{target:"_blank",href:e.basePath()+"/panel/agent/"+a.id,class:"btn btn-light table_btn"},[r])}},sortable:["name","email"],filterable:["name","email"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.users,count:t.data.total}},orderBy:{column:"id",ascending:!0}}},methods:{handelLoader(e){this.loading=e}}},kI={id:"dept_members"},wI={class:"card card-light"},CI={class:"card-header"},DI={class:"card-title"},SI={key:0,class:"card-tools"},MI={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},FI={class:"card-body"};function $I(e,t,a,r,n,o){const m=v("data-table"),p=H("tooltip");return i(),d("div",kI,[s("div",wI,[s("div",CI,[s("h3",DI,h(e.trans("list_of_department_members")),1),n.loading?(i(),d("div",SI,[P((i(),d("button",MI,t[0]||(t[0]=[s("i",{class:"fas fa-sync-alt"},null,-1)]))),[[p,e.lang("refresh")]])])):f("",!0)]),s("div",FI,[u(m,{url:n.apiUrl,dataColumns:n.columns,disableLoader:a.disableLoader,onLoaderState:o.handelLoader,option:n.options,scroll_to:"dept_members"},null,8,["url","dataColumns","disableLoader","onLoaderState","option"])])])])}const TI=x(yI,[["render",$I],["__scopeId","data-v-2302f12a"]]);const EI={name:"dept-tickets",description:"Department tickets page",props:{id:{type:[String,Number],default:""},name:{type:String,default:"Department"},disableLoader:{type:Boolean,default:!1}},data(){return{category:"",status_type:"",tabs:[],loading:!0,hasDataPopulated:!1,ticketId:[],statusList:"",showModal:!1,showMergeModal:!1,showAssignModal:!1,parent_tickets:[],change_status:"",role_to:"",componentTitle:"DeptTickets",apiUrl:"",statusDiv:0,statusLoader:!1,allEntries:[]}},beforeMount(){this.category="open",this.getCount()},methods:{subString(e,t=15){return Yt(e,t)},getStatusList(){if(this.statusList="",this.ticketId.length>0){this.statusLoader=!0;let e={meta:!0,supplements:Mi(this.ticketId),limit:"all"};V.get("/api/dependency/statuses",{params:e}).then(t=>{this.statusLoader=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.statusLoader=!1})}else this.statusDiv+=1,alert(this.lang("please_select_tickets"))},getStatus(e){this.ticketId.length>0?(this.showModal=!0,this.change_status=e,this.statusIds=this.tic_statuses):(alert(this.lang("please_select_tickets")),this.showModal=!1)},mergeTicket(){this.ticketId.length>1?(this.showMergeModal=!0,V.get("/api/agent/tickets/get-merge-tickets",{params:{"ticket-ids":this.ticketId}}).then(e=>{this.parent_tickets=e.data.data;for(var t in this.parent_tickets)this.parent_tickets[t].id=this.parent_tickets[t].ticket_id,this.parent_tickets[t].subject=this.parent_tickets[t].name,this.parent_tickets[t].name=this.parent_tickets[t].title,delete this.parent_tickets[t].ticket_id,delete this.parent_tickets[t].title}),this.parent_tickets=[]):(this.showMergeModal=!1,alert(this.lang("please_select_more_tickets")))},tickets(e){this.category=e.id,this.apiUrl=e.url},onClose(){this.showModal=!1,this.showMergeModal=!1,this.showAssignModal=!1,this.getCount(),this.$store.dispatch("unsetValidationError")},ticketsData(e){this.ticketId=e},allData(e){this.allEntries=e},getCount(){let e,t="api/agent/ticket-count?";e="dept-ids[]="+this.id,t+=e,V.get(t).then(a=>{this.statusDiv+=1,this.hasDataPopulated=!0,this.loading=!1,this.tabs=[];for(var r in a.data.data)if(a.data.data.hasOwnProperty(r)){let n={id:r,title:r,count:a.data.data[r]};switch(n.title){case"open":n.url="api/agent/ticket-list?category=inbox&"+e;break;case"closed":n.url="api/agent/ticket-list?category=closed&"+e;break;case"deleted":n.url="api/agent/ticket-list?category=deleted&"+e;break;case"unapproved":n.url="api/agent/ticket-list?category=unapproved&"+e;break}this.tabs.push(n)}this.tickets(this.tabs[0])}).catch(a=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatus(e){this.showModal=!0,this.change_status=e},handelLoader(e){this.loading=e}},components:{"dept-tickets-table":vi,"change-status-modal":bi,"merge-ticket-modal":yi,"assign-ticket-modal":ki}},LI={id:"dept-tickets-table"},AI={class:"row"},II={class:"col-md-12"},PI={class:"card card-light"},OI={class:"card-header"},qI={class:"card-title"},xI={key:0,class:"card-tools"},VI={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},NI={class:"card-body"},RI={key:0,class:"nav-tabs-custom"},UI={class:"nav nav-tabs"},jI={class:"nav-item"},BI=["onClick"],YI={class:"badge text-bg-primary"},HI={class:"tab-content"},WI={class:"active tab-pane",id:"activity"},zI={class:"mt-3"},GI={key:0,class:"dropdown-menu status-list"},KI={key:0,class:"row"},JI=["onClick"],ZI={key:1,class:"dropdown-item",href:"javascript:;"},QI={id:"my_tic"};function XI(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("dept-tickets-table"),b=v("change-status-modal"),w=v("merge-ticket-modal"),S=v("assign-ticket-modal"),C=H("tooltip");return i(),d("div",LI,[s("div",AI,[s("div",II,[u(m,{componentName:"DeptTickets"})])]),s("div",PI,[s("div",OI,[s("h3",qI,h(e.lang("tickets_of"))+" "+h(o.subString(a.name,100)),1),n.loading?(i(),d("div",xI,[P((i(),d("button",VI,t[3]||(t[3]=[s("i",{class:"fas fa-sync-alt"},null,-1)]))),[[C,e.lang("refresh")]])])):f("",!0)]),s("div",NI,[n.hasDataPopulated?(i(),d("div",RI,[s("ul",UI,[(i(!0),d(B,null,re(n.tabs,M=>(i(),d("li",jI,[s("a",{class:G(["nav-link",{active:n.category===M.id}]),href:"javascript:;","data-bs-toggle":"pill",role:"tab",onClick:D=>o.tickets(M),id:"tickets_tab"},[L(h(e.lang(M.title))+" ",1),s("span",YI,h(M.count),1)],10,BI)]))),256))]),s("div",HI,[s("div",WI,[s("div",zI,[s("button",{type:"button",onClick:t[0]||(t[0]=M=>o.mergeTicket()),class:"btn btn-sm btn-light",id:"merge_ticket"},[t[4]||(t[4]=s("i",{class:"fas fa-code-branch"},null,-1)),L(" "+h(e.lang("merge")),1)]),(i(),d("div",{class:"btn-group",key:n.statusDiv},[P((i(),d("button",{type:"button",class:"btn btn-sm btn-light dropdown-toggle","data-bs-toggle":"dropdown",onClick:t[1]||(t[1]=M=>o.getStatusList()),id:"status"},[t[5]||(t[5]=s("i",{class:"fas fa-exchange-alt"},null,-1)),L(" "+h(e.lang("change_status")),1)])),[[C,e.lang("change_status")]]),n.ticketId.length>0?(i(),d("div",GI,[n.statusLoader?(i(),d("div",KI,[u(p,{"animation-duration":4e3,color:"#1d78ff",size:30})])):f("",!0),n.statusLoader?f("",!0):(i(),d(B,{key:1},[n.statusList&&n.statusList.length>0?(i(!0),d(B,{key:0},re(n.statusList,M=>(i(),d("a",{class:"dropdown-item",onClick:D=>o.getStatus(M),href:"javascript:;",id:"change_status"},[s("i",{class:G(M.icon),style:bt({color:M.icon_color})},null,6),L("  "+h(M.name),1)],8,JI))),256)):f("",!0),n.statusList&&n.statusList.length===0?(i(),d("a",ZI,h(e.lang("no-records")),1)):f("",!0)],64))])):f("",!0)])),n.ticketId.length>0?(i(),d("button",{key:0,type:"button",onClick:t[2]||(t[2]=M=>n.showAssignModal=!0),class:"btn btn-sm btn-light",id:"assign_ticket"},[t[6]||(t[6]=s("i",{class:"far fa-hand-point-right"},null,-1)),L(" "+h(e.lang("assign")),1)])):f("",!0)]),s("div",QI,[(i(),A(g,{category:n.category,id:a.id,tickets:o.ticketsData,key:n.category,apiUrl:n.apiUrl,componentTitle:n.componentTitle,scroll_to:"dept-tickets-table",isCalledFromAdmin:!0,disableLoader:a.disableLoader,allTickets:o.allData,onLoaderValue:o.handelLoader},null,8,["category","id","tickets","apiUrl","componentTitle","disableLoader","allTickets","onLoaderValue"]))])])])])):f("",!0),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(b,{key:0,onClose:o.onClose,showModal:n.showModal,statusIds:e.statusIds,ticketIds:n.ticketId,status:n.change_status,componentTitle:n.componentTitle},null,8,["onClose","showModal","statusIds","ticketIds","status","componentTitle"])):f("",!0)]),_:1}),u(Ae,{name:"modal"},{default:T(()=>[n.showMergeModal?(i(),A(w,{key:0,onClose:o.onClose,showModal:n.showMergeModal,parent_tickets:n.parent_tickets,ticketIds:n.ticketId,componentTitle:n.componentTitle},null,8,["onClose","showModal","parent_tickets","ticketIds","componentTitle"])):f("",!0)]),_:1}),u(Ae,{name:"modal"},{default:T(()=>[n.showAssignModal?(i(),A(S,{key:0,onClose:o.onClose,showModal:n.showAssignModal,ticketIds:n.ticketId,componentTitle:n.componentTitle,tickets:n.allEntries},null,8,["onClose","showModal","ticketIds","componentTitle","tickets"])):f("",!0)]),_:1})])])])}const eP=x(EI,[["render",XI],["__scopeId","data-v-ef19d8a1"]]);const tP={name:"department-report",description:"Department report page",props:{id:{type:[String,Number],default:""}},data(){return{chartData:"",updated_at:"",date:"",apiUrl:"/api/ticket-chart-report",loading:!0,timeOptions:{start:"00:00",step:"00:30",end:"23:30"}}},computed:{isMobile(){return window.innerWidth<=800&&window.innerHeight<=600}},beforeMount(){this.getChartData()},created(){window.emitter.on("refreshOrgReport",this.getChartData)},methods:{onChange(e,t){let a=e.filter(n=>n),r="";a.length&&(r="date::"+a.map(n=>Ie(n).format("YYYY-MM-DD HH:mm:ss")).join("~")),this.updated_at=r,e&&this.getChartData()},getChartData(){this.loading=!0,V.get(this.apiUrl,{params:{"dept-ids[]":this.id,"updated-at":this.updated_at}}).then(e=>{this.chartData=e.data.data,this.showChart(this.chartData)}).catch(e=>{this.loading=!1})},showChart(e){this.loading=!1;var t=e.datasets.map(o=>(o={label:o.label,tension:.5,fill:!1,borderColor:o.border_color,pointBackgroundColor:o.point_background_color,backgroundColor:o.background_color,data:o.data},o));let r=t.map(o=>o.data).map(function(o){return Math.max.apply(Math,o)}),n=Math.max.apply(null,r)<10?1:"";this.$nextTick(()=>{var o=document.getElementById("trafficBar").getContext("2d"),m={type:"line",data:{labels:e.labels,datasets:t},options:{responsive:!0,maintainAspectRatio:!this.isMobile,plugins:{legend:{position:"bottom",display:!0},datalabels:{color:"#000",anchor:"end",clamp:!0,align:"bottom",formatter:function(p,g){return""},display:function(p){return!1}}},scales:{y:{min:0,ticks:{precision:0,stepSize:n}}}}};new wi(o,m)})}},components:{"date-time-field":Dt}},aP={class:"card card-light"},sP={class:"card-header"},nP={class:"card-title"},oP={key:0,class:"card-tools"},iP={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},lP={class:"card-body"},rP={class:"row"},dP={class:"row"},cP={key:0,class:"col-md-12 col-sm-12 col-12"};function uP(e,t,a,r,n,o){const m=v("alert"),p=v("date-time-field"),g=H("tooltip");return i(),d("div",null,[u(m,{componentName:"DeptReport"}),s("div",aP,[s("div",sP,[P((i(),d("h3",nP,[L(h(e.trans("report")),1)])),[[g,e.trans("report")]]),n.loading?(i(),d("div",oP,[P((i(),d("button",iP,t[0]||(t[0]=[s("i",{class:"fas fa-sync-alt"},null,-1)]))),[[g,e.lang("refresh")]])])):f("",!0)]),s("div",lP,[s("div",rP,[u(p,{label:e.trans("select_date_range"),value:n.date,type:"date",name:"date",required:!1,onChange:o.onChange,range:"",currentYearDate:!1,place:e.trans("select_date_range"),format:"YYYY-MM-DD",classname:"col-md-6 col-sm-12 col-12",confirm:!0,clearable:!0,editable:!0,disabled:!1,after:new Date},null,8,["label","value","onChange","place","after"])]),s("div",dP,[n.loading?f("",!0):(i(),d("div",cP,t[1]||(t[1]=[s("canvas",{id:"trafficBar"},null,-1)]))),t[2]||(t[2]=s("hr",{class:"visible-xs-block"},null,-1))])])])])}const mP=x(tP,[["render",uP],["__scopeId","data-v-b1bc827c"]]),hP={name:"department-view",description:"Department view page",data(){return{deptId:"",deptData:"",dept_managers:[],loading:!0}},beforeMount(){const e=window.location.pathname;this.deptId=Ue(e),this.getDeptData(this.deptId)},methods:{getDeptData(e){V.get("/api/admin/department-profile/"+e).then(t=>{this.deptData=t.data.data,this.dept_managers=t.data.data.managers,this.loading=!1}).catch(t=>{this.loading=!1})}},components:{"dept-details":sI,"dept-managers":bI,"dept-members":TI,"dept-tickets":eP,"dept-report":mP}},pP={class:"col-sm-12"},_P={class:"row"},fP={key:0,class:"col-sm-12"},gP={class:"col-sm-4"},vP={class:"col-sm-8"};function bP(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("dept-details"),g=v("dept-managers"),b=v("dept-members"),w=v("dept-tickets"),S=v("dept-report");return i(),d("div",pP,[s("div",_P,[n.loading?(i(),d("div",fP,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:50})])):f("",!0),n.loading?f("",!0):(i(),d(B,{key:1},[s("div",gP,[u(p,{deptData:n.deptData},null,8,["deptData"]),n.dept_managers.length>0?(i(!0),d(B,{key:0},re(n.dept_managers,(C,M)=>(i(),A(g,{manager:C,key:C.id},null,8,["manager"]))),128)):f("",!0)]),s("div",vP,[u(b,{disableLoader:"true",id:n.deptId},null,8,["id"]),u(w,{disableLoader:"true",id:n.deptId,name:n.deptData.name},null,8,["id","name"]),u(S,{id:n.deptId},null,8,["id"])])],64))])])}const yP=x(hP,[["render",bP]]);const kP={name:"teams-index",description:"Teams table component",data(){return{columns:["name","team_size","status","lead","actions"],options:{},apiUrl:"/api/admin/team-list"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},headings:{name:this.trans("name"),team_size:this.trans("team_size"),status:this.trans("status"),lead:this.trans("lead"),actions:this.trans("actions")},columnsClasses:{name:"team-name",team_size:"team-size",status:"team-status",lead:"team-lead",actions:"team-actions"},templates:{actions:function(t,a){return e.h(Ye,{data:a})},lead:function(t,a){return a.lead?e.h("a",{href:e.basePath()+"/panel/user/"+a.lead.id,target:"_blank"},a.lead.full_name):"--"},status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.status?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])}},sortable:["name","team_size","status"],filterable:["name","team_size","status","lead"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query,page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/team/"+a.id+"/edit",a.status&&(a.view_url="/team/"+a.id),a.delete_url=e.basePath()+"/api/admin/delete-team/"+a.id,a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}}},wP={class:"col-sm-12",id:"teams-table"},CP={class:"card card-light"},DP={class:"card-header"},SP={class:"card-title"},MP={class:"card-tools"},FP={class:"card-body",id:"my_teamss"};function $P(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",wP,[u(m,{componentName:"dataTableModal"}),s("div",CP,[s("div",DP,[s("h3",SP,h(e.trans("list_of_teams")),1),s("div",MP,[P((i(),A(p,{class:"btn btn-tool",to:"/team/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,{content:e.trans("create_a_team"),placement:"left"}]])])]),s("div",FP,[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"teams-table"},null,8,["url","dataColumns","option"])])])])}const TP=x(kP,[["render",$P]]);function EP(e){const{name:t}=e;let a={name:[t,"isRequired",{"max(30)":N("name_should_be_less_than_30_characters")}]};const r=new Le(N),{errors:n,isValid:o}=r.validate(a);return Ee.dispatch("setValidationError",n),{errors:n,isValid:o}}const LP={name:"team-create-edit",description:"Team create and edit page",data(){return{name:"",lead:"",status:1,departments:[],admin_notes:"",loading:!1,hasDataPopulated:!0,radioOptions:[{name:"Active",value:1},{name:"Inactive",value:0}],title:"create_a_team",iconClass:"fas fa-save",btnName:"save",team_id:"",teamData:{},lead_api:"/api/dependency/team-qualifiable-leads"}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=Ue(e);e.indexOf("edit")>=0?(this.title="edit_a_team",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t),this.lead_api="/api/dependency/team-qualifiable-leads?supplements="+t):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,V.get("/api/admin/edit-team/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.team_id=e,this.teamData=t.data.data.team,this.updateStatesWithData(this.teamData)}).catch(t=>{this.loading=!1,U(t)})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=EP(this.$data);return t},onSubmit(){if(this.isValid()){this.loading=!0;const e={};this.team_id!=""&&(e.id=parseInt(this.team_id)),this.departments.length?e.department_ids=this.departments.map(t=>t.id):e.department_ids=[],e.name=this.name,e.admin_notes=this.admin_notes,e.team_lead_id=this.lead?this.lead.id:"",e.status=this.status,V.post("/api/admin/create-update-team",e).then(t=>{this.loading=!1,K(t,"teams"),this.team_id?this.getInitialValues(this.team_id):setTimeout(()=>{let a=t.data.data.id;return this.$router.push("/team/"+a)},3e3)}).catch(t=>{this.loading=!1,U(t,"teams")})}},onChange(e,t){this[t]=e}},components:{TextField:we,DynamicSelect:Be,RadioButton:Qe}},AP={class:"col-sm-12"},IP={key:0,class:"row"},PP={key:1,class:"card card-light"},OP={class:"card-header"},qP={class:"card-title"},xP={key:0,class:"card-tools"},VP={class:"card-body"},NP={class:"row"},RP={class:"row"},UP={class:"card-footer"},jP=["disabled"];function BP(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("router-link"),b=v("text-field"),w=v("dynamic-select"),S=v("radio-button"),C=v("tiny-editor"),M=H("tooltip"),D=H("focus-first-input");return i(),d("div",AP,[!n.hasDataPopulated||n.loading?(i(),d("div",IP,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"teams"}),n.hasDataPopulated?(i(),d("div",PP,[s("div",OP,[s("h3",qP,h(e.trans(n.title)),1),n.teamData&&n.teamData.status?(i(),d("div",xP,[P((i(),A(g,{class:"btn-tool",to:"/team/"+n.team_id},{default:T(()=>t[1]||(t[1]=[s("i",{class:"fas fa-eye"},null,-1)])),_:1},8,["to"])),[[M,e.trans("view")]])])):f("",!0)]),s("div",VP,[P((i(),d("div",NP,[u(b,{label:"Name",value:n.name,type:"text",name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["value","onChange","placehold"]),u(w,{label:e.trans("team_lead"),multiple:!1,name:"lead",prePopulate:!0,hint:e.trans("team-lead-hint"),classname:"col-sm-6",apiEndpoint:n.lead_api,value:n.lead,onChange:o.onChange,required:!1,strlength:45},null,8,["label","hint","apiEndpoint","value","onChange"])])),[[D]]),s("div",RP,[u(w,{label:e.trans("departments"),multiple:!0,name:"departments",classname:"col-sm-6",apiEndpoint:"/api/dependency/departments",value:n.departments,onChange:o.onChange,required:!1,strlength:45},null,8,["label","value","onChange"]),u(S,{options:n.radioOptions,label:e.trans("status"),name:"status",value:n.status,onChange:o.onChange,classname:"form-group col-sm-4",hint:e.trans("team-status-hint")},null,8,["options","label","value","onChange","hint"])]),s("div",null,[u(C,{value:n.admin_notes,onChange:o.onChange,name:"admin_notes",label:e.trans("admin_notes"),width:"100%",required:!1,id:"team-edit-editor",lang:"en",hint:e.trans("team-notes-hint")},null,8,["value","onChange","label","hint"])])]),s("div",UP,[s("button",{type:"button",onClick:t[0]||(t[0]=(...F)=>o.onSubmit&&o.onSubmit(...F)),disabled:n.loading,class:"btn btn-primary"},[s("span",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)],8,jP)])])):f("",!0)])}const Bo=x(LP,[["render",BP]]),YP={name:"team-details",description:"Team details  page",props:{teamData:{type:Object,default:()=>{}}},methods:{subString(e,t=20){return Yt(e,t)}}},HP={class:"card card-light card-outline"},WP={class:"card-body box-profile"},zP={class:"text-center"},GP={class:"profile-username text-center"},KP={class:"text-muted text-center"},JP={class:"list-group list-group-unbordered mb-3"},ZP={class:"list-group-item"},QP={key:0,class:"float-end"},XP=["href"],eO={class:"list-group-item"},tO={class:"float-end badge text-bg-info text-white"},aO={class:"list-group-item"},sO={class:"list-group-item"},nO={key:0,class:"float-end"},oO={key:0},iO={class:"d-grid"};function lO(e,t,a,r,n,o){const m=v("faveo-image-element"),p=v("router-link"),g=H("tooltip");return i(),d("div",HP,[s("div",WP,[s("div",zP,[u(m,{id:"teamimg","source-url":e.basePathVersion()+"/themes/default/admin/images/team.jpg",classes:["profile-user-img img-fluid img-rounder img-circle"],"alternative-text":"Team Image"},null,8,["source-url"])]),P((i(),d("h3",GP,[L(h(o.subString(a.teamData.name)),1)])),[[g,a.teamData.name]]),s("p",KP,h(e.trans("team")),1),s("ul",JP,[s("li",ZP,[s("b",null,h(e.trans("teamlead_name")),1),a.teamData.lead?P((i(),d("a",{key:1,class:"float-end",target:"_blank",href:e.basePath()+"/panel/user/"+a.teamData.lead.id},[L(h(o.subString(a.teamData.lead.full_name,13)),1)],8,XP)),[[g,a.teamData.lead.full_name]]):(i(),d("a",QP,"--"))]),s("li",eO,[s("b",null,h(e.trans("team_size")),1),t[0]||(t[0]=L()),s("a",tO,h(a.teamData.team_size),1)]),s("li",aO,[s("b",null,h(e.trans("status")),1),t[1]||(t[1]=L()),s("a",{class:G(["float-end",[a.teamData.status=="Active"?"text-success":"text-danger"]])},h(a.teamData.status),3)]),s("li",sO,[s("div",null,[s("b",null,h(e.trans("departments")),1),t[2]||(t[2]=L("      ")),a.teamData.departments.length?(i(!0),d(B,{key:1},re(a.teamData.departments,(b,w)=>P((i(),A(p,{to:"/department/"+b.id,class:"float-end"},{default:T(()=>[L(h(o.subString(b.name)),1),w!=Object.keys(a.teamData.departments).length-1?(i(),d("span",oO,", ")):f("",!0)]),_:2},1032,["to"])),[[g,b.name]])),256)):(i(),d("a",nO,"--"))])])]),s("div",iO,[u(p,{to:"/team/"+a.teamData.id+"/edit",class:"btn btn-primary btn-block"},{default:T(()=>[s("b",null,[t[3]||(t[3]=s("i",{class:"fas fa-edit"},null,-1)),L(" "+h(e.trans("edit")),1)])]),_:1},8,["to"])])])])}const rO=x(YP,[["render",lO]]);const dO={name:"team-members",description:"Team memebers list",props:{id:{type:[String,Number],default:""},disableLoader:{type:Boolean,default:!1}},data(){return{columns:["name","email","info","action"],options:{},apiUrl:"/api/admin/get-users-list?team-ids[]="+this.id,loading:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),email:this.trans("email"),info:this.trans("account_info"),action:this.trans("actions")},columnsClasses:{name:"team-member-name",email:"team-member-email",info:"team-member-status",action:"team-member-action"},texts:{filter:"",limit:""},templates:{name:function(t,a){return e.h("a",{target:"_blank",href:e.basePath()+"/panel/user/"+a.id},a.name)},email(t,a){return a.email?a.email:"--"},info:function(t,a){return e.h(an,{data:a})},action:function(t,a){let r=e.h("i",{class:"fas fa-eye"});return e.h("a",{target:"_blank",href:e.basePath()+"/panel/user/"+a.id,class:"btn btn-light table_btn"},[r])}},sortable:["name","email"],filterable:["name","email"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.users,count:t.data.total}},orderBy:{column:"id",ascending:!0}}},methods:{handelLoader(e){this.loading=e}}},cO={id:"team_members"},uO={class:"card card-light"},mO={class:"card-header"},hO={class:"card-title"},pO={key:0,class:"card-tools"},_O={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},fO={class:"card-body"};function gO(e,t,a,r,n,o){const m=v("data-table"),p=H("tooltip");return i(),d("div",cO,[s("div",uO,[s("div",mO,[s("h3",hO,h(e.trans("list_of_team_members")),1),n.loading?(i(),d("div",pO,[P((i(),d("button",_O,t[0]||(t[0]=[s("i",{class:"fas fa-sync-alt"},null,-1)]))),[[p,e.lang("refresh")]])])):f("",!0)]),s("div",fO,[u(m,{url:n.apiUrl,dataColumns:n.columns,onLoaderState:o.handelLoader,option:n.options,disableLoader:a.disableLoader,scroll_to:"team_members"},null,8,["url","dataColumns","onLoaderState","option","disableLoader"])])])])}const vO=x(dO,[["render",gO],["__scopeId","data-v-b52c3dcc"]]);const bO={name:"team-tickets",description:"Team tickets page",props:{id:{type:[String,Number],default:""},name:{type:String,default:"Team"},disableLoader:{type:Boolean,default:!1}},data(){return{category:"",status_type:"",tabs:[],loading:!0,hasDataPopulated:!1,ticketId:[],statusList:"",showModal:!1,showMergeModal:!1,showAssignModal:!1,parent_tickets:[],change_status:"",role_to:"",componentTitle:"TeamTickets",apiUrl:"",statusDiv:0,statusLoader:!1,allEntries:[]}},beforeMount(){this.category="open",this.getCount()},methods:{subString(e,t=15){return Yt(e,t)},getStatusList(){if(this.statusList="",this.ticketId.length>0){this.statusLoader=!0;let e={meta:!0,supplements:Mi(this.ticketId),limit:"all"};V.get("/api/dependency/statuses",{params:e}).then(t=>{this.statusLoader=!1,this.statusList=t.data.data.statuses}).catch(t=>{this.statusLoader=!1})}else this.statusDiv+=1,alert(this.lang("please_select_tickets"))},getStatus(e){this.ticketId.length>0?(this.showModal=!0,this.change_status=e,this.statusIds=this.tic_statuses):(alert("Please select tickets."),this.showModal=!1)},mergeTicket(){this.ticketId.length>1?(this.showMergeModal=!0,V.get("/api/agent/tickets/get-merge-tickets",{params:{"ticket-ids":this.ticketId}}).then(e=>{this.parent_tickets=e.data.data;for(var t in this.parent_tickets)this.parent_tickets[t].id=this.parent_tickets[t].ticket_id,this.parent_tickets[t].subject=this.parent_tickets[t].name,this.parent_tickets[t].name=this.parent_tickets[t].title,delete this.parent_tickets[t].ticket_id,delete this.parent_tickets[t].title}),this.parent_tickets=[]):(this.showMergeModal=!1,alert(this.lang("please_select_more_tickets")))},tickets(e){this.category=e.id,this.apiUrl=e.url},onClose(){this.showModal=!1,this.showMergeModal=!1,this.showAssignModal=!1,this.getCount(),this.$store.dispatch("unsetValidationError")},ticketsData(e){this.ticketId=e},allData(e){this.allEntries=e},getCount(){let e,t="api/agent/ticket-count?";e="team-ids[]="+this.id,t+=e,V.get(t).then(a=>{this.statusDiv+=1,this.hasDataPopulated=!0,this.loading=!1,this.tabs=[];for(var r in a.data.data)if(a.data.data.hasOwnProperty(r)){let n={id:r,title:r,count:a.data.data[r]};switch(n.title){case"open":n.url="api/agent/ticket-list?category=inbox&"+e;break;case"closed":n.url="api/agent/ticket-list?category=closed&"+e;break;case"deleted":n.url="api/agent/ticket-list?category=deleted&"+e;break;case"unapproved":n.url="api/agent/ticket-list?category=unapproved&"+e;break}this.tabs.push(n)}this.tickets(this.tabs[0])}).catch(a=>{this.hasDataPopulated=!0,this.loading=!1})},updateStatus(e){this.showModal=!0,this.change_status=e},handelLoader(e){this.loading=e}},components:{"team-tickets-table":vi,"change-status-modal":bi,"merge-ticket-modal":yi,"assign-ticket-modal":ki}},yO={id:"team-tickets-table"},kO={class:"row"},wO={class:"col-md-12"},CO={class:"card card-light"},DO={class:"card-header"},SO={class:"card-title"},MO={key:0,class:"card-tools"},FO={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},$O={class:"card-body"},TO={key:0,class:"nav-tabs-custom"},EO={class:"nav nav-tabs"},LO={class:"nav-item"},AO=["onClick"],IO={class:"badge text-bg-primary"},PO={class:"tab-content"},OO={class:"active tab-pane",id:"activity"},qO={class:"mt-3"},xO={key:0,class:"dropdown-menu status-list"},VO={key:0,class:"row"},NO=["onClick"],RO={key:1,class:"dropdown-item",href:"javascript:;"},UO={id:"my_tic"};function jO(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("team-tickets-table"),b=v("change-status-modal"),w=v("merge-ticket-modal"),S=v("assign-ticket-modal"),C=H("tooltip");return i(),d("div",yO,[s("div",kO,[s("div",wO,[u(m,{componentName:"TeamTickets"})])]),s("div",CO,[s("div",DO,[s("h3",SO,h(e.lang("tickets_of"))+" "+h(o.subString(a.name,40)),1),n.loading?(i(),d("div",MO,[P((i(),d("button",FO,t[3]||(t[3]=[s("i",{class:"fas fa-sync-alt"},null,-1)]))),[[C,e.lang("refresh")]])])):f("",!0)]),s("div",$O,[n.hasDataPopulated?(i(),d("div",TO,[s("ul",EO,[(i(!0),d(B,null,re(n.tabs,M=>(i(),d("li",LO,[s("a",{class:G(["nav-link",{active:n.category===M.id}]),href:"javascript:;","data-bs-toggle":"pill",role:"tab",onClick:D=>o.tickets(M),id:"tickets_tab"},[L(h(e.lang(M.title))+" ",1),s("span",IO,h(M.count),1)],10,AO)]))),256))]),s("div",PO,[s("div",OO,[s("div",qO,[s("button",{type:"button",onClick:t[0]||(t[0]=M=>o.mergeTicket()),class:"btn btn-sm btn-light",id:"merge_ticket"},[t[4]||(t[4]=s("i",{class:"fas fa-code-branch"},null,-1)),L(" "+h(e.lang("merge")),1)]),(i(),d("div",{class:"btn-group",key:n.statusDiv},[P((i(),d("button",{type:"button",class:"btn btn-sm btn-light dropdown-toggle","data-bs-toggle":"dropdown",onClick:t[1]||(t[1]=M=>o.getStatusList()),id:"status"},[t[5]||(t[5]=s("i",{class:"fas fa-exchange-alt"},null,-1)),L(" "+h(e.lang("change_status")),1)])),[[C,e.lang("change_status")]]),n.ticketId.length>0?(i(),d("div",xO,[n.statusLoader?(i(),d("div",VO,[u(p,{"animation-duration":4e3,color:"#1d78ff",size:30})])):f("",!0),n.statusLoader?f("",!0):(i(),d(B,{key:1},[n.statusList&&n.statusList.length>0?(i(!0),d(B,{key:0},re(n.statusList,M=>(i(),d("a",{class:"dropdown-item",onClick:D=>o.getStatus(M),href:"javascript:;",id:"change_status"},[s("i",{class:G(M.icon),style:bt({color:M.icon_color})},null,6),L("  "+h(M.name),1)],8,NO))),256)):f("",!0),n.statusList&&n.statusList.length===0?(i(),d("a",RO,h(e.lang("no-records")),1)):f("",!0)],64))])):f("",!0)])),n.ticketId.length>0?(i(),d("button",{key:0,type:"button",onClick:t[2]||(t[2]=M=>n.showAssignModal=!0),class:"btn btn-sm btn-light",id:"assign_ticket"},[t[6]||(t[6]=s("i",{class:"far fa-hand-point-right"},null,-1)),L(" "+h(e.lang("assign")),1)])):f("",!0)]),s("div",UO,[(i(),A(g,{category:n.category,id:a.id,tickets:o.ticketsData,key:n.category,isCalledFromAdmin:!0,apiUrl:n.apiUrl,componentTitle:n.componentTitle,scroll_to:"team-tickets-table",from:"team",disableLoader:a.disableLoader,onLoaderValue:o.handelLoader,allTickets:o.allData},null,8,["category","id","tickets","apiUrl","componentTitle","disableLoader","onLoaderValue","allTickets"]))])])])])):f("",!0),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(b,{key:0,onClose:o.onClose,showModal:n.showModal,statusIds:e.statusIds,ticketIds:n.ticketId,status:n.change_status,componentTitle:n.componentTitle},null,8,["onClose","showModal","statusIds","ticketIds","status","componentTitle"])):f("",!0)]),_:1}),u(Ae,{name:"modal"},{default:T(()=>[n.showMergeModal?(i(),A(w,{key:0,onClose:o.onClose,showModal:n.showMergeModal,parent_tickets:n.parent_tickets,ticketIds:n.ticketId,componentTitle:n.componentTitle},null,8,["onClose","showModal","parent_tickets","ticketIds","componentTitle"])):f("",!0)]),_:1}),u(Ae,{name:"modal"},{default:T(()=>[n.showAssignModal?(i(),A(S,{key:0,onClose:o.onClose,showModal:n.showAssignModal,ticketIds:n.ticketId,componentTitle:n.componentTitle,tickets:n.allEntries},null,8,["onClose","showModal","ticketIds","componentTitle","tickets"])):f("",!0)]),_:1})])])])}const BO=x(bO,[["render",jO],["__scopeId","data-v-bed8acde"]]);const YO={name:"team-report",description:"Team report page",props:{id:{type:[String,Number],default:""},disableLoader:{type:Boolean,default:!1}},data(){return{chartData:"",updated_at:"",date:"",apiUrl:"/api/ticket-chart-report",loading:!0,timeOptions:{start:"00:00",step:"00:30",end:"23:30"}}},computed:{isMobile(){return window.innerWidth<=800&&window.innerHeight<=600}},beforeMount(){this.getChartData()},created(){window.emitter.on("refreshOrgReport",this.getChartData)},methods:{onChange(e,t){let a="date::"+e.map(r=>Ie(r).format("YYYY-MM-DD HH:mm:ss")).join("~");this.updated_at=a,e&&this.getChartData()},getChartData(){this.loading=!0,V.get(this.apiUrl,{params:{"team-ids[]":this.id,"updated-at":this.updated_at}}).then(e=>{this.chartData=e.data.data,this.showChart(this.chartData)}).catch(e=>{this.loading=!1})},showChart(e){this.loading=!1;var t=e.datasets.map(a=>(a={label:a.label,tension:.5,fill:!1,borderColor:a.border_color,pointBackgroundColor:a.point_background_color,backgroundColor:a.background_color,data:a.data},a));this.$nextTick(()=>{var a=document.getElementById("trafficBar").getContext("2d"),r={type:"line",data:{labels:e.labels,datasets:t},options:{responsive:!0,maintainAspectRatio:!this.isMobile,plugins:{legend:{position:"bottom",display:!0},datalabels:{color:"#000",anchor:"end",clamp:!0,align:"bottom",formatter:function(n,o){return""},display:function(n){return!1}}},scales:{y:{min:0,ticks:{precision:0,stepSize:1}}}}};new wi(a,r)})}},components:{"date-time-field":Dt}},HO={class:"card card-light"},WO={class:"card-header"},zO={class:"card-title"},GO={key:0,class:"card-tools"},KO={type:"button",class:"btn btn-tool rotating","data-card-widget":"refresh"},JO={class:"card-body"},ZO={class:"row"},QO={class:"row"},XO={key:0,class:"col-md-12 col-sm-12 col-12"};function e6(e,t,a,r,n,o){const m=v("alert"),p=v("date-time-field"),g=H("tooltip");return i(),d("div",null,[u(m,{componentName:"TeamReport"}),s("div",HO,[s("div",WO,[P((i(),d("h3",zO,[L(h(e.trans("report")),1)])),[[g,e.trans("report")]]),n.loading?(i(),d("div",GO,[P((i(),d("button",KO,t[0]||(t[0]=[s("i",{class:"fas fa-sync-alt"},null,-1)]))),[[g,e.lang("refresh")]])])):f("",!0)]),s("div",JO,[s("div",ZO,[u(p,{place:e.trans("select_date_range"),label:e.trans("select_date_range"),value:n.date,type:"datetime",name:"date",onChange:o.onChange,range:"",required:!1,format:"MMMM DD YYYY, h:mm a",classname:"col-md-8 col-sm-12 col-12",clearable:!1,disabled:!1,editable:!0,currentYearDate:!1,"time-picker-options":n.timeOptions},null,8,["place","label","value","onChange","time-picker-options"])]),s("div",QO,[n.loading?f("",!0):(i(),d("div",XO,t[1]||(t[1]=[s("canvas",{id:"trafficBar"},null,-1)]))),t[2]||(t[2]=s("hr",{class:"visible-xs-block"},null,-1))])])])])}const t6=x(YO,[["render",e6],["__scopeId","data-v-fc676e1c"]]),a6={name:"team-view",description:"Team view page",data(){return{teamId:"",teamData:"",loading:!0}},beforeMount(){const e=window.location.pathname;this.teamId=Ue(e),this.getTeamData(this.teamId)},methods:{getTeamData(e){V.get("/api/admin/team-profile/"+e).then(t=>{this.teamData=t.data.data,this.loading=!1}).catch(t=>{this.loading=!1})}},components:{"team-details":rO,"team-members":vO,"team-tickets":BO,"team-report":t6}},s6={class:"col-sm-12"},n6={class:"row"},o6={key:0,class:"col-sm-12"},i6={class:"col-sm-3"},l6={class:"col-sm-9"};function r6(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("team-details"),g=v("team-members"),b=v("team-tickets"),w=v("team-report");return i(),d("div",s6,[s("div",n6,[n.loading?(i(),d("div",o6,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:50})])):f("",!0),n.loading?f("",!0):(i(),d(B,{key:1},[s("div",i6,[u(p,{teamData:n.teamData},null,8,["teamData"])]),s("div",l6,[u(g,{disableLoader:"true",id:n.teamId},null,8,["id"]),u(b,{disableLoader:"true",id:n.teamId,name:n.teamData.name},null,8,["id","name"]),u(w,{id:n.teamId},null,8,["id"])])],64))])])}const d6=x(a6,[["render",r6]]);const c6={name:"email-exception-modal",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},exception:{type:[String,Object],default:""}},data:()=>({containerStyle:{width:"950px"},content:""}),beforeMount(){this.updateContent()},methods:{updateContent(){this.exception&&this.exception.trace&&(this.content=this.contentParser(this.exception.trace.replaceAll(`<br />\r
`,"")))},contentParser(e){var t=new DOMParser,a=t.parseFromString(e,"text/html");const r=a.getElementsByTagName("body")[0];return r.querySelectorAll("a").forEach(o=>{let p=o.href.replace(this.basePath(),"").split("/").filter(g=>g);if(p[0]=="change-approval"||p[0]=="service-desk"&&p[1]=="contract-approval")o=o;else{const g=a.createElement("a");!o.href.includes("/panel/")&&!o.href.includes("/ticket-conversation/")&&!o.href.includes("/agent/export/download/")&&!o.href.includes("/check-ticket/")?g.setAttribute("href",o.href.replace(this.basePath(),this.basePath()+"/panel")):g.setAttribute("href",o.href),g.innerText=o.innerText,o.parentNode.replaceChild(g,o)}}),r.innerHTML}}},u6={class:"modal-title"},m6={class:"mod_width"},h6={key:0},p6=["innerHTML"];function _6(e,t,a,r,n,o){const m=v("modal");return a.showModal?(i(),A(m,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:T(()=>[s("h4",u6,h(e.trans("exception")),1)]),fields:T(()=>[s("div",m6,[a.exception.message?(i(),d("p",h6,h(a.exception.message),1)):f("",!0),e.content?(i(),d("p",{key:1,innerHTML:e.content,class:"trace"},null,8,p6)):f("",!0)])]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const f6=x(c6,[["render",_6]]),g6={name:"email-status",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},props:{data:{type:Object,default:()=>{}},status:{type:String,default:""}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1}},components:{"email-exception":f6}},v6={class:"email-status"},b6={key:0},y6={key:1};function k6(e,t,a,r,n,o){const m=v("email-exception"),p=H("tooltip");return i(),d("div",v6,[a.data[a.status+"_status"]?(i(),d(B,{key:0},[typeof a.data[a.status+"_status"]=="string"?(i(),d("span",b6,h(e.trans(a.data[a.status+"_status"])),1)):f("",!0),typeof a.data[a.status+"_status"]=="object"?(i(),d(B,{key:1},[P((i(),d("span",{class:G("badge text-bg-"+a.data[a.status+"_status"].class)},[L(h(e.trans(a.data[a.status+"_status"].status)),1)],2)),[[p,r.formattedTime(a.data[a.status+"_status"].updated_at)]]),a.data[a.status+"_status"].exception?(i(),d("i",{key:0,class:"fas fa-question-circle text-primary ms-1 pointer",onClick:t[0]||(t[0]=g=>n.showModal=!0)})):f("",!0)],64)):f("",!0)],64)):(i(),d("span",y6,"--")),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(m,{key:0,onClose:o.onClose,showModal:n.showModal,exception:a.data[a.status+"_status"].exception},null,8,["onClose","showModal","exception"])):f("",!0)]),_:1})])}const Yo=x(g6,[["render",k6]]);const w6={name:"emails-index",description:"Emails lists table component",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},data(){return{columns:["email_address","priority","department","help_topic","incoming_status","outgoing_status","created_at","updated_at","actions"],options:{}}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},columnsClasses:{email_address:"email-address",priority:"email-priority",department:"email-dept",created_at:"email-create",updated_at:"email-update",help_topic:"email-topic",actions:"email-actions"},headings:{incoming_status:()=>{let t=e.h("i",{class:"text-primary fas fa-arrow-circle-down"});return e.h("span",{},[this.lang("incoming-status")+"  ",t])},outgoing_status:()=>{let t=e.h("i",{class:"text-primary fas fa-arrow-circle-up"});return e.h("span",{},[this.lang("outgoing-status")+"  ",t])},email_address:this.trans("email_address"),priority:this.trans("priority"),department:this.trans("department"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),help_topic:this.trans("help_topic"),actions:this.trans("actions")},texts:{filter:"",limit:"",filterPlaceholder:"Search by email address"},templates:{priority(t,a){return a.priority?a.priority.name:"--"},department(t,a){return a.department?a.department.name:"--"},help_topic(t,a){return a.help_topic?a.help_topic.name:"--"},updated_at:function(t,a){return e.formattedTime(a.updated_at)},created_at:function(t,a){return e.formattedTime(a.created_at)},email_address:function(t,a){if(a.is_default){let r=e.h("span",{class:"badge text-bg-warning"},"Default");return e.h(Hs,{to:"/email/"+a.id+"/edit"},[a.email_address+"  ",r])}else return e.h(Hs,{to:"/email/"+a.id+"/edit"},[a.email_address])},incoming_status(t,a){return e.h(Yo,{data:a,status:"incoming"})},outgoing_status(t,a){return e.h(Yo,{data:a,status:"outgoing"})},actions:function(t,a){return e.h(Ye,{data:a})}},sortable:["email_address","priority","department","help_topic","created_at","updated_at"],filterable:["email_address"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.updateMailConfigMsg(t.data.total),{data:t.data.emails.map(a=>(a.edit_url="/email/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/email-delete/"+a.id,a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}},methods:{updateMailConfigMsg(e){window.emitter.emit("checkMailConfig",e)}}},C6={class:"col-sm-12"},D6={class:"card card-light"},S6={class:"card-header"},M6={id:"emails-index",class:"card-title"},F6={class:"card-tools"},$6={class:"card-body",id:"emails_index"};function T6(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",C6,[u(m,{componentName:"dataTableModal"}),s("div",D6,[s("div",S6,[s("h3",M6,h(e.trans("list_of_emails")),1),s("div",F6,[P((i(),A(p,{class:"btn btn-tool",to:"/email/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,{content:e.lang("create_email"),placement:"left"}]])])]),s("div",$6,[u(g,{url:"/api/emails-list",dataColumns:n.columns,option:n.options,scroll_to:"emails-index"},null,8,["dataColumns","option"])])])])}const E6=x(w6,[["render",T6]]);function L6(e){const{email_address:t,email_name:a,password:r,fetching_protocol:n,fetching_host:o,fetching_status:m,fetching_encryption:p,fetching_port:g,sending_protocol:b,sending_status:w,sending_host:S,sending_port:C,sending_encryption:M,api_key:D,secret:F,domain:I,region:R,version:Y,is_oauth:X}=e;let le={email_address:[t,"isRequired","isEmail"],email_name:[a,"isRequired","isAlphaNumeric(false)","max(50)","min(2)"]};m==1&&(le.fetching_protocol=[n,"isRequired"]),w==1&&(le.sending_protocol=[b,"isRequired"]),Nl(e)&&!X&&(le.password=[r,"isRequired","min(3)","max(255)"]),pn(e)&&(le.fetching_host=[o,"isRequired"]),Rl(e)&&(le.fetching_port=[g,"isRequired"]),Ul(e)&&(le.fetching_encryption=[p,"isRequired"]),ps(e)&&(le.sending_host=[S,"isRequired"]),jl(e)&&(le.sending_port=[C,"isRequired"]),Bl(e)&&(le.sending_encryption=[M,"isRequired"]),Yl(e)&&(le.api_key=[D,"isRequired"]),Hl(e)&&(le.secret=[F,"isRequired"]),Wl(e)&&(le.domain=[I,"isRequired"]),zl(e)&&(le.region=[R,"isRequired"]),_n(e)&&(le.version=[Y,"isRequired"]);const ne=new Le(N),{errors:ce,isValid:Q}=ne.validate(le);return Ee.dispatch("setValidationError",ce),{errors:ce,isValid:Q}}function Nl(e){const{fetching_status:t,sending_protocol:a,sending_status:r}=e;return r==1&&(a==="smtp"||a==="ews")||t==1}function pn(e){const{fetching_status:t}=e;return t==1}function Rl(e){if(pn(e)){const{fetching_protocol:t}=e;return t!=="ews"}return!1}function Ul(e){if(pn(e)){const{fetching_protocol:t}=e;return t!=="ews"}return!1}function ps(e){const{sending_status:t,sending_protocol:a}=e;return t==1&&(a=="smtp"||a=="ews")}function jl(e){if(ps(e)){const{sending_protocol:t}=e;return t!=="ews"}return!1}function Bl(e){if(ps(e)){const{sending_protocol:t}=e;return t!=="ews"}return!1}function Yl(e){const{sending_protocol:t}=e;return t==="ses"}function Hl(e){const{sending_protocol:t}=e;return t==="mailgun"||t==="mandrill"||t==="sparkpost"||t==="ses"}function Wl(e){const{sending_protocol:t}=e;return t==="mailgun"}function zl(e){const{sending_protocol:t}=e;return t==="ses"}function _n(e){const{version:t,fetching_protocol:a,sending_protocol:r}=e;return a=="ews"||r=="ews"}function A6(e){const{email_address:t}=e;let a={email_address:[t,"isRequired","isEmail"]};const r=new Le(N),{errors:n,isValid:o}=r.validate(a);return Ee.dispatch("setValidationError",n),{errors:n,isValid:o}}const I6={name:"fetching-protocol",description:"contains fetching protocol form fields for email settings",props:["fetching_protocol","fetching_encryption","fetching_host","fetching_port","fetching_status","onChange","delete_email","version"],data(){return{fetching_protocols:[{id:"imap",name:"IMAP"},{id:"pop3",name:"POP3"},{id:"ews",name:"Exchange Web Services"}],fetching_encryptions:[{id:"none",name:"None"},{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"},{id:"starttls",name:"STARTTLS"}],versions:[{id:"Exchange2007",name:"Microsoft Exchange 2007"},{id:"Exchange2007_SP1",name:"Microsoft Exchange 2007 SP1"},{id:"Exchange2009",name:"Microsoft Exchange 2007 SP2"},{id:"Exchange2010",name:"Microsoft Exchange 2010"},{id:"Exchange2010_SP1",name:"Microsoft Exchange 2010 SP1"},{id:"Exchange2010_SP2",name:"Microsoft Exchange 2010 SP2"},{id:"Exchange2013",name:"Microsoft Exchange 2013"},{id:"Exchange2013_SP1",name:"Microsoft Exchange 2013 SP1"},{id:"Exchange2016",name:"Microsoft Exchange 2016"}],protocalDisable:!1}},created(){window.emitter.on("makeEwsDefault",()=>{this.protocalDisable=!0}),window.emitter.on("makeEwsNotDefault",()=>{this.protocalDisable=!1})},computed:{shallPortBeVisible(){return Rl(this.$props)},shallEncryptionBeVisible(){return Ul(this.$props)},shallVersionBeVisible(){return _n(this.$props)}},components:{"static-select":it,"text-field":we,checkbox:Qt}},P6={class:"row"},O6={class:"fetching-meta-actions"};function q6(e,t,a,r,n,o){const m=v("static-select"),p=v("text-field"),g=v("checkbox");return i(),d("div",{class:G(["protocol",{"protocol-settings":a.fetching_status==1}])},[s("div",P6,[u(m,{label:e.lang("fetching_protocol"),elements:n.fetching_protocols,disabled:n.protocalDisable,name:"fetching_protocol",value:a.fetching_protocol,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","disabled","value","onChange"]),u(p,{label:e.lang("host_name"),value:a.fetching_host,name:"fetching_host",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"]),o.shallPortBeVisible?(i(),A(p,{key:0,id:"fetching-port",label:e.lang("port"),value:a.fetching_port,name:"fetching_port",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),type:"number",required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),o.shallEncryptionBeVisible?(i(),A(m,{key:1,id:"fetching-encryption",label:e.lang("encryption"),elements:n.fetching_encryptions,name:"fetching_encryption",value:a.fetching_encryption,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","value","onChange"])):f("",!0),o.shallVersionBeVisible?(i(),A(m,{key:2,id:"version",label:e.lang("version"),elements:n.versions,name:"version",value:a.version,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","value","onChange"])):f("",!0)]),s("div",O6,[u(g,{id:"delete-email",name:"delete_email",value:a.delete_email,label:e.lang("delete_mail_after_fetch"),onChange:a.onChange,classname:"col-sm-4",hint:e.lang("delete_mail_notes")},null,8,["value","label","onChange","hint"])])],2)}const x6=x(I6,[["render",q6]]);const V6={name:"sending-protocol",description:"contains sending protocol form fields for email settings",props:["onChange","sending_protocol","sending_encryption","sending_host","sending_port","sending_status","api_key","domain","secret","region","version"],data(){return{sending_protocols:[{id:"smtp",name:"SMTP"},{id:"mail",name:"Php mail"},{id:"mailgun",name:"Mailgun"},{id:"mandrill",name:"Mandrill"},{id:"ses",name:"SES"},{id:"sparkpost",name:"Sparkpost"},{id:"ews",name:"Exchange Web Services"}],sending_encryptions:[{id:"none",name:"None"},{id:"ssl",name:"SSL"},{id:"tls",name:"TLS"},{id:"starttls",name:"STARTTLS"}],versions:[{id:"Exchange2007",name:"Microsoft Exchange 2007"},{id:"Exchange2007_SP1",name:"Microsoft Exchange 2007 SP1"},{id:"Exchange2009",name:"Microsoft Exchange 2007 SP2"},{id:"Exchange2010",name:"Microsoft Exchange 2010"},{id:"Exchange2010_SP1",name:"Microsoft Exchange 2010 SP1"},{id:"Exchange2010_SP2",name:"Microsoft Exchange 2010 SP2"},{id:"Exchange2013",name:"Microsoft Exchange 2013"},{id:"Exchange2013_SP1",name:"Microsoft Exchange 2013 SP1"},{id:"Exchange2016",name:"Microsoft Exchange 2016"}],protocalDisable:!1}},created(){window.emitter.on("makeEwsDefault",()=>{this.protocalDisable=!0}),window.emitter.on("makeEwsNotDefault",()=>{this.protocalDisable=!1})},computed:{hasApiKey(){return Yl(this.$props)},hasSecret(){return Hl(this.$props)},hasDomain(){return Wl(this.$props)},hasRegion(){return zl(this.$props)},hasHost(){return ps(this.$props)},shallPortBeVisible(){return jl(this.$props)},shallEncryptionBeVisible(){return Bl(this.$props)},shallVersionBeVisible(){return _n(this.$props)}},components:{"static-select":it,"text-field":we,checkbox:Qt}};function N6(e,t,a,r,n,o){const m=v("static-select"),p=v("text-field");return i(),d("div",{class:G(["row","protocol",{"protocol-settings":a.sending_status==1}])},[u(m,{label:e.lang("transfer_protocol"),elements:n.sending_protocols,disabled:n.protocalDisable,name:"sending_protocol",value:a.sending_protocol,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","disabled","value","onChange"]),o.hasHost?(i(),A(p,{key:0,label:e.lang("host_name"),value:a.sending_host,name:"sending_host",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),o.shallPortBeVisible?(i(),A(p,{key:1,id:"sending-port",label:e.lang("port_number"),value:a.sending_port,name:"sending_port",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),type:"number",required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),o.shallEncryptionBeVisible?(i(),A(m,{key:2,id:"sending-encryption",label:e.lang("encryption"),elements:n.sending_encryptions,name:"sending_encryption",value:a.sending_encryption,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","value","onChange"])):f("",!0),o.shallVersionBeVisible?(i(),A(m,{key:3,id:"version",label:e.lang("version"),elements:n.versions,name:"version",value:a.version,classname:"col-sm-3",onChange:a.onChange,required:!0},null,8,["label","elements","value","onChange"])):f("",!0),o.hasApiKey?(i(),A(p,{key:4,label:e.lang("api_key"),value:a.api_key,name:"api_key",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),o.hasSecret?(i(),A(p,{key:5,label:e.lang("secret"),value:a.secret,name:"secret",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),o.hasDomain?(i(),A(p,{key:6,label:e.lang("domain"),value:a.domain,name:"domain",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0),o.hasRegion?(i(),A(p,{key:7,label:e.lang("region"),value:a.region,name:"region",classname:"col-sm-3",onChange:a.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])):f("",!0)],2)}const R6=x(V6,[["render",N6],["__scopeId","data-v-8e1cc798"]]);const U6={name:"email-settings",description:"email settings page",beforeMount(){this.setMode(),this.getInitialValues();let e=new URLSearchParams(window.location.search);e.get("error")&&this.$store.dispatch("setAlert",{type:"danger",message:e.get("error"),component_name:"email-setting"})},data:()=>({oauth_check:!1,is_oauth:0,radioOptions:[{name:"basic_auth",value:0,disabled:!1},{name:"oauth_auth",value:1,disabled:!1}],id:null,department:"",priority:"",helptopic:"",email_address:"",email_name:"",user_name:"",password:"",fetching_status:!0,fetching_protocol:"",fetching_encryption:"",fetching_host:"",fetching_port:"",sending_status:!0,sending_protocol:"",sending_encryption:"",sending_host:"",sending_port:"",api_key:"",secret:"",region:"",domain:"",version:"",is_system_default:!1,delete_email:!1,inline_as_cids:!1,loading:!0,loadingSpeed:4e3,internal_notes:"",hasDataPopulated:!1,mode:"create",iconClass:"fas fa-save",btnName:"save",emailNameDisabled:!1,userNameDisabled:!1,mailDisabled:!1,providerList:[],oauth_active:!0,security_hash:"",auto_discovery:!0,discoveredData:!1,autoDiscoveryData:""}),methods:{validMail(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email_address)},getData(){if(this.isDiscoverValid()){this.loading=!0;const e={};this.is_oauth&&(e.is_oauth=1),V.get("/show/email/connections/"+this.email_address,{params:e}).then(t=>{var a,r;this.discoveredData=!0,this.loading=!1,this.autoDiscoveryData=t.data.data,this.fetching_encryption=((a=this.autoDiscoveryData.fetching_encryption)==null?void 0:a.toLowerCase())||this.fetching_encryption,this.fetching_host=this.autoDiscoveryData.fetching_host??this.fetching_host,this.fetching_port=this.autoDiscoveryData.fetching_port??this.fetching_port,this.fetching_protocol=this.autoDiscoveryData.fetching_protocol??this.fetching_protocol,this.sending_encryption=((r=this.autoDiscoveryData.sending_encryption)==null?void 0:r.toLowerCase())||this.sending_encryption,this.sending_host=this.autoDiscoveryData.sending_host??this.sending_host,this.sending_port=this.autoDiscoveryData.sending_port??this.sending_port,this.sending_protocol=this.autoDiscoveryData.sending_protocol??this.sending_protocol,this.version=this.autoDiscoveryData.version??this.version}).catch(t=>{this.loading=!1,U(t,"email-setting")})}},getProviders(){this.loading=!0,V.get("/get/oauth-user-providers").then(e=>{this.providerList=e.data.providers,this.oauth_active=e.data.oauth_active,this.radioOptions=[{name:"basic_auth",value:0,disabled:this.security_hash},{name:"oauth_auth",value:1,disabled:!this.oauth_active}],this.loading=!1}).catch(e=>{this.loading=!1,this.providerList=[]})},onMS(e){if(this.email_name&&this.email_address){this.loading=!0;let t={};t.key=e,t.email_id=Ue(window.location.pathname),t.email=this.email_address,t.user_name=this.user_name,t.name=this.email_name,V.post("/api/email/oauth-settings",t).then(a=>{K(a),setTimeout(()=>{location.href=a.data.data.url},2e3),this.loading=!1}).catch(a=>{U(a),this.loading=!1})}else this.$store.dispatch("setAlert",{type:"danger",message:"Email address and Name are required fields",component_name:"email-setting"})},onMSSignout(){this.loading=!0;let e=this.mode!="edit"?"/oauth/sign-out/"+this.security_hash:"/oauth/sign-out/"+this.security_hash+"/"+Ue(window.location.pathname);V.get(e).then(t=>{this.security_hash="",K(t),setTimeout(()=>{this.mode==="edit"?this.getInitialValues():this.$router.push({name:"Email Create"})},2e3),this.loading=!1}).catch(t=>{U(t),this.loading=!1})},checkValues(e=""){if(this.getProviders(),this.security_hash){this.password="password",this.radioOptions=[{name:"basic_auth",value:0,disabled:this.security_hash},{name:"oauth_auth",value:1,disabled:!this.oauth_active}],this.loading=!0;let t=this.mode!="edit"?"/get/security-hash/"+this.security_hash:"/get/security-hash/"+this.security_hash+"/"+Ue(window.location.pathname);V.get(t).then(a=>{new URLSearchParams(window.location.search).get("security_hash")&&K(a),window.emitter.emit("makeEwsDefault"),this.sending_protocol="ews",this.fetching_protocol="ews",this.is_oauth=a.data.data.is_oauth?1:0,this.oauth_check=!!a.data.data.key,a.data.data.email?(this.email_address=a.data.data.email,this.mailDisabled=!0):this.mailDisabled=!1,a.data.data.user_name?(this.user_name=a.data.data.user_name,this.userNameDisabled=!0):this.userNameDisabled=!1,a.data.data.name?(this.email_name=a.data.data.name,this.emailNameDisabled=!0):this.emailNameDisabled=!1,this.loading=!1}).catch(a=>{this.loading=!1,U(a),setTimeout(()=>{this.$router.push({name:"Email Create"})},2e3)})}else this.password="",this.is_oauth=0,this.radioOptions=[{name:"basic_auth",value:0,disabled:this.security_hash},{name:"oauth_auth",value:1,disabled:!this.oauth_active}],window.emitter.emit("makeEwsNotDefault"),this.oauth_check=!1,this.mailDisabled=!1,this.userNameDisabled=!1,this.emailNameDisabled=!1,e!="edit"&&(this.user_name="",this.email_name="",this.sending_protocol="",this.fetching_protocol="",this.email_address="")},setMode(){const e=window.location.pathname;this.mode=e.indexOf("edit")>=0?"edit":"create",this.mode=="edit"&&(this.auto_discovery=!1,this.discoveredData=!0)},getInitialValues(){if(this.loading=!0,this.mode==="edit"){this.iconClass="fas fa-sync",this.btnName="update";const e=window.location.pathname,t=Ue(e);V.get(`/api/email-settings/${t}`).then(a=>{this.updateStatesWithData(a.data.data),this.hasDataPopulated=!0,this.loading=!1;let r=new URLSearchParams(window.location.search);this.security_hash=r.get("security_hash")?r.get("security_hash"):a.data.data.security_hash,this.checkValues("edit")}).catch(a=>{U(a),this.hasDataPopulated=!0,this.loading=!1})}else{this.hasDataPopulated=!0,this.loading=!1;let e=new URLSearchParams(window.location.search);this.security_hash=e.get("security_hash"),this.checkValues()}},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),t.api_key=e.key},isValid(){const{errors:e,isValid:t}=L6(this.$data);return!!t},isDiscoverValid(){const{errors:e,isValid:t}=A6(this.$data);return!!t},onSubmit(){this.isValid()&&(this.loadingSpeed=8e3,this.loading=!0,V.post("/api/admin/email-settings",{auto_discovery:this.auto_discovery?1:0,id:this.id,department:this.department!==null?this.department.id:null,priority:this.priority!==null?this.priority.id:null,help_topic:this.helptopic!==null?this.helptopic.id:null,email_address:this.email_address,user_name:this.user_name,email_name:this.email_name,password:this.password,fetching_status:this.fetching_status,fetching_protocol:this.fetching_protocol,fetching_encryption:this.fetching_encryption,fetching_host:this.fetching_host,fetching_port:this.fetching_port,delete_email:this.delete_email,sending_status:this.sending_status,sending_protocol:this.sending_protocol,sending_encryption:this.sending_encryption,sending_host:this.sending_host,sending_port:this.sending_port,key:this.api_key,secret:this.secret,region:this.region,domain:this.domain,version:this.version,is_system_default:this.is_system_default,internal_notes:this.internal_notes,inline_as_cids:this.inline_as_cids,is_oauth:this.is_oauth}).then(e=>{this.loading=!1,K(e),this.redirectIfNeeded()}).catch(e=>{this.loading=!1,U(e)}))},redirectIfNeeded(){this.mode==="create"&&setTimeout(()=>{this.$router.push({name:"Emails Index"})},3e3)},onChange(e,t){this[t]=e,t=="fetching_protocol"&&(["imap","pop3"].includes(e)?this.show_checkbox_for_use_new_imap_package=!0:e=="ews"&&(this.show_checkbox_for_use_new_imap_package=!1)),t=="auto_discovery"&&(this.discoveredData=!this.auto_discovery,window.emitter.emit("makeEwsNotDefault"))}},computed:{hasPassword(){return Nl(this.$data)}},components:{"text-field":we,"dynamic-select":Be,"fetching-protocol":x6,"sending-protocol":R6,"status-switch":lt,checkbox:Qt,"tool-tip":nt,"radio-button":Qe}},j6={class:"col-sm-12"},B6={key:0,class:"row"},Y6={class:"card-tools"},H6={class:"row mb-2"},W6={class:"row"},z6={class:"row"},G6={key:0,id:"o_auth",class:"col-sm-12"},K6={key:0},J6={href:"javascript:;"},Z6=["disabled"],Q6={for:"oauth-check",id:"oauth-check-label"},X6=["src"],eq={class:"text-dark"},tq=["onClick"],aq=["onClick"],sq={class:"row"},nq={class:"card-tools switch-pos"},oq={class:"card-tools switch-pos"},iq={class:"row"},lq={class:"row"},rq={class:"card-footer"},dq=["disabled"];function cq(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("radio-button"),b=v("text-field"),w=v("faveo-box"),S=v("tool-tip"),C=v("dynamic-select"),M=v("status-switch"),D=v("fetching-protocol"),F=v("sending-protocol"),I=v("checkbox"),R=H("focus-first-input");return i(),d("div",j6,[e.hasDataPopulated===!1||e.loading===!0?(i(),d("div",B6,[u(m,{duration:e.loadingSpeed},null,8,["duration"])])):f("",!0),u(p),u(p,{componentName:"email-setting"}),e.hasDataPopulated?(i(),A(w,{key:1,title:e.lang("email_settings")},{headerMenu:T(()=>[s("div",Y6,[o.validMail()&&e.discoveredData?(i(),d("button",{key:0,href:"javascript:;",class:"btn-tool update-btn border",onClick:t[0]||(t[0]=(...Y)=>o.getData&&o.getData(...Y))},[t[5]||(t[5]=s("i",{class:"fas fa-cog"},null,-1)),L(" "+h(e.lang("auto_discovery")),1)])):f("",!0)])]),actions:T(()=>[s("div",rq,[e.discoveredData?f("",!0):(i(),d(B,{key:0},[o.validMail()?(i(),d("a",{key:0,href:"javascript:;",class:"update-btn",onClick:t[2]||(t[2]=Y=>o.onChange(!e.auto_discovery,"auto_discovery"))},[s("b",null,[t[8]||(t[8]=s("i",{class:"fas fa-cog"},null,-1)),L(" "+h(e.lang("configure_manually")),1)])])):f("",!0),s("button",{type:"button",onClick:t[3]||(t[3]=(...Y)=>o.getData&&o.getData(...Y)),class:"btn btn-primary update-btn float-end"},[L(h(e.lang("continue"))+" ",1),t[9]||(t[9]=s("span",{class:"fas fa-arrow-right"},null,-1)),t[10]||(t[10]=L("  "))])],64)),e.discoveredData?(i(),d("button",{key:1,type:"button",onClick:t[4]||(t[4]=(...Y)=>o.onSubmit&&o.onSubmit(...Y)),disabled:e.loading,class:"btn btn-primary update-btn float-end"},[s("span",{class:G(e.iconClass)},null,2),L(" "+h(e.lang(e.btnName)),1)],8,dq)):f("",!0)])]),default:T(()=>[u(w,{title:e.lang("email_info")},{default:T(()=>[s("div",H6,[u(g,{options:e.radioOptions,label:e.lang("is_oauth"),name:"is_oauth",value:e.is_oauth,onChange:o.onChange,classname:"form-group col-sm-5",optionClass:"col-sm-6",labelStyle:{display:"none"}},null,8,["options","label","value","onChange"])]),P((i(),d("div",W6,[u(b,{label:e.lang("email"),value:e.email_address,type:"email",name:"email_address",defaultKey:"email",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-3",required:!0,disabled:e.mailDisabled},null,8,["label","value","onChange","placehold","disabled"]),u(b,{label:e.lang("user_name"),value:e.user_name,type:"email",name:"user_name",defaultKey:"email",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-3",hint:e.lang("user_name_hint"),disabled:e.userNameDisabled},null,8,["label","value","onChange","placehold","hint","disabled"]),u(b,{label:e.lang("name"),value:e.email_name,name:"email_name",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-3",hint:e.lang("email_name_hint"),required:!0,disabled:e.emailNameDisabled},null,8,["label","value","onChange","placehold","hint","disabled"]),o.hasPassword&&!e.is_oauth?(i(),A(b,{key:0,label:e.lang("password"),type:"password",value:e.password,name:"password",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-3",required:!0},null,8,["label","value","onChange","placehold"])):f("",!0)])),[[R]]),s("div",z6,[e.is_oauth?(i(),d("div",G6,[e.providerList.length?(i(),d("ul",K6,[(i(!0),d(B,null,re(e.providerList,(Y,X)=>(i(),d("li",{key:X},[s("a",J6,[P(s("input",{type:"checkbox",id:"oauth-check","onUpdate:modelValue":t[1]||(t[1]=le=>e.oauth_check=le),disabled:e.security_hash},null,8,Z6),[[Ve,e.oauth_check]]),s("label",Q6,[s("img",{src:e.basePathVersion()+"/themes/default/common/images/msoffice.png"},null,8,X6),s("p",eq,h(Y),1)]),e.oauth_check&&!e.security_hash?(i(),d("button",{key:0,type:"button",class:"btn btn-light btn-block w-100",onClick:le=>o.onMS(Y)},[t[6]||(t[6]=s("i",{class:"fab fa-microsoft"},null,-1)),L("  "+h(e.lang("sign_with_microsoft")),1)],8,tq)):f("",!0),e.oauth_check&&e.security_hash?(i(),d("button",{key:1,type:"button",class:"btn btn-light btn-block w-100",onClick:le=>o.onMSSignout(Y)},[t[7]||(t[7]=s("i",{class:"fab fa-microsoft"},null,-1)),L("  "+h(e.lang("sign_out")),1)],8,aq)):f("",!0)])]))),128))])):f("",!0)])):f("",!0)])]),_:1},8,["title"]),e.discoveredData||!e.auto_discovery?(i(),d(B,{key:0},[u(w,{title:e.lang("ticket_settings")},{headerTooltip:T(()=>[u(S,{message:e.lang("ticket_settings_note"),size:"medium"},null,8,["message"])]),default:T(()=>[s("div",sq,[u(C,{label:e.lang("department"),multiple:!1,name:"department",classname:"col-sm-4",apiEndpoint:"/api/dependency/departments",value:e.department,onChange:o.onChange},null,8,["label","value","onChange"]),u(C,{label:e.lang("help_topic"),multiple:!1,name:"helptopic",classname:"col-sm-4",apiEndpoint:"/api/dependency/help-topics",value:e.helptopic,onChange:o.onChange},null,8,["label","value","onChange"]),u(C,{label:e.lang("priority"),multiple:!1,name:"priority",classname:"col-sm-4",apiEndpoint:"/api/dependency/priorities",value:e.priority,onChange:o.onChange},null,8,["label","value","onChange"])])]),_:1},8,["title"]),u(w,{title:e.lang("incoming_email")},{headerTooltip:T(()=>[u(S,{message:e.lang("incoming_emails_note"),size:"medium"},null,8,["message"])]),headerMenu:T(()=>[s("div",nq,[u(M,{name:"fetching_status",value:e.fetching_status,onChange:o.onChange,classname:"btn-tool",bold:!0},null,8,["value","onChange"])])]),default:T(()=>[u(D,{onChange:o.onChange,fetching_protocol:e.fetching_protocol,fetching_encryption:e.fetching_encryption,fetching_host:e.fetching_host,fetching_port:e.fetching_port,fetching_status:e.fetching_status,delete_email:e.delete_email,use_new_imap_package:e.use_new_imap_package,show_checkbox_for_use_new_imap_package:e.show_checkbox_for_use_new_imap_package,version:e.version},null,8,["onChange","fetching_protocol","fetching_encryption","fetching_host","fetching_port","fetching_status","delete_email","use_new_imap_package","show_checkbox_for_use_new_imap_package","version"])]),_:1},8,["title"]),u(w,{title:e.lang("outgoing_email")},{headerTooltip:T(()=>[u(S,{message:e.lang("outgoing_emails_note"),size:"medium"},null,8,["message"])]),headerMenu:T(()=>[s("div",oq,[u(M,{name:"sending_status",value:e.sending_status,onChange:o.onChange,classname:"btn-tool",bold:!0},null,8,["value","onChange"])])]),default:T(()=>[u(F,{type:"send",onChange:o.onChange,sending_protocol:e.sending_protocol,sending_encryption:e.sending_encryption,sending_host:e.sending_host,sending_port:e.sending_port,sending_status:e.sending_status,api_key:e.api_key,secret:e.secret,domain:e.domain,region:e.region,version:e.version},null,8,["onChange","sending_protocol","sending_encryption","sending_host","sending_port","sending_status","api_key","secret","domain","region","version"]),s("div",iq,[u(b,{label:e.lang("internal_notes"),value:e.internal_notes,type:"textarea",name:"internal_notes",onChange:o.onChange,classname:"col-sm-12"},null,8,["label","value","onChange"]),u(I,{name:"inline_as_cids",value:e.inline_as_cids,label:e.lang("send_inline_images_as_cids"),onChange:o.onChange,classname:"col-lg-12"},null,8,["value","label","onChange"])]),s("div",lq,[u(I,{name:"is_system_default",value:e.is_system_default,label:e.lang("make_system_default_mail"),onChange:o.onChange,classname:"col-sm-12"},null,8,["value","label","onChange"])])]),_:1},8,["title"])],64)):f("",!0)]),_:1},8,["title"])):f("",!0)])}const Ho=x(U6,[["render",cq]]);function uq(e){const{from:t,to:a,subject:r,message:n}=e;let o={from:[t,"isRequired"],to:[a,"isRequired","isEmail"],subject:[r,"isRequired"],message:[n,"isRequired"]};const m=new Le(N),{errors:p,isValid:g}=m.validate(o);return Ee.dispatch("setValidationError",p),{errors:p,isValid:g}}const mq={name:"email-diagno",data(){return{from:"",to:"",subject:"",message:"",loading:!1}},methods:{onChange(e,t){this[t]=e},isValid(){const{errors:e,isValid:t}=uq(this.$data);return t},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.from=this.from.id,e.to=this.to,e.subject=this.subject,e.message=this.message.replace(/\r?\n/g,"<br />"),V.post("/api/postdiagno",e).then(t=>{this.loading=!1,K(t,"email-diagno"),this.resetFields()}).catch(t=>{this.loading=!1,U(t,"email-diagno")})}},resetFields(){this.from="",this.to="",this.subject="",this.message=""},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":we,"dynamic-select":Be}},hq={class:"col-sm-12"},pq={class:"card card-light"},_q={class:"card-header"},fq={class:"card-title"},gq={class:"card-body"},vq={class:"row"},bq={class:"row"},yq={class:"card-footer"},kq={key:0,class:"row"};function wq(e,t,a,r,n,o){const m=v("alert"),p=v("dynamic-select"),g=v("text-field"),b=v("custom-loader");return i(),d("div",hq,[u(m,{componentName:"email-diagno"}),s("div",pq,[s("div",_q,[s("h3",fq,h(e.trans("send-mail-to-diagnos")),1)]),s("div",gq,[s("div",vq,[u(p,{label:e.trans("from"),multiple:!1,name:"from",classname:"col-sm-6",apiEndpoint:"api/emails-list?outgoing_emails=true",value:n.from,onChange:o.onChange,strlength:60,required:!0,clearable:!!n.from},null,8,["label","value","onChange","clearable"]),u(g,{label:e.trans("to"),value:n.to,type:"text",name:"to",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",keyupListener:o.triggerEvent,required:!0},null,8,["label","value","onChange","placehold","keyupListener"])]),s("div",bq,[u(g,{label:e.trans("subject"),value:n.subject,type:"text",name:"subject",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",keyupListener:o.triggerEvent,required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),u(g,{label:e.trans("message"),value:n.message,type:"textarea",name:"message",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",keyupListener:o.triggerEvent,required:!0},null,8,["label","value","onChange","placehold","keyupListener"])])]),s("div",yq,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...w)=>o.onSubmit&&o.onSubmit(...w))},[t[1]||(t[1]=s("i",{class:"fas fa-paper-plane"},null,-1)),L(" "+h(e.trans("send")),1)])])]),n.loading?(i(),d("div",kq,[u(b,{duration:4e3})])):f("",!0)])}const Cq=x(mq,[["render",wq]]),Dq={data(){return{columns:["provider","is_active","action"],options:{},apiUrl:"/get/oauth-integration"}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},columnsClasses:{provider:"oauth-provider",is_active:"oauth-status"},headings:{provider:this.lang("provider"),is_active:this.lang("status"),action:this.lang("action")},templates:{provider(t,a){return a.provider?a.provider:"--"},is_active(t,a){return a.is_active?e.h("p",{style:{color:"green"}},"Active"):e.h("p",{style:{color:"red"}},"Inactive")},action:function(t,a){return e.h(Ye,{data:a})}},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.current_page,limit:t.per_page}},responseAdapter({data:t}){return{data:t.map(a=>(a.settings_url="/email/oauth/"+a.id,a)),count:t.length}}}}},Sq={class:"col-sm-12"},Mq={class:"card card-light oauth-table"},Fq={class:"card-header"},$q={id:"oauth-list",class:"card-title"},Tq={class:"card-body",id:"oauth-table"};function Eq(e,t,a,r,n,o){const m=v("alert"),p=v("data-table");return i(),d("div",Sq,[u(m,{componentName:"dataTableModal"}),s("div",Mq,[s("div",Fq,[s("h3",$q,h(e.lang("oauth_integration")),1)]),s("div",Tq,[u(p,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"oauth-list"},null,8,["url","dataColumns","option"])])])])}const Lq=x(Dq,[["render",Eq]]);function Aq(e){const{client_id:t,client_secret:a}=e;var r={client_id:[t,"isRequired"],client_secret:[a,"isRequired"]};const n=new Le(N),{errors:o,isValid:m}=n.validate(r);return Ee.dispatch("setValidationError",o),{errors:o,isValid:m}}const Iq={name:"oauth-settings",data(){return{loading:!1,provider:"",client_id:"",client_secret:"",redirect_url:"",status:1,details:"",radioOptions:[{name:"yes",value:1},{name:"no",value:0}],copied:!1}},beforeMount(){const e=window.location.pathname;this.provider_id=Ue(e),this.getInitialValues()},methods:{onCopy(){xt(this.redirect_url),this.copied=!0,setTimeout(()=>{this.copied=!1},5e3)},getInitialValues(){this.loading=!0,V.get("/get/oauth-integration/"+this.provider_id).then(e=>{this.details=e.data,this.provider=this.details.provider,this.status=this.details.is_active,this.client_id=this.details.client_id?this.details.client_id:"",this.client_secret=this.details.client_secret?this.details.client_secret:"",this.redirect_url=this.details.redirect_uri,this.loading=!1}).catch(e=>{U(e,"OAuthSettings")})},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=Aq(this.$data);return t},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.client_id=this.client_id,e.client_secret=this.client_secret,e.id=this.provider_id,e.is_active=this.status,V.post("/api/oauth-integration/update",e).then(t=>{this.loading=!1,K(t,"OAuthSettings")}).catch(t=>{this.loading=!1,U(t,"OAuthSettings")})}}},components:{"text-field":we,"radio-button":Qe,"tool-tip":nt}},Pq={class:"col-sm-12"},Oq={key:0,class:"row"},qq={key:1},xq={class:"card card-light"},Vq={class:"card-header"},Nq={class:"card-title"},Rq=["href"],Uq={class:"card-body"},jq={class:"row"},Bq={class:"row"},Yq={class:"col-sm-1 ps-0"},Hq={class:"card-footer"};function Wq(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("tool-tip"),b=v("text-field"),w=v("radio-button"),S=H("focus-first-input"),C=H("tooltip");return i(),d("div",Pq,[u(m,{componentName:"OAuthSettings"}),n.loading?(i(),d("div",Oq,[u(p,{duration:4e3})])):(i(),d("div",qq,[s("div",xq,[s("div",Vq,[s("h3",Nq,h(n.provider)+" "+h(e.trans("settings"))+"  ",1),n.details.refer_uri&&!n.details.isWhiteLabeled?(i(),d("a",{key:0,href:n.details.refer_uri,target:"__blank"},[u(g,{slot:"headerTooltip",message:e.trans("click-here-to-see-more-details"),size:"medium"},null,8,["message"])],8,Rq)):f("",!0)]),s("div",Uq,[P((i(),d("div",jq,[u(b,{id:"client-id",label:e.trans("client-id"),value:n.client_id,type:"text",name:"client_id",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(b,{id:"client-secret",label:e.trans("client-secret"),value:n.client_secret,type:"text",name:"client_secret",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])])),[[S]]),s("div",Bq,[u(b,{id:"redirect-url",label:e.trans("redirect-url"),value:n.redirect_url,type:"text",name:"redirect_url",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-5",required:!0,disabled:!0},null,8,["label","value","onChange","placehold"]),s("div",Yq,[P((i(),d("a",{class:"btn btn-light uri-copy",onClick:t[0]||(t[0]=ha(M=>o.onCopy(),["prevent"]))},[s("span",{class:G(n.copied?"fas fa-check text-success":"fa fa-clipboard"),id:"eye"},null,2)])),[[C,n.copied?e.trans("clipboard-copy-message"):e.trans("click-to-copy")]])]),u(w,{options:n.radioOptions,label:e.lang("activate_login_via")+" "+e.lang(n.provider),name:"status",value:n.status,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])])]),s("div",Hq,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[1]||(t[1]=M=>o.onSubmit())},[t[2]||(t[2]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)])])])]))])}const zq=x(Iq,[["render",Wq],["__scopeId","data-v-4c7988b7"]]);const Gq={props:["item","indexValue"],data(){return{}},components:{},methods:{},mounted(){}},Kq={class:"tree-node",ref:"closemenu"},Jq={class:"nodrag"},Zq={class:"contnt"},Qq={class:"colp"},Xq={class:"col-open"};function ex(e,t,a,r,n,o){return i(),d("div",Kq,[s("span",Jq,[t[0]||(t[0]=s("span",{"handle-left":20,"handle-top":20,class:"handle"},[s("i",{class:"fa fa-list glypic-li","aria-hidden":"true"})],-1)),s("div",Zq,[s("div",Qq,[s("label",Xq,h(a.item.breakline),1)])])])],512)}const tx=x(Gq,[["render",ex],["__scopeId","data-v-636d5ea2"]]);const ax={data(){return{list:[],base:window.axios.defaults.baseURL,lang_locale:"",loading:!0}},props:{url:{type:String,default:""},onClose:{type:Function,default:()=>[]},reorder_type:{type:String,default:"breakline"}},components:{"breakline-menu":tx,draggable:yt},beforeMount(){this.lang_locale=localStorage.getItem("LANGUAGE"),axios.get(this.url).then(e=>{this.list=e.data.message.breakline,this.loading=!1}).catch(e=>{this.loading=!1})},methods:{reOrder(e){this.loading=!0;var t=new FormData;for(var a in this.list)t.append("enforcers["+a+"][id]",this.list[a].id),t.append("enforcers["+a+"][breakline]",this.list[a].breakline);t.append("type",this.reorder_type);const r={headers:{"Content-Type":"multipart/form-data"}};axios.post("/api/reorder-enforcer-list",t,r).then(n=>{this.loading=!1,this.onClose(),successHandler(n,"dataTableModal")}).catch(n=>{this.loading=!1,this.onClose(),U(n,"dataTableModal")})},showTable(){this.onClose()}}},sx={class:"ml_10"},nx={key:0},ox={class:"col-sm-12 mt-4 ms-1"},ix={key:1,class:"row",style:{"margin-bottom":"30px"}};function lx(e,t,a,r,n,o){const m=v("breakline-menu"),p=v("draggable"),g=v("reuse-loader");return i(),d("div",sx,[n.list.length>0&&!n.loading?(i(),d("div",nx,[u(p,{list:n.list,class:"list-group","ghost-class":"ghost"},{item:T(({element:b,index:w})=>[u(m,{item:b,indexValue:w,formList:n.list},null,8,["item","indexValue","formList"])]),_:1},8,["list"]),s("div",ox,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=b=>o.reOrder()),href:"javascript:;"},[t[2]||(t[2]=s("span",{class:"fas fa-save"},null,-1)),L(" "+h(e.lang("save")),1)]),t[4]||(t[4]=L("  ")),s("button",{onClick:t[1]||(t[1]=b=>o.showTable()),class:"btn btn-secondary",href:"javascript:void(0);"},[t[3]||(t[3]=s("span",{class:"fas fa-times"},null,-1)),L(" "+h(e.lang("cancel")),1)])])])):f("",!0),n.loading?(i(),d("div",ix,[u(g,{"animation-duration":4e3,color:"#1d78ff",size:60,class:G({spin:n.lang_locale=="ar"})},null,8,["class"])])):f("",!0)])}const rx=x(ax,[["render",lx],["__scopeId","data-v-c5be2705"]]);const dx={name:"breakline-index",description:"Breakline table component",data(){return{columns:["breakline","order","is_active","actions"],options:{},apiUrl:"/api/breakline-list",total_records:0,showTable:!0}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},columnsClasses:{breakline:"name-breakline",display_order:"displayOrder-breakline",is_active:"isActive-breakline",actions:"breakline-action"},headings:{breakline:this.lang("breakline"),display_order:"Display Order",is_active:this.lang("status"),actions:this.lang("action"),order:this.lang("display_order")},texts:{filter:"",limit:""},templates:{is_active:function(t,a){let r=e.h("span",{class:a.is_active?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.is_active?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])},breakline:function(t,a){return e.h("span",{style:"min-width : 100%;width: min-content;overflow: hidden; display: inline-block; white-space: word-wrap;"},[a.breakline])},actions:function(t,a){return e.h(Ye,{data:a})}},filterable:["breakline"],sortable:["breakline","display_order","is_active"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy,"sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.message.total,{data:t.message.breakline.map(a=>(a.edit_url="/breakline/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/delete-breakline/"+a.id,a)),count:t.message.total}}}},methods:{reorderMethod(){this.showTable=!1,this.title="reorder"},onClose(){this.showTable=!0,this.title="list_of_breaklines"}},components:{BreaklineReorder:rx}},cx={class:"col-sm-12"},ux={class:"card card-light"},mx={class:"card-header"},hx={id:"breakline-index",class:"card-title"},px={class:"card-tools"},_x={class:"card-body",id:"breakline_index"};function fx(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("breakline-reorder"),w=H("tooltip");return i(),d("div",cx,[u(m,{componentName:"dataTableModal"}),s("div",ux,[s("div",mx,[s("h3",hx,h(e.trans("list_of_breaklines")),1),s("div",px,[P((i(),A(p,{class:"btn btn-tool",to:"/breakline/create"},{default:T(()=>t[1]||(t[1]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[w,e.trans("create_breakline")]]),n.showTable&&n.total_records>1?P((i(),d("a",{key:0,class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...S)=>o.reorderMethod&&o.reorderMethod(...S))},t[2]||(t[2]=[s("span",{class:"fas fa-bars"},null,-1)]))),[[w,e.lang("reorder")]]):f("",!0)])]),s("div",_x,[n.apiUrl!==""&&n.showTable?(i(),A(g,{key:0,url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"breakline-index"},null,8,["url","dataColumns","option"])):f("",!0),n.showTable?f("",!0):(i(),A(b,{key:1,onClose:o.onClose,url:n.apiUrl+"?type=breakline&meta=true&sort=display_order&sort_order=asc",reorder_type:"breakline"},null,8,["onClose","url"]))])])])}const gx=x(dx,[["render",fx]]);function vx(e){const{breakline:t,display_order:a,is_active:r}=e;let n={breakline:[t,"isRequired"],is_active:[r,"isRequired"]};const o=new Le(N),{errors:m,isValid:p}=o.validate(n);return Ee.dispatch("setValidationError",m),{errors:m,isValid:p}}const bx={name:"create-upate-breakline",description:"breakline page",beforeMount(){this.setMode(),this.getInitialValues()},data:function(){return{id:null,breakline:"",hasDataPopulated:!1,loadingSpeed:4e3,loading:!0,iconClass:"fas fa-save",expressionRadioOptions:[{name:"Yes",value:"yes"},{name:"No",value:"no"}],expression:"yes",is_active:null,title:"create_breakline",mode:"create",btnName:"save"}},methods:{onChange(e,t){this[t]=e},isValid(){const{errors:e,isValid:t}=vx(this.$data);return!!t},onSubmit(){if(this.isValid()){this.loadingSpeed=8e3,this.loading=!0;let e={};e.id=this.id,e.breakline=this.breakline,e.is_active=this.is_active?1:0,V.post("/api/create-update-breakline",e).then(t=>{this.loading=!1,K(t),this.id||setTimeout(()=>{this.$router.push({name:"Breaklines Index"})},3e3)}).catch(t=>{this.loading=!1,U(t)})}},setMode(){const e=window.location.pathname;this.mode=e.indexOf("edit")>=0?"edit":"create"},getInitialValues(){if(this.loading=!0,this.mode==="edit"){this.iconClass="fas fa-sync",this.btnName="update",this.title=this.lang("edit_breakline");const e=window.location.pathname,t=Ue(e);V.get(`/api/edit-breakline/${t}`).then(a=>{this.updateStatesWithData(a.data.message),this.hasDataPopulated=!0,this.loading=!1}).catch(a=>{this.loading=!1,U(a)})}else this.hasDataPopulated=!0,this.loading=!1},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),t.api_key=e.key},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":we,"radio-button":Qe,"status-switch":lt,"tool-tip":nt}},yx={class:"col-sm-12"},kx={key:0,class:"row"},wx={class:"row"},Cx={class:"row"},Dx={class:"form-group col-sm-2"},Sx={for:"is_active"},Mx={class:"card-footer"},Fx=["disabled"];function $x(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("text-field"),b=v("status-switch"),w=v("faveo-box"),S=H("focus-first-input");return i(),d("div",yx,[e.hasDataPopulated===!1||e.loading===!0?(i(),d("div",kx,[u(m,{duration:e.loadingSpeed},null,8,["duration"])])):f("",!0),u(p),u(w,{title:e.trans(e.title)},{actions:T(()=>[s("div",Mx,[s("button",{type:"button",onClick:t[0]||(t[0]=(...C)=>o.onSubmit&&o.onSubmit(...C)),disabled:e.loading,class:"btn btn-primary update-btn"},[s("span",{class:G(e.iconClass)},null,2),L("  "+h(e.trans(e.btnName)),1)],8,Fx)])]),default:T(()=>[P((i(),d("div",wx,[u(g,{label:e.lang("breakline"),value:e.breakline,type:"text",name:"breakline",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0,keyupListener:o.triggerEvent,hint:e.trans("breakline_note")},null,8,["label","value","onChange","placehold","keyupListener","hint"])])),[[S]]),s("div",Cx,[s("div",Dx,[s("label",Sx,h(e.lang("status")),1),u(b,{name:"is_active",value:e.is_active,onChange:o.onChange,classnane:"float-start",bold:!0},null,8,["value","onChange"])])])]),_:1},8,["title"])])}const Wo=x(bx,[["render",$x]]),Tx={name:"labels-index",data(){return{columns:["topic","status","type","department","action"],apiUrl:"/api/admin/helptopic-list",options:{},action:"all",actions:["all","active","inactive"]}},beforeMount(){const e=this;this.options={headings:{topic:this.trans("topic"),status:this.trans("status"),type:this.trans("type"),department:this.trans("department"),action:this.trans("actions")},texts:{filter:"",limit:""},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},templates:{action:function(t,a){return e.h(Ye,{data:a})},status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-sm":"btn btn-danger btn-sm",style:"cursor:default !important"},a.status?this.trans("active"):this.trans("inactive"));return e.h("a",{},[r])},type:function(t,a){let r=e.h("span",{class:a.type?"btn btn-success btn-sm":"btn btn-danger btn-sm",style:"cursor:default !important"},a.type?this.trans("public"):this.trans("private"));return e.h("a",{},[r])},department(t,a){return a.department?a.department.name:"--"}},sortable:["topic","status","type","department"],filterable:["topic","status","type","department"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/helptopic/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/admin/helptopic-delete/"+a.id,a.is_linked=!0,a.dependency="help-topic",a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}},methods:{updateTable(e){switch(e){case"all":this.apiUrl="/api/admin/helptopic-list";break;case"active":this.apiUrl="/api/admin/helptopic-list?status=1";break;case"inactive":this.apiUrl="/api/admin/helptopic-list?status=0";break}}}},Ex={class:"col-sm-12",id:"topics-list"},Lx={class:"card-tools"},Ax={class:"dropdown-menu dropdown-menu-right",role:"menu","x-placement":"bottom-end"},Ix=["onClick"];function Px(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("faveo-box"),w=H("tooltip");return i(),d("div",Ex,[u(m,{componentName:"dataTableModal"}),u(b,{title:e.trans("list_of_help_topics")},{customActions:T(()=>[s("div",Lx,[P((i(),A(p,{class:"btn btn-tool",to:"/helptopic/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[w,e.trans("create_new_help_topic")]]),t[1]||(t[1]=s("button",{type:"button",class:"btn btn-tool dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"glyphicon glyphicon-filter"})],-1)),s("div",Ax,[(i(!0),d(B,null,re(n.actions,S=>(i(),d("a",{href:"javascript:;",class:"dropdown-item",onClick:C=>o.updateTable(S)},h(e.trans(S)),9,Ix))),256))])])]),default:T(()=>[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"topics-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const Ox=x(Tx,[["render",Px]]);function qx(e){const{topic:t,department:a,linked_departments:r}=e;let n={topic:[t,"isRequired",{"max(100)":N("topic_should_be_less_than_100_characters")}],linked_departments:[r,"isRequired"],department:[a,"isRequired"]};const o=new Le(N),{errors:m,isValid:p}=o.validate(n);return Ee.dispatch("setValidationError",m),{errors:m,isValid:p}}const xx={name:"helptopic-create-edit",description:"Helptopic create edit page",data(){return{page_title:"create_help_topic",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,topic_id:"",topic:"",linked_departments:"",status:1,statusOptions:[{name:"active",value:1},{name:"inactive",value:0}],type:1,publicOptions:[{name:"public",value:1},{name:"private",value:0}],department:"",selectOptions:[],internal_notes:"",showType:!1,ticket_type:[],sys_help_topic:0,checkDisabled:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e),this.checkType()},methods:{checkType(){V.get("/api/admin/show-ticket-type-field").then(e=>{this.showType=e.data.data.showTicketTypeField.show_ticket_type_field,this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0})},getValues(e){const t=Ue(e);e.indexOf("edit")>=0&&(this.page_title="edit_help_topic",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t))},getInitialValues(e){this.loading=!0,V.get("/api/admin/helptopic-details/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.topic;this.topic_id=a.id,this.updateStatesWithData(a),this.selectOptions=a.linked_departments,this.department=a.department.id,this.linked_departments=a.linked_departments,this.checkDisabled=!!a.sys_help_topic}).catch(t=>{this.loading=!1,U(t,"topic-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=qx(this.$data);return t},onChange(e,t){this[t]=e,t=="linked_departments"&&e&&(e.map(a=>a.id).includes(this.department)||(this.department=""),this.selectOptions=e)},onSubmit(){if(this.isValid()){this.loading=!0;let e={};this.topic_id&&(e.id=this.topic_id),e.topic=this.topic,e.department=this.department,e.internal_notes=this.internal_notes,e.status=this.status?1:0,e.type=this.type?1:0,e.linked_departments=this.linked_departments.map(t=>t.id),this.ticket_type.length&&(e.type_id=this.ticket_type.map(t=>t.id)),e.sys_help_topic=this.sys_help_topic?1:0,V.post("/api/admin/helptopic-create-update",e).then(t=>{this.loading=!1,K(t,"topic-create-edit"),this.topic_id?this.getInitialValues(this.topic_id):setTimeout(()=>{this.$router.push({name:"Helptopic Index"})},3e3)}).catch(t=>{this.loading=!1,U(t,"topic-create-edit")})}}},components:{"text-field":we,"dynamic-select":Be,"static-select":it,"radio-button":Qe}},Vx={class:"col-sm-12"},Nx={key:0,class:"row"},Rx={class:"row"},Ux={class:"row"},jx={key:0,class:"row"},Bx={class:"row"},Yx={class:"col-md-12"},Hx={class:"label_align"},Wx=["disabled"],zx={class:"card-footer"};function Gx(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("text-field"),b=v("radio-button"),w=v("dynamic-select"),S=v("static-select"),C=v("tiny-editor"),M=v("faveo-box"),D=H("focus-first-input");return i(),d("div",Vx,[!n.hasDataPopulated||n.loading?(i(),d("div",Nx,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"topic-create-edit"}),n.hasDataPopulated?(i(),A(M,{key:1,title:e.trans(n.page_title)},{actions:T(()=>[s("div",zx,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[1]||(t[1]=F=>o.onSubmit())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)])])]),default:T(()=>[P((i(),d("div",Rx,[u(g,{label:e.trans("topic"),value:n.topic,type:"text",name:"topic",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(b,{options:n.statusOptions,label:e.trans("status"),name:"status",value:n.status,onChange:o.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"]),u(b,{options:n.publicOptions,label:e.trans("type"),name:"type",value:n.type,onChange:o.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])])),[[D]]),s("div",Ux,[u(w,{label:e.trans("linked_department"),multiple:!0,name:"linked_departments",classname:"col-sm-6",apiEndpoint:"/api/dependency/departments",value:n.linked_departments,onChange:o.onChange,strlength:35,required:!0},null,8,["label","value","onChange"]),u(S,{label:e.trans("default_department"),elements:n.selectOptions,name:"department",onChange:o.onChange,value:n.department,classname:"col-sm-6",required:!0},null,8,["label","elements","onChange","value"])]),n.showType?(i(),d("div",jx,[u(w,{label:e.trans("type"),multiple:!0,name:"ticket_type",classname:"col-sm-6",apiEndpoint:"/api/dependency/types",value:n.ticket_type,onChange:o.onChange,strlength:35,required:!1},null,8,["label","value","onChange"])])):f("",!0),s("div",null,[u(C,{value:n.internal_notes,onChange:o.onChange,name:"internal_notes",label:e.trans("internal_notes"),width:"100%",required:!1,id:"help-topic-editor",lang:"en"},null,8,["value","onChange","label"])]),s("div",Bx,[s("div",Yx,[s("label",Hx,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"default","onUpdate:modelValue":t[0]||(t[0]=F=>n.sys_help_topic=F),disabled:n.checkDisabled},null,8,Wx),[[Ve,n.sys_help_topic]]),L(" "+h(e.trans("make-default-helptopic")),1)])])])]),_:1},8,["title"])):f("",!0)])}const zo=x(xx,[["render",Gx],["__scopeId","data-v-607440ec"]]);const Kx={name:"sla-index",description:"SLA table component",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},data(){return{columns:["name","status","order","created_at","updated_at","action"],options:{},apiUrl:"api/get-enforcer-list/",title:"list_of_SLA_plans",showTable:!0,total_records:0}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),status:this.trans("status"),order:this.trans("order"),created_at:this.trans("created"),updated_at:this.trans("updated"),action:this.trans("action")},columnsClasses:{name:"sla-name",status:"sla-status",order:"sla-order",updated_at:"sla-updated",created_at:"sla-created"},templates:{action:function(t,a){return e.h(Ye,{data:a})},status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.status?"Active":"Inactive");return e.h("a",{class:"pointer_normal"},[r])},created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)}},sortable:["name","status","order","created_at","updated_at"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{type:"sla",sort:t.orderBy?t.orderBy:"order",sort_order:t.ascending?"asc":"desc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.total_records=t.data.total,{data:t.data.data.map(a=>(a.edit_url="/sla/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/delete-enforcer/sla/"+a.id,a)),count:t.data.total}},orderBy:{column:"order",ascending:!0}}},methods:{reorderMethod(){this.showTable=!1,this.title="reorder"},onClose(){this.showTable=!0,this.title="list_of_SLA_plans"}},components:{"sla-reorder":hs}},Jx={class:"col-sm-12"},Zx={class:"card card-light"},Qx={class:"card-header"},Xx={class:"card-title"},eV={class:"card-tools"},tV={class:"card-body",id:"sla-table"};function aV(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("sla-reorder"),w=H("tooltip");return i(),d("div",Jx,[u(m,{componentName:"dataTableModal"}),s("div",Zx,[s("div",Qx,[s("h3",Xx,h(e.lang(n.title)),1),s("div",eV,[P((i(),A(p,{class:"btn btn-tool",to:"/sla/create"},{default:T(()=>t[1]||(t[1]=[s("span",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[w,e.lang("create_SLA")]]),n.showTable&&n.total_records>1?P((i(),d("a",{key:0,id:"reorder",class:"btn btn-tool",href:"javascript:;",onClick:t[0]||(t[0]=(...S)=>o.reorderMethod&&o.reorderMethod(...S))},t[2]||(t[2]=[s("span",{class:"fas fa-bars"},null,-1)]))),[[w,e.lang("reorder")]]):f("",!0)])]),s("div",tV,[n.apiUrl!==""&&n.showTable?(i(),A(g,{key:0,url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"sla-table"},null,8,["url","dataColumns","option"])):f("",!0),n.showTable?f("",!0):(i(),A(b,{key:1,onClose:o.onClose,url:n.apiUrl+"?type=sla&meta=true&sort=order&sort_order=asc",reorder_type:"sla"},null,8,["onClose","url"]))])])])}const sV=x(Kx,[["render",aV]]);function nV(e){const{name:t,targetArr:a,approach_response:r,approach_resolution:n,violated_response:o,violated_resolution:m}=e;let p={name:[t,"isRequired","max(80)"]},g,b;a.length>0&&a.map((C,M)=>{p["respond_count-"+M]=[C.respond_count,{isRequired:""},{"minValue(1)":N("invalid_input")}],p["resolve_count-"+M]=[C.resolve_count,{isRequired:""},{"minValue(1)":N("invalid_input")}]}),r.length>0&&r.map((C,M)=>{p[C.type+"-count-"+M]=[C.reminder_delta,"isRequired",{"minValue(1)":N("invalid_input")}],p[C.type+"-option-"+M]=[C.option,"isRequired"],g=es(C.reminder_receivers.agents,C.reminder_receivers.agent_types)}),n.length>0&&n.map((C,M)=>{p[C.type+"-count-"+M]=[C.reminder_delta,"isRequired",{"minValue(1)":N("invalid_input")}],p[C.type+"-option-"+M]=[C.option,"isRequired"],g=es(C.reminder_receivers.agents,C.reminder_receivers.agent_types)}),o.length>0&&o.map((C,M)=>{p[C.type+"-count-"+M]=[C.reminder_delta,"isRequired",{"minValue(1)":N("invalid_input")}],p[C.type+"-option-"+M]=[C.option,"isRequired"],g=es(C.reminder_receivers.agents,C.reminder_receivers.agent_types)}),m.length>0&&m.map((C,M)=>{p[C.type+"-count-"+M]=[C.reminder_delta,"isRequired",{"minValue(1)":N("invalid_input")}],p[C.type+"-option-"+M]=[C.option,"isRequired"],g=es(C.reminder_receivers.agents,C.reminder_receivers.agent_types)}),r.length===0&&n.length===0&&o.length===0&&m.length===0&&(g=!0);const S=new Le(N).validate(p);return b=S.errors,g=g&&S.isValid,Ee.dispatch("setValidationError",b),{errors:b,isValid:g}}function es(e,t,a){let r=0;if(e.length==0&&t.length==0){let n=N("atleast_one_agent_or_one_agent_type_is_required");r++,Ee.dispatch("setAlert",{type:"danger",message:n,component_name:"reminder"})}return!(r>0)}const oV={name:"automator-form-field",props:{enforcerType:{type:String,required:!0},formField:{type:Object,required:!0},labelStyle:{type:Object,default:()=>{}},isChild:{type:Boolean,default:!1},enforcerObject:{type:Object,default:()=>({})},multipleField:{type:Boolean,default:!1}},data:()=>({_id:null,childNodes:[],dropdownOptions:[],selectedValue:null,mounted:!1,enforcerList:[],showForm:!0,country_code:null,showMobileField:!1,extValue:"",relation:""}),beforeMount(){(this.formField.data_type==="select"||this.formField.data_type==="select"&&this.formField.title==="Api")&&this.getSelectFieldOptions(),this.formField.data_type==="mobile"?(this.formField.value&&this.formField.value.includes(" ")&&(this.country_code=this.formField.value.split(" ")[0]),this.formField.enable_extension&&this.formField.union&&this.formField.union.length&&(this.extValue=this.formField.union[0].value?this.formField.union[0].value:""),this.showMobileField=!0):this.showMobileField=!0},created(){window.emitter.on("updateAutomatorField",this.updateFields),window.emitter.on("updateRelation",e=>{this.relation=e})},mounted(){if(this.formField.data_type==="mobile"&&this.formField.enable_extension&&this.formField.value){let e="";this.formField.value&&this.formField.value.includes(" ")?e=this.formField.value.split(" ")[1]:e=this.formField.value,this.selectedValue=e,this.renderNestedFormFieldsIfAny({value:this.selectedValue,nodes:this.formField.union})}else this.selectedValue=Ci(this.formField.value,this.formField.options,this.formField.default,this.formField.data_type,"","automator"),this.renderNestedFormFieldsIfAny(this.selectedValue);setTimeout(()=>{this.mounted=!0},1e3)},computed:{unique(){return this.formField.key+this.$.vnode.key},apiInfoUrl(){let e=Jt.convertStringOfPropertiesToObject(this.formField.api_info).url;return!e&&this.formField.api_info&&(e=this.formField.api_info),e},optionLabel(){return Jt.convertStringOfPropertiesToObject(this.formField.api_info).key||"label"},clearable(){return this.isChild},validationRules(){let e=[];return this.isChild||e.push("required"),e.join("|")}},methods:{keypressEvent(e,t,a){if(this.formField.data_type==="time"||this.formField.data_type==="count"){const o=e.which?e.which:e.keyCode;if(this.multipleField){if((o<48||o>57)&&o!==126)e.preventDefault();else if(o===126){const p=(this.selectedValue||"")+String.fromCharCode(o),g=p.indexOf("~"),b=p.lastIndexOf("~");(g!==-1&&g!==b||g!==-1&&g!==0&&g!==p.length-1||p.length===1&&g===0)&&e.preventDefault()}}else(o<48||o>57)&&e.preventDefault();((this.selectedValue||"")+String.fromCharCode(o))[0]==="0"&&e.preventDefault()}else if(a==="number"||a==="mobile"){e=e||window.event;var r=e.which?e.which:e.keyCode;if(r>31&&(r<48||r>57))e.preventDefault();else return!0}else if(a==="float"||a==="decimal"){e=e||window.event;var r=e.which?e.which:e.keyCode,n=e.target.value;if(r==46&&n.indexOf(".")!==-1||r==46&&n.length===0)e.preventDefault();else{if(r>=48&&r<=57||r==46)return!0;e.preventDefault()}}},pasteEvent(e,t,a){if(a==="number"||a==="mobile")e=e||window.event,e.clipboardData.getData("Text").match(/[^\d]/)&&e.preventDefault();else if(a==="float"||a==="decimal"){e=e||window.event;var r=e.clipboardData||window.clipboardData,n=r.getData("Text");/^[-]?\d*\.?\d*$/.test(n)||e.preventDefault()}},onCountryCodeUpdate(e,t){if(this[t]=e,this.formField.enable_extension){let a={value:this.selectedValue,nodes:this.formField.union};this.onChange(a,this.formField.key)}else this.onChange(this.selectedValue,this.formField.key)},updateFields(){this.showForm=!1,setTimeout(()=>{this.showForm=!0},1)},getEnforcerObject(e){let t=this.enforcerObject[this.enforcerType+"s"].find(a=>a.field.key===e);return t||{_id:"test"}},onChange(e,t){if(this.mounted){if(this.formField.data_type==="number"&&e===0&&(e="0"),this.formField.data_type==="decimal"&&typeof e=="string"&&e.endsWith(".")&&(e+="0"),Array.isArray(e)){const a=JSON.parse(JSON.stringify(this.selectedValue||[]));this.selectedValue=e,e.length>a.length?this.processAndUpdateStore(dt.differenceWith(e,a,dt.isEqual)[0],!0):e.length<a.length&&this.$store.dispatch("updateEnforcerList",{key:this.enforcerType,affectedUnique:this.$.vnode.key,formFieldUnique:this.formField.key,value:this.selectedValue,itemToRemove:dt.differenceWith(a,e,dt.isEqual)[0]})}else this.formField.data_type==="mobile"&&typeof e=="object"&&!Array.isArray(e)?this.selectedValue=e.value:this.selectedValue=e,this.processAndUpdateStore(e);this.renderNestedFormFieldsIfAny(e,t)}},processAndUpdateStore(e,t=!1){let a=[];Te(e)&&Te(e.nodes)&&e.nodes.forEach(n=>{const o=Ei(this.enforcerType,n);a.push(o)}),this.enforcerList=a;const r={key:this.enforcerType,affectedUnique:this.$.vnode.key,formFieldUnique:this.formField.key,enforcerList:a,value:this.selectedValue,isMultiple:t};this.formField.data_type==="mobile"&&(r.appendValue=this.country_code),this.$store.dispatch("updateEnforcerList",r)},renderNestedFormFieldsIfAny(e,t){this.childNodes=[],e&&(Array.isArray(e)?e.forEach(a=>{Te(a.nodes)&&this.childNodes.push(...a.nodes)}):Te(e.nodes)&&(this.childNodes=e.nodes))},getSelectFieldOptions(){Te(this.apiInfoUrl)?this.formField.title==="Api"?V.get(this.apiInfoUrl).then(e=>{this.dropdownOptions=e.data}).catch(e=>{console.error(e)}):this.fetchOptionListForApiField():this.dropdownOptions=this.formField.options},fetchOptionListForApiField(){V.get(this.apiInfoUrl).then(e=>{this.dropdownOptions=e.data}).catch(e=>{console.error(e)})},clearSelectedValue(){this.selectedValue=null}},components:{MobileField:Dm,"dynamic-select":Be,"text-field":we,"radio-field":Xu,"checkbox-field":em,"date-time-field":Dt}},iV={class:"automator-form"},lV={class:"form-field-wrapper"};function rV(e,t,a,r,n,o){const m=v("date-time-field"),p=v("dynamic-select"),g=v("text-field"),b=v("radio-field"),w=v("checkbox-field"),S=v("MobileField"),C=v("automator-form-field",!0);return i(),d("div",iV,[e.showForm?(i(),d(B,{key:0},[a.formField.data_type==="date"?(i(),A(m,{key:0,type:a.formField.request_time_information?"datetime":"date",label:a.formField.label,labelStyle:a.labelStyle,value:e.selectedValue,name:o.unique,onChange:o.onChange,format:a.formField.request_time_information?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD",clearable:!0,rules:o.validationRules,outputFormat:"YYYY-MM-DD HH:mm:ss"},null,8,["type","label","labelStyle","value","name","onChange","format","rules"])):f("",!0),a.formField.data_type==="api"||a.formField.data_type==="multiselect"?(i(),A(p,{key:1,strlength:37,id:a.formField.key,label:a.formField.label,multiple:a.formField.data_type==="multiselect",name:o.unique,apiEndpoint:o.apiInfoUrl,value:e.selectedValue,onChange:o.onChange,labelStyle:a.labelStyle,rules:o.validationRules,clearable:o.clearable,"show-icon":!1},null,8,["id","label","multiple","name","apiEndpoint","value","onChange","labelStyle","rules","clearable"])):f("",!0),a.formField.data_type==="select"&&a.formField.title!=="Api"?(i(),A(p,{key:2,id:a.formField.key,label:a.formField.label,multiple:!1,name:o.unique,apiEndpoint:o.apiInfoUrl,value:e.selectedValue,onChange:o.onChange,optionLabel:o.optionLabel,labelStyle:a.labelStyle,rules:o.validationRules,clearable:o.clearable,"show-icon":!1},null,8,["id","label","name","apiEndpoint","value","onChange","optionLabel","labelStyle","rules","clearable"])):f("",!0),a.formField.data_type==="select"&&a.formField.title==="Api"?(i(),A(p,{key:3,id:a.formField.key,label:a.formField.label,multiple:!1,name:o.unique,elements:e.dropdownOptions,value:e.selectedValue,onChange:o.onChange,optionLabel:o.optionLabel,rules:o.validationRules,hint:a.formField.description,strlength:75,"tip-rule":a.formField.show_description,"show-icon":!1,fieldUniqueName:a.formField.key,labelLength:25,labelStyle:a.labelStyle},null,8,["id","label","name","elements","value","onChange","optionLabel","rules","hint","tip-rule","fieldUniqueName","labelStyle"])):f("",!0),a.formField.data_type==="text"||a.formField.data_type==="textarea"||a.formField.data_type==="htmltextarea"||a.formField.data_type==="number"||a.formField.data_type==="decimal"||a.formField.data_type==="email"||a.formField.data_type==="time"||a.formField.data_type==="count"?(i(),A(g,{key:4,id:a.formField.key,label:a.formField.label,type:a.formField.data_type==="htmltextarea"?"textarea":a.formField.title==="EXT"||a.formField.data_type==="time"||a.formField.data_type==="count"?"text":a.formField.data_type,name:o.unique,value:e.selectedValue,onChange:o.onChange,labelStyle:a.labelStyle,rules:o.validationRules,pattern:a.formField.pattern,"validation-message":a.formField.validation_message,keypressEvt:o.keypressEvent,placehold:e.lang(a.multipleField?"time_multiple_field":!a.multipleField&&a.formField.data_type==="time"?"enter_the_time":a.formField.data_type==="count"?"enter_thread_count":"enter_a_value"),pasteEvt:o.pasteEvent,max:a.formField.title==="EXT"?8:void 0,isEXT:a.formField.title==="EXT",defaultKey:a.formField.key},null,8,["id","label","type","name","value","onChange","labelStyle","rules","pattern","validation-message","keypressEvt","placehold","pasteEvt","max","isEXT","defaultKey"])):f("",!0),a.formField.data_type==="radio"?(i(),A(b,{key:5,name:o.unique,label:a.formField.label,options:a.formField.options,value:e.selectedValue,onChange:o.onChange,labelStyle:a.labelStyle,rules:o.validationRules},null,8,["name","label","options","value","onChange","labelStyle","rules"])):f("",!0),a.formField.data_type==="checkbox"?(i(),A(w,{key:6,name:o.unique,label:a.formField.label,options:a.formField.options,value:e.selectedValue,onChange:o.onChange,labelStyle:a.labelStyle,rules:o.validationRules},null,8,["name","label","options","value","onChange","labelStyle","rules"])):f("",!0)],64)):f("",!0),e.showMobileField&&a.formField.data_type==="mobile"?(i(),A(S,{key:1,fieldFor:"automator",id:o.unique,label:a.formField.label,type:a.formField.data_type,name:o.unique,value:e.selectedValue,onChange:o.onChange,isInlineForm:!1,countryCode:e.country_code,onCountryCode:t[0]||(t[0]=M=>o.onCountryCodeUpdate(M,"country_code")),keypressEvt:o.keypressEvent,pasteEvt:o.pasteEvent,rules:o.validationRules,extensionEnabled:a.formField.enable_extension,ext:a.formField.enable_extension?a.formField.union:[],labelStyle:a.labelStyle,extValue:e.extValue},null,8,["id","label","type","name","value","onChange","countryCode","keypressEvt","pasteEvt","rules","extensionEnabled","ext","labelStyle","extValue"])):f("",!0),s("div",lV,[(i(!0),d(B,null,re(e.childNodes,M=>(i(),A(C,{key:o.getEnforcerObject(M.key)._id,"form-field":M,enforcerType:a.enforcerType,"enforcer-object":o.getEnforcerObject(M.key),isChild:!0},null,8,["form-field","enforcerType","enforcer-object"]))),128))])])}const Gl=x(oV,[["render",rV],["__scopeId","data-v-98e43b3c"]]);const dV={name:"faveo-automator-rule",props:{rule:{type:ns,required:!0},index:{type:Number,required:!0},categories:{type:Array,required:!0},catChange:{type:Function}},setup(){const e=Me();return{selectedRuleKeys:me(()=>e.getters.getSelectedRuleKeys)}},data(){return{category:"",field:null,relation:null,relationList:[],loading:!1,multipleField:!1}},computed:{},created(){window.emitter.on("deletedItem",this.deletedItem)},beforeMount(){this.category=this.rule.category,this.field=this.rule.field,this.relation=this.rule.relation,this.field&&(this.relationList=ro(this.field.data_type))},methods:{onFieldChange(e){this.field=e,this.refreshRelationList(),this.$store.dispatch("onFieldChange",{key:"rules",index:this.index,field:this.field}),window.emitter.emit("updateAutomatorField")},refreshRelationList(){this.field?(this.relationList=ro(this.field.data_type),this.onRelationChange(this.relationList[0])):this.relationList=[]},onRelationChange(e){this.relation=e,this.$store.dispatch("onRelationChange",{key:"rules",index:this.index,relation:this.relation}),window.emitter.emit("updateAutomatorField")},onCategoryChange(e){this.field=null,this.category=e,this.$store.dispatch("onCategoryChange",{key:"rules",index:this.index,value:new ns(this.rule._id,this.category)}),this.catChange(),window.emitter.emit("updateAutomatorField")},deleteRule(){window.emitter.emit("deleteItem",{type:"rule",index:this.index,id:this.rule._id})},deletedItem(){this.loading=!0,setTimeout(()=>{this.loading=!1},1)}},watch:{relation(e,t){window.emitter.emit("updateRelation",e.id),e.id==="less_than_and_greater_than"?this.multipleField=!0:this.multipleField=!1}},components:{"dynamic-select":Be,"automator-form-field":Gl}},cV={class:"col-sm-3 rule-menu"},uV={class:"offset-md-2 max-width-max-content rule_btns"},mV=["onClick"];function hV(e,t,a,r,n,o){const m=v("custom-loader"),p=v("dynamic-select"),g=v("automator-form-field"),b=H("tooltip");return i(),d("div",{class:G(["row","faveo-automator-rule",n.field&&n.field.disabled?"disabledDiv":""])},[n.loading?(i(),A(m,{key:0})):f("",!0),s("div",cV,[s("span",null,[s("i",{class:G(["fas fa-trash faveo-trash",[n.field&&n.field.disabled?"disabledDiv":""]]),onClick:t[0]||(t[0]=w=>o.deleteRule())},null,2)]),s("span",uV,[(i(!0),d(B,null,re(a.categories,w=>P((i(),d("a",{href:"javascript:;",class:G([{"faveo-active-border":n.category===w.name},"btn btn-light me-1"]),onClick:S=>o.onCategoryChange(w.name)},[s("i",{class:G(w.icon)},null,2)],10,mV)),[[b,e.trans(w.name+"_field")]])),256))])]),n.loading?f("",!0):(i(),A(p,{key:1,classname:"col-sm-3",labelStyle:{display:"none"},multiple:!1,id:"rule-"+a.rule._id,name:"rule-"+a.rule._id,apiEndpoint:a.categories.find(w=>w.name===n.category).api_info,optionLabel:"label",value:n.field,onChange:o.onFieldChange,strlength:50,clearable:!1},null,8,["id","name","apiEndpoint","value","onChange"])),n.field!==null?(i(),d(B,{key:2},[n.loading?f("",!0):(i(),A(p,{key:0,classname:"col-sm-3",labelStyle:{display:"none"},multiple:!1,name:"relation-"+a.rule._id,elements:n.relationList,optionLabel:"name",value:n.relation,onChange:o.onRelationChange,strlength:35,clearable:!1},null,8,["name","elements","value","onChange"])),(i(),d("div",{class:"col-sm-3",key:JSON.stringify(n.field)+JSON.stringify(n.category)},[(i(),A(g,{key:a.rule._id,enforcerType:"rule","form-field":n.field,"enforcer-object":a.rule,multipleField:n.multipleField,labelStyle:{display:"none"}},null,8,["form-field","enforcer-object","multipleField"]))]))],64)):f("",!0)],2)}const pV=x(dV,[["render",hV],["__scopeId","data-v-87907bb2"]]);const _V={name:"rule-list",props:{categories:{type:Array,required:!0},pageType:{type:String,default:"ticket"}},data:()=>({matcher:"",ruleList:[]}),beforeMount(){this.ruleList=this.$store.getters.getAutomatorRules,this.matcher=this.$store.getters.getAutomatorDataByKey("matcher"),Te(this.ruleList)||this.addNew()},computed:{updatedRules(){return this.ruleList}},methods:{onCatChange(){this.ruleList=[],this.ruleList=this.$store.getters.getAutomatorRules,window.emitter.emit("deletedItem")},addNew(){this.$store.dispatch("addNewElementToAutomatorProperty",{key:"rules",value:new ns})},onchange(e){this.matcher=e,this.$store.dispatch("setAutomatorDataByKey",{key:"matcher",value:e})}},components:{"faveo-automator-rule":pV}},fV={class:"row"},gV={class:"col-sm-3"},vV={class:"radio-inline"},bV=["checked"],yV={class:"col-sm-3"},kV={class:"radio-inline"},wV=["checked"],CV={style:{"margin-top":"1rem"}};function DV(e,t,a,r,n,o){const m=v("faveo-automator-rule"),p=v("faveo-box");return i(),A(p,{title:e.trans("when_"+a.pageType+"_satisfies_these_conditions")},{default:T(()=>[s("div",fV,[s("div",gV,[s("label",vV,[s("input",{type:"radio",class:"form-check-input",name:"matcher",onChange:t[0]||(t[0]=g=>o.onchange("any")),value:"any",checked:e.matcher==="any"},null,40,bV),L("  "+h(e.lang("match_any_of_below")),1)])]),s("div",yV,[s("label",kV,[s("input",{type:"radio",class:"form-check-input",name:"matcher",onChange:t[1]||(t[1]=g=>o.onchange("all")),value:"all",checked:e.matcher==="all"},null,40,wV),L("  "+h(e.lang("match_all_of_below")),1)])])]),(i(!0),d(B,null,re(o.updatedRules,(g,b)=>(i(),A(m,{key:g._id,rule:g,index:b,categories:a.categories,catChange:o.onCatChange},null,8,["rule","index","categories","catChange"]))),128)),s("div",CV,[s("a",{onClick:t[2]||(t[2]=g=>o.addNew()),href:"javascript:;"},[s("span",null,[t[3]||(t[3]=s("i",{class:"fas fa-plus-circle"},null,-1)),L(" "+h(e.trans("add_new_rule")),1)])])])]),_:1},8,["title"])}const Kl=x(_V,[["render",DV],["__scopeId","data-v-34f2c805"]]);const SV={name:"dynamic-sla-field",description:"Dynamic SLA field component",props:{fieldsArr:{type:Array,default:()=>[]},fieldGroup:{type:String,default:""},from:{type:String,default:""},onFieldChange:{type:Function}},data(){return{blockRemoval:!0,selectOptions:[{id:"minute",name:"Minute(s)"},{id:"hour",name:"Hour(s)"},{id:"day",name:"Day(s)"}],labelStyle:{display:"none"},loading:!1,deletePopup:!1,reminderId:"",index:""}},watch:{fieldsArr(){this.blockRemoval=this.fieldsArr.length<=1}},computed:{beforeLabel(){return this.fieldGroup==="response"||this.fieldGroup==="resolution"?"before":"after"}},methods:{addField(){this.fieldsArr.push({id:null,reminder_delta:"",option:"minute",reminder_receivers:{agents:[],agent_types:[]},type:this.fieldGroup}),this.onFieldChange(this.fieldGroup,this.fieldsArr)},removeField(e,t){e?(this.deletePopup=!0,this.reminderId=e,this.index=t):(this.fieldsArr.splice(t,1),this.onFieldChange(this.fieldGroup,this.fieldsArr))},onCloseModal(){this.deletePopup=!1},onSubmitDelete(){this.loading=!0,axios.delete("/api/delete-enforcer/reminder/"+this.reminderId+"/"+this.from).then(e=>{this.fieldsArr.splice(this.index,1),this.onFieldChange(this.fieldGroup,this.fieldsArr),this.onCloseModal(),K(e,"sla")}).catch(e=>{U(e,"sla"),this.loading=!1})},onChange(e,t){let a=t.split("-"),r=a[a.length-1];t.includes(this.fieldGroup+"-count-")&&(this.fieldsArr[r].reminder_delta=e),t.includes(this.fieldGroup+"-option-")&&(this.fieldsArr[r].option=e),t.includes(this.fieldGroup+"-type-")&&(this.fieldsArr[r].reminder_receivers.agent_types=e),t.includes(this.fieldGroup+"-agent-")&&(this.fieldsArr[r].reminder_receivers.agents=e),this.onFieldChange(this.fieldGroup,this.fieldsArr)}},components:{"number-field":St,"dynamic-select":Be,"static-select":it}},MV={key:0,class:"container"},FV={class:"row"},$V={class:"col-sm-12"},TV={class:"float-start"},EV={key:1,class:"row"},LV={class:"col-md-5"},AV={class:"row"},IV={class:"col-md-1 float-end",id:"mt8"},PV=["onClick"],OV={class:"col-sm-2",id:"mt8"},qV={class:""};function xV(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("modal"),g=v("number-field"),b=v("static-select"),w=v("dynamic-select");return i(),d("div",null,[n.deletePopup?(i(),A(p,{key:0,showModal:n.deletePopup,onClose:o.onCloseModal},{title:T(()=>[s("h4",null,h(e.lang("delete")),1)]),fields:T(()=>[n.loading?f("",!0):(i(),d("div",MV,[s("div",FV,[s("div",$V,[s("span",TV,h(e.lang("are_you_sure_you_want_to_delete")),1)])])])),n.loading?(i(),d("div",EV,[u(m,{duration:4e3})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=S=>o.onSubmitDelete()),class:"btn btn-secondary"},[t[2]||(t[2]=s("i",{class:"fas fa-trash","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("submit")),1)])]),_:1},8,["showModal","onClose"])):f("",!0),(i(!0),d(B,null,re(a.fieldsArr,(S,C)=>(i(),d("div",{key:C,class:"row"},[s("div",LV,[s("div",AV,[s("div",IV,[s("span",{class:"fas fa-trash faveo-trash",onClick:M=>o.removeField(S.id,C)},null,8,PV)]),s("span",OV,h(o.beforeLabel),1),u(g,{label:e.lang("count"),value:S.reminder_delta,name:a.fieldGroup+"-count-"+C,classname:"col-sm-3",onChange:o.onChange,type:"number",required:!0,labelStyle:n.labelStyle,placeholder:"n"},null,8,["label","value","name","onChange","labelStyle"]),u(b,{label:e.lang("option"),elements:n.selectOptions,name:a.fieldGroup+"-option-"+C,onChange:o.onChange,classname:"col-sm-5",value:S.option,labelStyle:n.labelStyle,hideEmptySelect:!0},null,8,["label","elements","name","onChange","value","labelStyle"]),t[3]||(t[3]=s("span",{class:"col-sm-1 px-2 text-center",id:"mt8"},"to",-1))])]),u(w,{label:e.lang("type"),value:S.reminder_receivers.agent_types,onChange:o.onChange,name:a.fieldGroup+"-type-"+C,apiEndpoint:"/api/dependency/agent-types",multiple:!0,classname:"col-sm-3",strlength:"20",placeholder:e.lang("select_agent_types"),labelStyle:n.labelStyle},null,8,["label","value","onChange","name","placeholder","labelStyle"]),u(w,{label:e.lang("agents"),value:S.reminder_receivers.agents,onChange:o.onChange,name:a.fieldGroup+"-agent-"+C,apiEndpoint:"/api/dependency/agents?meta=true",multiple:!0,classname:"col-sm-4",strlength:"25",placeholder:e.lang("select_agents"),labelStyle:n.labelStyle},null,8,["label","value","onChange","name","placeholder","labelStyle"])]))),128)),s("div",qV,[s("a",{onClick:t[1]||(t[1]=(...S)=>o.addField&&o.addField(...S)),href:"javascript:;"},[s("span",null,[t[4]||(t[4]=s("i",{class:"fas fa-plus-circle","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("add_new_rule")),1)])])])])}const Jl=x(SV,[["render",xV],["__scopeId","data-v-dfeb04ee"]]);const VV={name:"sla-escalations",description:"SLA Escalation settings page",props:{getUpdateArray:{type:Function},violated:{type:Array,default:()=>[]}},data(){return{responded:[],resolved:[]}},beforeMount(){if(this.violated.length>0){for(let e in this.violated)if(this.violated[e].reminder_delta.includes("~")){let t=this.violated[e].reminder_delta.split("~"),a=t[t.length-2].split("::");this.violated[e].option=t[t.length-1],this.violated[e].reminder_delta=a[a.length-1],this.violated[e].type==="responded"||this.violated[e].type==="response"?this.responded.push(this.violated[e]):this.resolved.push(this.violated[e])}}},methods:{getFields(e,t){this[e]=t,this.getUpdateArray(this.responded,this.resolved)}},components:{"tool-tip":nt,"dynamic-sla-field":Jl}},NV={class:"card card-light"},RV={class:"card-header"},UV={class:"card-title"},jV={class:"card-body"},BV=["innerHTML"],YV=["innerHTML"];function HV(e,t,a,r,n,o){const m=v("tool-tip"),p=v("dynamic-sla-field");return i(),d("div",NV,[s("div",RV,[s("h3",UV,h(e.lang("set_escalation")),1),u(m,{message:e.lang("what_happens_when_this_SLA_is_violated?"),size:"medium"},null,8,["message"])]),s("div",jV,[s("div",null,[s("p",{innerHTML:e.lang("set_escalation_rule_when_a_ticket_is_not_responded_on_time"),id:"desc"},null,8,BV),u(p,{fieldsArr:n.responded,fieldGroup:"responded",onFieldChange:o.getFields,from:"violated"},null,8,["fieldsArr","onFieldChange"])]),t[0]||(t[0]=s("br",null,null,-1)),s("div",null,[s("p",{innerHTML:e.lang("set_escalation_hierarchy_when_a_ticket_is_not_resolved_on_time"),id:"desc"},null,8,YV),u(p,{fieldsArr:n.resolved,fieldGroup:"resolved",onFieldChange:o.getFields,from:"violated"},null,8,["fieldsArr","onFieldChange"])])])])}const WV=x(VV,[["render",HV],["__scopeId","data-v-1537a5d6"]]);const zV={name:"sla-remindeers",description:"SLA Reminders settings page",props:{getUpdateArray:{type:Function},approach:{type:Array,default:()=>[]}},data(){return{response:[],resolution:[]}},beforeMount(){if(this.approach.length>0){for(let e in this.approach)if(this.approach[e].reminder_delta.includes("~")){let t=this.approach[e].reminder_delta.split("~"),a=t[t.length-2].split("::");this.approach[e].option=t[t.length-1],this.approach[e].reminder_delta=a[a.length-1],this.approach[e].type==="response"?this.response.push(this.approach[e]):this.resolution.push(this.approach[e])}}},methods:{getFields(e,t){this[e]=t,this.getUpdateArray(this.response,this.resolution)}},components:{"tool-tip":nt,"dynamic-sla-field":Jl}},GV={class:"card card-light"},KV={class:"card-header"},JV={class:"card-title"},ZV={class:"card-body"},QV=["innerHTML"],XV=["innerHTML"];function e5(e,t,a,r,n,o){const m=v("tool-tip"),p=v("dynamic-sla-field");return i(),d("div",GV,[s("div",KV,[s("h3",JV,h(e.lang("set_sla_reminders")),1),u(m,{message:e.lang("What_happens_when_this_SLA_due_time_approaches"),size:"medium"},null,8,["message"])]),s("div",ZV,[s("div",null,[s("p",{innerHTML:e.lang("set_reminder_rule_when_a_ticket_response_time_approaches"),id:"desc"},null,8,QV),u(p,{fieldsArr:n.response,fieldGroup:"response",onFieldChange:o.getFields,from:"approaching"},null,8,["fieldsArr","onFieldChange"])]),t[0]||(t[0]=s("br",null,null,-1)),s("div",null,[s("p",{innerHTML:e.lang("Set_reminder_rule_when_a_ticket_resolution_time_approaches"),id:"desc"},null,8,XV),u(p,{fieldsArr:n.resolution,fieldGroup:"resolution",onFieldChange:o.getFields,from:"approaching"},null,8,["fieldsArr","onFieldChange"])])])])}const t5=x(zV,[["render",e5],["__scopeId","data-v-fe7c1193"]]);const a5={name:"sla-create-edit",description:"SLA Create and Edit page",setup(){const e=Me();return{showLoader:me(()=>e.getters.showLoader)}},data(){return{title:"create_new_sla_plan",iconClass:"fas fa-save",btnName:"save",sla_id:"",name:"",status:!0,internal_notes:"",selectOptions:[{id:"minute",name:"Min(s)"},{id:"hour",name:"Hour(s)"},{id:"day",name:"Day(s)"}],labelStyle:{display:"none"},submitData:{},count:0,ruleList:[{id:null,field:"",relation:"equal",category:"ticket",value:"",rules:[]}],obj:{id:null,matcher:"any"},ticketCustomFields:[],editData:{},editRuleValues:[],editformcall:!1,approach:[],violated:[],approach_response:[],approach_resolution:[],violated_response:[],violated_resolution:[],priorities:[],channels:{},target_status:!0,targetArr:[],default_sla:!1,slaFormFields:{rules:[]},submitEndpoint:"",formCategories:[],showDeleteModal:!1,deleteType:"",deleteIndex:"",deleteId:"",loading:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e)},created(){window.emitter.on("deleteItem",this.deleteItem)},watch:{editformcall(e){this.editformcall=e}},methods:{getFormData(){this.$store.dispatch("startLoader","getFormData"),V.get("api/form/automator",{params:{category:"sla"}}).then(e=>{this.formCategories=e.data.data.form_categories,this.submitEndpoint=e.data.data.submit_endpoint}).catch(e=>{U(e,"sla")}).finally(()=>{this.$store.dispatch("stopLoader","getFormData")})},getPriorities(){this.$store.dispatch("startLoader","getPriorities"),V.get("/api/dependency/priorities",{params:{limit:"all"}}).then(e=>{this.priorities=e.data.data.priorities;for(var t in this.priorities)this.targetArr.push({id:null,ticket_sla_id:null,p_id:this.priorities[t].id,name:this.priorities[t].name,business_hour:"",respond_count:4,respond_option:"hour",resolve_count:10,resolve_option:"hour",channels:[]})}).catch(e=>{this.targetArr=[],U(e,"sla")}).finally(()=>{this.$store.dispatch("stopLoader","getPriorities")})},getAllowedChannels(){this.$store.dispatch("startLoader","getAllowedChannels"),V.get("/api/sla-alert-channels").then(e=>{this.channels=e.data.data}).catch(e=>{this.channels={},U(e,"sla")}).finally(()=>{this.$store.dispatch("stopLoader","getAllowedChannels")})},getValues(e){this.sla_id=Ue(e),e.indexOf("edit")>=0?(this.title="edit_sla_plan",this.iconClass="fas fa-sync",this.btnName="update",this.editform(this.sla_id)):(this.$store.dispatch("createNewAutomatorInstance"),this.getPriorities()),this.getFormData(),this.getAllowedChannels()},approchesArray(e,t){this.approach_response=e,this.approach_resolution=t,this.approach=[...this.approach_response,...this.approach_resolution]},violatedArray(e,t){this.violated_response=e,this.violated_resolution=t,this.violated=[...this.violated_response,...this.violated_resolution]},finalArray(e){var t=[];for(var a in e){var r=e[a].option,n=e[a].reminder_delta,o=e[a].reminder_receivers.agents,m=e[a].reminder_receivers.agent_types;(o.length||m.length)&&t.push({id:e[a].id,reminder_delta:"diff::"+n+"~"+r,type:e[a].type==="responded"?"response":e[a].type==="resolved"?"resolution":e[a].type,reminder_receivers:{agent_types:m.map(p=>p.id),agents:o.map(p=>p.id)}})}return t},onChange(e,t){this[t]=e;let a=t.split("-"),r=a[a.length-1];t.includes("business_hour-")&&(this.targetArr[r].business_hour=e||""),t.includes("respond_count-")&&(this.targetArr[r].respond_count=e),t.includes("respond_option-")&&(this.targetArr[r].respond_option=e),t.includes("resolve_count-")&&(this.targetArr[r].resolve_count=e),t.includes("resolve_option-")&&(this.targetArr[r].resolve_option=e)},toggleChannel(e,t,a){let r=this.targetArr[t].channels.indexOf(a);r>-1&&this.targetArr[t].channels.splice(r,1),e||this.targetArr[t].channels.push(a)},async validateForm(){const{errors:e,valid:t}=await this.$refs.faveoAutomatorForm.validate(),a=Object.entries(e).find(r=>r[1].length>0);if(!t){Sm(a[0]),console.debug(a[0]+" is not valid!");return}this.submitForm()},getTarget(e){var t=[];for(var a in e){var r={};r.id=e[a].id,r.p_id=e[a].priority_id,r.ticket_sla_id=e[a].ticket_sla_id,r.name=e[a].priority.name,r.business_hour=e[a].business_hour;var n=e[a].resolve_within.split("~"),o=n[n.length-2].split("::");r.resolve_option=n[n.length-1],r.resolve_count=o[o.length-1];var m=e[a].respond_within.split("~"),p=m[m.length-2].split("::");r.respond_option=m[m.length-1],r.respond_count=p[p.length-1],r.channels=e[a].channels,t.push(r)}return t},slaMeta(){let e=[];for(var t in this.targetArr){var a={};a.id=this.targetArr[t].id,a.priority_id=this.targetArr[t].p_id,a.ticket_sla_id=this.targetArr[t].ticket_sla_id,a.business_hour_id=this.targetArr[t].business_hour.id,a.respond_within="diff::"+this.targetArr[t].respond_count+"~"+this.targetArr[t].respond_option,a.resolve_within="diff::"+this.targetArr[t].resolve_count+"~"+this.targetArr[t].resolve_option,a.channels=this.targetArr[t].channels.map(function(r,n){return{channel_id:r}}),e.push(a)}return e},submitForm(){if(this.count++,this.count==1){this.obj.name=this.name,this.obj.status=this.status,this.obj.internal_notes=this.internal_notes,this.obj.matcher=this.$store.getters.getAutomatorData.matcher,this.obj.reminders={approaching:this.finalArray(this.approach),violated:this.finalArray(this.violated)},this.submitData=Object.assign({},this.obj);const e=this.$store.getters.getAutomatorData;this.submitData.rules=Js(e.rules,"rules"),this.submitData.sla_meta=this.slaMeta(),V.post(this.submitEndpoint,{type:"sla",data:this.submitData}).then(t=>{K(t,"sla"),this.sla_id?this.editform(this.sla_id):setTimeout(()=>{this.$router.push({name:"SLA Index"})},3e3)}).catch(t=>{var a,r,n;if(((a=t==null?void 0:t.response)==null?void 0:a.status)===412&&((n=(r=t==null?void 0:t.response)==null?void 0:r.data)!=null&&n.message)){let o={},m={type:"sla",data:this.submitData};Object.keys(t.response.data.message).forEach(p=>{let g=p.split("."),b=m.data[g[1]][g[2]].field+m.data[g[1]][g[2]]._id;o[b]=t.response.data.message[p]}),t.response.data.message=o,U(t,"sla");return}U(t,"sla")}).finally(t=>{this.count=0})}},editform(e){this.$store.dispatch("startLoader","editform"),this.ruleList=[],this.editformcall=!0,V.get("/api/get-enforcer/sla/"+e).then(t=>{try{this.editData=t.data.data,this.name=this.editData.name,this.status=Te(this.editData.status),this.default_sla=Te(this.editData.is_default),this.internal_notes=this.editData.internal_notes,this.obj.id=this.editData.id,this.targetArr=this.getTarget(this.editData.sla_meta),this.editRuleValues=_.cloneDeep(this.editData.rules);const a=new Ti(this.editData.id,Gs(t.data.data.rules,"rule"),[],[],t.data.data.matcher);this.$store.dispatch("createNewAutomatorInstance",a),this.ruleList=this.editData.rules,this.approach=this.editData.reminders.approaching,this.violated=this.editData.reminders.violated,this.$store.dispatch("stopLoader","editform")}catch(a){console.log(a)}}).catch(t=>{U(t,"sla")})},isValid(){const{errors:e,isValid:t}=nV(this.$data);return!!t},deleteItem({type:e,index:t,id:a}){this.showDeleteModal=!0,this.deleteType=e,this.deleteIndex=t,this.deleteId=a},doDelete(){if(ln(this.deleteId)){this.deleteItemFromStore(this.deleteType,this.deleteIndex);return}this.loading=!0,V.delete(`api/delete-enforcer/${this.deleteType}/${this.deleteId}`).then(e=>{this.deleteItemFromStore(this.deleteType,this.deleteIndex),this.showDeleteModal=!1,this.loading=!1,K(e,"sla")}).catch(e=>{this.showDeleteModal=!1,this.loading=!1,U(e,"sla")})},deleteItemFromStore(e,t){this.showDeleteModal=!1,this.loading=!1,this.$store.dispatch("deleteElementFromAutomator",{key:e,index:t}),window.emitter.emit("deletedItem")}},components:{"text-field":we,"status-switch":lt,"dynamic-select":Be,"static-select":it,"number-field":St,"rule-list":Kl,"sla-escalations":WV,"sla-reminders":t5}},s5={class:"col-sm-12"},n5={class:""},o5={key:0,class:"row"},i5={key:1,class:"card card-light"},l5={class:"card-header"},r5={for:"select targets",id:"title",class:"card-title"},d5={class:"card-tools switch-pos"},c5={class:"card-body"},u5={class:"row"},m5={class:"card card-light"},h5={class:"card-header"},p5={for:"select targets",class:"card-title"},_5={class:"card-body"},f5={key:0,class:"table",id:"target_table"},g5={style:{width:"10%"}},v5={style:{width:"25%"}},b5={class:"d-flex"},y5={class:"d-flex"},k5=["onClick"],w5={id:"sla-rules-container"},C5={class:"row"},D5={key:0,class:"card-footer"},S5={class:"modal-title"},M5={key:1};function F5(e,t,a,r,n,o){const m=v("alert"),p=v("reuse-loader"),g=v("status-switch"),b=v("text-field"),w=v("number-field"),S=v("static-select"),C=v("dynamic-select"),M=v("rule-list"),D=v("sla-reminders"),F=v("sla-escalations"),I=v("ValidationObserver"),R=v("modal"),Y=H("focus-first-input");return i(),d("div",s5,[u(m,{componentName:"sla"}),s("div",n5,[r.showLoader?(i(),d("div",o5,[u(p,{"animation-duration":4e3,size:60})])):f("",!0),r.showLoader?f("",!0):(i(),d("div",i5,[s("div",l5,[s("h3",r5,h(e.lang(n.title)),1),s("div",d5,[u(g,{name:"status",value:n.status,onChange:o.onChange,bold:!0,classname:"btn-tool"},null,8,["value","onChange"])])]),u(I,{ref:"faveoAutomatorForm"},{default:T(({values:X,errors:le,validate:ne})=>[s("div",c5,[P((i(),d("div",u5,[u(b,{label:e.lang("name"),value:n.name,type:"text",name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0,rules:"required"},null,8,["label","value","onChange","placehold"])])),[[Y]]),s("div",null,[s("div",m5,[s("div",h5,[s("h3",p5,h(e.lang("sla_targets")),1)]),s("div",_5,[n.targetArr.length>0?(i(),d("table",f5,[s("tbody",null,[s("tr",null,[s("th",g5,h(e.lang("priority")),1),s("th",null,[L(h(e.lang("respond_Within"))+" ",1),t[2]||(t[2]=s("label",{style:{color:"rgb(220, 53, 69)"}},"*",-1))]),s("th",null,[L(h(e.lang("resolve_within"))+" ",1),t[3]||(t[3]=s("label",{style:{color:"rgb(220, 53, 69)"}},"*",-1))]),s("th",v5,h(e.lang("operational_hours")),1),s("th",null,h(e.lang("notify")),1)]),(i(!0),d(B,null,re(n.targetArr,(ce,Q)=>(i(),d("tr",null,[s("td",null,h(ce.name),1),s("td",null,[s("div",b5,[u(w,{label:e.lang("respond_Within"),value:ce.respond_count,name:"respond_count-"+Q,onChange:o.onChange,classname:"w_70",type:"number",labelStyle:n.labelStyle,required:!0,rules:"required|min_value:1",from:"sla",placeholder:"n"},null,8,["label","value","name","onChange","labelStyle"]),t[4]||(t[4]=L("    ")),u(S,{label:e.lang("option"),elements:n.selectOptions,name:"respond_option-"+Q,onChange:o.onChange,value:ce.respond_option,labelStyle:n.labelStyle,hideEmptySelect:!0,classname:"w_95"},null,8,["label","elements","name","onChange","value","labelStyle"])])]),s("td",null,[s("div",y5,[u(w,{label:e.lang("resolve_within"),value:ce.resolve_count,name:"resolve_count-"+Q,onChange:o.onChange,classname:"w_70",labelStyle:n.labelStyle,type:"number",required:!0,placeholder:"n",rules:"required|min_value:1",from:"sla"},null,8,["label","value","name","onChange","labelStyle"]),t[5]||(t[5]=L("    ")),u(S,{label:e.lang("option"),elements:n.selectOptions,name:"resolve_option-"+Q,onChange:o.onChange,value:ce.resolve_option,labelStyle:n.labelStyle,hideEmptySelect:!0,classname:"w_95"},null,8,["label","elements","name","onChange","value","labelStyle"])])]),s("td",null,[u(C,{label:e.lang("operational_hours"),multiple:!1,name:"business_hour-"+Q,labelStyle:n.labelStyle,apiEndpoint:"/api/dependency/business-hours",value:ce.business_hour,onChange:o.onChange,strlength:17,required:!1,clearable:!!ce.business_hour},null,8,["label","name","labelStyle","value","onChange","clearable"])]),(i(!0),d(B,null,re(n.channels,j=>(i(),d("td",null,[s("i",{class:G([j.icon,ce.channels.includes(j.id)?"active-channel":"inactive-channel"]),"aria-hidden":"true",onClick:ye=>o.toggleChannel(ce.channels.includes(j.id),Q,j.id),style:{"pointer-events":"initial",cursor:"pointer"}},null,10,k5)]))),256))]))),256))])])):f("",!0)])])]),s("div",null,[s("div",w5,[n.default_sla?f("",!0):(i(),A(M,{key:0,categories:n.formCategories},null,8,["categories"]))]),s("div",null,[u(m,{componentName:"reminder"})]),u(D,{getUpdateArray:o.approchesArray,approach:n.approach},null,8,["getUpdateArray","approach"]),u(F,{getUpdateArray:o.violatedArray,violated:n.violated},null,8,["getUpdateArray","violated"])]),s("div",C5,[u(b,{label:e.lang("admin_notes"),value:n.internal_notes,type:"textarea",name:"internal_notes",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-12",rows:10},null,8,["label","value","onChange","placehold"])])]),r.showLoader?f("",!0):(i(),d("div",D5,[s("button",{class:"btn btn-primary",type:"button",onClick:t[0]||(t[0]=ce=>o.validateForm())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.lang(n.btnName)),1)])]))]),_:1},512)]))]),u(Ae,{name:"modal"},{default:T(()=>[n.showDeleteModal?(i(),A(R,{key:0,showModal:!0,onClose:()=>n.showDeleteModal=!1,containerStyle:{width:"400px"}},{title:T(()=>[s("h4",S5,h(e.lang("delete")),1)]),fields:T(()=>[n.loading?(i(),A(p,{key:0})):f("",!0),n.loading?f("",!0):(i(),d("span",M5,h(e.lang("are_you_sure_you_want_to_delete")),1))]),controls:T(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:t[1]||(t[1]=X=>o.doDelete()),class:"btn btn-secondary"},[t[6]||(t[6]=s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})])}const Go=x(a5,[["render",F5],["__scopeId","data-v-f78dc551"]]),$5={name:"business-hours-index",description:"Business hours table component",data(){return{columns:["name","status","action"],options:{sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{status:function(e,t){return this.h(ma,{data:t})},action:function(e,t){return this.h(Ye,{data:t})}},headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},sortable:["name","status"],filterable:["name","status"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(e){return{sort:e.orderBy?e.orderBy:"id",order:e.ascending?"desc":"asc",search:e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.message.data.map(t=>(t.edit_url="/business-hour/"+t.id+"/edit",t.delete_url=window.axios.defaults.baseURL+"/sla/business-hours/delete/"+t.id,t.active=t.active=="1"?"active":"inactive",t)),count:e.message.total}},orderBy:{column:"id",ascending:!0}},apiUrl:"/sla/business-hours/getindex/"}}},T5={class:"col-sm-12"},E5={class:"card card-light"},L5={class:"card-header"},A5={class:"card-title"},I5={class:"card-tools"},P5={class:"card-body"};function O5(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",T5,[u(m,{componentName:"dataTableModal"}),s("div",E5,[s("div",L5,[s("h3",A5,h(e.lang("list_of_business_hours")),1),s("div",I5,[P((i(),A(p,{class:"btn btn-tool",to:"/business-hour/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,e.lang("create_business_hour")]])])]),s("div",P5,[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options},null,8,["url","dataColumns","option"])])])])}const q5=x($5,[["render",O5]]);function x5(e){const{holiday_description:t,date:a}=e;let r={holiday_description:[t,"isRequired"],date:[a,"isRequired"]};const n=new Le(N),{errors:o,isValid:m}=n.validate(r);return Ee.dispatch("setValidationError",o),{errors:o,isValid:m}}function V5(e){const{name:t,description:a,timezone:r,dateWithTime:n,hours:o}=e;let m={name:[t,"isRequired"],description:[a,"isRequired"],timezone:[r,"isRequired"]},p,g;o===1&&(n.map((S,C)=>{S.status==="Open_custom"&&(m["open_time"+C]=[S.open_time,"isRequired"],m["close_time"+C]=[S.close_time,"isRequired"])}),p=N5(n));const w=new Le(N).validate(m);return g=w.errors,o===1?p=p&&w.isValid:p=w.isValid,Ee.dispatch("setValidationError",g),{errors:g,isValid:p}}function N5(e){let t=0;return e.map(a=>{if(typeof a.open_time=="object"&&(a.open_time=Ie(a.open_time).format("HH:mm")),typeof a.close_time=="object"&&(a.close_time=Ie(a.close_time).format("HH:mm")),a.status=="Open_custom"&&a.open_time==a.close_time){let r=N("open_and_close_should_not_be_same");t++,Ee.dispatch("setAlert",{type:"danger",message:r,component_name:"hours-table"})}if(a.status=="Open_custom"&&a.open_time>a.close_time){let r=N("open_time_should_be_less_than_close_time");t++,Ee.dispatch("setAlert",{type:"danger",message:r,component_name:"hours-table"})}}),!(t>0)}const R5={name:"hours-table",description:"hours table component",components:{"date-time-field":Dt},props:{day:{type:Object,default:()=>{}},index:{type:Number,default:0},onHoursChange:{type:Function},onClosed:{type:Function},onOpenfixed:{type:Function}},data:()=>({isDisabled:!1,openTimeOptions:{start:"00:00",step:"00:30",end:"23:30"},closeTimeOptions:{start:"00:00",step:"00:30",end:"23:30"},labelStyle:{display:"none"},moment:Ie}),watch:{day(e,t){this.day=newvalue}},beforeMount(){let e=Ie(this.day.open_time,"HH:mm").format();this.closeTimeOptions.start=this.day.open_time!==null?Ie(e).add(30,"minutes").format("HH:mm"):"00:00"},methods:{onChangeStartTime(e,t){this.closeTimeOptions.start=Ie(e).add(30,"minutes").format("HH:mm"),this.day.close_time=Ie(e).add(30,"minutes").format("HH:mm");let a=t.split(""),r=a[a.length-1];this.onHoursChange("open_time",e,r)},onChangeEndTime(e,t){let a=t.split(""),r=a[a.length-1];this.onHoursChange("close_time",e,r)},daySelect(e,t){let a=e==="Closed"?"Open_custom":"Closed";this.onClosed(a,t),this.onHoursChange("close_time","00:00",t),this.onHoursChange("open_time","00:00",t)},open24(e,t){let a=e==="Open_custom"?"Open_fixed":"Open_custom";this.onClosed(a,t),this.onHoursChange("close_time","00:00",t),this.onHoursChange("open_time","00:00",t)}}},U5={id:"hours_table"},j5={id:"example2",class:"table"},B5={class:"inputField"},Y5={style:{width:"20%"}},H5={class:"label_align"},W5=["checked"],z5={id:"open24"},G5={class:"label_align1"},K5=["checked","disabled"],J5={id:"timeSelect"},Z5={class:"row"};function Q5(e,t,a,r,n,o){const m=v("date-time-field");return i(),d("div",U5,[s("table",j5,[s("thead",B5,[s("tr",null,[s("td",Y5,[s("label",H5,[s("input",{class:"checkbox_align",id:"day_select",type:"checkbox",name:"day",onChange:t[0]||(t[0]=p=>o.daySelect(a.day.status,a.index)),checked:a.day.status!="Closed"},null,40,W5),L(" "+h(e.lang("day"+a.index)),1)])]),s("td",z5,[s("label",G5,[s("input",{class:"checkbox_align",id:"open24_hour",type:"checkbox",name:"open_hour",onChange:t[1]||(t[1]=p=>o.open24(a.day.status,a.index)),checked:a.day.status=="Open_fixed",disabled:a.day.status=="Closed"},null,40,K5),L(" "+h(e.lang("open24Hours")),1)])]),s("td",J5,[s("div",Z5,[u(m,{id:"open_time"+a.index,label:e.lang("date"),value:e.moment(a.day.open_time,"H:m"),labelStyle:e.labelStyle,name:"open_time"+a.index,type:"time",onChange:o.onChangeStartTime,required:a.day.required,"time-picker-options":e.openTimeOptions,format:"HH:mm",classname:"col-sm-6",clearable:!1,disabled:a.day.status=="Open_fixed"||a.day.status=="Closed",place:"From...",checkManual:!0},null,8,["id","label","value","labelStyle","name","onChange","required","time-picker-options","disabled"]),u(m,{id:"close_time"+a.index,label:e.lang("date"),value:e.moment(a.day.close_time,"H:m"),labelStyle:e.labelStyle,name:"close_time"+a.index,type:"time",onChange:o.onChangeEndTime,required:a.day.required,"time-picker-options":e.closeTimeOptions,format:"HH:mm",classname:"col-sm-6",clearable:!1,disabled:a.day.status=="Open_fixed"||a.day.status=="Closed",place:"To...",checkManual:!0},null,8,["id","label","value","labelStyle","name","onChange","required","time-picker-options","disabled"])])])])])])])}const X5=x(R5,[["render",Q5]]);const eN={props:["successMsg","errorMsg","successShow","errorShow","extraData","baan"],data(){return{}},created(){window.emitter.on("startSlide",this.SlideUp)},watch:{successMsg(e,t){return e},errorMsg(e,t){return e},successShow(e,t){return e},errorShow(e,t){return e},extraData(e,t){return e},ban(e,t){return e}}},tN={id:"alert"},aN={class:"row"},sN={class:"col-md-12"},nN={key:0},oN={key:1},iN={id:"bottom"},lN=["innerHTML"];function rN(e,t,a,r,n,o){return i(),d("div",tN,[s("div",aN,[s("div",sN,[s("div",{class:"alert alert-success alert-dismissable",style:bt({display:a.successShow})},[t[0]||(t[0]=s("i",{class:"fa fa-check-circle"},null,-1)),L(" "+h(e.lang(a.successMsg))+" ",1),t[1]||(t[1]=s("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1))],4),s("div",{id:"merge-err-alert",class:"alert alert-danger alert-dismissable",style:bt({display:a.errorShow})},[t[4]||(t[4]=s("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1)),a.errorMsg.length<5?(i(),d("span",nN,[(i(!0),d(B,null,re(a.errorMsg,m=>(i(),d("p",null,[t[2]||(t[2]=s("i",{class:"fa fa-warning"},null,-1)),L(" "+h(e.lang(m)),1)]))),256))])):f("",!0),a.errorMsg.length>5?(i(),d("span",oN,[s("p",iN,[t[3]||(t[3]=s("i",{class:"fa fa-warning"},null,-1)),L(" "+h(e.lang(a.errorMsg)),1)])])):f("",!0),s("div",{innerHTML:a.extraData},null,8,lN)],4)])])])}const Zl=x(eN,[["render",rN],["__scopeId","data-v-1978bc3f"]]);const dN={name:"holiday",description:"holiday create edit and delete component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},addRow:{type:Function},deleteRow:{type:Function},data:{type:Array},editData:{type:Object},deleteData:{type:String},index:{type:Number}},data:()=>({before:Ie().year()-1+"-12-31",after:Ie().year()+"-12-31",holiday_description:"",date:"",lang_locale:"",containerStyle:{width:"500px"},SuccessAlert:"none",success:"",error:"",ErrorAlert:"none",btnName:"",iconClass:"fas fa-save",page_title:"",classname:"btn btn-primary",moment:Ie}),created(){this.lang_locale=localStorage.getItem("LANGUAGE"),this.editData.description!==void 0?(this.btnName="update",this.iconClass="fas fa-sync",this.page_title="edit_holiday",this.holiday_description=this.editData.description,this.date=Ie(this.editData.date+"-"+Ie().year(),"MM-DD-YYYY")):this.deleteData==="yes"?(this.btnName="delete",this.iconClass="fas fa-trash",this.page_title="delete_holiday",this.classname="btn btn-secondary"):(this.btnName="save",this.iconClass="fas fa-save",this.page_title="add_new")},methods:{isValid(){const{errors:e,isValid:t}=x5(this.$data);return!!t},onChange(e,t){this[t]=e},onSubmit(){if(this.deleteData==="yes")this.deleteRow(this.index);else if(this.isValid())if(this.editData.description!==void 0){const e=this.data.filter(t=>t.date!==this.editData.date);this.updateData(e)}else this.insertData()},updateData(e){e.some(a=>a.date===Ie(this.date).format("MM-DD-YYYY"))===!1?(this.editData.date=Ie(this.date).format("MM-DD-YYYY"),this.editData.description=this.holiday_description,this.data[this.index]=this.editData,this.onClose()):this.errorMessage()},insertData(){if(this.data.some(t=>t.date===Ie(this.date).format("MM-DD-YYYY"))===!1){const t={date:Ie(this.date).format("MM-DD-YYYY"),description:this.holiday_description};this.addRow(t)}else this.errorMessage()},errorMessage(){this.ErrorAlert="block",this.error="date_already_taken",setTimeout(()=>{this.ErrorAlert="none"},5e3)}},components:{"text-field":we,"date-time-field":Dt,"alert-notification":Zl}},cN={class:"modal-title"},uN={key:0},mN={key:1},hN={class:"row"},pN={class:"form-group col-sm-12"},_N={class:"form-group col-sm-12"};function fN(e,t,a,r,n,o){const m=v("alert-notification"),p=v("date-time-field"),g=v("text-field"),b=v("modal");return i(),d("div",null,[a.showModal?(i(),A(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle,addRow:a.addRow,deleteRow:a.deleteRow},{alert:T(()=>[u(m,{successShow:e.SuccessAlert,errorShow:e.ErrorAlert,successMsg:e.lang(e.success),errorMsg:e.lang(e.error)},null,8,["successShow","errorShow","successMsg","errorMsg"])]),title:T(()=>[s("h4",cN,h(e.lang(e.page_title)),1)]),fields:T(()=>[a.deleteData==="yes"?(i(),d("div",uN,[s("span",null,h(e.lang("are_you_sure_you_want_to_delete")),1)])):f("",!0),a.deleteData!=="yes"?(i(),d("div",mN,[s("div",hN,[s("div",pN,[u(p,{label:e.lang("date"),value:e.date,type:"date",name:"date",onChange:o.onChange,required:!0,format:"MM-DD-YYYY",classname:"col-sm-6",clearable:!1,disabled:!1,"not-before":e.before,"not-after":e.after},null,8,["label","value","onChange","not-before","not-after"])]),s("div",_N,[u(g,{label:e.lang("description"),value:e.holiday_description,type:"textarea",name:"holiday_description",onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,length:35,classname:"col-sm-12","show-word-limit":!0},null,8,["label","value","onChange","placehold"])])])])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...w)=>o.onSubmit&&o.onSubmit(...w)),class:G(e.classname)},[s("i",{class:G(e.iconClass),"aria-hidden":"true"},null,2),L(" "+h(e.lang(e.btnName)),1)],2)]),_:1},8,["showModal","onClose","containerStyle","addRow","deleteRow"])):f("",!0)])}const gN=x(dN,[["render",fN]]);const vN={name:"holiday-list",description:"displays list of agents in tabular form with required actions",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime),formattedDate:me(()=>e.getters.formattedDate)}},props:{addRow:{type:Function},deleteRow:{type:Function},holidayData:{type:Array,default:()=>[]}},data(){return{showModal:!1,data:this.holidayData,editData:{},deleteData:"no",index:0,SuccessAlert:"none",success:"",error:"",ErrorAlert:"none",moment:Ie}},watch:{holidayData(e,t){this.data=e}},methods:{onClose(){this.showModal=!this.showModal,this.editData={},this.deleteData="no"},addRoww(e){this.data.push(e),this.onClose()},deleteRoww(e){this.data.splice(e,1),this.onClose()},deleteHoliday(e){this.showModal=!0,this.deleteData="yes",this.index=e},editHoliday(e,t){this.showModal=!0,this.editData=e,this.index=t}},components:{"holiday-event":gN,"alert-notification":Zl,"tool-tip":nt}},bN={class:"card card-light"},yN={class:"card-header"},kN={class:"card-title"},wN={class:"card-tools"},CN={class:"card-body"},DN={key:0,class:"table"},SN={class:"head"},MN={class:"head"},FN={class:"head"},$N=["onClick"],TN=["onClick"],EN={key:1,class:"table"},LN={colspan:"3",style:{"text-align":"center"}};function AN(e,t,a,r,n,o){const m=v("tool-tip"),p=v("alert-notification"),g=v("holiday-event"),b=H("tooltip");return i(),d("div",bN,[s("div",yN,[s("h3",kN,[L(h(e.lang("yearly_holiday_list"))+" ",1),u(m,{message:e.lang("holidays_will_be_ignored_when_calculating_SLA_for_a_ticket"),size:"medium"},null,8,["message"])]),s("div",wN,[P((i(),d("button",{class:"btn btn-tool",onClick:t[0]||(t[0]=w=>n.showModal=!0)},t[1]||(t[1]=[s("span",{class:"glyphicon glyphicon-plus"},null,-1)]))),[[b,e.lang("add_new")]])])]),s("div",CN,[u(p,{successShow:n.SuccessAlert,errorShow:n.ErrorAlert,successMsg:e.lang(n.success),errorMsg:e.lang(n.error)},null,8,["successShow","errorShow","successMsg","errorMsg"]),n.data.length!=0?(i(),d("table",DN,[s("thead",null,[s("tr",null,[s("th",SN,h(e.lang("date")),1),s("th",MN,h(e.lang("description")),1),s("th",FN,h(e.lang("action")),1)])]),s("tbody",null,[(i(!0),d(B,null,re(n.data,(w,S)=>(i(),d("tr",{key:S,style:{"text-align":"center"}},[s("td",null,h(r.formattedDate(n.moment(w.date,"MM-DD-YYYY"))),1),s("td",null,h(w.description),1),s("td",null,[s("a",{id:"edit",onClick:C=>o.editHoliday(w,S),href:"javascript:void(0)"},t[2]||(t[2]=[s("span",{title:"Edit Holiday",class:"btn btn-primary"},[s("i",{class:"fa fa-edit"})],-1)]),8,$N),s("a",{id:"delete",onClick:C=>o.deleteHoliday(S),href:"javascript:void(0)"},t[3]||(t[3]=[s("span",{title:"Delete Holiday",class:"btn btn-secondary"},[s("i",{class:"fas fa-trash"})],-1)]),8,TN)])]))),128))])])):(i(),d("table",EN,[s("tbody",null,[s("tr",null,[s("td",LN,h(e.lang("no-data-to-show")),1)])])])),n.showModal?(i(),A(g,{key:2,onClose:o.onClose,data:a.holidayData,index:n.index,editData:n.editData,deleteData:n.deleteData,showModal:n.showModal,addRow:o.addRoww,deleteRow:o.deleteRoww},null,8,["onClose","data","index","editData","deleteData","showModal","addRow","deleteRow"])):f("",!0)])])}const IN=x(vN,[["render",AN],["__scopeId","data-v-a6058933"]]);const PN={name:"business-hours",description:"Business hours create and edit component",props:{onHoursChange:{type:Function},onClosed:{type:Function},onOpenfixed:{type:Function}},beforeMount(){this.getInitialValues()},data:()=>({status:1,name:"",description:"",timezone:"",hours:0,radioOptions:[{name:"select_working_days/hours",value:1},{name:"247hours",value:0}],holidays:[],dateWithTime:[],prePopulate:!1,btnName:"",btnClass:"",page_title:"",loading:!1,size:60,color:"#1d78ff",apiUrl:"",make_default:!1}),methods:{getInitialValues(){const e=window.location.pathname;if(this.loading=!0,e.indexOf("edit")>=0){this.btnName="update",this.btnClass="fas fa-sync",this.page_title="edit_business_hour",this.prePopulate=!0;const t=Ue(e);V.get(`/api/business-hours/edit/${t}`).then(a=>{this.updateStatesWithData(a.data.data),this.apiUrl="sla/business-hours/store?id="+t,this.make_default=a.data.data.default,this.loading=!1}).catch(a=>{U(a)})}else this.btnName="save",this.btnClass="fas fa-save",this.page_title="create_new_business_hour",this.apiUrl="/sla/business-hours/store",this.dateWithTime=[{days:"Sunday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Monday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Tuesday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Wednesday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Thursday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Friday",status:"Open_custom",open_time:"00:00",close_time:"00:30"},{days:"Saturday",status:"Open_custom",open_time:"00:00",close_time:"00:30"}],this.loading=!1,this.name="",this.description="",this.hours=0,this.status=1,this.timezone="",this.holidays=[],this.make_default=!1},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},onChange(e,t){this[t]=e,t==="timezone"&&(e&&e.id===void 0?this.timezone.id=1:e==null&&(this.timezone=""))},onHourChange(e,t,a){e==="open_time"?this.dateWithTime[a].open_time=t:this.dateWithTime[a].close_time=t},changeDefault(e){e.target.checked===!0?this.make_default="on":this.make_default="off"},onClose(e,t){this.dateWithTime[t].status=e},onOpenfix(e,t){this.dateWithTime[t].status=e},isValid(){const{errors:e,isValid:t}=V5(this.$data);return!!t},onSubmit(){if(this.status=this.status?1:0,this.make_default==="on"&&(this.status=1),this.isValid()){const t={};t.name=this.name,t.description=this.description,t.time_zone=this.timezone.id,t.status=this.status,t.hours=this.hours,t.holiday=this.holidays,t.default_business_hours=this.make_default;for(var e in this.dateWithTime)if(this.hours===1){let a=this.dateWithTime[e];if(a.status==="Closed")t["type"+e]="Closed";else if(a.status==="Open_fixed")t["type"+e]="Open_fixed";else{let r=Ie(a.open_time).format("hh:mm"),n=Ie(a.close_time).format("hh:mm");r==="Invalid date"&&n==="Invalid date"?t["type"+e]={from:a.open_time,to:a.close_time}:r==="Invalid date"&&n!=="Invalid date"?t["type"+e]={from:a.open_time,to:Ie(a.close_time).format("HH:mm")}:r!=="Invalid date"&&n==="Invalid date"?t["type"+e]={from:Ie(a.open_time).format("HH:mm"),to:a.close_time}:t["type"+e]={from:Ie(a.open_time).format("HH:mm"),to:Ie(a.close_time).format("HH:mm")}}}else t["type"+e]="Open_fixed";this.loading=!0,V.post(this.apiUrl,t).then(a=>{this.loading=!1,K(a),this.btnName==="save"&&setTimeout(()=>{this.$router.push("/business-hour/list")},3e3),this.getInitialValues()}).catch(a=>{this.loading=!1,U(a)})}}},components:{"hours-table":X5,"status-switch":lt,"text-field":we,"dynamic-select":Be,"radio-button":Qe,"holiday-list":IN}},ON={class:"col-sm-12"},qN={class:"card card-light"},xN={class:"card-header"},VN={class:"card-title"},NN={class:"card-body"},RN={class:"row"},UN={class:"row"},jN={class:"form-group col-sm-2"},BN={for:"status"},YN={key:0},HN={class:"card card-light"},WN={class:"card-header"},zN={for:"select hours",class:"card-title"},GN={class:"card-body"},KN={for:"holidays"},JN={id:"text"},ZN={class:"label_align1"},QN=["checked"],XN={key:1,class:"row",style:{"margin-top":"30px","margin-bottom":"30px"}},eR={class:"card-footer"};function tR(e,t,a,r,n,o){const m=v("alert"),p=v("text-field"),g=v("dynamic-select"),b=v("radio-button"),w=v("status-switch"),S=v("hours-table"),C=v("holiday-list"),M=v("reuse-loader"),D=H("focus-first-input");return i(),d("div",ON,[u(m),s("div",qN,[s("div",xN,[s("h3",VN,h(e.lang(e.page_title)),1)]),s("div",NN,[e.loading===!1?(i(),d(B,{key:0},[P((i(),d("div",RN,[u(p,{label:e.lang("title"),value:e.name,type:"text",name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(g,{label:e.lang("time_zone"),multiple:!1,name:"timezone",required:!0,classname:"col-sm-6",apiEndpoint:"/api/dependency/time-zones",value:e.timezone,onChange:o.onChange,clearable:!!e.timezone},null,8,["label","value","onChange","clearable"])])),[[D]]),s("div",UN,[u(p,{label:e.lang("description"),value:e.description,type:"textarea",name:"description",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-5",required:!0},null,8,["label","value","onChange","placehold"]),u(b,{options:e.radioOptions,label:e.lang("hours"),name:"hours",value:e.hours,onChange:o.onChange,classname:"form-group col-sm-5",optionClass:"col-sm-6"},null,8,["options","label","value","onChange"]),s("div",jN,[s("label",BN,h(e.lang("status")),1),t[2]||(t[2]=s("span",{style:{color:"red"}}," *",-1)),t[3]||(t[3]=s("br",null,null,-1)),u(w,{name:"status",value:e.status,onChange:o.onChange,classname:"pull-left",bold:!0},null,8,["value","onChange"])])]),e.hours?(i(),d("div",YN,[u(m,{componentName:"hours-table"}),s("div",HN,[s("div",WN,[s("h3",zN,h(e.lang("open_hours")),1)]),s("div",GN,[(i(!0),d(B,null,re(e.dateWithTime,(F,I)=>(i(),A(S,{key:F.days,day:F,index:I,onHoursChange:o.onHourChange,onClosed:o.onClose,onOpenfixed:o.onOpenfix},null,8,["day","index","onHoursChange","onClosed","onOpenfixed"]))),128))])])])):f("",!0),s("div",KN,[u(C,{holidayData:e.holidays},null,8,["holidayData"])]),s("div",JN,[s("label",ZN,[s("input",{class:"checkbox_align",type:"checkbox",name:"default",onChange:t[0]||(t[0]=(...F)=>o.changeDefault&&o.changeDefault(...F)),checked:e.make_default=="on"},null,40,QN),L("  "+h(e.lang("make-default-business-hours")),1)])])],64)):f("",!0),e.loading===!0?(i(),d("div",XN,[u(M,{"animation-duration":4e3,color:e.color,size:e.size},null,8,["color","size"])])):f("",!0)]),s("div",eR,[s("button",{type:"button",id:"submit_btn",class:"btn btn-primary",onClick:t[1]||(t[1]=(...F)=>o.onSubmit&&o.onSubmit(...F))},[s("i",{class:G(e.btnClass)},null,2),L(" "+h(e.lang(e.btnName)),1)])])])])}const Ko=x(PN,[["render",tR],["__scopeId","data-v-7799188c"]]),aR={name:"form-group-list",description:"List down the form groups",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},data:()=>({columns:["name","created_at","group_type","action"],options:{},showDrop:!1}),beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3);let e=this;this.options={headings:{name:this.trans("name"),created_at:this.trans("creation-date"),group_type:this.trans("form_group_type"),action:this.trans("action")},texts:{filter:"",limit:"",filterPlaceholder:"Search"},templates:{action:function(t,a){return e.h(Ye,{data:a})}},sortable:["name","created_at","group_type"],filterable:["name","created_at","group_type"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"created_at","sort-order":t.ascending?"asc":"desc","search-query":t.query,page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url=a.edit_url,a.delete_url=e.basePath()+"/api/form-group/"+a.id,a.created_at=e.formattedTime(a.created_at),a)),count:t.data.total}}}},methods:{formGroupListMounted(){window.emitter.emit("create-form-group-button-mounted")}}},sR={class:"col-sm-12",id:"main-div"},nR={class:"card card-light",id:"box-primary"},oR={class:"card-header"},iR={class:"card-title",id:"box-title-1"},lR={class:"card-tools"},rR={href:"javascript:;",class:"btn-tool dropdown-toggle","data-bs-toggle":"dropdown"},dR={class:"dropdown-menu dropdown-menu-right",role:"menu"},cR={id:"form-group-create-button"},uR={class:"card-body"};function mR(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",sR,[u(m,{componentName:"dataTableModal"}),s("div",nR,[s("div",oR,[s("h3",iR,h(e.lang("form_group_list")),1),s("div",lR,[P((i(),d("a",rR,t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)]))),[[b,e.lang("add_fields")]]),P(s("div",dR,[s("span",cR,h(o.formGroupListMounted()),1),u(p,{id:"add-fg-link",class:"dropdown-item",to:"/form-group/create"},{default:T(()=>[L(h(e.lang("new_ticket_form_group")),1)]),_:1})],512),[[kt,e.showDrop]])])]),s("div",uR,[u(g,{url:"api/form-group-list",dataColumns:e.columns,option:e.options},null,8,["dataColumns","option"])])])])}const hR=x(aR,[["render",mR]]),pR={name:"automator-custom-type-field",props:{field:{type:Object,required:!0},actionEmail:{type:Object,required:!0},index:{type:Number,required:!0}},data:()=>({users:null,subject:"",body:""}),beforeMount(){this.users=this.actionEmail.users,this.subject=this.actionEmail.subject,this.body=this.actionEmail.body},methods:{onChange(e,t){this.$store.dispatch("updateActionEmail",{index:this.index,key:t.replace(this.field.key+"_",""),value:e})}},components:{"dynamic-select":Be,"text-field":we}},_R={style:{"padding-left":"3rem","padding-right":"3rem"}};function fR(e,t,a,r,n,o){const m=v("dynamic-select"),p=v("text-field"),g=v("tiny-editor-with-validation");return i(),d("div",_R,[a.field.key==="mail_agent"?(i(),A(m,{key:0,label:e.trans("agent"),name:"users",apiEndpoint:"/api/dependency/agents",value:e.users,onChange:o.onChange,rules:"required",required:!0,multiple:!0},null,8,["label","value","onChange"])):f("",!0),u(p,{label:e.trans("subject"),type:"text",name:`${a.field.key}_subject`,value:e.subject,onChange:o.onChange,placehold:e.lang("enter_a_value"),rules:"required",required:!0},null,8,["label","name","value","onChange","placehold"]),u(g,{label:e.trans("body"),name:`${a.field.key}_body`,id:`${a.field.key}_body`,value:e.body||"",onChange:o.onChange,rules:"required",required:!0},null,8,["label","name","id","value","onChange"])])}const gR=x(pR,[["render",fR]]);const vR={name:"faveo-automator-action",setup(){const e=Me();return{actionList:me(()=>e.getters.getAutomatorActions),selectedActionKeys:me(()=>e.getters.getSelectedActionKeys)}},props:{action:{type:on,required:!0},index:{type:Number,required:!0},actionEndpoint:{type:String,default:""}},data:()=>({field:null,pageType:"",loading:!1}),created(){window.emitter.on("deletedItem",this.deletedItem)},beforeMount(){this.field=this.action.field;let e=new URLSearchParams(window.location.search);this.pageType=e.get("page_type")?e.get("page_type"):"ticket"},methods:{onFieldChange(e){this.field=e,this.$store.dispatch("onFieldChange",{key:"actions",index:this.index,field:this.field})},deleteAction(){window.emitter.emit("deleteItem",{type:"action",index:this.index,id:this.action._id})},deletedItem(){this.loading=!0,setTimeout(()=>{this.loading=!1},1)}},computed:{getApiParameters(){return{ignore_ids:this.actionList.filter(e=>e.field).map(e=>e.field.id)}}},components:{"dynamic-select":Be,"automator-form-field":Gl,"automator-custom-type-field":gR}},bR={class:"col-sm-auto"};function yR(e,t,a,r,n,o){const m=v("custom-loader"),p=v("dynamic-select"),g=v("automator-custom-type-field"),b=v("automator-form-field");return i(),d("div",{class:G(["row","faveo-automator-action",e.field&&e.field.disabled?"disabledDiv":""])},[e.loading?(i(),A(m,{key:0})):f("",!0),s("span",bR,[s("i",{class:"fas fa-trash faveo-trash",onClick:t[0]||(t[0]=w=>o.deleteAction())})]),e.loading?f("",!0):(i(),A(p,{key:1,classname:"col-sm-5",labelStyle:{display:"none"},multiple:!1,id:"action-"+a.action._id,name:"action-"+a.action._id,"api-endpoint":a.actionEndpoint,"api-parameters":o.getApiParameters,optionLabel:"label",value:e.field,onChange:o.onFieldChange,clearable:!1,strlength:60,removeVal:!1},null,8,["id","name","api-endpoint","api-parameters","value","onChange"])),e.field!==null?(i(),d(B,{key:2},[e.field.data_type==="custom"?(i(),d("div",{class:"col-sm-12",key:a.index},[u(g,{field:e.field,"action-email":a.action.action_email,index:a.index},null,8,["field","action-email","index"])])):(i(),d("div",{class:"col-sm-6",key:JSON.stringify(e.field)},[(i(),A(b,{key:a.action._id,enforcerType:"action","form-field":e.field,"enforcer-object":a.action,labelStyle:{display:"none"}},null,8,["form-field","enforcer-object"]))]))],64)):f("",!0)],2)}const kR=x(vR,[["render",yR],["__scopeId","data-v-032f5fcf"]]),wR={name:"action-list",setup(){const e=Me();return{actionList:me(()=>e.getters.getAutomatorActions)}},props:{actionEndpoint:{type:String,default:""}},data(){return{pageType:""}},beforeMount(){Te(this.actionList)||this.addNew();let e=new URLSearchParams(window.location.search);this.pageType=e.get("page_type")?e.get("page_type"):"ticket"},methods:{addNew(){this.$store.dispatch("addNewElementToAutomatorProperty",{key:"actions",value:new on})}},components:{"faveo-automator-action":kR}},CR={style:{"margin-top":"1rem"}};function DR(e,t,a,r,n,o){const m=v("faveo-automator-action"),p=v("faveo-box");return i(),A(p,{title:e.trans("perform_these_actions")},{default:T(()=>[(i(!0),d(B,null,re(r.actionList,(g,b)=>(i(),A(m,{key:g._id,action:g,actionEndpoint:a.actionEndpoint,index:b},null,8,["action","actionEndpoint","index"]))),128)),s("div",CR,[s("a",{onClick:t[0]||(t[0]=g=>o.addNew()),href:"javascript:;"},[s("span",null,[t[1]||(t[1]=s("i",{class:"fas fa-plus-circle"},null,-1)),L(" "+h(e.trans("add_new_action")),1)])])])]),_:1},8,["title"])}const SR=x(wR,[["render",DR]]);const MR={name:"faveo-automator-event",props:{event:{type:os,required:!0},index:{type:Number,required:!0},pageType:{type:String,default:"ticket"}},data:()=>({eventObj:null}),beforeMount(){this.eventObj=JSON.parse(JSON.stringify(this.event))},computed:{apiInfoUrl(){return Jt.convertStringOfPropertiesToObject(this.eventObj.api_info).url},selectedField(){return ln(this.eventObj._id)?null:this.eventObj.field}},methods:{deleteEvent(){window.emitter.emit("deleteItem",{type:"event",index:this.index,id:this.eventObj._id})},onFieldChange(e){this.eventObj=new os(this.eventObj._id,e,null,null,e.data_type,e.api_info),this.updateEventDataToStore()},onChange(e,t){t.includes("from-")?this.eventObj.from=e:t.includes("to-")?this.eventObj.to=e:this.eventObj[t]=e,this.updateEventDataToStore()},updateEventDataToStore(){this.$store.dispatch("updateEventData",{index:this.index,value:this.eventObj})}},components:{"dynamic-select":Be}},FR={class:"row faveo-automator-action"},$R={class:"col-sm-auto"},TR={class:"col-sm-1 event-label"},ER={class:"col-sm-1 event-label"};function LR(e,t,a,r,n,o){const m=v("dynamic-select");return i(),d("div",FR,[s("span",$R,[s("i",{class:"fas fa-trash faveo-trash",onClick:t[0]||(t[0]=p=>o.deleteEvent())})]),u(m,{classname:"col-sm-3",labelStyle:{display:"none"},multiple:!1,id:"event-"+a.event._id,name:"event-"+a.event._id,apiEndpoint:"api/enforcer-events?type="+a.pageType,value:e.eventObj.field,onChange:o.onFieldChange,rules:"required",clearable:!1},null,8,["id","name","apiEndpoint","value","onChange"]),e.eventObj.field&&e.eventObj.data_type==="api"?(i(),d(B,{key:0},[s("label",TR,h(e.trans("from")),1),(i(),A(m,{classname:"col-sm-3",key:e.eventObj.field.id+"from",labelStyle:{display:"none"},multiple:!1,apiEndpoint:o.apiInfoUrl,name:"from-"+a.event._id,value:e.eventObj.from,onChange:o.onChange,rules:"required",strlength:15,clearable:!1},null,8,["apiEndpoint","name","value","onChange"])),s("label",ER,h(e.trans("to")),1),(i(),A(m,{classname:"col-sm-3",key:e.eventObj.field.id+"to",labelStyle:{display:"none"},multiple:!1,apiEndpoint:o.apiInfoUrl,name:"to-"+a.event._id,value:e.eventObj.to,onChange:o.onChange,rules:"required",strlength:15,clearable:!1},null,8,["apiEndpoint","name","value","onChange"]))],64)):f("",!0)])}const AR=x(MR,[["render",LR],["__scopeId","data-v-43da8766"]]);const IR={name:"event-list",props:{pageType:{type:String,default:""}},data:()=>({eventList:[]}),beforeMount(){this.eventList=this.$store.getters.getAutomatorDataByKey("events"),Te(this.eventList)||this.addNew()},methods:{addNew(){this.$store.dispatch("addNewElementToAutomatorProperty",{key:"events",value:new os})}},components:{"faveo-automator-event":AR}},PR={style:{"margin-top":"1rem"}};function OR(e,t,a,r,n,o){const m=v("faveo-automator-event"),p=v("faveo-box");return i(),A(p,{title:e.trans("involves_any_of_these_events")},{default:T(()=>[(i(!0),d(B,null,re(e.eventList,(g,b)=>(i(),A(m,{key:g._id,event:g,index:b,pageType:a.pageType},null,8,["event","index","pageType"]))),128)),s("div",PR,[s("a",{onClick:t[0]||(t[0]=g=>o.addNew()),href:"javascript:;"},[s("span",null,[t[1]||(t[1]=s("i",{class:"fas fa-plus-circle"},null,-1)),L(" "+h(e.trans("add_new_event")),1)])])])]),_:1},8,["title"])}const qR=x(IR,[["render",OR],["__scopeId","data-v-cc0b077f"]]);const xR={name:"action-performer",props:{pageType:{type:String,default:"ticket"}},data:()=>({actionsPerformer:"agent"}),beforeMount(){this.actionsPerformer=this.$store.getters.getAutomatorDataByKey("actionsPerformer")},methods:{onchange(e){this.$store.dispatch("setAutomatorDataByKey",{key:"actionsPerformer",value:e})}}},VR={class:"row"},NR={class:"col-sm-4"},RR={class:"radio-inline form-check"},UR=["checked"],jR={class:"col-sm-4"},BR={class:"radio-inline form-check"},YR=["checked"],HR={class:"col-sm-4"},WR={class:"radio-inline form-check"},zR=["checked"];function GR(e,t,a,r,n,o){const m=v("faveo-box");return i(),A(m,{title:e.trans("when_an_action_performed_by")},{default:T(()=>[s("div",VR,[s("div",NR,[s("label",RR,[s("input",{type:"radio",class:"form-check-input",name:"actionsPerformer",onChange:t[0]||(t[0]=p=>o.onchange("agent")),value:"agent",checked:e.actionsPerformer==="agent"},null,40,UR),L("  "+h(e.lang("agent")),1)])]),a.pageType=="ticket"?(i(),d(B,{key:0},[s("div",jR,[s("label",BR,[s("input",{type:"radio",class:"form-check-input",name:"actionsPerformer",onChange:t[1]||(t[1]=p=>o.onchange("requester")),value:"requester",checked:e.actionsPerformer==="requester"},null,40,YR),L("  "+h(e.lang("requester")),1)])]),s("div",HR,[s("label",WR,[s("input",{type:"radio",class:"form-check-input",name:"actionsPerformer",onChange:t[2]||(t[2]=p=>o.onchange("agent_requester")),value:"agent_requester",checked:e.actionsPerformer==="agent_requester"},null,40,zR),L("  "+h(e.lang("agent_or_requester")),1)])])],64)):f("",!0)])]),_:1},8,["title"])}const KR=x(xR,[["render",GR],["__scopeId","data-v-d7ce1058"]]),JR={name:"faveo-automator",setup(){const e=Me();return{showLoader:me(()=>e.getters.showLoader)}},data:()=>({title:"",name:"",status:!0,internal_notes:"",editId:0,formFields:{},submitEndpoint:"",rules:[],actions:[],events:[],formCategories:[],submitFormInProgress:!1,showDeleteModal:!1,deleteType:"",deleteIndex:"",deleteId:"",loading:!1,pageType:""}),props:{category:{type:String,required:!0}},beforeMount(){let e=new URLSearchParams(window.location.search);this.pageType=e.get("page_type")?e.get("page_type"):"ticket",this.getAutomatorData(),this.editId=Ue(this.currentPath()),Te(this.editId)?this.handleEditCase():this.handleCreateCase()},created(){window.emitter.on("deleteItem",this.deleteItem)},methods:{handleCreateCase(){this.title="create_"+this.category,this.$store.dispatch("createNewAutomatorInstance")},handleEditCase(){this.title="edit_"+this.category,this.getAutomatorEditData()},onChange(e,t){this[t]=e},getAutomatorData(){this.$store.dispatch("startLoader","getAutomatorData"),axios.get("api/form/automator",{params:{category:this.category,type:this.pageType}}).then(e=>{this.formCategories=e.data.data.form_categories,this.submitEndpoint=e.data.data.submit_endpoint,this.actionEndpoint=e.data.data.action_endpoint}).catch(e=>{U(e,"faveo-automator")}).finally(()=>{this.$store.dispatch("stopLoader","getAutomatorData")})},getAutomatorEditData(){this.$store.dispatch("startLoader","getAutomatorEditData"),axios.get("api/get-enforcer/"+this.category+"/"+this.editId).then(e=>{const t=e.data.data;this.name=t.name,this.status=t.status,this.internal_notes=t.internal_notes;const a=new Ti(t.id,Gs(t.rules,"rule"),Gs(t.actions,"action"),qm(t.events),t.matcher,t.triggered_by);this.$store.dispatch("createNewAutomatorInstance",a)}).catch(e=>{U(e,"faveo-automator")}).finally(()=>{this.$store.dispatch("stopLoader","getAutomatorEditData")})},async onSubmit(){if(await Mm(this.$refs.faveoAutomatorForm)){this.submitFormInProgress=!0;const t=this.$store.getters.getAutomatorData;let a={type:this.category,data:{category_type:this.pageType,id:t.id,matcher:t.matcher,triggered_by:t.actionsPerformer,name:this.name,status:this.status,internal_notes:this.internal_notes,rules:this.updatedRuleList(Js(t.rules,"rules")),actions:Js(t.actions,"actions"),events:xm(t.events)}};axios.post(this.submitEndpoint,a).then(r=>{K(r,"faveo-automator"),Te(this.editId)?this.getAutomatorEditData():setTimeout(()=>{this.$router.push({path:"/automator",query:{type:this.category}})},3e3)}).catch(r=>{var n,o,m;if(((n=r==null?void 0:r.response)==null?void 0:n.status)===412&&((m=(o=r==null?void 0:r.response)==null?void 0:o.data)!=null&&m.message)){let p={};Object.keys(r.response.data.message).forEach(g=>{let b=g.split("."),w=a.data;for(let C=1;C<b.length-1;C++)w=w[b[C]];let S=w.field+w._id;p[S]=r.response.data.message[g]}),r.response.data.message=p,U(r,"faveo-automator");return}U(r,"faveo-automator")}).finally(()=>{this.submitFormInProgress=!1})}},updatedRuleList(e){for(let t in e)this.loopedVal(e[t].category,e[t]);return e},loopedVal(e,t){for(let a in t.rules)t.rules[a].category=e,t.rules[a].rules.length&&this.loopedVal(e,t.rules[a]);return t},deleteItem({type:e,index:t,id:a}){this.showDeleteModal=!0,this.deleteType=e,this.deleteIndex=t,this.deleteId=a},doDelete(){if(ln(this.deleteId)){this.deleteItemFromStore(this.deleteType,this.deleteIndex);return}this.loading=!0,axios.delete(`api/delete-enforcer/${this.deleteType}/${this.deleteId}`).then(e=>{this.deleteItemFromStore(this.deleteType,this.deleteIndex),this.showDeleteModal=!1,this.loading=!1,K(e,"faveo-automator")}).catch(e=>{this.showDeleteModal=!1,this.loading=!1,U(e,"faveo-automator")})},deleteItemFromStore(e,t){this.showDeleteModal=!1,this.loading=!1,this.$store.dispatch("deleteElementFromAutomator",{key:e,index:t}),window.emitter.emit("deletedItem")}},beforeDestroy(){this.$store.dispatch("forceStopLoader"),this.$store.dispatch("destroyAutomatorInstance")},components:{"rule-list":Kl,"action-list":SR,"event-list":qR,"text-field":we,"status-switch":lt,"action-performer":KR}},ZR={class:"col-sm-12"},QR={key:2,class:"form-group row"},XR={class:"col-md-12"},eU=["disabled"],tU={key:0},aU={key:1},sU={class:"modal-title"},nU={key:1};function oU(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("status-switch"),b=v("text-field"),w=v("action-performer"),S=v("event-list"),C=v("rule-list"),M=v("action-list"),D=v("ValidationObserver"),F=v("faveo-box"),I=v("reuse-loader"),R=v("modal"),Y=H("focus-first-input");return i(),d("div",ZR,[u(F,{title:e.trans(e.title)},{default:T(()=>[u(m,{componentName:"faveo-automator"}),r.showLoader||e.submitFormInProgress?(i(),A(p,{key:0,duration:4e3})):f("",!0),r.showLoader?f("",!0):(i(),d(B,{key:1},[u(g,{slot:"headerMenu",class:"pull-right",name:"status",title:e.status?e.trans("active"):e.trans("inactive"),value:e.status,onChange:o.onChange},null,8,["title","value","onChange"]),u(D,{ref:"faveoAutomatorForm"},{default:T(()=>[P((i(),d("div",null,[u(b,{id:"name",type:"text",label:e.trans("name"),name:"name",classname:"col-sm-6",value:e.name,onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,rules:"required"},null,8,["label","value","onChange","placehold"])])),[[Y]]),a.category==="listener"?(i(),A(w,{key:0,pageType:e.pageType},null,8,["pageType"])):f("",!0),a.category==="listener"?(i(),A(S,{key:1,pageType:e.pageType},null,8,["pageType"])):f("",!0),u(C,{categories:e.formCategories,pageType:e.pageType},null,8,["categories","pageType"]),u(M,{actionEndpoint:e.actionEndpoint},null,8,["actionEndpoint"]),u(b,{label:e.trans("internal_note"),type:"textarea",name:"internal_notes",value:e.internal_notes,onChange:o.onChange,placehold:e.lang("enter_a_value"),length:255,"show-word-limit":!0,rows:2},null,8,["label","value","onChange","placehold"]),r.showLoader?f("",!0):(i(),d("div",QR,[s("div",XR,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=X=>o.onSubmit()),disabled:e.submitFormInProgress},[e.editId?(i(),d("span",aU,t[3]||(t[3]=[s("i",{class:"fas fa-sync"},null,-1)]))):(i(),d("span",tU,t[2]||(t[2]=[s("i",{class:"fas fa-save"},null,-1)]))),L(" "+h(e.editId?e.trans("update"):e.trans("submit")),1)],8,eU)])]))]),_:1},512)],64))]),_:1},8,["title"]),u(Ae,{name:"modal"},{default:T(()=>[e.showDeleteModal?(i(),A(R,{key:0,showModal:!0,onClose:()=>e.showDeleteModal=!1,containerStyle:{width:"400px"}},{title:T(()=>[s("h4",sU,h(e.lang("delete")),1)]),fields:T(()=>[e.loading?(i(),A(I,{key:0})):f("",!0),e.loading?f("",!0):(i(),d("span",nU,h(e.lang("are_you_sure_you_want_to_delete")),1))]),controls:T(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:t[1]||(t[1]=X=>o.doDelete()),class:"btn btn-secondary"},[t[4]||(t[4]=s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})])}const pa=x(JR,[["render",oU]]);const iU={name:"approval-workflow-index",description:"Approval workflow table component",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},data:()=>({base:window.axios.defaults.baseURL,columns:[],options:{},apiUrl:"/api/admin/approval-workflow/"}),beforeMount(){this.columns=["name","created_at","updated_at","action"],this.options={texts:{filter:"",limit:""},headings:{name:this.trans("name"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),action:this.trans("action")},columnsClasses:{name:"apply-workflow-index-name",created_at:"apply-workflow-index-created",updated_at:"apply-workflow-index-updated",action:"apply-workflow-index-action"},templates:{action:(e,t)=>this.h(Ye,{data:t}),created_at:(e,t)=>this.formattedTime(t.created_at),updated_at:(e,t)=>this.formattedTime(t.updated_at)},sortable:["name","created_at","updated_at"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(e){return{sort_by:e.orderBy?e.orderBy:"name",order:e.ascending?"asc":"desc",search:e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data.data.map(t=>(t.edit_url="/approval-workflow/"+t.id+"/edit",t.delete_url=window.axios.defaults.baseURL+"/api/admin/approval-workflow/"+t.id+"/workflow/",t)),count:e.data.total}},orderBy:{column:"name",ascending:!0}}}},lU={id:"main-div",class:"col-sm-12"},rU={class:"card-tools"},dU={id:"apply-workflow-table"};function cU(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("faveo-box"),w=H("tooltip");return i(),d("div",lU,[u(m,{componentName:"dataTableModal"}),u(b,{title:e.lang("list_of_approval_workflow")},{headerMenu:T(()=>[s("div",rU,[P((i(),A(p,{class:"btn btn-tool",to:"/approval-workflow/create"},{default:T(()=>t[0]||(t[0]=[s("span",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[w,{content:e.lang("create_approval_workflow"),placement:"left"}]])])]),default:T(()=>[s("div",dU,[e.apiUrl!==""?(i(),A(g,{key:0,url:e.apiUrl,dataColumns:e.columns,option:e.options},null,8,["url","dataColumns","option"])):f("",!0)])]),_:1},8,["title"])])}const uU=x(iU,[["render",cU]]);function mU(e){const{name:t,levels:a,send_auto_reminders:r,reminder_interval:n}=e;let o={name:[t,"isRequired"]};e.send_auto_reminders&&(o.reminder_interval=[e.reminder_interval,"isRequired"]);let m,p;a.map((w,S)=>{o["level-name-"+S]=[w.name,"isRequired"],o["level-match-"+S]=[w.match,"isRequired"],m=hU(w.approvers.users,w.approvers.user_types,S)});const b=new Le(N).validate(o);return p=b.errors,m=m&&b.isValid,Ee.dispatch("setValidationError",p),{errors:p,isValid:m}}function hU(e,t,a){let r=0;if(e.length==0&&t.length==0){let n=N("atleast_one_user_or_one_user_type_is_required");r++,Ee.dispatch("setAlert",{type:"danger",message:n,component_name:"approval-level-"+a})}return!(r>0)}const pU={name:"approval-workflow",description:"handles create/edit part of approval workflow",data(){return{send_auto_reminders:0,radioOptions:[{name:"yes",value:1},{name:"no",value:0}],reminder_interval:"",containerStyle:{width:"500px"},reminderOptions:[{id:1,name:"1 Hour"},{id:4,name:"4 Hours"},{id:8,name:"8 Hours"},{id:12,name:"12 Hours"},{id:24,name:"24 Hours"}],id:0,name:"",action_on_approve:"",action_on_deny:"",levels:[{id:0,name:"",order:1,match:"all",approvers:{user_types:[],users:[]}}],loading:!1,showDeletePopUp:!1,matcherOptions:[{id:"any",name:"Any"},{id:"all",name:"All"}],hasDataPopulated:!0,deletingLevelIndex:null,deletingLevelId:null}},mounted(){const e=window.location.pathname,t=Ue(e);e.indexOf("edit")>=0&&(this.hasDataPopulated=!1,this.getInitialValues(t))},methods:{loadWorkflowData(){const e=window.location.pathname,t=Ue(e);e.indexOf("edit")>=0&&this.getInitialValues(t)},getInitialValues(e){this.loading=!0,V.get("api/admin/approval-workflow/"+e).then(t=>{this.id=t.data.data.id,this.name=t.data.data.name,this.action_on_approve=t.data.data.action_on_approve,this.action_on_deny=t.data.data.action_on_deny,this.send_auto_reminders=t.data.data.send_auto_reminders,this.reminder_interval=t.data.data.reminder_interval?t.data.data.reminder_interval:"",this.levels=t.data.data.levels,this.loading=!1,this.hasDataPopulated=!0}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0})},addLevel(){this.levels.push({id:0,name:"",order:this.levels.length+1,match:"all",approvers:{user_types:[],users:[]}}),this.scrollToSubmitButton()},scrollToSubmitButton(){let e=document.getElementById("submit-workflow");setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},2)},onChange(e,t){let a=t.split("-");a.length==1&&(this[t]=e);let r=a[a.length-1];t.includes("level-name-")&&(this.levels[r].name=e),t.includes("approver-user-type-")&&(this.levels[r].approvers.user_types=e),t.includes("approver-agent-")&&(this.levels[r].approvers.users=e),t.includes("level-match-")&&(this.levels[r].match=e)},isValid(){const{errors:e,isValid:t}=mU(this.$data);return!!t},onSubmit(){if(this.isValid()){let e=this.action_on_approve==null?null:this.action_on_approve.id,t=this.action_on_approve==null?null:this.action_on_deny.id;this.loading=!0;const a={id:this.id,name:this.name,action_on_approve:e,action_on_deny:t,levels:this.getFormattedLevelData(),send_auto_reminders:this.send_auto_reminders,reminder_interval:this.send_auto_reminders?this.reminder_interval:""};V.post("/api/admin/approval-workflow",a).then(r=>{K(r,"approval-workflow"),this.loading=!1,window.location.pathname.indexOf("edit")>=0||setTimeout(()=>{this.$router.push({name:"Approval Workflow Index"})},3e3)}).catch(r=>{U(r,"approval-workflow"),this.loading=!1}).finally(r=>{this.loadWorkflowData()})}},getFormattedLevelData(){return this.$data.levels.map(t=>({id:t.id,name:t.name,order:t.order,match:t.match,approvers:{users:lo(t.approvers.users),user_types:lo(t.approvers.user_types)}}))},onDelete(){this.deletingLevelId!=0&&(this.loading=!0,V.delete("api/admin/approval-workflow/"+this.deletingLevelId+"/level").then(e=>{K(e,"approval-workflow")}).catch(e=>{U(e,"approval-workflow")}).finally(e=>{this.loadWorkflowData(),this.loading=!1})),this.levels.splice(this.deletingLevelIndex,1),this.showDeletePopUp=!1},deleting(e,t){this.deletingLevelIndex=e,this.deletingLevelId=t,this.showDeletePopUp=!0}},watch:{showDeletePopUp(e){e||(this.deletingLevelIndex=null,this.deletingLevelId=null)}},components:{"text-field":we,"dynamic-select":Be,"static-select":it,"radio-button":Qe}},_U={class:"col-sm-12"},fU={key:0,class:"row"},gU={key:0,class:"card card-light"},vU={class:"card-header"},bU={class:"card-title"},yU={class:"card-body"},kU={class:"row",id:"approval-workflow-name"},wU={key:0,class:"row"},CU={id:"list-of-levels"},DU={id:"list-of-levels"},SU={class:"card card-light"},MU={class:"card-header"},FU={class:"card-title"},$U={class:"card-tools"},TU=["id","onClick"],EU={class:"card-body"},LU={class:"row margin-auto margin-top-10"},AU=["id"],IU={class:"modal-title"},PU=["id"],OU={class:"card-footer"},qU=["disabled"];function xU(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("text-field"),b=v("dynamic-select"),w=v("radio-button"),S=v("static-select"),C=v("modal"),M=H("focus-first-input");return i(),d("div",_U,[u(m,{componentName:"approval-workflow"}),n.hasDataPopulated===!1||n.loading===!0?(i(),d("div",fU,[u(p)])):f("",!0),s("div",null,[n.hasDataPopulated?(i(),d("div",gU,[s("div",vU,[s("h3",bU,h(e.lang("approval_workflow_settings")),1)]),s("div",yU,[P((i(),d("div",kU,[u(g,{label:e.lang("name"),value:n.name,name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,classname:"col-md-4"},null,8,["label","value","onChange","placehold"]),u(b,{label:e.lang("status_on_approve"),name:"action_on_approve",multiple:!1,value:n.action_on_approve,classname:"col-sm-3",onChange:o.onChange,apiEndpoint:"/api/dependency/statuses"},null,8,["label","value","onChange"]),u(b,{label:e.lang("status_on_deny"),name:"action_on_deny",multiple:!1,value:n.action_on_deny,classname:"col-sm-3",onChange:o.onChange,apiEndpoint:"/api/dependency/statuses"},null,8,["label","value","onChange"]),u(w,{options:n.radioOptions,label:e.trans("send_auto_reminders"),name:"send_auto_reminders",value:n.send_auto_reminders,onChange:o.onChange,classname:"form-group col-sm-2"},null,8,["options","label","value","onChange"])])),[[M]]),n.send_auto_reminders?(i(),d("div",wU,[u(S,{label:e.trans("reminder_interval"),elements:n.reminderOptions,name:"reminder_interval",onChange:o.onChange,required:!0,classname:"col-sm-4",value:n.reminder_interval},null,8,["label","elements","onChange","value"])])):f("",!0),s("div",CU,[(i(!0),d(B,null,re(n.levels,(D,F)=>(i(),d(B,null,[s("div",DU,[u(m,{componentName:"approval-level-"+F},null,8,["componentName"])]),s("div",SU,[s("div",MU,[s("h3",FU,h(e.lang("level"))+" "+h(F+1),1),s("div",$U,[n.levels.length>1?(i(),d("button",{key:0,id:"approval-workflow-level-delete-"+F,onClick:I=>o.deleting(F,D.id),class:"btn btn-tool"},t[3]||(t[3]=[s("span",{class:"fas fa-times","aria-hidden":"true"},null,-1)]),8,TU)):f("",!0)])]),s("div",EU,[s("div",LU,[u(g,{label:e.lang("name"),value:D.name,name:"level-name-"+F,onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,classname:"col-md-6"},null,8,["label","value","name","onChange","placehold"]),u(S,{label:e.lang("matcher"),elements:n.matcherOptions,name:"level-match-"+F,onChange:o.onChange,required:!0,classname:"col-md-6",value:D.match},null,8,["label","elements","name","onChange","value"])]),s("div",{class:"row margin-auto",id:"approval-workflow-level-"+F},[u(b,{label:e.lang("contacts"),value:D.approvers.users,name:"approver-agent-"+F,onChange:o.onChange,apiEndpoint:"/api/dependency/users?meta=true",multiple:!0,classname:"col-md-6"},null,8,["label","value","name","onChange"]),u(b,{label:e.lang("user_types"),value:D.approvers.user_types,name:"approver-user-type-"+F,onChange:o.onChange,apiEndpoint:"/api/dependency/user-types",multiple:!0,classname:"col-md-6"},null,8,["label","value","name","onChange"])],8,AU)]),n.showDeletePopUp?(i(),A(C,{key:0,showModal:!0,onClose:()=>n.showDeletePopUp=!1,containerStyle:n.containerStyle},{title:T(()=>[s("h4",IU,h(e.lang("delete_workflow_level")),1)]),fields:T(()=>[s("span",null,h(e.lang("you_are_about_to_delete_a_workflow_level"))+". "+h(e.lang("please_confirm")),1)]),controls:T(()=>[s("button",{id:"confirm-delete-button-"+F,type:"button",onClick:t[0]||(t[0]=I=>o.onDelete()),class:"btn btn-secondary"},[t[4]||(t[4]=s("i",{class:"glyphicon glyphicon-trash","aria-hidden":"true"},null,-1)),L("  "+h(e.lang("delete")),1)],8,PU)]),_:2},1032,["onClose","containerStyle"])):f("",!0)])],64))),256))])]),s("div",OU,[s("button",{type:"button",id:"add-level",onClick:t[1]||(t[1]=(...D)=>o.addLevel&&o.addLevel(...D)),class:"btn btn-primary"},[t[5]||(t[5]=s("span",{class:"glyphicon glyphicon-plus"},null,-1)),L(" "+h(e.lang("add_level")),1)]),s("button",{type:"button",id:"submit-workflow",onClick:t[2]||(t[2]=(...D)=>o.onSubmit&&o.onSubmit(...D)),disabled:n.loading,class:"btn btn-primary"},[t[6]||(t[6]=s("span",{class:"fas fa-save"},null,-1)),L(" "+h(e.lang("save")),1)],8,qU)])])):f("",!0)])])}const Jo=x(pU,[["render",xU]]);const VU={name:"priority-index",data(){return{columns:["name","priority_desc","priority_color","action"],apiUrl:"/api/priority-list",options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("priority"),priority_desc:this.trans("priority_desc"),priority_color:this.trans("priority_color"),action:this.trans("actions")},columnsClasses:{name:"priority-name",priority_desc:"priority-desc",priority_color:"priority-color",action:"priority-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{priority_color:function(t,a){return e.h("div",{style:{width:"25px",height:"15px",background:a.priority_color}})},action:(t,a)=>e.h(Ye,{data:a})},sortable:["name","priority_desc"],filterable:["name","priority_desc"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.priorities.map(a=>(a.edit_url="/ticket/priority/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/priority/delete/"+a.id,a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}}},NU={id:"priority-list",class:"col-sm-12"},RU={class:"card-tools"};function UU(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("faveo-box"),w=H("tooltip");return i(),d("div",NU,[u(m,{componentName:"dataTableModal"}),u(b,{title:e.trans("list_of_ticket_priority")},{customActions:T(()=>[s("div",RU,[P((i(),A(p,{class:"btn btn-tool",to:"/ticket/priority/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[w,{content:e.trans("create_ticket_priority"),placement:"left"}]])])]),default:T(()=>[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"priority-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const jU=x(VU,[["render",UU]]);function BU(e){const{name:t,priority_desc:a,priority_color:r}=e;let n={name:[t,"isRequired",{"max(50)":N("priority_should_be_less_than_50_characters")}],priority_desc:[a,"isRequired",{"max(255)":N("priority_description_should_be_less_than_255_characters")}],priority_color:[r,"isRequired"]};const o=new Le(N),{errors:m,isValid:p}=o.validate(n);return Ee.dispatch("setValidationError",m),{errors:m,isValid:p}}const YU={name:"priority-create-edit",description:"Priority create edit page",data(){return{page_title:"create_ticket_priority",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,priorityId:"",name:"",priority_desc:"",priority_color:"",ispublic:1,publicOptions:[{name:"public",value:1},{name:"private",value:0}],is_default:!1,showErr:!1,colorErr:"",defaultPriority:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},watch:{priority_color(e,t){return e=="#"&&(this.priority_color=""),this.priority_color},is_default(e,t){this.status=e?1:this.status}},methods:{getValues(e){const t=Ue(e);e.indexOf("edit")>=0?(this.page_title="edit_priority",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,V.get("/api/priority/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.priority;this.priorityId=a.id,this.defaultPriority=a.is_default,this.updateStatesWithData(a)}).catch(t=>{this.loading=!1,U(t,"priority-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=BU(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.priority_color=this.priority_color=="#"?"":this.priority_color,this.showErr=!this.priority_color,this.isValid()){this.loading=!0;let e={};e.name=this.name,e.priority_desc=this.priority_desc,e.priority_color=this.priority_color,e.ispublic=this.ispublic?1:0,e.is_default=this.is_default?1:0;let t="/api/priority";this.page_title=="edit_priority"&&(t="/api/priority-edit/"+this.priorityId,e._method="PATCH"),V.post(t,e).then(a=>{this.loading=!1,this.colorErr="",K(a,"priority-create-edit"),this.priorityId?this.getInitialValues(this.priorityId):setTimeout(()=>{this.$router.push({name:"Priority Index"})},3e3)}).catch(a=>{this.loading=!1,a.response.data.message&&a.response.data.message.priority_color&&(this.colorErr=a.response.data.message.priority_color),U(a,"priority-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":we,"radio-button":Qe,"color-picker":us}},HU={class:"col-sm-12"},WU={key:0,class:"row"},zU={class:"row"},GU={class:"pb-1"},KU={key:0,class:"error-block is-danger"},JU={key:1,class:"is-danger"},ZU={class:"row"},QU={class:"row"},XU={class:"col-sm-12 mt-2"},ej={class:"label_align",name:"is_default"},tj=["keyupListener","disabled"],aj={class:"card-footer"};function sj(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("alert"),g=v("text-field"),b=v("color-picker"),w=v("radio-button"),S=v("faveo-box"),C=H("focus-first-input");return i(),d("div",HU,[s("div",null,[!n.hasDataPopulated||n.loading?(i(),d("div",WU,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"priority-create-edit"}),n.hasDataPopulated?(i(),A(S,{key:1,title:e.trans(n.page_title)},{actions:T(()=>[s("div",aj,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[1]||(t[1]=M=>o.onSubmit())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)])])]),default:T(()=>[P((i(),d("div",zU,[u(g,{label:e.trans("priority"),value:n.name,type:"text",name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),keyupListener:o.triggerEvent,classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),s("div",{class:G(["col-sm-3 form-group",{"has-error":n.showErr||n.colorErr}])},[s("label",GU,[L(h(e.trans("priority_color"))+" ",1),t[2]||(t[2]=s("span",{class:"text-danger"},"*",-1))]),u(b,{color:n.priority_color,name:"priority_color",onColor:o.onChange,showError:n.showErr,colorError:n.colorErr},null,8,["color","onColor","showError","colorError"]),n.showErr?(i(),d("div",KU,h(e.trans("this_field_is_required")),1)):f("",!0),!n.showErr&&n.colorErr?(i(),d("span",JU,h(n.colorErr),1)):f("",!0)],2),u(w,{options:e.lang(n.publicOptions),label:e.trans("visibility"),name:"ispublic",value:n.ispublic,onChange:o.onChange,classname:"form-group col-sm-3"},null,8,["options","label","value","onChange"])])),[[C]]),s("div",ZU,[u(g,{label:e.trans("priority_desc"),value:n.priority_desc,type:"textarea",name:"priority_desc",onChange:o.onChange,placehold:e.lang("enter_a_value"),keyupListener:o.triggerEvent,classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold","keyupListener"])]),s("div",QU,[s("div",XU,[s("label",ej,[P(s("input",{class:"checkbox_align",type:"checkbox",name:"is_default","onUpdate:modelValue":t[0]||(t[0]=M=>n.is_default=M),keyupListener:o.triggerEvent,disabled:!!(n.priorityId&&n.defaultPriority)},null,8,tj),[[Ve,n.is_default]]),L("  "+h(e.trans("make-default-priority")),1)])])])]),_:1},8,["title"])):f("",!0)])])}const Zo=x(YU,[["render",sj],["__scopeId","data-v-2175e905"]]);const nj={name:"ticket-type-index",data(){return{columns:["name","type_desc","action"],apiUrl:"/api/ticket-types-list",options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),type_desc:this.trans("description"),action:this.trans("actions")},columnsClasses:{name:"type-name",type_desc:"type-desc",action:"type-action"},texts:{filter:"",limit:""},templates:{action:(t,a)=>e.h(Ye,{data:a})},sortable:["name","type_desc","status"],filterable:["name","type_desc","status"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.ticketTypes.map(a=>(a.edit_url="/ticket-type/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/ticket-types-delete/"+a.id,a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}}},oj={id:"ticket-type-list",class:"col-sm-12"},ij={class:"card-tools"};function lj(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("faveo-box"),w=H("tooltip");return i(),d("div",oj,[u(m,{componentName:"dataTableModal"}),u(b,{title:e.trans("list_of_ticket_types")},{customActions:T(()=>[s("div",ij,[P((i(),A(p,{class:"btn btn-tool",to:"/ticket-type/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[w,e.trans("create_ticket_type")]])])]),default:T(()=>[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"ticket-type-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const rj=x(nj,[["render",lj]]);function dj(e){const{name:t,type_desc:a}=e;let r={name:[t,"isRequired",{"max(50)":N("name_should_be_less_than_50_characters")}],type_desc:[a,"isRequired",{"max(50)":N("descripton_should_be_less_than_50_characters")}]};const n=new Le(N),{errors:o,isValid:m}=n.validate(r);return Ee.dispatch("setValidationError",o),{errors:o,isValid:m}}const cj={name:"ticket-type-create-edit",description:"Ticket Type Create edit page",data(){return{page_title:"create_ticket_type",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,type_id:"",name:"",type_desc:"",ispublic:1,publicOptions:[{name:"public",value:1},{name:"private",value:0}]}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=Ue(e);e.indexOf("edit")>=0?(this.page_title="edit_ticket_type",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,V.get("/api/ticket-types/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.ticketType;this.type_id=a.id,this.updateStatesWithData(a)}).catch(t=>{this.loading=!1,U(t,"ticket-type-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=dj(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.name=this.name,e.type_desc=this.type_desc,e.ispublic=this.ispublic?1:0;let t="/api/ticket-types";this.page_title=="edit_ticket_type"&&(t="/api/ticket-types-edit/"+this.type_id,e._method="PATCH"),V.post(t,e).then(a=>{this.loading=!1,K(a,"ticket-type-create-edit"),this.type_id?this.getInitialValues(this.type_id):setTimeout(()=>{this.$router.push({name:"Ticket Type Index"})},3e3)}).catch(a=>{this.loading=!1,U(a,"ticket-type-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":we,"radio-button":Qe}},uj={class:"col-sm-12"},mj={key:0,class:"row"},hj={class:"row"},pj={class:"row"},_j={class:"card-footer"};function fj(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("text-field"),b=v("radio-button"),w=v("faveo-box"),S=H("focus-first-input");return i(),d("div",uj,[!n.hasDataPopulated||n.loading?(i(),d("div",mj,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"ticket-type-create-edit"}),n.hasDataPopulated?(i(),A(w,{key:1,title:e.trans(n.page_title)},{actions:T(()=>[s("div",_j,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=C=>o.onSubmit())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)])])]),default:T(()=>[P((i(),d("div",hj,[u(g,{label:e.trans("name"),value:n.name,type:"text",name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),keyupListener:o.triggerEvent,classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),u(b,{options:e.lang(n.publicOptions),label:e.trans("visibility"),name:"ispublic",keyupListener:o.triggerEvent,value:n.ispublic,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","keyupListener","value","onChange"])])),[[S]]),s("div",pj,[u(g,{label:e.trans("description"),value:n.type_desc,type:"textarea",name:"type_desc",onChange:o.onChange,placehold:e.lang("enter_a_value"),keyupListener:o.triggerEvent,classname:"col-sm-12",required:!0},null,8,["label","value","onChange","placehold","keyupListener"])])]),_:1},8,["title"])):f("",!0)])}const Qo=x(cj,[["render",fj]]);const gj={name:"status-index",data(){return{columns:["name","visibility_for_client","purpose_of_status","order","icon","actions"],options:{}}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},headings:{name:this.trans("name"),visibility_for_client:this.trans("visibility_to_client"),purpose_of_status:this.trans("purpose_of_status"),order:this.trans("order"),icon:this.trans("icon"),actions:this.trans("actions")},columnsClasses:{name:"status-name",visibility_for_client:"status-visible",purpose_of_status:"status-purpose",order:"status-order",icon:"status-icon",actions:"status-actions"},texts:{filter:"",limit:""},templates:{purpose_of_status(t,a){return a.purpose_of_status?a.purpose_of_status.name:"--"},visibility_for_client:function(t,a){return e.h("span",{class:a.visibility_for_client?"btn btn-success btn-sm":"btn btn-warning btn-sm",style:"cursor : auto"},a.visibility_for_client?"Yes":"No")},icon:function(t,a){return e.h("i",{class:a.icon,style:"color : "+a.icon_color},"")},actions:(t,a)=>e.h(Ye,{data:a})},sortable:["name","visibility_for_client","send_email","order"],filterable:["name","visibility_for_client","purpose_of_status","send_email","order","icon"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.statuses.map(a=>(a.is_default=a.default,a.edit_url="/status/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/status-delete/"+a.id,a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}}},vj={class:"col-sm-12"},bj={class:"card card-light"},yj={class:"card-header"},kj={class:"card-title"},wj={class:"card-tools"},Cj={class:"card-body",id:"status_index"};function Dj(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",vj,[u(m,{componentName:"dataTableModal"}),s("div",bj,[s("div",yj,[s("h3",kj,h(e.trans("list_of_status")),1),s("div",wj,[P((i(),A(p,{class:"btn btn-tool",to:"/status/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,{content:e.trans("create_new_status"),placement:"left"}]])])]),s("div",Cj,[u(g,{url:"/api/ticket-status-list",dataColumns:n.columns,option:n.options,scroll_to:"status_index"},null,8,["dataColumns","option"])])])])}const Sj=x(gj,[["render",Dj]]);function Mj(e){const{name:t,sort:a,order:r,icon_class:n,purpose_of_status:o,visibility_for_client:m,secondary_status:p,override_status:g,override_statuses:b}=e;let w={name:[t,"isRequired"],sort:[a,"isRequired"],icon_class:[n,"isRequired"],order:[r,"isRequired"],purpose_of_status:[o,"isRequired"]};e.visibility_for_client||(w.secondary_status=[p,"isRequired"]),e.override_status||(w.override_statuses=[b,"isRequired"]);const S=new Le(N),{errors:C,isValid:M}=S.validate(w);return Ee.dispatch("setValidationError",C),{errors:C,isValid:M}}const Fj={name:"status-create-edit",data(){return{page_title:"create_new_status",iconClass:"fas fa-save",btnName:"save",status_id:"",hasDataPopulated:!1,name:"",order:"",icon_class:{icon_class:"fas fa-edit"},iconList:[],icon_color:"",visibility_for_client:1,allow_client:1,yesNoOptions:[{name:"yes",value:1},{name:"no",value:0}],purpose_of_status:"",halt_sla:1,commentOptions:[{name:"required",value:1},{name:"optional",value:0}],comment:1,overrideOptions:[{name:"all_statuses",value:1},{name:"specific_statuses",value:0}],override_status:1,is_default:!1,showErr:!1,secondary_status:"",override_statuses:[],loading:!1,alerts:null,setAlerts:{}}},beforeMount(){const e=window.location.pathname;this.getValues(e),this.getIconList(),this.getStatusAlerts(e)},computed:{visibiltyEndpoint(){let e="/api/dependency/statuses?client_visibility=1";return this.purpose_of_status?e+"&purpose_of_status_id="+this.purpose_of_status.id:e}},methods:{getIconList(){V.get("/json/icon-list.json").then(e=>{this.iconList=e.data.data}).catch(e=>{this.iconList=[]})},getValues(e){const t=Ue(e);e.indexOf("edit")>=0?(this.page_title="edit_status",this.iconClass="fas fa-sync-alt",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,V.get("/api/status/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.status_id=e;let a=t.data.data.status;this.updateStatesWithData(a),this.override_status=a.override_statuses.length?0:1,this.icon_class={icon_class:a.icon},this.is_default=!!a.default}).catch(t=>{this.loading=!1,U(t)})},getStatusAlerts(e){this.loading=!0;let t=Ue(e);t=t===void 0?"":t,V.get("/api/status-alerts/"+t).then(a=>{this.loading=!1,this.alerts=a.data.data.ticket_status_changed,this.updateSetAlerts()}).catch(a=>{this.loading=!1,U(a)})},updateSetAlerts(){let e={};this.alerts.associates.forEach(function(t){let a=[],r=t.associate_id;t.channels.length>0&&(a=t.channels),e[r]=a}),this.setAlerts=e},toggleChannel(e,t,a){let r=this.setAlerts[t].indexOf(a);r>-1&&this.setAlerts[t].splice(r,1),e||this.setAlerts[t].push(a)},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),this.secondary_status=e.secondary_status?e.secondary_status:""},formatAlertFormData(){let e=[];for(const[t,a]of Object.entries(this.setAlerts)){let r={};r.associate=t,r.channels=[],a.forEach(function(n,o){r.channels[o]={channel_id:n}}),e.push(r)}return e},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=Mj(this.$data);return t},onSubmit(){if(this.icon_color=this.icon_color=="#"?"":this.icon_color,this.showErr=!this.icon_color,this.isValid()&&this.icon_color){this.loading=!0;let e={};e.name=this.name,e.order=this.order,e.icon_color=this.icon_color,e.icon_class=this.icon_class.icon_class,e.visibility_for_client=this.visibility_for_client,this.visibility_for_client||(e.secondary_status=this.secondary_status.id),e.allow_client=this.allow_client,e.purpose_of_status=this.purpose_of_status.id,e.halt_sla=this.halt_sla,e.comment=this.comment,e.default=this.is_default?1:0,e.override_statuses=this.override_status?[]:this.override_statuses.map(a=>a.id),e.alerts=this.formatAlertFormData(),this.status_id&&(e.status=this.status_id,e._method="PATCH");let t=this.status_id?"/api/status-update/"+this.status_id:"/api/status";V.post(t,e).then(a=>{this.loading=!1,K(a,"status-create-edit"),this.status_id?this.getInitialValues(this.status_id):setTimeout(()=>{this.$router.push({name:"Status Index"})},3e3)}).catch(a=>{this.loading=!1,U(a,"status-create-edit")})}}},components:{"text-field":we,"number-field":St,"dynamic-select":Be,"color-picker":us,"radio-button":Qe}},$j={class:"container col-sm-12"},Tj={key:0},Ej={key:1,class:"card card-light"},Lj={class:"card-header"},Aj={class:"card-title"},Ij={class:"card-body"},Pj={class:"row mb-3"},Oj={class:"pb-1"},qj={key:0,class:"error-block is-danger"},xj={class:"row mb-3"},Vj={class:"row mb-3"},Nj={key:0,class:"row mb-3"},Rj={for:"notify",class:"col-sm-12"},Uj={class:"card card-light"},jj={class:"card-header"},Bj={class:"card-title"},Yj={class:"card-body"},Hj={class:"table table-borderless table-sm"},Wj={style:{"width=":"100%"}},zj={style:{"text-align":"left"}},Gj={style:{width:"5%","text-align":"left"}},Kj=["onClick"],Jj={class:"card-footer"};function Zj(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("text-field"),b=v("number-field"),w=v("dynamic-select"),S=v("color-picker"),C=v("radio-button"),M=H("tooltip"),D=H("focus-first-input");return i(),d("div",$j,[u(m,{componentName:"status-create-edit"}),!n.hasDataPopulated||n.loading?(i(),d("div",Tj,[u(p,{loadingSpeed:4e3})])):f("",!0),n.hasDataPopulated?(i(),d("div",Ej,[s("div",Lj,[s("h3",Aj,h(e.trans(n.page_title)),1)]),s("div",Ij,[P((i(),d("div",Pj,[u(g,{label:e.trans("name"),type:"text",value:n.name,name:"name",class:"col-sm-3",required:!0,onChange:o.onChange,placehold:e.lang("enter_a_value")},null,8,["label","value","onChange","placehold"]),u(b,{label:e.trans("display_order"),value:n.order,name:"order",classname:"col-sm-3",onChange:o.onChange,placeholder:"n",type:"number",required:!0},null,8,["label","value","onChange"]),u(w,{name:"icon_class",label:e.trans("icon_class"),value:n.icon_class,onChange:o.onChange,classname:"col-sm-3",elements:n.iconList,multiple:!1,"option-label":"icon_class",required:!0,clearable:!1},null,8,["label","value","onChange","elements"]),s("div",{class:G(["col-sm-3 form-group",{"has-error":n.showErr}])},[P((i(),d("label",Oj,[L(h(e.trans("icon_color"))+" ",1),t[1]||(t[1]=s("span",{class:"text-danger"}," *",-1))])),[[M,e.trans("icon_color")]]),u(S,{color:n.icon_color,name:"icon_color",onColor:o.onChange,showError:n.showErr},null,8,["color","onColor","showError"]),n.showErr?(i(),d("div",qj,h(e.trans("this_field_is_required")),1)):f("",!0)],2)])),[[D]]),s("div",xj,[u(C,{options:n.yesNoOptions,label:e.trans("allow_client"),name:"allow_client",value:n.allow_client,onChange:o.onChange,classname:"form-group col-sm-2",optionClass:"col-sm-6",hint:e.trans("if_yes_then_clients_can_choose_this_status")},null,8,["options","label","value","onChange","hint"]),u(C,{options:n.yesNoOptions,label:e.trans("halt_sla"),name:"halt_sla",value:n.halt_sla,onChange:o.onChange,classname:"form-group col-sm-2",optionClass:"col-sm-6"},null,8,["options","label","value","onChange"]),u(C,{options:n.commentOptions,label:e.trans("comment"),name:"comment",value:n.comment,onChange:o.onChange,classname:"form-group col-sm-3",optionClass:"col-sm-6",hint:e.trans("if_required_comment_is_mandatory_while_changing_the_ticket_status")},null,8,["options","label","value","onChange","hint"]),u(C,{options:n.yesNoOptions,label:e.trans("visibility_to_client"),name:"visibility_for_client",value:n.visibility_for_client,onChange:o.onChange,classname:"form-group col-sm-2",optionClass:"col-sm-6",hint:e.trans("if_yes_status_name_will_be_displayed")},null,8,["options","label","value","onChange","hint"]),u(C,{options:n.overrideOptions,label:e.trans("allowed_override_status_to"),name:"override_status",value:n.override_status,onChange:o.onChange,classname:"form-group col-sm-3",optionClass:"col-sm-6"},null,8,["options","label","value","onChange"])]),s("div",Vj,[u(w,{label:e.trans("purpose_of_status"),multiple:!1,name:"purpose_of_status",required:!0,classname:"col-sm-3",apiEndpoint:"/api/dependency/ticket-status-type?purpose_of_status=1",value:n.purpose_of_status,onChange:o.onChange,clearable:!!n.purpose_of_status,hint:e.trans("purpose_of_status_will_perform_the_action_to_be_applied_on_the_status_selection")},null,8,["label","value","onChange","clearable","hint"]),n.visibility_for_client?f("",!0):(i(),A(w,{key:0,label:e.trans("status_to_display"),multiple:!1,name:"secondary_status",classname:"col-sm-3",apiEndpoint:o.visibiltyEndpoint,value:n.secondary_status,onChange:o.onChange,clearable:!!n.secondary_status,required:!0,hint:e.trans("this_status_will_be_displayed_to_client_if_visibility_of_client_chosen_no")},null,8,["label","apiEndpoint","value","onChange","clearable","hint"])),n.override_status?f("",!0):(i(),A(w,{key:1,label:e.trans("select_status"),multiple:!0,name:"override_statuses",required:!0,classname:"col-sm-4",apiEndpoint:"/api/dependency/statuses",value:n.override_statuses,onChange:o.onChange},null,8,["label","value","onChange"]))]),n.alerts?(i(),d("div",Nj,[s("div",Rj,[s("div",Uj,[s("div",jj,[s("h3",Bj,h(e.lang("notify")),1)]),s("div",Yj,[s("table",Hj,[(i(!0),d(B,null,re(n.alerts.associates,F=>(i(),d("tr",Wj,[s("td",zj,h(e.trans(F.name)),1),(i(!0),d(B,null,re(n.alerts.allowedChannels,I=>(i(),d("td",Gj,[s("i",{class:G([I.icon,n.setAlerts[F.associate_id].includes(I.id)?"active-channel":"inactive-channel"]),"aria-hidden":"true",onClick:R=>o.toggleChannel(n.setAlerts[F.associate_id].includes(I.id),F.associate_id,I.id),style:{"pointer-events":"initial",cursor:"pointer"}},null,10,Kj)]))),256))]))),256))])])])])])):f("",!0)]),s("div",Jj,[s("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...F)=>o.onSubmit&&o.onSubmit(...F))},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)])])])):f("",!0)])}const Xo=x(Fj,[["render",Zj],["__scopeId","data-v-2cf3afae"]]);const Qj={name:"rating-auto-request-modal",description:"Rating Auto Request component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function}},data:()=>({containerStyle:{width:"700px",height:"250px"},loading:!1,statuses:[]}),beforeMount(){this.getInitialValues()},computed:{isStatusesEmpty(){return this.statuses.length===0}},methods:{onChange(e,t){this[t]=e},getInitialValues(){this.loading=!0,V.get("api/auto-rating-requests").then(e=>{this.loading=!1,this.statuses=e.data&&e.data.data?e.data.data:[]}).catch(e=>{this.loading=!1,U(e,"rating-modal")})},onSubmit(){this.loading=!0;const e={};this.statuses.length>0&&(e.statuses=this.statuses.map(t=>t.id)),V.patch("api/auto-rating-requests",e).then(t=>{this.loading=!1,this.onClose(),K(t,"dataTableModal"),window.emitter.emit("refreshData")}).catch(t=>{this.loading=!1,U(t,"rating-modal")})}},components:{"dynamic-select":Be}},Xj={class:"modal-title"},e7={key:0,id:"department-status",class:"row"},t7=["disabled"];function a7(e,t,a,r,n,o){const m=v("alert"),p=v("dynamic-select"),g=v("reuse-loader"),b=v("modal");return a.showModal?(i(),A(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle,modalBodyClass:"widget-card-div"},{title:T(()=>[s("h4",Xj,h(e.lang("ratings_auto_request")),1)]),alert:T(()=>[u(m,{componentName:"rating-modal"})]),fields:T(()=>[e.loading?(i(),A(g,{key:1})):(i(),d("div",e7,[u(p,{label:e.trans("select_status"),multiple:!0,name:"statuses",prePopulate:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/statuses",value:e.statuses,onChange:o.onChange,required:!1,hint:e.trans("rating_status_tooltip")},null,8,["label","value","onChange","hint"])]))]),controls:T(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[0]||(t[0]=w=>o.onSubmit()),class:"btn btn-primary",disabled:o.isStatusesEmpty},[t[1]||(t[1]=s("i",{class:"fas fa-sync","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("update")),1)],8,t7)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const s7=x(Qj,[["render",a7],["__scopeId","data-v-13df92b3"]]);const n7={name:"RatingIndex",components:{"rating-modal":s7},data(){return{apiUrl:"ratings-list",loading:!1,columns:["name","rating_scale","is_default","action"],showModal:!1,options:{headings:{name:this.trans("name"),rating_scale:this.trans("rating_scale"),is_default:this.trans("status"),action:this.trans("actions")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},pagination:{chunk:5,nav:"fixed",edge:!0},sortable:["name","rating_scale"],filterable:["name"],columnsClasses:{name:"rating__name",rating_scale:"rating__scale",is_default:"ratind__active",action:"rating__action"}}}},beforeMount(){let e={templates:{action:(t,a)=>this.h(Ye,{data:a}),is_default:function(t,a){let r=this.h("span",{class:a.is_default?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.is_default?this.trans("active"):this.trans("inactive"));return this.h("a",{},[r])}},requestAdapter(t){return{sort_field:t.orderBy?t.orderBy:"id",sort_order:t.ascending?"desc":"asc",search_query:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.map(a=>(a.delete_url=this.basePath()+"/delete-rating/"+a.id,a.edit_url="/rating/"+a.id+"/edit",a)),count:t.total}},orderBy:{column:"id",ascending:!0}};this.options={...this.options,...e}},methods:{onClickEvent(){this.showModal=!0},onClose(){this.showModal=!1}}},o7={class:"col-sm-12"},i7={class:"card-tools"},l7={title:"Edit",class:"btn btn-light btn-sm"},r7={class:"row",id:"rating-index"};function d7(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("faveo-box"),w=v("rating-modal"),S=H("tooltip");return i(),d("div",o7,[u(m,{componentName:"dataTableModal"}),u(b,{title:e.lang("list_of_current_ratings")},{headerMenu:T(()=>[s("div",i7,[s("a",{id:"edit-button",onClick:t[0]||(t[0]=(...C)=>o.onClickEvent&&o.onClickEvent(...C)),href:"javascript:;"},[s("span",l7,[t[1]||(t[1]=s("i",{class:"fa fa-eye"},null,-1)),L(" "+h(e.lang("manage_auto_request_ratings")),1)])]),P((i(),A(p,{class:"btn btn-tool",to:"/rating/create"},{default:T(()=>t[2]||(t[2]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[S,e.lang("add")]])])]),default:T(()=>[s("div",r7,[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"rating-index",class:"col-sm-12"},null,8,["url","dataColumns","option"])])]),_:1},8,["title"]),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(w,{key:0,onClose:o.onClose,showModal:n.showModal},null,8,["onClose","showModal"])):f("",!0)]),_:1})])}const c7=x(n7,[["render",d7]]);function u7(e){const{name:t,rating_scale:a,thank_you_message:r,auto_reminder:n,reminder_time_interval:o,total_number_of_reminders:m}=e;var p={name:[t,"isRequired"],rating_scale:[a,"isRequired"],thank_you_message:[r,"isRequired"]};e.auto_reminder&&(p.reminder_time_interval=[e.reminder_time_interval,"isRequired",{"minValue(1)":"The value should be greater than 1."},{"maxValue(15)":"The value should be lesser than 15."}],p.total_number_of_reminders=[e.total_number_of_reminders,"isRequired",{"minValue(1)":"The value should be greater than 1."},{"maxValue(4)":"The value should be lesser than 4."}]);const g=new Le(N),{errors:b,isValid:w}=g.validate(p);return Ee.dispatch("setValidationError",b),w}const m7={components:{"radio-button":Qe,TextField:we,StaticSelect:it,ToolTip:nt,FormFieldTemplate:ls},props:{rating:{type:Object,default:()=>{}},edit:{type:Boolean,default:!1}},data(){return{name:"",rating_scale:"",rating_icon:"star",ratingScaleOptions:[{id:2,name:"Two"},{id:3,name:"Three"},{id:5,name:"Five"},{id:7,name:"Seven"}],thank_you_message:"",is_default:1,loading:!1,id:null,show_additional_comment_box:0,has_additional_question:0,questions:[],auto_reminder:0,radioOptions:[{name:"yes",value:1},{name:"no",value:0}],reminder_time_interval:"",total_number_of_reminders:""}},beforeMount(){this.getDataForEdit()},computed:{cardTitle(){let e=this.id?"rating_update":"create_new_rating";return this.lang(e)},deleteQuestionBtnDisabled(){return this.id}},methods:{async getDataForEdit(){const e=Ue(window.location.pathname);if(window.location.pathname.indexOf("edit")>=0){this.loading=!0;try{const t=await V.get(`api/get-rating/${e}`);this.updateStatesWithData(t.data),this.loading=!1}catch(t){console.log("Trying to get rating for edit",t)}}else return},onChange(e,t){this[t]=e},addQuestion(){this.questions.push({name:""})},addQuestionIfEmpty(){this.questions.length||this.addQuestion()},deleteQuestion(e){this.questions.length!==1&&this.questions.splice(e,1)},isValid(){return!!u7(this.$data)},async submit(){if(!this.isValid())return null;let e,t;this.id?(e=`update-rating/${this.id}`,t="PATCH"):(e="store-rating",t="POST"),this.loading=!0;let a={name:this.name,rating_scale:this.rating_scale,thank_you_message:this.thank_you_message,is_default:this.is_default,show_additional_comment_box:!!this.show_additional_comment_box,has_additional_question:!!this.has_additional_question,questions:this.questions,rating_icon:this.rating_icon||"star",auto_reminder:this.auto_reminder,reminder_time_interval:this.auto_reminder&&this.reminder_time_interval||"",total_number_of_reminders:this.auto_reminder&&this.total_number_of_reminders||""};try{let r=await V.request({method:t,url:e,data:a});this.$store.dispatch("unsetValidationError"),K(r,"rating-create-edit"),this.id||setTimeout(()=>{this.$router.push({name:"Rating Index"})},3e3)}catch(r){U(r,"rating-create-edit")}finally{this.loading=!1}},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})}}},h7={class:"col-sm-12"},p7={class:"row"},_7={class:"row"},f7={key:0,class:"row"},g7={class:"row"},v7={class:"form-check ms-3 mt-1 col-sm-3"},b7={class:"form-check-label fw-normal fs-8",for:"default_rating_checkbox"},y7={class:"form-check ms-3 mt-1 col-sm-3"},k7=["disabled"],w7={class:"form-check-label fw-normal fs-8",for:"additional_comment_checkbox"},C7={class:"form-check ms-3 mt-1 col-sm-3"},D7=["disabled"],S7={class:"form-check-label fw-normal fs-8",for:"additional_question_checkbox"},M7={class:"col-sm-auto"},F7=["onClick"],$7={key:1,id:"rating-question-trash-d",class:"fas fa-trash faveo-trash actionButtons disabled"},T7={class:"col-sm-6"},E7=["placeholder","onUpdate:modelValue"],L7={class:"row"},A7={class:"col-sm-12"},I7={style:{"margin-top":"1rem"}},P7={key:1,type:"button",class:"btn btn-light btn-block disabled"},O7={class:"card-footer"};function q7(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("text-field"),b=v("static-select"),w=v("radio-button"),S=v("tool-tip"),C=v("form-field-template"),M=v("faveo-box"),D=H("focus-first-input");return i(),d("div",h7,[u(m,{componentName:"rating-create-edit"}),n.loading?(i(),A(p,{key:0})):f("",!0),u(M,{title:o.cardTitle},{actions:T(()=>[s("div",O7,[s("button",{type:"button",id:"submitter",onClick:t[5]||(t[5]=(...F)=>o.submit&&o.submit(...F)),class:"btn btn-primary"},[t[8]||(t[8]=s("i",{class:"fas fa-save","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("submit")),1)])])]),default:T(()=>[P((i(),d("div",p7,[u(g,{name:"name",value:n.name,"on-change":o.onChange,placehold:e.lang("enter_a_value"),label:e.lang("rating_label"),type:"text",required:!0,classname:"col-sm-6"},null,8,["value","on-change","placehold","label"]),u(b,{name:"rating_scale",value:n.rating_scale,"on-change":o.onChange,hint:e.lang("rating-msg1"),label:e.lang("rating_scale"),elements:n.ratingScaleOptions,required:!0,classname:"col-sm-6",disabled:!!n.id},null,8,["value","on-change","hint","label","elements","disabled"])])),[[D]]),s("div",_7,[u(g,{name:"thank_you_message",value:n.thank_you_message,"on-change":o.onChange,placehold:e.lang("enter_a_value"),label:e.lang("rating_thank_you_message"),required:!0,classname:"col-sm-6",hint:e.lang("rating_thank_you_message_hint")},null,8,["value","on-change","placehold","label","hint"]),u(w,{options:n.radioOptions,label:e.trans("send_auto_reminders"),name:"auto_reminder",value:n.auto_reminder,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),n.auto_reminder?(i(),d("div",f7,[u(g,{label:e.trans("remider_time_interval"),hint:e.lang("time_interval"),type:"number",name:"reminder_time_interval",value:n.reminder_time_interval,classname:"col-sm-6",onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","hint","value","onChange","placehold"]),u(g,{label:e.trans("number_of_reminders"),hint:e.lang("no_of_reminders"),type:"number",name:"total_number_of_reminders",value:n.total_number_of_reminders,classname:"col-sm-6",onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","hint","value","onChange","placehold"])])):f("",!0),s("div",g7,[s("div",v7,[P(s("input",{type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[0]||(t[0]=F=>n.is_default=F),class:"form-check-input",id:"default_rating_checkbox"},null,512),[[Ve,n.is_default]]),s("label",b7,h(e.lang("rating_make_default")),1)]),s("div",y7,[P(s("input",{type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[1]||(t[1]=F=>n.show_additional_comment_box=F),class:"form-check-input",id:"additional_comment_checkbox",disabled:n.id},null,8,k7),[[Ve,n.show_additional_comment_box]]),s("label",w7,[L(h(e.lang("rating_show_additional_comment_box_label"))+" ",1),u(S,{message:e.lang("rating_show_additional_comment_box_label_hint"),size:"small"},null,8,["message"])])]),s("div",C7,[P(s("input",{type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[2]||(t[2]=F=>n.has_additional_question=F),class:"form-check-input",id:"additional_question_checkbox",onClick:t[3]||(t[3]=(...F)=>o.addQuestionIfEmpty&&o.addQuestionIfEmpty(...F)),disabled:n.id},null,8,D7),[[Ve,n.has_additional_question]]),s("label",S7,[L(h(e.lang("rating_show_additional_rating_box_label"))+" ",1),u(S,{message:e.lang("rating_show_additional_rating_box_label_hint"),size:"small"},null,8,["message"])])])]),n.has_additional_question?(i(),A(M,{key:1,title:e.trans("rating_additional_questions"),class:"mt-4"},{default:T(()=>[(i(!0),d(B,null,re(n.questions,(F,I)=>(i(),d("div",{class:"row mt-1",key:I},[s("span",M7,[o.deleteQuestionBtnDisabled?(i(),d("i",$7)):(i(),d("i",{key:0,id:"rating-question-trash",class:"fas fa-trash faveo-trash actionButtons",onClick:R=>o.deleteQuestion(I)},null,8,F7))]),s("div",T7,[u(C,{name:`additional_rating_questions.${I}.question`,label:""},{default:T(()=>[P(s("input",{placeholder:e.lang("rating_additional_question_placeholder"),type:"text",class:"form-control","onUpdate:modelValue":R=>F.name=R},null,8,E7),[[ze,F.name]])]),_:2},1032,["name"])])]))),128)),s("div",L7,[s("div",A7,[s("div",I7,[o.deleteQuestionBtnDisabled?(i(),d("button",P7,[s("span",null,[t[7]||(t[7]=s("i",{"aria-hidden":"true",class:"fas fa-plus"},null,-1)),L(" "+h(e.trans("rating_add_question")),1)])])):(i(),d("button",{key:0,type:"button",class:"btn btn-light btn-block",onClick:t[4]||(t[4]=(...F)=>o.addQuestion&&o.addQuestion(...F))},[s("span",null,[t[6]||(t[6]=s("i",{"aria-hidden":"true",class:"fas fa-plus"},null,-1)),L(" "+h(e.trans("rating_add_question")),1)])]))])])])]),_:1},8,["title"])):f("",!0)]),_:1},8,["title"])])}const ei=x(m7,[["render",q7],["__scopeId","data-v-ac04be78"]]),x7={name:"labels-index",data(){return{columns:["title","order","visible_to","status","action"],apiUrl:"/api/label-list",action:"all",actions:["all","active","inactive"],options:{}}},beforeMount(){const e=this;this.options={headings:{title:this.trans("title"),order:this.trans("order"),visible_to:this.trans("visible_to"),status:this.trans("status"),action:this.trans("actions")},texts:{filter:"",limit:""},templates:{action:(t,a)=>e.h(Ye,{data:a}),visible_to(t,a){if(a.visible_to){let r=[];return a.visible_to.split(",").forEach(n=>{r.push(N(n))}),r.toString()}else return"--"},title:function(t,a){let r=e.h("span",{style:{color:"#FFF",backgroundColor:a.color,fontSize:"12px"},class:"badge"},e.loadLabel(a.title));return e.h("a",{href:e.basePath()+"/panel/tickets?show%5B%5D=inbox&departments%5B%5D=All&filter-by-url=1&category=all&label-ids[]="+a.id},[r])},status:function(t,a){let r=e.h("span",{style:"cursor:auto",class:a.status?"btn btn-success btn-sm":"btn btn-danger btn-sm"},a.status?"Active":"Inactive");return e.h("a",{},[r])}},sortable:["title","status","order"],filterable:["title","status","order"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"order","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/label/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/label-delete/"+a.id,a.is_linked=!0,a.dependency="label",a)),count:t.data.total}},orderBy:{column:"order",ascending:!0}}},methods:{updateTable(e){switch(e){case"all":this.apiUrl="/api/label-list";break;case"active":this.apiUrl="/api/label-list?status=1";break;case"inactive":this.apiUrl="/api/label-list?status=0";break}},loadLabel(e){return ss(e)}}},V7={id:"labels-list",class:"col-sm-12"},N7={class:"card-tools"},R7={class:"btn-group"},U7={class:"dropdown-menu dropdown-menu-right",role:"menu","x-placement":"bottom-end"},j7=["onClick"];function B7(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("faveo-box"),w=H("tooltip");return i(),d("div",V7,[u(m,{componentName:"dataTableModal"}),u(b,{title:e.trans("list_of_labels")},{customActions:T(()=>[s("div",N7,[P((i(),A(p,{class:"btn btn-tool",to:"/label/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[w,e.trans("create_label")]]),s("div",R7,[t[1]||(t[1]=s("button",{type:"button",class:"btn btn-tool dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"glyphicon glyphicon-filter"})],-1)),s("div",U7,[(i(!0),d(B,null,re(n.actions,S=>(i(),d("a",{href:"javascript:;",class:"dropdown-item",onClick:C=>o.updateTable(S)},h(e.trans(S)),9,j7))),256))])])])]),default:T(()=>[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"labels-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const Y7=x(x7,[["render",B7]]);function H7(e){const{title:t,order:a,color:r,visible_to:n}=e;let o={title:[t,"isRequired"],visible_to:[n,"isRequired"],order:[a,"isRequired",{"minValue(1)":"Invalid input."}]};const m=new Le(N),{errors:p,isValid:g}=m.validate(o);return Ee.dispatch("setValidationError",p),{errors:p,isValid:g}}const W7={name:"label-create-edit",description:"Label create edit page",data(){return{page_title:"create_label",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,label_id:"",title:"",order:"",color:"",colorErr:"",status:1,showErr:!1,visibility_options:[{id:"agents",name:this.trans("agents")},{id:"team_lead",name:this.trans("team_lead")},{id:"dept_mngr",name:this.trans("department_manager")}],visible_to:"",showDropdown:!1,filteredEmojis:[],allEmojis:Fi.map(e=>({unified:e.unified,short_names:e.short_names,native:String.fromCodePoint(...e.unified.split("-").map(t=>"0x"+t))})),selectedEmojiIndex:0}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=Ue(e);e.indexOf("edit")>=0?(this.page_title="edit_label",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,V.get("/api/label/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.label;this.label_id=a.id,this.updateStatesWithData(a),this.status=parseInt(this.status)}).catch(t=>{this.loading=!1,U(t,"label-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(n=>{a.hasOwnProperty(n)&&(t[n]=e[n])});let r=this.visible_to.split(",");this.visible_to=this.visibility_options.filter(n=>r.includes(n.id)).map(n=>n)},isValid(){const{errors:e,isValid:t}=H7(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.color=this.color=="#"?"":this.color,this.showErr=!this.color,this.isValid()&&this.color){this.loading=!0;let e={};e.title=this.title,e.order=parseInt(this.order),e.color=this.color,e.status=this.status?1:0,e.visible_to=this.visible_to.map(a=>a.id);let t="/api/label";this.page_title=="edit_label"&&(t="/api/label-update/"+this.label_id,e._method="PATCH"),V.post(t,e).then(a=>{this.$store.dispatch("unsetValidationError"),this.colorErr="",this.loading=!1,K(a,"label-create-edit"),this.label_id?this.getInitialValues(this.label_id):setTimeout(()=>{this.$router.push({name:"Labels Index"})},3e3)}).catch(a=>{a.response.data.message&&a.response.data.message.color&&(this.colorErr=a.response.data.message.color),this.loading=!1,U(a,"label-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13?this.showDropdown&&this.filteredEmojis.length>0?this.selectEmoji(this.filteredEmojis[this.selectedEmojiIndex]):this.onSubmit():t===38?this.showDropdown&&(this.selectedEmojiIndex=(this.selectedEmojiIndex-1+this.filteredEmojis.length)%this.filteredEmojis.length):t===40&&this.showDropdown&&(this.selectedEmojiIndex=(this.selectedEmojiIndex+1)%this.filteredEmojis.length)},onInput(e){const a=e.target.value.split(" ").pop();if(a.startsWith(":")){const r=a.slice(1);this.filteredEmojis=this.allEmojis.filter(n=>n.short_names.some(o=>o.startsWith(r))).slice(0,5),this.showDropdown=this.filteredEmojis.length>0,this.selectedEmojiIndex=0}else this.showDropdown=!1},selectEmoji(e){const t=this.title.split(" ");t.pop(),t.push(`:${e.short_names[0]}:`),this.title=t.join(" "),this.showDropdown=!1}},components:{"text-field":we,"number-field":St,"color-picker":us,"status-switch":lt,"dynamic-select":Be}},z7={class:"container col-sm-12"},G7={key:0,class:"row"},K7={class:"row"},J7={key:0,class:"emoji-dropdown"},Z7=["onClick"],Q7={class:"row"},X7={class:"pb-1"},eB={key:0,class:"error-block is-danger"},tB={key:1,class:"is-danger"},aB={key:0,class:"col-sm-4"},sB={for:"status"},nB={class:"card-footer"};function oB(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("text-field"),b=v("number-field"),w=v("dynamic-select"),S=v("color-picker"),C=v("status-switch"),M=v("faveo-box"),D=H("focus-first-input");return i(),d("div",z7,[!n.hasDataPopulated||n.loading?(i(),d("div",G7,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"label-create-edit"}),n.hasDataPopulated?(i(),A(M,{key:1,title:e.trans(n.page_title)},{actions:T(()=>[s("div",nB,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=F=>o.onSubmit())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)])])]),default:T(()=>[P((i(),d("div",K7,[u(g,{hint:e.trans("label_hint"),label:e.trans("title"),value:n.title,type:"text",name:"title",onChange:o.onChange,placehold:e.lang("enter_a_value"),keyupListener:o.triggerEvent,classname:"col-sm-6",required:!0,onInput:o.onInput},null,8,["hint","label","value","onChange","placehold","keyupListener","onInput"]),n.showDropdown?(i(),d("ul",J7,[(i(!0),d(B,null,re(n.filteredEmojis,(F,I)=>(i(),d("li",{key:I,class:G({active:I===n.selectedEmojiIndex}),onClick:R=>o.selectEmoji(F)},h(F.native)+" "+h(F.short_names[0]),11,Z7))),128))])):f("",!0),u(b,{label:e.trans("order"),value:n.order,name:"order",onChange:o.onChange,classname:"col-sm-6",keyupListener:o.triggerEvent,type:"number",required:!0,placeholder:"n"},null,8,["label","value","onChange","keyupListener"])])),[[D]]),s("div",Q7,[u(w,{label:e.trans("visibility"),multiple:!0,elements:n.visibility_options,name:"visible_to",value:n.visible_to,classname:"col-sm-4",onChange:o.onChange,required:!0},null,8,["label","elements","value","onChange"]),s("div",{class:G(["col-sm-4 form-group",{"has-error":n.showErr||n.colorErr}])},[s("label",X7,[L(h(e.trans("icon_color"))+" ",1),t[1]||(t[1]=s("span",{class:"text-danger"}," *",-1))]),u(S,{color:n.color,name:"color",showError:n.showErr,colorError:n.colorErr,onColor:o.onChange},null,8,["color","showError","colorError","onColor"]),n.showErr?(i(),d("div",eB,h(e.trans("this_field_is_required")),1)):f("",!0),!n.showErr&&n.colorErr?(i(),d("span",tB,h(n.colorErr),1)):f("",!0)],2),n.page_title=="edit_label"?(i(),d("div",aB,[s("label",sB,h(e.trans("status")),1),u(C,{name:"status",value:n.status,onChange:o.onChange,bold:!0},null,8,["value","onChange"])])):f("",!0)])]),_:1},8,["title"])):f("",!0)])}const ti=x(W7,[["render",oB]]);const iB={name:"source-index",data(){return{columns:["name","ticket_count","visible_to","description","action"],apiUrl:"/api/tags-list",options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),ticket_count:this.trans("ticket_count"),visible_to:this.trans("visible_to"),description:this.trans("description"),action:this.trans("actions")},columnsClasses:{name:"tag-name",ticket_count:"tag-count",visible_to:"tag-visible",description:"tag-desc",action:"tag-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{name:function(t,a){let r=e.h("i",{class:"fas fa-tag"}),n=[...a.name.matchAll(/:\w+:/g)],o=a.name.replace(/:\w+:/g,""),m=e.subString(o),p=m;n.forEach(b=>{let w=b.index;w<m.length?p=p.slice(0,w)+b[0]+p.slice(w):p+=b[0]});let g=e.h("span",{style:{backgroundColor:"lightgray",color:"#444",fontSize:"12px"},title:e.loadLable(a.name),class:"badge"},[r," ",e.loadLable(p)]);return e.h("div",[g])},description(t,a){return a.description?a.description:"--"},visible_to(t,a){if(a.visible_to){let r=[];return a.visible_to.split(",").forEach(n=>{r.push(N(n))}),r.toString()}else return"--"},ticket_count:function(t,a){return e.h("a",{href:e.basePath()+"/panel/tickets?show%5B%5D=inbox&departments%5B%5D=All&filter-by-url=1&category=all&tag-ids[]="+a.id},a.ticket_count)},action:(t,a)=>e.h(Ye,{data:a})},sortable:["name","description"],filterable:["name","description"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.tags.map(a=>(a.edit_url="/tag/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/tag-delete/"+a.id,a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}},methods:{loadLable(e){return ss(e)},subString(e){return Yt(e,30)}}},lB={id:"tags-list",class:"col-sm-12"},rB={class:"card-tools"};function dB(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("faveo-box"),w=H("tooltip");return i(),d("div",lB,[u(m,{componentName:"dataTableModal"}),u(b,{title:e.trans("list_of_tags")},{customActions:T(()=>[s("div",rB,[P((i(),A(p,{class:"btn btn-tool",to:"/tag/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[w,e.trans("create_tag")]])])]),default:T(()=>[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"tags-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const cB=x(iB,[["render",dB]]);function uB(e){const{name:t,description:a,visible_to:r}=e;let n={name:[t,"isRequired",{"max(250)":N("tag_name_should_be_less_than_250_characters")}],visible_to:[r,"isRequired"],description:[a,{"max(50)":N("descripton_should_be_less_than_50_characters")}]};const o=new Le(N),{errors:m,isValid:p}=o.validate(n);return Ee.dispatch("setValidationError",m),{errors:m,isValid:p}}const mB={name:"tag-create-edit",description:"Tag Create edit page",data(){return{page_title:"create_tag",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,tag_id:"",name:"",description:"",visibility_options:[{id:"all_users",name:"All Users"},{id:"logged_in_users",name:"Logged in Users"},{id:"agents",name:"Agents"}],visible_to:"",showDropdown:!1,filteredEmojis:[],allEmojis:Fi.map(e=>({unified:e.unified,short_names:e.short_names,native:String.fromCodePoint(...e.unified.split("-").map(t=>"0x"+t))})),selectedEmojiIndex:0}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=Ue(e);e.indexOf("edit")>=0?(this.page_title="edit_tag",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,V.get("/api/tag/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.tag;this.tag_id=a.id,this.updateStatesWithData(a)}).catch(t=>{this.loading=!1,U(t,"tag-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(n=>{a.hasOwnProperty(n)&&(t[n]=e[n])});let r=this.visible_to.split(",");this.visible_to=this.visibility_options.filter(n=>r.includes(n.id)).map(n=>n)},isValid(){const{errors:e,isValid:t}=uB(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.name=this.name,e.description=this.description,e.visible_to=this.visible_to.map(a=>a.id);let t="/api/tag";this.page_title=="edit_tag"&&(t="/api/tag/update/"+this.tag_id,e._method="PATCH"),V.post(t,e).then(a=>{this.loading=!1,K(a,"tag-create-edit"),this.tag_id?this.getInitialValues(this.tag_id):setTimeout(()=>{this.$router.push({name:"Tags Index"})},3e3)}).catch(a=>{this.loading=!1,U(a,"tag-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13?this.showDropdown&&this.filteredEmojis.length>0?this.selectEmoji(this.filteredEmojis[this.selectedEmojiIndex]):this.onSubmit():t===38?this.showDropdown&&(this.selectedEmojiIndex=(this.selectedEmojiIndex-1+this.filteredEmojis.length)%this.filteredEmojis.length):t===40&&this.showDropdown&&(this.selectedEmojiIndex=(this.selectedEmojiIndex+1)%this.filteredEmojis.length)},onInput(e){const a=e.target.value.split(" ").pop();if(a.startsWith(":")){const r=a.slice(1);this.filteredEmojis=this.allEmojis.filter(n=>n.short_names.some(o=>o.startsWith(r))).slice(0,5),this.showDropdown=this.filteredEmojis.length>0,this.selectedEmojiIndex=0}else this.showDropdown=!1},selectEmoji(e){const t=this.name.split(" ");t.pop(),t.push(`:${e.short_names[0]}:`),this.name=t.join(" "),this.showDropdown=!1}},components:{"text-field":we,"dynamic-select":Be}},hB={class:"col-sm-12"},pB={key:0,class:"row"},_B={class:"row"},fB={key:0,class:"emoji-dropdown"},gB=["onClick"],vB={class:"row"},bB={class:"card-footer"};function yB(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("text-field"),b=v("dynamic-select"),w=v("faveo-box"),S=H("focus-first-input");return i(),d("div",hB,[!n.hasDataPopulated||n.loading?(i(),d("div",pB,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"tag-create-edit"}),n.hasDataPopulated?(i(),A(w,{key:1,title:e.trans(n.page_title)},{actions:T(()=>[s("div",bB,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=C=>o.onSubmit())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)])])]),default:T(()=>[P((i(),d("div",_B,[u(g,{hint:e.trans("tag_hint"),label:e.trans("name"),value:n.name,type:"text",name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),keyupListener:o.triggerEvent,classname:"col-sm-6",required:!0,onInput:o.onInput},null,8,["hint","label","value","onChange","placehold","keyupListener","onInput"]),n.showDropdown?(i(),d("ul",fB,[(i(!0),d(B,null,re(n.filteredEmojis,(C,M)=>(i(),d("li",{key:M,class:G({active:M===n.selectedEmojiIndex}),onClick:D=>o.selectEmoji(C)},h(C.native)+" "+h(C.short_names[0]),11,gB))),128))])):f("",!0),u(b,{label:e.trans("visibility"),multiple:!0,elements:n.visibility_options,name:"visible_to",value:n.visible_to,classname:"col-sm-6",onChange:o.onChange,required:!0},null,8,["label","elements","value","onChange"])])),[[S]]),s("div",vB,[u(g,{label:e.trans("description"),value:n.description,type:"textarea",name:"description",onChange:o.onChange,placehold:e.lang("enter_a_value"),keyupListener:o.triggerEvent,classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold","keyupListener"])])]),_:1},8,["title"])):f("",!0)])}const ai=x(mB,[["render",yB],["__scopeId","data-v-446f8a4b"]]);const kB={name:"source-index",data(){return{columns:["name","value","description","action"],apiUrl:"/api/source-list",options:{}}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),description:this.trans("description"),value:this.trans("display_name"),action:this.trans("actions")},columnsClasses:{name:"source-name",value:"source-display",description:"source-desc",action:"source-action"},texts:{filter:"",limit:""},templates:{description(t,a){return a.description?a.description:"--"},action:(t,a)=>e.h(Ye,{data:a})},sortable:["name","value","description"],filterable:["name","value","description"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.ticketSources.map(a=>(a.edit_url="/source/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/source-delete/"+a.id,a.replace=!0,a.dependency="sources",a.title="select_different_ticket_source_to_delete",a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}}},wB={id:"source-list",class:"col-sm-12"},CB={class:"card-tools"};function DB(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=v("faveo-box"),w=H("tooltip");return i(),d("div",wB,[u(m,{componentName:"dataTableModal"}),u(b,{title:e.trans("list_of_source")},{customActions:T(()=>[s("div",CB,[P((i(),A(p,{class:"btn btn-tool",to:"/source/create"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[w,{content:e.trans("create_source"),placement:"left"}]])])]),default:T(()=>[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"source-list"},null,8,["url","dataColumns","option"])]),_:1},8,["title"])])}const SB=x(kB,[["render",DB]]);function MB(e){const{name:t,display_as:a,description:r,icon:n}=e;let o={name:[t,"isRequired",{"max(20)":N("name_should_be_less_than_20_characters")}],icon:[n,"isRequired"],display_as:[a,"isRequired",{"max(20)":N("display_as_should_be_less_than_20_characters")}],description:[r,{"max(100)":N("descripton_should_be_less_than_100_characters")}]};const m=new Le(N),{errors:p,isValid:g}=m.validate(o);return Ee.dispatch("setValidationError",p),{errors:p,isValid:g}}const FB={name:"source-create-edit",description:"Source Create edit page",data(){return{page_title:"create_source",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,source_id:"",name:"",display_as:"",description:"",icon:"",iconList:[],isDisabled:!1}},beforeMount(){const e=window.location.pathname;this.getValues(e),this.getIconList()},methods:{getIconList(){V.get("/json/icon-list.json").then(e=>{this.iconList=e.data.data}).catch(e=>{this.iconList=[]})},getValues(e){const t=Ue(e);e.indexOf("edit")>=0?(this.page_title="edit_source",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,V.get("/api/source/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0;let a=t.data.data.source;this.source_id=a.id,this.display_as=a.value,this.icon=a.css_class?{icon_class:a.css_class}:"",this.isDisabled=!!a.is_default,this.updateStatesWithData(a)}).catch(t=>{this.loading=!1,U(t,"source-create-edit")})},updateStatesWithData(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},isValid(){const{errors:e,isValid:t}=MB(this.$data);return t},onChange(e,t){this[t]=e||""},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.name=this.name,e.display_as=this.display_as,e.description=this.description,e.icon=this.icon.icon_class;let t="/api/source";this.page_title=="edit_source"&&(t="/api/source/update/"+this.source_id,e._method="PATCH"),V.post(t,e).then(a=>{this.loading=!1,K(a,"source-create-edit"),this.source_id?this.getInitialValues(this.source_id):setTimeout(()=>{this.$router.push({name:"Source Index"})},3e3)}).catch(a=>{this.loading=!1,U(a,"source-create-edit")})}},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":we,"dynamic-select":Be}},$B={class:"col-sm-12"},TB={key:0,class:"row"},EB={class:"row"},LB={class:"row"},AB={class:"card-footer"};function IB(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("text-field"),b=v("dynamic-select"),w=v("faveo-box"),S=H("focus-first-input");return i(),d("div",$B,[!n.hasDataPopulated||n.loading?(i(),d("div",TB,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"source-create-edit"}),n.hasDataPopulated?(i(),A(w,{key:1,title:e.trans(n.page_title)},{actions:T(()=>[s("div",AB,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=C=>o.onSubmit())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)])])]),default:T(()=>[P((i(),d("div",EB,[u(g,{label:e.trans("name"),value:n.name,type:"text",name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-4",keyupListener:o.triggerEvent,required:!0,disabled:n.isDisabled},null,8,["label","value","onChange","placehold","keyupListener","disabled"]),u(g,{label:e.trans("display_as"),value:n.display_as,type:"text",name:"display_as",onChange:o.onChange,placehold:e.lang("enter_a_value"),keyupListener:o.triggerEvent,classname:"col-sm-4",required:!0},null,8,["label","value","onChange","placehold","keyupListener"]),u(b,{name:"icon",label:e.trans("icon_class"),value:n.icon,onChange:o.onChange,classname:"col-sm-4",elements:n.iconList,multiple:!1,"option-label":"icon_class",required:!0,clearable:!!n.icon},null,8,["label","value","onChange","elements","clearable"])])),[[S]]),s("div",LB,[u(g,{label:e.trans("description"),value:n.description,type:"textarea",name:"description",onChange:o.onChange,placehold:e.lang("enter_a_value"),keyupListener:o.triggerEvent,classname:"col-sm-12",required:!1},null,8,["label","value","onChange","placehold","keyupListener"])])]),_:1},8,["title"])):f("",!0)])}const si=x(FB,[["render",IB]]);const PB={name:"ticket-templates",description:"Ticket Templates List",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},data(){return{columns:["name","created_at","action"],options:{},apiUrl:"/ticket-template-list"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),created_at:this.trans("created_date"),action:this.trans("actions")},columnsClasses:{name:"tic-tem-name",created_at:"tic-tem-created",action:"tic-tem-action"},texts:{filter:"",limit:""},templates:{created_at:function(t,a){return a.created_at&&a.created_at!="0000-00-00 00:00:00"?e.formattedTime(a.created_at):"--"},action:(t,a)=>e.h(Ye,{data:a})},sortable:["name","created_at"],filterable:["name","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"created_at","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.message.data.map(a=>(a.edit_url="/ticket-template/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/ticket/ticket-template/"+a.id+"/delete/",a)),count:t.message.total}},orderBy:{column:"created_at",ascending:!0}}}},OB={id:"list_of_ticket_templates",class:"col-sm-12"},qB={class:"card card-light"},xB={class:"card-header"},VB={class:"card-title"},NB={class:"card-tools"},RB={class:"card-body",id:"my_ticket_templates"};function UB(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",OB,[u(m,{componentName:"dataTableModal"}),s("div",qB,[s("div",xB,[s("h3",VB,h(e.trans("list_of_ticket_templates")),1),s("div",NB,[P((i(),A(p,{to:"/ticket-template/create",class:"btn-tool"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,{content:e.trans("create_ticket_template"),placement:"left"}]])])]),s("div",RB,[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"list_of_ticket_templates"},null,8,["url","dataColumns","option"])])])])}const jB=x(PB,[["render",UB]]);const BB={name:"ticket-pdf-templates",description:"Ticket PDF Templates List",setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime),formattedDate:me(()=>e.getters.formattedDate)}},data(){return{columns:["name","created_at","action"],options:{},apiUrl:"/api/get/pdfTemplates"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},headings:{name:this.trans("name"),created_at:this.trans("created_date"),action:this.trans("actions")},columnsClasses:{name:"tic-pdf-tem-name",created_at:"tic-pdf-tem-created",action:"tic-pdf-tem-action"},texts:{filter:"",limit:""},templates:{created_at:function(t,a){return a.created_at&&a.created_at!="0000-00-00 00:00:00"?e.formattedTime(a.created_at):"--"},action:(t,a)=>e.h(Ye,{data:a})},sortable:["name","created_at"],filterable:["name","created_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"created_at","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/ticket-pdf-template/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/delete/ticket-pdf-template/"+a.id,a)),count:t.data.total}},orderBy:{column:"created_at",ascending:!0}}}},YB={id:"list_of_ticket_pdf_templates",class:"col-sm-12"},HB={class:"card card-light"},WB={class:"card-header"},zB={class:"card-title"},GB={class:"card-tools"},KB={class:"card-body",id:"my_ticket_pdf_templates"};function JB(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",YB,[u(m,{componentName:"dataTableModal"}),s("div",HB,[s("div",WB,[s("h3",zB,h(e.trans("list_of_ticket_pdf_templates")),1),s("div",GB,[P((i(),A(p,{to:"/ticket-pdf-template/create",class:"btn-tool"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,{content:e.trans("create_ticket_pdf_template"),placement:"left"}]])])]),s("div",KB,[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"list_of_ticket_pdf_templates"},null,8,["url","dataColumns","option"])])])])}const ZB=x(BB,[["render",JB]]);function QB(e){const{template:t,name:a,maximum_logs:r}=e;let n={template:[t,"isRequired"],name:[a,"isRequired"],maximum_logs:[r,"isRequired",{"minValue(10)":N("max_log_validation")}]};const o=new Le(N),{errors:m,isValid:p}=o.validate(n);return Ee.dispatch("setValidationError",m),{errors:m,isValid:p}}const XB={data(){return{title:"create_ticket_pdf_template",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,ticket_pdf_template_id:"",shortCodesLoader:!1,shortcodes:[],name:"",template:"",maximum_logs:50}},beforeMount(){const e=window.location.pathname;this.getValues(e),this.getShortCodes()},methods:{getShortCodes(){this.shortCodesLoader=!0,V.get("/api/getTicketSetting/pdfShortCodes").then(e=>{this.shortCodesLoader=!1,this.shortcodes=e.data.data}).catch(e=>{this.shortCodesLoader=!1,U(e,"ticket-pdf-template")})},getValues(e){const t=Ue(e);e.indexOf("edit")>=0?this.from?(this.loading=!1,this.hasDataPopulated=!0):(this.title="edit_ticket_pdf_template",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,V.get("/api/get/individualPdfTemplates/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.name=t.data.data.name,this.maximum_logs=t.data.data.maximum_logs,this.template=t.data.data.template,this.ticket_pdf_template_id=t.data.data.id}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0,U(t,"ticket-pdf-template")})},isValid(){const{errors:e,isValid:t}=QB(this.$data);return t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loading=!0;let e={};this.ticket_pdf_template_id&&(e.id=this.ticket_pdf_template_id),e.name=this.name,e.maximum_logs=this.maximum_logs,e.template=this.template,V.post("/api/store/ticket-pdf-template",e).then(t=>{this.loading=!1,K(t,"ticket-pdf-template"),this.ticket_pdf_template_id?this.getInitialValues(this.ticket_pdf_template_id):setTimeout(()=>{this.$router.push({name:"Ticket PDF Templates Index"})},3e3)}).catch(t=>{this.loading=!1,U(t,"ticket-pdf-template")})}}},components:{"number-field":St,"text-field":we}},eY={class:"col-sm-12"},tY={key:0,class:"row"},aY={key:1,class:"card card-light"},sY={class:"card-header"},nY={class:"card-title"},oY={class:"card-body"},iY={class:"row"},lY={class:"col-md-12"},rY={class:"card card-light"},dY={class:"card-header"},cY={class:"card-title"},uY={class:"card-body col-md-12"},mY={key:0,class:"row"},hY={key:1},pY={class:"alert alert-info alert-dismissable"},_Y={key:0,class:"list-inline"},fY={class:"list-inline-item",style:{width:"23%"}},gY={"data-placement":"right"},vY={class:"row"},bY={class:"row"},yY={class:"card-footer"};function kY(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("reuse-loader"),b=v("text-field"),w=v("number-field"),S=v("tiny-editor-with-validation"),C=H("tooltip");return i(),d("div",eY,[!n.hasDataPopulated||n.loading?(i(),d("div",tY,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"ticket-pdf-template"}),n.hasDataPopulated?(i(),d("div",aY,[s("div",sY,[s("h3",nY,h(e.trans(n.title)),1)]),s("div",oY,[s("div",iY,[s("div",lY,[s("div",rY,[s("div",dY,[s("h3",cY,h(e.trans("list-of-available-shot-codes")),1)]),s("div",uY,[n.shortCodesLoader?(i(),d("div",mY,[u(g,{"animation-duration":4e3,size:60})])):(i(),d("div",hY,[s("div",pY,[t[1]||(t[1]=s("i",{class:"fas fa-info-circle"},null,-1)),t[2]||(t[2]=L("  ")),s("span",null,h(e.trans("template-short-code-tips")),1),t[3]||(t[3]=s("button",{type:"button",class:"btn-close float-end","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))]),n.shortcodes.length?(i(),d("ul",_Y,[(i(!0),d(B,null,re(n.shortcodes,M=>(i(),d("li",fY,[P((i(),d("span",gY,[L(h(M.shortcode),1)])),[[C,{content:e.trans(M.desc_lang_key),html:!0},void 0,{right:!0}]])]))),256))])):f("",!0)]))])])])]),s("div",vY,[u(b,{autofocus:!0,label:e.trans("name"),value:n.name,type:"text",name:"name",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(w,{hint:e.trans("maximum_logs_tooltip_for_pdf"),label:e.trans("maximum_logs"),value:n.maximum_logs,type:"text",name:"maximum_logs",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["hint","label","value","onChange","placehold"])]),s("div",bY,[u(S,{id:"ticket-template-editor",value:n.template,type:"text",onChange:o.onChange,name:"template",label:e.lang("template"),required:!0,classname:"col-sm-12 width55",lang:"en",convertURLs:!1},null,8,["value","onChange","label"])])]),s("div",yY,[s("button",{class:"btn btn-primary",id:"submit_btn",onClick:t[0]||(t[0]=M=>o.onSubmit())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)])])])):f("",!0)])}const ni=x(XB,[["render",kY]]),wY={data(){return{columns:["provider","status","action"],options:{},apiUrl:"/api/admin/social/media-list"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},headings:{provider:this.trans("provider"),status:this.trans("status"),action:this.trans("action")},columnsClasses:{provider:"provider",status:"status"},templates:{provider(t,a){return a.provider==="Linkedin-openid"?"LinkedIn":a.provider?a.provider:"--"},status(t,a){return a.value==1?e.h("p",{style:{color:"green"}},this.lang("active")):e.h("p",{style:{color:"red"}},this.lang("inactive"))},action:(t,a)=>e.h(Ye,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.current_page,limit:t.per_page}},responseAdapter({data:t}){return{data:t.data.map(a=>(a.provider==="External Login"?a.settings_url="/social/external-login":a.settings_url="/"+a.url_setting,a)),count:t.data.length}}}}},CY={class:"col-sm-12"},DY={class:"card card-light assets-type-table"},SY={class:"card-header"},MY={id:"cmdb-list",class:"card-title"},FY={class:"card-body",id:"cmdb-table"};function $Y(e,t,a,r,n,o){const m=v("alert"),p=v("data-table");return i(),d("div",CY,[u(m,{componentName:"dataTableModal"}),s("div",DY,[s("div",SY,[s("h3",MY,h(e.lang("social-login-page-title")),1)]),s("div",FY,[u(p,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"cmdb-relationship-list"},null,8,["url","dataColumns","option"])])])])}const TY=x(wY,[["render",$Y]]);function EY(e){const{client_id:t,client_secret:a,redirect:r,status:n}=e;var o={client_id:[t,"isRequired"],client_secret:[a,"isRequired"],redirect:[r,"isRequired"],status:[n,"isRequired"]};const m=new Le(N),{errors:p,isValid:g}=m.validate(o);return Ee.dispatch("setValidationError",p),{errors:p,isValid:g}}const LY={name:"settings",description:"settings component",data(){return{loading:!1,providerName:"facebook",iconClass:"fas fa-save",btnName:"save",client_id:"",client_secret:"",redirect:"",status:1,radioOptions:[{name:"yes",value:1},{name:"no",value:0}]}},computed:{displayedProviderName(){return this.providerName==="linkedin-openid"?"LinkedIn":this.providerName}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){let t=e.split("/");this.providerName=t[t.length-1],this.getInitialValues()},getInitialValues(){V.get("/api/admin/social/media-settings/"+this.providerName).then(e=>{this.status=e.data.data.status,this.client_id=e.data.data.client_id?e.data.data.client_id:"",this.client_secret=e.data.data.client_secret?e.data.data.client_secret:"",this.redirect=e.data.data.redirect}).catch(e=>{console.log(e)})},onChange(e,t){this[t]=e,e===null&&(this[t]="")},isValid(){const{errors:e,isValid:t}=EY(this.$data);return!!t},onSubmit(){if(this.isValid()){this.loading=!0;var e=new FormData;e.append("provider_name",this.providerName),e.append("client_id",this.client_id),e.append("client_secret",this.client_secret),e.append("redirect",this.redirect),e.append("status",this.status),e.append("_method","PATCH");const t={headers:{"Content-Type":"multipart/form-data"}};V.post("/api/admin/social/media-update",e,t).then(a=>{this.loading=!1,K(a,"Settings")}).catch(a=>{this.loading=!1,U(a,"Settings")})}}},components:{"text-field":we,"radio-button":Qe}},AY={class:"col-sm-12"},IY={key:0,class:"row"},PY={key:1},OY={class:"card card-light"},qY={class:"card-header"},xY={class:"card-title"},VY={class:"card-body"},NY={class:"row"},RY={class:"row"},UY={class:"card-footer"};function jY(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("text-field"),b=v("radio-button"),w=H("focus-first-input");return i(),d("div",AY,[u(m,{componentName:"Settings"}),n.loading?(i(),d("div",IY,[u(p,{duration:4e3})])):(i(),d("div",PY,[s("div",OY,[s("div",qY,[s("h3",xY,h(e.lang(this.displayedProviderName))+" "+h(e.lang("settings")),1)]),s("div",VY,[P((i(),d("div",NY,[u(g,{id:"client-id",label:e.lang("client-id"),value:n.client_id,type:"text",name:"client_id",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(g,{id:"client-secret",label:e.lang("client-secret"),value:n.client_secret,type:"text",name:"client_secret",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"])])),[[w]]),s("div",RY,[u(g,{id:"redirect-url",label:e.lang("redirect-url"),value:n.redirect,type:"text",name:"redirect",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(b,{options:n.radioOptions,label:e.trans("activate_login_via")+" "+e.lang(n.providerName),name:"status",value:n.status,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])])]),s("div",UY,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=S=>o.onSubmit())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.lang(n.btnName)),1)])])])]))])}const BY=x(LY,[["render",jY]]),YY={name:"queue-activate-modal",props:{showModal:{type:Boolean,default:!1},queueId:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,V.post("/api/queue/"+this.queueId+"/activate").then(e=>{window.emitter.emit("QueueIndexrefreshData"),K(e,"dataTableModal"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,U(e,"dataTableModal"),this.onClose()})}}},HY={class:"modal-title"},WY={key:0},zY={key:1,class:"row"},GY=["disabled"];function KY(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("modal");return a.showModal?(i(),A(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:n.containerStyle},{title:T(()=>[s("h4",HY,h(e.trans("activate")),1)]),fields:T(()=>[n.loading?f("",!0):(i(),d("div",WY,[s("span",null,h(e.trans("are_you_sure")),1)])),n.loading?(i(),d("div",zY,[u(m,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...g)=>o.onSubmit&&o.onSubmit(...g)),class:"btn btn-primary",disabled:n.isDisabled},[t[1]||(t[1]=s("i",{class:"fas fa-check"},null,-1)),L(" "+h(e.trans("activate")),1)],8,GY)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const JY=x(YY,[["render",KY]]),ZY={name:"queue-actions",description:"Queue table action component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1}},components:{"queue-activate-modal":JY}},QY={key:0},XY=["disabled"];function e9(e,t,a,r,n,o){const m=v("queue-activate-modal"),p=H("tooltip");return a.data?(i(),d("div",QY,[P((i(),d("span",null,[s("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=g=>n.showModal=!0),disabled:!!a.data.status},[t[1]||(t[1]=s("i",{class:"fas fa-check-circle"},null,-1)),L(" "+h(e.trans("activate")),1)],8,XY)])),[[p,a.data.status?e.trans("activated"):e.trans("activate")]]),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(m,{key:0,onClose:o.onClose,showModal:n.showModal,queueId:a.data.id},null,8,["onClose","showModal","queueId"])):f("",!0)]),_:1})])):f("",!0)}const t9=x(ZY,[["render",e9]]),a9={name:"queue-name",description:"Queue table name component",props:{data:{type:Object,required:!0}}},s9={key:0},n9=["href"];function o9(e,t,a,r,n,o){const m=v("router-link"),p=H("tooltip");return i(),d("span",null,[a.data.is_configurable?(i(),A(m,{key:1,to:"/queue/"+a.data.id},{default:T(()=>[L(h(a.data.name),1)]),_:1},8,["to"])):(i(),d("span",s9,h(a.data.name),1)),t[1]||(t[1]=L("   ")),a.data.tooltip_message?P((i(),d("a",{key:2,href:a.data.document_link,target:"_blank"},t[0]||(t[0]=[s("i",{class:"fas fa-question-circle"},null,-1)]),8,n9)),[[p,a.data.tooltip_message]]):f("",!0)])}const i9=x(a9,[["render",o9]]);const l9={name:"queue-index",description:"Queues table component",data(){return{columns:["name","status","action"],options:{},activated:"",cron_path:"",phpPaths:"",php_path:"",labelStyle:{display:"none"},custom_php_path:"",copying:!1}},beforeMount(){this.getPaths();const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},columnsClasses:{name:"queue-name",status:"queue-status",action:"queue-action"},texts:{filter:"",limit:""},templates:{name:(t,a)=>e.h(i9,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.status?this.lang("active"):this.lang("inactive"));return e.h("a",{class:"pointer_normal"},[r])},action:(t,a)=>e.h(t9,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return e.activated=t.data.queues.find(({status:a})=>a),e.activated.name!="Database"&&e.clearPhpPath(),{data:t.data.queues,count:t.data.total}},orderBy:{column:"name",ascending:!0}}},methods:{getPaths(){V.get("/api/queue/get-path-list").then(e=>{this.phpPaths=e.data.data.paths,this.cron_path=e.data.data.cronPathToShow}).catch(e=>{this.phpPaths=[]})},clearPhpPath(){this.php_path="",this.custom_php_path=""},copyCommand(){this.copying=!0;let e={};e.path=this.custom_php_path?this.custom_php_path:this.php_path,V.post("/verify-php-path",e).then(t=>{xt("* * * * * "+(this.custom_php_path?this.custom_php_path:this.php_path)+" "+this.cron_path),this.copying=!1,K(t,"dataTableModal")}).catch(t=>{this.copying=!1,U(t,"dataTableModal")})}}},r9={class:"col-sm-12"},d9={class:"card card-light"},c9={class:"card-header"},u9={class:"card-title"},m9={class:"card-body",id:"queue_index"},h9={key:0},p9={class:"card p-4 bg-light"},_9={class:"row"},f9={class:"col-sm-4"},g9={disabled:"",value:""},v9=["value"],b9={value:"other"},y9={key:1,class:"input-group"},k9=["placeholder"],w9={class:"input-group-append"},C9={class:"col-sm-5"},D9={class:"text-md"},S9={class:"col-sm-1"},M9={key:1,class:"pointer"};function F9(e,t,a,r,n,o){const m=v("alert"),p=v("data-table"),g=H("tooltip");return i(),d("div",r9,[u(m,{componentName:"dataTableModal"}),s("div",d9,[s("div",c9,[s("h3",u9,h(e.trans("queues")),1)]),s("div",m9,[n.activated&&n.activated.name=="Database"?(i(),d("div",h9,[s("div",p9,[s("div",_9,[t[7]||(t[7]=s("div",{class:"col-sm-2"},[s("span",{class:"text-xl"},"*  *  *  *  *")],-1)),s("div",f9,[n.php_path!="other"?P((i(),d("select",{key:0,class:"form-control","onUpdate:modelValue":t[0]||(t[0]=b=>n.php_path=b)},[s("option",g9,h(e.trans("specify-php-executable")),1),(i(!0),d(B,null,re(n.phpPaths,(b,w)=>(i(),d("option",{value:b},h(b),9,v9))),256)),s("option",b9,h(e.trans("other")),1)],512)),[[Ea,n.php_path]]):f("",!0),n.php_path=="other"?(i(),d("div",y9,[P(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=b=>n.custom_php_path=b),placeholder:e.trans("specify-php-executable")},null,8,k9),[[ze,n.custom_php_path]]),s("div",w9,[s("a",{href:"javascript:;",class:"input-group-text",onClick:t[2]||(t[2]=(...b)=>o.clearPhpPath&&o.clearPhpPath(...b))},t[4]||(t[4]=[s("i",{class:"fas fa-times"},null,-1)]))])])):f("",!0)]),s("div",C9,[s("span",D9,h(n.cron_path),1)]),s("div",S9,[n.copying?f("",!0):P((i(),d("span",{key:0,onClick:t[3]||(t[3]=b=>o.copyCommand()),class:"pointer"},t[5]||(t[5]=[s("i",{class:"far fa-clipboard fa-2x"},null,-1)]))),[[g,e.trans("verify-and-copy-command")]]),n.copying?(i(),d("span",M9,t[6]||(t[6]=[s("i",{class:"fas fa-circle-notch fa-spin fa-2x"},null,-1)]))):f("",!0)])])])])):f("",!0),u(p,{url:"/api/queue-list",dataColumns:n.columns,option:n.options,scroll_to:"queue_index",componentTitle:"QueueIndex"},null,8,["dataColumns","option"])])])])}const $9=x(l9,[["render",F9]]),T9={name:"queue-settings",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,queueId:"",fields:[],driverName:""}},beforeMount(){this.queueId=Ue(window.location.pathname),this.getData()},methods:{getData(){this.loading=!0,V.get("/api/queue/get-form/"+this.queueId).then(e=>{this.fields=e.data.data.formDetails,this.driverName=e.data.data.driverName,this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,this.fields=[],U(e,"queue")})},onSubmit(){const e={};this.fields.forEach(t=>{e[t.key]=t.value}),this.pageLoad=!0,V.post("/api/queue/"+this.queueId,e).then(t=>{this.pageLoad=!1,K(t,"queue"),this.getData(),this.$store.dispatch("unsetValidationError")}).catch(t=>{this.pageLoad=!1,U(t,"queue")})}},components:{"form-field-template":ls}},E9={class:"col-sm-12"},L9={class:"card card-light"},A9={class:"card-header"},I9={class:"card-title"},P9={class:"card-body"},O9={key:0,class:"row"},q9={key:1,class:"row"},x9=["placeholder","name","onUpdate:modelValue"],V9={key:0,class:"card-footer"},N9=["disabled"];function R9(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("form-field-template");return i(),d("div",E9,[u(m,{componentName:"queue"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",L9,[s("div",A9,[s("h3",I9,h(e.trans("queue")),1)]),s("div",P9,[!n.hasDataPopulated||n.loading?(i(),d("div",O9,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?(i(),d("div",q9,[(i(!0),d(B,null,re(n.fields,(w,S)=>(i(),A(b,{label:e.trans(w.key),name:w.key,classname:"col-sm-6",required:!0},{default:T(()=>[P(s("input",{class:"form-control",placeholder:e.lang(w.placeholder),name:w.key,type:"text","onUpdate:modelValue":C=>w.value=C},null,8,x9),[[ze,w.value]])]),_:2},1032,["label","name"]))),256))])):f("",!0)]),n.hasDataPopulated?(i(),d("div",V9,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...w)=>o.onSubmit&&o.onSubmit(...w)),disabled:n.pageLoad},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,N9)])):f("",!0)])])}const U9=x(T9,[["render",R9]]);const j9={name:"third-party-index",data(){return{base:window.axios.defaults.baseURL,columns:["name","app_id","status","auth","action"],options:{headings:{name:this.trans("name"),app_id:this.trans("app_id"),status:this.trans("status"),auth:this.trans("auth"),action:this.trans("action")},texts:{filter:"",limit:""},templates:{status:(e,t)=>this.h(ma,{data:t}),action:(e,t)=>this.h(Ye,{data:t}),app_id:(e,t)=>t.app_id?t.app_id:"--"},sortable:["name","status"],filterable:["name","status"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(e){return{sort_field:e.orderBy?e.orderBy:"id",sort_order:e.ascending?"desc":"asc",search_query:e.query.trim(),page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data.data.map(t=>(t.edit_url="/third-party-app/"+t.id+"/edit",t.delete_url=window.axios.defaults.baseURL+"/api/admin/third-party-apps/"+t.id,t.active=t.active=="1"?"active":"inactive",t)),count:e.data.total}},orderBy:{column:"id",ascending:!0}},apiUrl:"api/admin/third-party-apps",showDrop:!1}},beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3)}},B9={class:"col-sm-12"},Y9={class:"card card-light"},H9={class:"card-header"},W9={class:"card-title"},z9={class:"card-tools"},G9={class:"dropdown-menu dropdown-menu-right",role:"menu"},K9={class:"card-body"};function J9(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",B9,[u(m,{componentName:"dataTableModal"}),s("div",Y9,[s("div",H9,[s("h3",W9,h(e.lang("third_party_apps")),1),s("div",z9,[t[1]||(t[1]=s("a",{href:"javascript:;",class:"btn-tool dropdown-toggle","data-bs-toggle":"dropdown"},[s("i",{class:"glyphicon glyphicon-plus"})],-1)),P(s("div",G9,[P((i(),A(p,{id:"create",class:"dropdown-item",to:"/third-party-app/create?page_type=basic"},{default:T(()=>[L(h(e.lang("basic_auth")),1)]),_:1})),[[b,e.lang("basic_auth_toottip")]]),t[0]||(t[0]=s("hr",{class:"m-0"},null,-1)),P((i(),A(p,{id:"create",class:"dropdown-item",to:"/third-party-app/create?page_type=oauth"},{default:T(()=>[L(h(e.lang("oauth_auth")),1)]),_:1})),[[b,e.lang("oauth_auth_tootip")]])],512),[[kt,n.showDrop]])])]),s("div",K9,[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options},null,8,["url","dataColumns","option"])])])])}const Z9=x(j9,[["render",J9],["__scopeId","data-v-bb71f99f"]]);const Q9={name:"third-party-app",beforeMount(){this.setMode(),this.getInitialValues(),this.shortcode();let e=new URLSearchParams(window.location.search);this.pageType=e.get("page_type")},data:()=>({id:null,name:"",app_id:"",app_secret:"",authentication_endpoint:"",token_endpoint:"",identity_endpoint:"",scopes:"",login_label:"",status:1,loading:!0,hasDataPopulated:!1,mode:"create",user_map:[],app_url:"",app_url_bkp:"",copied:!1,template:null,pageType:"",methodOption:[{name:"get",value:"get"},{name:"post",value:"post"}],DataOption:[{name:"payload",value:"payload"},{name:"url_parameter",value:"parameter"}],labelStyle:{display:"none"},dataMethod:"payload",apiMethod:"get",auth:"",userParameters:"",passParameters:"",showTable:!0,showField:!1,showShortcode:!1,payloadData:[{faveo_attribute:"user_name",faveo_attribute_label:"user_name",required:!0,third_party_attribute:""},{faveo_attribute:"password",faveo_attribute_label:"password",required:!0,third_party_attribute:""}],iconClass:"fas fa-save",btnName:"save"}),methods:{copyToClipboard(){xt(this.app_url),this.copied=!0,this.showCopyIconAfterCopying()},showCopyIconAfterCopying(){setTimeout(()=>{this.copied=!1},5e3)},setMode(){const e=window.location.pathname;this.mode=e.indexOf("edit")>=0?"edit":"create"},getInitialValues(){if(this.loading=!0,this.mode==="edit"){this.iconClass="fas fa-sync",this.btnName="update";const e=window.location.pathname,t=Ue(e);V.get(`/api/admin/third-party-apps/${t}`).then(a=>{this.updateStatesWithData(a.data.data.formattedElement),this.app_url_bkp=a.data.data.url+"/",this.auth=a.data.data.formattedElement.auth,this.hasDataPopulated=!0,this.loading=!1}).catch(a=>{U(a),this.hasDataPopulated=!0,this.loading=!1})}else V.get("/api/admin/faveo-attributes").then(e=>{this.user_map=e.data.data.formattedElement,this.app_url=e.data.data.url,this.app_url_bkp=e.data.data.url+"/",this.hasDataPopulated=!0,this.loading=!1})},updateStatesWithData(e){var t,a;if(this.id=e.id,this.name=e.name,this.app_id=e.app_id,this.app_secret="",this.authentication_endpoint=e.authentication_endpoint,this.token_endpoint=e.token_endpoint,this.identity_endpoint=e.identity_endpoint,this.login_label=e.login_label,this.scopes=e.scopes,this.status=e.status,this.user_map=e.user_map,this.app_url=e.app_url,e.auth==="Basic authentication"){this.dataMethod=e.argument_as,this.apiMethod=e.method;for(const r of this.payloadData)r.faveo_attribute_label==="user_name"&&(r.third_party_attribute=((t=e.basic_format)==null?void 0:t.user_name)||""),r.faveo_attribute_label==="password"&&(r.third_party_attribute=((a=e.basic_format)==null?void 0:a.password)||"");e.basic_format&&e.basic_format.length>=2&&([this.userParameters,this.passParameters]=e.basic_format),this.showTable=this.dataMethod==="payload",this.showField=this.dataMethod==="parameter",this.showShortcode=this.dataMethod==="parameter"}},onSubmit(){this.loading=!0;let e;if(this.pageType==="oauth"||this.auth==="Oauth authentication")e={id:this.id,name:this.name,app_id:this.app_id,app_url:this.app_url,app_secret:this.app_secret,authentication_endpoint:this.authentication_endpoint,token_endpoint:this.token_endpoint,identity_endpoint:this.identity_endpoint,login_label:this.login_label,scopes:this.scopes,status:this.status,user_map:this.user_map};else if(this.pageType==="basic"||this.auth==="Basic authentication")if(this.dataMethod==="payload"){const t={};this.payloadData.forEach(a=>{const r=a.faveo_attribute_label==="UserName"?"userName":a.faveo_attribute_label;t[r]=a.third_party_attribute}),e={id:this.id,is_basic:1,status:this.status,name:this.name,authentication_endpoint:this.authentication_endpoint,method:this.apiMethod,argument_as:"payload",basic_format:t}}else if(this.dataMethod==="parameter")e={id:this.id,is_basic:1,status:this.status,name:this.name,authentication_endpoint:this.authentication_endpoint,method:this.apiMethod,argument_as:"parameter",basic_format:this.userParameters&&this.passParameters?this.userParameters+"/"+this.passParameters:""};else{this.loading=!1;return}else{this.loading=!1;return}V.post("/api/admin/third-party-apps",e).then(t=>{this.loading=!1,K(t),this.redirectIfNeeded(),this.$store.dispatch("unsetValidationError")}).catch(t=>{this.loading=!1,U(t)})},redirectIfNeeded(){this.mode==="create"?setTimeout(()=>{this.$router.push({name:"ThirdPartyApps Index"})},3e3):this.getInitialValues()},onChange(e,t){if(this[t]=e,e==="payload"&&(this.showTable=!0,this.showField=!1,this.showShortcode=!1,this.mode==="create"&&(this.userParameters="",this.passParameters="")),e==="parameter"&&(this.showTable=!1,this.showField=!0,this.showShortcode=!0,this.mode==="create"&&this.payloadData.forEach(a=>{a.third_party_attribute=""})),t==="name"){const a=e.replace(/\s/g,"");this.app_url=this.app_url_bkp+a}},shortcode(){V.get("api/admin/third-party-apps-short-code").then(e=>{this.template=e.data,this.parameters=this.template.join("/")}).catch(e=>{})}},components:{RadioButton:Qe,"text-field":we,"status-switch":lt,"tool-tip":nt}},X9={class:"col-sm-12"},eH={key:0,class:"row"},tH={class:"row"},aH={class:"row"},sH={class:"row"},nH={class:"col-sm-4"},oH={class:"input-group"},iH={id:"faveo-attribute-list",class:"faveo-table table"},lH={class:"thead-default"},rH={class:"bg-light"},dH={class:"bg-light"},cH={class:"faveo-attribute-elements"},uH={class:"padding-top-12"},mH=["id"],hH={key:0,class:"text-danger"},pH=["onUpdate:modelValue"],_H={class:"row"},fH={class:"row"},gH={key:0,class:"row"},vH={class:"col-md-12"},bH={class:"card card-light"},yH={class:"card-header"},kH={class:"card-title"},wH={class:"card-tools"},CH={class:"btn btn-tool","data-card-widget":"collapse","data-bs-toggle":"tooltip"},DH={class:"card-body col-md-12"},SH={class:"alert alert-info alert-dismissable"},MH={key:0,class:"list-inline"},FH={class:"list-inline-item",style:{width:"49%"}},$H={"data-placement":"right"},TH={key:1,id:"faveo-attribute-list",class:"faveo-table table"},EH={class:"thead-default"},LH={class:"bg-light"},AH={class:"bg-light"},IH={class:"faveo-attribute-elements"},PH={class:"padding-top-12"},OH=["id"],qH={key:0,class:"text-danger ps-1"},xH=["onUpdate:modelValue"],VH={key:2,class:"input-box__sbl"},NH={class:"row"},RH={class:"params ms-1"},UH={class:"card-footer"},jH=["disabled"];function BH(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("status-switch"),b=v("text-field"),w=v("tool-tip"),S=v("radio-button"),C=v("faveo-box"),M=H("focus-first-input"),D=H("tooltip");return i(),d("div",X9,[e.hasDataPopulated===!1||e.loading===!0?(i(),d("div",eH,[u(m)])):f("",!0),u(p),e.hasDataPopulated?(i(),A(C,{key:1,title:e.lang("third_party_app")},{headerMenu:T(()=>[u(g,{name:"status",value:e.status,onChange:o.onChange,classname:"pull-right",bold:!0},null,8,["value","onChange"])]),actions:T(()=>[s("div",UH,[s("button",{disabled:e.loading,class:"btn btn-primary",type:"button",onClick:t[4]||(t[4]=(...F)=>o.onSubmit&&o.onSubmit(...F))},[s("i",{class:G(e.iconClass)},null,2),L(" "+h(e.trans(e.btnName)),1)],8,jH)])]),default:T(()=>[e.pageType==="oauth"||e.auth===e.lang("oauth_authentication")?(i(),d(B,{key:0},[P((i(),d("div",tH,[u(b,{label:e.trans("name"),onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.name,classname:"col-lg-4",name:"name"},null,8,["label","onChange","placehold","value"]),u(b,{label:e.trans("app_id"),onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.app_id,classname:"col-lg-4",name:"app_id"},null,8,["label","onChange","placehold","value"]),u(b,{label:e.trans("app_secret"),onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.app_secret,classname:"col-lg-4",name:"app_secret"},null,8,["label","onChange","placehold","value"])])),[[M]]),s("div",aH,[u(b,{label:e.trans("authentication_endpoint"),onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,hint:e.lang("authentication_tooltip"),value:e.authentication_endpoint,classname:"col-lg-4",name:"authentication_endpoint"},null,8,["label","onChange","placehold","hint","value"]),u(b,{label:e.trans("token_endpoint"),onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.token_endpoint,hint:e.trans("token_tooltip"),classname:"col-lg-4",name:"token_endpoint"},null,8,["label","onChange","placehold","value","hint"]),u(b,{label:e.trans("identity_endpoint"),onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.identity_endpoint,hint:e.trans("identity_tooltip"),classname:"col-lg-4",name:"identity_endpoint"},null,8,["label","onChange","placehold","value","hint"])]),s("div",sH,[u(b,{label:e.trans("scopes"),onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,hint:e.lang("scope_tooltip"),value:e.scopes,classname:"col-lg-4",name:"scopes"},null,8,["label","onChange","placehold","hint","value"]),s("div",nH,[t[5]||(t[5]=s("label",null,"Redirect URL",-1)),s("div",oH,[P(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=F=>e.app_url=F),name:"app_url",disabled:""},null,512),[[ze,e.app_url]]),P((i(),d("span",{class:"input-group-text uri-copy",onClick:t[1]||(t[1]=ha((...F)=>o.copyToClipboard&&o.copyToClipboard(...F),["prevent"]))},[s("i",{class:G(e.copied?"glyphicon glyphicon-ok text-success":"fa fa-clipboard")},null,2)])),[[D,e.copied?e.lang("clipboard-copy-message"):e.lang("click-url-copy")]])])])]),s("table",iH,[s("thead",lH,[s("tr",null,[s("th",rH,[L(h(e.trans("faveo_attributes"))+" ",1),u(w,{message:e.lang("faveo_attributes-tooltip"),size:"small"},null,8,["message"])]),s("th",dH,[L(h(e.trans("third_party_attributes"))+" ",1),u(w,{message:e.lang("third_party_attributes-tooltip"),size:"small"},null,8,["message"])])])]),(i(!0),d(B,null,re(e.user_map,(F,I)=>(i(),d("tbody",cH,[s("tr",null,[s("td",uH,[s("span",{id:"faveo-attribute-label-"+I},h(e.trans(F.faveo_attribute_label)),9,mH),F.required?(i(),d("span",hH,"*")):f("",!0),u(w,{message:e.lang("third-party-"+F.faveo_attribute_label),size:"small"},null,8,["message"])]),s("td",null,[P(s("input",{type:"text",class:"form-control col col-lg-4","onUpdate:modelValue":R=>F.third_party_attribute=R},null,8,pH),[[ze,F.third_party_attribute]])])])]))),256))])],64)):f("",!0),e.pageType==="basic"||e.auth===e.lang("basic_authentication")?(i(),d(B,{key:1},[P((i(),d("div",_H,[u(b,{label:e.trans("name"),onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,value:e.name,classname:"col-sm-6",name:"name"},null,8,["label","onChange","placehold","value"]),u(b,{label:e.trans("authentication_endpoint"),onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0,hint:e.lang("authentication_tooltip"),value:e.authentication_endpoint,classname:"col-sm-6",name:"authentication_endpoint"},null,8,["label","onChange","placehold","hint","value"])])),[[M]]),s("div",fH,[u(S,{options:e.lang(e.methodOption),label:e.lang("method"),name:"apiMethod",value:e.apiMethod,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"]),u(S,{options:e.lang(e.DataOption),label:"",name:"dataMethod",value:e.dataMethod,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","value","onChange"])]),e.showShortcode?(i(),d("div",gH,[s("div",vH,[s("div",bH,[s("div",yH,[s("h3",kH,h(e.trans("list-of-available-shot-codes")),1),s("div",wH,[P((i(),d("button",CH,t[6]||(t[6]=[s("i",{class:"fas fa-minus"},null,-1)]))),[[D,e.trans("collapse-list")]])])]),s("div",DH,[s("div",SH,[t[7]||(t[7]=s("i",{class:"fas fa-info-circle"},null,-1)),t[8]||(t[8]=L("  ")),s("span",null,h(e.trans("template-short-code-tips")),1),t[9]||(t[9]=s("button",{type:"button",class:"btn-close float-end","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))]),s("div",null,[e.template?(i(),d("ul",MH,[(i(!0),d(B,null,re(e.template,F=>(i(),d("li",FH,[P((i(),d("span",$H,[L(h(F),1)])),[[D,e.trans(F),void 0,{right:!0}]])]))),256))])):f("",!0)])])])])])):f("",!0),e.showTable?(i(),d("table",TH,[s("thead",EH,[s("tr",null,[s("th",LH,[L(h(e.trans("faveo_attributes"))+" ",1),u(w,{message:e.lang("faveo_attributes-tooltip"),size:"small"},null,8,["message"])]),s("th",AH,[L(h(e.trans("third_party_attributes"))+" ",1),u(w,{message:e.lang("third_party_attributes-tooltip"),size:"small"},null,8,["message"])])])]),(i(!0),d(B,null,re(e.payloadData,(F,I)=>(i(),d("tbody",IH,[s("tr",null,[s("td",PH,[s("span",{id:"faveo-attribute-label-"+I},h(e.trans(F.faveo_attribute_label)),9,OH),F.required?(i(),d("span",qH,"*")):f("",!0),u(w,{message:e.lang("third-party-"+F.faveo_attribute_label),size:"small"},null,8,["message"])]),s("td",null,[P(s("input",{type:"text",class:"form-control col col-lg-4","onUpdate:modelValue":R=>F.third_party_attribute=R},null,8,xH),[[ze,F.third_party_attribute]])])])]))),256))])):f("",!0),e.showField?(i(),d("div",VH,[s("div",NH,[s("span",null,[s("label",RH,h(e.lang("url_parameters"))+":",1)]),t[10]||(t[10]=L("    ")),P(s("input",{type:"text",class:"form-control col-sm-2","onUpdate:modelValue":t[2]||(t[2]=F=>e.userParameters=F),id:"userParameters"},null,512),[[ze,e.userParameters]]),t[11]||(t[11]=s("span",{class:"slash"},"/",-1)),P(s("input",{type:"text",class:"form-control col-sm-2","onUpdate:modelValue":t[3]||(t[3]=F=>e.passParameters=F),id:"passParameters"},null,512),[[ze,e.passParameters]])])])):f("",!0)],64)):f("",!0)]),_:1},8,["title"])):f("",!0)])}const oi=x(Q9,[["render",BH],["__scopeId","data-v-96ad36f7"]]);function YH(e){const{provider:t,entity_id:a,sso_url:r,slo_url:n,certificate:o}=e;let m={provider:[t,"isRequired"],entity_id:[a,"isRequired"],sso_url:[r,"isRequired"],slo_url:[n,"isRequired"],certificate:[o,"isRequired"]};const p=new Le(N),{errors:g,isValid:b}=p.validate(m);return Ee.dispatch("setValidationError",g),{errors:g,isValid:b}}const HH={name:"SamlCreateEdit",description:"Saml create and edit page",components:{"status-switch":lt,"text-field":we,"radio-button":Qe},data(){return{automatic_logout:!1,logout_time:0,loading:!1,hasDataPopulated:!1,id:"",iconClass:"fas fa-save",btnName:"save",provider:"",entity_id:"",sso_url:"",slo_url:"",certificate:"",status:1,SP_entity_id:"",SP_ACS_url:"",login_url:"",buttonVisible:!1,radioOptions:[{name:"enable",value:1},{name:"disable",value:0}],Edit:!1,providerName:null,url:"/api/SSO/create/"}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=Ue(e);e.indexOf("edit")>=0?(this.iconClass="fas fa-sync",this.btnName="update",this.Edit="true",this.url="/api/SSO/create/"+this.id,this.buttonVisible=!0,this.getInitialValue(t)):(this.loading=!1,this.hasDataPopulated=!0)},onChange(e,t){this[t]=e,t==="automatic_logout"&&e===!1&&(this.logout_time=0)},isValid(){const{errors:e,isValid:t}=YH(this.$data);return t||!1},getInitialValue(e){this.loading=!0,V.get("/api/SSO/edit/"+e).then(t=>{this.hasDataPopulated=!0,this.loading=!1,this.fillFieldsInfo(t.data.data),this.providerName=t.data.data.provider}).catch(t=>{this.loading=!1,U(t)})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),this.loading=!1,e.logout_time>0&&(this.automatic_logout=!0,this.logout_time=e.logout_time)},onSubmit(){if(this.isValid()){this.loading=!0;let e={};this.id&&(e.id=parseInt(this.id)),e.provider=this.provider,e.entity_id=this.entity_id,e.sso_url=this.sso_url,e.slo_url=this.slo_url,e.certificate=this.certificate,e.status=this.status,e.logout_time=this.logout_time,V.post(this.url,e).then(t=>{this.loading=!1,K(t,"SingleSignOn"),this.id?this.getInitialValue(this.id):setTimeout(()=>{let a=t.data.data.id;return this.$router.push("/single-sign-on/settings/"+a)},3e3)}).catch(t=>{this.loading=!1,U(t,"SingleSignOn")})}}},computed:{title(){return this.Edit&&this.providerName?this.provider.charAt(0).toUpperCase()+this.provider.slice(1)+" Settings":"SAML 2.0 Integration"}}},WH={class:"col-sm-12"},zH={key:0,class:"row"},GH={key:1,class:"card card-light"},KH={class:"card-header"},JH={class:"card-title"},ZH={class:"card-tools"},QH=["href"],XH={class:"card-body"},eW={class:"row"},tW={class:"row"},aW={class:"row"},sW={class:"row"},nW={class:"form-group col-sm-6"},oW={for:"status"},iW={key:0,class:"col-sm-6"},lW={class:"card-footer"};function rW(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("text-field"),b=v("radio-button"),w=v("status-switch"),S=H("tooltip"),C=H("focus-first-input");return i(),d("div",WH,[n.loading?(i(),d("div",zH,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:"SingleSignOn"}),n.hasDataPopulated?(i(),d("div",GH,[s("div",KH,[s("h3",JH,h(e.trans(o.title)),1),s("div",ZH,[n.buttonVisible?P((i(),d("a",{key:0,id:"view_sso",class:"btn btn-tool",type:"button",href:e.basePath()+"/admin/single-sign-on/settings/"+n.id,target:""},t[1]||(t[1]=[s("i",{class:"fas fa-eye"},null,-1)]),8,QH)),[[S,e.trans("view")]]):f("",!0)])]),s("div",XH,[P((i(),d("div",eW,[u(g,{id:"provider",label:e.lang("provider"),hint:e.lang("provider_hint"),value:n.provider,type:"text",name:"provider",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","hint","value","onChange","placehold"]),u(g,{id:"entity_id",label:e.lang("entity_id"),hint:e.lang("entity_hint"),value:n.entity_id,type:"text",name:"entity_id",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","hint","value","onChange","placehold"])])),[[C]]),s("div",tW,[u(g,{id:"sso_url",label:e.lang("sso_url"),hint:e.lang("SSO_hint"),value:n.sso_url,type:"text",name:"sso_url",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","hint","value","onChange","placehold"]),u(g,{id:"entity_id",label:e.lang("slo_url"),hint:e.lang("SLO_hint"),value:n.slo_url,type:"text",name:"slo_url",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","hint","value","onChange","placehold"])]),s("div",aW,[u(g,{id:"certificate",label:e.lang("certificate"),value:n.certificate,type:"text",name:"certificate",onChange:o.onChange,placehold:e.lang("enter_a_value"),classname:"col-sm-6",required:!0},null,8,["label","value","onChange","placehold"]),u(b,{options:n.radioOptions,label:e.lang("status"),name:"status",value:n.status,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),s("div",sW,[s("div",nW,[s("label",oW,h(e.trans("automatic_logout")),1),u(w,{name:"automatic_logout",value:this.automatic_logout,onChange:o.onChange,bold:!0},null,8,["value","onChange"])]),n.automatic_logout?(i(),d("div",iW,[u(g,{id:"logoutTime",label:e.lang("logout_time"),value:n.logout_time,type:"number",name:"logout_time",onChange:o.onChange,placehold:e.lang("enter_a_value"),required:!0},null,8,["label","value","onChange","placehold"])])):f("",!0)])]),s("div",lW,[s("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=M=>o.onSubmit())},[s("i",{class:G(n.iconClass)},null,2),L(" "+h(e.trans(n.btnName)),1)])])])):f("",!0)])}const ii=x(HH,[["render",rW]]);const dW={name:"SamlIndex.vue",description:"Single Sign On component",data(){return{columns:["provider","status","action"],apiUrl:"/api/SSO/list",options:{},title:"SAML_Integration"}},beforeMount(){const e=this;this.options={texts:{filter:"",limit:""},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},columnsClasses:{provider:"provider",activate:"status",actions:"actions"},headings:{is_active:this.trans("activate"),provider:this.trans("provider"),status:this.trans("status"),action:this.trans("action")},templates:{status(t,a){return a.status?e.h("p",{style:{color:"green"}},this.trans("active")):e.h("p",{style:{color:"red"}},this.trans("inactive"))},action(t,a){return e.h(Ye,{data:a})}},sortable:["provider","status"],filterable:["provider","status"],pagination:{chunk:5,nav:"scroll"},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc",search:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){if(t)return{data:t.data.data.map(a=>(a.edit_url="/single-sign-on/settings/"+a.id+"/edit",a.view_url="/single-sign-on/settings/"+a.id,a.delete_url=e.basePath()+"/api/SSO/delete/"+a.id,a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}}},cW={class:"col-sm-12",id:"SAML-table"},uW={class:"card card-light"},mW={class:"card-header"},hW={class:"card-title"},pW={class:"card-tools"},_W={class:"card-body",id:"SAML"};function fW(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",cW,[u(m,{componentName:"dataTableModal"}),s("div",uW,[s("div",mW,[s("h3",hW,h(e.trans(n.title)),1),s("div",pW,[P((i(),A(p,{class:"btn btn-tool",to:"/single-sign-on/settings/add"},{default:T(()=>t[0]||(t[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,e.lang("Create_SSO")]])])]),s("div",_W,[u(g,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"SAML-table"},null,8,["url","dataColumns","option"])])])])}const gW=x(dW,[["render",fW]]);const vW={name:"View.vue",description:"View component",components:{"faveo-box":Bt,"text-field":we,"radio-button":Qe,"tool-tip":nt},data(){return{loading:!1,header:"Single Sign On",provider:"",entity_id:"",sso_url:"",slo_url:"",certificate:"",status:1,logout_time:"",SP_entity_id:"",SP_ACS_url:"",id:this.$route.params.id,radioOptions:[{name:"enable",value:1},{name:"disable",value:0}],copiedEntity:!1,copiedAsc:!1,copiedLogin:!1}},beforeMount(){this.getIntialValue(this.id)},methods:{onChange(e,t){this[t]=e},onCopy(e,t){const a=this[e];xt(a),this[t]=!0,setTimeout(()=>{this[t]=!1},5e3)},getIntialValue(e){this.loading=!0,V.get("/api/SSO/edit/"+e).then(t=>{this.loading=!1,this.fillFieldsInfo(t.data.data)}).catch(t=>{this.loading=!1,U(t)})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])}),e.logout_time===0&&(this.logout_time="Not Set")}}},bW={class:"col-sm-12"},yW={key:0,class:"row"},kW={key:1},wW={class:"row"},CW={class:"row"},DW={class:"row mb-3"},SW={class:"row"},MW={class:"col-sm-1 ps-0"},FW={class:"row"},$W={class:"col-sm-1 ps-0"};function TW(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("tool-tip"),b=v("text-field"),w=v("radio-button"),S=v("faveo-box"),C=H("tooltip");return i(),d("div",bW,[u(m,{componentName:"Single_Sign_On-View"}),n.loading?(i(),d("div",yW,[u(p,{duration:4e3})])):(i(),d("div",kW,[u(S,{title:typeof this.provider=="string"?this.provider.charAt(0).toUpperCase()+this.provider.slice(1)+" Settings":"Provider not set"},{headerTooltip:T(()=>[u(g,{message:e.lang("SSO_note"),size:"small"},null,8,["message"])]),default:T(()=>[s("div",wW,[u(b,{id:"provider",label:e.lang("provider"),value:n.provider,onChange:o.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"provider",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"]),u(b,{id:"entity_id",label:e.lang("entity_id"),value:n.entity_id,onChange:o.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"entity_id",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"])]),s("div",CW,[u(b,{id:"sso_url",label:e.lang("sso_url"),value:n.sso_url,onChange:o.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"sso_url",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"]),u(b,{id:"slo_url",label:e.lang("slo_url"),value:n.slo_url,onChange:o.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"slo_url",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"])]),s("div",DW,[u(w,{options:e.lang(n.radioOptions),label:e.lang("Status"),name:"status",value:n.status,disabled:!0,onChange:o.onChange,classname:"form-group col-sm-6"},null,8,["options","label","value","onChange"])]),t[2]||(t[2]=s("div",{class:"row"},null,-1)),s("div",SW,[u(b,{id:"logoutTime",label:e.lang("logout_time"),value:n.logout_time,onChange:o.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"logout_time",disabled:!0,classname:"col-sm-6"},null,8,["label","value","onChange","placehold"]),u(b,{id:"SP_entity_id",label:e.lang("SP_entity_id"),hint:e.lang("SP_entity_hint"),value:n.SP_entity_id,onChange:o.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"SP_entity_id",disabled:!0,classname:"col-sm-5"},null,8,["label","hint","value","onChange","placehold"]),s("div",MW,[P((i(),d("a",{class:"btn btn-light entity-copy",onClick:t[0]||(t[0]=ha(M=>o.onCopy("SP_entity_id","copiedEntity"),["prevent"]))},[s("span",{class:G(n.copiedEntity?"fas fa-check text-success":"fa fa-clipboard"),id:"eye"},null,2)])),[[C,n.copiedEntity?e.trans("clipboard-copy-message"):e.trans("click-to-copy")]])])]),s("div",FW,[u(b,{id:"SP_ACS_url",label:e.lang("SP_ACS_url"),hint:e.lang("SP_ACS_hint"),value:n.SP_ACS_url,onChange:o.onChange,placehold:e.lang("enter_a_value"),type:"text",name:"SP_ACS_url",disabled:!0,classname:"col-sm-5"},null,8,["label","hint","value","onChange","placehold"]),s("div",$W,[P((i(),d("a",{class:"btn btn-light acs-copy",onClick:t[1]||(t[1]=ha(M=>o.onCopy("SP_ACS_url","copiedAsc"),["prevent"]))},[s("span",{class:G(n.copiedAsc?"fas fa-check text-success":"fa fa-clipboard"),id:"eye"},null,2)])),[[C,n.copiedAsc?e.trans("clipboard-copy-message"):e.trans("click-to-copy")]])])])]),_:1},8,["title"])]))])}const EW=x(vW,[["render",TW],["__scopeId","data-v-cc5affe7"]]);const LW={name:"DriversName",props:{data:{type:Object,required:!0}}},AW=["href"];function IW(e,t,a,r,n,o){const m=H("tooltip");return i(),d("span",null,[s("span",null,h(a.data.name),1),t[1]||(t[1]=L("   ")),a.data.tooltip?P((i(),d("a",{key:0,class:G(a.data.document_link?"":"drivers-tooltip"),href:a.data.document_link,target:"_blank"},t[0]||(t[0]=[s("i",{class:"fas fa-question-circle"},null,-1)]),10,AW)),[[m,a.data.tooltip]]):f("",!0)])}const PW=x(LW,[["render",IW],["__scopeId","data-v-75987479"]]),OW={name:"DriverActivateModal",props:{showModal:{type:Boolean,default:!1},driver:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,V.post("api/post/cache-driver",{default:this.driver}).then(e=>{window.emitter.emit("DriverIndexrefreshData"),K(e,"dataTableModal"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,U(e,"dataTableModal"),this.onClose()})}}},qW={class:"modal-title"},xW={key:0},VW={key:1,class:"row"},NW=["disabled"];function RW(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("modal");return a.showModal?(i(),A(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:n.containerStyle},{title:T(()=>[s("h4",qW,h(e.trans("activate")),1)]),fields:T(()=>[n.loading?f("",!0):(i(),d("div",xW,[s("span",null,h(e.trans("are_you_sure")),1)])),n.loading?(i(),d("div",VW,[u(m,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...g)=>o.onSubmit&&o.onSubmit(...g)),class:"btn btn-primary",disabled:n.isDisabled},[t[1]||(t[1]=s("i",{class:"fas fa-check"},null,-1)),L(" "+h(e.trans("activate")),1)],8,NW)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const UW=x(OW,[["render",RW]]),jW={name:"DriversActions",description:"Driver table action component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1},redirectToCacheDriver(){this.data.status||this.$router.push(`/cache-driver/${this.data.driver}`)}},components:{"driver-activate-modal":UW}},BW={key:0},YW={key:0},HW=["disabled"],WW={key:1},zW=["disabled"];function GW(e,t,a,r,n,o){const m=v("driver-activate-modal"),p=H("tooltip");return a.data?(i(),d("div",BW,[a.data.config===0?P((i(),d("span",YW,[s("button",{class:"btn btn-light table_btn",onClick:t[0]||(t[0]=g=>n.showModal=!0),disabled:a.data.status},t[2]||(t[2]=[s("i",{class:"fas fa-check-circle"},null,-1)]),8,HW)])),[[p,a.data.status?e.trans("activated"):e.trans("activate")]]):f("",!0),a.data.config===1?P((i(),d("span",WW,[s("button",{class:"btn btn-light table_btn",disabled:a.data.status,onClick:t[1]||(t[1]=(...g)=>o.redirectToCacheDriver&&o.redirectToCacheDriver(...g))},t[3]||(t[3]=[s("i",{class:"fas fa-cog"},null,-1)]),8,zW)])),[[p,a.data.status?e.trans("configured"):e.trans("configure")]]):f("",!0),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(m,{key:0,onClose:o.onClose,showModal:n.showModal,driver:a.data.driver},null,8,["onClose","showModal","driver"])):f("",!0)]),_:1})])):f("",!0)}const KW=x(jW,[["render",GW]]);const JW={name:"CacheDriversIndex",description:"CacheDrivers table component",data(){return{columns:["name","status","action"],options:{},activated:"",apiUrl:"api/cache-lists"}},beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},columnsClasses:{name:"drivers-name",status:"drivers-status",action:"drivers-action"},texts:{filter:"",limit:""},templates:{name:(t,a)=>e.h(PW,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.status?this.lang("active"):this.lang("inactive"));return e.h("a",{class:"pointer_normal"},[r])},action:(t,a)=>e.h(KW,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim()}},responseAdapter({data:t}){return e.activated=t.data.find(({status:a})=>a),{data:t.data,count:5}},orderBy:{column:"name",ascending:!0}}}},ZW={class:"col-sm-12"},QW={class:"card card-light"},XW={class:"card-header"},ez={class:"card-title"},tz={class:"card-body",id:"driver_index"};function az(e,t,a,r,n,o){const m=v("alert"),p=v("data-table");return i(),d("div",ZW,[u(m,{componentName:"dataTableModal"}),s("div",QW,[s("div",XW,[s("h3",ez,h(e.trans("cache-driver")),1)]),s("div",tz,[u(p,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"driver_index",componentTitle:"DriverIndex"},null,8,["url","dataColumns","option"])])])])}const sz=x(JW,[["render",az]]);function Ql(e){const{connection:t}=e;let a={connection:[t,"isRequired"]};const r=new Le(N),{errors:n,isValid:o}=r.validate(a);return Ee.dispatch("setValidationError",n),{errors:n,isValid:o}}const nz={name:"CacheDriversRedis",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driver:"",connection:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=Ql(this.$data);return t},getData(){this.loading=!0,V.get("api/get/cache-driver/redis").then(e=>{this.driver=e.data.data.driver,this.loading=!1,this.hasDataPopulated=!0,this.fillFieldsInfo(e.data.data)}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,U(e,"CacheDriversRedis")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},onSubmit(){this.isValid()&&(this.pageLoad=!0,V.post("api/post/cache-driver",{default:this.driver,connection_redis:this.connection}).then(e=>{this.pageLoad=!1,K(e,"CacheDriversRedis"),setTimeout(()=>this.$router.push({name:"Cache Driver Index"}),3e3)}).catch(e=>{this.pageLoad=!1,U(e,"CacheDriversRedis")}))},onChange(e,t){this[t]=e}},components:{"text-field":we}},oz={class:"col-sm-12"},iz={class:"card card-light"},lz={class:"card-header"},rz={class:"card-title"},dz={class:"card-body"},cz={key:0,class:"row"},uz={key:1,class:"row"},mz={key:0,class:"card-footer"},hz=["disabled"];function pz(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("text-field"),w=H("focus-first-input");return i(),d("div",oz,[u(m,{componentName:"CacheDriversRedis"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",iz,[s("div",lz,[s("h3",rz,h(e.trans("redis")),1)]),s("div",dz,[!n.hasDataPopulated||n.loading?(i(),d("div",cz,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?P((i(),d("div",uz,[u(b,{label:e.trans("connection"),name:"connection",value:n.connection,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:e.lang("default")},null,8,["label","value","onChange","placehold"])])),[[w]]):f("",!0)]),n.hasDataPopulated?(i(),d("div",mz,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...S)=>o.onSubmit&&o.onSubmit(...S)),disabled:n.pageLoad},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,hz)])):f("",!0)])])}const _z=x(nz,[["render",pz]]);function fz(e){const{host:t,port:a}=e;let r={host:[t,"isRequired"],port:[a,"isRequired"]};const n=new Le(N),{errors:o,isValid:m}=n.validate(r);return Ee.dispatch("setValidationError",o),{errors:o,isValid:m}}const gz={name:"CacheDriversMemcached",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driver:"",host:"",port:"",persistent_id:"",user_name:"",password:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=fz(this.$data);return t},getData(){this.loading=!0,V.get("api/get/cache-driver/memcached").then(e=>{this.driver=e.data.data.driver,this.loading=!1,this.hasDataPopulated=!0,this.fillFieldsInfo(e.data.data)}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,U(e,"mem-cached")})},fillFieldsInfo(e){const{driver:t,servers:a,persistent_id:r,sasl:n}=e;this.driver=t,this.host=a[0].host,this.port=a[0].port,this.persistent_id=r,this.user_name=n[0],this.password=n[1]},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={default:this.driver,memcached_host:this.host,memcached_port:this.port},t={memcached_username:this.user_name,memcached_persistent_id:this.persistent_id,memcached_password:this.password};for(const[a,r]of Object.entries(t))r!==""&&(e[a]=r);V.post("api/post/cache-driver",e).then(a=>{this.pageLoad=!1,K(a,"mem-cached"),setTimeout(()=>this.$router.push({name:"Cache Driver Index"}),3e3)}).catch(a=>{this.pageLoad=!1,U(a,"mem-cached")})}},onChange(e,t){this[t]=e}},components:{"text-field":we}},vz={class:"col-sm-12"},bz={class:"card card-light"},yz={class:"card-header"},kz={class:"card-title"},wz={class:"card-body"},Cz={key:0,class:"row"},Dz={key:1,class:"row"},Sz={key:0,class:"card-footer"},Mz=["disabled"];function Fz(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("text-field"),w=H("focus-first-input");return i(),d("div",vz,[u(m,{componentName:"mem-cached"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",bz,[s("div",yz,[s("h3",kz,h(e.trans("memcached")),1)]),s("div",wz,[!n.hasDataPopulated||n.loading?(i(),d("div",Cz,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?P((i(),d("div",Dz,[u(b,{label:e.trans("host"),type:"text",name:"host",value:n.host,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"127.0.0.1"},null,8,["label","value","onChange"]),u(b,{label:e.trans("port"),type:"text",name:"port",value:n.port,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"11211"},null,8,["label","value","onChange"]),u(b,{label:e.trans("persistent_id"),type:"text",name:"persistent_id",value:n.persistent_id,classname:"col-sm-6",onChange:o.onChange,placehold:e.lang("id")},null,8,["label","value","onChange","placehold"]),u(b,{label:e.trans("user_name"),type:"text",name:"user_name",value:n.user_name,classname:"col-sm-6",onChange:o.onChange,placehold:e.lang("username")},null,8,["label","value","onChange","placehold"]),u(b,{label:e.trans("password"),type:"text",name:"password",value:n.password,classname:"col-sm-6",onChange:o.onChange,placehold:e.lang("password")},null,8,["label","value","onChange","placehold"])])),[[w]]):f("",!0)]),n.hasDataPopulated?(i(),d("div",Sz,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...S)=>o.onSubmit&&o.onSubmit(...S)),disabled:n.pageLoad},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,Mz)])):f("",!0)])])}const $z=x(gz,[["render",Fz]]);function Xl(e){const{endpoint:t,key:a,region:r,secret:n,table:o}=e;let m={endpoint:[t,"isRequired"],key:[a,"isRequired"],region:[r,"isRequired"],secret:[n,"isRequired"],table:[o,"isRequired"]};const p=new Le(N),{errors:g,isValid:b}=p.validate(m);return Ee.dispatch("setValidationError",g),{errors:g,isValid:b}}const Tz={name:"CacheDriversDynamodb",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,endpoint:"",key:"",region:"",secret:"",table:"",driver:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=Xl(this.$data);return t},getData(){this.loading=!0,V.get("api/get/cache-driver/dynamodb").then(e=>{this.driver=e.data.data.driver,this.fillFieldsInfo(e.data.data),this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,U(e,"CacheDriversDynamodb")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r]===null?"":e[r])})},onSubmit(){if(this.isValid()){this.pageLoad=!0;let e={};e.default=this.driver,e.aws_access_key_id=this.key,e.aws_secret_access_key=this.secret,e.dynamodb_cache_table=this.table,e.dynamodb_endpoint=this.endpoint,e.aws_default_region=this.region,V.post("api/post/cache-driver",e).then(t=>{this.pageLoad=!1,K(t,"CacheDriversDynamodb"),setTimeout(()=>this.$router.push({name:"Cache Driver Index"}),3e3)}).catch(t=>{this.pageLoad=!1,U(t,"CacheDriversDynamodb")})}},onChange(e,t){this[t]=e}},components:{"text-field":we}},Ez={class:"col-sm-12"},Lz={class:"card card-light"},Az={class:"card-header"},Iz={class:"card-title"},Pz={class:"card-body"},Oz={key:0,class:"row"},qz={key:1,class:"row"},xz={key:0,class:"card-footer"},Vz=["disabled"];function Nz(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("text-field"),w=H("focus-first-input");return i(),d("div",Ez,[u(m,{componentName:"CacheDriversDynamodb"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",Lz,[s("div",Az,[s("h3",Iz,h(e.trans("Dynamodb")),1)]),s("div",Pz,[!n.hasDataPopulated||n.loading?(i(),d("div",Oz,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?P((i(),d("div",qz,[u(b,{id:"endpoint",label:e.trans("endpoint"),type:"text",name:"endpoint",value:n.endpoint,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:e.lang("endpoint")},null,8,["label","value","onChange","placehold"]),u(b,{id:"key",label:e.trans("key"),type:"text",name:"key",value:n.key,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:e.lang("id")},null,8,["label","value","onChange","placehold"]),u(b,{id:"region",label:e.trans("region"),type:"text",name:"region",value:n.region,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"usa"},null,8,["label","value","onChange"]),u(b,{id:"secret",label:e.trans("secret"),type:"text",name:"secret",value:n.secret,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:e.lang("secret")},null,8,["label","value","onChange","placehold"]),u(b,{id:"table",label:e.trans("table"),type:"text",name:"table",value:n.table,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:e.lang("cache")},null,8,["label","value","onChange","placehold"])])),[[w]]):f("",!0)]),n.hasDataPopulated?(i(),d("div",xz,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...S)=>o.onSubmit&&o.onSubmit(...S)),disabled:n.pageLoad},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,Vz)])):f("",!0)])])}const Rz=x(Tz,[["render",Nz]]);const Uz={name:"task-delete-modal",description:"Delete Modal component for task plugin",props:{showModal:{type:Boolean,default:!1},deleteUrl:{type:String},onClose:{type:Function},alertComponentName:{type:String,default:"dataTableModal"},redirectUrl:{type:String,default:""},componentTitle:{type:String,default:""}},computed:{alertMessage(){switch(this.componentTitle){case"TaskList":return this.lang("task-plugin-delete-confirmation-tasklists");case"TaskProjects":return this.lang("task-plugin-delete-confirmation-projects");case"TaskTemplate":return this.lang("task-plugin-template-delete-alert");case"dataTableTittle":return this.lang("form-category-delete-message")}}},data:()=>({isDisabled:!1,containerStyle:{width:"500px"},loading:!1,size:60,lang_locale:""}),created(){this.lang_locale=localStorage.getItem("LANGUAGE")},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,axios.delete(this.deleteUrl).then(e=>{K(e,this.alertComponentName),window.emitter.emit("refreshData"),this.afterRespond()}).catch(e=>{U(e,this.alertComponentName),this.afterRespond()})},afterRespond(){window.emitter.emit(this.componentTitle+"refreshData"),window.emitter.emit(this.componentTitle+"uncheckCheckbox"),this.redirectUrl&&this.redirect(this.redirectUrl),this.alertComponentName=="timeline"&&window.emitter.emit("actionDone"),this.onClose(),this.loading=!1,this.isDisabled=!0}}},jz={class:"modal-title"},Bz={key:0},Yz={key:1,class:"row"},Hz=["disabled"];function Wz(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("modal");return i(),d("div",null,[a.showModal?(i(),A(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:e.containerStyle},{title:T(()=>[s("h4",jz,h(e.lang("delete")),1)]),fields:T(()=>[e.loading?f("",!0):(i(),d("div",Bz,[s("span",null,h(o.alertMessage),1)])),e.loading?(i(),d("div",Yz,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:e.size,class:G({spin:e.lang_locale=="ar"})},null,8,["size","class"])])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...g)=>o.onSubmit&&o.onSubmit(...g)),class:"btn btn-secondary",disabled:e.isDisabled},[t[1]||(t[1]=s("i",{class:"fas fa-trash","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("delete")),1)],8,Hz)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const zz=x(Uz,[["render",Wz]]);const Gz={name:"task-modal",description:"Task Modal component",props:{title:{type:String,default:""},showModal:{type:Boolean,default:!1},onClose:{type:Function},alertComponentName:{type:String,default:"dataTableModal"},componentTitle:{type:String,default:""},containerStyle:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}}},data(){return{loading:!1,name:"",project_id:""}},beforeMount(){this.updateSubject()},methods:{updateSubject(){this.title==="edit_project"&&(this.name=this.data.name,this.project_id=this.data.id)},onChange(e,t){this[t]=e},onSubmit(){this.loading=!0;const e={};e.name=this.name,this.title==="edit_project"?V.put("/tasks/api/project/edit/"+this.project_id,e).then(t=>{K(t,this.alertComponentName),this.afterRespond()}).catch(t=>{U(t,this.alertComponentName),t.response.status===412?this.loading=!1:this.afterRespond()}):V.post("/tasks/api/project/create",e).then(t=>{K(t,this.alertComponentName),this.afterRespond()}).catch(t=>{U(t,this.alertComponentName),t.response.status===412?this.loading=!1:this.afterRespond()})},afterRespond(){window.emitter.emit(this.componentTitle+"refreshData"),this.onClose(),this.loading=!1},triggerEvent(e){var t=e.which||e.keyCode;t===13&&this.onSubmit()}},components:{"text-field":we}},Kz={class:"modal-title"},Jz={key:0,class:"row"},Zz={key:1,class:"row"},Qz=["disabled"];function Xz(e,t,a,r,n,o){const m=v("text-field"),p=v("reuse-loader"),g=v("modal"),b=H("focus-first-input");return a.showModal?(i(),A(g,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:a.containerStyle},{title:T(()=>[s("h4",Kz,h(e.lang(a.title)),1)]),fields:T(()=>[n.loading?f("",!0):P((i(),d("div",Jz,[u(m,{label:e.lang("project_name"),id:"project_name",onChange:o.onChange,placehold:e.lang("enter_a_value"),value:n.name,type:"text",name:"name",keyupListener:o.triggerEvent,required:!0,classname:"col-sm-12"},null,8,["label","onChange","placehold","value","keyupListener"])])),[[b]]),n.loading?(i(),d("div",Zz,[u(p,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...w)=>o.onSubmit&&o.onSubmit(...w)),class:"btn btn-primary",disabled:!n.name},[t[1]||(t[1]=s("i",{class:"fas fa-check"},null,-1)),L(" "+h(e.lang("proceed")),1)],8,Qz)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const eG=x(Gz,[["render",Xz]]),tG={name:"task-modal",description:"Task Modal component",props:{title:{type:String,default:""},showModal:{type:Boolean,default:!1},onClose:{type:Function},alertComponentName:{type:String,default:"dataTableModal"},componentTitle:{type:String,default:""},containerStyle:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}}},data(){return{loading:!1,name:"",project:"",task_id:""}},beforeMount(){this.updateSubject()},methods:{updateSubject(){this.title==="tasklist_edit"&&(this.name=this.data.name,this.project=this.data.project,this.task_id=this.data.id)},onChange(e,t){this[t]=e},onSubmit(){this.loading=!0;const e={};e.name=this.name,e.project_id=this.project.id,this.title==="tasklist_edit"?V.put("/tasks/api/category/edit/"+this.task_id,e).then(t=>{K(t,this.alertComponentName),this.afterRespond()}).catch(t=>{U(t,this.alertComponentName),t.response.status===412?this.loading=!1:this.afterRespond()}):V.post("/tasks/api/category/create",e).then(t=>{K(t,this.alertComponentName),this.afterRespond()}).catch(t=>{U(t,this.alertComponentName),t.response.status===412?this.loading=!1:this.afterRespond()})},afterRespond(){window.emitter.emit(this.componentTitle+"refreshData"),this.onClose(),this.loading=!1}},components:{"text-field":we,"dynamic-select":Be}},aG={class:"modal-title"},sG={key:0,class:"row"},nG={key:1,class:"row"},oG=["disabled"];function iG(e,t,a,r,n,o){const m=v("text-field"),p=v("dynamic-select"),g=v("reuse-loader"),b=v("modal"),w=H("focus-first-input");return a.showModal?(i(),A(b,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:a.containerStyle},{title:T(()=>[s("h4",aG,h(e.lang(a.title)),1)]),fields:T(()=>[n.loading?f("",!0):P((i(),d("div",sG,[u(m,{label:e.lang("name"),id:"project_name",onChange:o.onChange,placehold:e.lang("enter_a_value"),value:n.name,type:"text",name:"name",required:!0,classname:"col-sm-6"},null,8,["label","onChange","placehold","value"]),u(p,{id:"project",name:"project",multiple:!1,value:n.project,label:e.lang("project"),onChange:o.onChange,strlength:"35",apiEndpoint:"tasks/api/project/view",required:!0,classname:"col-sm-6"},null,8,["value","label","onChange"])])),[[w]]),n.loading?(i(),d("div",nG,[u(g,{"animation-duration":4e3,color:"#1d78ff",size:60})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...S)=>o.onSubmit&&o.onSubmit(...S)),class:"btn btn-primary",disabled:!(n.name&&n.project)},[t[1]||(t[1]=s("i",{class:"fas fa-check"},null,-1)),L(" "+h(e.lang("proceed")),1)],8,oG)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const lG=x(tG,[["render",iG]]);const rG={name:"data-table-actions",description:"Contains edit, delete and view buttons as group which can be used as a component as whole. It is built basically for displaying edit, delete and view button in a datable.",props:{data:{type:Object,required:!0}},data(){return{showModal:!1,showEditModal:!1,alert:"",style:{width:"500px"},styleObj:{width:"700px"}}},created(){this.alert=this.data.alertComponentName?this.data.alertComponentName:"dataTableModal"},methods:{onClose(){this.showModal=!1,this.showEditModal=!1,this.$store.dispatch("unsetValidationError")}},components:{"delete-modal":zz,"task-modal":eG,"task-list-modal":lG}},dG={class:"block"};function cG(e,t,a,r,n,o){const m=v("router-link"),p=v("delete-modal"),g=v("task-list-modal"),b=v("task-modal"),w=H("tooltip");return i(),d("div",dG,[a.data.edit_modal?P((i(),d("a",{key:0,class:"btn btn-light table_btn btn-sm",onClick:t[0]||(t[0]=S=>n.showEditModal=!0),href:"javascript:;"},t[2]||(t[2]=[s("i",{class:"fas fa-edit"},null,-1)]))),[[w,e.trans("edit")]]):f("",!0),a.data.edit_url?P((i(),A(m,{key:1,class:"btn btn-light table_btn btn-sm",id:"edit-button",to:a.data.edit_url,target:a.data.tableName?"_blank":""},{default:T(()=>t[3]||(t[3]=[s("span",null,[s("i",{class:"fas fa-edit"})],-1)])),_:1},8,["to","target"])),[[w,e.trans("edit")]]):f("",!0),a.data.delete_url?P((i(),d("a",{key:2,class:"btn btn-light table_btn btn-sm",onClick:t[1]||(t[1]=S=>n.showModal=!0),href:"javascript:;"},t[4]||(t[4]=[s("i",{class:"fas fa-trash"},null,-1)]))),[[w,e.trans("delete")]]):f("",!0),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(p,{key:0,onClose:o.onClose,showModal:n.showModal,deleteUrl:a.data.delete_url,alertComponentName:n.alert,componentTitle:a.data.componentTitle},null,8,["onClose","showModal","deleteUrl","alertComponentName","componentTitle"])):f("",!0)]),_:1}),a.data.componentTitle==="TaskList"?(i(),A(Ae,{key:3,name:"modal"},{default:T(()=>[n.showEditModal?(i(),A(g,{key:0,title:"tasklist_edit",onClose:o.onClose,showModal:n.showEditModal,data:a.data,componentTitle:"TaskList"},null,8,["onClose","showModal","data"])):f("",!0)]),_:1})):f("",!0),a.data.componentTitle==="TaskProjects"?(i(),A(Ae,{key:4,name:"modal"},{default:T(()=>[n.showEditModal?(i(),A(b,{key:0,title:"edit_project",onClose:o.onClose,showModal:n.showEditModal,data:a.data,containerStyle:n.style,componentTitle:"TaskProjects"},null,8,["onClose","showModal","data","containerStyle"])):f("",!0)]),_:1})):f("",!0)])}const li=x(rG,[["render",cG]]);function uG(e){const{name:t}=e;let a={name:[t,"isRequired"]};const r=new Le(N),{errors:n,isValid:o}=r.validate(a);return Ee.dispatch("setValidationError",n),{errors:n,isValid:o}}const mG={name:"form-builder-index",components:{TextField:we,Modal:_t,DataTableActions:li},setup(){const e=Me();return{formattedTime:me(()=>e.getters.formattedTime)}},props:{componentTitle:{type:String,default:""}},data:()=>({columns:["name","type","created_at","updated_at","action"],options:{},apiUrl:"/api/dependency/form-categories",showModal:!1,loading:!0,isDisabled:!0,type:"",name:"",showDrop:!1,nameError:""}),beforeMount(){setTimeout(()=>{this.showDrop=!0},1e3);const e=this;this.options={headings:{name:this.trans("name"),type:this.trans("type"),created_at:this.trans("created_at"),updated_at:this.trans("updated_at"),action:this.trans("action")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)},action:(t,a)=>e.h(li,{data:a})},sortable:["name","created_at","type"],filterable:["name","created_at","type"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{paginate:1,"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="forms/"+a.category+"/edit",a.componentTitle="dataTableTittle",a.alertComponentName="form-builder-index",a)),count:t.data.total}}}},methods:{containsSpecialChars(e){const t=/[!@#$%^&*()+\-=\[\]{};':"\\|,.<>\/?\s]/.test(e);return t?this.handleNameError(this.lang("validation-error-message")):this.handleNameError(""),t},handleNameError(e){this.nameError=e},isValid(){const{errors:e,isValid:t}=uG(this.$data);return t},onClose(){this.showModal=!1,this.nameError="",this.type="",this.name=""},onChange(e,t){this[t]=e,this.isDisabled=e!==""},onSubmit(){if(this.isValid()){if(this.containsSpecialChars(this.name))return;this.loading=!0,this.isDisabled=!0;let e={};e.name=this.name,V.post("/form-category/create",e).then(t=>{this.loading=!1,K(t,"form-builder-index"),window.emitter.emit("refreshData"),this.onClose()}).catch(t=>{this.loading=!1,U(t,"form-builder-index")})}}}},hG={class:"col-sm-12"},pG={class:"card card-light"},_G={class:"card-header"},fG={id:"contract-type-list",class:"card-title"},gG={class:"card-tools"},vG={href:"javascript:;",class:"btn-tool dropdown-toggle","data-bs-toggle":"dropdown"},bG={class:"dropdown-menu dropdown-menu-right",role:"menu"},yG={class:"card-body"},kG={class:"modal-title"},wG={class:"row"},CG={class:"fas fa-info-circle infoCheck"},DG={key:0,class:"error-block is-danger"};function SG(e,t,a,r,n,o){const m=v("alert"),p=v("data-table"),g=v("text-field"),b=v("modal"),w=H("tooltip"),S=H("focus-first-input");return i(),d("div",hG,[u(m,{componentName:"form-builder-index"}),s("div",pG,[s("div",_G,[s("h3",fG,h(e.lang("list_of_form_categories")),1),s("div",gG,[P((i(),d("a",vG,t[3]||(t[3]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)]))),[[w,e.lang("create_form")]]),P(s("div",bG,[s("a",{class:"dropdown-item",onClick:t[0]||(t[0]=C=>e.showModal=!0)},h(e.lang("new_ticket_category")),1)],512),[[kt,e.showDrop]])])]),s("div",yG,[u(p,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"contract-type-list"},null,8,["url","dataColumns","option"])]),e.showModal?(i(),A(b,{key:0,showModal:e.showModal,onClose:o.onClose,componentTitle:"dataTableTittle"},{title:T(()=>[s("h4",kG,h(e.lang("create_new_form_category")),1)]),fields:T(()=>[P((i(),d("div",wG,[u(g,{label:e.lang("name"),value:e.name,type:"textfield",name:"name",onChange:o.onChange,required:!0,classname:"col-sm-12",onKeyup:t[1]||(t[1]=_a(C=>o.onSubmit(),["enter"]))},null,8,["label","value","onChange"]),s("span",null,[P(s("i",CG,null,512),[[w,e.lang("ticket-form-info")]])])])),[[S]]),e.nameError?(i(),d("div",DG,h(e.nameError),1)):f("",!0)]),controls:T(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[2]||(t[2]=C=>o.onSubmit()),class:"btn btn-primary",disabled:!1},[t[4]||(t[4]=s("i",{class:"fas fa-save","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("save")),1)])]),_:1},8,["showModal","onClose"])):f("",!0)])])}const MG=x(mG,[["render",SG],["__scopeId","data-v-e1aa12e0"]]);const FG={name:"form-builder-main",components:{"faveo-form-builder-menu":Ai,"text-field":we,"dynamic-select":Be,Modal:_t},props:{groupMode:{type:String,default:""},formNameObj:{type:Object,default:()=>{}},formLinker:{type:Array,default:()=>[]},editFormGroupApi:{type:String,default:()=>""},postFromGroupApi:{type:String,default:()=>""},formCategoryType:{type:String,default:""}},data:()=>({pageHeading:"create-form",hasMenuLoaded:!1,hasFormFieldsLoaded:!1,showLoader:!0,formGroupList:[],isCreateFormGroup:!1,isEditFormGroup:!1,formGroupId:null,activeFormCategoryType:"",formCategoryTypes:[],localFormNameObj:"",localFormLinker:"",showDeleteModal:!1,deleteType:"",deleteData:"",deleteId:"",showModal:!1,organizations:[],defaultCategories:["ticket","organisation","user","asset","change","license"]}),beforeMount(){this.localFormNameObj=this.formNameObj,this.localFormLinker=this.formLinker,this.activeFormCategoryType=this.formCategoryType,this.setInitialValue(),this.groupMode=="create"&&(this.localFormNameObj.value="",this.localFormLinker=this.localFormLinker.map(e=>({...e,value:[]})))},computed:{formFieldsStoreValue:{get(){return this.$store.getters.getFormFields},set(e){this.$store.dispatch("updateFormFields",e)}}},created(){window.emitter.on("formFieldSettingsApplied",this.applySettingsChanges),window.emitter.on("onRemoveElement",this.onRemoveElement),window.emitter.on("getFormDataFromServer",this.getFormDataFromServer)},methods:{onClose(){this.showModal=!1,this.type="",this.name=""},showConfigModal(){this.showModal=!0,this.showLoader=!0,this.fetchConfigData()},fetchConfigData(){this.showLoader=!0,V.get("/form-category/configs/"+this.activeFormCategoryType).then(e=>{this.organizations=e.data.data.organizations,this.showLoader=!1})},setInitialValue(){this.getCurrentWindowLocation(),!this.isCreateFormGroup&&!this.isEditFormGroup?this.getFormCategories():(this.getMenuJson(),this.assignFormFields())},getFormCategories(){this.setCategoryType(),this.getFormDataBasisOnCategory()},setCategoryType(){let e=window.location.pathname;e=e.split("/"),this.activeFormCategoryType=e[e.length-2]},getFormDataBasisOnCategory(){this.getFormGroupList(),this.getMenuJson(),this.assignFormFields()},getCurrentWindowLocation(){return window.location.pathname},getMenuJson(){V.get("api/get-form-menu/"+this.activeFormCategoryType).then(e=>{this.$store.commit("updateFormMenu",e.data.data),this.hasMenuLoaded=!0})},assignFormFields(){this.isCreateFormGroup?this.$store.commit("updateFormFields",[]):this.getFormDataFromServer().then(e=>{this.isEditFormGroup&&(this.localFormNameObj.value=e.data.data[this.localFormNameObj.id]?e.data.data[this.localFormNameObj.id]:"",this.localFormLinker.forEach(t=>{t.value=e.data.data[t.id]?e.data.data[t.id]:[]})),this.hasFormFieldsLoaded=!0})},onTabClick(e){this.activeFormCategoryType!==e&&(this.activeFormCategoryType=e,this.getMenuJson(),this.getFormGroupList(),this.getFormDataFromServer())},getFormDataFromServer(){this.showLoader=!0,this.$store.commit("updateFormCategoryType",this.activeFormCategoryType);let e="api/get-form-data",t={category:this.activeFormCategoryType,config:!0};return this.isEditFormGroup&&(e=this.editFormGroupApi+"/"+this.formGroupId,t.config=!1),V.get(e,{params:t}).then(a=>(this.$store.commit("updateFormFields",a.data.data.form_fields),this.showLoader=!1,a)).catch(a=>{this.showLoader=!1,U(a,"form-builder-main")})},isValidFormName(){if(this.isCreateFormGroup||this.isEditFormGroup){const{errors:e,isValid:t}=Li(this.$props);return t}else return!0},getFormGroupList(){if(this.activeFormCategoryType==="user"||this.activeFormCategoryType==="organisation")return;this.showLoader=!0;const t={limit:2e3,supplements:this.defaultCategories.includes(this.activeFormCategoryType)?this.activeFormCategoryType:"ticket"};V.get("api/dependency/form-groups",{params:t}).then(a=>{this.formGroupList=a.data.data.form_groups.map(r=>({id:r.id,title:r.name,name:r.name,type:"group",edit_url:r.edit_url,is_deletable:1}))}).catch(a=>{console.error("Error in getting form group list ",a)}).finally(()=>{this.showLoader=!1})},async onSaveForm(){if(this.isValidFormName()){const e=this.$store.getters.getFormFields;this.assignSortOrder(e),this.saveForm(e)}},assignSortOrder(e){for(let t=0;t<e.length;t++)e[t].sort_order=t,Object.keys(e[t]).forEach(a=>{Te(e[t][a])&&Array.isArray(e[t][a])&&this.assignSortOrder(e[t][a])})},async saveForm(e){try{this.showLoader=!0;const t=this.getApiEndpoint(),a=await this.postFormData(t,e);this.handleSuccess(a)}catch(t){this.handleFailure(t)}},getApiEndpoint(){return this.isCreateFormGroup||this.isEditFormGroup?this.postFromGroupApi:"api/post-form-data"},async postFormData(e,t){return await V.post(e,this.getSaveFormParams(t))},handleSuccess(e){K(e,"form-builder-main"),this.isCreateFormGroup||this.isEditFormGroup?this.handleSuccessForCreateOrEdit():this.handleSuccessForOther()},handleSuccessForCreateOrEdit(){this.showLoader=!1,setTimeout(()=>{this.$router.push({name:"FormGroups Index"})},3e3)},handleSuccessForOther(){this.getFormDataFromServer().then(()=>{this.showLoader=!1})},handleFailure(e){this.showLoader=!1,U(e,"form-builder-main")},getSaveFormParams(e){let t={};return t.category=this.activeFormCategoryType,t["form-fields"]=e,(this.isCreateFormGroup||this.isEditFormGroup)&&(t[this.localFormNameObj.submitFormParamKey]=this.localFormNameObj.value,this.localFormLinker.forEach(a=>{t[a.submitFormParamKey]=a.value.map(r=>r.id)})),this.isEditFormGroup&&(t.id=this.formGroupId),t},onRemoveElement(e){this.showDeleteModal=!0,this.deleteType=e.reference_type,this.deleteData=e.fieldData,this.deleteId=e.reference_id},doDelete(){this.showDeleteModal=!1,this.isDeleteFromDB(this.deleteData)?this.deleteElementFormDB(this.deleteData.id,this.deleteId,this.deleteType):this.deleteElementLocally(this.deleteData.form_identifier)},deleteElementLocally(e){const t=this.$store.getters.getFormFields;this.removeAt(t,e)&&this.$store.dispatch("updateFormFields",t)},deleteElementFormDB(e,t,a){this.showLoader=!0;let r="api/delete-form-data/form-field/"+e;t&&(r="api/unlink-form-group/"+a+"/"+t),V.delete(r).then(n=>{K(n,"form-builder-main"),this.getFormDataFromServer(),this.showLoader=!1}).catch(n=>{this.showLoader=!1,U(n,"form-builder-main")})},isDeleteFromDB(e){return e.type==="group"?typeof e.groupid>"u":e.id.toString().length<13},removeAt(e,t){let a=dt.findIndex(e,r=>r.form_identifier===t);if(a!==-1)e.splice(a,1);else for(let r=0;r<e.length;r++)Te(e[r].options)&&this.removeAt(e[r].options,t),Te(e[r].nodes)&&this.removeAt(e[r].nodes,t);return Promise.resolve(!0)},onChange(e,t){this[t]=e,e!==""&&(this.isDisabled=!1)},onSubmit(){this.showLoader=!0,this.isDisabled=!0;let e={};e.organization=this.organisation,V.post("form-category/configs/"+this.activeFormCategoryType,e).then(t=>{this.showLoader=!1,K(t,"form-builder-main"),window.emitter.emit("refreshData"),this.onClose()}).catch(t=>{this.showLoader=!1,U(t,"form-builder-main"),this.onClose()})},async applySettingsChanges(e){const t=this.$store.getters.getFormFields;await this.assignNewValue(t,e.form_identifier,e)&&this.$store.dispatch("updateFormFields",t)},assignNewValue(e,t,a){let r=dt.findIndex(e,n=>n.form_identifier===t);if(r!==-1)e[r]=a;else for(let n=0;n<e.length;n++)Te(e[n].options)&&this.assignNewValue(e[n].options,t,a),Te(e[n].nodes)&&this.assignNewValue(e[n].nodes,t,a);return new Promise(n=>{n(!0)})}}},$G={class:"col-sm-12"},TG={class:"card card-light"},EG={class:"card-header"},LG={class:"card-title"},AG={key:0,class:"text-capitalize"},IG={class:"card-tools"},PG={class:"modal-title"},OG={class:"alert alert-info"},qG={class:"row"},xG={class:"card-body",id:"form-builder-body"},VG={class:"row"},NG={class:"col-md-4"},RG={class:"col-md-8"},UG={class:"card m-1 p-2"},jG={key:0},BG={key:0,class:"row"},YG={class:"mt-2"},HG={class:"modal-title"};function WG(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("dynamic-select"),b=v("modal"),w=v("faveo-form-builder-menu"),S=v("text-field"),C=v("draggable-form-field-item"),M=H("tooltip"),D=H("focus-first-input");return i(),d("div",$G,[u(m,{componentName:"form-builder-main"}),s("div",TG,[s("div",EG,[e.showLoader?(i(),A(p,{key:0})):f("",!0),s("h3",LG,[!e.isCreateFormGroup&&!e.isEditFormGroup?(i(),d("span",AG,h(e.trans("create"))+" "+h(e.activeFormCategoryType)+" "+h(!e.isCreateFormGroup&&!e.isEditFormGroup?e.trans("form"):e.trans("form-group")),1)):f("",!0)]),s("div",IG,[e.defaultCategories.includes(e.activeFormCategoryType)?f("",!0):P((i(),d("button",{key:0,type:"button",class:"btn btn-tool btn-light form-save-btn",onClick:t[0]||(t[0]=F=>o.showConfigModal())},[t[4]||(t[4]=s("i",{class:"fa-solid fa-sitemap"},null,-1)),L(" "+h(e.trans("assign")),1)])),[[M,e.trans("assign_organization")]]),s("button",{class:"btn btn-tool btn-light form-save-btn",onClick:t[1]||(t[1]=(...F)=>o.onSaveForm&&o.onSaveForm(...F))},[t[5]||(t[5]=s("span",{class:"fas fa-save"},null,-1)),L(" "+h(e.lang("save")),1)])])]),e.showModal?(i(),A(b,{key:0,showModal:e.showModal,onClose:o.onClose},{title:T(()=>[s("h4",PG,h(e.lang("assign_organization")),1)]),fields:T(()=>[s("div",OG,[s("li",null,h(e.lang("assign_org_form_caution_msg_1")),1),s("li",null,h(e.lang("assign_org_form_caution_msg_2")),1)]),P((i(),d("div",qG,[u(g,{label:e.lang("organizations"),multiple:!0,name:"organisation",prePopulate:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/organizations?having_form_categories=0",value:e.organizations,onChange:o.onChange},null,8,["label","value","onChange"])])),[[D]])]),controls:T(()=>[s("button",{type:"button",id:"submit_btn",onClick:t[2]||(t[2]=(...F)=>o.onSubmit&&o.onSubmit(...F)),class:"btn btn-primary",disabled:!1},[t[6]||(t[6]=s("i",{class:"fas fa-sync","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("submit")),1)])]),_:1},8,["showModal","onClose"])):f("",!0),s("div",xG,[s("div",VG,[s("div",NG,[e.hasMenuLoaded?(i(),A(w,{key:0,class:"card formFields","form-group-list":e.formGroupList},null,8,["form-group-list"])):f("",!0)]),s("div",RG,[s("div",UG,[e.hasFormFieldsLoaded&&e.hasMenuLoaded?(i(),d("div",jG,[e.isCreateFormGroup||e.isEditFormGroup?P((i(),d("div",BG,[u(S,{id:e.localFormNameObj.id,classname:e.localFormNameObj.className,label:e.lang(e.localFormNameObj.label),value:e.localFormNameObj.value,type:"text",name:e.localFormNameObj.id,onChange:F=>e.localFormNameObj.value=F,placehold:e.lang(e.localFormNameObj.placeholder),required:!0},null,8,["id","classname","label","value","name","onChange","placehold"]),(i(!0),d(B,null,re(e.localFormLinker,F=>(i(),A(g,{key:F.id,id:F.id,name:F.id,classname:F.className,apiEndpoint:F.apiEndpoint,label:e.lang(F.label),value:F.value,required:!1,multiple:!0,onChange:I=>F.value=I},null,8,["id","name","classname","apiEndpoint","label","value","onChange"]))),128))])),[[D]]):f("",!0),s("div",YG,[u(C,{value:o.formFieldsStoreValue},null,8,["value"])])])):f("",!0)])])])])]),u(Ae,{name:"modal"},{default:T(()=>[e.showDeleteModal?(i(),A(b,{key:0,showModal:!0,onClose:()=>e.showDeleteModal=!1,containerStyle:{width:"400px"}},{title:T(()=>[s("h4",HG,h(e.lang("delete")),1)]),fields:T(()=>[s("span",null,h(e.lang("are_you_sure_you_want_to_delete")),1)]),controls:T(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:t[3]||(t[3]=(...F)=>o.doDelete&&o.doDelete(...F)),class:"btn btn-secondary"},[t[7]||(t[7]=s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})])}const zG=x(FG,[["render",WG],["__scopeId","data-v-13b5092b"]]),GG={name:"UserImport",description:"Common component to track the import progress",data(){return{url:"",id:"",responseData:null,loading:!0,dataTableOptions:{headings:{row:this.trans("row_number"),field:this.trans("field_name"),comment:this.trans("reason")},columnsClasses:{row:"import__failed__row",field:"import__failed__field",comment:"import__failed__comment"},filterable:!1,sortable:[],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(e){return{page:e.page,limit:e.limit}},responseAdapter({data:e}){return{data:e.data.data.map(t=>t),count:e.data.total}}}}},beforeMount(){this.id=Ue(window.location.pathname),this.url="panel/user/list",this.getData()},computed:{getUrlAttribute(){const e=this.basePath()+"/"+this.url,t=this.urlLabel?this.urlLabel:this.lang("sd_importer_import_tracking_view_label");return`<p><a href="${e}">${t}</a></p>`},showFailedRows(){return this.responseData.totalFailed>0},failedRowsUrl(){return`/user/import-tracking-failed/${this.id}`}},methods:{getData(){V.get(`/user/import-tracking-details/${this.id}`).then(e=>{this.responseData=e.data.data,this.loading=!1})}}},KG={class:"col-sm-12"},JG={key:1},ZG={class:"row"},QG={class:"col-md-12"},XG={class:"table-responsive"},eK={class:"table table-bordered"},tK={class:"thead-light"},aK={key:0},sK=["innerHTML"],nK={key:0,class:"row"},oK={class:"col-sm-12"};function iK(e,t,a,r,n,o){const m=v("custom-loader"),p=v("faveo-box"),g=v("data-table");return i(),d("div",KG,[n.loading?(i(),A(m,{key:0,"animation-duration":4e3,size:60})):(i(),d("div",JG,[u(p,{title:e.trans("user_import")},{default:T(()=>[s("div",ZG,[s("div",QG,[s("div",XG,[s("table",eK,[s("thead",tK,[s("tr",null,[s("th",null,h(e.trans("name")),1),s("th",null,h(e.trans("type")),1),s("th",null,h(e.trans("status")),1),s("th",null,h(e.trans("ended_at")),1),s("th",null,h(e.trans("created")),1),s("th",null,h(e.trans("updated")),1),s("th",null,h(e.trans("totalFailed_label")),1),n.url?(i(),d("th",aK,h(e.lang("sd_import_result_action_label")),1)):f("",!0)])]),s("tbody",null,[s("tr",null,[s("td",null,h(n.responseData.import_name),1),s("td",null,h(n.responseData.type),1),s("td",null,h(n.responseData.is_complete),1),s("td",null,h(n.responseData.ended_at),1),s("td",null,h(n.responseData.totalCreated),1),s("td",null,h(n.responseData.totalUpdated),1),s("td",null,h(n.responseData.totalFailed),1),n.url?(i(),d("td",{key:0,innerHTML:o.getUrlAttribute},null,8,sK)):f("",!0)])])])])])])]),_:1},8,["title"]),o.showFailedRows?(i(),d("div",nK,[s("div",oK,[u(p,{title:e.trans("user_import_tracking_view_failed_box_label")},{default:T(()=>[u(g,{url:o.failedRowsUrl,dataColumns:["row","field","comment"],option:n.dataTableOptions},null,8,["url","option"])]),_:1},8,["title"])])])):f("",!0)]))])}const lK=x(GG,[["render",iK]]);const rK={name:"DriverSettingsName",description:"drivers name column table component",props:{data:{type:Object,required:!0}}},dK=["href"];function cK(e,t,a,r,n,o){const m=H("tooltip");return i(),d("span",null,[s("span",null,h(a.data.name),1),t[1]||(t[1]=L("   ")),a.data.tooltip_message?P((i(),d("a",{key:0,class:G(a.data.document_link===null?"drivers-alert":""),href:a.data.document_link,target:"_blank"},t[0]||(t[0]=[s("i",{class:"fas fa-question-circle"},null,-1)]),10,dK)),[[m,a.data.tooltip_message]]):f("",!0)])}const uK=x(rK,[["render",cK],["__scopeId","data-v-6b7b8308"]]),mK={name:"DriverSettingsActivateModal",description:"drivers table action modal component",props:{showModal:{type:Boolean,default:!1},driver:{type:[String,Number],default:""},onClose:{type:Function}},data(){return{isDisabled:!1,containerStyle:{width:"600px"},loading:!1}},methods:{onSubmit(){this.loading=!0,this.isDisabled=!0,V.post("api/post/search-driver",{driver:this.driver.key,status:1}).then(e=>{window.emitter.emit("DriversIndexrefreshData"),K(e,"dataTableModal"),this.loading=!1,this.isDisabled=!1,this.onClose()}).catch(e=>{this.loading=!1,this.isDisabled=!1,U(e,"dataTableModal"),this.onClose()})}}},hK={class:"modal-title"},pK={key:0},_K={key:1,class:"row"},fK=["disabled"];function gK(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("modal");return a.showModal?(i(),A(p,{key:0,showModal:a.showModal,onClose:a.onClose,containerStyle:n.containerStyle},{title:T(()=>[s("h4",hK,h(e.trans("activate")),1)]),fields:T(()=>[n.loading?f("",!0):(i(),d("div",pK,[s("span",null,h(e.trans("are_you_sure")),1)])),n.loading?(i(),d("div",_K,[u(m,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:t[0]||(t[0]=(...g)=>o.onSubmit&&o.onSubmit(...g)),class:"btn btn-primary",disabled:n.isDisabled},[t[1]||(t[1]=s("i",{class:"fas fa-check"},null,-1)),L(" "+h(e.trans("activate")),1)],8,fK)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)}const vK=x(mK,[["render",gK]]);const bK={name:"DriversSettingsActions",description:"drivers table action component",props:{data:{type:Object,required:!0}},data(){return{showModal:!1}},methods:{onClose(){this.showModal=!1},redirectToDriverSettings(){this.$router.push(`/search-driver/settings/${this.data.id}`)}},components:{"driver-settings-activate-modal":vK}},yK={key:0},kK={key:0},wK=["disabled"],CK={key:1};function DK(e,t,a,r,n,o){const m=v("driver-settings-activate-modal"),p=H("tooltip");return a.data?(i(),d("div",yK,[a.data.is_configurable===0?P((i(),d("span",kK,[s("button",{class:"btn btn-light table_btn driver_btn",onClick:t[0]||(t[0]=g=>n.showModal=!0),disabled:a.data.status},t[2]||(t[2]=[s("i",{class:"fas fa-check-circle"},null,-1)]),8,wK)])),[[p,a.data.status?e.trans("activated"):e.trans("activate")]]):f("",!0),a.data.is_configurable===1?P((i(),d("span",CK,[s("button",{class:"btn btn-light table_btn driver_btn",onClick:t[1]||(t[1]=(...g)=>o.redirectToDriverSettings&&o.redirectToDriverSettings(...g))},t[3]||(t[3]=[s("i",{class:"fas fa-cog"},null,-1)]))])),[[p,a.data.status?e.trans("configured"):e.trans("configure")]]):f("",!0),u(Ae,{name:"modal"},{default:T(()=>[n.showModal?(i(),A(m,{key:0,onClose:o.onClose,showModal:n.showModal,driver:a.data},null,8,["onClose","showModal","driver"])):f("",!0)]),_:1})])):f("",!0)}const SK=x(bK,[["render",DK],["__scopeId","data-v-96f9ab38"]]);const MK={name:"DriversIndex",description:"drivers table component",data(){return{columns:["name","status","action"],options:{},apiUrl:"api/get/search-driver",activated:""}},beforeMount(){const e=this;this.options={headings:{name:this.trans("name"),status:this.trans("status"),action:this.trans("action")},sortIcon:{base:"glyphicon",down:"glyphicon-chevron-up",up:"glyphicon-chevron-down"},columnsClasses:{name:"driver-name",status:"driver-status",action:"driver-action"},texts:{filter:"",limit:""},templates:{name:(t,a)=>e.h(uK,{data:a}),status:function(t,a){let r=e.h("span",{class:a.status?"btn btn-success btn-sm pointer_normal":"btn btn-danger btn-sm pointer_normal"},a.status?e.trans("active"):e.trans("inactive"));return e.h("a",{class:"pointer_normal"},[r])},action:(t,a)=>e.h(SK,{data:a})},sortable:"",filterable:"",pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"name","sort-order":t.ascending?"asc":"desc","search-query":t.query.trim()}},responseAdapter({data:t}){return e.activated=t.data.data.find(({status:a})=>a),{data:t.data.data,count:t.data.total}},orderBy:{column:"name",ascending:!0}}}},FK={class:"col-sm-12"},$K={class:"card card-light"},TK={class:"card-header"},EK={class:"card-title"},LK={class:"card-body",id:"drivers_index"};function AK(e,t,a,r,n,o){const m=v("alert"),p=v("data-table");return i(),d("div",FK,[u(m,{componentName:"dataTableModal"}),s("div",$K,[s("div",TK,[s("h3",EK,h(e.trans("search-drivers")),1)]),s("div",LK,[u(p,{url:n.apiUrl,dataColumns:n.columns,option:n.options,scroll_to:"drivers_index",componentTitle:"DriversIndex"},null,8,["url","dataColumns","option"])])])])}const IK=x(MK,[["render",AK]]),PK={name:"drivers-settings",description:"drivers settings configuration component",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driverId:"",fields:[],driverName:""}},beforeMount(){this.driverId=Ue(window.location.pathname),this.getData()},methods:{getData(){this.loading=!0,V.get("/api/get/search-driver-details/"+this.driverId).then(e=>{this.fields=e.data.data.formDetails,this.driverName=e.data.data.driverName,this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,this.fields=[],U(e,"driver_settings")})},onSubmit(){const e={};this.fields.forEach(t=>{e[t.key]=t.value}),e.driver=this.driverName,e.status=1,this.pageLoad=!0,V.post("api/post/search-driver",e).then(t=>{this.pageLoad=!1,K(t,"driver_settings"),setTimeout(()=>this.$router.push({name:"Drivers Index"}),3e3),this.$store.dispatch("unsetValidationError")}).catch(t=>{this.pageLoad=!1,U(t,"driver_settings")})}},components:{"form-field-template":ls}},OK={class:"col-sm-12"},qK={class:"card card-light"},xK={class:"card-header"},VK={class:"card-title"},NK={class:"card-body"},RK={key:0,class:"row"},UK={key:1,class:"row"},jK=["placeholder","name","onUpdate:modelValue"],BK={key:0,class:"card-footer"},YK=["disabled"];function HK(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("form-field-template");return i(),d("div",OK,[u(m,{componentName:"driver_settings"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",qK,[s("div",xK,[s("h3",VK,h(e.trans(n.driverName)),1)]),s("div",NK,[!n.hasDataPopulated||n.loading?(i(),d("div",RK,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?(i(),d("div",UK,[(i(!0),d(B,null,re(n.fields,(w,S)=>(i(),A(b,{label:e.trans(w.key),name:w.key,classname:"col-sm-6",required:!0},{default:T(()=>[P(s("input",{class:"form-control",placeholder:w.placeholder,name:w.key,type:"text","onUpdate:modelValue":C=>w.value=C},null,8,jK),[[ze,w.value]])]),_:2},1032,["label","name"]))),256))])):f("",!0)]),n.hasDataPopulated?(i(),d("div",BK,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...w)=>o.onSubmit&&o.onSubmit(...w)),disabled:n.pageLoad},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,YK)])):f("",!0)])])}const WK=x(PK,[["render",HK]]),zK={name:"SocketDriverRedis",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driver:"",connection:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=Ql(this.$data);return t},getData(){this.loading=!0,V.get("api/get/socket-driver/redis").then(e=>{this.driver=e.data.data.driver,this.loading=!1,this.hasDataPopulated=!0,this.fillFieldsInfo(e.data.data)}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,U(e,"SocketDriverRedis")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r])})},onSubmit(){this.isValid()&&(this.pageLoad=!0,V.post("api/post/socket-driver",{default:this.driver,connection_redis:this.connection}).then(e=>{this.pageLoad=!1,K(e,"SocketDriverRedis"),setTimeout(()=>this.$router.push({name:"WebSocket Settings"}),3e3)}).catch(e=>{this.pageLoad=!1,U(e,"SocketDriverRedis")}))},onChange(e,t){this[t]=e}},components:{"text-field":we}},GK={class:"col-sm-12"},KK={class:"card card-light"},JK={class:"card-header"},ZK={class:"card-title"},QK={class:"card-body"},XK={key:0,class:"row"},eJ={key:1,class:"row"},tJ={key:0,class:"card-footer"},aJ=["disabled"];function sJ(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("text-field"),w=H("focus-first-input");return i(),d("div",GK,[u(m,{componentName:"SocketDriverRedis"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",KK,[s("div",JK,[s("h3",ZK,h(e.trans("redis")),1)]),s("div",QK,[!n.hasDataPopulated||n.loading?(i(),d("div",XK,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?P((i(),d("div",eJ,[u(b,{label:e.trans("connection"),name:"connection",value:n.connection,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"default",hint:e.trans("redis_info")},null,8,["label","value","onChange","hint"])])),[[w]]):f("",!0)]),n.hasDataPopulated?(i(),d("div",tJ,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...S)=>o.onSubmit&&o.onSubmit(...S)),disabled:n.pageLoad},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,aJ)])):f("",!0)])])}const nJ=x(zK,[["render",sJ]]),oJ={name:"SocketDriversAbly",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,key:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=Xl(this.$data);return t},getData(){this.loading=!0,V.get("api/get/socket-driver/ably").then(e=>{this.driver=e.data.data.driver,this.fillFieldsInfo(e.data.data),this.loading=!1,this.hasDataPopulated=!0}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,U(e,"SocketDriversAbly")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r]===null?"":e[r])})},onSubmit(){if(this.isValid()){this.pageLoad=!0;let e={};e.default=this.driver,e.ably_key=this.key,V.post("api/post/socket-driver",e).then(t=>{this.pageLoad=!1,K(t,"SocketDriversAbly"),setTimeout(()=>this.$router.push({name:"WebSocket Settings"}),3e3)}).catch(t=>{this.pageLoad=!1,U(t,"SocketDriversAbly")})}},onChange(e,t){this[t]=e}},components:{"text-field":we}},iJ={class:"col-sm-12"},lJ={class:"card card-light"},rJ={class:"card-header"},dJ={class:"card-title"},cJ={class:"card-body"},uJ={key:0,class:"row"},mJ={key:1,class:"row"},hJ={key:0,class:"card-footer"},pJ=["disabled"];function _J(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("text-field"),w=H("focus-first-input");return i(),d("div",iJ,[u(m,{componentName:"SocketDriversAbly"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",lJ,[s("div",rJ,[s("h3",dJ,h(e.trans("Ably")),1)]),s("div",cJ,[!n.hasDataPopulated||n.loading?(i(),d("div",uJ,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?P((i(),d("div",mJ,[u(b,{id:"key",label:e.trans("ably_key"),type:"text",name:"key",value:n.key,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"id",hint:e.trans("ably_key_info")},null,8,["label","value","onChange","hint"])])),[[w]]):f("",!0)]),n.hasDataPopulated?(i(),d("div",hJ,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...S)=>o.onSubmit&&o.onSubmit(...S)),disabled:n.pageLoad},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,pJ)])):f("",!0)])])}const fJ=x(oJ,[["render",_J]]);function er(e){let{websocket_server_host:t,websocket_server_port:a,pusher_app_id:r,pusher_app_key:n,pusher_app_secret:o,pusher_app_cluster:m}=e,p={websocket_server_host:[t,"isRequired"],websocket_server_port:[a,"isRequired"],pusher_app_id:[r,"isRequired"],pusher_app_key:[n,"isRequired"],pusher_app_secret:[o,"isRequired"],pusher_app_cluster:[m,"isRequired"]};const g=new Le(N),{errors:b,isValid:w}=g.validate(p);return Ee.dispatch("setValidationError",b),{errors:b,isValid:w}}const gJ={name:"SocketDriversPusher",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driver:"",websocket_server_host:"",websocket_server_port:"",pusher_app_id:"",pusher_app_key:"",pusher_app_secret:"",pusher_app_cluster:"",ssl_crt_path:"",ssl_prvt_key:"",ssl_passphrase:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=er(this.$data);return t},getData(){this.loading=!0,V.get("api/get/socket-driver/pusher").then(e=>{this.driver=e.data.data.driver,this.loading=!1,this.hasDataPopulated=!0,this.fillFieldsInfo(e.data.data)}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,U(e,"pusher")})},fillFieldsInfo(e){const{driver:t,websocket_server_host:a,websocket_server_port:r,pusher_app_id:n,pusher_app_key:o,pusher_app_secret:m,pusher_app_cluster:p,ssl_crt_path:g,ssl_prvt_key:b,ssl_passphrase:w}=e;this.driver=t,this.websocket_server_host=a,this.websocket_server_port=r,this.pusher_app_id=n,this.pusher_app_key=o,this.pusher_app_secret=m,this.pusher_app_cluster=p,this.ssl_crt_path=g,this.ssl_prvt_key=b,this.ssl_passphrase=w},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={default:this.driver,websocket_server_host:this.websocket_server_host,websocket_server_port:this.websocket_server_port,pusher_app_id:this.pusher_app_id,pusher_app_key:this.pusher_app_key,pusher_app_secret:this.pusher_app_secret,pusher_app_cluster:this.pusher_app_cluster,ssl_crt_path:this.ssl_crt_path,ssl_prvt_key:this.ssl_prvt_key,scheme:"https"},t={ssl_passphrase:this.ssl_passphrase};for(const[a,r]of Object.entries(t))r!==""&&(e[a]=r);V.post("api/post/socket-driver",e).then(a=>{this.pageLoad=!1,K(a,"pusher"),setTimeout(()=>this.$router.push({name:"WebSocket Settings"}),3e3)}).catch(a=>{this.pageLoad=!1,U(a,"pusher")})}},onChange(e,t){this[t]=e}},components:{"text-field":we}},vJ={class:"col-sm-12"},bJ={class:"card card-light"},yJ={class:"card-header"},kJ={class:"card-title"},wJ={class:"card-body"},CJ={key:0,class:"row"},DJ={key:1,class:"row"},SJ={key:0,class:"card-footer"},MJ=["disabled"];function FJ(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("text-field"),w=H("focus-first-input");return i(),d("div",vJ,[u(m,{componentName:"pusher"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",bJ,[s("div",yJ,[s("h3",kJ,h(e.trans("Pusher")),1)]),s("div",wJ,[!n.hasDataPopulated||n.loading?(i(),d("div",CJ,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?P((i(),d("div",DJ,[u(b,{label:e.trans("websocket_server_host"),type:"text",name:"websocket_server_host",value:n.websocket_server_host,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"127.0.0.1",hint:e.trans("pusher_host")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("websocket_server_port"),type:"text",name:"websocket_server_port",value:n.websocket_server_port,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("pusher_port")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("pusher_app_id"),type:"text",name:"pusher_app_id",value:n.pusher_app_id,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("pusher_app_id_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("pusher_app_key"),type:"text",name:"pusher_app_key",value:n.pusher_app_key,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("pusher_app_key_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("pusher_app_secret"),type:"text",name:"pusher_app_secret",value:n.pusher_app_secret,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("pusher_app_secret_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("pusher_app_cluster"),type:"text",name:"pusher_app_cluster",value:n.pusher_app_cluster,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("pusher_app_cluster_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("ssl_crt_path"),type:"text",name:"ssl_crt_path",value:n.ssl_crt_path,classname:"col-sm-6",onChange:o.onChange,placehold:"",hint:e.trans("ssl_crt_path_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("ssl_prvt_key"),type:"text",name:"ssl_prvt_key",value:n.ssl_prvt_key,classname:"col-sm-6",onChange:o.onChange,placehold:"",hint:e.trans("ssl_prvt_key_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("ssl_passphrase"),type:"text",name:"ssl_passphrase",value:n.ssl_passphrase,classname:"col-sm-6",onChange:o.onChange,required:!1,placehold:"",hint:e.trans("ssl_passphrase_info")},null,8,["label","value","onChange","hint"])])),[[w]]):f("",!0)]),n.hasDataPopulated?(i(),d("div",SJ,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...S)=>o.onSubmit&&o.onSubmit(...S)),disabled:n.pageLoad},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,MJ)])):f("",!0)])])}const $J=x(gJ,[["render",FJ]]),TJ={name:"SocketDriversReverb",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,driver:"",reverb_server_host:"",reverb_server_port:"",reverb_app_id:"",reverb_app_key:"",reverb_app_secret:"",reverb_port:"",reverb_host:"",ssl_crt_path:"",ssl_prvt_key:"",ssl_passphrase:""}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=er(this.$data);return t},getData(){this.loading=!0,V.get("api/get/socket-driver/reverb").then(e=>{this.driver=e.data.data.driver,this.loading=!1,this.hasDataPopulated=!0,this.fillFieldsInfo(e.data.data)}).catch(e=>{this.hasDataPopulated=!0,this.loading=!1,U(e,"reverb")})},fillFieldsInfo(e){const{driver:t,reverb_server_host:a,reverb_server_port:r,reverb_host:n,reverb_port:o,reverb_app_id:m,reverb_app_key:p,reverb_app_secret:g,ssl_crt_path:b,ssl_prvt_key:w,ssl_passphrase:S}=e;this.driver=t,this.reverb_server_host=a,this.reverb_server_port=r,this.reverb_host=n,this.reverb_port=o,this.reverb_app_id=m,this.reverb_app_key=p,this.reverb_app_secret=g,this.ssl_crt_path=b,this.ssl_prvt_key=w,this.ssl_passphrase=S},onSubmit(){if(this.isValid()){this.pageLoad=!0;const e={default:this.driver,reverb_server_host:this.reverb_server_host,reverb_server_port:this.reverb_server_port,reverb_host:this.reverb_host,reverb_port:this.reverb_port,reverb_app_id:this.reverb_app_id,reverb_app_key:this.reverb_app_key,reverb_app_secret:this.reverb_app_secret,ssl_crt_path:this.ssl_crt_path,ssl_prvt_key:this.ssl_prvt_key,scheme:"https"},t={ssl_passphrase:this.ssl_passphrase};for(const[a,r]of Object.entries(t))r!==""&&(e[a]=r);V.post("api/post/socket-driver",e).then(a=>{this.pageLoad=!1,K(a,"reverb"),setTimeout(()=>this.$router.push({name:"WebSocket Settings"}),3e3)}).catch(a=>{this.pageLoad=!1,U(a,"reverb")})}},onChange(e,t){this[t]=e}},components:{"text-field":we}},EJ={class:"col-sm-12"},LJ={class:"card card-light"},AJ={class:"card-header"},IJ={class:"card-title"},PJ={class:"card-body"},OJ={key:0,class:"row"},qJ={key:1,class:"row"},xJ={key:0,class:"card-footer"},VJ=["disabled"];function NJ(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("text-field"),w=H("focus-first-input");return i(),d("div",EJ,[u(m,{componentName:"reverb"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",LJ,[s("div",AJ,[s("h3",IJ,h(e.trans("Reverb")),1)]),s("div",PJ,[!n.hasDataPopulated||n.loading?(i(),d("div",OJ,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?P((i(),d("div",qJ,[u(b,{label:e.trans("reverb_server_host"),type:"text",name:"reverb_server_host",value:n.reverb_server_host,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"127.0.0.1",hint:e.trans("reverb_server_host_hint")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("reverb_server_port"),type:"text",name:"reverb_server_port",value:n.reverb_server_port,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("reverb_server_port_hint")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("reverb_host"),type:"text",name:"reverb_host",value:n.reverb_host,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"127.0.0.1",hint:e.trans("reverb_host_hint")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("reverb_port"),type:"text",name:"reverb_port",value:n.reverb_port,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("reverb_port_hint")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("reverb_app_id"),type:"text",name:"reverb_app_id",value:n.reverb_app_id,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("reverb_app_id_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("reverb_app_key"),type:"text",name:"reverb_app_key",value:n.reverb_app_key,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("reverb_app_key_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("reverb_app_secret"),type:"text",name:"reverb_app_secret",value:n.reverb_app_secret,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"",hint:e.trans("reverb_app_secret_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("ssl_crt_path"),type:"text",name:"ssl_crt_path",value:n.ssl_crt_path,classname:"col-sm-6",onChange:o.onChange,placehold:"",hint:e.trans("ssl_crt_path_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("ssl_prvt_key"),type:"text",name:"ssl_prvt_key",value:n.ssl_prvt_key,classname:"col-sm-6",onChange:o.onChange,placehold:"",hint:e.trans("ssl_prvt_key_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.trans("ssl_passphrase"),type:"text",name:"ssl_passphrase",value:n.ssl_passphrase,classname:"col-sm-6",onChange:o.onChange,required:!1,placehold:"",hint:e.trans("ssl_passphrase_info")},null,8,["label","value","onChange","hint"])])),[[w]]):f("",!0)]),n.hasDataPopulated?(i(),d("div",xJ,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...S)=>o.onSubmit&&o.onSubmit(...S)),disabled:n.pageLoad},[t[1]||(t[1]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,VJ)])):f("",!0)])])}const RJ=x(TJ,[["render",NJ]]);const UJ={id:"tokens-index",class:"col-sm-12"},jJ={class:"card-tools"},BJ="/get-api-applications",YJ={__name:"TokensIndex",setup(e){const{basePath:t}=ut.methods,a=Me(),r=O(["name","author","expiry_token","actions"]),n=O({});return Je(()=>{n.value={headings:{name:N("name"),author:N("author"),expiry_token:N("expiration_date"),actions:N("actions")},columnsClasses:{name:"token-name",author:"token-author",expiry_token:"token-expiry",actions:"token-actions"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{actions:(o,m)=>tt(Ye,{data:m}),author:(o,m)=>tt("a",{href:t()+"/panel/user/"+m.author.id},m.author.full_name),expiry_token:(o,m)=>m.expiry_token==="never"?"Never":a.getters.formattedTime(m.expiry_token)},sortable:["name"],filterable:["name"],pagination:{chunk:5,nav:"scroll"},requestAdapter(o){return{"sort-field":o.orderBy?o.orderBy:"id","sort-order":o.ascending?"desc":"asc","search-query":o.query.trim(),page:o.page,limit:o.limit}},responseAdapter({data:o}){return{data:o.data.data.map(m=>(m.edit_url="/personal-access-token/"+m.id+"/edit",m.delete_url=t()+"/delete-api-application/"+m.id,m.deleteMessage="are_you_sure_you_want_to_delete",m)),count:o.data.total}},orderBy:{column:"id",ascending:!0}}}),(o,m)=>{const p=v("router-link"),g=H("tooltip");return i(),d("div",UJ,[u(ct,{"component-name":"dataTableModal"}),u(Bt,{title:o.trans("lists_of_personal_access_tokens")},{customActions:T(()=>[s("div",jJ,[P((i(),A(p,{class:"btn btn-tool pointer-cursor",to:"/personal-access-token/create"},{default:T(()=>m[0]||(m[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[g,o.trans("create_personal_access_token")]])])]),default:T(()=>[u(La,{url:BJ,dataColumns:r.value,option:n.value,scroll_to:"tokens-index"},null,8,["dataColumns","option"])]),_:1},8,["title"])])}}};function HJ(e){const{name:t,expiry:a,start_date:r,end_date:n}=e;let o={name:[t,"isRequired"],expiry:[a,"isRequired"]};e.expiry==="custom"&&(o.end_date=[n,"isRequired"]);const m=new Le(N),{errors:p,isValid:g}=m.validate(o);return Ee.dispatch("setValidationError",p),{errors:p,isValid:g}}function WJ(e){const{expiry:t,end_date:a}=e;let r={expiry:[t,"isRequired"]};e.expiry==="custom"&&(r.end_date=[a,"isRequired"]);const n=new Le(N),{errors:o,isValid:m}=n.validate(r);return Ee.dispatch("setValidationError",o),{errors:o,isValid:m}}const zJ={class:"col-sm-12"},GJ={key:0,class:"row"},KJ={class:"row"},JJ={key:0,class:"col-sm-4 mt-4"},ZJ={key:0,class:"re-token"},QJ={class:"row mt-2"},XJ={class:"col-sm-3"},eZ={class:"form-group"},tZ={class:"custom-control custom-radio"},aZ={for:"full_access",class:"custom-control-label p-2"},sZ={class:"col-sm-3"},nZ={class:"form-group"},oZ={class:"custom-control custom-radio"},iZ={for:"restricted-access",class:"custom-control-label p-2"},lZ={class:"card-tools"},rZ={class:"form-check"},dZ={class:"form-check-label",for:"select-all"},cZ={class:"row"},uZ={id:"permission-list-box"},mZ={class:"card-footer justify-content-end"},hZ={class:"modal-title"},pZ={key:0,class:"row"},_Z={key:1,class:"row"},fZ=["disabled"],gZ={class:"modal-title"},vZ={class:"row"},bZ={class:"col-sm-12"},yZ={class:"input-group mb-3"},kZ=["value"],wZ=["disabled"],CZ={__name:"TokenForm",setup(e){const t=ft(),a=wt(),r=Me(),n=O(!1),o=O(!1),m=O(!1);let p=O("");const g=O(!1),b=O(!1),w=O(!1);let S=O({name:"",expiry:"",end_date:"",full_access:1});const C=O(""),M=O(""),D=O([]);let F=new Date;const I=O(!1),R=O(!1),Y=O(!1),X=O({width:"600px"}),le=O(!1);Je(()=>{j(),ne(),window.emitter.on("selected-permission-list",z=>{M.value=z.permissions,le.value=z.all_selected})});const ne=()=>{V.get("/get/application-expiry").then(z=>{p.value=z.data.data}).catch(z=>{U(z,"token-form")})},ce=()=>{m.value=!0,V.get("/get-api-application-id/"+t.params.id).then(z=>{C.value=z.data.data,S.value.name=C.value.name,S.value.expiry=C.value.expiry_id,S.value.expiry==="custom"&&(g.value=!0,S.value.end_date=C.value.end_date),S.value.full_access=C.value.full_access;let ie=0,Z;C.value.permission.forEach(function(De,Mt,Nt){ie++,(De.key==="global_access"||De.key==="restricted_access")&&(Z=De.key),ge(!0,De.key),ie===Nt.length&&Z&&ke(!0,Z)}),w.value=!!C.value.all_permission_selected,le.value=!!C.value.all_sd_permission_selected,Pe(C.value.permission),o.value=!0,m.value=!1}).catch(z=>{U(z,"token-form")})},Q=(z,ie)=>{S.value[ie]=z,ie==="expiry"&&(z==="custom"?g.value=!0:(g.value=!1,S.value.end_date=""))},j=()=>{V.get("api/dependency/permissions?limit=all",{}).then(z=>{D.value=Fm(z.data.data),ye(),t.name==="personal_access_token.edit"?(n.value=!0,ce()):(o.value=!0,m.value=!1)}).catch(z=>{U(z,"token-form")})},ye=()=>{D.value.forEach(function(z){z.checked=!1,z.disabled=!1,z.title="",z.key==="global_access"?z.title="Restricted access will be disabled if global access is checked.":z.key==="restricted_access"?z.title="Global access will be disabled if restricted access is checked.":z.key==="edit_articles_created_by_others"&&(z.disabled=!0)})},Pe=z=>{window.emitter.emit("permission-list-box-mounted",{data:z,all_sd_permission_selected:le.value})},ge=(z,ie)=>{z||(w.value=!1),D.value.forEach(function(Z){if(Z.key===ie){Z.checked=z;return}ke(z,ie)})},ke=(z,ie)=>{S.value.full_access||setTimeout(()=>{if(ie==="global_access"||ie==="restricted_access"){let Z=ie==="global_access"?"restricted_access":"global_access";D.value.find(De=>De.key===ie).checked&&D.value.find(De=>De.key===Z).checked&&(D.value.find(De=>De.key===Z).checked=!1,D.value.find(De=>De.key===Z).disabled=!0),document.getElementById(Z).checked=!1,document.getElementById(Z).disabled=z,document.getElementById("view_all_tickets").checked=!1,document.getElementById("view_all_tickets").disabled=z}else ie==="access_kb"&&(D.value.find(Z=>Z.key==="access_kb").checked?document.getElementById("edit_articles_created_by_others").disabled=!1:(document.getElementById("edit_articles_created_by_others").disabled=!0,document.getElementById("edit_articles_created_by_others").checked=!1))},500)},ue=()=>{const{errors:z,isValid:ie}=HJ(S.value);return ie},he=()=>{if(ue()){m.value=!0;let z={};if(z.name=S.value.name,z.expiry=S.value.expiry,S.value.expiry==="custom"&&(z.end_date=is(S.value.end_date).format("YYYY-MM-DD HH:mm:ss")),z.full_access=S.value.full_access,S.value.full_access?z.permission=[]:(z.permission=D.value.filter(ie=>ie.checked).map(ie=>ie.key),z.all_permission_selected=w.value,M.value&&(z.all_sd_permission_selected=le.value,z.permission=z.permission.concat(M.value))),t.name==="personal_access_token.edit"&&(z.id=t.params.id),!S.value.full_access&&!z.permission.length){m.value=!1,r.dispatch("setAlert",{type:"danger",message:"Permissions are required",component_name:"token-form"});return}V.post("/post-api-application",z).then(ie=>{m.value=!1,ie.data.data&&ie.data.data.access_token?(pe.value=ie.data.data.access_token,J.value=!0,K(ie,"token-modal-form")):K(ie,"token-form")}).catch(ie=>{U(ie,"token-form"),m.value=!1})}},ve=()=>{xt(pe.value),b.value=!0,setTimeout(()=>{b.value=!1,J.value=!1,t.name==="personal_access_token.edit"?ce():a.push({name:"personal_access_token.index"})},3e3)},ee=()=>{w.value?D.value.forEach(function(z){z.key!=="restricted_access"&&(z.checked=!0),ke(!0,"global_access")}):ye()},te=()=>{(!n.value||C.value&&!C.value.permission.length)&&(w.value=!1,ye(),M.value="")},Ce=()=>{I.value=!1},be=()=>{const{errors:z,isValid:ie}=WJ(S.value);return ie},Ne=()=>{if(be()){R.value=!0;let z={};if(z.expiry=S.value.expiry,S.value.expiry==="custom"&&(z.end_date=is(S.value.end_date).format("YYYY-MM-DD HH:mm:ss")),z.full_access=S.value.full_access,S.value.full_access?z.permission=[]:(z.permission=D.value.filter(ie=>ie.checked).map(ie=>ie.key),z.all_permission_selected=w.value,M.value&&(z.all_sd_permission_selected=le.value,z.permission=z.permission.concat(M.value))),t.name==="personal_access_token.edit"&&(z.id=t.params.id),!S.value.full_access&&!z.permission.length){R.value=!1,r.dispatch("setAlert",{type:"danger",message:"Permissions are required",component_name:"token-form"}),Ce();return}V.post("application/regenerate-token",z).then(ie=>{R.value=!1,Ce(),ie.data.data&&ie.data.data.access_token?(pe.value=ie.data.data.access_token,J.value=!0,K(ie,"token-modal-form")):K(ie,"token-form")}).catch(ie=>{U(ie,"token-form"),R.value=!1,Ce()})}},J=O(!1),pe=O("");return(z,ie)=>{const Z=H("focus-first-input");return i(),d("div",zJ,[!o.value||m.value?(i(),d("div",GJ,[u(ga)])):f("",!0),u(ct,{"component-name":"token-form"}),o.value?(i(),A(Bt,{key:1,title:n.value?z.trans("edit"):z.trans("create")},{actions:T(()=>[s("div",mZ,[s("button",{type:"button",class:"btn btn-primary",onClick:he},[s("i",{class:G(n.value?"fas fa-sync-alt":"fas fa-save")},null,2),L(" "+h(n.value?z.trans("update"):z.trans("save")),1)])])]),default:T(()=>[P((i(),d("div",KJ,[u(we,{name:"name",value:ae(S).name,label:z.trans("application_name"),classname:n.value?"col-sm-4":"col-sm-6",onChange:Q,required:!0},null,8,["value","label","classname"]),n.value?(i(),d("div",JJ,[n.value?(i(),d("span",ZJ,[L(h(z.trans("to-set-new-expiration-date-you-must"))+" ",1),s("a",{href:"javascript:;",onClick:ie[0]||(ie[0]=De=>I.value=!0)},h(z.trans("regenerate-the-token"))+".",1)])):f("",!0)])):f("",!0),n.value?f("",!0):(i(),d(B,{key:1},[u(it,{label:z.trans("expiry_date"),elements:ae(p),name:"expiry",value:ae(S).expiry,classname:g.value?"col-sm-3":"col-sm-6",onChange:Q,required:!0},null,8,["label","elements","value","classname"]),g.value?(i(),A(Dt,{key:0,label:z.trans("end_date"),value:ae(S).end_date,required:!0,name:"end_date",type:"date",onChange:Q,format:"DD-MM-YYYY",classname:"col-sm-3","not-before":ae(F),exactDisabledDate:!0},null,8,["label","value","not-before"])):f("",!0)],64))])),[[Z]]),s("div",QJ,[s("div",XJ,[s("div",eZ,[s("div",tZ,[P(s("input",{"onUpdate:modelValue":ie[1]||(ie[1]=De=>ae(S).full_access=De),class:"custom-control-input custom-control-input-primary custom-control-input-outline",type:"radio",id:"full_access",value:1,name:"full_access",onChange:te},null,544),[[Ws,ae(S).full_access]]),s("label",aZ,h(z.trans("full_access")),1)])])]),s("div",sZ,[s("div",nZ,[s("div",oZ,[P(s("input",{"onUpdate:modelValue":ie[2]||(ie[2]=De=>ae(S).full_access=De),class:"custom-control-input custom-control-input-primary custom-control-input-outline",type:"radio",id:"restricted-access",value:0,name:"restricted-access",onChange:te},null,544),[[Ws,ae(S).full_access]]),s("label",iZ,h(z.trans("restricted_access")),1)])])])]),ae(S).full_access?f("",!0):(i(),d(B,{key:0},[u(Bt,{title:z.trans("access-permissions"),boxClass:"card-light"},{customActions:T(()=>[s("div",lZ,[s("div",rZ,[P(s("input",{type:"checkbox",class:"form-check-input",id:"select-all","onUpdate:modelValue":ie[3]||(ie[3]=De=>w.value=De),onChange:ee},null,544),[[Ve,w.value]]),s("label",dZ,h(z.trans("select_all")),1)])])]),default:T(()=>[s("div",cZ,[(i(!0),d(B,null,re(D.value,De=>(i(),d("div",{class:"col-sm-4",id:"assign_groups",key:De.id},[u(Qt,{name:De.key,value:De.checked,disabled:De.disabled,label:De.key,title:De.name,onChange:ge,id:De.key},null,8,["name","value","disabled","label","title","id"])]))),128))])]),_:1},8,["title"]),s("div",uZ,h(Pe(C.value&&C.value.permission?C.value.permission:[])),1)],64))]),_:1},8,["title"])):f("",!0),I.value?(i(),A(_t,{key:2,"show-modal":I.value,onClose:Ce,containerStyle:X.value},{title:T(()=>[s("h4",hZ,h(z.trans("regenerate-token")),1)]),fields:T(()=>[R.value?f("",!0):(i(),d("div",pZ,[u(it,{label:z.trans("expiry_date"),elements:ae(p),name:"expiry",value:ae(S).expiry,classname:g.value?"col-sm-6":"col-sm-12",onChange:Q,required:!0},null,8,["label","elements","value","classname"]),g.value?(i(),A(Dt,{key:0,label:z.trans("end_date"),value:ae(S).end_date,required:!0,name:"end_date",type:"date",onChange:Q,format:"DD-MM-YYYY",classname:"col-sm-6","not-before":ae(F),exactDisabledDate:!0},null,8,["label","value","not-before"])):f("",!0)])),R.value?(i(),d("div",_Z,[u(Zt)])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:Ne,class:"btn btn-primary",disabled:Y.value},[ie[4]||(ie[4]=s("i",{class:"fas fa-sync-alt"},null,-1)),L(" "+h(z.trans("update")),1)],8,fZ)]),_:1},8,["show-modal","containerStyle"])):f("",!0),J.value?(i(),A(_t,{key:3,"show-modal":J.value,showCloseBtn:!1,containerStyle:X.value},{title:T(()=>[s("h4",gZ,h(z.trans("access_token")),1)]),alert:T(()=>[u(ct,{"component-name":"token-modal-form"})]),fields:T(()=>[s("div",vZ,[s("div",bZ,[s("div",yZ,[s("input",{type:"password",class:"form-control",value:pe.value,disabled:""},null,8,kZ)])])])]),controls:T(()=>[s("button",{type:"button",onClick:ve,class:"btn btn-primary",disabled:b.value},[s("i",{class:G(b.value?"fas fa-check":"fa fa-clipboard")},null,2),L(" "+h(b.value?z.trans("clipboard-copy-message"):z.trans("copy")),1)],8,wZ)]),_:1},8,["show-modal","containerStyle"])):f("",!0)])}}},ri=x(CZ,[["__scopeId","data-v-f178db54"]]);function DZ(e){let t={name:[e.name,"isRequired"]};const a=new Le(N),{errors:r,isValid:n}=a.validate(t);return Ee.dispatch("setValidationError",r),{errors:r,isValid:n}}const SZ={class:"form-table-actions"},MZ=["disabled"],FZ={__name:"FormTableActions",props:{data:{type:Object,required:!0},onUpdate:{type:Function,default:()=>{}},onClone:{type:Function,default:()=>{}}},setup(e){const t=Me(),a=e,r=O(!1),n=()=>{r.value=!a.data.is_default},o=()=>{r.value=!1,t.dispatch("unsetValidationError")},m=()=>{a.onUpdate(a.data)},p=()=>{a.onClone(a.data)};return(g,b)=>{const w=v("router-link"),S=H("tooltip");return i(),d("div",SZ,[e.data.view_api?P((i(),A(w,{key:0,class:"btn btn-light table_btn",to:"/new/forms/"+e.data.category+"/"+e.data.id+"/edit"},{default:T(()=>b[0]||(b[0]=[s("i",{class:"fas fa-edit"},null,-1)])),_:1},8,["to"])),[[S,g.trans("edit")]]):f("",!0),e.data.update_api?P((i(),d("button",{key:1,type:"button",class:"btn btn-light table_btn",onClick:m},b[1]||(b[1]=[s("i",{class:"fas fa-cog"},null,-1)]))),[[S,g.trans("settings")]]):f("",!0),e.data.clone_api?P((i(),d("button",{key:2,type:"button",class:"btn btn-light table_btn",onClick:p},b[2]||(b[2]=[s("i",{class:"far fa-clone"},null,-1)]))),[[S,g.trans("clone")]]):f("",!0),P((i(),d("span",null,[e.data.delete_api?(i(),d("button",{key:0,class:"btn btn-light table_btn",onClick:n,disabled:e.data.is_default},b[3]||(b[3]=[s("i",{class:"fas fa-trash"},null,-1)]),8,MZ)):f("",!0)])),[[S,e.data.is_default?g.trans("default_form_is_not_deletable"):g.trans("delete")]]),u(Ae,{name:"modal"},{default:T(()=>[r.value?(i(),A(Om,{key:0,onClose:o,showModal:r.value,deleteUrl:e.data.delete_api,alertComponentName:"form-builder-index","modal-message":"are_you_sure_you_want_to_delete",replace:!0,"replace-endpoint":"/from/forms/"+e.data.category+"?&ids[0]="+e.data.id,title:"assign_to_form"},null,8,["showModal","deleteUrl","replace-endpoint"])):f("",!0)]),_:1})])}}};const $Z={class:"col-sm-12"},TZ={class:"card card-light"},EZ={class:"card-header"},LZ={class:"card-title"},AZ={class:"card-tools"},IZ={class:"card-body",id:"forms-list"},PZ={class:"modal-title"},OZ={key:0,class:"row"},qZ={key:0,class:"form-check col-sm-12 ms-md-2 mb-3"},xZ={class:"form-check-label",for:"is_user_form"},VZ={key:1,class:"row"},NZ=["disabled"],RZ={__name:"FormsIndex",setup(e){const t=Me(),a=ft(),r=wt(),n=O("/ticket/forms/"+a.params.type),o=O(["name","is_active","created_at","actions"]),m=O({}),p=O(!1);Je(()=>{t.dispatch("updateCloneableFormData",""),m.value={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},columnsClasses:{title:"form-name",created_at:"form-created",is_active:"form-active",actions:"form-actions"},headings:{is_active:N("status")},texts:{filter:"",limit:""},sortable:["name","created_at","is_active"],filterable:["name","created_at","is_active"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(ge){return{paginate:1,"sort-field":ge.orderBy?ge.orderBy:"id","sort-order":ge.ascending?"asc":"desc","search-query":ge.query.trim(),page:ge.page,limit:ge.limit}},responseAdapter({data:ge}){return p.value=!!ge.data.show_org,{data:ge.data.data.map(ke=>(ke.edit_url="/new/forms/"+ke.category+"/edit",ke.componentTitle="dataTableTittle",ke.alertComponentName="form-builder-index",ke)),count:ge.data.total}},orderBy:{column:"id",ascending:!0},templates:{name:(ge,ke)=>tt(Hs,{to:"/new/forms/"+ke.category+"/"+ke.id+"/edit"},ke.name),created_at:(ge,ke)=>t.getters.formattedTime(ke.created_at),is_active:(ge,ke)=>{let ue=tt("span",{style:"cursor:auto",class:ke.is_active?"btn btn-success btn-sm":"btn btn-danger btn-sm"},ke.is_active?"Active":"Inactive");return tt("a",{},[ue])},actions:(ge,ke)=>tt(FZ,{data:ke,onUpdate:M,onClone:C})}}});const g=O(!1),b=O(""),w=O(!1),S=O(""),C=ge=>{D.value=!0,F.name="Copy of "+ge.name,F.is_user_form=ge.is_user_form,w.value=!0,S.value=ge},M=ge=>{D.value=!0,F.name=ge.name,F.organizations=ge.organizations,F.is_user_form=ge.is_user_form,g.value=!0,b.value=ge},D=O(!1),F=zs({name:"",organizations:[],is_user_form:!1}),I=O(!1),R=O(!1),Y=function(ge,ke){F[ke]=ge},X=()=>{t.dispatch("unsetValidationError"),D.value=!1,F.name="",F.organizations=[],F.is_user_form=!1,R.value=!1,g.value=!1,b.value="",w.value=!1,S.value=""},le=()=>{const{errors:ge,isValid:ke}=DZ(F);return ke},ne=()=>{if(le()){I.value=!0,R.value=!0;let ge={};ge.name=F.name,g.value&&(ge.id=b.value.id),w.value&&(ge.id=S.value.id),F.organizations&&F.organizations.length&&(ge.org_ids=F.organizations.map(ue=>ue.id)),Pe.value&&(ge.is_user_form=F.is_user_form);let ke=g.value?"/"+b.value.update_api:w.value?"/clone-forms":"/add/custom/form/"+a.params.type;V.post(ke,ge).then(ue=>{I.value=!1,w.value||K(ue,"form-builder-index"),g.value?window.emitter.emit("refreshData"):r.push({path:`/new/forms/${ue.data.data.category}/${ue.data.data.id}/edit`}),w.value&&t.dispatch("updateCloneableFormData",S.value),X()}).catch(ue=>{I.value=!1,R.value=!1,U(ue,"form-builder-index")})}},ce=me(()=>g.value?"edit_form":w.value?"clone_form":"create_new_form_category"),Q=me(()=>g.value?"update":w.value?"clone":"save"),j=me(()=>g.value?"fas fa-sync-alt":w.value?"far fa-clone":"fas fa-save"),ye=me(()=>p.value?!g.value&&!w.value?!0:w.value?!1:!!(g.value&&!b.value.is_default):!1),Pe=me(()=>a.params.type==="ticket"?!g.value&&!w.value||w.value&&!S.value.is_default?!0:!!(g.value&&!b.value.is_default):!1);return(ge,ke)=>{const ue=H("tooltip"),he=H("focus-first-input");return i(),d("div",$Z,[u(ct,{"component-name":"form-builder-index"}),s("div",TZ,[s("div",EZ,[s("h3",LZ,h(ge.trans("list_of_form_categories")),1),s("div",AZ,[P((i(),d("a",{href:"javascript:;",class:"btn-tool",onClick:ke[0]||(ke[0]=ve=>D.value=!0)},ke[4]||(ke[4]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)]))),[[ue,{content:ge.trans("create_form"),placement:"left"}]])])]),s("div",IZ,[u(La,{url:n.value,"data-columns":o.value,option:m.value,scroll_to:"forms-list"},null,8,["url","data-columns","option"])])]),D.value?(i(),A(_t,{key:0,showModal:D.value,onClose:X},{title:T(()=>[s("h4",PZ,h(ge.trans(ce.value)),1)]),fields:T(()=>[I.value?f("",!0):P((i(),d("div",OZ,[u(we,{label:ge.trans("name"),value:F.name,type:"text",name:"name",hint:ge.trans("special_characters_are_not_supported"),onChange:Y,required:!0,classname:"col-sm-12",onKeyup:ke[1]||(ke[1]=_a(ve=>ne(),["enter"]))},null,8,["label","value","hint"]),Pe.value?(i(),d("div",qZ,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":ke[2]||(ke[2]=ve=>F.is_user_form=ve),id:"is_user_form"},null,512),[[Ve,F.is_user_form]]),s("label",xZ,h(ge.trans("enable_user_form")),1)])):f("",!0),ye.value&&F.is_user_form?(i(),A(Be,{key:1,label:ge.trans("organizations"),multiple:!0,name:"organizations",prePopulate:!0,classname:"col-sm-12",apiEndpoint:"/api/dependency/organizations",value:F.organizations,onChange:Y},null,8,["label","value"])):f("",!0)])),[[he]]),I.value?(i(),d("div",VZ,[u(Zt)])):f("",!0)]),controls:T(()=>[s("button",{type:"button",onClick:ke[3]||(ke[3]=ve=>ne()),class:"btn btn-primary",disabled:R.value},[s("i",{class:G(j.value),"aria-hidden":"true"},null,2),L(" "+h(ge.trans(Q.value)),1)],8,NZ)]),_:1},8,["showModal"])):f("",!0)])}}};const UZ={class:"menu mt-3"},jZ={key:0,class:"overlay"},BZ={key:1,class:"info-box-icon menu-icon"},YZ={class:"info-box-content"},HZ={class:"info-box-text"},WZ={class:"badge badge-count p-1"},zZ={key:0,class:"overlay"},GZ={class:"info-box-content"},KZ={class:"info-box-text"},JZ={class:"badge badge-count p-1"},ZZ={key:1,class:"text-center"},QZ={class:"info-box-content"},XZ={class:"info-box-text"},eQ={key:1,class:"search-container"},tQ=["innerHTML"],aQ={class:"text-capitalize"},sQ={class:"badge badge-count p-1 mb-1"},nQ={key:0,class:"overlay"},oQ={class:"info-box-content text-center"},iQ={class:"info-box-text"},lQ={key:3},rQ={__name:"Menu",props:{type:{type:String,default:"fields"},from:{type:String,default:""},isDefaultForm:{type:Boolean,default:!1}},setup(e){const t=Me();wt();const a=ft(),r=e,n=t.getters.getFormMenus;t.getters.getFormCategoryType;const o=O(window.innerWidth);window.addEventListener("resize",()=>{o.value=window.innerWidth});const m=me(()=>n.filter(ee=>ee.data_type==="section")),p=me(()=>n.filter(ee=>ee.data_type!=="section")),g=ee=>{let te=JSON.parse(JSON.stringify(ee));const Ce=b();return te.data_type==="group"?te.groupid=Ce:te.id=Ce,te.form_identifier=Ce,te},b=()=>new Date().getTime(),w=O(""),S=O(!1),C=O([]);let M=1;const D=O(!1);let F=!0;const I=O([]),R=O(!1),Y=()=>{if(r.isDefaultForm)return;let ee={id:a.params.id};R.value=!0,V.get("/default/form-fields/"+a.params.type+"?time="+Date.now(),{params:ee}).then(te=>{I.value=te.data.data}).catch(te=>{console.error("Error in getting default fields list ",te)}).finally(()=>{R.value=!1})},X=()=>{R.value=!0,I.value=[],setTimeout(()=>{Y()},1e3)},le=async()=>{try{S.value=!0;const ee=await V.get(`/get/shared-fields/ticket?page=${M}`,{params:{id:a.params.id}});ee.data.data.length>0?(C.value=[...C.value,...ee.data.data],M++):F=!1}catch(ee){console.error("Error fetching data:",ee)}finally{S.value=!1}};r.type==="shared_fields"&&le(),r.type==="default_fields"&&Y();const ne=me(()=>C.value.filter(ee=>ee.label.toLowerCase().includes(w.value.toLowerCase()))),ce=me(()=>ne.value.reduce((ee,te)=>(ee[te.data_type]||(ee[te.data_type]=[]),ee[te.data_type].push(te),ee),{})),Q=()=>{const ee=document.getElementById("card-container"),te=ee.scrollHeight,Ce=ee.scrollTop,be=ee.clientHeight;Ce+be>=te-100&&!D.value&&F&&le()},j=ee=>ee==="section"?{name:"faveo-form-sections",pull:"clone",put:!1}:{name:"faveo-form-builder",pull:"clone",put:!1};function ye(ee){if(ee.to!=ee.from){let te=n.find(Ce=>Ce.id===ee.item.__draggable_context.element.id);te&&(te.count-=1,window.emitter.emit("formBuilderModified"))}}function Pe(ee){let te=n.find(Ce=>Ce.id===ee.id);te&&(te.count-=1,window.emitter.emit("formBuilderModified"))}const ge=(ee,te)=>{let Ce=ee.title==="Api"?C.value.find(be=>be.title===ee.title):C.value.find(be=>be.data_type===ee.data_type);Ce&&(Ce.count+=1,Ce.count&&(Ce.disabled=!1),te==="local"&&window.emitter.emit("formBuilderModified")),ee.form_fields&&typeof ee.form_fields=="object"?Object.keys(ee.form_fields).forEach(be=>{const Ne=ee.form_fields[be];for(let J=0;J<Ne.length;J++)ge(Ne[J])}):Te(ee.options)&&ee.options.forEach(be=>{be.nodes.forEach(Ne=>{ke(Ne)})})},ke=(ee,te)=>{let Ce=ee.title==="Api"?n.find(be=>be.title===ee.title):n.find(be=>be.data_type===ee.data_type);Ce&&(Ce.count+=1,te==="local"&&window.emitter.emit("formBuilderModified")),ee.form_fields&&typeof ee.form_fields=="object"?Object.keys(ee.form_fields).forEach(be=>{const Ne=ee.form_fields[be];for(let J=0;J<Ne.length;J++)ke(Ne[J])}):Te(ee.options)&&ee.options.forEach(be=>{be.nodes.forEach(Ne=>{ke(Ne)})})},ue=ee=>{if(r.type==="shared_fields"){ge(ee.field,ee.from);return}ke(ee.field,ee.from)};function he(ee){if(ee.to!=ee.from){let te=C.value.find(Ce=>Ce.identifier===ee.item.__draggable_context.element.identifier);te&&ve(te),window.emitter.emit("formBuilderModified")}}function ve(ee){C.value.filter(te=>te.data_type===ee.data_type).forEach(te=>{te.count-=1,te.count||(te.disabled=!0)}),ee.form_fields&&typeof ee.form_fields=="object"&&Object.keys(ee.form_fields).forEach(te=>{const Ce=ee.form_fields[te];for(let be=0;be<Ce.length;be++)ve(Ce[be])})}return window.emitter.on("removeElementFromDB",X),window.emitter.on("updateMenuCount",ue),window.emitter.on("updateMenuOnChildSelect",Pe),(ee,te)=>{const Ce=H("tooltip");return i(),d("div",UZ,[e.type==="fields"?(i(),A(ae(yt),{key:0,class:"form__menulist row",list:p.value,group:{name:"faveo-form-builder",pull:"clone",put:!1},clone:g,itemKey:"id",sort:!1,onEnd:ye},{item:T(({element:be,index:Ne})=>[s("div",{class:G([o.value<1220?"col-sm-12":"col-sm-6",be.count?"":"pe-none"])},[P((i(),d("div",{class:"info-box menu-info-box bg-light",key:be.id},[be.count?f("",!0):(i(),d("div",jZ)),be.icon_class?(i(),d("span",BZ,[s("i",{class:G(["fas",be.icon_class])},null,2)])):f("",!0),s("div",YZ,[s("span",HZ,[L(h(be.title)+"  ",1),s("small",WZ,h(be.count?be.count:0),1)])])])),[[Ce,be.title]])],2)]),_:1},8,["list"])):f("",!0),e.type==="fields"&&!e.from?(i(),A(ae(yt),{key:1,class:"form__menulist row",list:m.value,group:{name:"faveo-form-sections",pull:"clone",put:!1},clone:g,itemKey:"id",onEnd:ye},{item:T(({element:be,index:Ne})=>[s("div",{class:G(["col-sm-12 text-center",be.count?"":"pe-none"])},[P((i(),d("div",{class:"info-box menu-info-box bg-light",key:be.id},[be.count?f("",!0):(i(),d("div",zZ)),s("div",GZ,[s("span",KZ,[L(h(be.title)+"  ",1),s("small",JZ,h(be.count?be.count:0),1)])])])),[[Ce,be.title]])],2)]),_:1},8,["list"])):f("",!0),e.type==="default_fields"?(i(),d(B,{key:2},[R.value?(i(),A(Zt,{key:0})):f("",!0),!R.value&&!I.value.length?(i(),d("p",ZZ,h(ee.trans("no-records")),1)):f("",!0),R.value?f("",!0):(i(),A(ae(yt),{key:2,class:"form__menulist row",list:I.value,group:{name:"faveo-form-builder",put:!1},clone:g,itemKey:"id",sort:!1},{item:T(({element:be,index:Ne})=>[s("div",{class:G(o.value<1220?"col-sm-12":"col-sm-6")},[P((i(),d("div",{class:"info-box menu-info-box bg-light",key:be.id},[s("div",QZ,[s("span",XZ,h(be.label),1)])])),[[Ce,be.title]])],2)]),_:1},8,["list"]))],64)):f("",!0),e.type==="shared_fields"?(i(),d(B,{key:3},[S.value?(i(),A(Zt,{key:0})):f("",!0),!S.value&&C.value.length?(i(),d("div",eQ,[P(s("input",{type:"text",placeholder:"Search...",class:"form-control","onUpdate:modelValue":te[0]||(te[0]=be=>w.value=be)},null,512),[[ze,w.value]]),te[1]||(te[1]=s("i",{class:"fas fa-search text-muted"},null,-1))])):f("",!0),!S.value&&!ne.value.length?(i(),d("p",{key:2,class:"text-center pt-2",innerHTML:ee.trans("create_ticket_fields")},null,8,tQ)):f("",!0),s("div",{id:"card-container",class:"card-container mt-3",ref:"cardContainer",onScroll:Q},[(i(!0),d(B,null,re(ce.value,(be,Ne)=>(i(),d("div",{key:Ne,class:"group-card"},[s("span",aQ,[s("b",null,h(Ne),1),te[2]||(te[2]=L("  ")),s("small",sQ,h(be[0].count),1)]),u(ae(yt),{class:"form__menulist row",list:be,group:j(Ne),clone:g,itemKey:"id",sort:!1,onEnd:he},{item:T(({element:J,index:pe})=>[s("div",{class:G(["col-sm-12",J.count?"":"pe-none"])},[P((i(),d("div",{class:"info-box share-menu-info-box bg-light",key:J.id},[J.count?f("",!0):(i(),d("div",nQ)),s("div",oQ,[s("span",iQ,h(J.label?J.label:J.title),1)])])),[[Ce,J.title]])],2)]),_:2},1032,["list","group"])]))),128))],544),D.value?(i(),d("div",lQ,"Loading...")):f("",!0)],64)):f("",!0)])}}},tr=x(rQ,[["__scopeId","data-v-0d8579fe"]]);const dQ=["src"],cQ=["name"],uQ={class:"error-block is-danger"},mQ={__name:"FormElementLabel",props:{elementData:{type:Object,required:!0},isChild:{type:Boolean,default:()=>!1},isSection:{type:Boolean,default:!1},auth:{type:Object,default:()=>{}},labelFieldClass:{type:String,default:""}},setup(e){const{basePathVersion:t}=ut.methods,a=e,r=O("/themes/default/client/images/enterarrow.png"),n=me(()=>a.elementData.key+"_"+a.elementData.id),o=()=>{},m=O("");Je(()=>{m.value=a.auth&&a.auth.user_data&&a.auth.user_data.user_language?a.auth.user_data.user_language:"en"});const p=g=>g.findIndex(b=>b.language===m.value)===-1?0:g.findIndex(b=>b.language===m.value);return(g,b)=>{const w=v("ValidationProvider"),S=H("tooltip");return i(),d("div",{class:G(e.isSection?"card-title card-form-label":"form-field-label")},[e.isChild?(i(),d("img",{key:0,id:"enter-arrow",width:"16",height:"16",src:ae(t)()+r.value,alt:""},null,8,dQ)):f("",!0),u(w,{name:n.value,rules:"required",modelValue:e.elementData.labels[p(e.elementData.labels)].label,"onUpdate:modelValue":b[2]||(b[2]=C=>e.elementData.labels[p(e.elementData.labels)].label=C),modelModifiers:{trim:!0}},{default:T(({field:C,errorMessage:M,meta:D,classes:F})=>[P(s("input",{type:"text",name:n.value,"onUpdate:modelValue":b[0]||(b[0]=I=>e.elementData.labels[p(e.elementData.labels)].label=I),class:G(M?"field-danger "+e.labelFieldClass:""+e.labelFieldClass),onKeyup:b[1]||(b[1]=_a(I=>o(),["enter"]))},null,42,cQ),[[ze,e.elementData.labels[p(e.elementData.labels)].label,void 0,{trim:!0}],[S,e.elementData.labels[p(e.elementData.labels)].label.length>25?e.elementData.labels[p(e.elementData.labels)].label:""]]),s("div",{class:G(e.isChild?"ml_28":"ml_13")},[P(s("small",null,[s("span",uQ,h(M),1)],512),[[kt,M]])],2)]),_:1},8,["name","modelValue"])],2)}}},aa=x(mQ,[["__scopeId","data-v-fe44bd6b"]]);const hQ={key:0,class:"btn-group"},pQ={type:"button",class:"btn btn-tool dropdown-toggle","data-bs-toggle":"dropdown","data-offset":"-52","aria-expanded":"false"},_Q={class:"dropdown-menu",role:"menu"},fQ={key:1,class:"dropdown btn btn-sm form_elem_btn","data-bs-toggle":"dropdown"},gQ={class:"dropdown-menu form-drop p-1",role:"menu","aria-labelledby":"dropdownMenu"},vQ=["onClick"],bQ={class:"nav-link text-dark",href:"javascript:void(0);"},yQ={key:1,class:"nav-item disabled-nav"},kQ={class:"nav-link text-dark"},wQ={__name:"FormElementActions",props:{elementData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!1},onColumnClick:{type:Function,required:!1},selectedOption:{type:[String,Object],required:!1},isSection:{type:Boolean,default:!1},sectionDeletable:{type:Boolean,default:!1}},setup(e){const t=Me(),a=wt(),r=ft(),n=me(()=>t.getters.getFormMenus),o=me(()=>t.getters.getFormCategoryType),m=e,p=M=>{let D=["requester","status_id","priority_id","location_id","asset_type_id","product_id","source_id","help_topic_id","department_id","team_id","type_id","assigned_id","asset_ids"];return o.value==="change"&&(D=D.filter(F=>F!=="status_id"&&F!=="priority_id")),D.includes(M.unique)},g=M=>{const F={requester:"panel/user/list",status_id:o.value==="asset"?"Asset Status":"Status",priority_id:"Ticket Priority",location_id:"Locations",source_id:"Source",help_topic_id:"Helptopic",department_id:"Departments",team_id:"Teams",type_id:"Ticket Types",assigned_id:"Agents",asset_type_id:"Asset Type",product_id:"Products",asset_ids:"panel/service-desk/assets"}[M.unique];F&&(M.unique==="requester"||M.unique==="asset_ids"?window.location.href=F:a.push({name:F}))},b=M=>{window.emitter.emit("updateColumnSize",M),m.onColumnClick(M,m.elementData)},w=()=>{window.emitter.emit("onRemoveElement",{fieldData:m.elementData,reference_id:m.elementData.reference_id,reference_type:m.elementData.reference_type})},S=()=>o.value!=="ticket"&&o.value!=="requester"&&m.elementData.label==="Department"?!1:Array.isArray(m.selectedOption)&&m.selectedOption.length?!m.selectedOption[0].hasOwnProperty("extraKey"):typeof m.selectedOption!="string"&&Te(m.selectedOption)&&!m.selectedOption.hasOwnProperty("extraKey"),C=(M,D,F)=>{m.onChildClick(D,F),window.emitter.emit("updateMenuOnChildSelect",M)};return me(()=>r.name==="ticket.sections.create"||r.name==="ticket.sections.edit"||m.elementData.id.toString().length>10?!0:!m.sectionDeletable),(M,D)=>{const F=H("tooltip");return i(),d("div",{class:G(e.isSection?"card-tools":"btn-group")},[e.isSection?(i(),d("div",hQ,[P((i(),d("button",pQ,D[7]||(D[7]=[s("i",{class:"fas fa-cog"},null,-1)]))),[[F,M.trans("settings")]]),s("div",_Q,[s("a",{onClick:D[0]||(D[0]=I=>b("single",e.elementData)),href:"javascript:;",class:"dropdown-item"},h(M.trans("single-column")),1),s("a",{onClick:D[1]||(D[1]=I=>b("double",e.elementData)),href:"javascript:;",class:"dropdown-item"},h(M.trans("double-column")),1),s("a",{href:"javascript:;",class:"dropdown-item",onClick:D[2]||(D[2]=I=>e.onEditFormField(e.elementData))},h(M.trans("edit")),1),e.elementData.is_deletable?(i(),d("a",{key:0,class:"dropdown-item text-danger",onClick:D[3]||(D[3]=I=>w()),href:"javascript:;"},h(M.trans("delete")),1)):f("",!0)])])):(i(),d(B,{key:1},[p(e.elementData)?P((i(),d("span",{key:0,class:"btn btn-sm form_elem_btn",onClick:D[4]||(D[4]=I=>g(e.elementData))},D[8]||(D[8]=[s("i",{class:"fas fa-pencil-alt text-gray text-md","aria-hidden":"true"},null,-1)]))),[[F,M.trans("edit")]]):f("",!0),P((i(),d("span",{class:"btn btn-sm form_elem_btn",onClick:D[5]||(D[5]=I=>e.onEditFormField(e.elementData))},D[9]||(D[9]=[s("i",{class:"fas fa-cog text-gray text-md","aria-hidden":"true"},null,-1)]))),[[F,M.trans("settings")]]),S()?(i(),d("span",fQ,[P((i(),d("span",null,D[10]||(D[10]=[s("i",{class:"fas fa-plus text-md","aria-hidden":"true"},null,-1)]))),[[F,M.trans("add_child")]])])):f("",!0),s("ul",gQ,[(i(!0),d(B,null,re(n.value.filter(I=>I.data_type!=="section"),(I,R)=>(i(),d(B,{key:I.id},[I.count&&I.count>=1?(i(),d("li",{key:0,onClick:Y=>C(I,R,e.selectedOption),class:"nav-item p-2 py-1"},[s("a",bQ,h(I.title),1)],8,vQ)):(i(),d("li",yQ,[s("span",kQ,h(I.title),1)]))],64))),128))]),e.elementData.is_deletable?P((i(),d("span",{key:2,class:"btn btn-sm form_elem_btn",onClick:D[6]||(D[6]=I=>w())},D[11]||(D[11]=[s("i",{class:"far fa-trash-alt text-md","aria-hidden":"true"},null,-1)]))),[[F,M.trans("delete")]]):f("",!0)],64))],2)}}},Ht=x(wQ,[["__scopeId","data-v-942d909c"]]);const CQ={class:"row form-field"},DQ={class:"col-md-4 mt_5 drag-handle"},SQ={class:"col-sm-5 drag-handle"},MQ=["id","placeholder"],FQ=["id","placeholder"],$Q={class:"col-sm-3 mt_3"},TQ={__name:"FESimpleFields",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},sectionDeletable:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=e,a=O(""),r=me(()=>{let m;switch(t.fieldData.labels[0].place_holder?m=t.fieldData.labels[0].place_holder:t.fieldData.data_type==="number"?m="integer":t.fieldData.data_type==="decimal"?m="decimal_number":t.fieldData.data_type==="date"?m="date":m="short_text",t.fieldData.title){case"Attachments":m="attach files";break;case"Asset Image":m="asset_image";break;case"Api":m="api_endpoint";break}return["email"].includes(t.fieldData.data_type)?m="email@example.com":["textarea","htmltextarea"].includes(t.fieldData.data_type)&&(m="long_text"),m}),n=m=>{a.value=m.id},o=()=>["text","number","decimal","date","email","file","image","taggable"].indexOf(t.fieldData.data_type)>-1;return(m,p)=>(i(),d("div",{class:"item-group form-field-element pe-2",onMouseenter:p[0]||(p[0]=g=>n(e.fieldData)),onMouseleave:p[1]||(p[1]=g=>a.value="")},[s("div",CQ,[s("div",DQ,[u(aa,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth,labelFieldClass:a.value===e.fieldData.id?"field_label":""},null,8,["element-data","is-child","auth","labelFieldClass"])]),s("div",SQ,[o()||e.fieldData.title==="Api"?(i(),d("input",{key:0,id:"short-text-input"+e.fieldData.id,class:"form-control drag-handle",type:"text",placeholder:m.lang(r.value),disabled:""},null,8,MQ)):f("",!0),e.fieldData.data_type==="textarea"||e.fieldData.data_type==="htmltextarea"?(i(),d("textarea",{key:1,id:"long-text-input"+e.fieldData.id,class:"form-control drag-handle",rows:"1",placeholder:m.lang(r.value),disabled:""},null,8,FQ)):f("",!0)]),s("div",$Q,[a.value===e.fieldData.id?(i(),A(Ht,{key:0,"on-edit-form-field":e.onEditFormField,"element-data":e.fieldData,sectionDeletable:e.sectionDeletable},null,8,["on-edit-form-field","element-data","sectionDeletable"])):f("",!0)])])],32))}},EQ=x(TQ,[["__scopeId","data-v-d2506760"]]);const LQ={class:"row form-field"},AQ={class:"col-md-4 mt_5 drag-handle"},IQ={class:"col-sm-5 drag-handle"},PQ=["disabled"],OQ=["value"],qQ={class:"col-sm-3 mt_3"},xQ={__name:"FESelect",props:{fieldData:{type:Object,required:!0},isDisabled:{type:Boolean,default:()=>!1},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},sectionDeletable:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=e,a=O("Select option"),r=O(""),n=O("");Je(()=>{n.value=t.auth&&t.auth.user_data&&t.auth.user_data.user_language?t.auth.user_data.user_language:"en",m()});const o=D=>{r.value=D.id},m=()=>{if(t.fieldData.title==="Help Topic"||t.fieldData.title==="Department"||t.fieldData.title==="Change Type"){a.value="Select option";const D=p(),F={meta:!0,limit:"all","sort-order":"asc","sort-field":"id",config:!0,mode:"config"};axios.get(D.apiUrl,{params:F}).then(I=>{if(D.dataKay==="data"){t.fieldData.options=I.data.data[D.dataKay];return}t.fieldData.options=[],I.data.data[D.dataKay].map(Y=>{const X={id:Y.id,value:Y.id,labels:[{id:null,language:"en",label:D.dataKay==="data"?Y.label:Y.name}],nodes:Y.nodes?Y.nodes:[],sort_order:0};t.fieldData.options.push(X)}),t.fieldData.options&&t.fieldData.options.forEach(Y=>{Y.nodes&&Y.nodes.length>0&&C(Y.nodes)})})}},p=()=>{let D={},F=Jt.convertStringOfPropertiesToObject(t.fieldData.api_info).url;return F?D.apiUrl=F:!F&&t.fieldData.api_info&&(D.apiUrl=t.fieldData.api_info),t.fieldData.title==="Help Topic"?D.dataKay="help_topics":t.fieldData.title==="Department"?D.dataKay="departments":t.fieldData.title==="Change Type"?D.dataKay="change_types":D.dataKay="data",D},g=O(!1),b=(D,F)=>(typeof F>"u"&&(F=a.value),F&&F.id===D.id&&D.nodes&&D.nodes.length&&(g.value=!0),F&&F.id===D.id);qt(()=>t.fieldData,(D,F)=>{t.fieldData.options&&t.fieldData.options.length===0&&m()});const w=D=>D.findIndex(F=>F.language===n.value)===-1?0:D.findIndex(F=>F.language===n.value),S=t.fieldData;function C(D,F,I=1){D.forEach(R=>{F&&I>=F&&R.options&&R.options.forEach(Y=>{Y.extraKey="extraValue"}),R.options&&R.options.length>0&&R.options.forEach(Y=>{Y.nodes&&Y.nodes.length>0&&C(Y.nodes,R.nested_level,I+1)})})}const M=()=>{S.options&&S.options.forEach(D=>{D.nodes&&D.nodes.length>0&&C(D.nodes,S.nested_level)})};return window.emitter.on("updateNestedObjects",M),Je(()=>{M()}),(D,F)=>(i(),d("div",{class:G(["fe-select",g.value?"parent_field":""])},[s("div",{class:"item-group form-field-element pe-2",onMouseenter:F[1]||(F[1]=I=>o(e.fieldData)),onMouseleave:F[2]||(F[2]=I=>r.value="")},[s("div",LQ,[s("div",AQ,[u(aa,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth,labelFieldClass:r.value===e.fieldData.id?"field_label":""},null,8,["element-data","is-child","auth","labelFieldClass"])]),s("div",IQ,[P(s("select",{id:"select-field-id",class:G(["form-control",e.isDisabled?"drag-handle":""]),"onUpdate:modelValue":F[0]||(F[0]=I=>a.value=I),disabled:e.isDisabled},[F[3]||(F[3]=s("option",{selected:""},"Select option",-1)),(i(!0),d(B,null,re(e.fieldData.options,I=>{var R;return i(),d("option",{key:I.id,value:I},h((R=I.labels[w(I.labels)])==null?void 0:R.label),9,OQ)}),128))],10,PQ),[[Ea,a.value]])]),s("div",qQ,[r.value===e.fieldData.id?(i(),A(Ht,{key:0,"on-edit-form-field":e.onEditFormField,"on-child-click":e.onChildClick,"selected-option":a.value,"element-data":e.fieldData,sectionDeletable:e.sectionDeletable},null,8,["on-edit-form-field","on-child-click","selected-option","element-data","sectionDeletable"])):f("",!0)])])],32),e.fieldData.options&&e.fieldData.options.length!==0?(i(!0),d(B,{key:0},re(e.fieldData.options,I=>(i(),d(B,{key:I.id},[b(I)?(i(),A(Kt,{key:0,list:I.nodes,isChild:!0,keyVal:I.id,sectionDeletable:e.sectionDeletable},null,8,["list","keyVal","sectionDeletable"])):f("",!0)],64))),128)):f("",!0)],2))}},VQ=x(xQ,[["__scopeId","data-v-4636f5ec"]]);const NQ={class:"row form-field"},RQ={class:"col-md-4 drag-handle"},UQ={class:"col-sm-5 drag-handle"},jQ={key:0},BQ=["for"],YQ=["id","name","value","disabled"],HQ={class:"ms-1"},WQ={key:1},zQ={class:"col-sm-3"},GQ={__name:"FECheckbox",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},sectionDeletable:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=e,a=O([]),r=O(""),n=O("");Je(()=>{C(),n.value=t.auth&&t.auth.user_data&&t.auth.user_data.user_language?t.auth.user_data.user_language:"en"});const o=M=>{r.value=M.id},m=O(!1),p=(M,D)=>(typeof D>"u"&&(D=a.value),D&&D.id===M.id&&M.nodes&&M.nodes.length&&(m.value=!0),!!(D&&D.id===M.id)),g=()=>{r.value="",o(t.fieldData)},b=M=>M.findIndex(D=>D.language===n.value)===-1?0:M.findIndex(D=>D.language===n.value),w=t.fieldData;function S(M,D,F=1){M.forEach(I=>{D&&F>=D&&I.options&&I.options.forEach(R=>{R.extraKey="extraValue"}),I.options&&I.options.length>0&&I.options.forEach(R=>{R.nodes&&R.nodes.length>0&&S(R.nodes,I.nested_level,F+1)})})}const C=()=>{w.options&&w.options.forEach(M=>{M.nodes&&M.nodes.length>0&&S(M.nodes,w.nested_level)})};return window.emitter.on("updateNestedObjects",C),(M,D)=>{const F=H("tooltip");return i(),d("div",{class:G(["fe-checkbox",m.value?"parent_field":""])},[s("div",{class:"fe-checkbox item-group form-field-element px-2",onMouseenter:D[1]||(D[1]=I=>o(e.fieldData)),onMouseleave:D[2]||(D[2]=I=>r.value="")},[s("div",NQ,[s("div",RQ,[u(aa,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth},null,8,["element-data","is-child","auth"])]),s("div",UQ,[e.fieldData.options.length>0?(i(),d("div",jQ,[(i(!0),d(B,null,re(e.fieldData.options,(I,R)=>(i(),d("div",{class:"checkbox",key:R},[s("label",{for:"checkbox_"+I.id+e.fieldData.id},[P(s("input",{type:"checkbox",id:"checkbox_"+I.id+e.fieldData.id,name:e.fieldData.id,value:I,"onUpdate:modelValue":D[0]||(D[0]=Y=>a.value=Y),class:"check-align",onChange:g,disabled:e.fieldData.default},null,40,YQ),[[Ve,a.value]]),P((i(),d("span",HQ,[L(h(M.getSubString(I.labels[b(I.labels)].label,20)),1)])),[[F,I.labels[b(I.labels)].label]])],8,BQ)]))),128))])):(i(),d("div",WQ,D[3]||(D[3]=[s("label",{for:"checkbox_preview",style:{color:"#9a9a9a"}},[s("input",{disabled:"",type:"checkbox",name:"checkbox_preview",id:"checkbox_preview",class:"check-align"}),L(" Add option ")],-1)])))]),s("div",zQ,[r.value===e.fieldData.id?(i(),A(Ht,{key:0,"on-edit-form-field":e.onEditFormField,"on-child-click":e.onChildClick,"selected-option":a.value,"element-data":e.fieldData,sectionDeletable:e.sectionDeletable},null,8,["on-edit-form-field","on-child-click","selected-option","element-data","sectionDeletable"])):f("",!0)])])],32),e.fieldData.options&&e.fieldData.options.length!==0?(i(!0),d(B,{key:0},re(a.value,(I,R)=>(i(),d(B,{key:R},[(i(!0),d(B,null,re(e.fieldData.options,Y=>(i(),d(B,{key:Y.id},[p(Y,I)?(i(),A(Kt,{key:0,list:Y.nodes,isChild:!0,keyVal:Y.id,sectionDeletable:e.sectionDeletable},null,8,["list","keyVal","sectionDeletable"])):f("",!0)],64))),128))],64))),128)):f("",!0)],2)}}},KQ=x(GQ,[["__scopeId","data-v-456447b8"]]);const JQ={class:"row form-field"},ZQ={class:"col-md-4 drag-handle"},QQ={class:"col-sm-5 drag-handle"},XQ={key:0},eX=["for"],tX=["name","id","value"],aX={class:"ms-1"},sX={key:1},nX={class:"col-sm-3"},oX={__name:"FERadio",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},sectionDeletable:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=e,a=O(null),r=O(""),n=O(""),o=M=>{r.value=M.id};Je(()=>{C(),n.value=t.auth&&t.auth.user_data&&t.auth.user_data.user_language?t.auth.user_data.user_language:"en"});const m=M=>M.findIndex(D=>D.language===n.value)===-1?0:M.findIndex(D=>D.language===n.value),p=M=>{M.target.checked=!0},g=O(!1),b=(M,D)=>(typeof D>"u"&&(D=a.value),D&&D.id===M.id&&M.nodes&&M.nodes.length&&(g.value=!0),D&&D.id===M.id),w=t.fieldData;function S(M,D,F=1){M.forEach(I=>{D&&F>=D&&I.options&&I.options.forEach(R=>{R.extraKey="extraValue"}),I.options&&I.options.length>0&&I.options.forEach(R=>{R.nodes&&R.nodes.length>0&&S(R.nodes,I.nested_level,F+1)})})}const C=()=>{w.options&&w.options.forEach(M=>{M.nodes&&M.nodes.length>0&&S(M.nodes,w.nested_level)})};return window.emitter.on("updateNestedObjects",C),(M,D)=>{const F=H("tooltip");return i(),d("div",{class:G(["fe-radio",g.value?"parent_field":""])},[s("div",{class:"fe-radio item-group form-field-element pe-2",onMouseenter:D[1]||(D[1]=I=>o(e.fieldData)),onMouseleave:D[2]||(D[2]=I=>r.value="")},[s("div",JQ,[s("div",ZQ,[u(aa,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth},null,8,["element-data","is-child","auth"])]),s("div",QQ,[e.fieldData.options.length>0?(i(),d("div",XQ,[(i(!0),d(B,null,re(e.fieldData.options,I=>(i(),d("div",{class:"radio",key:I.id},[s("label",{for:"radio_"+I.id+e.fieldData.id},[P(s("input",{type:"radio",name:e.fieldData.id,id:"radio_"+I.id+e.fieldData.id,"onUpdate:modelValue":D[0]||(D[0]=R=>a.value=R),value:I,class:"radio-align",onChange:p},null,40,tX),[[Ws,a.value]]),P((i(),d("span",aX,[L(h(M.getSubString(I.labels[m(I.labels)].label,20)),1)])),[[F,I.labels[m(I.labels)].label]])],8,eX)]))),128))])):(i(),d("div",sX,D[3]||(D[3]=[s("label",{for:"radio_preview",style:{color:"#9a9a9a"}},[s("input",{disabled:"",type:"radio",name:"radio_preview",id:"radio_preview",class:"radio-align"}),L(" Add option ")],-1)])))]),s("div",nX,[r.value===e.fieldData.id?(i(),A(Ht,{key:0,"on-edit-form-field":e.onEditFormField,"on-child-click":e.onChildClick,"selected-option":a.value,"element-data":e.fieldData,sectionDeletable:e.sectionDeletable},null,8,["on-edit-form-field","on-child-click","selected-option","element-data","sectionDeletable"])):f("",!0)])])],32),e.fieldData.options&&e.fieldData.options.length!==0?(i(!0),d(B,{key:0},re(e.fieldData.options,I=>(i(),d(B,{key:I.id},[b(I)?(i(),A(Kt,{key:0,list:I.nodes,isChild:!0,keyVal:I.id,sectionDeletable:e.sectionDeletable},null,8,["list","keyVal","sectionDeletable"])):f("",!0)],64))),128)):f("",!0)],2)}}},iX=x(oX,[["__scopeId","data-v-154097cd"]]);const lX={class:"col-md-4 form-field-label"},rX=["src"],dX=["value"],cX={class:"col-sm-8"},uX=["placeholder"],mX={key:0,class:"form-action-btn-div",style:{display:"flex"}},hX={class:"form-field-actions-btn"},pX={__name:"FEGroupField",props:{fieldData:{type:Object,required:!0},isChild:{type:Boolean,default:()=>!1},sectionDeletable:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=wt(),{basePathVersion:a}=ut.methods,r=O("/themes/default/client/images/enterarrow.png"),n=O(""),o=p=>{n.value=p.id},m=()=>{t.push({path:this.fieldData.edit_url})};return(p,g)=>(i(),d("div",{class:"row form-field",onMouseenter:g[0]||(g[0]=b=>o(e.fieldData)),onMouseleave:g[1]||(g[1]=b=>n.value="")},[s("div",lX,[e.isChild?(i(),d("img",{key:0,width:"16",height:"16",id:"enter-arrow",src:ae(a)()+r.value,alt:""},null,8,rX)):f("",!0),s("input",{type:"text",readonly:"",value:e.fieldData.name},null,8,dX)]),s("div",cX,[s("input",{class:"form-control",type:"text",placeholder:p.lang("this_is_form_group"),disabled:""},null,8,uX)]),n.value===e.fieldData.id?(i(),d("div",mX,[g[2]||(g[2]=s("span",{class:"space-filler"},null,-1)),s("div",hX,[u(Ht,{"on-edit-form-field":m,"element-data":e.fieldData,sectionDeletable:e.sectionDeletable},null,8,["element-data","sectionDeletable"])])])):f("",!0)],32))}},_X=x(pX,[["__scopeId","data-v-7b71cf4e"]]);const fX={class:"row form-field"},gX={class:"col-md-4 mt_5 drag-handle"},vX={class:"col-sm-5 drag-handle"},bX=["id","placeholder"],yX={class:"col-sm-3 mt_3"},kX={__name:"FECustom",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},sectionDeletable:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=O(""),a=r=>{t.value=r.id};return(r,n)=>(i(),d("div",{class:"item-group form-field-element px-2",onMouseenter:n[0]||(n[0]=o=>a(e.fieldData)),onMouseleave:n[1]||(n[1]=o=>t.value="")},[s("div",fX,[s("div",gX,[u(aa,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth},null,8,["element-data","is-child","auth"])]),s("div",vX,[s("input",{id:"short-text-input"+e.fieldData.id,class:"form-control drag-handle",type:"text",placeholder:e.fieldData.labels[0].place_holder?e.fieldData.labels[0].place_holder:r.trans("short_text"),disabled:""},null,8,bX)]),s("div",yX,[t.value===e.fieldData.id?(i(),A(Ht,{key:0,"on-edit-form-field":e.onEditFormField,"element-data":e.fieldData,sectionDeletable:e.sectionDeletable},null,8,["on-edit-form-field","element-data","sectionDeletable"])):f("",!0)])])],32))}},wX=x(kX,[["__scopeId","data-v-9e83b2ef"]]);const CX={class:"row form-field"},DX={class:"col-md-4 mt_5 drag-handle"},SX={class:"col-sm-5 drag-handle"},MX=["id","placeholder"],FX={class:"col-sm-3 mt_3"},$X={__name:"FEMobile",props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1},sectionDeletable:{type:Boolean,default:()=>!1},auth:{type:Object,default:()=>{}}},setup(e){const t=O(""),a=r=>{t.value=r.id};return(r,n)=>(i(),d("div",{class:"fe-mobile item-group form-field-element px-2",onMouseenter:n[0]||(n[0]=o=>a(e.fieldData)),onMouseleave:n[1]||(n[1]=o=>t.value="")},[s("div",CX,[s("div",DX,[u(aa,{"element-data":e.fieldData,"is-child":e.isChild,auth:e.auth},null,8,["element-data","is-child","auth"])]),s("div",SX,[s("input",{id:"mobile-input"+e.fieldData.id,class:"form-control drag-handle",type:"text",placeholder:r.lang(e.fieldData.labels[0].place_holder||"9876543210"),disabled:""},null,8,MX)]),s("div",FX,[t.value===e.fieldData.id?(i(),A(Ht,{key:0,"on-edit-form-field":e.onEditFormField,"element-data":e.fieldData,sectionDeletable:e.sectionDeletable},null,8,["on-edit-form-field","element-data","sectionDeletable"])):f("",!0)])])],32))}},TX=x($X,[["__scopeId","data-v-af68ca54"]]);const EX={class:"main-div__formbuilder"},LX={__name:"Fields",props:{list:{type:Array,default:null},isChild:{type:Boolean,default:()=>!1},keyVal:{type:[String,Number],default:""},dragGroupId:{type:[String,Number],default:""},onFieldEdit:{type:Function,default:()=>{}},onEditClose:{type:Function,default:()=>{}},auth:{type:Object,default:()=>{}},isFormGroup:{type:Boolean,default:!1},sectionDeletable:{type:Boolean,default:!1},formType:{type:String,default:""}},emits:["input"],setup(e,{emit:t}){const a=Me(),r=e,n=me(()=>a.getters.isDisableDraging),o=O(!1),m=O(null),p=O(null),g=O(!1);Je(()=>{m.value=a.getters.getFormMenus}),fa(()=>{window.emitter.on("formFieldSettingsApplied",X),window.emitter.on("formFieldSettingsClosed",X)});const b=me(()=>({animation:200,group:{put:r.isChild?["faveo-form-builder-"+(r.keyVal?r.keyVal:Math.random())]:r.dragGroupId?["faveo-form-builder",r.dragGroupId]:["faveo-form-builder"],name:r.isChild?"faveo-form-builder-"+(r.keyVal?r.keyVal:Math.random()):r.dragGroupId?r.dragGroupId:"faveo-form-builder"},disabled:!1,ghostClass:"ghost"})),w=me(()=>r.value?r.value:r.list),S=()=>{o.value=!1},C=(ne="")=>{let ce="";return p.value&&ne.id===p.value.id&&(ce+=" field-active "),ce},M=t,D=ne=>{M("input",ne)},F=ne=>["text","number","decimal","date","email","file","image","textarea","htmltextarea","taggable"].indexOf(ne.data_type)>-1,I=ne=>r.formType!=="helpdesk"?ne.default===1&&ne.title!=="Change Type":ne.default===1&&ne.title!=="Help Topic"&&ne.title!=="Department",R=(ne,ce)=>{let Q=JSON.parse(JSON.stringify(m.value));const j=le();if(Q[ne].form_identifier=j,Q[ne].id=j,Array.isArray(ce))for(let ye=0;ye<ce.length;ye++)ce[ye].nodes.push(Q[ne]);else ce.nodes.push(Q[ne]);window.emitter.emit("updateNestedObjects")},Y=ne=>{p.value=ne,window.emitter.emit("onEditElement",{data:ne})},X=()=>{p.value=null,g.value=!1,r.onEditClose(),C(),window.emitter.emit("updateNestedObjects")},le=()=>new Date().getTime();return(ne,ce)=>(i(),d("div",EX,[u(ae(yt),$i(b.value,{onEnd:S,"component-data":{tag:"div",type:"transition-group",name:o.value?null:"flip-list"},class:"item-container",list:w.value,onStart:ce[0]||(ce[0]=Q=>o.value=!0),handle:".drag-handle",onInput:D,"empty-insert-threshold":230,disabled:n.value,itemKey:"id"}),{item:T(({element:Q,index:j})=>[Q.data_type==="section"?(i(),A(ar,{"section-data":Q,key:j,auth:e.auth,"on-edit-form-field":Y},null,8,["section-data","auth"])):(i(),d("div",{key:Q.groupid||Q.id,class:G(["mb-1",C(Q)])},[F(Q)||Q.title==="Api"?(i(),A(EQ,{key:0,"field-data":Q,"on-edit-form-field":Y,isChild:e.isChild,auth:e.auth,sectionDeletable:e.sectionDeletable},null,8,["field-data","isChild","auth","sectionDeletable"])):f("",!0),Q.data_type==="mobile"?(i(),A(TX,{key:1,"field-data":Q,"on-edit-form-field":Y,isChild:e.isChild,auth:e.auth,sectionDeletable:e.sectionDeletable},null,8,["field-data","isChild","auth","sectionDeletable"])):f("",!0),Q.title!=="Api"&&(Q.data_type==="api"||Q.data_type==="select"||Q.data_type==="select2"||Q.data_type==="multiselect"||Q.data_type==="taggable-api")?(i(),A(VQ,{key:2,"field-data":Q,isDisabled:I(Q),"on-edit-form-field":Y,"on-child-click":R,isChild:e.isChild,auth:e.auth,sectionDeletable:e.sectionDeletable},null,8,["field-data","isDisabled","isChild","auth","sectionDeletable"])):f("",!0),Q.data_type==="checkbox"?(i(),A(KQ,{key:3,"field-data":Q,"on-edit-form-field":Y,"on-child-click":R,isChild:e.isChild,auth:e.auth,sectionDeletable:e.sectionDeletable},null,8,["field-data","isChild","auth","sectionDeletable"])):f("",!0),Q.data_type==="radio"?(i(),A(iX,{key:4,"field-data":Q,"on-edit-form-field":Y,"on-child-click":R,isChild:e.isChild,auth:e.auth,sectionDeletable:e.sectionDeletable},null,8,["field-data","isChild","auth","sectionDeletable"])):f("",!0),Q.data_type==="group"?(i(),A(_X,{key:5,"field-data":Q,isChild:e.isChild,auth:e.auth,sectionDeletable:e.sectionDeletable},null,8,["field-data","isChild","auth","sectionDeletable"])):f("",!0),Q.data_type==="custom"?(i(),A(wX,{key:6,"field-data":Q,"on-edit-form-field":Y,isChild:e.isChild,auth:e.auth,sectionDeletable:e.sectionDeletable},null,8,["field-data","isChild","auth","sectionDeletable"])):f("",!0)],2))]),_:1},16,["component-data","list","disabled"])]))}},Kt=x(LX,[["__scopeId","data-v-150b0c36"]]);const AX={class:"row"},IX={class:"col-sm-4 drag-handle"},PX={class:"col-sm-8 text-end drag-handle"},OX={class:"card-body pt-2 px-2 min-h-100"},qX={key:0,class:"text-center no-drag-fields"},xX=["src"],VX={class:"row px-1"},NX={class:"col-sm-6"},RX={class:"col-sm-6"},UX={key:1,class:"col-sm-6"},jX={key:2,class:"col-sm-6"},BX={__name:"FESection",props:{sectionData:{type:Object,required:!0},auth:{type:Object,default:()=>{}},onEditFormField:{type:Function,default:()=>{}},formType:{type:String,default:""}},setup(e){const{basePathVersion:t}=ut.methods,a=e,r=O(""),n=me(()=>{const b=a.sectionData.form_fields&&a.sectionData.form_fields.first?a.sectionData.form_fields.first.length===0:!1,w=a.sectionData.form_fields&&a.sectionData.form_fields.second?a.sectionData.form_fields.second.length===0:!1;switch(!0){case(b&&w):return"both";case(b&&!a.sectionData.form_fields.second):return"first";case(!a.sectionData.form_fields.first&&w):return"second";default:return null}}),o=(b,w)=>{b==="single"&&(w.form_fields.first&&w.form_fields.second?(w.form_fields.first=[...w.form_fields.first,...w.form_fields.second],w.form_fields.first.forEach(S=>{S.column="first"}),delete w.form_fields.second):!w.form_fields.first&&w.form_fields.second&&w.form_fields.second.forEach(S=>{S.column="first"})),b==="double"&&(w.form_fields.second||(w.form_fields.second=[]),w.form_fields.first||(w.form_fields.first=[]))},m=b=>{r.value=b.id},p=O(""),g=b=>{p.value=b.id};return(b,w)=>(i(),d("div",{class:G(["mt-2 mb-2 section-card",r.value===e.sectionData.id?"card-light":""]),onMouseenter:w[2]||(w[2]=S=>m(e.sectionData)),onMouseleave:w[3]||(w[3]=S=>r.value="")},[s("div",{class:"card-header p-2 section-header",onMouseenter:w[0]||(w[0]=S=>g(e.sectionData)),onMouseleave:w[1]||(w[1]=S=>p.value="")},[s("div",AX,[s("div",IX,[u(aa,{"element-data":e.sectionData,isSection:!0,auth:e.auth,labelFieldClass:r.value===e.sectionData.id?"section_label":""},null,8,["element-data","auth","labelFieldClass"])]),s("div",PX,[p.value===e.sectionData.id?(i(),A(Ht,{key:0,isSection:!0,"element-data":e.sectionData,"on-column-click":o,"on-edit-form-field":e.onEditFormField},null,8,["element-data","on-edit-form-field"])):f("",!0)])])],32),s("div",OX,[n.value?(i(),d("div",qX,[s("img",{src:ae(t)()+"/themes/default/common/images/drag.png",alt:"form-no-drag",class:"no-drag-img"},null,8,xX),s("p",null,h(b.trans("drag_an_element_from_the_left")),1)])):f("",!0),s("div",VX,[a.sectionData.form_fields.first&&a.sectionData.form_fields.second?(i(),d(B,{key:0},[s("div",NX,[u(Kt,{list:e.sectionData.form_fields.first,keyVal:e.sectionData.id,dragGroupId:"section-"+e.sectionData.id,auth:e.auth,formType:e.formType,sectionDeletable:e.sectionData.is_deletable},null,8,["list","keyVal","dragGroupId","auth","formType","sectionDeletable"])]),s("div",RX,[u(Kt,{list:e.sectionData.form_fields.second,keyVal:e.sectionData.id,dragGroupId:"section-"+e.sectionData.id,auth:e.auth,formType:e.formType,sectionDeletable:e.sectionData.is_deletable},null,8,["list","keyVal","dragGroupId","auth","formType","sectionDeletable"])])],64)):f("",!0),a.sectionData.form_fields.first&&!a.sectionData.form_fields.second?(i(),d("div",UX,[u(Kt,{list:e.sectionData.form_fields.first,keyVal:e.sectionData.id,dragGroupId:"section-"+e.sectionData.id,auth:e.auth,formType:e.formType,sectionDeletable:e.sectionData.is_deletable},null,8,["list","keyVal","dragGroupId","auth","formType","sectionDeletable"])])):f("",!0),a.sectionData.form_fields.second&&!a.sectionData.form_fields.first?(i(),d("div",jX,[u(Kt,{list:e.sectionData.form_fields.second,keyVal:e.sectionData.id,dragGroupId:"section-"+e.sectionData.id,auth:e.auth,formType:e.formType,sectionDeletable:e.sectionData.is_deletable},null,8,["list","keyVal","dragGroupId","auth","formType","sectionDeletable"])])):f("",!0)])])],34))}},ar=x(BX,[["__scopeId","data-v-49b0dcb4"]]),YX={class:"main-div__formbuilder"},sr={__name:"Sections",props:{sections:{type:Array,default:null},auth:{type:Object,default:()=>{}},isFormGroup:{type:Boolean,default:!1},formType:{type:String,default:""}},setup(e){const t=Me(),a=e,r=me(()=>t.getters.isDisableDraging),n=O(!1),o=me(()=>({animation:200,group:"faveo-form-sections",disabled:!1,ghostClass:"ghost"})),m=me(()=>a.sections),p=()=>{n.value=!1},g=b=>{window.emitter.emit("onEditElement",{data:b})};return(b,w)=>(i(),d("div",YX,[u(ae(yt),$i(o.value,{onEnd:p,"component-data":{tag:"div",type:"transition-group",name:n.value?null:"flip-list"},class:"item-container",list:m.value,onStart:w[0]||(w[0]=S=>n.value=!0),"empty-insert-threshold":230,disabled:r.value,itemKey:"id",handle:".drag-handle"}),{item:T(({element:S,index:C})=>[(i(),A(ar,{"section-data":S,key:C,auth:e.auth,"on-edit-form-field":g,formType:e.formType},null,8,["section-data","auth","formType"]))]),_:1},16,["component-data","list","disabled"])]))}},HX={class:"row"},WX={class:"col-md-12 form-group mb-3"},zX={for:"apiendpoint"},GX={class:"input-group",style:{width:"100%"}},KX={class:"col-md-12 form-group mb-3"},JX={for:"apiendpoint"},ZX={class:"input-group",style:{width:"100%"}},QX={__name:"APIInfoBlock",props:{formFieldData:{type:Object,required:!0},updateApiInfo:{type:Function,required:!0}},setup(e){const t=e,a=O(null);Je(()=>{a.value=Jt.convertStringOfPropertiesToObject(t.formFieldData.api_info)});const r=dt.debounce(()=>{t.updateApiInfo(Jt.convertObjectOfPropertiesToString(a.value))},350);return(n,o)=>(i(),d("div",HX,[s("div",WX,[s("label",zX,h(n.lang("api_endpoint")),1),u(nt,{message:n.lang("api_endpoint"),size:"small"},null,8,["message"]),s("div",GX,[P(s("input",{type:"text",class:"form-control",id:"apiendpoint","onUpdate:modelValue":o[0]||(o[0]=m=>a.value.url=m),onInput:o[1]||(o[1]=m=>ae(r)()),placeholder:"https://testapi.com/my/api/path"},null,544),[[ze,a.value.url,void 0,{trim:!0}]])])]),s("div",KX,[s("label",JX,h(n.lang("property_to_map")),1),u(nt,{message:n.lang("this_property_will_get_saved_when_user_submit_the_form"),size:"small"},null,8,["message"]),s("div",ZX,[P(s("input",{type:"text",class:"form-control",id:"apiendpoint","onUpdate:modelValue":o[2]||(o[2]=m=>a.value.key=m),onInput:o[3]||(o[3]=m=>ae(r)()),placeholder:"id"},null,544),[[ze,a.value.key,void 0,{trim:!0}]])])])]))}};const XX={class:"pt-2 ps-2 pe-2 pb-0"},eee={key:0,class:"row"},tee={key:0,class:"col-md-12 form-group"},aee={class:"form-check"},see=["disabled"],nee={class:"form-check-label",for:"display-for-agent"},oee={key:0,class:"form-check"},iee=["disabled"],lee={class:"form-check-label",for:"required-for-agent"},ree={key:1,class:"form-check"},dee=["disabled"],cee={class:"form-check-label",for:"display_on_edit"},uee={key:2,class:"form-check"},mee=["disabled"],hee={class:"form-check-label",for:"required_on_edit"},pee={key:3,class:"form-check"},_ee=["disabled"],fee={class:"form-check-label",for:"required_for_closure"},gee={key:1,class:"col-md-12 form-group mb-3"},vee={class:"form-check"},bee=["disabled"],yee={class:"form-check-label",for:"display-for-client"},kee={key:0,class:"form-check"},wee=["disabled"],Cee={class:"form-check-label",for:"required-for-client"},Dee={class:"row mb-3"},See={key:0,class:"col-md-12 form-group"},Mee={for:"shortcode"},Fee={class:"fas fa-question-circle text-primary"},$ee={key:1,class:"col-md-12 form-group",style:{"padding-top":"10px"}},Tee=["href"],Eee={key:0,class:"row"},Lee={class:"col-md-12 form-group"},Aee={class:"form-check"},Iee={for:"add-media-cb"},Pee={key:3,class:"row"},Oee={class:"col-md-12 form-group"},qee={class:"form-check"},xee={class:"form-check-label",for:"mobile-ext"},Vee={key:4,class:"row"},Nee={class:"col-md-12 form-group"},Ree={class:"form-check"},Uee={class:"form-check-label",for:"date-time"},jee={__name:"FEConfigSettings",props:{formFieldData:{type:Object,required:!0},from:{type:String,default:""}},setup(e){const t=Me();ft();const a=O(!0),r=O(!1),n=O(!1),o=O(!1),{basePath:m}=ut.methods,p=me(()=>g.formFieldData.is_edit_visible!==void 0?g.formFieldData.is_edit_visible:1);Je(()=>{g.formFieldData.display_on_edit&&(o.value?o.value:o.value=!0),g.formFieldData.required_on_edit&&(r.value=!0)});const g=e,b=me(()=>t.getters.getFormCategoryType);qt(()=>g.formFieldData.display_for_agent,C=>{C===1?(a.value=!C,n.value=C):(g.formFieldData.required_for_agent=!1,g.formFieldData.required_on_edit=!1,g.formFieldData.required_for_closure=!1)}),qt(()=>g.formFieldData.display_on_edit,C=>{o.value=C,C!==1&&(g.formFieldData.required_on_edit=!1,g.formFieldData.required_for_closure=!1)}),qt(()=>g.formFieldData.required_for_agent,C=>{C===1&&(g.formFieldData.required_on_edit=!1)}),qt(()=>g.formFieldData.required_on_edit,C=>{r.value=C});const w=C=>{g.formFieldData[C]=!1},S=C=>{g.formFieldData.api_info=C};return(C,M)=>{const D=H("tooltip");return i(),d("div",XX,[e.formFieldData.is_configurable?(i(),d("div",eee,[e.formFieldData.is_agent_config?(i(),d("div",tee,[s("label",null,h(C.trans("agent")),1),s("div",aee,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[0]||(M[0]=F=>e.formFieldData.display_for_agent=F),id:"display-for-agent",onClick:M[1]||(M[1]=F=>w("required")),disabled:e.formFieldData.default&&e.formFieldData.data_type==="section"||o.value},null,8,see),[[Ve,e.formFieldData.display_for_agent]]),s("label",nee,h(C.trans("display_in_form")),1)]),e.formFieldData.title!=="Captcha"&&e.formFieldData.data_type!=="section"?(i(),d("div",oee,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[2]||(M[2]=F=>e.formFieldData.required_for_agent=F),disabled:!e.formFieldData.display_for_agent&&e.formFieldData.title!=="Captcha"||r.value,id:"required-for-agent"},null,8,iee),[[Ve,e.formFieldData.required_for_agent]]),s("label",lee,h(C.trans("required_when_submitting_the_form")),1)])):f("",!0),b.value==="ticket"&&e.formFieldData.title!=="Captcha"&&e.formFieldData.data_type!=="section"&&e.formFieldData.data_type!=="file"&&p.value?(i(),d("div",ree,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[3]||(M[3]=F=>e.formFieldData.display_on_edit=F),disabled:e.formFieldData.title==="Captcha"||e.formFieldData.display_for_agent,id:"display_on_edit"},null,8,dee),[[Ve,e.formFieldData.display_on_edit]]),s("label",cee,h(C.trans("display_on_edit")),1)])):f("",!0),b.value==="ticket"&&e.formFieldData.title!=="Captcha"&&e.formFieldData.data_type!=="section"&&e.formFieldData.data_type!=="file"&&p.value?(i(),d("div",uee,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[4]||(M[4]=F=>e.formFieldData.required_on_edit=F),disabled:!e.formFieldData.display_on_edit&&!e.formFieldData.display_for_agent||e.formFieldData.required_for_agent,id:"required_on_edit"},null,8,mee),[[Ve,e.formFieldData.required_on_edit]]),s("label",hee,h(C.trans("required_on_edit")),1)])):f("",!0),b.value==="ticket"&&e.formFieldData.title!=="Captcha"&&e.formFieldData.data_type!=="section"&&e.formFieldData.data_type!=="file"&&p.value?(i(),d("div",pee,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[5]||(M[5]=F=>e.formFieldData.required_for_closure=F),disabled:!e.formFieldData.display_for_agent&&!e.formFieldData.display_on_edit,id:"required_for_closure"},null,8,_ee),[[Ve,e.formFieldData.required_for_closure]]),s("label",fee,h(C.trans("required_on_closure")),1)])):f("",!0)])):f("",!0),e.formFieldData.is_user_config?(i(),d("div",gee,[s("label",null,h(C.trans("client")),1),s("div",vee,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[6]||(M[6]=F=>e.formFieldData.display_for_user=F),id:"display-for-client",onClick:M[7]||(M[7]=F=>w("required_for_user")),disabled:e.formFieldData.default&&e.formFieldData.data_type==="section"},null,8,bee),[[Ve,e.formFieldData.display_for_user]]),s("label",yee,h(C.trans("display_in_form")),1)]),e.formFieldData.title!=="Captcha"&&e.formFieldData.data_type!=="section"?(i(),d("div",kee,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[8]||(M[8]=F=>e.formFieldData.required_for_user=F),disabled:!e.formFieldData.display_for_user&&e.formFieldData.title!=="Captcha",id:"required-for-client"},null,8,wee),[[Ve,e.formFieldData.required_for_user]]),s("label",Cee,h(C.trans("required_when_submitting_the_form")),1)])):f("",!0)])):f("",!0)])):f("",!0),e.formFieldData.title==="Api"?(i(),A(QX,{key:1,"form-field-data":e.formFieldData,"update-api-info":S},null,8,["form-field-data"])):f("",!0),s("div",Dee,[!e.formFieldData.default&&e.formFieldData.data_type!=="section"&&e.from!=="ticket-fields-form"?(i(),d("div",See,[s("label",Mee,h(C.trans("shortcode")),1),M[14]||(M[14]=L()),P(s("i",Fee,null,512),[[D,{content:C.trans("ticket_custom_field_shortcode_value"),html:!0}]]),P(s("input",{type:"text",name:"shortcode",id:"shortcode",onKeydown:M[9]||(M[9]=_a(ha(()=>{},["prevent"]),["space"])),class:"form-control","onUpdate:modelValue":M[10]||(M[10]=F=>e.formFieldData.shortcode=F)},null,544),[[ze,e.formFieldData.shortcode]])])):f("",!0),e.formFieldData.title==="Captcha"?(i(),d("div",$ee,[s("p",null,[s("strong",null,[L(h(C.trans("captcha_config_message"))+" ",1),s("a",{href:ae(m)()+"/recaptcha",target:"_new",style:{"text-decoration":"underline"}},h(C.trans("here")),9,Tee)])])])):f("",!0)]),e.formFieldData.title==="Description"&&e.formFieldData.title!=="Captcha"?(i(),d(B,{key:2},[b.value==="ticket"?(i(),d("div",Eee,[s("div",Lee,[s("div",Aee,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,id:"add-media-cb","onUpdate:modelValue":M[11]||(M[11]=F=>e.formFieldData.media_option=F)},null,512),[[Ve,e.formFieldData.media_option]]),s("label",Iee,h(C.trans("can_agent_add_media")),1)])])])):f("",!0)],64)):f("",!0),e.formFieldData.data_type==="mobile"?(i(),d("div",Pee,[s("div",Oee,[s("div",qee,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[12]||(M[12]=F=>e.formFieldData.enable_extension=F),id:"mobile-ext"},null,512),[[Ve,e.formFieldData.enable_extension]]),s("label",xee,h(C.trans("enable_extension")),1)])])])):f("",!0),e.formFieldData.data_type==="date"?(i(),d("div",Vee,[s("div",Nee,[s("div",Ree,[P(s("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[13]||(M[13]=F=>e.formFieldData.request_time_information=F),id:"date-time"},null,512),[[Ve,e.formFieldData.request_time_information]]),s("label",Uee,h(C.trans("request_time_information")),1)])])])):f("",!0)])}}},di=x(jee,[["__scopeId","data-v-52377958"]]);const Bee={class:"pt-0 ps-2 pe-2 pb-2"},Yee={class:"row"},Hee={class:"col-sm-12 form-group mb-3"},Wee=["placeholder"],zee={class:"col-sm-12 form-group mb-3"},Gee={__name:"FEFieldValidation",props:{formFieldData:{type:Object,required:!0}},setup(e){return(t,a)=>(i(),d("div",Bee,[s("div",Yee,[s("div",Hee,[s("label",null,h(t.lang("pattern_regex")),1),P(s("input",{type:"text",class:"form-input-box","onUpdate:modelValue":a[0]||(a[0]=r=>e.formFieldData.pattern=r),placeholder:t.lang("pattern_help_message")},null,8,Wee),[[ze,e.formFieldData.pattern]])]),s("div",zee,[s("label",null,h(t.lang("validation_message")),1),P(s("input",{type:"text",class:"form-input-box","onUpdate:modelValue":a[1]||(a[1]=r=>e.formFieldData.validation_message=r)},null,512),[[ze,e.formFieldData.validation_message]])])])]))}},ci=x(Gee,[["__scopeId","data-v-d7e76d2e"]]);const Kee={class:"language-menu"},Jee={class:"form-group"},Zee={class:"btn btn-light dropdown-toggle",type:"button",id:"language-list-dropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},Qee=["src"],Xee={class:"dropdown-menu dropdown-menu-lg language-dropdown right-auto","aria-labelledby":"language-list-dropdown"},ete={key:0,class:"nav-item mt-2"},tte={key:0,class:"dropdown-item dropdown-header"},ate=["onMouseenter"],ste=["onClick"],nte=["src"],ote={key:1,class:"float-end text-muted text-sm me-2"},ite={key:1,class:"dropdown-item dropdown-header"},lte=["onMouseenter"],rte=["onClick"],dte=["src"],cte={key:0,class:"float-end text-muted text-sm"},ute={class:"modal-title"},mte={__name:"LanguageDropdown",props:{auth:{type:Object,default:()=>{}},addedLanguages:{type:Array,default:()=>[]}},emits:["getflag","removeflag"],setup(e,{emit:t}){const a=Me(),{basePathVersion:r}=ut.methods,n=me(()=>a.getters.getAllLangs),o=e,m=t,p=O([]),g=O([]),b=O(!1),w=O(""),S=O("");Je(()=>{let ne=o.auth&&o.auth.user_data&&o.auth.user_data.user_language?o.auth.user_data.user_language:"en";w.value={locale:ne,name:n.value.find(ce=>ce.locale===ne).name},M()}),qt(()=>o.addedLanguages,()=>{M()},{deep:!0});const C=ne=>{S.value=ne.locale},M=()=>{b.value=!0,axios.get("api/dependency/languages?meta=true").then(ne=>{let ce=ne.data.data.languages.sort((Q,j)=>Q.name<j.name?-1:j.name<Q.name?1:0);p.value=ce.filter(Q=>!o.addedLanguages.some(j=>Q.locale===j.language)),g.value=ce.filter(Q=>o.addedLanguages.some(j=>Q.locale===j.language))}).catch(ne=>{p.value=[]}).finally(()=>{b.value=!1})},D=ne=>r()+"/themes/default/common/images/flags/"+ne+".png",F=ne=>{w.value=ne;let ce={};ce.language=ne.locale,m("getflag",ce)},I=O(!1),R=O(""),Y=ne=>{I.value=!0,R.value=ne},X=ne=>o.addedLanguages.find(Q=>Q.language===ne).id.toString().length<13,le=()=>{I.value=!1,X(R.value)?m("removeflag",{from:"db",value:R.value}):m("removeflag",{from:"local",value:R.value})};return(ne,ce)=>{const Q=H("tooltip");return i(),d("div",Kee,[s("div",Jee,[s("button",Zee,[w.value?(i(),d(B,{key:0},[s("img",{src:D(w.value.locale),alt:"Img"},null,8,Qee),L("  "+h(w.value.name),1)],64)):(i(),d(B,{key:1},[L(h(ne.trans("add_new_language")),1)],64)),ce[4]||(ce[4]=s("span",{class:"caret"},null,-1))]),s("ul",Xee,[b.value?(i(),d("li",ete,[u(ga,{size:30})])):(i(),d(B,{key:1},[g.value.length?(i(),d("span",tte,h(ne.trans("select_language")),1)):f("",!0),(i(!0),d(B,null,re(g.value,j=>(i(),d("li",{key:j.id,class:"nav-item bg-light",onMouseenter:ye=>C(j),onMouseleave:ce[1]||(ce[1]=ye=>S.value="")},[s("a",{href:"javascript:void(0)",onClick:ye=>F(j),class:"nav-link text-dark px-2 pt-1 pb-1"},[s("img",{src:D(j.locale)},null,8,nte),L(" "+h(j.name)+" ("+h(j.translation)+")‏ ",1),S.value===j.locale&&S.value!=="en"&&S.value!==ne.appLanguage?P((i(),d("span",{key:0,class:"float-end text-muted text-sm",onClick:ce[0]||(ce[0]=ye=>Y(S.value))},ce[5]||(ce[5]=[s("i",{class:"fas fa-times text-danger"},null,-1)]))),[[Q,ne.trans("delete")]]):f("",!0),S.value===j.locale?P((i(),d("span",ote,ce[6]||(ce[6]=[s("i",{class:"fas fa-pencil-alt"},null,-1)]))),[[Q,ne.trans("edit")]]):f("",!0)],8,ste)],40,ate))),128)),p.value.length?(i(),d("span",ite,h(ne.trans("add_new_language")),1)):f("",!0),(i(!0),d(B,null,re(p.value,j=>(i(),d("li",{key:j.id,class:"nav-item",onMouseenter:ye=>C(j),onMouseleave:ce[2]||(ce[2]=ye=>S.value="")},[s("a",{href:"javascript:void(0)",onClick:ye=>F(j),class:"nav-link text-dark px-2 pt-1 pb-1"},[s("img",{src:D(j.locale)},null,8,dte),L(" "+h(j.name)+" ("+h(j.translation)+")‏ ",1),S.value===j.locale?(i(),d("span",cte,ce[7]||(ce[7]=[s("i",{class:"fas fa-plus"},null,-1)]))):f("",!0)],8,rte)],40,lte))),128))],64))])]),u(Ae,{name:"modal"},{default:T(()=>[I.value?(i(),A(_t,{key:0,showModal:!0,onClose:()=>I.value=!1,containerStyle:{width:"400px"}},{title:T(()=>[s("h4",ute,h(ne.trans("delete")),1)]),fields:T(()=>[s("span",null,h(ne.trans("are_you_sure_you_want_to_delete")),1)]),controls:T(()=>[s("button",{type:"button",onClick:ce[3]||(ce[3]=j=>le()),class:"btn btn-danger"},[ce[8]||(ce[8]=s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1)),L(" "+h(ne.trans("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})])}}},hte=x(mte,[["__scopeId","data-v-18253e6b"]]);const pte={class:"fe-add-lang"},_te={class:"language-menu-dropdown"},fte={key:0,class:"add-language-box"},gte={key:0,class:"form-group mb-3"},vte=["value"],bte={class:"form-group mb-3"},yte=["name","onUpdate:modelValue"],kte={key:1,class:"form-group mb-3"},wte=["name","onUpdate:modelValue"],Cte={key:2,class:"fe-lang-tooltip"},Dte=["name","onUpdate:modelValue"],Ste={key:0,class:"form-check mt-3 ms-1"},Mte={class:"form-check-label",for:"form-tooltip-lang"},Fte={__name:"FEAddLanguage",props:{formFieldData:{type:Object,required:!0},auth:{type:Object,default:()=>{}},selectedLanguage:{type:Function,default:()=>{}}},setup(e){const t=e;let a=t.auth&&t.auth.user_data&&t.auth.user_data.user_language?t.auth.user_data.user_language:"en";const r=O([]),n=["Department","Help Topic"],o=me(()=>!n.includes(t.formFieldData.title));Je(()=>{r.value=t.formFieldData.labels.map(C=>({id:C.id,language:C.language})),b({language:a}),a!=="en"&&b({language:"en"})});const m=()=>["text","number","decimal","mobile","date","email","textarea"].indexOf(t.formFieldData.data_type)>-1,p=O(!1),g=C=>{if(C.from==="db"){const M={};M.language=C.value,axios.delete("/remove/form-field/language/"+t.formFieldData.id,{data:M}).then(D=>{K(D,"add-lang"),setTimeout(()=>{window.emitter.emit("formLangRemovedInDb")},2500)}).catch(D=>{window.emitter.emit("formLangRemoved"),setTimeout(()=>{U(D,"form-builder-main"),U(D,"ticket-section"),U(D,"ticket-fields-form")},1)})}else{window.emitter.emit("refreshFieldSettings",!0),t.formFieldData.options&&o.value&&t.formFieldData.data_type!=="section"&&t.formFieldData.options.forEach(D=>{const F=D.labels.findIndex(I=>I.language===C.value);F!==-1&&D.labels.splice(F,1)});const M=t.formFieldData.labels.findIndex(D=>D.language===C.value);M!==-1&&t.formFieldData.labels.splice(M,1),r.value=t.formFieldData.labels.map(D=>({id:D.id,language:D.language})),setTimeout(()=>{window.emitter.emit("refreshFieldSettings",!1)},1e3)}},b=C=>{p.value=!0,a=C.language,t.selectedLanguage(C.language);const M=S();C.form_identifier=M,C.id=M,t.formFieldData.options&&o.value&&t.formFieldData.data_type!=="section"&&t.formFieldData.options.forEach(D=>{C.label=D.labels[0].label,w(D.labels,C.language)||D.labels.push(new Object(Object.assign({},C)))}),w(t.formFieldData.labels,C.language)||(C.label=t.formFieldData.labels[0].label,C.description=t.formFieldData.labels[0].description,t.formFieldData.labels.push(new Object(Object.assign({},C))),r.value=t.formFieldData.labels.map(D=>({id:D.id,language:D.language}))),t.formFieldData.data_type==="mobile"&&t.formFieldData.union&&t.formFieldData.union.length&&!w(t.formFieldData.union[0].labels,C.language)&&(C.label=t.formFieldData.union[0].labels[0].label,C.description=t.formFieldData.union[0].labels[0].description,t.formFieldData.union[0].labels.push(new Object(Object.assign({},C))),r.value=t.formFieldData.labels.map(D=>({id:D.id,language:D.language}))),p.value=!1},w=(C,M)=>dt.findIndex(C,D=>D.language===M)>-1,S=()=>new Date().getTime();return(C,M)=>(i(),d("div",pte,[u(ct,{componentName:"add-lang"}),s("div",_te,[u(hte,{onGetflag:b,onRemoveflag:g,auth:e.auth,addedLanguages:r.value},null,8,["auth","addedLanguages"])]),p.value?f("",!0):(i(),d("div",fte,[(i(!0),d(B,null,re(e.formFieldData.labels,(D,F)=>(i(),d(B,null,[D.language===ae(a)?(i(),d(B,{key:0},[e.formFieldData.default?(i(),d("div",gte,[s("label",null,[L(h(C.trans("default_label"))+" ",1),u(nt,{message:C.lang("default_label_hint"),size:"small"},null,8,["message"])]),s("input",{type:"text",class:"form-control",disabled:"",value:e.formFieldData.title},null,8,vte)])):f("",!0),s("div",bte,[s("label",null,h(C.trans("label")),1),P(s("input",{type:"text",class:"form-control",placeholder:"Label",name:D.label+"_"+F,"onUpdate:modelValue":I=>D.label=I},null,8,yte),[[ze,D.label]])]),m()?(i(),d("div",kte,[s("label",null,h(C.trans("placeholder")),1),P(s("input",{type:"text",class:"form-control",placeholder:"Placeholder",name:D.place_holder+"_"+F,"onUpdate:modelValue":I=>D.place_holder=I},null,8,wte),[[ze,D.place_holder]])])):f("",!0),e.formFieldData.data_type!=="section"?(i(),d("div",Cte,[s("label",null,h(C.trans("tooltip")),1),P(s("textarea",{class:"form-control col-md-12 textarea",placeholder:"Description (Tooltip)",name:D.description+"_"+F,"onUpdate:modelValue":I=>D.description=I},`
						`,8,Dte),[[ze,D.description]]),e.formFieldData.title!=="Captcha"?(i(),d("div",Ste,[P(s("input",{class:"form-check-input cursor-pointer",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":M[0]||(M[0]=I=>e.formFieldData.show_description=I),id:"form-tooltip-lang"},null,512),[[Ve,e.formFieldData.show_description]]),s("label",Mte,h(C.lang("show_description_under_form_field")),1)])):f("",!0)])):f("",!0)],64)):f("",!0)],64))),256))]))]))}},ui=x(Fte,[["__scopeId","data-v-6dcd79a4"]]);const $te={class:"option-box"},Tte={class:"tools float-end"},Ete={__name:"NestedFieldOptions",props:{optionIndex:{type:Number,required:!0},value:{type:String,required:!0}},emits:["on-delete","on-update"],setup(e,{emit:t}){const a=e,r=O(!1),n=O(a.value),o=O(null);qt(()=>a.value,C=>{n.value=C});const m=t,p=C=>{o.value=C},g=()=>{r.value=!0,$m(()=>{o.value.focus()})},b=()=>{m("on-delete",a.optionIndex)},w=()=>{r.value=!1},S=()=>{r.value=!1,n.value===""&&(n.value=a.value),m("on-update",{newValue:n.value,index:a.optionIndex})};return(C,M)=>{const D=H("tooltip");return i(),d(B,null,[s("div",$te,[M[4]||(M[4]=s("span",{class:"handle ui-sortable-handle drag-handle"},[s("i",{class:"fas fa-ellipsis-v"}),s("i",{class:"fas fa-ellipsis-v"})],-1)),P(s("span",{class:"text m-1",onDblclick:M[0]||(M[0]=F=>g())},h(e.value),545),[[kt,!r.value]]),P(s("input",{class:"ms-1",ref:p,"onUpdate:modelValue":M[1]||(M[1]=F=>n.value=F),onKeyup:M[2]||(M[2]=_a(F=>S(),["enter"]))},null,544),[[kt,r.value],[ze,n.value,void 0,{trim:!0}]]),s("div",Tte,[P(s("i",{class:"fa fa-times fa__fb text-danger",id:"delete-option","aria-hidden":"true",onClick:M[3]||(M[3]=F=>r.value?w():b())},null,512),[[D,r.value?C.lang("cancel"):C.lang("delete")]])])]),P(s("small",{class:"option_help"},"("+h(C.trans("press_enter_to_update"))+")",513),[[kt,r.value]])],64)}}},mi=x(Ete,[["__scopeId","data-v-53f2d9eb"]]);const Lte={draggable:"false"},Ate={class:"pb-2 pe-2 ps-2 pt-0"},Ite={key:0,class:"nav nav-tabs",role:"tablist"},Pte=["id"],Ote=["onClick"],qte={key:1,class:"mt-2"},xte={key:1,class:"pt-0 pb-2"},Vte={key:0,class:"row"},Nte={class:"col-sm-12 form-group mt-2"},Rte={key:0,style:{color:"orangered"}},Ute=["placeholder"],jte={key:2,class:"mt-2"},Bte={class:"alert alert-info",role:"alert"},Yte={key:0,class:"pe-2"},Hte={class:"modal-title"},Wte={class:"setting_scroll_div pe-2"},zte={key:0,class:"nav nav-tabs",role:"tablist"},Gte=["id"],Kte=["onClick"],Jte={key:1,class:"mt-2"},Zte={key:1,class:"pt-0 pb-2"},Qte={key:0,class:"row"},Xte={class:"col-sm-12 form-group mt-2"},eae={key:0,style:{color:"orangered"}},tae=["placeholder"],aae={key:2,class:"mt-2"},sae={class:"alert alert-info",role:"alert"},nae={__name:"FieldSettings",props:{fieldData:{type:Object,required:!0},isShowSettingModal:{type:Boolean,default:!1},onCloseSettingModal:{type:Function},title:{type:String,default:""},auth:{type:Object,default:()=>{}},showCloseBtn:{type:Boolean,default:!0},fieldUpdate:{type:Function,default:()=>{}},from:{type:String,default:""},settingBtnName:{type:String,default:"apply"},showInModal:{type:Boolean,default:!0}},setup(e){const t=Me();ut.methods;const a=e,r=O(!1),n=O({width:"800px"}),o=O(null),m=O(""),p=O(""),g=O(""),b=O(""),w=O("");Je(()=>{b.value=a.auth&&a.auth.user_data&&a.auth.user_data.user_language?a.auth.user_data.user_language:"en",w.value=a.auth&&a.auth.user_data&&a.auth.user_data.user_language?a.auth.user_data.user_language:"en",o.value=a.fieldData});const S=he=>he.findIndex(ve=>ve.language===b.value)===-1?0:he.findIndex(ve=>ve.language===b.value),C=he=>{b.value=he},M=me(()=>{const he=[{id:0,value:"configuration",show:!0,label:"settings"},{id:1,value:"addOption",show:!0,label:"addOption"},{id:2,value:"validation",show:!0,label:"validation"},{id:3,value:"language",show:!0,label:"configuration"}];I()&&(he[0].show=!1),Y()&&(he[1].show=!1),R()&&(he[2].show=!1),F()&&(he[3].show=!1);const ve=he.filter(ee=>ee.show);return p.value=ve.length!==0?ve[0].value:"",ve}),D=he=>M.value.some(ve=>ve.value===he),F=()=>o.value.title==="Captcha",I=()=>o.value.is_configurable?["First Name","Last Name","Requester"].includes(o.value.title):!0,R=()=>!((o.value.data_type==="text"||o.value.data_type==="textarea"||o.value.data_type==="htmltextarea")&&!o.value.default),Y=()=>!["select","radio","select2","checkbox","multiselect"].includes(o.value.data_type)||o.value.default||o.value.title==="Api",X=he=>{j(he.newValue)||(o.value.options[he.index].labels[S(o.value.options[he.index].labels)].label=he.newValue)},le=he=>{if(o.value.options.length===1){t.dispatch("setAlert",{type:"danger",message:N("option_can_not_be_empty_alert_msg"),component_name:"form-builder-setting-modal"});return}const ve=o.value.options[he].id,ee=o.value.data_type;ve&&ve.toString().length<13?confirm("Are you sure you want to delete?")&&(r.value=!0,axios.delete("/remove/form-options/"+ve+"/"+ee).then(Ce=>{o.value.options.splice(he,1),K(Ce,"form-builder-setting-modal")}).catch(Ce=>{U(Ce,"form-builder-setting-modal")}).finally(()=>{r.value=!1})):o.value.options.splice(he,1)},ne=he=>{if(!m.value){g.value="";return}if(g.value="Press enter to add",he.keyCode===13){if(g.value="",j(m.value)){m.value="";return}const ve=ce();a.fieldData.data_type==="checkbox"&&(ve.checked=!1),Array.isArray(ve)?ve.forEach(ee=>{setTimeout(()=>{ee.id=new Date().getTime(),ee.form_identifier=new Date().getTime(),o.value.options.push(ee)},1)}):o.value.options.push(ve),m.value=""}},ce=()=>{if(m.value.indexOf(",")>-1){let he=m.value.split(","),ve=[];for(let ee in he)ve.push(Q(he[ee]));return ve}else return Q(m.value)},Q=he=>{const ve=ge();let ee=[{id:null,language:b.value,label:he}];return b.value!==w.value&&ee.push({id:null,language:w.value,label:he}),w.value!=="en"&&ee.push({id:null,language:"en",label:he}),{id:ve,form_identifier:ve,labels:ee,nodes:[],sort_order:0}},j=he=>{for(let ve=0;ve<o.value.options.length;ve++){const ee=o.value.options[ve].labels;for(let te=0;te<ee.length;te++)if(ee[te].language===b.value&&ee[te].label.toLowerCase()===he.toLowerCase())return t.dispatch("setAlert",{type:"danger",message:`Option [${he}] already present.`,component_name:"form-builder-setting-modal"}),!0}return!1},ye=he=>{t.dispatch("unsetAlert"),p.value=he},Pe=()=>{a.from==="ticket-fields-form"?a.fieldUpdate(o.value):window.emitter.emit("formFieldSettingsApplied",o.value)},ge=()=>new Date().getTime(),ke=()=>{a.onCloseSettingModal(),window.emitter.emit("formFieldSettingsClosed",o.value)},ue=O(!1);return window.emitter.on("refreshFieldSettings",he=>{ue.value=he}),Tm(()=>{t.dispatch("unsetAlert")}),(he,ve)=>{const ee=v("loader");return i(),d("div",Lte,[e.from==="ticket-fields-form"&&!e.showInModal?(i(),d(B,{key:0},[s("div",Ate,[M.value.length?(i(),d("ul",Ite,[(i(!0),d(B,null,re(M.value,te=>(i(),d(B,null,[te.id!==1&&te.id!==2?(i(),d("li",{class:"nav-item",key:te.id,id:te.id},[s("a",{class:G(["nav-link",p.value===te.value?"active font-weight-bold":""]),href:"javascript:;",onClick:Ce=>ye(te.value),"data-bs-toggle":"pill",role:"tab"},h(he.trans(te.label)),11,Ote)],8,Pte)):f("",!0)],64))),256))])):f("",!0),M.value.length?(i(),d("div",qte,[p.value==="configuration"?(i(),d(B,{key:0},[u(di,{"form-field-data":o.value,from:e.from},null,8,["form-field-data","from"]),D("validation")?(i(),A(ci,{key:0,"form-field-data":o.value},null,8,["form-field-data"])):f("",!0)],64)):f("",!0),p.value==="language"?(i(),d("div",xte,[ue.value?(i(),A(ee,{key:0,size:60})):f("",!0),ue.value?f("",!0):(i(),d(B,{key:1},[u(ui,{"form-field-data":o.value,auth:e.auth,selectedLanguage:C},null,8,["form-field-data","auth"]),D("addOption")?(i(),d("div",Vte,[s("div",Nte,[s("label",null,[L(h(ae(N)("options")),1),g.value?(i(),d("small",Rte,"("+h(g.value)+")",1)):f("",!0)]),P(s("input",{ref:"addOptionInput",type:"text",placeholder:ae(N)("add_new_option"),class:"form-control","onUpdate:modelValue":ve[0]||(ve[0]=te=>m.value=te),onKeyup:ve[1]||(ve[1]=te=>ne(te))},null,40,Ute),[[ze,m.value,void 0,{trim:!0}]]),r.value?(i(),A(ee,{key:0,size:20})):f("",!0),u(ae(yt),{modelValue:o.value.options,"onUpdate:modelValue":ve[2]||(ve[2]=te=>o.value.options=te),class:"todo-list ui-sortable mt-2 h-200",handle:".drag-handle"},{item:T(({element:te,index:Ce})=>[(i(),d("li",{key:te.id},[u(mi,{"option-index":Ce,value:te.labels[S(te.labels)].label,onOnDelete:le,onOnUpdate:X},null,8,["option-index","value"])]))]),_:1},8,["modelValue"])])])):f("",!0)],64))])):f("",!0)])):(i(),d("div",jte,[s("div",Bte,h(he.trans("this_field_is_not_editable")),1)]))]),M.value.length?(i(),d("div",Yte,[s("button",{class:"btn btn-primary float-end",onClick:ve[3]||(ve[3]=te=>Pe())},[s("i",{class:G(e.settingBtnName==="save"?"fas fa-save":"fas fa-check")},null,2),L(" "+h(ae(N)(e.settingBtnName)),1)])])):f("",!0)],64)):(i(),d(B,{key:1},[e.isShowSettingModal?(i(),A(_t,{key:0,showModal:e.isShowSettingModal,onClose:ke,containerStyle:n.value,showCloseBtn:e.showCloseBtn},{title:T(()=>[s("h4",Hte,h(he.trans("settings")+" ("+o.value.labels[S(o.value.labels)].label+")"),1)]),alert:T(()=>[u(ct,{componentName:"form-builder-setting-modal"})]),fields:T(()=>[s("div",Wte,[M.value.length?(i(),d("ul",zte,[(i(!0),d(B,null,re(M.value,te=>(i(),d(B,null,[te.id!==1&&te.id!==2?(i(),d("li",{class:"nav-item",key:te.id,id:te.id},[s("a",{class:G(["nav-link",p.value===te.value?"active font-weight-bold":""]),href:"javascript:;",onClick:Ce=>ye(te.value),"data-bs-toggle":"pill",role:"tab"},h(he.trans(te.label)),11,Kte)],8,Gte)):f("",!0)],64))),256))])):f("",!0),M.value.length?(i(),d("div",Jte,[p.value==="configuration"?(i(),d(B,{key:0},[u(di,{"form-field-data":o.value,from:e.from},null,8,["form-field-data","from"]),D("validation")?(i(),A(ci,{key:0,"form-field-data":o.value},null,8,["form-field-data"])):f("",!0)],64)):f("",!0),p.value==="language"?(i(),d("div",Zte,[ue.value?(i(),A(ee,{key:0,size:60})):f("",!0),ue.value?f("",!0):(i(),d(B,{key:1},[u(ui,{"form-field-data":o.value,auth:e.auth,selectedLanguage:C},null,8,["form-field-data","auth"]),D("addOption")?(i(),d("div",Qte,[s("div",Xte,[s("label",null,[L(h(ae(N)("options")),1),g.value?(i(),d("small",eae,"("+h(g.value)+")",1)):f("",!0)]),P(s("input",{ref:"addOptionInput",type:"text",placeholder:ae(N)("add_new_option"),class:"form-control","onUpdate:modelValue":ve[4]||(ve[4]=te=>m.value=te),onKeyup:ve[5]||(ve[5]=te=>ne(te))},null,40,tae),[[ze,m.value,void 0,{trim:!0}]]),r.value?(i(),A(ee,{key:0,size:20})):f("",!0),u(ae(yt),{modelValue:o.value.options,"onUpdate:modelValue":ve[6]||(ve[6]=te=>o.value.options=te),class:"todo-list ui-sortable mt-2 h-200",handle:".drag-handle"},{item:T(({element:te,index:Ce})=>[(i(),d("li",{key:te.id},[u(mi,{"option-index":Ce,value:te.labels[S(te.labels)].label,onOnDelete:le,onOnUpdate:X},null,8,["option-index","value"])]))]),_:1},8,["modelValue"])])])):f("",!0)],64))])):f("",!0)])):(i(),d("div",aae,[s("div",sae,h(he.trans("this_field_is_not_editable")),1)]))])]),controls:T(()=>[M.value.length?(i(),d("button",{key:0,class:"btn btn-light float-end",onClick:ve[7]||(ve[7]=te=>Pe())},[s("i",{class:G(e.settingBtnName==="save"?"fas fa-save":"fas fa-check")},null,2),L(" "+h(ae(N)(e.settingBtnName)),1)])):f("",!0)]),_:1},8,["showModal","containerStyle","showCloseBtn"])):f("",!0)],64))])}}},fn=x(nae,[["__scopeId","data-v-a7f79af9"]]);const oae={class:"col-sm-12"},iae={class:"row"},lae={key:0,class:"col-sm-3"},rae={class:"card sticky-top sticky-fields mb-1"},dae={class:"p-2"},cae={class:"row"},uae={class:"col-12"},mae={class:"nav nav-tabs",role:"tablist"},hae={class:"nav-item"},pae={key:0,class:"nav-item"},_ae={key:1,class:"nav-item"},fae={class:"col-sm-9"},gae={class:"card card-light"},vae={key:1,class:"card-header"},bae={class:"card-title"},yae={class:"card-tools"},kae={class:"card-body p-2"},wae={key:0,class:"row no-drag-form-card"},Cae={class:"text-center pt-4 no-drag-fields"},Dae=["src"],Sae={class:"modal-title"},Mae={class:"modal-title"},Fae={__name:"FormBuilder",props:{auth:{type:Object,default:()=>({})},formCategoryType:{type:String,default:""}},setup(e){const t=Me();wt();const a=ft(),{basePathVersion:r}=ut.methods,n=O(""),o=O(!0),m=O(!1),p=O(!1),g=O("form"),b=O("fields"),w=O(!1),S=O(""),C=O(""),M=O(""),D=O(!1),F=O(!1),I=O(""),R=O(""),Y=O(!1);Je(()=>{R.value=t.getters.getClonedForm,I.value=R.value?R.value.id:a.params.id,R.value?Q().then(se=>{p.value=!0,m.value=!0,setTimeout(()=>{j()},1e3)}):X()});const X=()=>{n.value=a.params.type,le(),ne()},le=()=>{V.get("api/get-form-menu/"+n.value).then(se=>{t.commit("updateFormMenu",se.data.data),m.value=!0})},ne=()=>{Q().then(se=>{p.value=!0})},ce=O(""),Q=()=>{o.value=!0,t.commit("updateFormCategoryType",n.value);let se="render/form",de={category:a.params.type,id:I.value,mode:"config"};return V.get(se,{params:de}).then(Se=>(g.value=Se.data.data.name,D.value=Se.data.data.is_default,F.value=Se.data.data.is_active,Y.value=Se.data.data.is_multiple,ce.value=Se.data.data.type,t.commit("updateFormSections",Se.data.data.form_sections),o.value=!1,Se)).catch(Se=>{o.value=!1,U(Se,"form-builder-main")})},j=async()=>{const se=t.getters.getFormSections;ye(se),await Pe(se)},ye=se=>{for(let de=0;de<se.length;de++){const Se=se[de];Se.sort_order=de,Se.form_fields&&typeof Se.form_fields=="object"?Object.keys(Se.form_fields).forEach(qe=>{const Fe=Se.form_fields[qe];for(let Xe=0;Xe<Fe.length;Xe++)Fe[Xe].sort_order=Xe;ye(Fe)}):Object.keys(se[de]).forEach(qe=>{Te(se[de][qe])&&Array.isArray(se[de][qe])&&ye(se[de][qe])})}},Pe=async se=>{be.value=!1;try{o.value=!0;const de=se.filter(qe=>{if(qe.data_type==="section"){const Fe=qe.form_fields.first?qe.form_fields.first.length===0:!1,Xe=qe.form_fields.second?qe.form_fields.second.length===0:!1;return!(Fe&&Xe||Fe&&!qe.form_fields.second||!qe.form_fields.first&&Xe)}return!0}),Se=await ge("/post/form-fields",de);he(Se)}catch(de){ee(de)}},ge=async(se,de)=>{let Se=ke(de);return z(),await V.post(se,ue(Se))},ke=se=>{for(let de=0;de<se.length;de++)if(se[de].form_fields&&typeof se[de].form_fields=="object"&&!Array.isArray(se[de].form_fields)){const Se=se[de].form_fields.first||[],qe=se[de].form_fields.second||[];Se.forEach(Fe=>{Fe.column="first"}),qe.forEach(Fe=>{Fe.column="second"}),se[de].form_fields=Se.concat(qe),se[de].form_fields.forEach(Fe=>{Te(Fe.options)&&Fe.options.forEach(Xe=>{ke(Xe.nodes?Xe.nodes:[])})})}else Te(se[de].options)&&se[de].options.forEach(Se=>{ke(Se.nodes?Se.nodes:[])});return se},ue=se=>{let de={};return de.category=a.params.type,de.id=a.params.id,de.is_clone=1,de.is_delete=0,de.is_active=F.value?1:0,de.is_default=R.value?0:D.value?1:0,de.form_sections=se,de},he=se=>{if(R.value){I.value=a.params.id,t.dispatch("updateCloneableFormData",""),X(),K(se,"form-builder-main");return}K(se,"form-builder-main"),ve()},ve=()=>{Q().then(()=>{o.value=!1})},ee=se=>{o.value=!1,Q(),U(se,"form-builder-main")},te=O(!1),Ce=O(""),be=O(!1),Ne=se=>{if(window.emitter.off("updateMenuOnChildSelect"),se==="fields"&&(m.value=!1,le()),be.value){te.value=!0,Ce.value=se;return}b.value=se};let J=O(!1),pe=O(null);const z=()=>{J.value=!1,pe.value=null},ie=({data:se})=>{J.value=!1,pe.value=se,setTimeout(()=>{J.value=!0},0)},Z=me({get(){return t.getters.getFormSections},set(se){t.dispatch("updateFormSections",se)}}),De=async se=>{const de=t.getters.getFormSections;await Mt(de,se.form_identifier,se)&&await t.dispatch("updateFormSections",de),z(),window.emitter.emit("updateNestedObjects")},Mt=(se,de,Se)=>{let qe=dt.findIndex(se,Fe=>Fe.form_identifier===de);if(qe!==-1)se[qe]=Se;else for(let Fe=0;Fe<se.length;Fe++)se[Fe].form_fields&&typeof se[Fe].form_fields=="object"?Object.keys(se[Fe].form_fields).forEach(Xe=>{Mt(se[Fe].form_fields[Xe],de,Se)}):Te(se[Fe].options)&&se[Fe].options.forEach(Xe=>{Mt(Xe.nodes?Xe.nodes:[],de,Se)});return new Promise(Fe=>{Fe(!0)})},Nt=se=>{w.value=!0,S.value=se.reference_type,C.value=se.fieldData,M.value=se.reference_id},Pa=()=>{w.value=!1,gs(C.value)?fs(C.value.id,M.value,S.value,C.value):_s(C.value.form_identifier,C.value)},_s=(se,de)=>{const Se=t.getters.getFormSections;ya(Se,se)&&(t.dispatch("updateFormFields",Se),window.emitter.emit("updateNestedObjects"),window.emitter.emit("updateMenuCount",{field:de,from:"local"}),z())},fs=(se,de,Se,qe)=>{o.value=!0;let Fe=C.value.data_type==="section"?"/remove/form-sections/"+se:"/remove/form-fields/"+se;de&&(Fe="api/unlink-form-group/"+Se+"/"+de),V.delete(Fe).then(Xe=>{K(Xe,"form-builder-main"),p.value=!1,Q().then(()=>{p.value=!0}),o.value=!1,window.emitter.emit("updateNestedObjects"),window.emitter.emit("updateMenuCount",{field:qe,from:"db"}),z(),b.value==="default_fields"&&window.emitter.emit("removeElementFromDB")}).catch(Xe=>{o.value=!1,U(Xe,"form-builder-main")})},gs=se=>se.type==="group"?typeof se.groupid>"u":se.temp_id?se.temp_id.toString().length<13:se.id.toString().length<13,ya=(se,de)=>{let Se=dt.findIndex(se,qe=>qe.form_identifier===de);if(Se!==-1)se.splice(Se,1);else for(let qe=0;qe<se.length;qe++)se[qe].form_fields&&typeof se[qe].form_fields=="object"?Object.keys(se[qe].form_fields).forEach(Fe=>{ya(se[qe].form_fields[Fe],de)}):Te(se[qe].options)&&se[qe].options.forEach(Fe=>{ya(Fe.nodes?Fe.nodes:[],de)});return Promise.resolve(!0)},vs=()=>{p.value=!1,m.value=!1,le(),Q().then(()=>{b.value=Ce.value,te.value=!1,p.value=!0,be.value=!1})},bs=()=>{j(),b.value=Ce.value,te.value=!1,be.value=!1,le()},ys=()=>{p.value=!1,Q().then(()=>{p.value=!0}),o.value=!1,z()};return window.emitter.on("formFieldSettingsApplied",De),window.emitter.on("onRemoveElement",Nt),window.emitter.on("getFormDataFromServer",Q),window.emitter.on("onEditElement",ie),window.emitter.on("formBuilderModified",()=>{be.value=!0}),window.emitter.on("formLangRemoved",z),window.emitter.on("formLangRemovedInDb",ys),(se,de)=>(i(),d("div",oae,[u(ct,{"component-name":"form-builder-main"}),s("div",iae,[m.value?(i(),d("div",lae,[s("div",rae,[s("div",dae,[s("div",cae,[s("div",uae,[s("ul",mae,[s("li",hae,[s("a",{class:G(["nav-link",b.value==="fields"?"active font-weight-bold plr-5":""]),href:"javascript:;",onClick:de[0]||(de[0]=Se=>Ne("fields")),"data-bs-toggle":"pill",role:"tab"},h(se.trans("formfields")),3)]),D.value?f("",!0):(i(),d("li",pae,[s("a",{class:G(["nav-link",b.value==="default_fields"?"active font-weight-bold plr-5":""]),href:"javascript:;",onClick:de[1]||(de[1]=Se=>Ne("default_fields")),"data-bs-toggle":"pill",role:"tab"},h(se.trans("default_fields")),3)])),Y.value?(i(),d("li",_ae,[s("a",{class:G(["nav-link",b.value==="shared_fields"?"active font-weight-bold plr-5":""]),href:"javascript:;",onClick:de[2]||(de[2]=Se=>Ne("shared_fields")),"data-bs-toggle":"pill",role:"tab"},h(se.trans("shared_fields")),3)])):f("",!0)]),(i(),A(tr,{key:b.value,type:b.value,isDefaultForm:D.value},null,8,["type","isDefaultForm"]))])])])])])):f("",!0),p.value&&m.value?(i(),d(B,{key:1},[s("div",fae,[s("div",gae,[o.value?(i(),A(ga,{key:0})):f("",!0),p.value&&m.value?(i(),d("div",vae,[s("h3",bae,h(g.value),1),s("div",yae,[s("button",{class:"btn btn-primary form-save-btn float-end form_save_btn",onClick:de[3]||(de[3]=Se=>j())},[de[7]||(de[7]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(se.trans("save")),1)]),D.value?f("",!0):(i(),A(lt,{key:0,name:"is_active",value:F.value,onChange:Se=>F.value=Se,classname:"float-end",bold:!0},null,8,["value","onChange"]))])])):f("",!0),s("div",kae,[u(sr,{sections:Z.value,auth:e.auth,formType:ce.value},null,8,["sections","auth","formType"]),Z.value.length?f("",!0):(i(),d("div",wae,[s("div",Cae,[s("img",{src:ae(r)()+"/themes/default/common/images/drag.png",alt:"form-no-drag",class:"no-drag-img"},null,8,Dae),s("h5",null,h(se.trans("drag_elements_here")),1),s("p",null,h(se.trans("drag_an_element_from_the_left")),1)])]))])])]),ae(J)?(i(),A(fn,{key:0,fieldData:ae(pe),isShowSettingModal:ae(J),onCloseSettingModal:z,auth:e.auth},null,8,["fieldData","isShowSettingModal","auth"])):f("",!0)],64)):f("",!0)]),u(Ae,{name:"modal"},{default:T(()=>[w.value?(i(),A(_t,{key:0,showModal:!0,onClose:()=>w.value=!1,containerStyle:{width:"400px"}},{title:T(()=>[s("h4",Sae,h(se.trans("delete")),1)]),fields:T(()=>[s("span",null,h(se.trans("are_you_sure_you_want_to_delete")),1)]),controls:T(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:de[4]||(de[4]=Se=>Pa()),class:"btn btn-secondary"},[de[8]||(de[8]=s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1)),L(" "+h(se.trans("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1}),u(Ae,{name:"modal"},{default:T(()=>[te.value?(i(),A(_t,{key:0,showModal:!0,"show-close-btn":!1,containerStyle:{width:"400px"},footerClass:"justify-content-between"},{title:T(()=>[s("h4",Mae,h(se.trans("confirm")),1)]),fields:T(()=>[s("span",null,h(se.trans("do_you_want_to_save_these_changes")),1)]),controls:T(()=>[s("button",{type:"button",onClick:de[5]||(de[5]=Se=>vs()),class:"btn btn-light"},[de[9]||(de[9]=s("i",{class:"fas fa-times","aria-hidden":"true"},null,-1)),L(" "+h(se.trans("no_discard")),1)]),s("button",{type:"button",onClick:de[6]||(de[6]=Se=>bs()),class:"btn btn-primary"},[de[10]||(de[10]=s("i",{class:"fas fa-check","aria-hidden":"true"},null,-1)),L(" "+h(se.trans("yes_keep")),1)])]),_:1})):f("",!0)]),_:1})]))}},$ae=x(Fae,[["__scopeId","data-v-aa64536f"]]),Tae={class:"col-sm-12"},Eae={class:"card card-light"},Lae={class:"card-header"},Aae={class:"card-title text-capitalize"},Iae={class:"card-body"},Pae={key:0,class:"row"},Oae={class:"settingiconblue"},qae={class:"settingdivblue"},xae={class:"fa-stack fa-2x"},Vae={class:"text-center text-sm fw_400"},Nae={__name:"FormsEntry",setup(e){const t=O([]),a=O(!0),r=()=>{a.value=!0,axios.get("/admin/manage/forms").then(o=>{t.value=o.data.data,a.value=!1}).catch(o=>{a.value=!1,U(o,"forms-entry-page")})},n=me(()=>t.value.reduce((o,m)=>(o[m.type]||(o[m.type]=[]),o[m.type].push(m),o),{}));return Je(()=>{r()}),(o,m)=>{const p=v("router-link"),g=H("tooltip");return i(),d("div",Tae,[u(ct,{"component-name":"forms-entry"}),a.value?(i(),A(Zt,{key:0})):f("",!0),(i(!0),d(B,null,re(n.value,(b,w)=>(i(),d("div",Eae,[s("div",Lae,[s("h3",Aae,h(o.trans(w)),1)]),s("div",Iae,[a.value?f("",!0):(i(),d("div",Pae,[(i(!0),d(B,null,re(b,(S,C)=>(i(),d("div",{class:"col-md-2 col-sm-6",key:C},[s("div",Oae,[s("div",qae,[P((i(),A(p,{to:S.is_multiple?"/new/forms/"+S.category+"/list":"/new/forms/"+S.category+"/"+S.id+"/edit"},{default:T(()=>[s("span",xae,[s("i",{class:G(["fas "+S.icon_class,"fa-stack-1x"])},null,2)])]),_:2},1032,["to"])),[[g,o.trans(S.title)]])]),s("div",Vae,h(o.trans(S.title)),1)])]))),128))]))])]))),256))])}}};const Rae={class:"col-sm-12"},Uae={class:"card card-light card-tabs"},jae={class:"card-header p-0 pt-1"},Bae={class:"nav nav-tabs",id:"custom-tabs-one-tab",role:"tablist"},Yae=["onClick"],Hae={class:"nav-item ms-auto mt-1 me-2"},Wae={class:"card-body",id:"fields-list"},zae={class:"tab-content"},Gae={class:"tab-pane fade active show",role:"tabpanel"},Kae={__name:"TicketFieldsIndex",setup(e){const t=Me(),a=ft(),r=O("formFields"),n=O([{id:"formFields",title:"fields"},{id:"sections",title:"sections"}]),o=O("/get/field-managers/ticket?relation=formFields"),m=O(["label","data_type","created_at","actions"]),p=O({}),g=O(!1),b=w=>{if(r.value!==w){const S=window.location.origin+window.location.pathname;history.replaceState({},document.title,S),g.value=!0,r.value=w,o.value="/get/field-managers/ticket?relation="+w,setTimeout(()=>{g.value=!1},1)}};return Je(()=>{a.query&&a.query.page&&(r.value=a.query.page,o.value="/get/field-managers/ticket?relation="+r.value),p.value={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},columnsClasses:{data_type:"field-data-type"},headings:{label:N("label"),data_type:N("data_type"),created_at:N("created_at"),actions:N("actions")},sortable:["label","created_at","data_type"],filterable:["label","created_at","data_type"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(w){return{paginate:1,"sort-field":w.orderBy?w.orderBy:"id","sort-order":w.ascending?"asc":"desc","search-query":w.query.trim(),page:w.page,limit:w.limit}},responseAdapter({data:w}){return{data:w.data.data.map(S=>(S.edit_url="/ticket-fields/edit/"+r.value+"/"+S.data_type+"/"+S.id,S.delete_url=S.delete_api,S.alertComponentName="ticket-fields-index",S)),count:w.data.total}},orderBy:{column:"id",ascending:!0},templates:{created_at:(w,S)=>t.getters.formattedTime(S.created_at),actions:(w,S)=>tt(Ye,{data:S})}}}),(w,S)=>{const C=v("router-link"),M=H("tooltip");return i(),d("div",Rae,[u(ct,{componentName:"ticket-fields-index"}),s("div",Uae,[s("div",jae,[s("ul",Bae,[(i(!0),d(B,null,re(n.value,(D,F)=>(i(),d("li",{class:"nav-item",key:F},[s("a",{class:G(["nav-link",{active:r.value===D.id}]),"data-bs-toggle":"pill",href:"javascript:;",role:"tab","aria-selected":"true",onClick:I=>b(D.id)},h(w.trans(D.title)),11,Yae)]))),128)),s("li",Hae,[P((i(),A(C,{to:"/ticket-fields/"+r.value+"/create",class:"btn btn-tool",href:"javascript:;"},{default:T(()=>S[0]||(S[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1},8,["to"])),[[M,w.trans("create")]])])])]),s("div",Wae,[s("div",zae,[s("div",Gae,[u(La,{url:o.value,"data-columns":m.value,option:p.value,scroll_to:"fields-list"},null,8,["url","data-columns","option"])])])])])])}}},Jae=x(Kae,[["__scopeId","data-v-fc588ab0"]]);const Zae={class:"col-sm-12"},Qae={class:"card card-light"},Xae={class:"card-header"},ese={class:"card-title"},tse={class:"card-body"},ase={key:1,class:"row"},sse={class:"col-sm-4"},nse={class:"row"},ose=["onClick","onMouseenter","onMouseleave"],ise={key:0,class:"overlay"},lse={key:1,class:"info-box-icon menu-icon"},rse={class:"info-box-text"},dse={class:"badge badge-count-right p-1"},cse={key:1,class:"fas fa-plus fa-2x text-muted"},use={class:"col-sm-8"},mse={key:1,class:"row"},hse={class:"col-sm-12"},pse={key:1,class:"row no-drag-form-card"},_se={class:"text-center pt-4 no-drag-fields"},fse=["src"],gse={__name:"TicketFieldsForm",props:{auth:{type:Object,default:()=>{}}},setup(e){const{basePathVersion:t}=ut.methods,a=wt(),r=ft();Me();const n=O([]),o=O(!1),m=O(!0),p=O(!1),g=O(""),b=()=>{axios.get("api/get-form-menu/ticket").then(R=>{n.value=R.data.data.map(Y=>({...Y,showOnlyIcon:!1})).filter(Y=>Y.data_type!=="section"),o.value=!0})},w=R=>{R.showOnlyIcon=!0},S=R=>{R.showOnlyIcon=!1},C=R=>{m.value=!1,setTimeout(()=>{m.value=!0},1e3),g.value=R},M=()=>{if(g.value.options&&g.value.options.length)for(let R=0;R<g.value.options.length;R++)g.value.options[R].sort_order=R;p.value=!0,axios.post("/post/field-managers/ticket",g.value).then(R=>{p.value=!1,K(R,"ticket-fields-form"),r.name==="ticket.fields.edit"?D(r.params.id,r.params.type):setTimeout(()=>{a.push({name:"ticket.fields.index"})},3e3)}).catch(R=>{p.value=!1,U(R,"ticket-fields-form")})};Je(()=>{b(),r.name==="ticket.fields.edit"&&D(r.params.id,r.params.type)});const D=(R,Y)=>{p.value=!0,axios.get("/field-manager/ticket?data_type="+Y+"&id="+R+"&time="+Date.now()).then(X=>{p.value=!1,g.value=X.data.data}).catch(X=>{p.value=!1,U(X,"ticket-fields-form")})},F=R=>R.count?r.name==="ticket.fields.edit"?g.value.title===R.title?"bg-primary pe-none":"bg-light pe-none":g.value.title===R.title?"bg-primary pe-none":"bg-light":"bg-light pe-none",I=()=>{p.value=!0,setTimeout(()=>{r.name==="ticket.fields.edit"?D(r.params.id,r.params.type):p.value=!1},3100)};return window.emitter.on("formLangRemovedInDb",I),window.emitter.on("formLangRemoved",I),(R,Y)=>(i(),d("div",Zae,[u(ct,{"component-name":"ticket-fields-form"}),s("div",Qae,[s("div",Xae,[s("h3",ese,h(R.trans("add_field")),1)]),s("div",tse,[!o.value||p.value?(i(),A(Zt,{key:0})):f("",!0),o.value&&!p.value?(i(),d("div",ase,[s("div",sse,[s("div",nse,[(i(!0),d(B,null,re(n.value,(X,le)=>(i(),d("div",{class:"col-sm-6",key:le},[(i(),d("div",{class:G(["info-box menu-info-box",F(X)]),key:X.id,onClick:ne=>C(X),onMouseenter:ne=>w(X),onMouseleave:ne=>S(X)},[ae(r).name==="ticket.fields.edit"&&g.value.title!==X.title||!X.count?(i(),d("div",ise)):f("",!0),X.icon_class&&!X.showOnlyIcon?(i(),d("span",lse,[s("i",{class:G(["fas",X.icon_class])},null,2)])):f("",!0),s("div",{class:G(["info-box-content",X.showOnlyIcon&&g.value.title!==X.title?"text-center":""])},[s("span",rse,[X.showOnlyIcon?f("",!0):(i(),d(B,{key:0},[L(h(X.title)+"  ",1),s("small",dse,h(X.count?X.count:0),1)],64)),X.showOnlyIcon&&X.count?(i(),d("i",cse)):f("",!0)])],2)],42,ose))]))),128))])]),s("div",use,[m.value?(i(),d("div",mse,[s("div",hse,[g.value?(i(),A(fn,{key:0,"field-data":g.value,auth:e.auth,showCloseBtn:!1,from:"ticket-fields-form",fieldUpdate:M,settingBtnName:"save",showInModal:!1},null,8,["field-data","auth"])):(i(),d("div",pse,[s("div",_se,[Y[0]||(Y[0]=s("i",{class:"fas fa-mouse-pointer"},null,-1)),s("img",{src:ae(t)()+"/themes/default/common/images/drag.png",alt:"form-no-drag",class:"no-select-img"},null,8,fse),s("h5",null,h(R.trans("select_an_element_from_the_left")),1)])]))])])):(i(),A(Zt,{key:0}))])])):f("",!0)])])]))}},hi=x(gse,[["__scopeId","data-v-99b9e14e"]]);const vse={class:"col-sm-12"},bse={class:"card card-light shadow-none"},yse={class:"card-header sticky-top menu-border sticky-top-menu"},kse={class:"card-title"},wse={key:1,class:"card-tools"},Cse={class:"card-body p-0 pt-2 bg-light"},Dse={class:"row"},Sse={class:"col-sm-3"},Mse={class:"card sticky-top sticky-fields"},Fse={class:"card-body p-2"},$se={class:"row"},Tse={key:0,class:"col-12"},Ese={class:"btn-group w-100"},Lse={class:"btn btn-light field-btn active cursor-default"},Ase={class:"card"},Ise={class:"card-body p-2"},Pse={key:0,class:"row no-drag-form-card"},Ose={class:"text-center pt-4 no-drag-fields"},qse=["src"],xse={key:0,class:"col-sm-3"},Vse={class:"modal-title"},Nse={__name:"TicketSectionsForm",props:{auth:{type:Object,default:()=>({})}},setup(e){const t=Me(),a=wt(),r=ft(),{basePathVersion:n}=ut.methods,o=O(!0),m=O(!1),p=O(!1),g=O(!1),b=O(""),w=O(""),S=O("");Je(()=>{C(),M()});const C=()=>{V.get("api/get-form-menu/ticket").then(J=>{t.commit("updateFormMenu",J.data.data),m.value=!0})},M=()=>{D().then(J=>{p.value=!0})},D=()=>{o.value=!0;let J=r.name==="ticket.sections.edit"?"/field-manager/ticket?data_type="+r.params.type+"&id="+r.params.id:"/field-manager-section";return V.get(J).then(pe=>(t.commit("updateFormSections",r.name==="ticket.sections.edit"?[pe.data.data]:pe.data.data),o.value=!1,pe)).catch(pe=>{o.value=!1,U(pe,"ticket-section")})},F=async()=>{const J=t.getters.getFormSections;I(J),await R(J)},I=J=>{for(let pe=0;pe<J.length;pe++){const z=J[pe];z.sort_order=pe,z.form_fields&&typeof z.form_fields=="object"?Object.keys(z.form_fields).forEach(ie=>{const Z=z.form_fields[ie];for(let De=0;De<Z.length;De++)Z[De].sort_order=De;I(Z)}):Object.keys(J[pe]).forEach(ie=>{Te(J[pe][ie])&&Array.isArray(J[pe][ie])&&I(J[pe][ie])})}},R=async J=>{try{o.value=!0;const pe=J.filter(Z=>{if(Z.data_type==="section"){const De=Z.form_fields.first?Z.form_fields.first.length===0:!1,Mt=Z.form_fields.second?Z.form_fields.second.length===0:!1;return!(De&&Mt||De&&!Z.form_fields.second||!Z.form_fields.first&&Mt)}return!0}),ie=await Y("/post/field-managers/ticket",pe);le(ie)}catch(pe){ce(pe)}},Y=async(J,pe)=>{let z=X(pe);return ye(),await V.post(J,z[0])},X=J=>{for(let pe=0;pe<J.length;pe++)if(J[pe].form_fields&&typeof J[pe].form_fields=="object"&&!Array.isArray(J[pe].form_fields)){const z=J[pe].form_fields.first||[],ie=J[pe].form_fields.second||[];z.forEach(Z=>{Z.column="first"}),ie.forEach(Z=>{Z.column="second"}),J[pe].form_fields=z.concat(ie),J[pe].form_fields.forEach(Z=>{Te(Z.options)&&Z.options.forEach(De=>{X(De.nodes)})})}else Te(J[pe].options)&&J[pe].options.forEach(z=>{X(z.nodes)});return J},le=J=>{K(J,"ticket-section"),r.name==="ticket.sections.create"?a.push({path:"/ticket-fields/list",query:{page:"sections"}}):ne()},ne=()=>{D().then(()=>{o.value=!1})},ce=J=>{o.value=!1,U(J,"ticket-section")};let Q=O(!1),j=O(null);const ye=()=>{Q.value=!1,j.value=null},Pe=({data:J})=>{Q.value=!1,j.value=J,setTimeout(()=>{Q.value=!0},0)},ge=me({get(){return t.getters.getFormSections},set(J){t.dispatch("updateFormSections",J)}}),ke=async J=>{const pe=t.getters.getFormSections;await ue(pe,J.form_identifier,J)&&await t.dispatch("updateFormSections",pe),ye(),window.emitter.emit("updateNestedObjects")},ue=(J,pe,z)=>{let ie=dt.findIndex(J,Z=>Z.form_identifier===pe);if(ie!==-1)J[ie]=z;else for(let Z=0;Z<J.length;Z++)J[Z].form_fields&&typeof J[Z].form_fields=="object"?Object.keys(J[Z].form_fields).forEach(De=>{ue(J[Z].form_fields[De],pe,z)}):Te(J[Z].options)&&J[Z].options.forEach(De=>{ue(De.nodes,pe,z)});return new Promise(Z=>{Z(!0)})},he=J=>{g.value=!0,b.value=J.reference_type,w.value=J.fieldData,S.value=J.reference_id},ve=()=>{g.value=!1,Ce(w.value)?te(w.value.id,S.value,b.value,w.value):ee(w.value.form_identifier,w.value)},ee=(J,pe)=>{const z=t.getters.getFormSections;be(z,J)&&(ye(),window.emitter.emit("updateNestedObjects"),window.emitter.emit("updateMenuCount",{field:pe,from:"local"}),t.dispatch("updateFormFields",z))},te=(J,pe,z,ie)=>{o.value=!0;let Z=w.value.data_type==="section"?"/remove/form-sections/"+J:"/remove/form-fields/"+J;V.delete(Z).then(De=>{K(De,"ticket-section"),p.value=!1,D().then(()=>{p.value=!0}),o.value=!1,window.emitter.emit("updateNestedObjects"),window.emitter.emit("updateMenuCount",{field:ie,from:"db"}),ye()}).catch(De=>{o.value=!1,U(De,"ticket-section")})},Ce=J=>J.type==="group"?typeof J.groupid>"u":J.id.toString().length<13,be=(J,pe)=>{let z=dt.findIndex(J,ie=>ie.form_identifier===pe);if(z!==-1)J.splice(z,1);else for(let ie=0;ie<J.length;ie++)J[ie].form_fields&&typeof J[ie].form_fields=="object"?Object.keys(J[ie].form_fields).forEach(Z=>{be(J[ie].form_fields[Z],pe)}):Te(J[ie].options)&&J[ie].options.forEach(Z=>{be(Z.nodes,pe)});return Promise.resolve(!0)},Ne=()=>{p.value=!1,D().then(()=>{p.value=!0}).catch(J=>{p.value=!0}),o.value=!1,ye()};return window.emitter.on("formFieldSettingsApplied",ke),window.emitter.on("onRemoveElement",he),window.emitter.on("getFormDataFromServer",D),window.emitter.on("onEditElement",Pe),window.emitter.on("formLangRemoved",ye),window.emitter.on("formLangRemovedInDb",Ne),(J,pe)=>(i(),d("div",vse,[u(ct,{"component-name":"ticket-section"}),s("div",bse,[s("div",yse,[o.value?(i(),A(ga,{key:0})):f("",!0),s("h3",kse,h(J.trans("ticket_section")),1),p.value&&m.value?(i(),d("div",wse,[s("button",{class:"btn btn-primary form_save_btn float-end form-save-btn",onClick:pe[0]||(pe[0]=z=>F())},[pe[2]||(pe[2]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(J.trans("save")),1)])])):f("",!0)]),s("div",Cse,[s("div",Dse,[s("div",Sse,[s("div",Mse,[s("div",Fse,[s("div",$se,[m.value?(i(),d("div",Tse,[s("div",Ese,[s("a",Lse,h(J.trans("formfields")),1)]),u(tr,{from:"ticket-sections"})])):f("",!0)])])])]),p.value&&m.value?(i(),d(B,{key:0},[s("div",{class:G(ae(Q)?"col-sm-6":"col-sm-9")},[s("div",Ase,[s("div",Ise,[u(sr,{sections:ge.value,auth:e.auth},null,8,["sections","auth"]),ge.value.length?f("",!0):(i(),d("div",Pse,[s("div",Ose,[s("img",{src:ae(n)()+"/themes/default/common/images/drag.png",alt:"form-no-drag",class:"no-drag-img"},null,8,qse),s("h5",null,h(J.trans("drag_elements_here")),1),s("p",null,h(J.trans("drag_an_element_from_the_left")),1)])]))])])],2),ae(Q)?(i(),d("div",xse,[u(fn,{fieldData:ae(j),isShowSettingModal:ae(Q),onCloseSettingModal:ye,auth:e.auth,from:"ticket-fields-form",fieldUpdate:ke,settingBtnName:"apply"},null,8,["fieldData","isShowSettingModal","auth"])])):f("",!0)],64)):f("",!0)])])]),u(Ae,{name:"modal"},{default:T(()=>[g.value?(i(),A(_t,{key:0,showModal:!0,onClose:()=>g.value=!1,containerStyle:{width:"400px"}},{title:T(()=>[s("h4",Vse,h(J.trans("delete")),1)]),fields:T(()=>[s("span",null,h(J.trans("are_you_sure_you_want_to_delete")),1)]),controls:T(()=>[s("button",{id:"approval-action-confirm",type:"button",onClick:pe[1]||(pe[1]=z=>ve()),class:"btn btn-secondary"},[pe[3]||(pe[3]=s("i",{class:"fas fa-trash-alt","aria-hidden":"true"},null,-1)),L(" "+h(J.trans("confirm")),1)])]),_:1},8,["onClose"])):f("",!0)]),_:1})]))}},pi=x(Nse,[["__scopeId","data-v-0d892da7"]]),Rse={components:{"status-switch":lt},props:["data"],methods:{onChange(e,t){this.statusChange(t,e)},statusChange(e,t){let a=t?1:0;axios.get("edit/oauth/status/"+e+"/"+a).then(r=>{K(r,"dataTableModal"),window.emitter.emit("refreshData")}).catch(r=>{U(r,"dataTableModal")})}}},Use={class:"btn-group"};function jse(e,t,a,r,n,o){const m=v("status-switch");return i(),d("div",Use,[(i(),A(m,{name:a.data.id,value:!a.data.revoked,key:Math.random(),onChange:o.onChange},null,8,["name","value","onChange"]))])}const Bse=x(Rse,[["render",jse]]);const Yse={id:"tokens-index",class:"col-sm-12"},Hse={class:"card-tools"},Wse="/get/oauth/clients",zse={__name:"OauthIndex",setup(e){const{basePath:t}=ut.methods;Me();const a=O(["name","redirect","revoked","actions"]),r=O({});return Je(()=>{r.value={headings:{revoked:"App status",redirect:"Callback URL",name:"App"},columnsClasses:{name:"name",redirect:"redirect",revoked:"revoked",actions:"token-actions"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{actions:(n,o)=>tt(Ye,{data:o}),revoked:(n,o)=>tt(Bse,{data:o})},sortable:["name"],filterable:["name"],pagination:{chunk:5,nav:"scroll"},requestAdapter(n){return{"sort-field":n.orderBy?n.orderBy:"id","sort-order":n.ascending?"desc":"asc","search-query":n.query.trim(),page:n.page,limit:n.limit}},responseAdapter({data:n}){return{data:n.data.data.map(o=>(o.edit_url="/oauth/"+o.id+"/edit",o.delete_url=t()+"/revoke/oauth/delete/client/"+o.id,o.deleteMessage="are_you_sure_delete_oauth_app",o)),count:n.data.total}},orderBy:{column:"id",ascending:!0}}}),(n,o)=>{const m=v("router-link"),p=H("tooltip");return i(),d("div",Yse,[u(ct,{"component-name":"dataTableModal"}),u(Bt,{title:n.trans("lists_of_oauth_clients")},{customActions:T(()=>[s("div",Hse,[P((i(),A(m,{class:"btn btn-tool pointer-cursor",to:"/oauth/create"},{default:T(()=>o[0]||(o[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[p,n.trans("create_oauth_apps")]])])]),default:T(()=>[u(La,{url:Wse,dataColumns:a.value,option:r.value,scroll_to:"tokens-index"},null,8,["dataColumns","option"])]),_:1},8,["title"])])}}};function nr(e){const{app_name:t,callback_url:a,homepage_url:r}=e;let n={app_name:[t,"isRequired"],callback_url:[a,"isRequired"],homepage_url:[r,"isRequired"]};const o=new Le(N),{errors:m,isValid:p}=o.validate(n);return Ee.dispatch("setValidationError",m),{errors:m,isValid:p}}const Gse={mixins:[ut],name:"oauth-form",data(){return{loading:!1,pageLoad:!1,app_name:"",callback_url:"",homepage_url:"",showTokenModal:!1,onClose:{type:Function},client_id:"",client_secret:"",description:"",copied:!1,containerStyle:{width:"600px"}}},methods:{isValid(){const{errors:e,isValid:t}=nr(this.$data);return t},onSubmit(){if(this.isValid()){this.pageLoad=!0;let e={};e.app_name=this.app_name,e.callback_url=this.callback_url,e.homepage_url=this.homepage_url,e.description=this.description,V.post("generate/oauth/client",e).then(t=>{this.pageLoad=!1,this.client_id=t.data.data.client_id,this.client_secret=t.data.data.client_secret,this.showTokenModal=!0,K(t,"oauth-modal-form")}).catch(t=>{this.pageLoad=!1,U(t,"oauth-form")})}},onChange(e,t){this[t]=e},copyToken(){let e="Client-Id: "+this.client_id+`
Client-Secret: `+this.client_secret;xt(e),this.copied=!0,setTimeout(()=>(this.copied=!1,this.showTokenModal=!1,this.$router.push({name:"oauth.index"})),3e3)}},components:{Modal:_t,"text-field":we}},Kse={class:"col-sm-12"},Jse={class:"card card-light"},Zse={class:"card-header"},Qse={class:"card-title"},Xse={class:"card-body"},ene={key:0,class:"row"},tne={key:1,class:"row"},ane={class:"card-footer"},sne=["disabled"],nne={class:"modal-title"},one={class:"row"},ine={class:"col-sm-3"},lne={class:"input-group mb-3"},rne=["value"],dne={class:"col-sm-9"},cne={class:"input-group mb-3"},une=["value"],mne=["disabled"];function hne(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("text-field"),w=v("lable"),S=v("modal"),C=H("focus-first-input");return i(),d("div",Kse,[u(m,{componentName:"oauth-form"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",Jse,[s("div",Zse,[s("h3",Qse,h(e.trans("oauth-clients-create")),1)]),s("div",Xse,[n.loading?(i(),d("div",ene,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.loading?f("",!0):P((i(),d("div",tne,[u(b,{id:"app_name",label:e.trans("app_name"),type:"text",name:"app_name",value:n.app_name,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"app_name",hint:e.trans("app_name_info")},null,8,["label","value","onChange","hint"]),u(b,{id:"callback",label:e.trans("callback_url"),type:"text",name:"callback_url",value:n.callback_url,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"callback_url",hint:e.trans("callback_url_info")},null,8,["label","value","onChange","hint"]),u(b,{id:"homepage_url",label:e.trans("homepage_url"),type:"text",name:"homepage_url",value:n.homepage_url,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"homepage_url",hint:e.trans("homepage_url_info")},null,8,["label","value","onChange","hint"]),u(b,{label:e.lang("description"),placehold:e.lang("enter_a_value"),value:n.description,type:"textarea",name:"description",classname:"col-sm-6 ",onChange:o.onChange,hint:e.lang("description_info"),id:"description",disabled:!1},null,8,["label","placehold","value","onChange","hint"])])),[[C]])]),s("div",ane,[s("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...M)=>o.onSubmit&&o.onSubmit(...M)),disabled:n.pageLoad},[t[2]||(t[2]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("save")),1)],8,sne)])]),n.showTokenModal?(i(),A(S,{key:1,showModal:n.showTokenModal,onClose:n.onClose,containerStyle:n.containerStyle,class:"scrollable-area"},{alert:T(()=>[u(m,{componentName:"oauth-modal-form"})]),title:T(()=>[s("h4",nne,h(e.trans("oauth-client-id-secret")),1)]),fields:T(()=>[s("div",one,[s("div",ine,[u(w,null,{default:T(()=>[L(h(e.trans("client_id")),1)]),_:1}),s("div",lne,[s("input",{type:"number",class:"form-control",value:n.client_id,disabled:""},null,8,rne)])]),s("div",dne,[u(w,null,{default:T(()=>[L(h(e.trans("client_secret")),1)]),_:1}),s("div",cne,[s("input",{type:"password",class:"form-control",value:n.client_secret,disabled:""},null,8,une)])])])]),controls:T(()=>[s("button",{type:"button",onClick:t[1]||(t[1]=(...M)=>o.copyToken&&o.copyToken(...M)),class:"btn btn-primary",disabled:n.copied},[s("i",{class:G(n.copied?"fas fa-check":"fa fa-clipboard")},null,2),L(" "+h(n.copied?e.trans("clipboard-copy-message"):e.trans("copy")),1)],8,mne)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const pne=x(Gse,[["render",hne]]);wt();const _ne={mixins:[ut],name:"oauth-form",data(){return{loading:!1,hasDataPopulated:!1,pageLoad:!1,app_name:"",callback_url:"",id:"",showModal:!1,containerStyle:{width:"600px"},modalLoading:!1,showTokenModal:!1,onClose:{type:Function},client_id:"",client_secret:"",copied:!1,labelStyle:{display:"none"},labelCss:{visibility:"hidden",margin:"auto"},profile_pic:"",selectedImage:"",homepage_url:"",description:"",revokingTokens:!1}},beforeMount(){this.getData()},methods:{isValid(){const{errors:e,isValid:t}=nr(this.$data);return t},getData(){this.loading=!0;const e=ft();V.get("edit/oauth/"+e.params.id).then(t=>{this.id=t.data.data.id,this.app_name=t.data.data.name,this.callback_url=t.data.data.redirect,this.homepage_url=t.data.data.homepage_url,this.description=t.data.data.description,this.profile_pic=t.data.data.profile_pic,this.fillFieldsInfo(t.data.data),this.loading=!1,this.hasDataPopulated=!0}).catch(t=>{this.hasDataPopulated=!0,this.loading=!1,U(t,"oauth-form")})},fillFieldsInfo(e){const t=this,a=this.$data;Object.keys(e).map(r=>{a.hasOwnProperty(r)&&(t[r]=e[r]===null?"":e[r])})},onSubmit(){if(this.isValid()){this.pageLoad=!0;var e=new FormData;e.append("id",this.id),e.append("app_name",this.app_name),e.append("callback_url",this.callback_url),e.append("homepage_url",this.homepage_url),e.append("description",this.description),this.selectedImage&&e.append("profile_pic",this.selectedImage.file,this.selectedImage.name),e.append("_method","POST"),V.post("update/oauth/app-name/callback-url",e).then(t=>{this.pageLoad=!1,K(t,"oauth-form"),setTimeout(()=>this.$router.push({name:"oauth.index"}),3e3)}).catch(t=>{this.pageLoad=!1,U(t,"oauth-form")})}},onUpdate(){this.showModal=!0,this.modalLoading=!0;let e={};e.id=this.id,V.post("re-generate/oauth/client-secret",e).then(t=>{this.modalLoading=!1,this.showModal=!1,t.data.data&&t.data.data.client_secret?(this.client_id=t.data.data.client_id,this.client_secret=t.data.data.client_secret,this.showTokenModal=!0,K(t,"oauth-modal-form")):K(t,"oauth-form")}).catch(t=>{U(t,"oauth-form"),this.modalLoading=!1,this.showModal=!1})},onRevokeIt(){this.showModal=!0,this.modalLoading=!0;let e={};e.id=this.id,V.post("revoke/oauth/client-tokens",e).then(t=>{this.modalLoading=!1,this.showModal=!1,K(t,"oauth-form"),setTimeout(()=>this.$router.push({name:"oauth.index"}),3e3)}).catch(t=>{U(t,"oauth-form"),this.modalLoading=!1,this.showModal=!1})},onChange(e,t){this[t]=e},copyToken(){let e="Client-Id: "+this.client_id+`
Client-Secret: `+this.client_secret;xt(e),this.copied=!0,setTimeout(()=>(this.copied=!1,this.showTokenModal=!1,this.$router.push({name:"oauth.index"})),3e3)},onProfile(e,t){t==="profile_pic"?(this.profile_pic=e.image,this.selectedImage=e):this[t]=e},onClose(){this.showModal=!1}},components:{"text-field":we,"image-upload":gi}},fne={class:"col-sm-12"},gne={class:"card card-light"},vne={class:"card-header"},bne={class:"card-title"},yne={class:"card-tools"},kne={class:"card-body"},wne={key:0,class:"row"},Cne={key:1,class:"row"},Dne={class:"text-center col-sm-6"},Sne={key:0,class:"card-footer"},Mne=["disabled"],Fne={key:0,class:"modal-title"},$ne={key:1,class:"modal-title"},Tne={key:0,class:"row modal-body"},Ene={key:0},Lne={key:1,class:"row modal-body"},Ane={key:0},Ine={key:2,class:"row"},Pne={class:"modal-title"},One={class:"row"},qne={class:"col-sm-3"},xne={class:"input-group mb-3"},Vne=["value"],Nne={class:"col-sm-9"},Rne={class:"input-group mb-3"},Une=["value"],jne=["disabled"];function Bne(e,t,a,r,n,o){const m=v("alert"),p=v("custom-loader"),g=v("reuse-loader"),b=v("image-upload"),w=v("text-field"),S=v("Loader"),C=v("modal"),M=v("lable"),D=H("tooltip"),F=H("focus-first-input");return i(),d("div",fne,[u(m,{componentName:"oauth-form"}),n.pageLoad?(i(),A(p,{key:0,loadingSpeed:4e3})):f("",!0),s("div",gne,[s("div",vne,[s("h3",bne,h(e.trans("oauth-edit-form")),1),s("div",yne,[P((i(),d("button",{class:"btn btn-tool",onClick:t[0]||(t[0]=I=>{n.showModal=!0,n.revokingTokens=!1})},t[6]||(t[6]=[s("i",{class:"glyphicon glyphicon-refresh"},null,-1)]))),[[D,e.trans("regenerate-client-secret")]]),P((i(),d("button",{class:"btn btn-tool",onClick:t[1]||(t[1]=I=>{n.showModal=!0,n.revokingTokens=!0})},t[7]||(t[7]=[s("i",{class:"glyphicon glyphicon-ban-circle"},null,-1)]))),[[D,e.trans("revoke-tokens")]])])]),s("div",kne,[!n.hasDataPopulated||n.loading?(i(),d("div",wne,[u(g,{"animation-duration":4e3,size:60})])):f("",!0),n.hasDataPopulated&&!n.loading?P((i(),d("div",Cne,[s("div",Dne,[u(b,{label:e.lang("profile_pic"),value:n.profile_pic,name:"profile_pic",onChange:o.onProfile,labelStyle:n.labelStyle,labelCss:n.labelCss,buttonName:"Change"},null,8,["label","value","onChange","labelStyle","labelCss"])]),u(w,{label:e.lang("description"),placehold:e.lang("enter_a_value"),value:n.description,type:"textarea",name:"description",classname:"col-sm-6 ",onChange:o.onChange,hint:e.lang("description_info"),id:"description",disabled:!1,rows:"5",cols:"40"},null,8,["label","placehold","value","onChange","hint"]),u(w,{id:"app_name",label:e.trans("app_name"),type:"text",name:"app_name",value:n.app_name,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"app_name",hint:e.trans("app_name_info")},null,8,["label","value","onChange","hint"]),u(w,{id:"callback",label:e.trans("callback_url"),type:"text",name:"callback_url",value:n.callback_url,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"callback_url",hint:e.trans("callback_url_info")},null,8,["label","value","onChange","hint"]),u(w,{id:"id",label:e.trans("homepage_url"),type:"text",name:"homepage_url",value:n.homepage_url,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"homepage_url",hint:e.trans("homepage_url_info")},null,8,["label","value","onChange","hint"]),u(w,{id:"id",label:e.trans("client_id"),type:"text",name:"id",value:n.id,classname:"col-sm-6",onChange:o.onChange,required:!0,placehold:"id",hint:e.trans("client_id_info"),disabled:""},null,8,["label","value","onChange","hint"])])),[[F]]):f("",!0)]),n.hasDataPopulated?(i(),d("div",Sne,[s("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...I)=>o.onSubmit&&o.onSubmit(...I)),disabled:n.pageLoad},[t[8]||(t[8]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(e.trans("update")),1)],8,Mne)])):f("",!0)]),n.showModal?(i(),A(C,{key:1,"show-modal":n.showModal,onClose:o.onClose,containerStyle:n.containerStyle},{title:T(()=>[n.revokingTokens?(i(),d("h4",Fne,h(e.trans("revoke-tokens")),1)):(i(),d("h4",$ne,h(e.trans("regenerate-client-secret")),1))]),fields:T(()=>[n.revokingTokens?(i(),d("div",Tne,[s("div",null,[n.modalLoading?f("",!0):(i(),d("p",Ene,h(e.trans("do-you-want-to-revoke-all-tokens")),1))])])):(i(),d("div",Lne,[s("div",null,[n.modalLoading?f("",!0):(i(),d("p",Ane,h(e.trans("do-you-want-to-regenrate-client-secret")),1))])])),n.modalLoading?(i(),d("div",Ine,[u(S),u(g,{"animation-duration":4e3,size:60})])):f("",!0)]),controls:T(()=>[n.revokingTokens?(i(),d("button",{key:0,type:"button",onClick:t[3]||(t[3]=(...I)=>o.onRevokeIt&&o.onRevokeIt(...I)),class:"btn btn-secondary"},[t[9]||(t[9]=s("i",{class:"fas fa-sync-alt"},null,-1)),L(" "+h(e.trans("Revoke")),1)])):(i(),d("button",{key:1,type:"button",onClick:t[4]||(t[4]=(...I)=>o.onUpdate&&o.onUpdate(...I)),class:"btn btn-secondary"},[t[10]||(t[10]=s("i",{class:"fas fa-sync-alt"},null,-1)),L(" "+h(e.trans("Generate")),1)]))]),_:1},8,["show-modal","onClose","containerStyle"])):f("",!0),n.showTokenModal?(i(),A(C,{key:2,showModal:n.showTokenModal,onClose:o.onClose,containerStyle:n.containerStyle,class:"scrollable-area"},{alert:T(()=>[u(m,{componentName:"oauth-modal-form"})]),title:T(()=>[s("h4",Pne,h(e.trans("oauth-client-id-secret")),1)]),fields:T(()=>[s("div",One,[s("div",qne,[u(M,null,{default:T(()=>[L(h(e.trans("client_id")),1)]),_:1}),s("div",xne,[s("input",{type:"number",class:"form-control",value:n.client_id,disabled:""},null,8,Vne)])]),s("div",Nne,[u(M,null,{default:T(()=>[L(h(e.trans("client_secret")),1)]),_:1}),s("div",Rne,[s("input",{type:"password",class:"form-control",value:n.client_secret,disabled:""},null,8,Une)])])])]),controls:T(()=>[s("button",{type:"button",onClick:t[5]||(t[5]=(...I)=>o.copyToken&&o.copyToken(...I)),class:"btn btn-primary",disabled:n.copied},[s("i",{class:G(n.copied?"fas fa-check":"fa fa-clipboard")},null,2),L(" "+h(n.copied?e.trans("clipboard-copy-message"):e.trans("copy")),1)],8,jne)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const Yne=x(_ne,[["render",Bne]]),Hne={name:"WebhookList",components:{DataTableActions:Ye},setup(){const e=Me(),t=me(()=>e.getters.formattedTime),a=O(["url","status","created_at","updated_at","action"]),r=O({}),n=O("/api/admin/webhook/list"),o=O(!1),m=g=>tt(Ye,{data:g}),p=g=>tt(ma,{data:g});return r.value={headings:{url:N("url"),status:N("status"),created_at:N("created_at"),updated_at:N("updated_at"),action:N("action")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{status(g,b){return p(b)},created_at(g,b){return t.value(b.created_at)},updated_at(g,b){return t.value(b.updated_at)},action(g,b){return m(b)}},sortable:["url","status","created_at","updated_at"],filterable:[],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(g){return{paginate:1,"sort-field":g.orderBy?g.orderBy:"updated_at","sort-order":g.ascending?"desc":"asc","search-query":g.query.trim(),page:g.page,limit:g.limit}},responseAdapter({data:g}){return{data:g.data.data.map(b=>(b.alertComponentName="webhook-list",b.deleteMessage="are_you_sure_you_want_to_delete_dependencies",b)),count:g.data.total}}},{columns:a,options:r,apiUrl:n,loading:o,formattedTime:t}}},Wne={class:"col-sm-12"},zne={class:"card card-light"},Gne={class:"card-header"},Kne={id:"contract-type-list",class:"card-title"},Jne={class:"card-tools"},Zne={class:"card-body"};function Qne(e,t,a,r,n,o){const m=v("alert"),p=v("router-link"),g=v("data-table"),b=H("tooltip");return i(),d("div",Wne,[u(m,{componentName:"webhook-list"}),s("div",zne,[s("div",Gne,[s("h3",Kne,h(e.lang("list_of_webhooks")),1),s("div",Jne,[P((i(),A(p,{class:"btn btn-tool",to:"/webhook/add"},{default:T(()=>t[0]||(t[0]=[s("span",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[b,e.lang("add_webhook")]])])]),s("div",Zne,[u(g,{url:r.apiUrl,dataColumns:r.columns,option:r.options,scroll_to:"webhook-list"},null,8,["url","dataColumns","option"])])])])}const Xne=x(Hne,[["render",Qne]]),eoe={name:"WebhookCreateEdit",components:{StatusSwitch:lt,TextField:we,DynamicSelect:Be},setup(){const e=Me(),t=wt(),a=O(!1),r=O(!0),n=O("webhook-info"),o=O([]),m=O([]),p=O(""),g=O(""),b=O(""),w=O(!1),S=(F,I)=>{I==="url"&&(b.value=F),I==="status"&&(w.value=F),I==="events"&&(o.value=F),I==="sources"&&(m.value=F)},C=async()=>{e.dispatch("unsetValidationError");try{a.value=!0;const F=M(),I=await V.post(g.value,{url:b.value,sources:F.sources,events:F.events,status:w.value});a.value=!1,K(I,n.value),r.value&&setTimeout(()=>{t.push("list")},3e3)}catch(F){a.value=!1,U(F,n.value)}},M=()=>{const F={sources:[],events:[]};return m.value.sort().forEach(I=>{F.sources.includes(I.id)||F.sources.push(I.id)}),o.value.sort().forEach(I=>{F.events.includes(I.id)||F.events.push(I.id)}),F},D=async F=>{p.value=F,a.value=!0;try{const R=(await V.get(`api/admin/webhook/info/${p.value}`)).data.data;b.value=R.url,w.value=R.status,m.value=R.sources,o.value=R.events}catch(I){U(I,n.value)}finally{a.value=!1}};return fa(()=>{r.value=!window.location.pathname.includes("/edit"),r.value||D(Ue(window.location.pathname)),g.value=`api/admin/webhook/${p.value}`}),{loading:a,isCreating:r,componentName:n,events:o,sources:m,url:b,status:w,onChange:S,onSubmit:C,getWebhookData:D,lang:N}}},toe={class:"col-sm-12"},aoe={key:0,class:"row"},soe={class:"card card-light"},noe={class:"card-header"},ooe={class:"card-title"},ioe={class:"card-tools"},loe={class:"card-body"},roe={class:"row"},doe={class:"row"},coe={class:"card-footer"},uoe=["disabled"];function moe(e,t,a,r,n,o){const m=v("custom-loader"),p=v("alert"),g=v("status-switch"),b=v("text-field"),w=v("dynamic-select");return i(),d("div",toe,[r.loading?(i(),d("div",aoe,[u(m,{duration:4e3})])):f("",!0),u(p,{componentName:r.componentName},null,8,["componentName"]),s("div",soe,[s("div",noe,[s("h3",ooe,h(r.isCreating?r.lang("create_webhook"):r.lang("edit_webhook")),1),s("div",ioe,[u(g,{name:"status",value:r.status,onChange:r.onChange,bold:!0},null,8,["value","onChange"])])]),s("div",loe,[s("div",roe,[u(b,{name:"url",value:r.url,label:r.lang("webhook_url"),onChange:r.onChange,classname:"col-md-12",required:!0,hint:r.lang("enter_url_to_send_ticket_details"),placehold:"https://www.example.com"},null,8,["value","label","onChange","hint"])]),s("div",doe,[u(w,{label:r.lang("events"),classname:"col-md-6",multiple:!0,name:"events","api-endpoint":"api/admin/webhook/events",value:r.events,onChange:r.onChange,required:!0,placeholder:r.lang("select-events")},null,8,["label","value","onChange","placeholder"]),u(w,{label:r.lang("sources"),classname:"col-md-6",multiple:!0,name:"sources","api-endpoint":"api/dependency/sources",value:r.sources,onChange:r.onChange,required:!0,placeholder:r.lang("select-sources")},null,8,["label","value","onChange","placeholder"])])]),s("div",coe,[s("button",{type:"button",onClick:t[0]||(t[0]=(...S)=>r.onSubmit&&r.onSubmit(...S)),disabled:r.loading,class:"btn btn-primary"},[t[1]||(t[1]=s("i",{class:"fa fa-save"},null,-1)),L(" "+h(r.isCreating?r.lang("save"):r.lang("update")),1)],8,uoe)])])])}const _i=x(eoe,[["render",moe]]);const hoe={name:"PayloadModal",props:{data:{type:Object,required:!0}},setup(e){const t=O(!1),a=O({width:"800px"}),r=()=>{t.value=!t.value},n=()=>{t.value=!1},o=p=>{if(typeof p=="object"&&p!==null){const g=JSON.stringify(p,null,2);return`<pre style="color:white;">${m(g)}</pre>`}return""},m=p=>{const g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(p).replace(/[&<>"'`=/]/g,b=>g[b])};return{showModal:t,containerStyle:a,toggleModal:r,onClose:n,formattedPayload:o,escapeHtml:m}}},poe=["id"],_oe={key:0},foe={class:"modal-title"},goe={key:0},voe=["innerHTML"];function boe(e,t,a,r,n,o){const m=v("modal");return i(),d("div",null,[s("span",{id:"log-status-"+a.data.id,class:"logStatus"},h(a.data.payload.substring(0,100))+"... ",9,poe),s("a",{type:"button",class:"viewAll",onClick:t[0]||(t[0]=(...p)=>r.toggleModal&&r.toggleModal(...p)),"data-card-widget":"refresh"},h(e.lang("view_all")),1),u(Ae,{name:"modal"},{default:T(()=>[r.showModal?(i(),d("div",_oe,[u(m,{showModal:r.showModal,onClose:r.onClose,containerStyle:r.containerStyle},{title:T(()=>[s("h4",foe,h(e.lang("webhook_detailed_log")),1)]),fields:T(()=>[a.data.message.length>0?(i(),d("span",goe,[s("strong",null,h(e.lang("webhook_error"))+":",1),L(" "+h(a.data.message),1)])):f("",!0),t[1]||(t[1]=s("br",null,null,-1)),t[2]||(t[2]=s("br",null,null,-1)),s("strong",null,h(e.lang("payload"))+":",1),s("p",{innerHTML:r.formattedPayload(a.data.formatted_payload),class:"trace"},null,8,voe)]),_:1},8,["showModal","onClose","containerStyle"])])):f("",!0)]),_:1})])}const yoe=x(hoe,[["render",boe],["__scopeId","data-v-3b289531"]]),koe={name:"WebhookLogModal",components:{"date-time-field":Dt},props:{showModal:{type:Boolean,default:!1},onClose:{type:Function,default:()=>{}},data:{type:Object,default:()=>({})},title:{type:String,default:""},webhookId:{type:Number,default:null}},setup(e,{emit:t}){const a=zs({width:"950px"}),r=O(!1),n=O(60),o=O(""),m=O(""),p=zs({start:"00:00",step:"00:30",end:"23:30"}),g=O(!1),b=O(!1),w=(D,F)=>{F==="delete_after_date"?(o.value=D,g.value=D!==null):F==="delete_before_date"&&(m.value=D,b.value=D!==null)},S=me(()=>!o.value||!m.value),C=()=>{m.value="",o.value="",g.value=!1,b.value=!1,t("close")};return{containerStyle:a,loading:r,size:n,deleteAfterDate:o,deleteBeforeDate:m,timeOptions:p,deleteAfterSelected:g,deleteBeforeSelected:b,isDisabled:S,onChange:w,onModalClose:C,onSubmit:()=>{r.value=!0;const D={id:e.webhookId,delete_before:m.value!==""&&m.value!==null?Ie(m.value).format("YYYY-MM-DD HH:mm:ss"):"",delete_after:o.value!==""&&o.value!==null?Ie(o.value).format("YYYY-MM-DD HH:mm:ss"):""};V.delete("/api/admin/webhook-logs/delete",{data:D}).then(F=>{K(F,"webhook-logs"),window.emitter.emit("refreshWebhookDeleteLogs"),C(),r.value=!1}).catch(F=>{r.value=!1,U(F,"webhook-logs")})}}}},woe={class:"modal-title"},Coe={key:0,class:"row"},Doe={class:"row"},Soe=["disabled"];function Moe(e,t,a,r,n,o){const m=v("reuse-loader"),p=v("date-time-field"),g=v("modal");return i(),d("div",null,[a.showModal?(i(),A(g,{key:0,showModal:a.showModal,onClose:r.onModalClose,containerStyle:r.containerStyle},{title:T(()=>[s("h4",woe,h(e.lang(a.title)),1)]),fields:T(()=>[r.loading?(i(),d("div",Coe,[u(m,{"animation-duration":4e3,color:"#1d78ff",size:r.size},null,8,["size"])])):f("",!0),s("div",Doe,[u(p,{id:"log_delete_date1",label:e.lang("delete_from"),value:r.deleteAfterDate,type:"datetime","time-picker-options":r.timeOptions,name:"delete_after_date",required:!0,onChange:r.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-md-6",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"]),u(p,{id:"log_delete_date2",label:e.lang("delete_to"),value:r.deleteBeforeDate,type:"datetime","time-picker-options":r.timeOptions,name:"delete_before_date",required:!0,onChange:r.onChange,currentYearDate:!1,format:"YYYY-MM-DD HH:mm:ss",classname:"col-md-6",clearable:!0,disabled:!1},null,8,["label","value","time-picker-options","onChange"])])]),controls:T(()=>[s("button",{id:"log_delete_btn",type:"button",onClick:t[0]||(t[0]=(...b)=>r.onSubmit&&r.onSubmit(...b)),class:"btn btn-secondary",disabled:r.isDisabled},[t[1]||(t[1]=s("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1)),L(" "+h(e.lang("delete")),1)],8,Soe)]),_:1},8,["showModal","onClose","containerStyle"])):f("",!0)])}const Foe=x(koe,[["render",Moe]]),$oe={name:"webhook-logs",components:{WebhookLogModal:Foe,DataTableStatus:ma},setup(){const e=Me(),t=O(0),a=O(""),r=O(!1),n=O(!0),o=O(!1),m=["event","payload","response","created_at"],p=O({}),g=O(!1),b=me(()=>e.getters.formattedTime),w=I=>tt(yoe,{data:I}),S=I=>tt(ma,{data:I}),C=()=>{p.value={headings:{event:N("event"),payload:N("payload"),response:N("status"),created_at:N("created_at")},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{response(I,R){return S(R)},event(I,R){return N("webhook_event_"+R.event)},created_at(I,R){return b.value(R.created_at)},payload(I,R){return w(R)}},sortable:["event","response","created_at"],filterable:[],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(I){return{paginate:1,"sort-field":I.orderBy?I.orderBy:"created_at","sort-order":I.ascending?"desc":"asc","search-query":I.query.trim(),page:I.page,limit:I.limit}},responseAdapter({data:I}){const R=I.data.data.map(Y=>(Y.response=Y.response>=200&&Y.response<300,Y.alertComponentName="webhook-logs",Y.deleteMessage="are_you_sure_you_want_to_delete_dependencies",Y));return o.value=R.length===0,{data:R,count:I.data.total}}}},M=()=>{r.value=!1},D=()=>Ue(window.location.pathname),F=()=>{t.value+=1};return Je(()=>{a.value=`/api/admin/webhook-log/${D()}`,C(),window.emitter.on("refreshWebhookDeleteLogs",F)}),Em(()=>{window.emitter.off("refreshWebhookDeleteLogs",F)}),{tableKey:t,apiUrl:a,showDeleteModal:r,showLogs:n,disabled:o,columns:m,options:p,formattedTime:b,onClose:M,getWebhookId:D,refreshLogs:F,loading:g}}},Toe={class:"col-sm-12"},Eoe={class:"card card-light"},Loe={class:"card-header"},Aoe={class:"card-title"},Ioe={class:"card-tools"},Poe=["disabled"],Ooe={class:"card-body"};function qoe(e,t,a,r,n,o){const m=v("alert"),p=v("webhook-log-modal"),g=v("data-table"),b=v("custom-loader"),w=H("tooltip");return i(),d("div",Toe,[u(m,{componentName:"webhook-logs"}),s("div",Eoe,[s("div",Loe,[s("h3",Aoe,h(e.lang("webhook_log")),1),s("div",Ioe,[P((i(),d("a",{type:"button",class:"btn btn-tool",onClick:t[0]||(t[0]=S=>r.tableKey++),"data-card-widget":"refresh"},t[2]||(t[2]=[s("i",{class:"fas fa-refresh"},null,-1)]))),[[w,e.lang("refresh")]]),r.showLogs?P((i(),d("button",{key:0,type:"button",disabled:r.disabled,class:"btn btn-tool",onClick:t[1]||(t[1]=S=>r.showDeleteModal=!0)},t[3]||(t[3]=[s("i",{class:"fas fa-trash"},null,-1)]),8,Poe)),[[w,e.lang("delete_logs")]]):f("",!0)])]),u(Ae,{name:"modal"},{default:T(()=>[u(p,{title:"delete_logs","webhook-id":r.getWebhookId(),hideCheckBox:!0,onClose:r.onClose,showModal:r.showDeleteModal},null,8,["webhook-id","onClose","showModal"])]),_:1}),s("div",Ooe,[(i(),A(g,{key:r.tableKey,url:r.apiUrl,dataColumns:r.columns,option:r.options,scroll_to:"webhook-list"},null,8,["url","dataColumns","option"])),r.loading?(i(),A(b,{key:0})):f("",!0)])])])}const xoe=x($oe,[["render",qoe]]);const Voe={id:"iframe-index",class:"col-sm-12"},Noe={class:"card-tools"},Roe="/integration-settings",Uoe={__name:"IframeIndex",setup(e){const t=O(["app_name","iframe_url","route_name","status","actions"]),a=O({});return Je(()=>{a.value={headings:{app_name:N("app_name"),iframe_url:N("iframe_url"),status:N("status"),route_name:N("route_name"),actions:N("actions")},columnsClasses:{app_name:"app-name",iframe_url:"iframe-url",status:"iframe-status",route_name:"route_name",actions:"iframe-actions"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},templates:{actions:(r,n)=>tt(Ye,{data:n}),status:function(r,n){let o=tt("span",{class:n.integration_status?"btn btn-success btn-xs pointer_normal":"btn btn-danger btn-xs pointer_normal"},n.integration_status?N("active"):N("inactive"));return tt("a",{class:"pointer_normal"},[o])},route_name:(r,n)=>{if(!n.routes||n.routes.length===0)return"---";const o=n.routes.map(m=>tt("span",{class:"badge text-bg-secondary mx-1",style:{display:"inline-block"}},m.name));return tt("div",{class:"d-flex flex-wrap"},o)},iframe_url:(r,n)=>n.app_url?n.app_url:"---"},sortable:["app_name"],filterable:["app_name"],pagination:{chunk:5,nav:"scroll"},requestAdapter(r){return{"sort-field":r.orderBy?r.orderBy:"id","sort-order":r.ascending?"desc":"asc","search-query":r.query.trim(),page:r.page,limit:r.limit}},responseAdapter({data:r}){return{data:r.data.data.map(n=>(n.edit_url="/iframe-injection/"+n.id+"/edit",n.delete_url="/api/delete-integration-setting/"+n.id,n.settings_url="/iframe-injection/"+n.id+"/settings",n.deleteMessage="are_you_sure_you_want_to_delete",n)),count:r.data.total}},orderBy:{column:"id",ascending:!0}}}),(r,n)=>{const o=v("router-link"),m=H("tooltip");return i(),d("div",Voe,[u(ct,{"component-name":"dataTableModal"}),u(Bt,{title:r.trans("list_of_iframe_configurations")},{customActions:T(()=>[s("div",Noe,[P((i(),A(o,{class:"btn btn-tool pointer-cursor",to:"/iframe-injection/create"},{default:T(()=>n[0]||(n[0]=[s("i",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[m,r.trans("create_new_iframe_configuration")]])])]),default:T(()=>[u(La,{url:Roe,dataColumns:t.value,option:a.value,scroll_to:"iframe-index"},null,8,["dataColumns","option"])]),_:1},8,["title"])])}}};function joe(e){const{app_name:t,app_url:a,integration_type:r,routes:n,button_name:o,icon_class:m,teams:p,agents:g,departments:b}=e;let w={app_name:[t,"isRequired"],app_url:[a,"isRequired"],integration_type:[r,"isRequired"],routes:[n,"isRequired"],button_name:[o,"isRequired"],icon_class:[m,"isRequired"]};const S=new Le(N),{errors:C,isValid:M}=S.validate(w);return Ee.dispatch("setValidationError",C),{errors:C,isValid:M}}const Boe={id:"main",class:"col-sm-12"},Yoe={key:0,class:"row"},Hoe={class:"row"},Woe={class:"row"},zoe={class:"row"},Goe={class:"row"},Koe={class:"card-footer",slot:"actions"},fi={__name:"IframeCreateEdit",setup(e){const t=wt(),a=O(!1),r=O(!1),n=O("create_new_iframe_configuration"),o=O([{name:"active",value:1},{name:"inactive",value:0}]),m=O([{name:"Iframe Url",id:"url"}]),p=O(1),g=O("");O(null);const b=O({icon_class:"fas fa-tv"}),w=O("Iframe"),S=O("save"),C=O([]),M=O("fas fa-save"),D=O("");let F=O({integration_type:"",app_name:"",app_url:"",routes:[],teams:[],agents:[],departments:[]});fa(()=>{const j=window.location.pathname;I(j),X()});const I=j=>{const ye=Ue(j);j.indexOf("edit")>=0?(n.value="edit_iframe_configuration",M.value="fas fa-sync-alt",S.value="update",r.value=!1,R(ye)):(a.value=!1,r.value=!0)},R=j=>{a.value=!0,g.value=j,V.get("/integration-details/"+j).then(ye=>{r.value=!0,a.value=!1,D.value=ye.data.data.integration,Y(D.value)}).catch(ye=>{a.value=!1,U(ye,"IframeCreateEdit")})},Y=j=>{p.value=j.integration_status,F.value.app_name=j.app_name,F.value.app_url=j.app_url,F.value.departments=j.departments,F.value.teams=j.teams,F.value.agents=j.users,F.value.routes=j.routes,F.value.integration_type=j.integration_type,w.value=j.button_name,b.value={icon_class:j.button_icon}},X=()=>{V.get("/json/icon-list.json").then(j=>{C.value=j.data.data}).catch(j=>{C.value=[]})},le=(j,ye)=>{F.value[ye]=j,ye==="integration_status"?p.value=j:ye==="button_name"?w.value=j:ye==="icon_class"&&(b.value=j)},ne=j=>{if(!j)return[];const ye=[];for(let Pe of j)ye.push(Pe.id);return ye},ce=()=>{const{errors:j,isValid:ye}=joe(F.value);return ye},Q=()=>{if(ce()){let j={};j.integration_status=p.value?1:0,j.id=g.value,j.integration_type=F.value.integration_type,j.app_name=F.value.app_name,j.app_url=F.value.app_url,j.department_ids=ne(F.value.departments),j.team_ids=ne(F.value.teams),j.user_ids=ne(F.value.agents),j.route_ids=ne(F.value.routes),j.button_name=w.value,j.button_icon=b.value.icon_class;let ye=g.value?"/api/integration-setting/"+g.value:"/api/integration-setting";V.post(ye,j).then(Pe=>{a.value=!1,K(Pe,"IframeCreateEdit"),g.value?R(g.value):setTimeout(()=>{t.push({name:"Iframe Configuration"})},3e3)}).catch(Pe=>{a.value=!1,U(Pe,"IframeCreateEdit")})}};return(j,ye)=>(i(),d("div",Boe,[!r.value||a.value?(i(),d("div",Yoe,[u(ga)])):f("",!0),u(ct,{"component-name":"IframeCreateEdit"}),r.value?(i(),A(Bt,{key:1,title:j.trans(n.value)},{actions:T(()=>[s("div",Koe,[s("button",{class:"btn btn-primary",type:"button",onClick:Q},[s("i",{class:G(M.value)},null,2),L(" "+h(j.trans(S.value)),1)])])]),default:T(()=>[s("div",Hoe,[u(we,{label:j.trans("app_name"),value:ae(F).app_name,type:"text",name:"app_name",onChange:le,placehold:j.lang("enter_a_value"),classname:"col-sm-4",required:!0},null,8,["label","value","placehold"]),u(it,{label:j.trans("integration_type"),elements:m.value,name:"integration_type",onChange:le,value:ae(F).integration_type,classname:"col-sm-4",required:!0},null,8,["label","elements","value"]),ae(F).integration_type==="url"?(i(),A(we,{key:0,label:j.trans("iframe_url"),value:ae(F).app_url,type:"text",name:"app_url",onChange:le,placehold:j.lang("enter_a_value"),classname:"col-sm-4",required:!0},null,8,["label","value","placehold"])):f("",!0)]),s("div",Woe,[u(Be,{label:j.trans("departments"),hint:j.lang("required_at_least_one_user"),multiple:!0,name:"departments",classname:"col-sm-4",apiEndpoint:"/api/dependency/departments",value:ae(F).departments,onChange:le,strlength:30,required:!1},null,8,["label","hint","value"]),u(Be,{label:j.trans("teams"),multiple:!0,name:"teams",classname:"col-sm-4",apiEndpoint:"/api/dependency/teams",value:ae(F).teams,onChange:le,strlength:30,required:!1},null,8,["label","value"]),u(Be,{label:j.trans("agents"),multiple:!0,name:"agents",classname:"col-sm-4",apiEndpoint:"/api/dependency/agents",value:ae(F).agents,onChange:le,strlength:30,required:!1},null,8,["label","value"])]),s("div",zoe,[u(Be,{label:j.trans("routes"),multiple:!0,name:"routes",classname:"col-sm-4",apiEndpoint:"/api/get-routes",value:ae(F).routes,onChange:le,strlength:30,required:!0},null,8,["label","value"]),u(we,{label:j.trans("button_name"),value:w.value,type:"text",name:"button_name",onChange:le,placehold:j.lang("enter_a_value"),classname:"col-sm-4",required:!0},null,8,["label","value","placehold"]),u(Be,{name:"icon_class",label:j.trans("icon_class"),value:b.value,onChange:le,classname:"col-sm-4",elements:C.value,multiple:!1,"option-label":"icon_class",required:!0,clearable:!1},null,8,["label","value","elements"])]),s("div",Goe,[u(Qe,{options:o.value,label:j.lang("status"),name:"integration_status",value:p.value,onChange:le,classname:"form-group col-sm-4"},null,8,["options","label","value"])])]),_:1},8,["title"])):f("",!0)]))}};const Joe={class:"col-sm-12"},Zoe={key:0,class:"row"},Qoe={key:1,class:"card card-light card-tabs"},Xoe={class:"card-header p-0 pt-1 card-tabs"},eie={class:"nav nav-tabs",id:"custom-tabs-one-tab",role:"tablist"},tie={class:"nav-item"},aie={class:"nav-item"},sie={class:"card-body"},nie={class:"card card-light cardbottom"},oie={class:"card-header"},iie={class:"card-title"},lie={class:"card-body"},rie={class:"col-md-2"},die=["onClick"],cie={class:"card-footer"},uie=["disabled"],mie={__name:"IframeParameterSettings",setup(e){const t=Me(),a=O(!1),r=O("iframe-param-config"),n=O([]),o=O([]),m=O(!0),p=O(null),g=O("ticket"),b=O([{id:1,faveoAttribute:"faveo_attribute_1",customAttribute:"custom_attribute_1",customAttributeValue:"",faveoAttributeValue:""}]),w=()=>{const R=b.value.map(Y=>{var X;return(X=Y.faveoAttributeValue)==null?void 0:X.id});n.value=o.value.filter(Y=>!R.includes(Y.id)),m.value=n.value.length>0},S=(R,Y)=>{const X=Y.replace(/[^0-9]/g,"")-1;Y.includes("faveo_attribute_")&&(b.value[X].faveoAttributeValue=R,b.value[X].isDeleteAble=X>0),Y.includes("custom_attribute_")&&(b.value[X].customAttributeValue=R,b.value[X].isDeleteAble=X>0),w()},C=R=>{t.dispatch("unsetValidationError"),g.value=R,a.value=!0,b.value=[{id:1,faveoAttribute:"faveo_attribute_1",customAttribute:"custom_attribute_1",customAttributeValue:"",faveoAttributeValue:""}],F()},M=(R=null,Y=null,X=null)=>{t.dispatch("unsetValidationError");const le=b.value.length+1;b.value.push({id:X??le,faveoAttribute:"faveo_attribute_"+le,customAttribute:"custom_attribute_"+le,faveoAttributeValue:R,customAttributeValue:Y,isDeleteAble:b.value.length>0}),b.value.forEach(ne=>{ne.isDeleteAble=b.value.length>1})},D=R=>{b.value=b.value.filter(Y=>Y.id!==R),b.value.forEach(Y=>{Y.isDeleteAble=b.value.length>1}),b.value.length===1&&(b.value[0].isDeleteAble=!1),b.value.length===0&&(b.value=[{id:1,faveoAttribute:"faveo_attribute_1",customAttribute:"custom_attribute_1",customAttributeValue:"",faveoAttributeValue:""}]),w()},F=()=>{a.value=!0;let R=g.value==="user"?"requester":g.value;V.get("/api/get-attributes/"+p.value+"?category="+R).then(Y=>{a.value=!1,n.value=Y.data.data.faveo_attributes,o.value=Y.data.data.faveo_attributes,Y.data.data.mappings.length&&(b.value=[],Y.data.data.mappings.forEach(X=>{M(X.faveo_attribute,X.custom_attribute,X.id)}),b.value.length===1&&(b.value[0].isDeleteAble=!1),w())}).catch(Y=>{U(Y,r.value)})},I=()=>{t.dispatch("unsetValidationError"),a.value=!0;const R=[];b.value.forEach(X=>{var le;R.push({custom_attribute:X.customAttributeValue,faveo_attribute:(le=X.faveoAttributeValue)==null?void 0:le.id})});let Y={};Y.integration_id=p.value,Y.category=g.value==="user"?"requester":g.value,Y.mappings=R,V.post("/api/set-attributes",Y).then(X=>{a.value=!1,K(X,r.value),F()}).catch(X=>{X.response&&U(X,r.value),a.value=!1})};return fa(()=>{p.value=Ue(window.location.pathname),F()}),(R,Y)=>{const X=H("tooltip");return i(),d("div",Joe,[u(ct,{componentName:r.value},null,8,["componentName"]),a.value?(i(),d("div",Zoe,[u(ga,{duration:4e3})])):f("",!0),a.value?f("",!0):(i(),d("div",Qoe,[s("div",Xoe,[s("ul",eie,[s("li",tie,[s("a",{id:"settings_tab",class:G(["nav-link",{active:g.value==="ticket"}]),onClick:Y[0]||(Y[0]=le=>C("ticket"))},h(ae(N)("ticket")),3)]),s("li",aie,[s("a",{id:"settings_tab",class:G(["nav-link",{active:g.value==="user"}]),onClick:Y[1]||(Y[1]=le=>C("user"))},h(ae(N)("user_tab")),3)])])]),s("div",sie,[s("div",nie,[s("div",oie,[s("h3",iie,h(ae(N)("attribute_mappings")),1)]),s("div",lie,[(i(!0),d(B,null,re(b.value,(le,ne)=>(i(),d("div",{key:ne,class:"row"},[u(we,{label:ae(N)("third_party_keys"),hint:ae(N)("third_party_tooltip"),name:le.customAttribute,value:le.customAttributeValue,classname:"col-md-5",onChange:S,required:!0},null,8,["label","hint","name","value"]),u(Be,{label:ae(N)("faveo_values"),hint:ae(N)("faveo_value_tooltip"),elements:n.value,name:le.faveoAttribute,value:le.faveoAttributeValue,classname:"col-md-5",onChange:S,required:!0},null,8,["label","hint","elements","name","value"]),s("div",rie,[b.value.length>1?P((i(),d("button",{key:0,type:"button",class:"btn btn-light table_btn",onClick:ce=>D(le.id)},Y[4]||(Y[4]=[s("i",{class:"fa fa-trash","aria-hidden":"true"},null,-1)]),8,die)),[[X,ae(N)("delete_attribute")]]):f("",!0)])]))),128)),m.value?P((i(),d("a",{key:0,href:"javascript:;",onClick:Y[2]||(Y[2]=le=>M(null,null))},[Y[5]||(Y[5]=s("i",{class:"fas fa-plus-circle"},null,-1)),L(" "+h(ae(N)("add_new")),1)])),[[X,ae(N)("add_new_attribute")]]):f("",!0)]),s("div",cie,[s("button",{class:"btn btn-primary",onClick:Y[3]||(Y[3]=le=>I()),disabled:a.value},[Y[6]||(Y[6]=s("i",{class:"fas fa-save"},null,-1)),L(" "+h(ae(N)("save")),1)],8,uie)])])])]))])}}},hie=x(mie,[["__scopeId","data-v-9faf9767"]]);let pie={path:"/agent",component:Oe,name:"Agents",redirect:"/agent/list",children:[{path:"list",name:"Agents Index",component:aA,meta:{title:"agents",crumb:{link:{name:"admin_panel",to:"/"},active:"agents"}}},{path:"create",name:"Agents Create",component:io,meta:{title:"agents",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"agents",to:"/agent"},active:"create"}}},{path:":id/edit",name:"Agent Edit",component:io,meta:{title:"agents",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"agents",to:"/agent"},active:"edit"}}}]},_ie={path:"/department",component:Oe,name:"Departments",redirect:"/department/list",children:[{path:"list",name:"Departments Index",component:bA,meta:{title:"departments",crumb:{link:{name:"admin_panel",to:"/"},active:"departments"}}},{path:"create",name:"Department Create",component:jo,meta:{title:"departments",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"departments",to:"/department"},active:"create"}}},{path:":id/edit",name:"Department Edit",component:jo,meta:{title:"departments",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"departments",to:"/department"},active:"edit"}}},{path:":id",name:"Department View",component:yP,meta:{title:"departments",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"departments",to:"/department"},active:"view"}}}]},fie={path:"/team",component:Oe,name:"Teams",redirect:"/team/list",children:[{path:"list",name:"Teams Index",component:TP,meta:{title:"teams",crumb:{link:{name:"admin_panel",to:"/"},active:"team"}}},{path:"create",name:"Team Create",component:Bo,meta:{title:"teams",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"teams",to:"/team"},active:"create"}}},{path:":id/edit",name:"Team Edit",component:Bo,meta:{title:"teams",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"teams",to:"/team"},active:"edit"}}},{path:":id",name:"Team View",component:d6,meta:{title:"teams",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"teams",to:"/team"},active:"view"}}}]},gie={path:"/email",component:Oe,name:"Emails",redirect:"/email/list",children:[{path:"list",name:"Emails Index",component:E6,meta:{title:"emails",crumb:{link:{name:"admin_panel",to:"/"},active:"emails"}}},{path:"getdiagno",name:"EmailDiagnostics",component:Cq,meta:{title:"email_diagnostic",crumb:{link:{name:"admin_panel",to:"/"},active:"email_diagnostic"}}},{path:"oauth",name:"EmailAuth",component:Lq,meta:{title:"oauth_integration",crumb:{link:{name:"admin_panel",to:"/"},active:"oauth_integration"}}},{path:"oauth/:id",name:"EmailAuthSettings",component:zq,meta:{title:"oauth_integration_settings",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"oauth_integration",to:"/email/oauth"},active:"oauth_integration_settings"}}},{path:"create",name:"Email Create",component:Ho,meta:{title:"emails",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"emails",to:"/email"},active:"create"}}},{path:":id/edit",name:"Email Edit",component:Ho,meta:{title:"emails",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"emails",to:"/email"},active:"edit"}}}]},vie={path:"/breakline",component:Oe,name:"Breaklines",redirect:"/breakline/list",children:[{path:"list",name:"Breaklines Index",component:gx,meta:{title:"breaklines",crumb:{link:{name:"admin_panel",to:"/"},active:"breaklines"}}},{path:"create",name:"Breakline Create",component:Wo,meta:{title:"breaklines",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"breaklines",to:"/breakline"},active:"create"}}},{path:":id/edit",name:"Breakline Edit",component:Wo,meta:{title:"breaklines",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"breaklines",to:"/breakline"},active:"edit"}}}]},bie={path:"/helptopic",component:Oe,name:"Helptopic",redirect:"/helptopic/list",children:[{path:"list",name:"Helptopic Index",component:Ox,meta:{title:"help_topics",crumb:{link:{name:"admin_panel",to:"/"},active:"help_topics"}}},{path:"create",name:"Helptopic Create",component:zo,meta:{title:"help_topics",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"help_topics",to:"/helptopic"},active:"create"}}},{path:":id/edit",name:"Helptopic Edit",component:zo,meta:{title:"help_topics",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"help_topics",to:"/helptopic"},active:"edit"}}}]},yie={path:"/sla",component:Oe,name:"SLA",redirect:"/sla/list",children:[{path:"list",name:"SLA Index",component:sV,meta:{title:"sla-plans",crumb:{link:{name:"admin_panel",to:"/"},active:"sla-plans"}}},{path:"create",name:"SLA Create",component:Go,meta:{title:"sla-plans",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"sla-plans",to:"/sla"},active:"create"}}},{path:":id/edit",name:"SLA Edit",component:Go,meta:{title:"sla-plans",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"sla-plans",to:"/sla"},active:"edit"}}}]},kie={path:"/business-hour",component:Oe,name:"BusinessHours",redirect:"/business-hour/list",children:[{path:"list",name:"BusinessHours Index",component:q5,meta:{title:"business_hours",crumb:{link:{name:"admin_panel",to:"/"},active:"business_hours"}}},{path:"create",name:"BusinessHour Create",component:Ko,meta:{title:"business_hours",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"business_hours",to:"/business-hour"},active:"create"}}},{path:":id/edit",name:"BusinessHour Edit",component:Ko,meta:{title:"business_hours",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"business_hours",to:"/business-hour"},active:"edit"}}}]},wie={path:"/form-group",component:Oe,name:"FormGroups",redirect:"/form-group/list",children:[{path:"list",name:"FormGroups Index",component:hR,meta:{title:"form-groups",crumb:{link:{name:"admin_panel",to:"/"},active:"form-groups"}}},{path:"create",name:"FormGroup Create",component:co,props:{"form-name-obj":{id:"name",className:"col-md-4",label:"form_group_name",placeholder:"name_your_form_group",value:"",submitFormParamKey:"name"},"form-linker":[{id:"departments",className:"col-md-4",apiEndpoint:"/api/dependency/departments?config=true",label:"department",value:[],submitFormParamKey:"department_ids"},{id:"help_topics",className:"col-md-4",apiEndpoint:"/api/dependency/help-topics?config=true",label:"helptopic",value:[],submitFormParamKey:"help_topic_ids"}],"post-from-group-api":"api/post-form-group","edit-form-group-api":"api/get-form-group","form-category-type":"group"},meta:{title:"form-groups",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"form-groups",to:"/form-group"},active:"create"}}},{path:"edit/:id",name:"FormGroup Edit",component:co,props:{"form-name-obj":{id:"name",className:"col-md-4",label:"form_group_name",placeholder:"name_your_form_group",value:"",submitFormParamKey:"name"},"form-linker":[{id:"departments",className:"col-md-4",apiEndpoint:"/api/dependency/departments?config=true",label:"department",value:[],submitFormParamKey:"department_ids"},{id:"help_topics",className:"col-md-4",apiEndpoint:"/api/dependency/help-topics?config=true",label:"helptopic",value:[],submitFormParamKey:"help_topic_ids"}],"post-from-group-api":"api/post-form-group","edit-form-group-api":"api/get-form-group","form-category-type":"group"},meta:{title:"form-groups",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"form-groups",to:"/form-group"},active:"edit"}}}]},Cie={path:"/workflow",component:Oe,name:"Workflow",redirect:"/automator?type=workflow",children:[{path:"create",name:"Workflow Create",component:pa,props:{category:"workflow"},meta:{title:"workflow",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"workflow",to:"/automator?type=workflow"},active:"create"}}},{path:":id/edit",name:"Workflow Edit",component:pa,props:{category:"workflow"},meta:{title:"workflow",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"workflow",to:"/automator?type=workflow"},active:"edit"}}}]},Die={path:"/approval-workflow",component:Oe,name:"Approval Workflow",redirect:"/approval-workflow/list",children:[{path:"list",name:"Approval Workflow Index",component:uU,meta:{title:"approval_workflow",crumb:{link:{name:"admin_panel",to:"/"},active:"approval_workflow"}}},{path:"create",name:"Approval Workflow Create",component:Jo,meta:{title:"approval_workflow",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"approval_workflow",to:"/approval-workflow"},active:"create"}}},{path:":id/edit",name:"Approval Workflow Edit",component:Jo,meta:{title:"approval_workflow",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"approval_workflow",to:"/approval-workflow"},active:"edit"}}}]},Sie={path:"/ticket/priority",component:Oe,name:"Ticket Priority",redirect:"/ticket/priority/list",children:[{path:"list",name:"Priority Index",component:jU,meta:{title:"priority",crumb:{link:{name:"admin_panel",to:"/"},active:"priority"}}},{path:"create",name:"Priority Create",component:Zo,meta:{title:"priority",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"priority",to:"/ticket/priority"},active:"create"}}},{path:":id/edit",name:"Priority Edit",component:Zo,meta:{title:"priority",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"priority",to:"/ticket/priority"},active:"edit"}}}]},Mie={path:"/ticket-type",component:Oe,name:"Ticket Types",redirect:"/ticket-type/list",children:[{path:"list",name:"Ticket Type Index",component:rj,meta:{title:"ticket_type",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_type"}}},{path:"create",name:"Ticket Type Create",component:Qo,meta:{title:"ticket_type",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_type",to:"/ticket-type"},active:"create"}}},{path:":id/edit",name:"Ticket Type Edit",component:Qo,meta:{title:"ticket_type",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_type",to:"/ticket-type"},active:"edit"}}}]},Fie={path:"/listener",component:Oe,name:"Listener",redirect:"/automator?type=listener",children:[{path:"create",name:"Listener Create",component:pa,props:{category:"listener"},meta:{title:"listeners",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"listeners",to:"/automator?type=listener"},active:"create"}}},{path:":id/edit",name:"Listener Edit",component:pa,props:{category:"listener"},meta:{title:"listeners",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"listeners",to:"/automator?type=listener"},active:"edit"}}}]},$ie={path:"/status",component:Oe,name:"Status",redirect:"/status/list",children:[{path:"list",name:"Status Index",component:Sj,meta:{title:"status",crumb:{link:{name:"admin_panel",to:"/"},active:"status"}}},{path:"create",name:"Status Create",component:Xo,meta:{title:"status",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"status",to:"/status"},active:"create"}}},{path:":id/edit",name:"Status Edit",component:Xo,meta:{title:"status",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"status",to:"/status"},active:"edit"}}}]},Tie={path:"/rating",component:Oe,name:"Rating",redirect:"/rating/list",children:[{path:"list",name:"Rating Index",component:c7,meta:{title:"ratings_settings",crumb:{link:{name:"admin_panel",to:"/"},active:"ratings_settings"}}},{path:"create",name:"Rating Create",component:ei,meta:{title:"create_rating",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ratings_settings",to:"/rating"},active:"create"}}},{path:":id/edit",name:"Rating Edit",component:ei,meta:{title:"edit_rating",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ratings_settings",to:"/rating"},active:"edit"}}}]},Eie={path:"/label",component:Oe,name:"Labels",redirect:"/label/list",children:[{path:"list",name:"Labels Index",component:Y7,meta:{title:"labels",crumb:{link:{name:"admin_panel",to:"/"},active:"labels"}}},{path:"create",name:"Label Create",component:ti,meta:{title:"labels",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"labels",to:"/label"},active:"create"}}},{path:":id/edit",name:"Label Edit",component:ti,meta:{title:"labels",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"labels",to:"/label"},active:"edit"}}}]},Lie={path:"/tag",component:Oe,name:"Tags",redirect:"/tag/list",children:[{path:"list",name:"Tags Index",component:cB,meta:{title:"tags",crumb:{link:{name:"admin_panel",to:"/"},active:"tags"}}},{path:"create",name:"Tag Create",component:ai,meta:{title:"tags",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"tags",to:"/tag"},active:"create"}}},{path:":id/edit",name:"Tag Edit",component:ai,meta:{title:"tags",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"tags",to:"/tag"},active:"edit"}}}]},Aie={path:"/source",component:Oe,name:"Source",redirect:"/source/list",children:[{path:"list",name:"Source Index",component:SB,meta:{title:"source",crumb:{link:{name:"admin_panel",to:"/"},active:"source"}}},{path:"create",name:"Source Create",component:si,meta:{title:"source",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"source",to:"/source"},active:"create"}}},{path:":id/edit",name:"Source Edit",component:si,meta:{title:"source",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"source",to:"/source"},active:"edit"}}}]},Iie={path:"/recur",component:Oe,name:"Recurring",redirect:"/recur/list",children:[{path:"list",name:"Recurring Tickets",component:am,props:{from:"admin"},meta:{title:"ticket_recurring",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_recurring"}}},{path:"create",name:"Recurring Create",component:as,props:{category:"ticket",panel:"admin",scenario:"recur",recur_mode:"create"},meta:{title:"ticket_recurring",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_recurring",to:"/recur"},active:"create"}}},{path:":id/edit",name:"Recurring Edit",component:as,props:{category:"ticket",panel:"admin",scenario:"recur",recur_mode:"edit"},meta:{title:"ticket_recurring",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_recurring",to:"/recur"},active:"edit"}}}]},Pie={path:"/ticket-template",component:Oe,name:"Ticket Templates",redirect:"/ticket-template/list",children:[{path:"list",name:"Ticket Templates Index",component:jB,meta:{title:"ticket_template",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_template"}}},{path:"create",name:"Ticket Template Create",component:as,props:{category:"ticket",panel:"admin",scenario:"template",template_mode:"create"},meta:{title:"ticket_template",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_template",to:"/ticket-template"},active:"create"}}},{path:":id/edit",name:"Ticket Template Edit",component:as,props:{category:"ticket",panel:"admin",scenario:"template",template_mode:"edit"},meta:{title:"ticket_template",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_template",to:"/ticket-template"},active:"edit"}}}]},Oie={path:"/ticket-pdf-template",component:Oe,name:"Ticket PDF Templates",redirect:"/ticket-pdf-template/list",children:[{path:"list",name:"Ticket PDF Templates Index",component:ZB,meta:{title:"ticket_pdf_template",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_pdf_template"}}},{path:"create",name:"Ticket PDF Template Create",component:ni,meta:{title:"ticket_pdf_template",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_pdf_template",to:"/ticket-pdf-template"},active:"create"}}},{path:":id/edit",name:"Ticket PDF Template Edit",component:ni,meta:{title:"ticket_pdf_template",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket_pdf_template",to:"/ticket-pdf-template"},active:"edit"}}}]},qie={path:"/social/media",component:Oe,name:"Social Login",redirect:"/social/media/list",children:[{path:"list",name:"Social Login Index",component:TY,meta:{title:"social-login",crumb:{link:{name:"admin_panel",to:"/"},active:"social-login"}}},{path:":provider",name:"Social Login Provider",component:BY,meta:{title:"social-login",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"social-login",to:"/social/media"},active:"settings"}}}]},xie={path:"/queue",component:Oe,name:"Queue",redirect:"/queue/list",children:[{path:"list",name:"Queue Index",component:$9,meta:{title:"queues",crumb:{link:{name:"admin_panel",to:"/"},active:"queues"}}},{path:":id",name:"Queue Settings",component:U9,meta:{title:"queues",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"queues",to:"/queue"},active:"settings"}}}]},Vie={path:"/third-party-app",component:Oe,name:"ThirdPartyApps",redirect:"/third-party-app/list",children:[{path:"list",name:"ThirdPartyApps Index",component:Z9,meta:{title:"third_party_apps",crumb:{link:{name:"admin_panel",to:"/"},active:"third_party_apps"}}},{path:"create",name:"ThirdPartyApp Create",component:oi,meta:{title:"third_party_apps",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"third_party_apps",to:"/third-party-app"},active:"create"}}},{path:":id/edit",name:"ThirdPartyApp Edit",component:oi,meta:{title:"third_party_apps",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"third_party_apps",to:"/third-party-app"},active:"edit"}}}]},Nie={path:"/single-sign-on/settings",component:Oe,name:"SAML 2.0 Integration",redirect:"/single-sign-on/settings/index",children:[{path:"index",name:"SAML index",component:gW,meta:{title:"SAML_Integration",crumb:{link:{name:"admin_panel",to:"/"},active:"SAML_Integration"}}},{path:"add",name:"SAML Add",component:ii,meta:{title:"SAML_Integration",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"SAML_Integration",to:"/single-sign-on/settings/index"},active:"Add"}}},{path:":id",name:"SAML View",component:EW,meta:{title:"SAML_Integration",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"SAML_Integration",to:"/single-sign-on/settings/index"},active:"View"}}},{path:":id/edit",name:"SAML Edit",component:ii,meta:{title:"SAML_Integration",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"SAML_Integration",to:"/single-sign-on/settings/index"},active:"edit"}}}]},Rie={path:"/cache-driver",component:Oe,name:"Cache Drivers",redirect:"/cache-driver/list",children:[{path:"list",name:"Cache Driver Index",component:sz,meta:{title:"cache-driver",crumb:{link:{name:"admin_panel",to:"/"},active:"cache-driver"}}},{path:"redis",name:"Redis Configs",component:_z,meta:{title:"cache-driver",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"Cache Drivers",to:"/cache-driver/list"},active:"redis_config"}}},{path:"memcached",name:"Memcached Config",component:$z,meta:{title:"cache-driver",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"Cache Drivers",to:"/cache-driver/list"},active:"Memcached Config"}}},{path:"dynamodb",name:"Dynamodb Config",component:Rz,meta:{title:"cache-driver",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"Cache Drivers",to:"/cache-driver/list"},active:"Dynamodb Config"}}}]},Uie={path:"/forms",component:Oe,name:"forms",redirect:"/forms",children:[{path:"",name:"Forms Index",component:MG,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},active:"forms"}}},{path:":type/edit",name:"form-builder-ui",component:zG,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"forms",to:"/forms"},active:"edit"}}}]},jie={path:"/view/import-tracking-details",component:Oe,name:"User Import Progress",redirect:"/view/import-tracking-details",children:[{path:":id",component:lK,name:"User Import Progress Page",props:{},meta:{title:"user_import",crumb:{link:{name:"admin_panel",to:"/"},active:"user_import"}}}]},Bie={path:"/search-driver/settings",component:Oe,name:"search-drivers",redirect:"/search-driver/settings/list",children:[{path:"list",name:"Drivers Index",component:IK,meta:{title:"search-drivers",crumb:{link:{name:"admin_panel",to:"/"},active:"search-drivers"}}},{path:":id",name:"Drivers Settings",component:WK,meta:{title:"search-drivers",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"search-drivers",to:"/search-driver/settings/list"},active:"settings"}}}]},Yie={path:"/websockets",component:Oe,name:"Socket Drivers",redirect:"/websockets/settings",children:[{path:"settings",name:"WebSocket Settings",component:Uy,meta:{title:"websockets",crumb:{link:{name:"admin_panel",to:"/"},active:"websockets"}}},{path:"redis",name:"Redis Config",component:nJ,meta:{title:"websockets",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"websockets",to:"/websockets/settings"},active:"redis_config"}}},{path:"ably",name:"Ably Config",component:fJ,meta:{title:"websockets",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"websockets",to:"/websockets/settings"},active:"Ably Config"}}},{path:"pusher",name:"Pusher Config",component:$J,meta:{title:"websockets",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"websockets",to:"/websockets/settings"},active:"Pusher Config"}}},{path:"reverb",name:"Revern Config",component:RJ,meta:{title:"websockets",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"websockets",to:"/websockets/settings"},active:"Reverb Config"}}}]},Hie={path:"/personal-access-token",component:Oe,name:"personal_access_token",redirect:"/personal-access-token/list",children:[{path:"list",name:"personal_access_token.index",component:YJ,meta:{title:"personal_access_token",crumb:{link:{name:"admin_panel",to:"/"},active:"personal_access_token"}}},{path:"create",name:"personal_access_token.create",component:ri,meta:{title:"personal-access-token",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"personal_access_token",to:"/personal-access-token"},active:"create"}}},{path:":id/edit",name:"personal_access_token.edit",component:ri,meta:{title:"personal-access-token",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"personal_access_token",to:"/personal-access-token"},active:"edit"}}}]},Wie={path:"/trigger",component:Oe,name:"Trigger",redirect:"/trigger/list",children:[{path:"create",name:"Trigger Create",component:pa,props:{category:"trigger"},meta:{title:"trigger",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"trigger",to:"/automator?type=trigger"},active:"create"}}},{path:":id/edit",name:"Trigger Edit",component:pa,props:{category:"trigger"},meta:{title:"trigger",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"trigger",to:"/automator?type=trigger"},active:"edit"}}}]},zie={path:"/new/forms",component:Oe,name:"new.forms.index",redirect:"/new/forms/index",children:[{path:"index",name:"forms.index",component:Nae,meta:{title:"forms_index",crumb:{link:{name:"admin_panel",to:"/"},active:"forms_index"}}},{path:":type/list",name:"forms.list",component:RZ,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"forms_index",to:"/new/forms/index"},active:"forms"}}},{path:":type/:id/edit",name:"forms.builder",component:$ae,beforeEnter:(e,t,a)=>{const r=e.params.type;e.meta.crumb.root_link.to=r==="ticket"?`/new/forms/${r}/list`:"/new/forms/index",a()},meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"forms",to:""},active:"edit"}}}]},Gie={path:"/ticket-fields",component:Oe,name:"ticket.fields",redirect:"/ticket-fields/list",children:[{path:"/ticket-fields/list",name:"ticket.fields.index",component:Jae,meta:{title:"tickets",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket-fields"}}},{path:"/ticket-fields/formFields/create",name:"ticket.fields.create",component:hi,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket-fields",to:"/ticket-fields"},active:"create"}}},{path:"/ticket-fields/edit/formFields/:type/:id",name:"ticket.fields.edit",component:hi,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket-fields",to:"/ticket-fields"},active:"edit"}}},{path:"/ticket-fields/sections/create",name:"ticket.sections.create",component:pi,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket-fields",to:"/ticket-fields"},active:"create"}}},{path:"/ticket-fields/edit/sections/:type/:id",name:"ticket.sections.edit",component:pi,meta:{title:"forms",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"ticket-fields",to:"/ticket-fields"},active:"edit"}}}]},Kie={path:"/oauth",component:Oe,name:"oauth_2_0",redirect:"/oauth/list",children:[{path:"list",name:"oauth.index",component:zse,meta:{title:"oauth_2_0",crumb:{link:{name:"admin_panel",to:"/"},active:"oauth_2_0"}}},{path:"create",name:"oauth.create",component:pne,meta:{title:"oauth-client",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"oauth_2_0",to:"/oauth/list"},active:"create"}}},{path:":id/edit",name:"oauth.edit",component:Yne,meta:{title:"oauth-client",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"oauth_2_0",to:"/oauth/list"},active:"edit"}}}]},Jie=[{path:"/",component:Oe,redirect:"/home",name:"Admin Layout",children:[{path:"home",name:"Admin Index",component:Bs,meta:{title:"admin_panel",crumb:{active:"admin_panel"}}},{path:"dashboard",name:"Admin Dashboard",component:Bs,redirect:"home",meta:{title:"admin_panel",crumb:{active:"admin_panel"}}},{path:"admin",name:"Admin Index Page",component:Bs,redirect:"home",meta:{title:"admin_panel",crumb:{active:"admin_panel"}}},{path:"widgets",name:"Widgets",component:r_,meta:{title:"widgets",crumb:{link:{name:"admin_panel",to:"/"},active:"widgets"}}},{path:"/getticket",name:"TicketSettings",component:V_,meta:{title:"ticket_settings",crumb:{link:{name:"admin_panel",to:"/"},active:"ticket_settings"}}},{path:"/close-workflow",name:"Close Ticket Workflow",component:tf,meta:{title:"close_ticket_workflow",crumb:{link:{name:"admin_panel",to:"/"},active:"close_ticket_workflow"}}},{path:"/getcompany",name:"CompanySettings",component:ag,meta:{title:"company",crumb:{link:{name:"admin_panel",to:"/"},active:"company"}}},{path:"/getsystem",name:"SystemSettings",component:gg,meta:{title:"system",crumb:{link:{name:"admin_panel",to:"/"},active:"system"}}},{path:"/user-options",name:"UserOptions",component:Ug,meta:{title:"user-options",crumb:{link:{name:"admin_panel",to:"/"},active:"user-options"}}},{path:"/languages",name:"Languages",component:tv,meta:{title:"language",crumb:{link:{name:"admin_panel",to:"/"},active:"language"}}},{path:"/job-scheduler",name:"CRONSettings",component:Bv,meta:{title:"cron",crumb:{link:{name:"admin_panel",to:"/"},active:"cron"}}},{path:"/security",name:"SecuritySettings",component:ab,meta:{title:"security",crumb:{link:{name:"admin_panel",to:"/"},active:"security"}}},{path:"/file-system-settings",name:"FileSystem",component:fb,meta:{title:"settings_file_system",crumb:{link:{name:"admin_panel",to:"/"},active:"settings_file_system"}}},{path:"/system-backup",name:"SystemBackup",component:Ab,meta:{title:"system-backup",crumb:{link:{name:"admin_panel",to:"/"},active:"system-backup"}}},{path:"social-icon",name:"Widgets Social Icon",component:Qb,meta:{title:"social-icon-links",crumb:{link:{name:"admin_panel",to:"/"},active:"social-icon-links"}}},{path:"settings-api",name:"API Settings",component:uy,meta:{title:"api",crumb:{link:{name:"admin_panel",to:"/"},active:"api"}}},{path:"iframe-injection",name:"Iframe",redirect:"/iframe-injection/list",children:[{path:"list",name:"Iframe Configuration",component:Uoe,meta:{title:"iframe-configuration",crumb:{link:{name:"admin_panel",to:"/"},active:"iframe-configuration"}}},{path:"create",name:"Add Iframe Configuration",component:fi,meta:{title:"create_iframe_configuration",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"iframe-configuration",to:"/iframe-injection"},active:"create"}}},{path:":id/edit",name:"Edit Iframe Configuration",component:fi,meta:{title:"edit_iframe_configuration",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"iframe-configuration",to:"/iframe-injection"},active:"edit"}}},{path:":id/settings",name:"Iframe Parameter Settings",component:hie,meta:{title:"iframe_parameter_settings",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"iframe-configuration",to:"/iframe-injection"},active:"iframe_parameter_settings"}}}]},{path:"webhook",name:"Webhook",redirect:"/webhook/list",children:[{path:"list",name:"Webhook List",component:Xne,meta:{title:"webhooks",crumb:{link:{name:"admin_panel",to:"/"},active:"webhooks"}}},{path:"add",name:"Add Webhook",component:_i,meta:{title:"webhooks",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"webhooks",to:"/webhook"},active:"add"}}},{path:":id/edit",name:"Edit Webhook",component:_i,meta:{title:"webhooks",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"webhooks",to:"/webhook"},active:"edit"}}},{path:":id/logs",name:"Webhook Logs",component:xoe,meta:{title:"webhooks",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"webhooks",to:"/webhook"},active:"logs"}}}]},{path:"importer",name:"Import Upload",component:h1,meta:{title:"importer_user_import",crumb:{link:{name:"admin_panel",to:"/"},active:"importer_user_import"}}},{path:"recaptcha",name:"Recaptcha",component:M1,meta:{title:"recaptcha",crumb:{link:{name:"admin_panel",to:"/"},active:"recaptcha"}}},{path:"login-log-setting",name:"LoginLogs",component:N1,meta:{title:"login-log-setting",crumb:{link:{name:"admin_panel",to:"/"},active:"login-log-setting"}}},{path:"client/ticket-filter",name:"ClientFilter",component:G1,meta:{title:"client-filter",crumb:{link:{name:"admin_panel",to:"/"},active:"client-filter"}}},{path:"plugins",name:"Plugins",component:j0,meta:{title:"plugins",crumb:{link:{name:"admin_panel",to:"/"},active:"plugins"}}},{path:"modules",name:"Modules",component:sw,meta:{title:"modules",crumb:{link:{name:"admin_panel",to:"/"},active:"modules"}}},{path:"error-and-debugging-options",name:"ErrorDebug",component:_w,meta:{title:"error-debug-settings",crumb:{link:{name:"admin_panel",to:"/"},active:"error-debug-settings"}}},{path:"system-level-activity-logs",name:"System Level Activity Logs",component:nE,meta:{title:"system-level-activity-logs",crumb:{link:{name:"admin_panel",to:"/"},active:"system-level-activity-logs"}}},{path:"check-updates",name:"System Updates",component:xL,meta:{title:"application_updates",crumb:{link:{name:"admin_panel",to:"/"},active:"application_updates"}}},{path:"clean-dummy-data",name:"DummyData",component:KL,meta:{title:"delete_dummy_data",crumb:{link:{name:"admin_panel",to:"/"},active:"delete_dummy_data"}}},{path:"automator",name:"TriggerAutomator",component:J4,meta:{title:"automator",crumb:{link:{name:"admin_panel",to:"/"},active:"automator"}}}]},pie,_ie,fie,gie,vie,bie,yie,kie,wie,Cie,Die,Sie,Mie,Fie,$ie,Eie,Lie,Aie,Iie,qie,xie,Vie,Tie,Pie,Oie,Nie,jie,Rie,Uie,Bie,Yie,Hie,Kie,Wie,zie,Gie,{path:"/:pathMatch(.*)*",name:"404",component:tm}];const nle=ju({history:Bu(),inkActiveClass:"",linkExactActiveClass:"active exact-active",routes:Jie,scrollBehavior(e,t,a){return{top:0}}});export{Oe as A,PW as D,Ti as F,ti as L,tr as M,pa as S,U3 as T,i1 as U,sr as _,li as a,eG as b,lG as c,fn as d,co as e,nle as r,Li as v};

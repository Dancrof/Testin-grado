import{_,M as m,f as k,g as p,D as C,T as V,j as g,k as n,o as d,l as x,m as o,q as s,t as E}from"./bootstrap.js";import{R as w,C as M}from"./FormGenerator.js";const D={name:"custom-form-fields",props:{formField:{type:Object,required:!0},allFields:{type:Array,default:()=>[]},classname:{type:String,default:"col-sm-6"}},data(){return{selectedVal:this.formField.value,uniqueId:this.formField.key,updatedFields:this.allFields,dropdownOptions:[],dropdownLabel:"label",country_code:null,showMobileField:!1}},watch:{allFields(e,t){this.updatedFields=e},formField(e,t){if(this.uniqueId=e.key,this.selectedVal=e.value,e.data_type==="checkbox"&&(this.selectedVal=Array.isArray(this.selectedVal)?this.selectedVal:this.selectedVal.split(",")),e.data_type==="mobile"&&this.selectedVal&&this.selectedVal.includes(" ")){const l=this.selectedVal.split(" ");l.length>1&&(l.shift(),this.selectedVal=l.join(" "))}}},beforeMount(){this.formField.data_type==="mobile"&&this.formField.value&&this.formField.value.includes(" ")?(this.country_code=this.formField.value.split(" ")[0],this.showMobileField=!0):this.showMobileField=!0},computed:{apiInfoUrl(){let e=m.convertStringOfPropertiesToObject(this.formField.api_info).url;return!e&&this.formField.api_info&&(e=this.formField.api_info),e},dropdownKey(){return m.convertStringOfPropertiesToObject(this.formField.api_info).key||"label"},selectedValue(){let e=this.updatedFields.findIndex(t=>t.key==this.uniqueId);if(e!=-1){if(this.formField.data_type==="mobile"&&this.selectedVal&&this.selectedVal.includes(" ")){const t=this.selectedVal.split(" ");if(t.length>1)return t.shift(),t.join(" ")}if(Array.isArray(this.selectedVal)&&this.selectedVal!=null){let t=[];return this.selectedVal.forEach(l=>{typeof l=="object"?t.push(l.label):t.push(l)}),this.updatedFields[e].value=t.map(l=>l).toString(),this.updatedFields[e].options.filter(l=>t.includes(l.label))}else if(k(this.updatedFields[e].options)){let t="";return typeof this.selectedVal=="object"?t=this.selectedVal.label:t=this.selectedVal,this.updatedFields[e].options.find(l=>l.label===t)}else return this.selectedVal?this.selectedVal:""}else return this.selectedVal}},methods:{keypressEvent(e,t,l){if(l==="number"||l==="mobile"){e=e||window.event;var a=e.which?e.which:e.keyCode;if(a>31&&(a<48||a>57))e.preventDefault();else return!0}else if(l==="float"||l==="decimal"){e=e||window.event;var a=e.which?e.which:e.keyCode;if(a>=48&&a<=57||a==46)return!0;e.preventDefault()}},pasteEvent(e,t,l){if(l==="number"||l==="mobile")e=e||window.event,e.clipboardData.getData("Text").match(/[^\d]/)&&e.preventDefault();else if(l==="float"||l==="decimal"){e=e||window.event;var a=e.clipboardData||window.clipboardData,r=a.getData("Text");/^\d*\.\d*$/.test(r)||e.preventDefault()}},onCountryCodeUpdate(e,t){this[t]=e},onChange(e,t){this.formField.data_type==="number"&&e===0&&(e="0");let l=this.updatedFields.findIndex(a=>a.key==t);Array.isArray(e)&&e!=null?(this.updatedFields[l].value=e.map(a=>a.label).toString(),this.selectedVal=e):typeof e=="object"&&e!=null?(this.updatedFields[l].value=e[this.dropdownLabel],this.selectedVal=e):this.formField.data_type==="mobile"?(this.updatedFields[l].value=e?this.country_code+" "+e:"",this.selectedVal=e?this.country_code+" "+e:""):(this.updatedFields[l].value=e||"",this.selectedVal=e||""),this.$emit("updated",this.updatedFields)}},components:{MobileField:p,"dynamic-select":C,"text-field":V,"radio-field":w,"checkbox-field":M,"date-time-field":g}};function v(e,t,l,a,r,i){const f=n("date-time-field"),c=n("dynamic-select"),h=n("text-field"),u=n("radio-field"),y=n("checkbox-field"),F=n("MobileField");return d(),x("div",{class:E(l.classname)},[l.formField.data_type==="date"?(d(),o(f,{key:0,type:l.formField.request_time_information?"datetime":"date",label:l.formField.label,value:i.selectedValue,id:l.formField.key,required:!1,name:l.formField.key,onChange:i.onChange,format:l.formField.request_time_information?"MMMM DD YYYY HH:mm:ss":"MMMM DD YYYY",clearable:!0,outputFormat:"YYYY-MM-DD HH:mm:ss"},null,8,["type","label","value","id","name","onChange","format"])):s("",!0),l.formField.data_type==="select"?(d(),o(c,{key:1,id:l.formField.key,label:l.formField.label,multiple:!1,name:l.formField.key,apiEndpoint:i.apiInfoUrl,value:i.selectedValue,onChange:i.onChange,optionLabel:r.dropdownLabel},null,8,["id","label","name","apiEndpoint","value","onChange","optionLabel"])):s("",!0),l.formField.data_type==="text"||l.formField.data_type==="textarea"||l.formField.data_type==="number"||l.formField.data_type==="decimal"||l.formField.data_type==="email"?(d(),o(h,{key:2,id:l.formField.key,label:l.formField.label,type:l.formField.data_type,name:l.formField.key,value:i.selectedValue,onChange:i.onChange,from:"filter",keypressEvt:i.keypressEvent,pasteEvt:i.pasteEvent},null,8,["id","label","type","name","value","onChange","keypressEvt","pasteEvt"])):s("",!0),l.formField.data_type==="radio"?(d(),o(u,{key:3,name:l.formField.key,label:l.formField.label,options:l.formField.options,value:i.selectedValue,onChange:i.onChange,from:"filter"},null,8,["name","label","options","value","onChange"])):s("",!0),l.formField.data_type==="checkbox"?(d(),o(y,{key:4,name:l.formField.key,label:l.formField.label,options:l.formField.options,value:i.selectedValue,onChange:i.onChange,from:"filter"},null,8,["name","label","options","value","onChange"])):s("",!0),r.showMobileField&&l.formField.data_type==="mobile"?(d(),o(F,{key:5,fieldFor:"automator",id:l.formField.key,label:l.formField.label,type:l.formField.data_type,name:l.formField.key,value:i.selectedValue,onChange:i.onChange,isInlineForm:!1,countryCode:r.country_code,onCountryCode:t[0]||(t[0]=b=>i.onCountryCodeUpdate(b,"country_code")),keypressEvt:i.keypressEvent,pasteEvt:i.pasteEvent,extensionEnabled:0,ext:[]},null,8,["id","label","type","name","value","onChange","countryCode","keypressEvt","pasteEvt"])):s("",!0)],2)}const I=_(D,[["render",v]]);export{I as C};

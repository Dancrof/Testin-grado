import{_ as w,B as b,l as n,v as s,t as g,x as a,q as h,J as m,I as p,L as c,N as f,S as _,K as y,U as M,o as r}from"./bootstrap.js";const k={name:"help-widget",props:{from:{type:String,default:""}},data(){return{supportBaseUrl:"https://support.faveohelpdesk.com/show/",chatClass:"chat",btnClass:"fab",iconClass:"prime fas fa-question",articleList:[],loading:!1,hasDataPopulated:!1,showContent:!1,searchFilter:"",widgetOpen:!1,getIn:!1,files:[],help_email:"support@ladybirdweb.com",help_subject:"",help_message:"",alertMsg:"",alertClass:"",product:"",impact:"",about:"",profileData:"",name:"",email:"",url:"",contentMsg:"",fileUploadRuleObject:{},newUserMail:""}},beforeMount(){this.newUserMail=this.loggedUserMail},computed:{totalFileCount(){return this.files.length},totalFileSizeInBytes(){return this.files.length?this.files.map(l=>l.size).reduce((l,e)=>l+e):0}},methods:{disableStatus(l){return l&&l.length!=0},bytesToHuman(l){const e=["Bytes","KB","MB","GB","TB"];if(l===0)return"0 Bytes";const u=parseInt(Math.floor(Math.log(l)/Math.log(1024)),10);return u===0?`${l} ${e[u]}`:`${(l/1024**u).toFixed(1)} ${e[u]}`},async getFileUploadRules(){try{let{data:l}=await b.get("file-manager/upload-info");this.fileUploadRuleObject=l.data}catch{}},makeFalse(){this.getIn=!1,this.alertMsg="",this.resetData()},onFileSelected(l){const e=l.target.files;let d=[...e].map(o=>o.size).reduce((o,i)=>o+i);if(this.totalFileSizeInBytes+d>this.fileUploadRuleObject.maxPostSize){this.alertClass="alert-danger",this.alertMsg=`Maximum post size should be less than ${this.bytesToHuman(this.fileUploadRuleObject.maxPostSize)}`,this.scrollToDiv();return}if(this.totalFileCount+e.length>this.fileUploadRuleObject.maxFileUploadCount){this.alertMsg=`Maximum ${this.fileUploadRuleObject.maxFileUploadCount} file(s) can be uploaded at once`,this.alertClass="alert-danger",this.scrollToDiv();return}for(var t=0;t<e.length;t++){if(e[t].size>this.fileUploadRuleObject.maxSingleFileSize){this.alertMsg=`File size cannot be greater than ${this.bytesToHuman(this.fileUploadRuleObject.maxSingleFileSize)}`,this.alertClass="alert-danger",this.scrollToDiv();return}this.files.push(e[t])}},removeFile(l){this.files.splice(l,1)},toggleFab(){this.widgetOpen=!this.widgetOpen,this.chatClass=this.chatClass=="chat"?"chat is-visible":"chat",this.btnClass=this.btnClass=="fab"?"fab is-float is-visible":"fab",this.iconClass=this.iconClass=="prime fas fa-question"?"prime fas fa-times is-active is-visible":"prime fas fa-question",this.widgetOpen?(this.getFileUploadRules(),this.getArticles()):(this.articleList=[],this.loading=!1,this.hasDataPopulated=!1,this.showContent=!1,this.searchFilter="",this.widgetOpen=!1,this.getIn=!1,this.contentMsg="")},getArticles(l="https://support.faveohelpdesk.com/api/article-list-with-category",e,u=!1){this.loading=!0;var d=e;delete window.axios.defaults.headers.common["X-Requested-With"],b.get(l,{params:d}).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.articleList=u?t.data.data.articles.data:t.data.data.articles,setTimeout(()=>{this.widgetOpen&&!this.showContent&&!this.getIn&&!this.contentMsg&&!this.loading&&document.getElementById("helpInput").focus()},1)}).catch(t=>{this.loading=!1,this.hasDataPopulated=!0}),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"},setFilter(){this.searchFilter?this.getArticles("https://support.faveohelpdesk.com/api/search",{s:this.searchFilter},!0):this.getArticles()},sendMail(){this.help_subject&&this.help_message&&this.newUserMail?/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(this.newUserMail)?(this.onSubmit(),this.alertMsg=""):(this.alertClass="alert-danger",this.alertMsg="Enter valid email address",this.scrollToDiv()):(this.alertClass="alert-danger",this.alertMsg=this.lang("please_fill_required_fields"),this.scrollToDiv())},onSubmit(){let l=`${this.help_message.replace(/\n/g,"<br>")}<br><b>Product</b> : ${this.product}<br><b>Impact</b> : ${this.impact}<br><b>About</b> : ${this.about}<br><b>Name</b> : ${this.loggedUserName}<br><b>Email</b> : ${this.newUserMail}<br><b>Account URL</b> : ${this.url}<br>`;this.loading=!0;let e=new FormData;if(e.append("name",this.loggedUserName),e.append("email",this.newUserMail),e.append("help_email",this.help_email),e.append("help_subject",this.help_subject),e.append("help_massage",l),e.append("reply_email",this.newUserMail),this.files.length)for(let d in this.files)e.append("helpdocs["+d+"]",this.files[d]);const u={headers:{"Content-Type":"multipart/form-data"}};b.post("/helpsection/mail",e,u).then(d=>{this.loading=!1,d.data=="Message Sent! Thanks for reaching out! Someone from our team will get back to you soon."?(this.contentMsg=d.data,this.resetData()):(this.alertClass="alert-danger",this.alertMsg=d.data.fails,this.scrollToDiv())}).catch(d=>{this.contentMsg="",this.alertMsg="",this.loading=!1})},scrollToDiv(){setTimeout(()=>{var l=document.getElementById("get_touch");l.scrollIntoView({behavior:"smooth"})},1)},resetData(){this.files=[],this.help_email="support@ladybirdweb.com",this.help_subject="",this.help_message="",this.product="",this.impact="",this.about="",this.name="",this.email="",this.url="",this.newUserMail=this.loggedUserMail}}},C={class:"chat_header"},U={class:"chat_option"},F={id:"chat_head"},S={class:"chat_body"},I={key:0,id:"loader"},j={key:0},D={class:"card-body text-center"},T={class:"mt-4"},z={key:0,class:"text-start",id:"get_touch"},O={key:1,class:"card card-light"},B={class:"card-header"},x={class:"card-title"},R={class:"card-tools"},q={class:"card-body"},A={class:"row"},V={class:"col-sm-12"},L={class:"float-start"},H=["value"],N={class:"col-sm-12"},P={class:"float-start"},E=["value","disabled"],K={class:"col-sm-12"},X={class:"float-start"},Z={class:"col-sm-12"},W={class:"float-start"},G={class:"col-sm-12"},J={class:"float-start"},Q={class:"col-sm-12"},Y={class:"float-start"},$={class:"col-sm-12"},ee={class:"float-start"},se={class:"col-sm-12"},te={class:"float-start"},le={class:"text-start"},ie={class:"float-end m-16"},ae=["onClick","title"],oe={class:"card-footer"},ne={key:0,class:"card card-light"},re={class:"card-header"},de={class:"card-title"},he={class:"card-body"},ue={class:"input-group"},ce=["placeholder"],pe={class:"input-group-append"},ge={class:"art_wid_sug"},me={key:0,class:"art_wid"},fe={class:"card bg-light wd_cursor"},be={class:"card-header d-flex"},_e={class:"card-title art_wid_tit"},ve=["href"],ye={key:1},we={class:"con-tooltip top"},Me={key:0,class:"help-tooltip"},ke={class:"help_section_p"};function Ce(l,e,u,d,t,o){return r(),n("div",null,[s("div",{class:g(["fabs",t.widgetOpen?"increaseIndex":"normalIndex"])},[t.widgetOpen?(r(),n("div",{key:0,class:g(t.chatClass)},[s("div",C,[s("div",U,[s("h5",F,a(l.lang("welcome_to_support_center")),1)])]),s("div",S,[t.loading?(r(),n("div",I)):h("",!0),t.loading?h("",!0):(r(),n(m,{key:1},[t.contentMsg?(r(),n("div",j,[s("div",D,[e[16]||(e[16]=s("i",{class:"fas fa-envelope-open-text fa-8x text-success"},null,-1)),s("h5",T,a(t.contentMsg),1),e[17]||(e[17]=s("br",null,null,-1))])])):h("",!0),t.contentMsg?h("",!0):(r(),n(m,{key:1},[t.alertMsg&&t.getIn?(r(),n("div",z,[s("div",{class:g(["alert alert-dismissible",t.alertClass])},a(t.alertMsg),3)])):h("",!0),t.getIn?(r(),n("div",O,[s("div",B,[s("h3",x,a(l.lang("get_in_touch")),1),s("div",R,[s("button",{class:"btn btn-light btn-tool m-auto",onClick:e[0]||(e[0]=(...i)=>o.makeFalse&&o.makeFalse(...i))},e[18]||(e[18]=[s("i",{class:"fas fa-times"},null,-1)]))])]),s("div",q,[s("div",A,[s("div",V,[s("label",L,a(l.lang("your_name")),1),s("input",{type:"text",name:"name",value:l.loggedUserName,class:"form-control",disabled:!0},null,8,H)]),s("div",N,[s("label",P,[p(a(l.lang("your_email_address"))+" ",1),e[19]||(e[19]=s("span",{class:"text-danger"}," *",-1))]),o.disableStatus(this.loggedUserMail)?(r(),n("input",{key:1,type:"email",name:"email",value:l.loggedUserMail,class:"form-control",disabled:o.disableStatus(this.loggedUserMail)},null,8,E)):c((r(),n("input",{key:0,type:"email",name:"email","onUpdate:modelValue":e[1]||(e[1]=i=>t.newUserMail=i),class:"form-control"},null,512)),[[f,t.newUserMail]])]),s("div",K,[s("label",X,a(l.lang("select_your_product")),1),c(s("select",{"onUpdate:modelValue":e[2]||(e[2]=i=>t.product=i),class:"form-control"},e[20]||(e[20]=[s("option",null,"--",-1),s("option",null,"Helpdesk",-1),s("option",null,"Servicedesk",-1)]),512),[[_,t.product]])]),s("div",Z,[s("label",W,a(l.lang("your_account_url")),1),c(s("input",{type:"text",name:"url","onUpdate:modelValue":e[3]||(e[3]=i=>t.url=i),class:"form-control"},null,512),[[f,t.url]])]),s("div",G,[s("label",J,a(l.lang("how_does_it_impact_your_business")),1),c(s("select",{"onUpdate:modelValue":e[4]||(e[4]=i=>t.impact=i),class:"form-control"},e[21]||(e[21]=[s("option",null,"--",-1),s("option",null,"Low [How to setup something]",-1),s("option",null,"Minor [Issues with the setup]",-1),s("option",null,"Major [A major functionality has stopped working]",-1),s("option",null,"Critical [Severe outage/downtime]",-1)]),512),[[_,t.impact]])]),s("div",Q,[s("label",Y,a(l.lang("what_this_about")),1),c(s("select",{"onUpdate:modelValue":e[5]||(e[5]=i=>t.about=i),class:"form-control"},e[22]||(e[22]=[s("option",null,"--",-1),s("option",null,"Sales / pricing question",-1),s("option",null,"Technical support question",-1)]),512),[[_,t.about]])]),s("div",$,[s("label",ee,[p(a(l.lang("subject"))+" ",1),e[23]||(e[23]=s("span",{class:"text-danger"}," *",-1))]),c(s("input",{type:"text",name:"help_subject","onUpdate:modelValue":e[6]||(e[6]=i=>t.help_subject=i),class:"form-control"},null,512),[[f,t.help_subject]])]),s("div",se,[s("label",te,[p(a(l.lang("describe_your_problem/question"))+" ",1),e[24]||(e[24]=s("span",{class:"text-danger"}," *",-1))]),c(s("textarea",{name:"help_message","onUpdate:modelValue":e[7]||(e[7]=i=>t.help_message=i),class:"form-control"},null,512),[[f,t.help_message]])]),s("div",null,[s("input",{enctype:"multipart/form-data",multiple:!0,type:"file",ref:"help_doc",name:"help_doc",id:"helpdocs",title:"File input",files:"true",onChange:e[8]||(e[8]=(...i)=>o.onFileSelected&&o.onFileSelected(...i))},null,544),s("button",{"data-bs-toggle":"modal",onClick:e[9]||(e[9]=i=>l.$refs.help_doc.click()),class:"btn-bs-file btn btn-sm btn-light btn-block mlr-8 mt-2"},[s("span",null,[e[25]||(e[25]=s("i",{class:"far fa-file"},null,-1)),p(" "+a(l.lang("choose_file")),1)])])]),t.files&&t.files.length?(r(!0),n(m,{key:0},y(t.files,(i,v)=>(r(),n("div",{key:v,class:"file-detail-box"},[s("div",le,a(i.name||i.value),1),s("div",ie,[s("i",{class:"fas fa-times wd_cursor",onClick:Ue=>o.removeFile(v),title:l.trans("remove")},null,8,ae)])]))),128)):h("",!0)])]),s("div",oe,[s("button",{class:"btn btn-primary float-end",onClick:e[10]||(e[10]=(...i)=>o.sendMail&&o.sendMail(...i))},[e[26]||(e[26]=s("i",{class:"fas fa-paper-plane"},null,-1)),p(" "+a(l.lang("send")),1)])])])):h("",!0),t.getIn?h("",!0):(r(),n(m,{key:2},[t.showContent?h("",!0):(r(),n("div",ne,[s("div",re,[s("h3",de,a(l.lang("got_questions")),1)]),s("div",he,[s("div",ue,[c(s("input",{type:"text",autofocus:"",id:"helpInput",name:"message",placeholder:l.lang("search"),class:"form-control","onUpdate:modelValue":e[11]||(e[11]=i=>t.searchFilter=i),onKeyup:e[12]||(e[12]=M((...i)=>o.setFilter&&o.setFilter(...i),["enter"]))},null,40,ce),[[f,t.searchFilter]]),s("span",pe,[s("button",{type:"submit",class:"btn btn-light",onClick:e[13]||(e[13]=(...i)=>o.setFilter&&o.setFilter(...i))},e[27]||(e[27]=[s("i",{class:"fas fa-search"},null,-1)]))])]),e[30]||(e[30]=s("br",null,null,-1)),s("h6",ge,a(l.lang("suggested_articles")),1),t.articleList.length?(r(),n("div",me,[(r(!0),n(m,null,y(t.articleList,i=>(r(),n("div",fe,[s("div",be,[e[28]||(e[28]=s("i",{class:"fas fa-newspaper mt_wid_icon"},null,-1)),e[29]||(e[29]=p("    ")),s("h3",_e,[s("a",{target:"_blank",href:t.supportBaseUrl+i.slug,class:"text-dark"},a(i.name),9,ve)])])]))),256))])):(r(),n("div",ye,a(l.lang("no_results_found")),1))])]))],64))],64)),!t.getIn&&!t.showContent&&!t.contentMsg?(r(),n("button",{key:2,class:"btn btn-primary btn-lg btn-block",onClick:e[14]||(e[14]=i=>t.getIn=!0)},[e[31]||(e[31]=s("i",{class:"fas fa-pen-alt"},null,-1)),p(" "+a(l.lang("get_in_touch")),1)])):h("",!0)],64))])],2)):h("",!0),s("div",we,[s("a",{id:"prime",class:g(t.btnClass),onClick:e[15]||(e[15]=(...i)=>o.toggleFab&&o.toggleFab(...i))},[s("i",{class:g(t.iconClass)},null,2)],2),t.widgetOpen?h("",!0):(r(),n("div",Me,[s("p",ke,a(l.lang("help_center")),1)]))])],2)])}const Se=w(k,[["render",Ce],["__scopeId","data-v-8ae953ba"]]);export{Se as H};

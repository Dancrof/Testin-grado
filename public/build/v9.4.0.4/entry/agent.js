import{_ as u,l as h,m as l,q as d,G as g,a1 as b,J as E,k as p,o as n,F as w,a3 as y,a4 as M,a5 as F,a6 as _,a7 as C,a8 as I,a9 as A,s as i,aa as S}from"../chunks/bootstrap.js";import{S as B}from"../chunks/VueStarRating.common.js";import{B as v}from"../chunks/BarcodeModal.js";import{s as P,F as x,f as V}from"../chunks/FileManager.js";import{a as L}from"../chunks/FormGenerator.js";import{C as k}from"../chunks/Loader.js";import{D as R}from"../chunks/DataTableActions.js";import{r}from"../chunks/agentRouter.js";import"../chunks/AdminNavigationBar.js";import"../chunks/vue-router.js";import"../chunks/Checkbox.js";import"../chunks/HelpSection.js";import"../chunks/approvalTicketRules.js";import"../chunks/EleaTicketThreadSummary.js";import"../chunks/PermaLink.js";const T={props:{authInfo:{type:Object,default:()=>{}},companyInfo:{type:Object,default:()=>{}},portalInfo:{type:Object,default:()=>{}},whiteLabel:{type:Boolean,default:!1},tag:{type:String,default:""},version:{type:String,default:""},dummyInstall:{type:[Boolean,String],default:""},isMailConfigured:{type:[Boolean,String],default:""},is2faEnforced:{type:[Boolean,String],default:""},is2faEnabled:{type:[Boolean,String],default:""},isUpdatedVersion:{type:[Boolean,Number],default:!1}},data(){return{updatedAuth:this.authInfo,updatedPortal:this.portalInfo,isFactorEnable:this.is2faEnabled,showModal:!1,agentScripts:[]}},mixins:[P],watch:{$route(a,t){this.fireScripts(a.path,"agentlayout"),this.is2faEnforced&&!this.isFactorEnable&&(this.showModal=!0),this.$store.dispatch("unsetAlert"),this.$store.dispatch("unsetValidationError")}},beforeMount(){this.getScripts("agentlayout"),this.is2faEnforced&&!this.isFactorEnable&&(this.showModal=!0)},created(){window.emitter.on("updateAgentProfile",this.updateProfile),window.emitter.on("updateEditData",this.updateFactor)},methods:{updateFactor(a){this.isFactorEnable=a,this.is2faEnforced&&!this.isFactorEnable&&(this.$store.dispatch("unsetValidationError"),this.showModal=!0)},updateProfile(a){Object.keys(this.updatedAuth.user_data).forEach(t=>this.updatedAuth.user_data[t]=a[t]||this.updatedAuth.user_data[t])},onClose(a){(this.is2faEnforced&&this.isFactorEnable||!this.is2faEnforced||a==="2faDone")&&(this.showModal=!1),this.$store.dispatch("unsetValidationError")}},components:{"barcode-modal":v}};function U(a,t,e,s,o,f){const c=p("router-view"),m=p("barcode-modal");return n(),h(E,null,[o.showModal?d("",!0):(n(),l(c,{key:0,auth:o.updatedAuth,company:e.companyInfo,portal:e.portalInfo,whiteLabel:e.whiteLabel,tag:e.tag,version:e.version,dummyInstall:e.dummyInstall,isMailConfigured:e.isMailConfigured,isFAEnforced:e.is2faEnforced,isFAEnabled:e.is2faEnabled,isUpdatedVersion:e.isUpdatedVersion},null,8,["auth","company","portal","whiteLabel","tag","version","dummyInstall","isMailConfigured","isFAEnforced","isFAEnabled","isUpdatedVersion"])),o.showModal?(n(),l(b,{key:1,name:"modal"},{default:g(()=>[w(m,{onClose:f.onClose,showModal:o.showModal},null,8,["onClose","showModal"])]),_:1})):d("",!0)],64)}const j=u(T,[["render",U]]);app.component("star-rating",B);app.component("agent-panel-renderer",j);app.component("form-renderer",y);app.component("recurring-tickets-index",L);app.component("alert",M);app.component("modal",F);app.component("loader",k);app.component("custom-loader",_);app.component("reuse-loader",C);app.component("faveo-box",I);app.component("faveo-image-element",A);app.component("data-table",R);r.beforeEach((a,t,e)=>{if(sessionStorage.getItem("user_role")!="user")e();else{let s=window.axios.defaults.baseURL;a.fullPath.includes("/thread/")&&(s+=a.fullPath),window.location.href=s}});i.dispatch("setRatingTypes");setTimeout(()=>{app.use(r),app.use(i),app.mount("#app-agent")},1e3);r.beforeEach((a,t,e)=>{app.config.globalProperties.$Progress.start(),e()});r.afterEach(()=>{setTimeout(()=>{app.config.globalProperties.$Progress.finish()},1e3)});app.component("file-manager",x);i.registerModule("fm",V);app.component("file-manager-container",S);

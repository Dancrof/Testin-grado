import{ad as B,a2 as C,s as F,_ as M,B as P,C as V,E as A,T as J,m as L,G as y,q as c,k as p,W as O,o as n,v as i,x as d,l as a,L as k,F as S,t as g,I as v,X as R,Z as W,e as T,aj as H,c as j,u as N,A as G,J as E,K as z,a1 as U,ap as K}from"./bootstrap.js";function st(e){const{old_password:s,new_password:o,confirm_password:r}=e;let t={old_password:[s,"isRequired"],new_password:[o,"isRequired","min(6)","max(20)"],confirm_password:[r,"isRequired","min(6)","max(20)"]};const l=new B(C),{errors:f,isValid:b}=l.validate(t);return F.dispatch("setValidationError",f),{errors:f,isValid:b}}const X={name:"remove-authenticator-modal",description:"Remove Authenticator Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},alertName:{type:String,default:"edit_agent_profile"},id:{type:[String,Number],default:""},color:{type:String,default:"#1d78ff"},removedFA:{type:Function,default:()=>{}},from:{type:String,default:""},buttonStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}}},data(){return{isDisabled:!0,containerStyle:{width:"600px"},loading:!1,showPasswordRequiredFrom:!1,password:""}},methods:{validatePass(){this.verifyLoader=!0;const e={};e.password=this.password,P.post("/verify/password",e).then(s=>{this.loading=!1,this.onRemove()}).catch(s=>{this.loading=!1,this.$store.dispatch("setValidationError",{password:"Incorrect password."})})},onRemove(){this.loading=!0,this.isDisabled=!0,P.post("/2fa/disable/"+this.id).then(e=>{window.emitter.emit("updateEditData",this.from=="user_view"),this.onClose(),this.removedFA(),V(e,this.alertName),this.loading=!1,this.isDisabled=!1}).catch(e=>{e.response.data.message==="password_confirmation_required"?this.showPasswordRequiredFrom=!0:(this.onClose(),A(e,this.alertName)),this.isDisabled=!1,this.loading=!1})},onChange(e,s){this[s]=e},submit(){this.showPasswordRequiredFrom?this.validatePass():this.onRemove()},triggerEvent(e){var s=e.which||e.keyCode;s===13&&this.validatePass()}},components:{"text-field":J}},Z={key:0},Q={key:1},Y={key:2,class:"row"};function $(e,s,o,r,t,l){const f=p("text-field"),b=p("custom-loader"),w=p("modal"),I=O("focus-first-input");return o.showModal?(n(),L(w,{key:0,showModal:o.showModal,onClose:o.onClose,containerStyle:t.containerStyle},{title:y(()=>[i("h4",null,d(e.lang("turn_off_authenticator")),1)]),fields:y(()=>[t.showPasswordRequiredFrom?k((n(),a("div",Q,[S(f,{label:e.lang("to_continue_first_verify"),value:t.password,type:"password",name:"password",placehold:"Enter Password...",keyupListener:l.triggerEvent,inputStyle:o.inputStyle,onChange:l.onChange,classname:"col-sm-12"},null,8,["label","value","keyupListener","inputStyle","onChange"])])),[[I]]):(n(),a("span",Z,d(e.lang("turn_off_authenticator_setup")),1)),t.loading?(n(),a("div",Y,[S(b,{duration:4e3,color:o.color},null,8,["color"])])):c("",!0)]),controls:y(()=>[i("button",{class:g(["btn pull-right float-end",t.showPasswordRequiredFrom?o.from==="client"?"btn-custom":"btn-primary":"btn-secondary"]),onClick:s[0]||(s[0]=D=>l.submit()),style:R(t.showPasswordRequiredFrom?o.buttonStyle:"")},[i("i",{class:g(["fas",t.showPasswordRequiredFrom?"fa-check":"fa-power-off"])},null,2),v(" "+d(t.showPasswordRequiredFrom?e.lang("validate"):e.lang("turn_off")),1)],6)]),_:1},8,["showModal","onClose","containerStyle"])):c("",!0)}const tt=M(X,[["render",$]]),ee={name:"logout-modal",description:"Logout Modal component",props:{showModal:{type:Boolean,default:!1},onClose:{type:Function},userId:{type:[String,Number],default:""},alertName:{type:String,default:"edit_agent_profile"},btnStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},panel:{type:String,default:"agent"}},data(){return{isDisabled:!0,containerStyle:{width:"600px"},loading:!1,password:""}},methods:{onChange(e,s){this[s]=e},onSubmit(){if(this.password){this.loading=!0;let e={};e.password=this.password,P.post("/api/logoutFromAllDevice/"+this.userId,e).then(s=>{this.loading=!1,V(s,this.alertName),this.onClose()}).catch(s=>{this.loading=!1,A(s,"logout-modal"),this.$store.dispatch("unsetValidationError")})}else this.$store.dispatch("setValidationError",{password:"This field is required"})}},components:{"text-field":J}},se={class:"modal-title"},te={key:0,class:"row"};function oe(e,s,o,r,t,l){const f=p("alert"),b=p("text-field"),w=p("reuse-loader"),I=p("modal"),D=O("focus-first-input");return o.showModal?(n(),L(I,{key:0,showModal:o.showModal,onClose:o.onClose,containerStyle:t.containerStyle},{title:y(()=>[i("h4",se,d(e.trans("logout-from-all-devices")),1)]),alert:y(()=>[S(f,{componentName:"logout-modal"})]),fields:y(()=>[k((n(),a("div",null,[t.loading?c("",!0):(n(),L(b,{key:0,label:e.trans("password"),value:t.password,type:"password",name:"password",required:!0,placehold:e.lang("enter_password"),onChange:l.onChange,inputStyle:o.inputStyle},null,8,["label","value","placehold","onChange","inputStyle"]))])),[[D]]),t.loading?(n(),a("div",te,[S(w,{"animation-duration":4e3,size:60})])):c("",!0)]),controls:y(()=>[i("button",{class:g(["btn",[o.panel==="client"?"btn-custom":"btn-primary"]]),onClick:s[0]||(s[0]=q=>l.onSubmit()),style:R(o.btnStyle)},[s[1]||(s[1]=i("i",{class:"fas fa-check"},null,-1)),v(" "+d(e.trans("proceed")),1)],6)]),_:1},8,["showModal","onClose","containerStyle"])):c("",!0)}const ie=M(ee,[["render",oe]]),ne={name:"login-logs-toggle",props:{userId:{type:[String,Number],default:""},alertName:{type:String,default:"edit_agent_profile"},btnStyle:{type:Object,default:()=>{}},panel:{type:String,default:"agent"}},data(){return{isEnabled:!1,updating:!1,loading:!1}},beforeMount(){this.getStatus()},methods:{getStatus(){this.loading=!0,P.get("/api/login/info/"+this.userId).then(e=>{this.loading=!1,this.isEnabled=e.data.data.allow_unrecognized_login}).catch(e=>{this.loading=!1,this.isEnabled=!1})},toggleSwitch(e){this.updating=!0,P.post("/api/allow-login-logs/"+this.userId+"/"+e).then(s=>{this.isEnabled=e,this.updating=!1,V(s,this.alertName)}).catch(s=>{this.updating=!1,A(s,this.alertName)})}}},le={class:"card card-light"},ae={class:"card-header"},de={class:"card-title"},re={key:0,class:"card-body"},ce={class:"row"},ue={class:"col-md-9"},fe={class:"col-md-3"};function me(e,s,o,r,t,l){return n(),a("div",le,[i("div",ae,[i("h3",de,d(e.trans("allow-login-logs")),1)]),t.loading?c("",!0):(n(),a("div",re,[i("div",ce,[i("div",ue,[i("span",null,[s[2]||(s[2]=i("i",{class:"fas fa-bell"},null,-1)),v("  "+d(e.trans("get_alert_unrecognized_logins")),1)])]),i("div",fe,[!t.isEnabled&&!t.updating?(n(),a("button",{key:0,type:"button",class:g(["btn",[o.panel==="client"?"btn-custom":"btn-primary","float-end"]]),style:R(o.btnStyle),onClick:s[0]||(s[0]=f=>l.toggleSwitch(1))},[s[3]||(s[3]=i("i",{class:"fas fa-toggle-on"},null,-1)),v(" "+d(e.trans("turn_on")),1)],6)):c("",!0),t.isEnabled&&!t.updating?(n(),a("button",{key:1,type:"button",class:"btn btn-secondary float-end",onClick:s[1]||(s[1]=f=>l.toggleSwitch(0))},[s[4]||(s[4]=i("i",{class:"fas fa-toggle-off"},null,-1)),v(" "+d(e.trans("turn_off")),1)])):c("",!0),t.updating?(n(),a("button",{key:2,type:"button",class:g(["btn",[o.panel==="client"?"btn-custom":"btn-primary","float-end disabled"]]),style:R(o.btnStyle)},d(e.trans("updating")),7)):c("",!0)])])]))])}const he=M(ne,[["render",me]]);const _e={class:"modal-title"},ge={class:"ps-3"},ve={class:"row"},be={class:"col-sm-12"},pe={class:"row pb-4"},ye={class:"col-sm-8"},we={class:"row pt-2"},ke={class:"col-sm-2 pe-0"},Ie={class:"icon-container"},Se={key:0,class:"col-sm-9"},xe={class:"mb-0 text-muted"},Ce={key:0,class:"ps-1"},Le={key:1,class:"ps-1"},De={key:2},Pe={key:1,class:"pt-4"},Me={class:"row"},Te={class:"col-sm-6 pb-4"},Ne={class:"text-muted"},qe={key:0,class:"col-sm-6 pb-4"},Ee={class:"text-muted"},Fe={key:1,class:"col-sm-6 pb-4"},Re={class:"text-muted"},je={class:"col-sm-6 pb-4"},Ae={class:"text-muted"},Oe={class:"col-sm-6 pb-4"},Be={class:"text-muted"},Ve={key:0},ze={key:1},Ue={__name:"LoginLogsInfo",props:{loginLogsInfo:{type:Object,default:()=>{}},showModal:{type:Boolean,default:!1},onClose:{type:Function}},setup(e){const s=e,o=W(),r=T(""),t=T(""),l=T(""),f=T({});H(()=>{I(s.loginLogsInfo),D(s.loginLogsInfo),q(s.loginLogsInfo);let _=s.loginLogsInfo.location;f.value=JSON.parse(_)});const b=j(()=>o.getters.formattedTime),w=j(()=>o.getters.timeDiffForPast),I=_=>{const m=_.device_family;let u;if(m!==null)switch(!0){case m.includes("PC"):u="fa-solid fa-desktop fa-4x text-muted";break;case(m.includes("Device")||m.includes("faveomobileapp")):u="fa-solid fa-mobile fa-4x text-muted";break;case m.includes("Postman"):u="fa-solid fa-rocket fa-3x text-muted";break;default:u="fa-question-circle-o fa-3x text-muted"}else u="fa-regular fa-circle-question fa-3x";return r.value=u},D=_=>{const m=_.browser;let u;switch(!0){case m.includes("Chrome"):u="fa-brands fa-chrome fa-2x text-muted";break;case m.includes("Opera"):u="fa-brands fa-opera fa-2x text-muted";break;case(m.includes("Edge")||m.includes("Edge")):u="fa-brands fa-edge fa-2x text-muted";break;case m.includes("Firefox"):u="fa-brands fa-firefox text-muted";break;case m.includes("Mobile Safari"):u="fa-brands fa-safari fa-2x text-muted";break;case m.includes("Postman"):u="fa-solid fa-rocket fa-2x text-muted";break;default:u="fa-brands fa-chrome fa-2x text-muted"}return t.value=u},q=_=>{const m=_.platform;let u;switch(!0){case(m.includes("Linux")||m.includes("Ubuntu")):u="fa-brands fa-ubuntu fa-2x text-muted";break;case m.includes("Android"):u="fa-brands fa-android fa-2x text-muted";break;case(m.includes("iOS")||m.includes("Mac")):u="fa-brands fa-apple fa-2x text-muted";break;case m.includes("Window"):u="fa-brands fa-windows fa-2x text-muted";break;case m.includes("Postman"):u="fa-solid fa-rocket fa-2x text-muted";break;default:u="fa-brands fa-windows fa-2x text-muted"}return l.value=u},x=_=>{const m=_.device_family;let u;return m===null?u=this.lang("unknown_device"):m.includes("faveomobileapp")?u=_.device.replace("-faveomobileapp",""):u=_.device_family,u},h=T({width:"800px"});return(_,m)=>{const u=p("modal");return e.showModal?(n(),L(u,{key:0,showModal:e.showModal,onClose:e.onClose,containerStyle:h.value},{title:y(()=>[i("h4",_e,d(_.trans("log_session_detail")),1)]),fields:y(()=>[i("section",ge,[i("div",ve,[i("div",be,[i("div",pe,[i("div",ye,[i("div",we,[i("div",ke,[i("div",Ie,[i("i",{class:g([r.value,e.loginLogsInfo.device_family.includes("Device")||e.loginLogsInfo.device_family.includes("faveomobileapp")?"fa-3x":"device-session"])},null,2),e.loginLogsInfo.device_family!=="Postman"?(n(),a("i",{key:0,class:g([e.loginLogsInfo.device_family.includes("Device")||e.loginLogsInfo.device_family.includes("faveomobileapp")?"device-icons":"device-icon",l.value])},null,2)):c("",!0)])]),e.loginLogsInfo.device_family?(n(),a("div",Se,[i("b",xe,d(x(e.loginLogsInfo)),1),e.loginLogsInfo.current_session?(n(),a("span",Ce,m[0]||(m[0]=[i("i",{class:"fas fa-circle-check indicator"},null,-1)]))):c("",!0),e.loginLogsInfo.current_session?(n(),a("div",Le,d(_.trans("active_session")),1)):(n(),a("div",De,d(w.value(e.loginLogsInfo.login_at)),1))])):(n(),a("div",Pe,[i("h6",null,d(_.trans("unknown_device")),1)]))])])])])]),i("div",Me,[i("div",Te,[i("h6",Ne,d(N(C)("login_at")),1),v(" "+d(e.loginLogsInfo.login_at?b.value(e.loginLogsInfo.login_at):"---"),1)]),e.loginLogsInfo.device_family!=="Postman"?(n(),a("div",qe,[i("h6",Ee,d(N(C)("operating_system")),1),i("div",null,[e.loginLogsInfo.platform?(n(),a("i",{key:0,class:g(l.value)},null,2)):c("",!0),v("  "+d(e.loginLogsInfo.platform?e.loginLogsInfo.platform:"---"),1)])])):c("",!0),e.loginLogsInfo.device_family!=="Postman"&&!e.loginLogsInfo.device_family.includes("faveomobileapp")?(n(),a("div",Fe,[i("h6",Re,d(N(C)("browser")),1),i("div",null,[e.loginLogsInfo.browser?(n(),a("i",{key:0,class:g(t.value)},null,2)):c("",!0),v("  "+d(e.loginLogsInfo.browser?e.loginLogsInfo.browser:"---"),1)])])):c("",!0),i("div",je,[i("h6",Ae,d(N(C)("ip_address")),1),v(" "+d(e.loginLogsInfo.ip_address!=="::1"?e.loginLogsInfo.ip_address:"---"),1)]),i("div",Oe,[i("h6",Be,d(N(C)("location")),1),f.value?(n(),a("div",Ve,d(f.value.city)+", "+d(f.value.state_name)+", "+d(f.value.country),1)):(n(),a("div",ze,d("---")))])])])]),_:1},8,["showModal","onClose","containerStyle"])):c("",!0)}}},Je=M(Ue,[["__scopeId","data-v-12f7826b"]]);const We={name:"login-logs",setup(){const e=W();return{formattedTime:j(()=>e.getters.formattedTime),timeDiffForPast:j(()=>e.getters.timeDiffForPast)}},props:{userId:{type:[String,Number],default:""},showBtn:{type:Boolean,default:!1},alertName:{type:String,default:"edit_agent_profile"},btnStyle:{type:Object,default:()=>{}},inputStyle:{type:Object,default:()=>{}},panel:{type:String,default:"agent"}},data(){return{columns:["device_family","platform","browser","location","login_at","info"],apiUrl:"/api/login/info/"+this.userId,options:{},showModal:!1,showSwitch:!1,componentTitle:"loginLogs",loading:!0,showInfoModal:!1,infoData:{},show_pagination:!0,sessions:[],singleCard:!1,profilePage:!1,sessionsData:{web_session:[],mobile_web_session:[],mobile_app_session:[],third_party_session:[]},showIndividualDetails:!1,showDetails:!0,individualInfo:[],tableUrl:{web_session:"",mobile_web_session:"",mobile_app_session:"",third_party_session:""},ShowDeviceList:!1,individualInfoLocation:{},category:"web_session",categoryData:[]}},beforeMount(){window.location.pathname.includes("profile")?this.profilePage=!0:this.profilePage=!1;const s=this;this.options={headings:{device_family:s.lang("device"),platform:s.lang("platform_OS"),browser:s.lang("browser"),location:s.lang("location"),login_at:s.lang("login_at"),info:s.lang("info")},texts:{filter:"",limit:""},columnsClasses:{device_family:"login-device",platform:"login-plat",browser:"login-browser",location:"login-location",login_at:"login-at",info:"login-info"},templates:{login_at(o,r){return s.formattedTime(r.login_at)},device_family(o,r){const t=s.iconProvider(r,"device"),l=s.deviceType(r,"info"),f=s.h("i",{class:[t,"fa-2x"]}),b=s.h("span",{class:"ms-2"},l);return s.h("div",[f,b])},platform(o,r){if(r.device_family==="Postman")return"--";{let t=s.h("i",{class:[s.iconProvider(r,"platform"),"fa-2x"]}),l={"data-bs-toggle":"tooltip","data-bs-placement":"top",title:r.platform};return s.h("div",l,[t])}},browser(o,r){if(r.device_family==="Postman"||r.device_family.includes("faveomobileapp"))return"--";{let t=s.h("i",{class:[s.iconProvider(r,"browser"),"fa-2x"]}),l={"data-bs-toggle":"tooltip","data-bs-placement":"top",title:r.browser};return s.h("div",l,[t])}},location(o,r){let t,l,f,b;try{t=r.location?JSON.parse(r.location):null,l=t==null?void 0:t.city,f=t==null?void 0:t.state_name,b=t==null?void 0:t.country}catch{return"--"}return t?s.h("p",{},`${l}, ${f}, ${b}`):"--"},info(o,r){let t=s.h("i",{class:"fas fa-info-circle fa-1x text-muted"}),l={class:"btn btn-tool","data-bs-toggle":"v-tooltip","data-bs-placement":"top",title:s.lang("info")};return r.browser===null&&r.device===null&&r.device_family===null?l.class+=" disabled":l.onClick=()=>{s.openInfo(r)},s.h("button",l,[t])}},sortable:["login_at"],filterable:["device_family","platform","browser","login_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(o){return{"sort-field":o.orderBy?o.orderBy:"id","sort-order":o.ascending?"desc":"asc","search-query":o.query.trim(),limit:o.limit}},responseAdapter({data:o}){return{data:o.data.data,count:o.data.total}},orderBy:{column:"id",ascending:!0}},this.getInitialSessions()},mounted(){this.adjustCardSize(),window.addEventListener("resize",this.adjustCardSize)},beforeDestroy(){window.removeEventListener("resize",this.adjustCardSize)},methods:{async getInitialSessions(){try{this.loading=!0;const e=await P.get(this.apiUrl+"?need_all=0");this.loading=!1,this.sessions=e.data.data,this.sessionsData={web_session:[],mobile_web_session:[],mobile_app_session:[],third_party_session:[]},Object.values(this.sessions).forEach(o=>{let r;o.device_family!==null&&o.device_family!==void 0&&(o.device_family.includes("PC")?r="web_session":o.device_family.includes("Device")?r="mobile_web_session":o.device_family.includes("faveomobileapp")?r="mobile_app_session":r="third_party_session",this.sessionsData[r].push(o)),this.callSession(this.sessionsData.web_session,"web_session")})}catch(e){this.loading=!1,A(e)}},callSession(e,s){this.category=s,this.categoryData=e,this.showDetails=!0,this.showIndividualDetails=!1,this.ShowDeviceList=!1},onClose(){this.showModal=!1},refreshTable(){this.getInitialSessions(),window.emitter.emit("loginLogsrefreshData")},handelLoader(e){this.loading=e},openInfo(e){this.infoData=e,this.showInfoModal=!0},onInfoClose(){this.showInfoModal=!1},deviceType(e,s=""){const o=e.device_family;let r;return o===null?r=this.lang("unknown_device"):o.includes("faveomobileapp")&&s!=="table"?r=s==="info"?e.device.replace("-faveomobileapp",""):o.replace("-faveomobileapp",""):r=e.device_family,r},iconProvider(e,s){switch(s){case"device":return this.deviceIcon(e,s);case"browser":return this.browserIcon(e);case"platform":return this.platformIcon(e)}},deviceIcon(e){const s=e.device_family;let o;if(s!==null)switch(!0){case s.includes("PC"):o="fa-solid fa-desktop text-muted";break;case(s.includes("Device")||s.includes("faveomobileapp")):o="fa-solid fa-mobile text-muted";break;case s.includes("Postman"):o="fa-solid fa-rocket text-muted";break;default:o="fa-solid fa-desktop text-muted"}else o="fa-regular fa-circle-question text-muted";return o},browserIcon(e){const s=e.browser;let o;if(s!==null){switch(!0){case s.includes("Chrome"):o="fa-brands fa-chrome text-muted";break;case s.includes("Opera"):o="fa-brands fa-opera text-muted";break;case(s.includes("Edge")||s.includes("Edge")):o="fa-brands fa-edge text-muted";break;case s.includes("Firefox"):o="fa-brands fa-firefox text-muted";break;case s.includes("Mobile Safari"):o="fa-brands fa-safari text-muted";break;case s.includes("Postman"):o="fa-solid fa-rocket text-muted";break;default:o="fa-brands fa-chrome text-muted"}return o}},platformIcon(e){const s=e.platform;let o;if(s!==null){switch(!0){case(s.includes("Linux")||s.includes("Ubuntu")):o="fa-brands fa-ubuntu text-muted";break;case s.includes("Android"):o="fa-brands fa-android text-muted";break;case(s.includes("iOS")||s.includes("Mac")):o="fa-brands fa-apple text-muted";break;case s.includes("Window"):o="fa-brands fa-windows text-muted";break;case s.includes("Postman"):o="fa-solid fa-rocket text-muted";break;default:o="fa-brands fa-windows text-muted"}return o}},showIndividualInfo(e){this.showDetails=!1,this.showIndividualDetails=!0,this.individualInfo=e,e.location!==void 0?this.individualInfoLocation=JSON.parse(e.location):this.individualInfoLocation={}},showAllSession(){this.showDetails=!0,this.showIndividualDetails=!1,this.ShowDeviceList=!1},showTablesInfo(e){this.tableUrl=this.apiUrl+"?deviceFilter="+e.trim(),this.showDetails=!1,this.showIndividualDetails=!1,this.loading=!0,this.ShowDeviceList=!0},SessionTooltip(e){if(e==="web_session")return"web_session_tooltip";if(e==="mobile_web_session")return"mobile_web_session_tooltip";if(e==="mobile_app_session")return"mobile_app_session_tooltip";if(e==="third_party_session")return"third_party_session_tooltip"},adjustCardSize(){const e=document.querySelector("#login-logs");e&&(e.offsetWidth>400?this.singleCard=!1:this.singleCard=!0)}},components:{"logout-modal":ie,"logs-switch":he,"login-logs-info":Je,"tool-tip":G}},He={id:"login-logs"},Ge={key:1},Ke={class:"card-tools"},Xe=["disabled"],Ze={class:"nav nav-tabs"},Qe={key:0,class:"nav-item cursor-pointer"},Ye=["onClick"],$e={class:"nav-item ms-auto mt-04"},es={href:"javascript:;",class:"float-end"},ss={class:"card-body ps-0 pe-0"},ts={key:0,class:"row"},os={class:"card sessions-card"},is={class:"card-body"},ns={class:"row"},ls={class:"col-12"},as={class:"row"},ds={class:"col-3 pe-0"},rs={class:"icon-container"},cs={class:"col-9 ps-0"},us=["onClick"],fs=["onClick"],ms={class:"fas fa-info-circle fa-1x text-muted"},hs={key:0,class:"login-info-text"},_s={key:1,class:"login-info-text"},gs={key:1},vs={class:"ps-3"},bs={class:"row"},ps={class:"row pb-4"},ys={class:"row pt-2"},ws={class:"col-sm-2 pe-0"},ks={class:"icon-container pe-0"},Is={class:"mb-0 text-muted"},Ss={key:0,class:"ps-1"},xs={class:"fas fa-info-circle fa-1x text-muted"},Cs={key:1},Ls={key:2},Ds={key:1,class:"pt-4"},Ps={class:"row"},Ms={class:"col-sm-6 pb-4"},Ts={class:"text-muted"},Ns={key:0,class:"col-sm-6 pb-4"},qs={class:"text-muted"},Es={key:1,class:"col-sm-6 pb-4"},Fs={class:"text-muted"},Rs={class:"col-sm-6 pb-4"},js={class:"text-muted"},As={class:"col-sm-6 pb-4"},Os={class:"text-muted"},Bs={key:0},Vs={key:1},zs={key:2,id:"login_logs_index"},Us={key:1,class:"no-data-section"};function Js(e,s,o,r,t,l){const f=p("logs-switch"),b=p("alert"),w=p("data-table"),I=p("faveo-box"),D=p("logout-modal"),q=p("login-logs-info"),x=O("tooltip");return n(),a("div",He,[o.showBtn?(n(),L(f,{key:0,userId:o.userId,btnStyle:o.btnStyle,panel:o.panel,alertName:o.alertName},null,8,["userId","btnStyle","panel","alertName"])):c("",!0),s[8]||(s[8]=v()),o.alertName!="edit_agent_profile"?(n(),a("br",Ge)):c("",!0),S(b,{componentName:"dataTableModal"}),S(I,{title:e.trans("login-logs")},{customActions:y(()=>[i("div",Ke,[o.showBtn?k((n(),a("button",{key:0,class:"btn btn-tool",onClick:s[0]||(s[0]=h=>t.showModal=!0)},s[4]||(s[4]=[i("i",{class:"fas fa-power-off"},null,-1)]))),[[x,e.lang("logout-from-all-devices")]]):c("",!0),s[6]||(s[6]=v("   ")),i("span",null,[k((n(),a("div",{class:g(["btn btn-tool",t.loading?"rotating":""]),"data-card-widget":"refresh",onClick:s[1]||(s[1]=h=>l.refreshTable()),disabled:t.loading||t.sessions.length===0},s[5]||(s[5]=[i("i",{class:"fas fa-sync-alt"},null,-1)]),10,Xe)),[[x,e.lang("refresh")]])])])]),default:y(()=>[t.sessions.length!==0?(n(),a(E,{key:0},[i("ul",Ze,[(n(!0),a(E,null,z(t.sessionsData,(h,_)=>(n(),a(E,null,[h.length>0?(n(),a("li",Qe,[k((n(),a("a",{id:"sessions_tab",class:g(["nav-link",{active:t.category===_}]),"data-bs-toggle":"pill",onClick:m=>l.callSession(h,_)},[i("b",null,d(e.trans(_)),1)],10,Ye)),[[x,e.trans(l.SessionTooltip(_))]])])):c("",!0)],64))),256)),i("li",$e,[t.showDetails?c("",!0):(n(),a("div",{key:0,onClick:s[2]||(s[2]=h=>l.showAllSession()),class:"float-start pt-2"},[i("a",es,[i("b",null,d(e.trans("view_all_sessions")),1)])]))])]),i("div",ss,[t.showDetails?(n(),a("div",ts,[(n(!0),a(E,null,z(t.categoryData,h=>(n(),a("div",{key:h,class:g(o.panel==="agent"&&t.profilePage?t.singleCard?"col-sm-12":"col-sm-6":"col-lg-4 col-md-6 col-sm-12 mb-3")},[i("div",os,[i("div",is,[i("div",ns,[i("div",ls,[i("div",as,[i("div",ds,[i("div",rs,[i("i",{class:g([l.iconProvider(h,"device"),h.device_family.includes("Device")?"fa-3x":"device-session"])},null,2),h.device_family!=="Postman"?(n(),a("i",{key:0,class:g([h.device_family.includes("Device")||h.device_family.includes("faveomobileapp")?"device-icons":"device-icon",l.iconProvider(h,"platform")])},null,2)):c("",!0)])]),i("div",cs,[i("a",{href:"javascript:;",onClick:_=>l.showIndividualInfo(h),class:"text-muted device-style pe-1"},[i("b",null,d(l.deviceType(h)),1)],8,us),i("a",{href:"javascript:;",onClick:_=>l.showTablesInfo(l.deviceType(h,"table"))},[k(i("i",ms,null,512),[[x,e.trans("login_device_info")]])],8,fs),h.current_session?(n(),a("div",hs,d(e.trans("current_session")),1)):k((n(),a("div",_s,[v(d(e.trans("last_accessed_on"))+d(r.timeDiffForPast(h.login_at)),1)])),[[x,r.formattedTime(h.login_at)]])])])])])])])],2))),128))])):c("",!0),t.showIndividualDetails?(n(),a("div",gs,[i("section",vs,[i("div",bs,[i("div",{class:g(["col-sm-12",o.panel==="agent"&&!t.profilePage?"ps-0":""])},[i("div",ps,[i("div",{class:g(["col-sm-8",o.panel==="agent"&&!t.profilePage?"ps-0":""])},[i("div",ys,[i("div",ws,[i("div",ks,[i("i",{class:g([l.iconProvider(t.individualInfo,"device"),"fa-4x"])},null,2),t.individualInfo.device_family!=="Postman"||t.individualInfo.platform?(n(),a("i",{key:0,class:g([t.individualInfo.device_family.includes("Device")||t.individualInfo.device_family.includes("faveomobileapp")?"pc-icons":"pc-icon",l.iconProvider(t.individualInfo,"platform")])},null,2)):c("",!0)])]),t.individualInfo.device_family?(n(),a("div",{key:0,class:g(["col-sm-9",t.profilePage&&o.panel!=="client"&&!t.individualInfo.device_family.includes("Device")?"ps-3":"ps-0"])},[i("b",Is,d(l.deviceType(t.individualInfo,"info")),1),t.individualInfo.current_session?(n(),a("span",Ss,s[7]||(s[7]=[i("i",{class:"fas fa-circle-check indicator"},null,-1)]))):c("",!0),i("span",null,[i("a",{href:"javascript:;",class:"ps-1",onClick:s[3]||(s[3]=h=>l.showTablesInfo(l.deviceType(t.individualInfo,"table")))},[k(i("i",xs,null,512),[[x,e.trans("login_device_info")]])])]),t.individualInfo.current_session?(n(),a("div",Cs,d(e.trans("active_session")),1)):(n(),a("div",Ls,d(r.timeDiffForPast(t.individualInfo.login_at)),1))],2)):(n(),a("div",Ds,[i("h6",null,d(e.trans("unknown_device")),1)]))])],2)])],2)]),i("div",Ps,[i("div",Ms,[i("h6",Ts,d(e.lang("login_at")),1),v(" "+d(t.individualInfo.login_at?r.formattedTime(t.individualInfo.login_at):"---"),1)]),t.individualInfo.device_family!=="Postman"?(n(),a("div",Ns,[i("h6",qs,d(e.lang("operating_system")),1),i("div",null,[t.individualInfo.platform?(n(),a("i",{key:0,class:g([l.iconProvider(t.individualInfo,"platform"),"fa-2x"])},null,2)):c("",!0),v("  "+d(t.individualInfo.platform?t.individualInfo.platform:"---"),1)])])):c("",!0),t.individualInfo.device_family!=="Postman"&&!t.individualInfo.device_family.includes("faveomobileapp")?(n(),a("div",Es,[i("h6",Fs,d(e.lang("browser")),1),i("div",null,[t.individualInfo.browser?(n(),a("i",{key:0,class:g(["fa-2x",l.iconProvider(t.individualInfo,"browser")])},null,2)):c("",!0),v("  "+d(t.individualInfo.browser?t.individualInfo.browser:"---"),1)])])):c("",!0),i("div",Rs,[i("h6",js,d(e.lang("ip_address")),1),v(" "+d(t.individualInfo.ip_address!=="::1"?t.individualInfo.ip_address:"---"),1)]),i("div",As,[i("h6",Os,d(e.lang("location")),1),t.individualInfoLocation?(n(),a("div",Bs,d(t.individualInfoLocation.city)+", "+d(t.individualInfoLocation.state_name)+", "+d(t.individualInfoLocation.country),1)):(n(),a("div",Vs,d("---")))])])])])):c("",!0),t.ShowDeviceList?(n(),a("div",zs,[S(w,{url:t.tableUrl,panel:o.panel,dataColumns:t.columns,btnStyle:o.btnStyle,inputStyle:o.inputStyle,disableLoader:"true",show_pagination:t.show_pagination,onLoaderState:l.handelLoader,option:t.options,scroll_to:"login-logs",componentTitle:t.componentTitle},null,8,["url","panel","dataColumns","btnStyle","inputStyle","show_pagination","onLoaderState","option","componentTitle"])])):c("",!0)])],64)):c("",!0),t.sessions.length===0&&!t.loading?(n(),a("div",Us,d(e.trans("no_data_available")),1)):c("",!0)]),_:1},8,["title"]),S(U,{name:"modal"},{default:y(()=>[t.showModal?(n(),L(D,{key:0,onClose:l.onClose,inputStyle:o.inputStyle,btnStyle:o.btnStyle,showModal:t.showModal,panel:o.panel,userId:o.userId,alertName:o.alertName},null,8,["onClose","inputStyle","btnStyle","showModal","panel","userId","alertName"])):c("",!0)]),_:1}),S(U,{name:"modal"},{default:y(()=>[t.showInfoModal?(n(),L(q,{key:0,onClose:l.onInfoClose,showModal:t.showInfoModal,loginLogsInfo:t.infoData},null,8,["onClose","showModal","loginLogsInfo"])):c("",!0)]),_:1})])}const ot=M(We,[["render",Js],["__scopeId","data-v-4b7b45c8"]]);function it(e){const{reply:s,worktime:o,worktime_type:r,panel:t}=e;let l={reply:[s,"isRequired"]},f=F.getters.getTicketActions;t=="agent"&&(f.show_thread_worktime&&f.require_thread_worktime&&(l.worktime=[o,"isRequired","minValue(1)"]),f.show_worktime_type&&f.require_worktime_type_field&&o&&(l.worktime_type=[r,"isRequired"]));const b=new B(C),{errors:w,isValid:I}=b.validate(l);return F.dispatch("setValidationError",w),{errors:w,isValid:I}}const Ws={name:"ticket-attachment",description:"Ticket Attachment Component",props:{attachment:{type:Object,default:()=>{}},classname:{type:String,default:""}},methods:{subString(e){return K(e,10)}}},Hs={class:"mailbox-attachment-icon has-img"},Gs=["href"],Ks=["id","src"],Xs={class:"mailbox-attachment-info"},Zs={class:"mailbox-attachment-name"},Qs={class:"mailbox-attachment-size"},Ys=["href"];function $s(e,s,o,r,t,l){const f=O("tooltip");return n(),a("li",null,[i("span",Hs,[i("a",{href:o.attachment.view_url,target:"_blank"},[i("img",{class:"img",id:o.attachment.id,src:o.attachment.thumbnail_url,alt:""},null,8,Ks)],8,Gs)]),i("div",Xs,[k((n(),a("a",Zs,[v(d(l.subString(o.attachment.name)),1)])),[[f,o.attachment.name]]),i("span",Qs,[v(d(o.attachment.size)+" ",1),k((n(),a("a",{href:o.attachment.download_url,target:"_blank",class:g(["btn btn-light btn-sm pull-right float-end btn_blue",o.classname])},s[0]||(s[0]=[i("i",{class:"fa fa-download"},null,-1)]),10,Ys)),[[f,e.trans("download")]])])])])}const nt=M(Ws,[["render",$s],["__scopeId","data-v-e0bd4d8a"]]);function lt(e){const{comment:s}=e;let o={comment:[s,"isRequired"]};const r=new B(C),{errors:t,isValid:l}=r.validate(o);return F.dispatch("setValidationError",t),{errors:t,isValid:l}}export{nt as A,ot as L,tt as R,lt as a,it as b,st as v};

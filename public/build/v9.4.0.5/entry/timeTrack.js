import{_ as w,B as y,C,E as f,R as V,k as n,o as l,l as d,F as r,v as i,x as h,q as c,m as T,I as q,Z as P,c as I,W as D,L as $,G as S,ad as W,a2 as B,s as g,ah as N,T as L,t as A}from"../chunks/bootstrap.js";import{r as E,A as M}from"../chunks/adminRouter.js";import{S as U}from"../chunks/FormGenerator.js";import{C as O}from"../chunks/Checkbox.js";import{a as R}from"../chunks/DataTableActions.js";import"../chunks/vue-router.js";import"../chunks/HelpSection.js";import"../chunks/AdminNavigationBar.js";const F={name:"timetrack-settings",beforeMount(){this.getInitialValues()},data:()=>({additional:0,hasDataPopulated:!1,loading:!0,pageLoad:!1,radioOptions:[{name:"yes",value:1},{name:"no",value:0}],require_thread_worktime:"",require_worktime_type_field:"",show_worktime_type_field:"",typeDisable:!1}),methods:{getInitialValues(){y.get("/time-track/get-settings").then(e=>{this.loading=!1,this.hasDataPopulated=!0,this.additional=e.data.data.additional?1:0,this.require_thread_worktime=e.data.data.require_thread_worktime?1:0,this.show_worktime_type_field=e.data.data.show_worktime_type_field?1:0,this.typeDisable=!this.show_worktime_type_field,this.require_worktime_type_field=e.data.data.require_worktime_type_field?1:0}).catch(e=>{this.loading=!1,this.hasDataPopulated=!0})},onChange(e,t){this[t]=e,t==="show_worktime_type_field"&&(this.require_worktime_type_field=e?this.require_worktime_type_field:0,this.typeDisable=!e)},onSubmit(){this.pageLoad=!0;const e={};e.additional=this.additional?1:0,e.require_thread_worktime=this.require_thread_worktime,e.show_worktime_type_field=this.show_worktime_type_field?1:0,e.require_worktime_type_field=this.show_worktime_type_field?this.require_worktime_type_field:0,y.post("/time-track",e).then(t=>{this.pageLoad=!1,C(t),this.getInitialValues()}).catch(t=>{this.pageLoad=!1,f(t)})}},components:{"status-switch":U,"radio-button":V,checkbox:O}},z={class:"col-sm-12"},H={class:"card card-light"},G={class:"card-header"},Z={class:"card-title"},j={class:"card-body"},J={key:0,class:"row"},K={key:1,class:"row"},Q={class:"card-footer"},X={key:0,class:"row"};function Y(e,t,a,k,o,s){const p=n("alert"),_=n("reuse-loader"),m=n("radio-button"),u=n("checkbox"),b=n("custom-loader");return l(),d("div",z,[r(p),i("div",H,[i("div",G,[i("h3",Z,h(e.trans("time-track-settings")),1)]),i("div",j,[!e.hasDataPopulated||e.loading?(l(),d("div",J,[r(_,{"animation-duration":4e3,size:60})])):c("",!0),e.hasDataPopulated?(l(),d("div",K,[r(m,{options:e.radioOptions,label:e.trans("timetype_visible"),name:"show_worktime_type_field",value:e.show_worktime_type_field,onChange:s.onChange,classname:"form-group col-sm-4"},null,8,["options","label","value","onChange"]),r(m,{options:e.radioOptions,label:e.trans("make_timetype_required"),name:"require_worktime_type_field",value:e.require_worktime_type_field,onChange:s.onChange,classname:"form-group col-sm-4",disabled:e.typeDisable},null,8,["options","label","value","onChange","disabled"]),r(m,{options:e.radioOptions,label:e.trans("worktime_field_required"),name:"require_thread_worktime",value:e.require_thread_worktime,onChange:s.onChange,classname:"form-group col-sm-4",hint:e.trans("require_thread_worktime_tooltip")},null,8,["options","label","value","onChange","hint"])])):c("",!0)]),i("div",Q,[e.hasDataPopulated?(l(),T(u,{key:0,name:"additional",value:e.additional,label:e.lang("timetrack_application_level"),onChange:s.onChange,classname:"col-sm-12"},null,8,["value","label","onChange"])):c("",!0),i("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=be=>s.onSubmit())},[t[1]||(t[1]=i("i",{class:"fas fa-save"},null,-1)),q(" "+h(e.trans("save")),1)])])]),e.pageLoad?(l(),d("div",X,[r(b,{duration:4e3})])):c("",!0)])}const x=w(F,[["render",Y]]);const ee={name:"worktime-type-list",description:"Worktime type lists table component",setup(){const e=P();return{formattedTime:I(()=>e.getters.formattedTime)}},data:()=>({columns:["name","created_at","updated_at","action"],options:{},apiUrl:"/api/worktime-type-list?meta=1"}),beforeMount(){const e=this;this.options={sortIcon:{base:"glyphicon",up:"glyphicon-chevron-down",down:"glyphicon-chevron-up"},texts:{filter:"",limit:""},columnsClasses:{name:"worktime-type-name",created_at:"worktime-type-created",updated_at:"worktime-type-updated"},templates:{created_at(t,a){return e.formattedTime(a.created_at)},updated_at(t,a){return e.formattedTime(a.updated_at)},action:(t,a)=>e.h(R,{data:a})},sortable:["name","created_at","updated_at"],filterable:["name","created_at","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter({data:t}){return{data:t.data.data.map(a=>(a.edit_url="/time-track/worktime-type/"+a.id+"/edit",a.delete_url=e.basePath()+"/api/worktime-type/"+a.id,a)),count:t.data.total}},orderBy:{column:"id",ascending:!0}}}},te={class:"col-sm-12"},ae={class:"card card-light worktime-type-table"},ie={class:"card-header"},oe={id:"worktime-type-list",class:"card-title"},se={class:"card-tools"},re={class:"card-body",id:"worktime-type-table"};function ne(e,t,a,k,o,s){const p=n("alert"),_=n("router-link"),m=n("data-table"),u=D("tooltip");return l(),d("div",te,[r(p,{componentName:"dataTableModal"}),i("div",ae,[i("div",ie,[i("h3",oe,h(e.trans("list_of_worktime_types")),1),i("div",se,[$((l(),T(_,{class:"btn btn-tool",to:"/time-track/worktime-type/create"},{default:S(()=>t[0]||(t[0]=[i("span",{class:"glyphicon glyphicon-plus"},null,-1)])),_:1})),[[u,e.trans("add-worktime-type")]])])]),i("div",re,[r(m,{url:e.apiUrl,dataColumns:e.columns,option:e.options,scroll_to:"license-type-list"},null,8,["url","dataColumns","option"])])])])}const le=w(ee,[["render",ne]]);function de(e){const{name:t}=e;var a={name:[t,"isRequired"]};const k=new W(B),{errors:o,isValid:s}=k.validate(a);return g.dispatch("setValidationError",o),{errors:o,isValid:s}}const me={name:"worktime-type-create-edit",data(){return{title:"create_worktime_type",iconClass:"fas fa-save",btnName:"save",hasDataPopulated:!1,loading:!1,worktime_type_id:"",name:""}},beforeMount(){const e=window.location.pathname;this.getValues(e)},methods:{getValues(e){const t=N(e);t?(this.title="edit_worktime_type",this.iconClass="fas fa-sync",this.btnName="update",this.hasDataPopulated=!1,this.getInitialValues(t)):(this.loading=!1,this.hasDataPopulated=!0)},getInitialValues(e){this.loading=!0,y.get("/api/worktime-type/"+e).then(t=>{this.loading=!1,this.hasDataPopulated=!0,this.name=t.data.data.name,this.worktime_type_id=t.data.data.id}).catch(t=>{this.loading=!1,f(t,"worktime-type-create-edit"),setTimeout(()=>{this.$router.push({name:"WorktimeType Index"})},3e3)})},isValid(){const{errors:e,isValid:t}=de(this.$data);return!!t},onChange(e,t){this[t]=e},onSubmit(){if(this.isValid()){this.loading=!0;let e={};e.name=this.name;let t="/api/worktime-type/"+this.worktime_type_id;y.post(t,e).then(a=>{this.loading=!1,C(a,"worktime-type-create-edit"),this.worktime_type_id||setTimeout(()=>{this.$router.push({name:"WorktimeType Index"})},3e3)}).catch(a=>{this.loading=!1,f(a,"worktime-type-create-edit")})}}},components:{"text-field":L}},ce={class:"col-sm-12"},pe={key:0,class:"row"},_e={key:1,class:"card card-light"},ue={class:"card-header"},he={class:"card-title"},ke={class:"card-body"},ye={class:"row"},fe={class:"card-footer"};function we(e,t,a,k,o,s){const p=n("custom-loader"),_=n("alert"),m=n("text-field"),u=D("focus-first-input");return l(),d("div",ce,[!o.hasDataPopulated||o.loading?(l(),d("div",pe,[r(p,{duration:4e3})])):c("",!0),r(_,{componentName:"worktime-type-create-edit"}),o.hasDataPopulated?(l(),d("div",_e,[i("div",ue,[i("h3",he,h(e.trans(o.title)),1)]),i("div",ke,[$((l(),d("div",ye,[r(m,{label:e.trans("name"),value:o.name,type:"text",name:"name",onChange:s.onChange,classname:"col-sm-6",required:!0},null,8,["label","value","onChange"])])),[[u]])]),i("div",fe,[i("button",{id:"submit_btn",class:"btn btn-primary",onClick:t[0]||(t[0]=b=>s.onSubmit())},[i("i",{class:A(o.iconClass)},null,2),q(" "+h(e.trans(o.btnName)),1)])])])):c("",!0)])}const v=w(me,[["render",we]]);let ge={path:"/time-track",component:M,name:"TimeTrack",redirect:"/time-track/settings",children:[{path:"settings",component:x,name:"TimeTrack Settings",meta:{title:"time-track",crumb:{link:{name:"admin_panel",to:"/"},active:"time-track"}}},{path:"worktime-type",component:le,name:"WorktimeType Index",meta:{title:"worktime_type",crumb:{link:{name:"admin_panel",to:"/"},active:"worktime_type"}}},{path:"worktime-type/create",component:v,name:"WorktimeType Create",meta:{title:"worktime_type",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"worktime_type",to:"/time-track/worktime-type"},active:"create"}}},{path:"worktime-type/:id/edit",component:v,name:"WorktimeType Edit",meta:{title:"worktime_type",crumb:{link:{name:"admin_panel",to:"/"},root_link:{name:"worktime_type",to:"/time-track/worktime-type"},active:"edit"}}}]};E.addRoute(ge);g.dispatch("deleteUser");g.dispatch("updateUser");

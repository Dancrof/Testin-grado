import{f as V,_ as C,l,m as D,q as m,G as A,a1 as P,J as w,k as _,o,F as b,Z as q,c as $,W as N,L as g,v as a,K as S,x as h,t as H,N as O,aq as U,S as Y,P as B,I as E,ak as Z,M as j,aI as R,A as K,U as z,H as Q,B as J,a2 as X,C as ee,E as te,aO as ie,s as x,a3 as ae,a4 as oe,a5 as le,a6 as ne,a7 as de,a8 as se,a9 as re,aa as ue}from"../chunks/bootstrap.js";import{F as fe,r as L}from"../chunks/adminRouter.js";import{B as ce}from"../chunks/BarcodeModal.js";import{s as me,F as pe,f as _e}from"../chunks/FileManager.js";import{o as G}from"../chunks/FormGenerator.js";import{C as he}from"../chunks/Loader.js";import{D as ge}from"../chunks/DataTableActions.js";import"../chunks/vue-router.js";import"../chunks/HelpSection.js";import"../chunks/AdminNavigationBar.js";import"../chunks/Checkbox.js";const be={automator:null},ye={getAutomatorData:e=>e.automator,getAutomatorDataByKey:e=>function(t){return e.automator[t]},getAutomatorRules:e=>e.automator.rules,getAutomatorActions:e=>e.automator.actions,getSelectedActionKeys:e=>e.automator.actions.map(t=>t.field?t.field.key:""),getSelectedRuleKeys:e=>e.automator.rules.map(t=>t.field?t.field.key:"")},ve={createNewAutomatorInstance:(e,t)=>e.automator=t||new fe,destroyAutomatorInstance:e=>e.automator=null,setAutomatorDataByKey:(e,{key:t,value:i})=>e.automator[t]=i,addNewElementToAutomatorProperty:(e,{key:t,value:i})=>e.automator[t].push(i),deleteElementFromAutomator:(e,{key:t,index:i})=>{if(typeof i>"u"){console.error(`Can't delete ${t} having index undefined`);return}e.automator[t+"s"].splice(i,1)},onCategoryChange:(e,{key:t,index:i,value:r})=>e.automator[t][i]=r,onRelationChange:(e,{key:t,index:i,relation:r})=>e.automator[t][i].relation=r,onFieldChange:(e,{key:t,index:i,field:r})=>{if(!V(r))e.automator[t][i].field=null;else{let u=JSON.parse(JSON.stringify(r));u._id=e.automator[t][i]._id,e.automator[t][i].field=u}e.automator[t][i][t]=[],e.automator[t][i].value=null},updateEventData:(e,{index:t,value:i})=>e.automator.events[t]=i,updateEnforcerList:(e,{key:t,affectedUnique:i,formFieldUnique:r,enforcerList:u,value:n,isMultiple:f,itemToRemove:s,appendValue:c})=>{const d=t+"s";v(e.automator[d]);function v(y){for(let F=0;F<y.length;F++){if(y[F]._id===i&&y[F].field.key===r){V(s)?k(s,y[F][d]):f?y[F][d].push(...u):y[F][d]=u,y[F].value=c?c+" "+n:n;break}V(y[F][d])&&v(y[F][d])}}function k(y,F){y.nodes&&y.nodes.forEach(p=>{const M=F.findIndex(W=>W.field.key===p.key);M>-1&&F.splice(M,1)})}},updateActionEmail:(e,{index:t,key:i,value:r})=>e.automator.actions[t].action_email[i]=r},Fe={createNewAutomatorInstance:({commit:e},t)=>e("createNewAutomatorInstance",t),destroyAutomatorInstance:({commit:e})=>e("destroyAutomatorInstance"),setAutomatorDataByKey:({commit:e},t)=>e("setAutomatorDataByKey",t),addNewElementToAutomatorProperty:({commit:e},t)=>e("addNewElementToAutomatorProperty",t),deleteElementFromAutomator:({commit:e},t)=>e("deleteElementFromAutomator",t),onCategoryChange:({commit:e},t)=>e("onCategoryChange",t),onRelationChange:({commit:e},t)=>e("onRelationChange",t),onFieldChange:({commit:e},t)=>e("onFieldChange",t),updateEventData:({commit:e},t)=>e("updateEventData",t),updateEnforcerList:({commit:e},t)=>e("updateEnforcerList",t),removeElementFromEnforcerList:({commit:e},t)=>e("removeElementFromEnforcerList",t),updateActionEmail:({commit:e},t)=>e("updateActionEmail",t)},De={state:be,getters:ye,mutations:ve,actions:Fe},Ce={formMenus:[],formFields:[],formSections:[],formCategoryType:"ticket",isDisableDraging:!1,clonableForm:""},ke={getFormMenus(e){return e.formMenus},getFormFields(e){return e.formFields},getFormSections(e){return e.formSections},getClonedForm(e){return e.clonableForm},getFormCategoryType(e){return e.formCategoryType},isDisableDraging(e){return e.isDisableDraging}},we={updateFormMenu(e,t){e.formMenus=[...t]},updateFormFields(e,t){e.formFields=[...t]},updateFormSections(e,t){e.formSections=[...t]},updateCloneableFormData(e,t){e.clonableForm=t},updateFormCategoryType(e,t){e.formCategoryType=t},updateIsDisableDraging(e,t){e.isDisableDraging=t}},Se={updateFormFields:({commit:e},t)=>{e("updateFormFields",t)},updateFormSections:({commit:e},t)=>{e("updateFormSections",t)},updateCloneableFormData:({commit:e},t)=>{e("updateCloneableFormData",t)}},Oe={state:Ce,getters:ke,mutations:we,actions:Se},Ee={name:"admin-panel-renderer",props:{authInfo:{type:Object,default:()=>{}},companyInfo:{type:Object,default:()=>{}},portalInfo:{type:Object,default:()=>{}},whiteLabel:{type:Boolean,default:!1},tag:{type:String,default:""},version:{type:String,default:""},dummyInstall:{type:[Boolean,String,Number],default:""},isMailConfigured:{type:[Boolean,String,Number],default:""},is2faEnforced:{type:[Boolean,String,Number],default:""},is2faEnabled:{type:[Boolean,String,Number],default:""},isUpdatedVersion:{type:[Boolean,Number,String],default:!1}},data(){return{updatedAuth:this.authInfo,loading:!1,updatedPortal:this.portalInfo,updatedCompany:this.companyInfo,counter:0,showModal:!1,isFactorEnforce:this.is2faEnforced,isFactorEnable:this.is2faEnabled}},mixins:[me],watch:{$route(e,t){this.fireScripts(e.path,"adminlayout"),!this.isFactorEnable&&this.isFactorEnforce&&(this.showModal=!0),this.$store.dispatch("unsetAlert"),this.$store.dispatch("unsetValidationError")}},beforeMount(){this.getScripts("adminlayout"),this.isFactorEnforce&&!this.isFactorEnable&&(this.showModal=!0)},created(){window.emitter.on("updateAgentProfile",this.updateProfile),window.emitter.on("companySettingsUpdated",this.updateCompany),window.emitter.on("securitySettingsUpdated",this.updateEnforce),window.emitter.on("updateEditData",this.updateFactor)},methods:{updateEnforce(e){this.isFactorEnforce=e,this.isFactorEnforce&&!this.isFactorEnable&&(this.$store.dispatch("unsetValidationError"),this.showModal=!0)},updateFactor(e){this.isFactorEnable=e,this.isFactorEnforce&&!this.isFactorEnable&&(this.$store.dispatch("unsetValidationError"),this.showModal=!0)},updateCompany(){axios.get("/api/admin/layout").then(e=>{this.updatedCompany=e.data.data.company,this.updatedPortal=e.data.data.portal,this.counter+=1}).catch(e=>{this.loading=!1})},updateProfile(e){Object.keys(this.updatedAuth.user_data).forEach(t=>this.updatedAuth.user_data[t]=e[t]||this.updatedAuth.user_data[t])},onClose(e){(this.isFactorEnforce&&this.isFactorEnable||!this.isFactorEnforce||e==="2faDone")&&(this.showModal=!1),this.$store.dispatch("unsetValidationError")}},components:{"barcode-modal":ce}};function Ae(e,t,i,r,u,n){const f=_("router-view"),s=_("barcode-modal");return o(),l(w,null,[!u.loading&&!u.showModal?(o(),D(f,{auth:u.updatedAuth,company:u.updatedCompany,portal:u.updatedPortal,whiteLabel:i.whiteLabel,tag:i.tag,version:i.version,dummyInstall:i.dummyInstall,isMailConfigured:i.isMailConfigured,key:u.counter,isUpdatedVersion:i.isUpdatedVersion},null,8,["auth","company","portal","whiteLabel","tag","version","dummyInstall","isMailConfigured","isUpdatedVersion"])):m("",!0),u.showModal?(o(),D(P,{key:1,name:"modal"},{default:A(()=>[b(s,{onClose:n.onClose,showModal:u.showModal},null,8,["onClose","showModal"])]),_:1})):m("",!0)],64)}const Be=C(Ee,[["render",Ae]]);const Me={setup(){const e=q();return{menuItems:$(()=>e.getters.getFormMenus),categoryType:$(()=>e.getters.getFormCategoryType)}},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!1},selectedOption:{type:[String,Object],required:!1}},data:()=>({}),methods:{removeElementAt(){window.emitter.emit("onRemoveElement",{fieldData:this.fieldData,reference_id:this.fieldData.reference_id,reference_type:this.fieldData.reference_type})},canAddChild(){return this.categoryType!="ticket"&&this.categoryType!="user"&&this.fieldData.label=="Department"?!1:typeof this.selectedOption!="string"&&V(this.selectedOption)}}},Te={title:""},Ie={key:0,class:"dropdown"},Ve={class:"btn btn-light","data-bs-toggle":"dropdown"},$e={class:"dropdown-menu",role:"menu","aria-labelledby":"dropdownMenu"},xe=["onClick"],Le={class:"nav-link text-dark",href:"javascript:void(0);"};function Ue(e,t,i,r,u,n){const f=N("tooltip");return o(),l("div",Te,[g((o(),l("button",{class:"btn btn-light",onClick:t[0]||(t[0]=s=>i.onEditFormField(i.fieldData))},t[2]||(t[2]=[a("i",{class:"fa-solid fa-gear","aria-hidden":"true"},null,-1)]))),[[f,e.lang("edit")]]),n.canAddChild()?(o(),l("span",Ie,[g((o(),l("button",Ve,t[3]||(t[3]=[a("i",{class:"fas fa-plus","aria-hidden":"true"},null,-1)]))),[[f,e.lang("add_child")]]),a("ul",$e,[(o(!0),l(w,null,S(r.menuItems,(s,c)=>(o(),l("li",{key:s.id,onClick:d=>i.onChildClick(c,i.selectedOption),class:"nav-item"},[a("a",Le,h(s.title),1)],8,xe))),128))])])):m("",!0),i.fieldData.is_deletable?g((o(),l("button",{key:1,class:"btn btn-secondary",onClick:t[1]||(t[1]=s=>n.removeElementAt())},t[4]||(t[4]=[a("i",{class:"fa-solid fa-trash","aria-hidden":"true"},null,-1)]))),[[f,e.lang("delete")]]):m("",!0)])}const T=C(Me,[["render",Ue],["__scopeId","data-v-d5865f88"]]);const qe={props:{fieldData:{type:Object,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({imageUrl:"/themes/default/client/images/enterarrow.png"}),computed:{getUniqueKey:function(){return this.fieldData.title+"_"+this.fieldData.id}}},je={class:"form-field-label"},Pe=["src"],Ne=["name"],He={class:"error-block is-danger"};function Re(e,t,i,r,u,n){const f=_("ValidationProvider"),s=N("tooltip");return o(),l("div",je,[i.isChild?(o(),l("img",{key:0,id:"enter-arrow",width:"16",height:"16",src:e.basePathVersion()+e.imageUrl,alt:""},null,8,Pe)):m("",!0),b(f,{name:n.getUniqueKey,rules:"required",modelValue:i.fieldData.labels_for_form_field[0].label,"onUpdate:modelValue":t[1]||(t[1]=c=>i.fieldData.labels_for_form_field[0].label=c),modelModifiers:{trim:!0}},{default:A(({field:c,errorMessage:d,meta:v,classes:k})=>[g(a("input",{type:"text",name:n.getUniqueKey,"onUpdate:modelValue":t[0]||(t[0]=y=>i.fieldData.labels_for_form_field[0].label=y),class:H(d?"field-danger":"")},null,10,Ne),[[s,e.lang("tap_to_edit")],[O,i.fieldData.labels_for_form_field[0].label,void 0,{trim:!0}]]),a("div",null,[g(a("small",null,[a("span",He,h(d),1)],512),[[U,d]])])]),_:1},8,["name","modelValue"])])}const I=C(qe,[["render",Re],["__scopeId","data-v-a013cabe"]]);const Ke={components:{"form-field-actions":T,"fb-form-field-label":I},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({}),computed:{getSimpleFieldPlaceholder:function(){let e="short_text";return this.fieldData.title==="Attachments"?e="attach_file":this.fieldData.type==="email"?e="email@example.com":this.fieldData.title==="Asset Image"?e="asset_image":this.fieldData.title==="Api"&&(e="api_endpoint"),e}},methods:{isSimpleField(){return["text","number","date","email","file","image","taggable","float"].indexOf(this.fieldData.type)>-1}}},ze={class:"row form-field"},Je={class:"col-md-3"},Ge={class:"col-md-6"},We=["id","placeholder"],Ye=["id","placeholder"],Ze={class:"col-md-3",style:{display:"flex"}},Qe={class:"form-field-actions-btn"};function Xe(e,t,i,r,u,n){const f=_("fb-form-field-label"),s=_("form-field-actions");return o(),l("div",ze,[a("div",Je,[b(f,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",Ge,[n.isSimpleField()||i.fieldData.title==="Api"?(o(),l("input",{key:0,id:"short-text-input"+i.fieldData.id,class:"form-control",type:"text",placeholder:e.lang(n.getSimpleFieldPlaceholder),disabled:""},null,8,We)):m("",!0),i.fieldData.type=="textarea"||i.fieldData.type=="htmltextarea"?(o(),l("textarea",{key:1,id:"long-text-input"+i.fieldData.id,class:"form-control",rows:"1",placeholder:e.lang("long_text"),disabled:""},null,8,Ye)):m("",!0)]),a("div",Ze,[t[0]||(t[0]=a("span",{class:"space-filler"},null,-1)),a("div",Qe,[b(s,{"on-edit-form-field":i.onEditFormField,"field-data":i.fieldData},null,8,["on-edit-form-field","field-data"])])])])}const et=C(Ke,[["render",Xe],["__scopeId","data-v-45b789e9"]]);const tt={name:"FBSelect",components:{"form-field-actions":T,"fb-form-field-label":I},props:{fieldData:{type:Object,required:!0},isDisabled:{type:Boolean,default:()=>!1},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({selectedOption:"Select option"}),beforeMount(){this.getDepartmentHelptopicOptions()},methods:{getDepartmentHelptopicOptions(){if(this.fieldData.title==="Help Topic"||this.fieldData.title==="Department"){this.selectedOption="Select option";const e=this.getApiConfigObj(),t={meta:!0,limit:"all","sort-order":"asc","sort-field":"id",config:!0};axios.get(e.apiUrl,{params:t}).then(i=>{this.fieldData.options=[],i.data.data[e.dataKay].map(u=>{const n={id:u.id,value:u.id,labels:[{id:null,language:"en",label:u.name}],nodes:u.nodes,sort_order:0};this.fieldData.options.push(n)})})}},getApiConfigObj(){let e={};return this.fieldData.title==="Help Topic"?(e.apiUrl="api/dependency/help-topics",e.dataKay="help_topics"):this.fieldData.title==="Department"&&(e.apiUrl="api/dependency/departments",e.dataKay="departments"),e},showNestedFields(e,t){return typeof t>"u"&&(t=this.selectedOption),t&&t.id===e.id}},watch:{fieldData:function(e,t){this.fieldData.options&&this.fieldData.options.length===0&&this.getDepartmentHelptopicOptions()}}},it={class:"row form-field"},at={class:"col-md-3"},ot={class:"col-md-6"},lt=["disabled"],nt=["value"],dt={class:"col-md-3",style:{display:"flex"}},st={class:"form-field-actions-btn"},rt={key:0};function ut(e,t,i,r,u,n){const f=_("fb-form-field-label"),s=_("form-field-actions"),c=_("draggable-form-field-item");return o(),l("div",null,[a("div",it,[a("div",at,[b(f,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",ot,[g(a("select",{id:"select-field-id",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=d=>e.selectedOption=d),disabled:i.isDisabled},[t[1]||(t[1]=a("option",{selected:""},"Select option",-1)),(o(!0),l(w,null,S(i.fieldData.options,d=>(o(),l("option",{key:d.id,value:d},h(d.labels[0].label),9,nt))),128))],8,lt),[[Y,e.selectedOption]])]),a("div",dt,[t[2]||(t[2]=a("span",{class:"space-filler"},null,-1)),a("div",st,[b(s,{"on-edit-form-field":i.onEditFormField,"on-child-click":i.onChildClick,"selected-option":e.selectedOption,"field-data":i.fieldData},null,8,["on-edit-form-field","on-child-click","selected-option","field-data"])])])]),i.fieldData.options&&i.fieldData.options.length!==0?(o(),l("div",rt,[(o(!0),l(w,null,S(i.fieldData.options,d=>(o(),l("div",{key:d.id,class:"item-sub"},[n.showNestedFields(d)?(o(),D(c,{key:0,list:d.nodes,isChild:!0,keyVal:d.id},null,8,["list","keyVal"])):m("",!0)]))),128))])):m("",!0)])}const ft=C(tt,[["render",ut],["__scopeId","data-v-82fe7c99"]]);const ct={name:"FBCheckbox",components:{"form-field-actions":T,"fb-form-field-label":I},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({selectedOption:[]}),methods:{showNestedFields(e,t){return typeof t>"u"&&(t=this.selectedOption),!!(t&&t.id===e.id)}}},mt={class:"row form-field"},pt={class:"col-md-3"},_t={class:"col-md-6 from-check"},ht={key:0},gt=["for"],bt=["id","name","value","disabled"],yt={key:1},vt={class:"col-md-3",style:{display:"flex"}},Ft={class:"form-field-actions-btn"},Dt={key:0};function Ct(e,t,i,r,u,n){const f=_("fb-form-field-label"),s=_("form-field-actions"),c=_("draggable-form-field-item");return o(),l("div",null,[a("div",mt,[a("div",pt,[b(f,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",_t,[i.fieldData.options.length>0?(o(),l("div",ht,[(o(!0),l(w,null,S(i.fieldData.options,(d,v)=>(o(),l("div",{class:"checkbox",key:v},[a("label",{for:"checkbox_"+d.id},[g(a("input",{type:"checkbox",class:"form-check-input",id:"checkbox_"+d.id,name:i.fieldData.id,value:d,"onUpdate:modelValue":t[0]||(t[0]=k=>e.selectedOption=k),disabled:i.fieldData.default},null,8,bt),[[B,e.selectedOption]]),E(" "+h(d.labels[0].label),1)],8,gt)]))),128))])):(o(),l("div",yt,t[1]||(t[1]=[a("label",{for:"checkbox_preview",style:{color:"#9a9a9a"}},[a("input",{disabled:"",type:"checkbox",name:"checkbox_preview",id:"checkbox_preview"}),E(" Add option ")],-1)])))]),a("div",vt,[t[2]||(t[2]=a("span",{class:"space-filler"},null,-1)),a("div",Ft,[b(s,{"on-edit-form-field":i.onEditFormField,"on-child-click":i.onChildClick,"selected-option":e.selectedOption,"field-data":i.fieldData},null,8,["on-edit-form-field","on-child-click","selected-option","field-data"])])])]),i.fieldData.options&&i.fieldData.options.length!==0?(o(),l("div",Dt,[(o(!0),l(w,null,S(e.selectedOption,(d,v)=>(o(),l("div",{key:v},[(o(!0),l(w,null,S(i.fieldData.options,k=>(o(),l("div",{key:k.id,class:"item-sub"},[n.showNestedFields(k,d)?(o(),D(c,{key:0,list:k.nodes,isChild:!0,keyVal:k.id},null,8,["list","keyVal"])):m("",!0)]))),128))]))),128))])):m("",!0)])}const kt=C(ct,[["render",Ct],["__scopeId","data-v-c8d47deb"]]);const wt={name:"FBRadio",components:{"form-field-actions":T,"fb-form-field-label":I},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},onChildClick:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({selectedOption:null}),methods:{showNestedFields(e,t){return!!(t&&t.id===e.id)}}},St={class:"row form-field"},Ot={class:"col-md-3"},Et={class:"col-md-6 form-radio"},At={key:0},Bt=["for"],Mt=["name","id","value"],Tt={key:1},It={class:"col-md-3",style:{display:"flex"}},Vt={class:"form-field-actions-btn"},$t={key:0};function xt(e,t,i,r,u,n){const f=_("fb-form-field-label"),s=_("form-field-actions"),c=_("draggable-form-field-item");return o(),l("div",null,[a("div",St,[a("div",Ot,[b(f,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",Et,[i.fieldData.options.length>0?(o(),l("div",At,[(o(!0),l(w,null,S(i.fieldData.options,d=>(o(),l("div",{class:"radio",key:d.id},[a("label",{for:"radio_"+d.id},[g(a("input",{type:"radio",class:"form-check-input",name:i.fieldData.id,id:"radio_"+d.id,"onUpdate:modelValue":t[0]||(t[0]=v=>e.selectedOption=v),value:d},null,8,Mt),[[Z,e.selectedOption]]),E(" "+h(d.labels[0].label),1)],8,Bt)]))),128))])):(o(),l("div",Tt,t[1]||(t[1]=[a("label",{for:"radio_preview",style:{color:"#9a9a9a"}},[a("input",{disabled:"",type:"radio",name:"radio_preview",id:"radio_preview"}),E(" Add option ")],-1)])))]),a("div",It,[t[2]||(t[2]=a("span",{class:"space-filler"},null,-1)),a("div",Vt,[b(s,{"on-edit-form-field":i.onEditFormField,"on-child-click":i.onChildClick,"selected-option":e.selectedOption,"field-data":i.fieldData},null,8,["on-edit-form-field","on-child-click","selected-option","field-data"])])])]),i.fieldData.options&&i.fieldData.options.length!==0?(o(),l("div",$t,[(o(!0),l(w,null,S(i.fieldData.options,d=>(o(),l("div",{key:d.id,class:"item-sub"},[e.selectedOption&&e.selectedOption.id===d.id?(o(),D(c,{key:0,list:d.nodes,isChild:!0,keyVal:d.id},null,8,["list","keyVal"])):m("",!0)]))),128))])):m("",!0)])}const Lt=C(wt,[["render",xt],["__scopeId","data-v-4e381187"]]);const Ut={components:{"form-field-actions":T},props:{fieldData:{type:Object,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({imageUrl:"/themes/default/client/images/enterarrow.png"}),methods:{onEditFormField(){this.$router.push({path:this.fieldData.edit_url})}}},qt={class:"row form-field"},jt={class:"col-md-3 form-field-label"},Pt=["src"],Nt=["value"],Ht={class:"col-md-6"},Rt=["placeholder"],Kt={class:"col-md-3",style:{display:"flex"}},zt={class:"form-field-actions-btn"};function Jt(e,t,i,r,u,n){const f=_("form-field-actions");return o(),l("div",qt,[a("div",jt,[i.isChild?(o(),l("img",{key:0,width:"16",height:"16",id:"enter-arrow",src:e.basePathVersion()+e.imageUrl,alt:""},null,8,Pt)):m("",!0),a("input",{type:"text",readonly:"",value:i.fieldData.name},null,8,Nt)]),a("div",Ht,[a("input",{class:"form-control",type:"text",placeholder:e.lang("this_is_form_group"),disabled:""},null,8,Rt)]),a("div",Kt,[t[0]||(t[0]=a("span",{class:"space-filler"},null,-1)),a("div",zt,[b(f,{"on-edit-form-field":n.onEditFormField,"field-data":i.fieldData},null,8,["on-edit-form-field","field-data"])])])])}const Gt=C(Ut,[["render",Jt],["__scopeId","data-v-905362b0"]]);const Wt={components:{"form-field-actions":T,"fb-form-field-label":I},props:{fieldData:{type:Object,required:!0},onEditFormField:{type:Function,required:!0},isChild:{type:Boolean,default:()=>!1}},data:()=>({})},Yt={class:"row form-field"},Zt={class:"col-md-3"},Qt={class:"col-md-6"},Xt=["id","placeholder"],ei={class:"col-md-3",style:{display:"flex"}},ti={class:"form-field-actions-btn"};function ii(e,t,i,r,u,n){const f=_("fb-form-field-label"),s=_("form-field-actions");return o(),l("div",Yt,[a("div",Zt,[b(f,{"field-data":i.fieldData,"is-child":i.isChild},null,8,["field-data","is-child"])]),a("div",Qt,[a("input",{id:"short-text-input"+i.fieldData.id,class:"form-control",type:"text",placeholder:i.fieldData.description,disabled:""},null,8,Xt)]),a("div",ei,[t[0]||(t[0]=a("span",{class:"space-filler"},null,-1)),a("div",ti,[b(s,{"on-edit-form-field":i.onEditFormField,"field-data":i.fieldData},null,8,["on-edit-form-field","field-data"])])])])}const ai=C(Wt,[["render",ii],["__scopeId","data-v-b05da910"]]),oi={name:"api-info-block",props:{formFieldData:{type:Object,required:!0},updateApiInfo:{type:Function,required:!0}},data:()=>({apiInfoObj:null}),beforeMount(){this.apiInfoObj=j.convertStringOfPropertiesToObject(this.formFieldData.api_info)},methods:{onChange:R.debounce(function(){this.updateApiInfo(j.convertObjectOfPropertiesToString(this.apiInfoObj))},350)},components:{"tool-tip":K}},li={class:"row p-2"},ni={class:"col-md-8",style:{"padding-top":"10px"}},di={for:"apiendpoint"},si={class:"input-group",style:{width:"100%"}},ri={class:"col-md-4",style:{"padding-top":"10px"}},ui={for:"apiendpoint"},fi={class:"input-group",style:{width:"100%"}};function ci(e,t,i,r,u,n){const f=_("tool-tip");return o(),l("div",li,[a("div",ni,[a("label",di,h(e.lang("api_endpoint")),1),b(f,{message:e.lang("api_endpoint_is_the_url"),size:"small"},null,8,["message"]),a("div",si,[g(a("input",{type:"text",class:"form-control",id:"apiendpoint","onUpdate:modelValue":t[0]||(t[0]=s=>e.apiInfoObj.url=s),onInput:t[1]||(t[1]=s=>n.onChange()),placeholder:"https://testapi.com/my/api/path"},null,544),[[O,e.apiInfoObj.url,void 0,{trim:!0}]])])]),a("div",ri,[a("label",ui,h(e.lang("property_to_map")),1),b(f,{message:e.lang("this_property_will_get_saved_when_user_submit_the_form"),size:"small"},null,8,["message"]),a("div",fi,[g(a("input",{type:"text",class:"form-control",id:"apiendpoint","onUpdate:modelValue":t[2]||(t[2]=s=>e.apiInfoObj.key=s),onInput:t[3]||(t[3]=s=>n.onChange()),placeholder:"id"},null,544),[[O,e.apiInfoObj.key,void 0,{trim:!0}]])])])])}const mi=C(oi,[["render",ci]]);const pi={name:"FB-configuration-settings",setup(){const e=q();return{formCategoryType:$(()=>e.getters.getFormCategoryType)}},props:{formFieldData:{type:Object,required:!0}},data:()=>({defaultCategories:["ticket","organisation","user","asset","change","license"]}),methods:{onCheckboxClick(e){this.formFieldData[e]=!1},updateApiInfo(e){this.formFieldData.api_info=e},isAgentConfig(e){return this.formCategoryType==="group"?!0:this.defaultCategories.includes(this.formCategoryType)?e.is_agent_config:!1}},components:{"tool-tip":K,"api-info-block":mi}},_i={class:"row mt-2 p-2"},hi={key:0,class:"col-md-6"},gi={class:"form-check"},bi={class:"form-check-label",for:"display-for-agent"},yi={key:0,class:"form-check"},vi=["disabled"],Fi={class:"form-check-label",for:"required-for-agent"},Di={key:1,class:"col-md-6"},Ci={class:"form-check"},ki={key:0,class:"form-check"},wi=["disabled"],Si={class:"form-check-label",for:"required-for-clinet"},Oi={key:1,class:"col-md-12",style:{"padding-top":"10px"}},Ei={for:"shortcode"},Ai={key:2,class:"col-md-12",style:{"padding-top":"10px"}},Bi={for:"description"},Mi=["placeholder"],Ti={class:"d-flex"},Ii={key:0,class:"col-md-6"},Vi={class:"form-check"},$i={for:"add-media-cb"},xi={key:1,class:"col-md-6"},Li={class:"form-check"},Ui={for:"form-tooltip"},qi={key:0,class:"col-md-12",style:{"padding-top":"10px"}},ji=["href"];function Pi(e,t,i,r,u,n){const f=_("api-info-block"),s=_("tool-tip");return o(),l("div",null,[a("div",_i,[n.isAgentConfig(i.formFieldData)?(o(),l("div",hi,[a("label",null,h(e.lang("agent")),1),a("div",gi,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[0]||(t[0]=c=>i.formFieldData.display_for_agent=c),id:"display-for-agent",onClick:t[1]||(t[1]=c=>n.onCheckboxClick("required_for_agent"))},null,512),[[B,i.formFieldData.display_for_agent]]),a("label",bi,h(e.lang("display_in_form")),1)]),i.formFieldData.title!=="Captcha"?(o(),l("div",yi,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[2]||(t[2]=c=>i.formFieldData.required_for_agent=c),disabled:!i.formFieldData.display_for_agent&&i.formFieldData.title!=="Captcha",id:"required-for-agent"},null,8,vi),[[B,i.formFieldData.required_for_agent]]),a("label",Fi,h(e.lang("required_when_submitting_the_form")),1)])):m("",!0)])):m("",!0),(e.defaultCategories.includes(r.formCategoryType)?i.formFieldData.title!=="CC"&&i.formFieldData.title!=="Assigned"&&i.formFieldData.is_user_config:i.formFieldData.title!=="CC"&&i.formFieldData.title!=="Assigned")?(o(),l("div",Di,[a("label",null,h(e.lang("client")),1),a("div",Ci,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[3]||(t[3]=c=>i.formFieldData.display_for_user=c),id:"display-for-client"},null,512),[[B,i.formFieldData.display_for_user]]),a("label",{class:"form-check-label",for:"display-for-client",onClick:t[4]||(t[4]=c=>n.onCheckboxClick("required_for_user"))},h(e.lang("display_in_form")),1)]),i.formFieldData.title!=="Captcha"?(o(),l("div",ki,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,"onUpdate:modelValue":t[5]||(t[5]=c=>i.formFieldData.required_for_user=c),disabled:!i.formFieldData.display_for_user&&i.formFieldData.title!=="Captcha",id:"required-for-clinet"},null,8,wi),[[B,i.formFieldData.required_for_user]]),a("label",Si,h(e.lang("required_when_submitting_the_form")),1)])):m("",!0)])):m("",!0)]),i.formFieldData.title==="Api"?(o(),D(f,{key:0,"form-field-data":i.formFieldData,"update-api-info":n.updateApiInfo},null,8,["form-field-data","update-api-info"])):m("",!0),i.formFieldData.default?m("",!0):(o(),l("div",Oi,[a("label",Ei,h(e.lang("shortcode")),1),b(s,{message:e.lang("ticket_custom_field_shortcode_value"),size:"small"},null,8,["message"]),g(a("input",{type:"text",name:"shortcode",id:"shortcode",onKeydown:t[6]||(t[6]=z(Q(()=>{},["prevent"]),["space"])),class:"form-control","onUpdate:modelValue":t[7]||(t[7]=c=>i.formFieldData.shortcode=c)},null,544),[[O,i.formFieldData.shortcode]])])),i.formFieldData.title!="Captcha"?(o(),l("div",Ai,[a("label",Bi,h(e.lang("description")),1),g(a("textarea",{name:"description",id:"description",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=c=>i.formFieldData.labels_for_form_field[0].description=c),placeholder:e.lang("form_field_tooltip_description_message")},null,8,Mi),[[O,i.formFieldData.labels_for_form_field[0].description]])])):m("",!0),a("div",null,[a("div",Ti,[i.formFieldData.title=="Description"&&i.formFieldData.title!="Captcha"&&r.formCategoryType=="ticket"?(o(),l("div",Ii,[a("div",Vi,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,id:"add-media-cb","onUpdate:modelValue":t[9]||(t[9]=c=>i.formFieldData.media_option=c)},null,512),[[B,i.formFieldData.media_option]]),a("label",$i,h(e.lang("can_agent_add_media")),1)])])):m("",!0),i.formFieldData.title!="Captcha"?(o(),l("div",xi,[a("div",Li,[g(a("input",{class:"form-check-input",type:"checkbox","false-value":0,"true-value":1,id:"form-tooltip","onUpdate:modelValue":t[10]||(t[10]=c=>i.formFieldData.show_description_under_form_field=c)},null,512),[[B,i.formFieldData.show_description_under_form_field]]),a("label",Ui,h(e.lang("show_description_under_form_field")),1)])])):m("",!0)]),i.formFieldData.title==="Captcha"?(o(),l("div",qi,[a("p",null,[a("strong",null,[E(h(e.lang("captcha_config_message"))+" ",1),a("a",{href:e.basePath()+"/recaptcha",target:"_new",style:{"text-decoration":"underline"}},h(e.lang("here")),9,ji)])])])):m("",!0)])])}const Ni=C(pi,[["render",Pi],["__scopeId","data-v-bf454f1d"]]);const Hi={name:"language-dropdown",data(){return{languageList:[],isLoading:!1}},methods:{getLanguageList(){this.isLoading=!0,J.get("api/dependency/languages?meta=true").then(e=>{this.languageList=e.data.data.languages.sort((t,i)=>t.name<i.name?-1:i.name<t.name?1:0)}).catch(e=>{this.languageList=[]}).finally(()=>{this.isLoading=!1})},getLocalFlag(e){return this.basePathVersion()+"/themes/default/common/images/flags/"+e+".png"},changeFlag(e){let t={};t.language=e,this.$emit("getflag",t)}}},Ri={class:"language-menu"},Ki={class:"dropdown-menu dropdown-menu-lg language-dropdown","aria-labelledby":"language-list-dropdown"},zi={key:0,class:"nav-item mt-2"},Ji=["onClick"],Gi=["src"];function Wi(e,t,i,r,u,n){const f=_("loader");return o(),l("div",Ri,[a("button",{class:"btn btn-light dropdown-toggle",type:"button",id:"language-list-dropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",onClick:t[0]||(t[0]=s=>n.getLanguageList())},[E(h(e.lang("add_new_language"))+" ",1),t[1]||(t[1]=a("span",{class:"caret"},null,-1))]),a("ul",Ki,[u.isLoading?(o(),l("li",zi,[b(f,{size:30})])):(o(!0),l(w,{key:1},S(u.languageList,s=>(o(),l("li",{key:s.id,class:"nav-item"},[a("a",{href:"javascript:void(0)",onClick:c=>n.changeFlag(s.locale),class:"nav-link text-dark"},[a("img",{src:n.getLocalFlag(s.locale)},null,8,Gi),E(" "+h(s.name),1)],8,Ji)]))),128))])])}const Yi=C(Hi,[["render",Wi],["__scopeId","data-v-9dd4e374"]]);const Zi={name:"FB-add-language",components:{"language-dropdown":Yi},props:{formFieldData:{type:Object,required:!0}},data:()=>({}),computed:{canChangeLanguageForOptions(){return!["Department","Help Topic"].includes(this.formFieldData.title)}},methods:{assignNewLanguage(e){const t=this.getCurrentTimestamp();e.form_identifier=t,e.id=t,this.formFieldData.options&&this.canChangeLanguageForOptions&&this.formFieldData.options.forEach(i=>{e.label=i.labels[0].label,this.isLangPresentAlready(i.labels,e.language)||i.labels.push(new Object(Object.assign({},e)))}),this.isLangPresentAlready(this.formFieldData.labels_for_form_field,e.language)||(e.label=this.formFieldData.labels_for_form_field[0].label,e.description=this.formFieldData.labels_for_form_field[0].description,this.formFieldData.labels_for_form_field.push(new Object(Object.assign({},e))))},getLocalFlag(e){return this.basePathVersion()+"/themes/default/common/images/flags/"+e+".png"},isLangPresentAlready(e,t){return R.findIndex(e,i=>i.language===t)>-1},getCurrentTimestamp(){return new Date().getTime()}}},Qi={class:"col-md-12 language-menu-dropdown"},Xi={class:"col-md-12 add-language-box"},ea={class:"label-word-break"},ta={class:"li-child"},ia=["for"],aa=["src"],oa={class:"form-field-label"},la=["name","onUpdate:modelValue"],na=["name","onUpdate:modelValue"],da={key:0,style:{display:"inline-flex"}},sa={class:"label-word-break"},ra={class:"li-child"},ua=["for"],fa=["src"],ca={class:"form-field-label"},ma=["name","onUpdate:modelValue"];function pa(e,t,i,r,u,n){const f=_("language-dropdown");return o(),l("div",null,[a("div",Qi,[b(f,{onGetflag:n.assignNewLanguage},null,8,["onGetflag"])]),a("div",Xi,[a("label",ea,[a("strong",null,h(i.formFieldData.labels_for_form_field[0].label),1)]),a("div",ta,[(o(!0),l(w,null,S(i.formFieldData.labels_for_form_field,(s,c)=>(o(),l("div",{key:c},[a("div",null,[a("label",{style:{float:"left"},for:s.label+"_"+c},[a("img",{src:n.getLocalFlag(s.language)},null,8,aa),t[0]||(t[0]=E("  "))],8,ia),a("div",oa,[g(a("input",{name:s.label+"_"+c,type:"text","onUpdate:modelValue":d=>s.label=d},null,8,la),[[O,s.label]]),g(a("textarea",{class:"form-control col-md-12 textarea",placeholder:"Description",name:s.description+"_"+c,type:"text","onUpdate:modelValue":d=>s.description=d},null,8,na),[[O,s.description]])])])]))),128))]),i.formFieldData.options&&i.formFieldData.options.length>0&&n.canChangeLanguageForOptions?(o(),l("span",da,[(o(!0),l(w,null,S(i.formFieldData.options,(s,c)=>(o(),l("li",{class:"add-language-li",key:c},[a("label",sa,[a("strong",null,h(s.labels[0].label),1)]),a("ul",ra,[(o(!0),l(w,null,S(s.labels,(d,v)=>(o(),l("li",{key:v},[a("div",null,[a("label",{style:{float:"left"},for:d.label+"_"+v},[a("img",{src:n.getLocalFlag(d.language)},null,8,fa),t[1]||(t[1]=E("  "))],8,ua),a("div",ca,[g(a("input",{name:d.label+"_"+v,type:"text","onUpdate:modelValue":k=>d.label=k},null,8,ma),[[O,d.label]])])])]))),128))])]))),128))])):m("",!0)])])}const _a=C(Zi,[["render",pa],["__scopeId","data-v-3e296d8e"]]);const ha={props:{formFieldData:{type:Object,required:!0}},data:()=>({})},ga={class:"mb-3"},ba=["placeholder"],ya={class:"mb-3"},va=["placeholder"];function Fa(e,t,i,r,u,n){return o(),l("div",null,[a("div",ga,[a("label",null,h(e.lang("pattern_regex")),1),g(a("input",{type:"text",class:"form-input-box","onUpdate:modelValue":t[0]||(t[0]=f=>i.formFieldData.pattern=f),placeholder:e.lang("pattern_help_message")},null,8,ba),[[O,i.formFieldData.pattern]])]),a("div",ya,[a("label",null,h(e.lang("validation_message")),1),i.formFieldData.labels_for_validation[0]?g((o(),l("input",{key:1,type:"text",class:"form-input-box","onUpdate:modelValue":t[1]||(t[1]=f=>i.formFieldData.labels_for_validation[0].label=f)},null,512)),[[O,i.formFieldData.labels_for_validation[0].label]]):(o(),l("input",{key:0,type:"text",class:"form-input-box",placeholder:e.lang("regex_with_validation_message")},null,8,va))])])}const Da=C(ha,[["render",Fa],["__scopeId","data-v-0abfadbe"]]);const Ca={name:"",props:{optionIndex:{type:Number,required:!0},value:{type:String,required:!0}},data:()=>({isEditMode:!1,editedValue:""}),beforeMount(){this.editedValue=this.value},methods:{onDoubleClick(){this.isEditMode=!0,this.$nextTick(()=>{this.$refs["editWorkplace_"+this.optionIndex].focus()})},onDelete(){this.$emit("on-delete",this.optionIndex)},onCancelEdit(){this.isEditMode=!1},updateValue(){this.isEditMode=!1,this.editedValue===""&&(this.editedValue=this.value),this.$emit("on-update",{newValue:this.editedValue,index:this.optionIndex})}}},ka={class:"option-box"},wa=["title"];function Sa(e,t,i,r,u,n){return o(),l("div",ka,[g(a("span",{onDblclick:t[0]||(t[0]=f=>n.onDoubleClick())},h(i.value),545),[[U,!e.isEditMode]]),g(a("input",{ref:"editWorkplace_"+i.optionIndex,"onUpdate:modelValue":t[1]||(t[1]=f=>e.editedValue=f),onKeyup:t[2]||(t[2]=z(f=>n.updateValue(),["enter"]))},null,544),[[U,e.isEditMode],[O,e.editedValue,void 0,{trim:!0}]]),t[4]||(t[4]=E("  ")),a("i",{class:"fa fa-times fa__fb",id:"delete-option","aria-hidden":"true",onClick:t[3]||(t[3]=f=>e.isEditMode?n.onCancelEdit():n.onDelete()),title:e.isEditMode?e.lang("cancel"):e.lang("delete")},null,8,wa)])}const Oa=C(Ca,[["render",Sa],["__scopeId","data-v-7e7623cc"]]);const Ea={name:"form-builder-setting-modal",props:{fieldData:{type:Object,required:!0},isShowSettingModal:{type:Boolean,default:!1},onCloseSettingModal:{type:Function},title:{type:String,default:""}},data:()=>({isLoading:!1,containerStyle:{width:"800px"},fieldSettingData:null,newOption:"",currentTab:"",addOptionInputHelp:""}),computed:{tabsToShow:function(){const e=[{id:0,value:"configuration",show:!0},{id:1,value:"addOption",show:!0},{id:2,value:"validation",show:!0},{id:3,value:"language",show:!0}];this.isHideConfigurationTab()&&(e[0].show=!1),this.isHideAddOptionTab()&&(e[1].show=!1),this.isHideValidationTab()&&(e[2].show=!1),this.isHideLanguageTab()&&(e[3].show=!1);const t=e.filter(i=>i.show);return this.currentTab=t.length!==0?t[0].value:"",t}},beforeMount(){this.fieldSettingData=JSON.parse(JSON.stringify(this.fieldData))},methods:{isHideLanguageTab(){return this.fieldSettingData.title==="Captcha"},isHideConfigurationTab(){return!this.fieldSettingData.is_agent_config&&!this.fieldSettingData.is_user_config?!0:["First Name","Last Name","Requester"].includes(this.fieldSettingData.title)},isHideValidationTab(){return!((this.fieldSettingData.type==="text"||this.fieldSettingData.type==="textarea"||this.fieldSettingData.type==="htmltextarea")&&!this.fieldSettingData.default)},isHideAddOptionTab(){const e=["Department","Help Topic"];return!["select","radio","select2","checkbox","multiselect"].includes(this.fieldSettingData.type)||e.includes(this.fieldSettingData.title)||this.fieldSettingData.default||this.fieldSettingData.title==="Api"},updateOptionValue(e){this.isOptionAlreadyExist(e.newValue)||(this.fieldSettingData.options[e.index].labels[0].label=e.newValue)},deleteOption(e){if(this.fieldSettingData.options.length===1){this.$store.dispatch("setAlert",{type:"danger",message:X("option_can_not_be_empty_alert_msg"),component_name:"form-builder-setting-modal"});return}const t=this.fieldSettingData.options[e].id;t&&t.toString().length<13?confirm("Are you sure you want to delete?")&&(this.isLoading=!0,J.delete("api/delete-form-data/form-option/"+t).then(r=>{window.emitter.emit("getFormDataFromServer"),this.fieldSettingData.options.splice(e,1),ee(r,"form-builder-setting-modal")}).catch(r=>{te(r,"form-builder-setting-modal")}).finally(()=>{this.isLoading=!1})):this.fieldSettingData.options.splice(e,1)},addNewOption(e){if(!this.newOption){this.addOptionInputHelp="";return}if(this.addOptionInputHelp="Press enter to add",e.keyCode===13){if(this.addOptionInputHelp="",this.isOptionAlreadyExist(this.newOption)){this.newOption="";return}const t=this.getOptionDataObj();this.fieldData.type==="checkbox"&&(t.checked=!1),Array.isArray(t)?t.forEach(i=>{setTimeout(()=>{i.id=new Date().getTime(),i.form_identifier=new Date().getTime(),this.fieldSettingData.options.push(i)},1)}):this.fieldSettingData.options.push(t),this.newOption=""}},getOptionDataObj(){if(this.newOption.indexOf(",")>-1){let e=this.newOption.split(","),t=[];for(let i in e)t.push(this.updateOption(e[i]));return t}else return this.updateOption(this.newOption)},updateOption(e){const t=this.getCurrentTimestamp();return{id:t,form_identifier:t,labels:[{id:null,language:"en",label:e}],nodes:[],sort_order:0}},isOptionAlreadyExist(e){for(let t=0;t<this.fieldSettingData.options.length;t++){const i=this.fieldSettingData.options[t].labels;for(let r=0;r<i.length;r++)if(i[r].language==="en"&&i[r].label.toLowerCase()===e.toLowerCase()){const u=document.createElement("div");return u.innerText=e,this.$store.dispatch("setAlert",{type:"danger",message:`Option [${u.innerHTML}] already present.`,component_name:"form-builder-setting-modal"}),!0}}return!1},onTabChange(e){this.$store.dispatch("unsetAlert"),this.currentTab=e},onApply(){window.emitter.emit("formFieldSettingsApplied",this.fieldSettingData)},getCurrentTimestamp(){return new Date().getTime()}},beforeDestroy(){this.$store.dispatch("unsetAlert")},components:{"FB-configuration-settings":Ni,"FB-add-language":_a,"FB-field-validation":Da,"draggable-element":G,"nested-field-option":Oa}},Aa={draggable:"false"},Ba={class:"modal-title"},Ma={class:"modal-width"},Ta={key:0,class:"nav nav-tabs",role:"tablist"},Ia=["id"],Va=["onClick"],$a={key:1},xa={key:1},La={class:"mt-2 mb-2"},Ua={key:0,style:{color:"orangered"}},qa={class:"table"},ja={id:"horizontal-list"},Pa={class:"col-sm-12"},Na={class:"input-box-li"},Ha=["placeholder"],Ra={key:0,class:"add-option-loader float-end"},Ka={key:2},za={class:"alert alert-info",role:"alert"},Ja={key:0};function Ga(e,t,i,r,u,n){const f=_("alert"),s=_("FB-configuration-settings"),c=_("nested-field-option"),d=_("draggable-element"),v=_("loader"),k=_("FB-field-validation"),y=_("FB-add-language"),F=_("modal");return o(),l("div",Aa,[i.isShowSettingModal?(o(),D(F,{key:0,showModal:i.isShowSettingModal,onClose:i.onCloseSettingModal,containerStyle:e.containerStyle},{title:A(()=>[a("div",null,[a("h4",Ba,h(e.lang(i.title)+"("+e.fieldSettingData.labels_for_form_field[0].label+")"),1)])]),fields:A(()=>[a("div",Ma,[b(f,{componentName:"form-builder-setting-modal"}),n.tabsToShow.length?(o(),l("ul",Ta,[(o(!0),l(w,null,S(n.tabsToShow,p=>(o(),l("li",{class:"nav-item",key:p.id,id:p.id},[a("a",{href:"javascript:void(0)",class:H(["nav-link",e.currentTab===p.value?"active":""]),onClick:M=>n.onTabChange(p.value),"data-bs-toggle":"pill",role:"tab"},h(e.lang(p.value)),11,Va)],8,Ia))),128))])):m("",!0),n.tabsToShow.length?(o(),l("div",$a,[e.currentTab==="configuration"?(o(),D(s,{key:0,"form-field-data":e.fieldSettingData},null,8,["form-field-data"])):m("",!0),e.currentTab==="addOption"?(o(),l("div",xa,[a("div",null,[a("label",La,[E(h(e.lang("options"))+":",1),e.addOptionInputHelp?(o(),l("small",Ua,"("+h(e.addOptionInputHelp)+")",1)):m("",!0)]),a("div",qa,[a("ul",ja,[a("div",Pa,[b(d,{modelValue:e.fieldSettingData.options,"onUpdate:modelValue":t[0]||(t[0]=p=>e.fieldSettingData.options=p)},{item:A(({element:p,index:M})=>[(o(),l("li",{key:p.id},[b(c,{"option-index":M,value:p.labels[0].label,onOnDelete:n.deleteOption,onOnUpdate:n.updateOptionValue},null,8,["option-index","value","onOnDelete","onOnUpdate"])]))]),_:1},8,["modelValue"])]),a("li",Na,[g(a("input",{ref:"addOptionInput",type:"text",placeholder:e.lang("add_new_option"),class:"form-control add-option","onUpdate:modelValue":t[1]||(t[1]=p=>e.newOption=p),onKeyup:t[2]||(t[2]=p=>n.addNewOption(p))},null,40,Ha),[[O,e.newOption,void 0,{trim:!0}]])]),e.isLoading?(o(),l("li",Ra,[b(v,{size:20})])):m("",!0)])])])])):m("",!0),e.currentTab==="validation"?(o(),D(k,{key:2,"form-field-data":e.fieldSettingData},null,8,["form-field-data"])):m("",!0),e.currentTab==="language"?(o(),D(y,{key:3,"form-field-data":e.fieldSettingData},null,8,["form-field-data"])):m("",!0)])):(o(),l("div",Ka,[a("div",za,h(e.lang("this_field_is_not_editable")),1)]))])]),controls:A(()=>[n.tabsToShow.length?(o(),l("div",Ja,[a("button",{type:"button",class:"btn btn-primary pull-right",onClick:t[3]||(t[3]=p=>n.onApply())},[t[4]||(t[4]=a("i",{class:"fas fa-check"},null,-1)),E(" "+h(e.lang("apply")),1)])])):m("",!0)]),_:1},8,["showModal","onClose","containerStyle"])):m("",!0)])}const Wa=C(Ea,[["render",Ga],["__scopeId","data-v-acaa43b9"]]);const Ya={name:"draggable-form-field-item",components:{FBSimpleFields:et,FBSelect:ft,FBCheckbox:kt,FBRadio:Lt,"form-group-field":Gt,FBCustom:ai,"form-builder-setting-modal":Wa,"draggable-element":G},setup(){const e=q();return{isDisableDraging:$(()=>e.getters.isDisableDraging)}},props:{value:{type:Array,default:null},list:{type:Array,default:null},isChild:{type:Boolean,default:()=>!1},keyVal:{type:[String,Number],default:""}},data:function(){return{isDragInProgress:!1,menuItems:null,selectedFormFieldObject:null,showSettingModal:!1}},beforeMount(){this.menuItems=this.$store.getters.getFormMenus},created(){window.emitter.on("formFieldSettingsApplied",this.onCloseSettingModal)},computed:{dragOptions(){return{animation:200,group:this.isChild?"faveo-form-builder-"+(this.keyVal?this.keyVal:Math.random()):"faveo-form-builder",disabled:!1,ghostClass:"ghost"}},originalValue(){return this.value?this.value:this.list}},methods:{dragChangeEventEmitter(e){this.$emit("input",e)},isSimpleFields(e){return["text","number","date","email","file","image","textarea","htmltextarea","taggable","float"].indexOf(e.type)>-1},isDisableSelectBox(e){return e.default===1&&e.title!=="Help Topic"&&e.title!=="Department"},onChildClick(e,t){let i=JSON.parse(JSON.stringify(this.menuItems));const r=this.getCurrentTimestamp();if(i[e].form_identifier=r,i[e].id=r,Array.isArray(t))for(let u=0;u<t.length;u++)t[u].nodes.push(i[e]);else t.nodes.push(i[e])},onShowSettingModal(e){this.selectedFormFieldObject=e,this.$store.commit("updateIsDisableDraging",!0),this.showSettingModal=!0},onCloseSettingModal(){this.$store.commit("updateIsDisableDraging",!1),this.showSettingModal=!1},getCurrentTimestamp(){return new Date().getTime()}}},Za={class:"main-div__formbuilder"},Qa=["title"];function Xa(e,t,i,r,u,n){const f=_("FBSimpleFields"),s=_("FBSelect"),c=_("FBCheckbox"),d=_("FBRadio"),v=_("form-group-field"),k=_("FBCustom"),y=_("draggable-element"),F=_("form-builder-setting-modal");return o(),l("div",Za,[b(y,ie(n.dragOptions,{"component-data":{tag:"div",type:"transition-group",name:e.isDragInProgress?null:"flip-list"},class:"item-container",list:n.originalValue,onStart:t[0]||(t[0]=p=>e.isDragInProgress=!0),onEnd:t[1]||(t[1]=p=>e.isDragInProgress=!1),onInput:n.dragChangeEventEmitter,"empty-insert-threshold":230,disabled:r.isDisableDraging,itemKey:"id"}),{item:A(({element:p,index:M})=>[(o(),l("div",{class:"item-group form-field-element",title:e.lang("move"),key:p.groupid||p.id},[n.isSimpleFields(p)||p.title==="Api"?(o(),D(f,{key:0,"field-data":p,"on-edit-form-field":n.onShowSettingModal,isChild:i.isChild},null,8,["field-data","on-edit-form-field","isChild"])):m("",!0),p.title!=="Api"&&(p.type==="api"||p.type==="select"||p.type==="select2"||p.type==="multiselect")?(o(),D(s,{key:1,"field-data":p,isDisabled:n.isDisableSelectBox(p),"on-edit-form-field":n.onShowSettingModal,"on-child-click":n.onChildClick,isChild:i.isChild},null,8,["field-data","isDisabled","on-edit-form-field","on-child-click","isChild"])):m("",!0),p.type=="checkbox"?(o(),D(c,{key:2,"field-data":p,"on-edit-form-field":n.onShowSettingModal,"on-child-click":n.onChildClick,isChild:i.isChild},null,8,["field-data","on-edit-form-field","on-child-click","isChild"])):m("",!0),p.type=="radio"?(o(),D(d,{key:3,"field-data":p,"on-edit-form-field":n.onShowSettingModal,"on-child-click":n.onChildClick,isChild:i.isChild},null,8,["field-data","on-edit-form-field","on-child-click","isChild"])):m("",!0),p.type=="group"?(o(),D(v,{key:4,"field-data":p,isChild:i.isChild},null,8,["field-data","isChild"])):m("",!0),p.type=="custom"?(o(),D(k,{key:5,"field-data":p,"on-edit-form-field":n.onShowSettingModal,isChild:i.isChild},null,8,["field-data","on-edit-form-field","isChild"])):m("",!0)],8,Qa))]),_:1},16,["component-data","list","onInput","disabled"]),b(P,{name:"modal"},{default:A(()=>[e.showSettingModal?(o(),D(F,{key:0,title:"settings",onCloseSettingModal:n.onCloseSettingModal,isShowSettingModal:e.showSettingModal,"field-data":e.selectedFormFieldObject},null,8,["onCloseSettingModal","isShowSettingModal","field-data"])):m("",!0)]),_:1})])}const eo=C(Ya,[["render",Xa],["__scopeId","data-v-793eb0ff"]]);x.registerModule("faveoAutomator",De);x.registerModule("formBuilderStore",Oe);app.component("admin-panel-renderer",Be);app.component("draggable-form-field-item",eo);app.component("form-renderer",ae);app.component("alert",oe);app.component("modal",le);app.component("loader",he);app.component("custom-loader",ne);app.component("reuse-loader",de);app.component("faveo-box",se);app.component("faveo-image-element",re);app.component("data-table",ge);L.beforeEach((e,t,i)=>{if(sessionStorage.getItem("user_role")=="admin")i();else{let r=window.axios.defaults.baseURL;e.fullPath.includes("/thread/")&&(r+=e.fullPath),window.location.href=r}});setTimeout(()=>{app.use(L),app.use(x),app.mount("#app-admin")},1e3);L.beforeEach((e,t,i)=>{app.config.globalProperties.$Progress.start(),i()});L.afterEach(()=>{setTimeout(()=>{app.config.globalProperties.$Progress.finish()},1e3)});app.component("file-manager",pe);x.registerModule("fm",_e);app.component("file-manager-container",ue);
